<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>Next.js 15에서 generateSitemaps 기능 쉽게 구현하는 2025년 최신 가이드 | TIL</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://13akstjq.github.io/TIL//post/2025-04-22-generateSitemaps" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="Next.js 15에서 generateSitemaps 기능 쉽게 구현하는 2025년 최신 가이드 | TIL" data-gatsby-head="true"/><meta property="og:title" content="Next.js 15에서 generateSitemaps 기능 쉽게 구현하는 2025년 최신 가이드 | TIL" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/TIL/assets/img/nextjs.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://TIL.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://13akstjq.github.io/TIL//post/2025-04-22-generateSitemaps" data-gatsby-head="true"/><meta name="twitter:title" content="Next.js 15에서 generateSitemaps 기능 쉽게 구현하는 2025년 최신 가이드 | TIL" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/TIL/assets/img/nextjs.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | TIL" data-gatsby-head="true"/><meta name="article:published_time" content="2025-04-22 12:36" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/TIL/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/TIL/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/TIL/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/TIL/favicons/favicon-96x96.png"/><link rel="icon" href="/TIL/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/TIL/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/TIL/favicons/browserconfig.xml"/><link rel="preload" href="/TIL/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/TIL/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/TIL/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/TIL/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/TIL/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/TIL/_next/static/chunks/webpack-21ffe88bdca56cba.js" defer=""></script><script src="/TIL/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/TIL/_next/static/chunks/main-a5eeabb286676ce6.js" defer=""></script><script src="/TIL/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/TIL/_next/static/chunks/75fc9c18-4a646156c659a948.js" defer=""></script><script src="/TIL/_next/static/chunks/348-02483b66b493dd81.js" defer=""></script><script src="/TIL/_next/static/chunks/pages/post/%5Bslug%5D-8ded8b979ba73586.js" defer=""></script><script src="/TIL/_next/static/X4OrKfmLtU3-3BijwfHe6/_buildManifest.js" defer=""></script><script src="/TIL/_next/static/X4OrKfmLtU3-3BijwfHe6/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/TIL">TIL</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/TIL/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">Next.js 15에서 generateSitemaps 기능 쉽게 구현하는 2025년 최신 가이드</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="Next.js 15에서 generateSitemaps 기능 쉽게 구현하는 2025년 최신 가이드" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/TIL/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">TIL</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Apr 22, 2025</span><span class="posts_reading_time__f7YPP">4<!-- --> min read</span></span></div></div></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<h1>generateSitemaps 함수 소개</h1>
<p>웹사이트를 운영하다 보면, 검색엔진 최적화(SEO)를 위해 여러 개의 사이트맵(sitemap)을 만들어야 할 때가 있는데요. 이때 <code>generateSitemaps</code> 함수를 사용하면 여러 개의 사이트맵을 손쉽게 생성할 수 있어요.</p>
<h2>반환값(Returns)</h2>
<p><code>generateSitemaps</code> 함수는 사이트맵을 여러 개 만들고, 각 사이트맵에 대해 <code>id</code>라는 프로퍼티를 가진 객체들의 배열을 반환합니다. 쉽게 말해, 생성된 사이트맵들의 고유 식별자 리스트를 받아볼 수 있다는 뜻이죠.</p>

















<table><thead><tr><th>반환 유형</th><th>설명</th></tr></thead><tbody><tr><td>배열(Array)</td><td>각각의 사이트맵을 나타내는 객체들로 구성됨</td></tr><tr><td>객체(Object)</td><td>각 객체는 <code>id</code> 프로퍼티를 포함</td></tr></tbody></table>
<hr>
<h3>추가 팁!</h3>
<ul>
<li>사이트맵을 여러 개로 나누는 것은 대규모 웹사이트에서 자주 쓰이는 전략입니다. 구글 같은 검색엔진은 한 사이트맵 파일에 너무 많은 URL이 들어가면 효율적으로 크롤링하지 못하거든요.</li>
<li><code>id</code> 값을 활용해서 나중에 각 사이트맵을 동적으로 불러오거나 관리할 때 용이합니다.</li>
<li>만약 사이트맵을 자동 생성할 수 있는 라이브러리나 툴을 사용 중이라면, 이 같은 함수는 내부적으로 페이지 URL들을 분배하고 각 파일을 생성하는 역할을 담당합니다.</li>
</ul>
<p>웹사이트 규모가 커질수록 사이트맵 관리가 쉽지 않은데, 이런 함수를 잘 활용하면 관리도 편하고 SEO에도 훨씬 도움이 되니 꼭 참고하세요!</p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h2>URL 경로</h2>
<p>생성된 사이트맵은 <code>/.../sitemap/[id].xml</code> 경로에서 확인할 수 있어요. 예를 들어, <code>/product/sitemap/1.xml</code> 같은 식이죠.</p>
<h2>예시</h2>
<p>사이트맵을 나누고 싶다면 <code>generateSitemaps</code> 함수에서 사이트맵 ID를 포함한 객체 배열을 반환하면 돼요. 그리고 이 ID를 활용해서 각각 고유한 사이트맵을 생성할 수 있답니다.</p>
<p>아래 표를 보면 좀 더 이해하기 편할 거예요.</p>





















<table><thead><tr><th>Sitemap ID</th><th>생성되는 사이트맵 파일 경로</th></tr></thead><tbody><tr><td>1</td><td>/product/sitemap/1.xml</td></tr><tr><td>2</td><td>/product/sitemap/2.xml</td></tr><tr><td>3</td><td>/product/sitemap/3.xml</td></tr></tbody></table>
<p>이렇게 ID를 기준으로 사이트맵을 나누면, 대형 웹사이트에서도 효율적으로 검색 엔진에 페이지를 노출시킬 수 있어요. 대략 한 사이트맵에 50,000개 정도의 URL까지만 포함하는 게 권장되니까요.</p>
<p>만약 사이트맵이 너무 커서 관리가 힘들다면, 이렇게 ID를 쪼개서 여러 개로 만드는 방법을 꼭 활용해 보세요!</p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>이 코드는 Next.js에서 동적 사이트맵을 생성하는 간단한 예제예요. 사이트맵은 검색 엔진이 내 사이트를 효율적으로 크롤링할 수 있도록 도와주는 중요한 역할을 하죠. 여기선 제품 목록(product)을 50,000개씩 나눠서 각각의 사이트맵을 만들어주는 구조예요.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-variable constant_">BASE_URL</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/app/lib/constants'</span>
 
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">generateSitemaps</span>(<span class="hljs-params"></span>) {
  <span class="hljs-comment">// 전체 상품 수를 불러와서 사이트맵 페이지 개수를 계산하는 대신, 임시로 4개의 사이트맵 페이지를 반환</span>
  <span class="hljs-keyword">return</span> [{ <span class="hljs-attr">id</span>: <span class="hljs-number">0</span> }, { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span> }, { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span> }, { <span class="hljs-attr">id</span>: <span class="hljs-number">3</span> }]
}
 
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">sitemap</span>(<span class="hljs-params">{
  id,
}: {
  id: number
}</span>): <span class="hljs-title class_">Promise</span>&#x3C;<span class="hljs-title class_">MetadataRoute</span>.<span class="hljs-property">Sitemap</span>> {
  <span class="hljs-comment">// 구글은 사이트맵에 최대 50,000개의 URL만 허용하니 이걸 기준으로 상품을 나눠서 가져옴</span>
  <span class="hljs-keyword">const</span> start = id * <span class="hljs-number">50000</span>
  <span class="hljs-keyword">const</span> end = start + <span class="hljs-number">50000</span>
  <span class="hljs-keyword">const</span> products = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getProducts</span>(
    <span class="hljs-string">`SELECT id, date FROM products WHERE id BETWEEN <span class="hljs-subst">${start}</span> AND <span class="hljs-subst">${end}</span>`</span>
  )
  <span class="hljs-keyword">return</span> products.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">product</span>) =></span> ({
    <span class="hljs-attr">url</span>: <span class="hljs-string">`<span class="hljs-subst">${BASE_URL}</span>/product/<span class="hljs-subst">${product.id}</span>`</span>,
    <span class="hljs-attr">lastModified</span>: product.<span class="hljs-property">date</span>,
  }))
}
</code></pre>
<h3>중요한 포인트</h3>
<ul>
<li>사이트맵을 너무 크게 만들면 구글에서 인식하기 어려우니 50,000개씩 분할하는 게 기본입니다.</li>
<li><code>generateSitemaps</code> 함수는 사이트맵의 페이지 목록을 반환하는 역할을 하고, 실제 각 페이지에 어떤 URL이 들어갈지 <code>sitemap</code> 함수에서 처리하죠.</li>
<li>실제 환경에서는 상품 총 개수를 DB에서 조회해 그에 맞게 페이지 수를 동적으로 만들어줘야 해요.</li>
</ul>
<hr>
<h2>버전 히스토리</h2>

















<table><thead><tr><th>버전</th><th>변경사항</th></tr></thead><tbody><tr><td><code>v15.0.0</code></td><td><code>generateSitemaps</code> 함수가 개발 환경과 프로덕션 환경에서 일관된 URL을 생성하도록 개선됨</td></tr><tr><td><code>v13.3.2</code></td><td><code>generateSitemaps</code> 함수 도입. 개발 시 <code>/.../sitemap.xml/[id]</code> URL을 통해 동적으로 생성된 사이트맵 확인 가능 (예: <code>/product/sitemap.xml/1</code>)</td></tr></tbody></table>
<hr>
<h3>추가 팁</h3>
<ul>
<li>사이트맵 URL을 서비스 루트에 쉽게 추가하고 싶다면, Next.js 내의 API Route를 사용하거나 서버리스 함수(Serverless Function)를 활용할 수도 있어요.</li>
<li>사이트맵 생성 시 추천하는 방법 중 하나는 정기적으로 크론 잡으로 상품 리스트 업데이트에 맞춰 사이트맵을 재생성하는 거예요.</li>
<li>큰 사이트라면 사이트맵 인덱스 파일을 만들어서 여러 개의 사이트맵 파일을 참조하는 전략도 있어요.</li>
</ul>
<p>사이트맵은 SEO 최적화에도 굉장히 중요하니, 꼭 내 사이트 규모에 맞게 적절한 구조로 관리해 보세요!</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Next.js 15에서 generateSitemaps 기능 쉽게 구현하는 2025년 최신 가이드","description":"","date":"2025-04-22 12:36","slug":"2025-04-22-generateSitemaps","content":"\n\n# generateSitemaps 함수 소개\n\n웹사이트를 운영하다 보면, 검색엔진 최적화(SEO)를 위해 여러 개의 사이트맵(sitemap)을 만들어야 할 때가 있는데요. 이때 `generateSitemaps` 함수를 사용하면 여러 개의 사이트맵을 손쉽게 생성할 수 있어요.\n\n## 반환값(Returns)\n\n`generateSitemaps` 함수는 사이트맵을 여러 개 만들고, 각 사이트맵에 대해 `id`라는 프로퍼티를 가진 객체들의 배열을 반환합니다. 쉽게 말해, 생성된 사이트맵들의 고유 식별자 리스트를 받아볼 수 있다는 뜻이죠.\n\n| 반환 유형   | 설명                                |\n| --------- | --------------------------------- |\n| 배열(Array) | 각각의 사이트맵을 나타내는 객체들로 구성됨 |\n| 객체(Object) | 각 객체는 `id` 프로퍼티를 포함          |\n\n---\n\n### 추가 팁!\n\n- 사이트맵을 여러 개로 나누는 것은 대규모 웹사이트에서 자주 쓰이는 전략입니다. 구글 같은 검색엔진은 한 사이트맵 파일에 너무 많은 URL이 들어가면 효율적으로 크롤링하지 못하거든요.\n- `id` 값을 활용해서 나중에 각 사이트맵을 동적으로 불러오거나 관리할 때 용이합니다.\n- 만약 사이트맵을 자동 생성할 수 있는 라이브러리나 툴을 사용 중이라면, 이 같은 함수는 내부적으로 페이지 URL들을 분배하고 각 파일을 생성하는 역할을 담당합니다.\n\n웹사이트 규모가 커질수록 사이트맵 관리가 쉽지 않은데, 이런 함수를 잘 활용하면 관리도 편하고 SEO에도 훨씬 도움이 되니 꼭 참고하세요!\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n## URL 경로\n\n생성된 사이트맵은 `/.../sitemap/[id].xml` 경로에서 확인할 수 있어요. 예를 들어, `/product/sitemap/1.xml` 같은 식이죠.\n\n## 예시\n\n사이트맵을 나누고 싶다면 `generateSitemaps` 함수에서 사이트맵 ID를 포함한 객체 배열을 반환하면 돼요. 그리고 이 ID를 활용해서 각각 고유한 사이트맵을 생성할 수 있답니다.\n\n아래 표를 보면 좀 더 이해하기 편할 거예요.\n\n| Sitemap ID | 생성되는 사이트맵 파일 경로    |\n|------------|------------------------------|\n| 1          | /product/sitemap/1.xml        |\n| 2          | /product/sitemap/2.xml        |\n| 3          | /product/sitemap/3.xml        |\n\n이렇게 ID를 기준으로 사이트맵을 나누면, 대형 웹사이트에서도 효율적으로 검색 엔진에 페이지를 노출시킬 수 있어요. 대략 한 사이트맵에 50,000개 정도의 URL까지만 포함하는 게 권장되니까요.\n\n만약 사이트맵이 너무 커서 관리가 힘들다면, 이렇게 ID를 쪼개서 여러 개로 만드는 방법을 꼭 활용해 보세요!\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n이 코드는 Next.js에서 동적 사이트맵을 생성하는 간단한 예제예요. 사이트맵은 검색 엔진이 내 사이트를 효율적으로 크롤링할 수 있도록 도와주는 중요한 역할을 하죠. 여기선 제품 목록(product)을 50,000개씩 나눠서 각각의 사이트맵을 만들어주는 구조예요.\n\n```js\nimport { BASE_URL } from '@/app/lib/constants'\n \nexport async function generateSitemaps() {\n  // 전체 상품 수를 불러와서 사이트맵 페이지 개수를 계산하는 대신, 임시로 4개의 사이트맵 페이지를 반환\n  return [{ id: 0 }, { id: 1 }, { id: 2 }, { id: 3 }]\n}\n \nexport default async function sitemap({\n  id,\n}: {\n  id: number\n}): Promise\u003cMetadataRoute.Sitemap\u003e {\n  // 구글은 사이트맵에 최대 50,000개의 URL만 허용하니 이걸 기준으로 상품을 나눠서 가져옴\n  const start = id * 50000\n  const end = start + 50000\n  const products = await getProducts(\n    `SELECT id, date FROM products WHERE id BETWEEN ${start} AND ${end}`\n  )\n  return products.map((product) =\u003e ({\n    url: `${BASE_URL}/product/${product.id}`,\n    lastModified: product.date,\n  }))\n}\n```\n\n### 중요한 포인트\n- 사이트맵을 너무 크게 만들면 구글에서 인식하기 어려우니 50,000개씩 분할하는 게 기본입니다.\n- `generateSitemaps` 함수는 사이트맵의 페이지 목록을 반환하는 역할을 하고, 실제 각 페이지에 어떤 URL이 들어갈지 `sitemap` 함수에서 처리하죠.\n- 실제 환경에서는 상품 총 개수를 DB에서 조회해 그에 맞게 페이지 수를 동적으로 만들어줘야 해요.\n\n---\n\n## 버전 히스토리\n\n| 버전 | 변경사항 |\n|-------|---------|\n| `v15.0.0` | `generateSitemaps` 함수가 개발 환경과 프로덕션 환경에서 일관된 URL을 생성하도록 개선됨 |\n| `v13.3.2` | `generateSitemaps` 함수 도입. 개발 시 `/.../sitemap.xml/[id]` URL을 통해 동적으로 생성된 사이트맵 확인 가능 (예: `/product/sitemap.xml/1`) |\n\n---\n\n### 추가 팁\n- 사이트맵 URL을 서비스 루트에 쉽게 추가하고 싶다면, Next.js 내의 API Route를 사용하거나 서버리스 함수(Serverless Function)를 활용할 수도 있어요.\n- 사이트맵 생성 시 추천하는 방법 중 하나는 정기적으로 크론 잡으로 상품 리스트 업데이트에 맞춰 사이트맵을 재생성하는 거예요.\n- 큰 사이트라면 사이트맵 인덱스 파일을 만들어서 여러 개의 사이트맵 파일을 참조하는 전략도 있어요.\n\n사이트맵은 SEO 최적화에도 굉장히 중요하니, 꼭 내 사이트 규모에 맞게 적절한 구조로 관리해 보세요!","ogImage":{"url":"/TIL/assets/img/nextjs.png"},"coverImage":"/TIL/assets/img/nextjs.png","tag":["Tech"],"readingTime":4},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003ch1\u003egenerateSitemaps 함수 소개\u003c/h1\u003e\n\u003cp\u003e웹사이트를 운영하다 보면, 검색엔진 최적화(SEO)를 위해 여러 개의 사이트맵(sitemap)을 만들어야 할 때가 있는데요. 이때 \u003ccode\u003egenerateSitemaps\u003c/code\u003e 함수를 사용하면 여러 개의 사이트맵을 손쉽게 생성할 수 있어요.\u003c/p\u003e\n\u003ch2\u003e반환값(Returns)\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003egenerateSitemaps\u003c/code\u003e 함수는 사이트맵을 여러 개 만들고, 각 사이트맵에 대해 \u003ccode\u003eid\u003c/code\u003e라는 프로퍼티를 가진 객체들의 배열을 반환합니다. 쉽게 말해, 생성된 사이트맵들의 고유 식별자 리스트를 받아볼 수 있다는 뜻이죠.\u003c/p\u003e\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003ctable\u003e\u003cthead\u003e\u003ctr\u003e\u003cth\u003e반환 유형\u003c/th\u003e\u003cth\u003e설명\u003c/th\u003e\u003c/tr\u003e\u003c/thead\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd\u003e배열(Array)\u003c/td\u003e\u003ctd\u003e각각의 사이트맵을 나타내는 객체들로 구성됨\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e객체(Object)\u003c/td\u003e\u003ctd\u003e각 객체는 \u003ccode\u003eid\u003c/code\u003e 프로퍼티를 포함\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\u003chr\u003e\n\u003ch3\u003e추가 팁!\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e사이트맵을 여러 개로 나누는 것은 대규모 웹사이트에서 자주 쓰이는 전략입니다. 구글 같은 검색엔진은 한 사이트맵 파일에 너무 많은 URL이 들어가면 효율적으로 크롤링하지 못하거든요.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eid\u003c/code\u003e 값을 활용해서 나중에 각 사이트맵을 동적으로 불러오거나 관리할 때 용이합니다.\u003c/li\u003e\n\u003cli\u003e만약 사이트맵을 자동 생성할 수 있는 라이브러리나 툴을 사용 중이라면, 이 같은 함수는 내부적으로 페이지 URL들을 분배하고 각 파일을 생성하는 역할을 담당합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e웹사이트 규모가 커질수록 사이트맵 관리가 쉽지 않은데, 이런 함수를 잘 활용하면 관리도 편하고 SEO에도 훨씬 도움이 되니 꼭 참고하세요!\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch2\u003eURL 경로\u003c/h2\u003e\n\u003cp\u003e생성된 사이트맵은 \u003ccode\u003e/.../sitemap/[id].xml\u003c/code\u003e 경로에서 확인할 수 있어요. 예를 들어, \u003ccode\u003e/product/sitemap/1.xml\u003c/code\u003e 같은 식이죠.\u003c/p\u003e\n\u003ch2\u003e예시\u003c/h2\u003e\n\u003cp\u003e사이트맵을 나누고 싶다면 \u003ccode\u003egenerateSitemaps\u003c/code\u003e 함수에서 사이트맵 ID를 포함한 객체 배열을 반환하면 돼요. 그리고 이 ID를 활용해서 각각 고유한 사이트맵을 생성할 수 있답니다.\u003c/p\u003e\n\u003cp\u003e아래 표를 보면 좀 더 이해하기 편할 거예요.\u003c/p\u003e\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003ctable\u003e\u003cthead\u003e\u003ctr\u003e\u003cth\u003eSitemap ID\u003c/th\u003e\u003cth\u003e생성되는 사이트맵 파일 경로\u003c/th\u003e\u003c/tr\u003e\u003c/thead\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd\u003e1\u003c/td\u003e\u003ctd\u003e/product/sitemap/1.xml\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e2\u003c/td\u003e\u003ctd\u003e/product/sitemap/2.xml\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e3\u003c/td\u003e\u003ctd\u003e/product/sitemap/3.xml\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\u003cp\u003e이렇게 ID를 기준으로 사이트맵을 나누면, 대형 웹사이트에서도 효율적으로 검색 엔진에 페이지를 노출시킬 수 있어요. 대략 한 사이트맵에 50,000개 정도의 URL까지만 포함하는 게 권장되니까요.\u003c/p\u003e\n\u003cp\u003e만약 사이트맵이 너무 커서 관리가 힘들다면, 이렇게 ID를 쪼개서 여러 개로 만드는 방법을 꼭 활용해 보세요!\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e이 코드는 Next.js에서 동적 사이트맵을 생성하는 간단한 예제예요. 사이트맵은 검색 엔진이 내 사이트를 효율적으로 크롤링할 수 있도록 도와주는 중요한 역할을 하죠. 여기선 제품 목록(product)을 50,000개씩 나눠서 각각의 사이트맵을 만들어주는 구조예요.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-variable constant_\"\u003eBASE_URL\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'@/app/lib/constants'\u003c/span\u003e\n \n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003egenerateSitemaps\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-comment\"\u003e// 전체 상품 수를 불러와서 사이트맵 페이지 개수를 계산하는 대신, 임시로 4개의 사이트맵 페이지를 반환\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e [{ \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e }, { \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e }, { \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e }, { \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e }]\n}\n \n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003esitemap\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e{\n  id,\n}: {\n  id: number\n}\u003c/span\u003e): \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eMetadataRoute\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eSitemap\u003c/span\u003e\u003e {\n  \u003cspan class=\"hljs-comment\"\u003e// 구글은 사이트맵에 최대 50,000개의 URL만 허용하니 이걸 기준으로 상품을 나눠서 가져옴\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e start = id * \u003cspan class=\"hljs-number\"\u003e50000\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e end = start + \u003cspan class=\"hljs-number\"\u003e50000\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e products = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003egetProducts\u003c/span\u003e(\n    \u003cspan class=\"hljs-string\"\u003e`SELECT id, date FROM products WHERE id BETWEEN \u003cspan class=\"hljs-subst\"\u003e${start}\u003c/span\u003e AND \u003cspan class=\"hljs-subst\"\u003e${end}\u003c/span\u003e`\u003c/span\u003e\n  )\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e products.\u003cspan class=\"hljs-title function_\"\u003emap\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eproduct\u003c/span\u003e) =\u003e\u003c/span\u003e ({\n    \u003cspan class=\"hljs-attr\"\u003eurl\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e`\u003cspan class=\"hljs-subst\"\u003e${BASE_URL}\u003c/span\u003e/product/\u003cspan class=\"hljs-subst\"\u003e${product.id}\u003c/span\u003e`\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003elastModified\u003c/span\u003e: product.\u003cspan class=\"hljs-property\"\u003edate\u003c/span\u003e,\n  }))\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003e중요한 포인트\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e사이트맵을 너무 크게 만들면 구글에서 인식하기 어려우니 50,000개씩 분할하는 게 기본입니다.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003egenerateSitemaps\u003c/code\u003e 함수는 사이트맵의 페이지 목록을 반환하는 역할을 하고, 실제 각 페이지에 어떤 URL이 들어갈지 \u003ccode\u003esitemap\u003c/code\u003e 함수에서 처리하죠.\u003c/li\u003e\n\u003cli\u003e실제 환경에서는 상품 총 개수를 DB에서 조회해 그에 맞게 페이지 수를 동적으로 만들어줘야 해요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch2\u003e버전 히스토리\u003c/h2\u003e\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003ctable\u003e\u003cthead\u003e\u003ctr\u003e\u003cth\u003e버전\u003c/th\u003e\u003cth\u003e변경사항\u003c/th\u003e\u003c/tr\u003e\u003c/thead\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd\u003e\u003ccode\u003ev15.0.0\u003c/code\u003e\u003c/td\u003e\u003ctd\u003e\u003ccode\u003egenerateSitemaps\u003c/code\u003e 함수가 개발 환경과 프로덕션 환경에서 일관된 URL을 생성하도록 개선됨\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003ccode\u003ev13.3.2\u003c/code\u003e\u003c/td\u003e\u003ctd\u003e\u003ccode\u003egenerateSitemaps\u003c/code\u003e 함수 도입. 개발 시 \u003ccode\u003e/.../sitemap.xml/[id]\u003c/code\u003e URL을 통해 동적으로 생성된 사이트맵 확인 가능 (예: \u003ccode\u003e/product/sitemap.xml/1\u003c/code\u003e)\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\u003chr\u003e\n\u003ch3\u003e추가 팁\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e사이트맵 URL을 서비스 루트에 쉽게 추가하고 싶다면, Next.js 내의 API Route를 사용하거나 서버리스 함수(Serverless Function)를 활용할 수도 있어요.\u003c/li\u003e\n\u003cli\u003e사이트맵 생성 시 추천하는 방법 중 하나는 정기적으로 크론 잡으로 상품 리스트 업데이트에 맞춰 사이트맵을 재생성하는 거예요.\u003c/li\u003e\n\u003cli\u003e큰 사이트라면 사이트맵 인덱스 파일을 만들어서 여러 개의 사이트맵 파일을 참조하는 전략도 있어요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e사이트맵은 SEO 최적화에도 굉장히 중요하니, 꼭 내 사이트 규모에 맞게 적절한 구조로 관리해 보세요!\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2025-04-22-generateSitemaps"},"buildId":"X4OrKfmLtU3-3BijwfHe6","assetPrefix":"/TIL","isFallback":false,"gsp":true,"scriptLoader":[{"async":true,"src":"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4877378276818686","strategy":"lazyOnload","crossOrigin":"anonymous"}]}</script></body></html>