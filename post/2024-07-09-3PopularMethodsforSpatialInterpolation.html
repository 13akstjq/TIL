<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>ê³µê°„ ë³´ê°„ì„ ìœ„í•œ 3ê°€ì§€ ì¸ê¸° ìˆëŠ” ë°©ë²• | TIL</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://13akstjq.github.io/TIL//post/2024-07-09-3PopularMethodsforSpatialInterpolation" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="ê³µê°„ ë³´ê°„ì„ ìœ„í•œ 3ê°€ì§€ ì¸ê¸° ìˆëŠ” ë°©ë²• | TIL" data-gatsby-head="true"/><meta property="og:title" content="ê³µê°„ ë³´ê°„ì„ ìœ„í•œ 3ê°€ì§€ ì¸ê¸° ìˆëŠ” ë°©ë²• | TIL" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://TIL.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://13akstjq.github.io/TIL//post/2024-07-09-3PopularMethodsforSpatialInterpolation" data-gatsby-head="true"/><meta name="twitter:title" content="ê³µê°„ ë³´ê°„ì„ ìœ„í•œ 3ê°€ì§€ ì¸ê¸° ìˆëŠ” ë°©ë²• | TIL" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | TIL" data-gatsby-head="true"/><meta name="article:published_time" content="2024-07-09 19:17" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/TIL/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/TIL/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/TIL/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/TIL/favicons/favicon-96x96.png"/><link rel="icon" href="/TIL/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/TIL/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/TIL/favicons/browserconfig.xml"/><link rel="preload" href="/TIL/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/TIL/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/TIL/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/TIL/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/TIL/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/TIL/_next/static/chunks/webpack-21ffe88bdca56cba.js" defer=""></script><script src="/TIL/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/TIL/_next/static/chunks/main-a5eeabb286676ce6.js" defer=""></script><script src="/TIL/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/TIL/_next/static/chunks/75fc9c18-ac4aa08aae62f90e.js" defer=""></script><script src="/TIL/_next/static/chunks/463-925361deb4cec4b1.js" defer=""></script><script src="/TIL/_next/static/chunks/pages/post/%5Bslug%5D-9d7ebbd29b9e08ce.js" defer=""></script><script src="/TIL/_next/static/OY-qm1-_Mz9jLZ5863EbF/_buildManifest.js" defer=""></script><script src="/TIL/_next/static/OY-qm1-_Mz9jLZ5863EbF/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/TIL">TIL</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/TIL/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">ê³µê°„ ë³´ê°„ì„ ìœ„í•œ 3ê°€ì§€ ì¸ê¸° ìˆëŠ” ë°©ë²•</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="ê³µê°„ ë³´ê°„ì„ ìœ„í•œ 3ê°€ì§€ ì¸ê¸° ìˆëŠ” ë°©ë²•" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/TIL/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">TIL</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Jul 9, 2024</span><span class="posts_reading_time__f7YPP">19<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-07-09-3PopularMethodsforSpatialInterpolation&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<h2>ì²˜ìŒë¶€í„°, Pythonì—ì„œ</h2>
<img src="/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_0.png">
<p>ë³´ê°„ë²•ì€ ë°ì´í„° ê³¼í•™ì ë¿ë§Œ ì•„ë‹ˆë¼ ë‹¤ì–‘í•œ ë¶„ì•¼ì˜ ì‚¬ëŒë“¤ì— ì˜í•´ ì‚¬ìš©ë˜ëŠ” ë§¤ìš° ì¼ë°˜ì ì¸ ìˆ˜í•™ì  ê°œë…ì…ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì§€ë¦¬ ê³µê°„ ë°ì´í„°ë¥¼ ë‹¤ë£° ë•Œ, ë³´ê°„ì€ ì¢…ì¢… í¬ì†Œí•œ ê´€ì¸¡ì¹˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ëŒ€í‘œì ì¸ ê·¸ë¦¬ë“œë¥¼ ë§Œë“¤ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ë” ë³µì¡í•´ì§‘ë‹ˆë‹¤.</p>
<p>ì§€ë¦¬ ê³µê°„ ë¶€ë¶„ì— ë“¤ì–´ê°€ê¸° ì „ì—, ì„ í˜• ë³´ê°„ì— ëŒ€í•´ ê°„ë‹¨íˆ ë˜ì§šì–´ ë´…ì‹œë‹¤.</p>
<!-- TIL ìˆ˜í‰ -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ë””ìì¸ì„ ë³´ì—¬ë“œë¦¬ê¸° ìœ„í•´ ì¼ë°˜ ë‹¤í•­ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤:</p>
<pre><code class="hljs language-js">def <span class="hljs-title function_">F</span>(x):
  <span class="hljs-keyword">return</span> -<span class="hljs-number">2</span>*x**<span class="hljs-number">3</span>+x**<span class="hljs-number">2</span>+<span class="hljs-number">2.1</span>

x = np.<span class="hljs-title function_">arange</span>(-<span class="hljs-number">5</span>,<span class="hljs-number">5</span>, <span class="hljs-number">0.1</span>)
y = <span class="hljs-title function_">F</span>(x)
</code></pre>
<img src="/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_1.png">
<p>ì´ì œ [-4.2, 0, 2.5]ì—ì„œ ëª‡ ê°œì˜ ì ì„ ë¬´ì‘ìœ„ë¡œ ìƒ˜í”Œë§í•˜ê³  ì´ë¥¼ ì—°ê²°í•´ ë³´ê² ìŠµë‹ˆë‹¤:</p>
<!-- TIL ìˆ˜í‰ -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p><img src="/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_2.png" alt="ì´ë¯¸ì§€"></p>
<p>ì´ê²ƒì€ ì„ í˜• ë³´ê°„ë²•ì´ë¼ê³  ë¶ˆë¦½ë‹ˆë‹¤. ê° êµ¬ê°„ì—ì„œ ì§ì„ ìœ¼ë¡œ í•¨ìˆ˜ë¥¼ ê·¼ì‚¬í•˜ê³  ìˆìœ¼ë©°, ì´ì œ 3ê°œì˜ ì ì—ì„œ í•¨ìˆ˜ì˜ ê°’ì„ ì•Œê³  ìˆì„ ë•Œ [-4.2;2.5] êµ¬ê°„ ë‚´ì˜ ê°’ì„ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ë†’ì€ ì •í™•ë„ë¥¼ ê°€ì§„ ë§ì€ ë‹¤ë¥¸ ë°©ë²•ë“¤ì´ ìˆì§€ë§Œ, ê·¸ ë’¤ì— ìˆëŠ” ì•„ì´ë””ì–´ëŠ” ë™ì¼í•©ë‹ˆë‹¤: ì ì–´ë„ ë‘ ê°œì˜ ì•Œë ¤ì§„ ì  ì‚¬ì´ì—ì„œ í•¨ìˆ˜ ê°’ì„ ì°¾ëŠ” ê²ƒì…ë‹ˆë‹¤.</p>
<p>ì´ì œ ì§€ë¦¬ ê³µê°„ ë¶€ë¶„ìœ¼ë¡œ ë„˜ì–´ê°ˆ ì‹œê°„ì…ë‹ˆë‹¤. ì´ ììŠµì„œì—ì„œëŠ” NOAAì—ì„œ ì œê³µí•œ ìŠ¤ìœ„ìŠ¤ ì „ì—­ì˜ ê¸°ìƒ ì¸¡ì •ì†Œì—ì„œ ì¸¡ì •ëœ ì¼ì¼ í‰ê·  ëŒ€ê¸° ì˜¨ë„ì˜ ê³µê°„ ë³´ê°„ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ ëª©í‘œì…ë‹ˆë‹¤. ê¸°ëŒ€ë˜ëŠ” ê²°ê³¼ëŠ” 0.1Â° í•´ìƒë„ì˜ ì˜¨ë„ ê·¸ë¦¬ë“œì…ë‹ˆë‹¤.</p>
<!-- TIL ìˆ˜í‰ -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ë¨¼ì €, ìŠ¤ìœ„ìŠ¤ì˜ í–‰ì • ê²½ê³„ë¥¼ ì–»ì–´ì™€ì„œ geopandasë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹œê°í™”í•´ì•¼ í•©ë‹ˆë‹¤:</p>
<pre><code class="hljs language-python"><span class="hljs-keyword">import</span> geopandas <span class="hljs-keyword">as</span> gpd

shape = gpd.read_file(<span class="hljs-string">'gadm41_CHE_0.shp'</span>)
shape.plot()
</code></pre>
<img src="/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_3.png">
<p>ì •ë§ ëŒ€ë‹¨í•´ìš”! ìŠ¤ìœ„ìŠ¤ì¸ ê²ƒ ê°™ë„¤ìš” =)</p>
<!-- TIL ìˆ˜í‰ -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ì´ì œ ì˜¨ë„ ê´€ì¸¡ì¹˜ë¥¼ ê·¸ë˜í”„ë¡œ í‘œì‹œí•˜ê³  êµ­ê°€ ëª¨ì–‘ê³¼ ê²¹ì³ë³´ê² ìŠµë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ ì •ê¸°ì ì¸ íŒë‹¤ ë°ì´í„°í”„ë ˆì„ìœ¼ë¡œ ê¸°ìƒ ë°ì´í„°ë¥¼ ë¡œë“œí•œ ë‹¤ìŒ ì…°ì´í”„ë¦¬ í¬ì¸íŠ¸ë¡œ ë³€í™˜í•œ ì§€ë¦¬ ë°ì´í„°í”„ë ˆì„ìœ¼ë¡œ ë³€í™˜í•˜ê² ìŠµë‹ˆë‹¤:</p>
<pre><code class="hljs language-python"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">from</span> shapely.geometry <span class="hljs-keyword">import</span> Point

df = pd.read_csv(<span class="hljs-string">'3639866.csv'</span>)

points = <span class="hljs-built_in">list</span>()
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(df)):
  point = Point(df.loc[i, <span class="hljs-string">'LONGITUDE'</span>], df.loc[i, <span class="hljs-string">'LATITUDE'</span>])
  points.append(point)

gdf = gpd.GeoDataFrame(geometry=points).set_crs(shape.crs)
</code></pre>
<p>ê·¸ë ‡ê²Œ í•˜ë©´ matplotlibì„ ì‚¬ìš©í•˜ì—¬ ë‘ ë°ì´í„°í”„ë ˆì„ì„ ì‰½ê²Œ ê²¹ì³ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre><code class="hljs language-python">fig, ax = plt.subplots(figsize=(<span class="hljs-number">16</span>,<span class="hljs-number">9</span>))
shape.plot(ax=ax, color=<span class="hljs-string">'black'</span>)
gdf.plot(ax=ax, color=<span class="hljs-string">'r'</span>, markersize=<span class="hljs-number">85</span>)
plt.show()
</code></pre>
<!-- TIL ìˆ˜í‰ -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p><img src="/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_4.png" alt="ê·¸ë¦¬ë“œ ë° ì§€ë„ ì˜¤ë²„ë ˆì´ë¥¼ ì‹œê°í™”í•˜ê¸° ìœ„í•´ ë‹¤ìŒì„ ìˆ˜í–‰í•˜ê² ìŠµë‹ˆë‹¤:"></p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> matplotlib.<span class="hljs-property">ticker</span> <span class="hljs-keyword">as</span> mticker
<span class="hljs-keyword">import</span> cartopy.<span class="hljs-property">crs</span> <span class="hljs-keyword">as</span> ccrs
<span class="hljs-keyword">from</span> cartopy.<span class="hljs-property">mpl</span>.<span class="hljs-property">gridliner</span> <span class="hljs-keyword">import</span> <span class="hljs-variable constant_">LONGITUDE_FORMATTER</span>, <span class="hljs-variable constant_">LATITUDE_FORMATTER</span>

<span class="hljs-variable constant_">LAT</span>, <span class="hljs-variable constant_">LON</span> = np.<span class="hljs-title function_">arange</span>(<span class="hljs-number">45.75</span>, <span class="hljs-number">48</span>, <span class="hljs-number">0.1</span>), np.<span class="hljs-title function_">arange</span>(<span class="hljs-number">6</span>, <span class="hljs-number">10.81</span>, <span class="hljs-number">0.1</span>)

fig, ax = plt.<span class="hljs-title function_">subplots</span>(subplot_kw=<span class="hljs-title function_">dict</span>(projection=ccrs.<span class="hljs-title class_">PlateCarree</span>()), figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">9</span>))
shape.<span class="hljs-title function_">plot</span>(ax=ax, color=<span class="hljs-string">'grey'</span>)
gdf.<span class="hljs-title function_">plot</span>(ax=ax, color=<span class="hljs-string">'r'</span>, markersize=<span class="hljs-number">85</span>)

gl = ax.<span class="hljs-title function_">gridlines</span>(draw_labels=<span class="hljs-title class_">True</span>,linewidth=<span class="hljs-number">2</span>, color=<span class="hljs-string">'black'</span>, alpha=<span class="hljs-number">0.5</span>, linestyle=<span class="hljs-string">'--'</span>)
gl.<span class="hljs-property">xlocator</span> = mticker.<span class="hljs-title class_">FixedLocator</span>(<span class="hljs-variable constant_">LON</span>)
gl.<span class="hljs-property">ylocator</span> = mticker.<span class="hljs-title class_">FixedLocator</span>(<span class="hljs-variable constant_">LAT</span>)
gl.<span class="hljs-property">xformatter</span> = <span class="hljs-variable constant_">LONGITUDE_FORMATTER</span>
gl.<span class="hljs-property">yformatter</span> = <span class="hljs-variable constant_">LATITUDE_FORMATTER</span>
plt.<span class="hljs-title function_">show</span>()
</code></pre>
<p><img src="/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_5.png" alt="ê²°ê³¼ ì´ë¯¸ì§€"></p>
<!-- TIL ìˆ˜í‰ -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ìœ„ ê·¸ë¦¼ì— ë‚˜íƒ€ë‚œ ì •ê·œ ê·¸ë¦¬ë“œì— ëŒ€í•´ ë³´ê°„ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ ëª©í‘œì…ë‹ˆë‹¤. ì´ ê·¸ë¦¬ë“œì—ëŠ” 8ê°œì˜ ì˜¨ë„ ê´€ì¸¡ì¹˜ê°€ ìˆìŠµë‹ˆë‹¤.</p>
<h1>I. ìµœê·¼ì ‘ ì´ì›ƒ (NN)</h1>
<p>ê°€ì¥ ì§ê´€ì ì´ê³  ê°„ë‹¨í•œ ë°©ë²• ì¤‘ í•˜ë‚˜ì¸ Nearest Neighbor (NN)ì— ëŒ€í•´ ì´ì•¼ê¸°í•˜ê² ìŠµë‹ˆë‹¤. ì´ë¦„ì—ì„œ ì•Œ ìˆ˜ ìˆë“¯ì´, ì´ ì•Œê³ ë¦¬ì¦˜ì€ ê° ê·¸ë¦¬ë“œ ë…¸ë“œì— ê°€ì¥ ê°€ê¹Œìš´ ê´€ì¸¡ì¹˜ì˜ ê°’ì„ í• ë‹¹í•©ë‹ˆë‹¤.</p>
<p>ì´ë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•´ í•„ìš”í•œ í•¨ìˆ˜ëŠ” ë‘ ê°€ì§€ë¿ì…ë‹ˆë‹¤. ì²« ë²ˆì§¸ í•¨ìˆ˜ëŠ” ìœ í´ë¦¬ë“œ í•¨ìˆ˜ì´ë©°, ë‹¤ìŒ ê³µì‹ì„ ì‚¬ìš©í•˜ì—¬ ë‘ ì  ì‚¬ì´ì˜ ê±°ë¦¬ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤:</p>
<!-- TIL ìˆ˜í‰ -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p><img src="/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_6.png" alt="Image"></p>
<p>ë‘ ë²ˆì§¸ëŠ” NN ë©”ì†Œë“œ ìì²´ì…ë‹ˆë‹¤. ê´€ì¸¡ê°’ì„ ì €ì¥í•  ë¹ˆ ë°°ì—´ì„ ë§Œë“  í›„, ëª¨ë“  ìœ„ë„ì™€ ê²½ë„ë¥¼ ë°˜ë³µí•˜ë©´ì„œ ê° í¬ì¸íŠ¸ì—ì„œ í˜„ì¬ ê·¸ë¦¬ë“œ ë…¸ë“œê¹Œì§€ì˜ ê±°ë¦¬ë¥¼ ê³„ì‚°í•˜ê³  ê·¸ ê·¸ë¦¬ë“œ ë…¸ë“œì— ê°€ì¥ ê°€ê¹Œìš´ ê´€ì¸¡ê°’ì„ í• ë‹¹í•©ë‹ˆë‹¤.</p>
<pre><code class="hljs language-js">def ìœ í´ë¦¬ë“œ(x1, x2, y1, y2):
  <span class="hljs-keyword">return</span> ((x1-x2)**<span class="hljs-number">2</span> + (y1-y2)**<span class="hljs-number">2</span>) ** <span class="hljs-number">0.5</span>

def <span class="hljs-title function_">NN</span>(data, <span class="hljs-variable constant_">LAT</span>, <span class="hljs-variable constant_">LON</span>):
  array = np.<span class="hljs-title function_">empty</span>((<span class="hljs-variable constant_">LAT</span>.<span class="hljs-property">shape</span>[<span class="hljs-number">0</span>], <span class="hljs-variable constant_">LON</span>.<span class="hljs-property">shape</span>[<span class="hljs-number">0</span>]))

  <span class="hljs-keyword">for</span> i, lat <span class="hljs-keyword">in</span> <span class="hljs-title function_">enumerate</span>(<span class="hljs-variable constant_">LAT</span>):
    <span class="hljs-keyword">for</span> j, lon <span class="hljs-keyword">in</span> <span class="hljs-title function_">enumerate</span>(<span class="hljs-variable constant_">LON</span>):
      idx = data.<span class="hljs-title function_">apply</span>(lambda <span class="hljs-attr">row</span>: ìœ í´ë¦¬ë“œ(row.<span class="hljs-property">LONGITUDE</span>, lon, row.<span class="hljs-property">LATITUDE</span>, lat), axis=<span class="hljs-number">1</span>).<span class="hljs-title function_">argmin</span>() 
      array[i, j] = data.<span class="hljs-property">loc</span>[idx, <span class="hljs-string">'TAVG'</span>]
  <span class="hljs-keyword">return</span> array
</code></pre>
<p>ì „ì²´ ì•„ì´ë””ì–´ëŠ” ì´ í•œ ì¤„ì— ìˆìŠµë‹ˆë‹¤.</p>
<!-- TIL ìˆ˜í‰ -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-python">idx = data.apply(<span class="hljs-keyword">lambda</span> row: Euclidean(row.LONGITUDE, lon, row.LATITUDE, lat), axis=<span class="hljs-number">1</span>).argmin()
</code></pre>
<p>ë³€ìˆ˜ dataëŠ” ê° í–‰ì´ í•˜ë‚˜ì˜ ê¸°ìƒ ì¥ë¹„ ì‚¬ì´íŠ¸ë¥¼ ë‚˜íƒ€ë‚´ëŠ” íŒë‹¤ ë°ì´í„°í”„ë ˆì„ì…ë‹ˆë‹¤. ë”°ë¼ì„œ for ë£¨í”„ì—ì„œ ê±°ë¦¬ë¥¼ ê³„ì‚°í•˜ê³  ìµœì†Œ ê±°ë¦¬ë¥¼ ê°€ì§„ ì‚¬ì´íŠ¸ì˜ ì¸ë±ìŠ¤ë¥¼ ì°¾ìŠµë‹ˆë‹¤.</p>
<p>ì´ì œ ì•Œê³ ë¦¬ì¦˜ì„ ì‹¤í–‰í•˜ê³  ê²°ê³¼ë¥¼ xarray ë°ì´í„°ì…‹ìœ¼ë¡œ ë˜í•‘í•´ ë´…ì‹œë‹¤:</p>
<pre><code class="hljs language-python">t2m = NN(df, LAT, LON)
ds = xr.Dataset(
    {<span class="hljs-string">'TAVG'</span>: ([<span class="hljs-string">'lat'</span>, <span class="hljs-string">'lon'</span>], t2m)},
    coords={<span class="hljs-string">'lat'</span>: LAT, <span class="hljs-string">'lon'</span>: LON})
</code></pre>
<!-- TIL ìˆ˜í‰ -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ì´ì œ ê²°ê³¼ë¥¼ í”Œë¡œíŒ…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
<p><img src="/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_7.png" alt=""></p>
<p>ë³´ê¸° ì¢‹ì§€ë§Œ, regionmask ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ìŠ¤ìœ„ìŠ¤ ë§¤ìŠ¤í¬ë¥¼ ë§Œë“¤ì–´ í”Œë¡¯ì„ ë” ë³´ê¸° ì¢‹ê²Œ ë³€ê²½í•´ ë³´ê² ìŠµë‹ˆë‹¤:</p>
<pre><code class="hljs language-js">shape[<span class="hljs-string">'new_column'</span>] = <span class="hljs-number">0</span>
sw = shape.<span class="hljs-title function_">dissolve</span>(by=<span class="hljs-string">'new_column'</span>)[<span class="hljs-string">'geometry'</span>]
rg = regionmask.<span class="hljs-title function_">mask_3D_geopandas</span>(sw, lon_or_obj=ds.<span class="hljs-property">lon</span>, lat=ds.<span class="hljs-property">lat</span>)

fig, ax = plt.<span class="hljs-title function_">subplots</span>(subplot_kw=<span class="hljs-title function_">dict</span>(projection=ccrs.<span class="hljs-title class_">PlateCarree</span>()), figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">9</span>))
#shape.<span class="hljs-title function_">plot</span>(ax=ax, color=<span class="hljs-string">'black'</span>)
ds.<span class="hljs-title function_">where</span>(rg).<span class="hljs-property">TAVG</span>.<span class="hljs-title function_">plot</span>(ax=ax, alpha=<span class="hljs-number">0.6</span>)
gdf.<span class="hljs-title function_">plot</span>(ax=ax, color=<span class="hljs-string">'r'</span>, markersize=<span class="hljs-number">85</span>)
ax.<span class="hljs-title function_">gridlines</span>(draw_labels=<span class="hljs-title class_">True</span>, linewidth=<span class="hljs-number">2</span>, color=<span class="hljs-string">'black'</span>, alpha=<span class="hljs-number">0.5</span>, linestyle=<span class="hljs-string">'--'</span>)
plt.<span class="hljs-title function_">show</span>()
</code></pre>
<!-- TIL ìˆ˜í‰ -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<img src="/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_8.png">
<p>ë³´ì‹œë‹¤ì‹œí”¼ ì´ ë°©ë²•ì€ ë²”ì£¼í˜• ë°ì´í„°ì—ë§Œ ì ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìš°ë¦¬ê°€ ë‹¤ë£¨ëŠ” ê²ƒì€ ì˜¨ë„ë¡œ, ì´ëŠ” ì—°ì† ë³€ìˆ˜ë¡œ ì–´ë–¤ ë²”ìœ„ ì•ˆì—ì„œ ì–´ë–¤ ê°’ì´ë“  ê°€ì§ˆ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì´ ë³´ê°„ì€ í˜¼ë™ìŠ¤ëŸ¬ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í˜„ì‹¤ì—ì„œëŠ” í•­ìƒ ê·¸ë¼ë°ì´ì…˜ê³¼ ë¬´ì‘ìœ„ì„±ì´ ìˆìŠµë‹ˆë‹¤.</p>
<p>ê·¸ë˜ì„œ ì¢€ ë” ê³ ê¸‰ ì•Œê³ ë¦¬ì¦˜ì„ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.</p>
<h1>II. ì—­ ê±°ë¦¬ ê°€ì¤‘ ì´ë™ë²• (IDW)</h1>
<!-- TIL ìˆ˜í‰ -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ê¸°ë³¸ì ìœ¼ë¡œ ì—­ ê±°ë¦¬ ê°€ì¤‘ì¹˜(IDW)ëŠ” NNì˜ í–¥ìƒëœ ë²„ì „ì…ë‹ˆë‹¤:</p>
<pre><code class="hljs language-js">def <span class="hljs-title function_">IDW</span>(data, <span class="hljs-variable constant_">LAT</span>, <span class="hljs-variable constant_">LON</span>, betta=<span class="hljs-number">2</span>):
  array = np.<span class="hljs-title function_">empty</span>((<span class="hljs-variable constant_">LAT</span>.<span class="hljs-property">shape</span>[<span class="hljs-number">0</span>], <span class="hljs-variable constant_">LON</span>.<span class="hljs-property">shape</span>[<span class="hljs-number">0</span>]))

  <span class="hljs-keyword">for</span> i, lat <span class="hljs-keyword">in</span> <span class="hljs-title function_">enumerate</span>(<span class="hljs-variable constant_">LAT</span>):
    <span class="hljs-keyword">for</span> j, lon <span class="hljs-keyword">in</span> <span class="hljs-title function_">enumerate</span>(<span class="hljs-variable constant_">LON</span>):
      weights = data.<span class="hljs-title function_">apply</span>(lambda <span class="hljs-attr">row</span>: <span class="hljs-title class_">Euclidean</span>(row.<span class="hljs-property">LONGITUDE</span>, lon, row.<span class="hljs-property">LATITUDE</span>, lat)**(-betta), axis=<span class="hljs-number">1</span>)
      z = <span class="hljs-title function_">sum</span>(weights*data.<span class="hljs-property">TAVG</span>)/weights.<span class="hljs-title function_">sum</span>()
      array[i,j] = z
  <span class="hljs-keyword">return</span> array
</code></pre>
<p>ê°€ê¹Œìš´ ì•Œë ¤ì§„ ì ì˜ ê°’ì„ í• ë‹¹í•˜ëŠ” ëŒ€ì‹ , ì—¬ê¸°ì„œëŠ” ê°€ì¤‘ì¹˜ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤. ê·¸ë¥¼ ìœ„í•´ ì•ì„œ ì–¸ê¸‰í•œ ìœ í´ë¦¬ë“œ ê±°ë¦¬ê°€ ì‚¬ìš©ë˜ì§€ë§Œ, ì´ë²ˆì—ëŠ” ê° ê±°ë¦¬ë¥¼ -Î² ìŠ¹ìœ¼ë¡œ ì œê³±í•©ë‹ˆë‹¤ (Î²ëŠ” ì„ì˜ì˜ ê°’ì…ë‹ˆë‹¤). ì´ëŸ¬í•œ ê°€ì¤‘ì¹˜ëŠ” ê° ì§€ë©´ ì ì´ íŠ¹ì • ê²©ì ë…¸ë“œì— ë¯¸ì¹˜ëŠ” ê¸°ì—¬ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ê±°ë¦¬ê°€ ë©€ìˆ˜ë¡ ì´ ì ì´ ë…¸ë“œ ê°’ì— ë¯¸ì¹˜ëŠ” ì˜í–¥ì´ ì ì–´ì§‘ë‹ˆë‹¤.</p>
<p>ê°€ì¤‘ì¹˜ë¥¼ ì–»ì€ í›„ ê°€ì¤‘ í‰ê· ì„ ê³„ì‚°í•©ë‹ˆë‹¤.</p>
<!-- TIL ìˆ˜í‰ -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p><img src="/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_9.png" alt="image"></p>
<p><img src="/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_10.png" alt="image"></p>
<p>Letâ€™s plot it:</p>
<p><img src="/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_11.png" alt="image"></p>
<!-- TIL ìˆ˜í‰ -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ë³´ì‹œëŠ” ëŒ€ë¡œ, ì§€ê¸ˆ ê²°ê³¼ê°€ í›¨ì”¬ í˜„ì‹¤ì ì´ê³  ë¶€ë“œëŸ½ìŠµë‹ˆë‹¤!</p>
<h2>III. í¬ë¦¬ì§•</h2>
<p>ì˜¤ëŠ˜ì˜ ë§ˆì§€ë§‰ ë©”ì„œë“œëŠ” í¬ë¦¬ì§•ì…ë‹ˆë‹¤. ì´ ì„¸ ê°€ì§€ ë°©ë²• ì¤‘ì—ì„œ ê°€ì¥ ë³µì¡í•œ ë°©ë²• ì¤‘ í•˜ë‚˜ì´ë©°, ìš°ë¦¬ëŠ” ê°„ë‹¨íˆ ì•Œì•„ë³¼ ê²ƒì…ë‹ˆë‹¤. ì˜ì‹ì ì´ê³  íš¨ê³¼ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê³  ì‹¶ë‹¤ë©´ ë¬¸í—Œì„ ì‚´í´ë³¼ ê²ƒì„ ê³ ë ¤í•´ë³´ì„¸ìš”!</p>
<p>ê·¸ëŸ¬ë¯€ë¡œ ì´ ë°©ë²•ì˜ ì£¼ìš” ì•„ì´ë””ì–´ëŠ” ë°”ë¦¬ì˜¤ê·¸ë¨(ë˜ëŠ” ì„¸ë¯¸ë°”ë¦¬ì˜¤ê·¸ë¨)ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ë³¸ì§ˆì ìœ¼ë¡œ ë°”ë¦¬ì˜¤ê·¸ë¨ì€ ì–´ë–¤ ë§¤ê°œë³€ìˆ˜ì˜ ë³€ì´ê°€ ê±°ë¦¬ì™€ ë°©í–¥ì— ë”°ë¼ ì–´ë–»ê²Œ ë³€í•˜ëŠ”ì§€ë¥¼ ì¸¡ì •í•©ë‹ˆë‹¤. ì´ê²ƒì´ ë°”ë¡œ ìš°ë¦¬ê°€ ê³µê¸° ì˜¨ë„ë¥¼ ë‹¤ë£° ë•Œ í•„ìš”í•œ ë¶€ë¶„ì…ë‹ˆë‹¤.</p>
<!-- TIL ìˆ˜í‰ -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>í¬ë¦¬ì§• ì•Œê³ ë¦¬ì¦˜ì„ êµ¬í˜„í•˜ë ¤ë©´ ë‘ ê°€ì§€ ìœ í˜•ì˜ ë³€ì´ë¡œê·¸ë¨ì´ í•„ìš”í•©ë‹ˆë‹¤: ì‹¤í—˜ì  ë³€ì´ë¡œê·¸ë¨ê³¼ ì´ë¡ ì  ë³€ì´ë¡œê·¸ë¨ì…ë‹ˆë‹¤.</p>
<p>ì²« ë²ˆì§¸ëŠ” ì •ë§ ì‰½ê²Œ ê³„ì‚°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°ë§ˆ Î³ë¡œ ì •ì˜ë©ë‹ˆë‹¤:</p>
<p>[ \gamma(h) = \frac{1}{2N(h)}\sum_{i=1}^{N(h)}[z(x_i) - z(x_i + h)]^2 ]</p>
<p>ì—¬ê¸°ì„œ,</p>
<ul>
<li>( h )ëŠ” ë‘ ì  ì‚¬ì´ì˜ ì§€ë¦¬ì  ê±°ë¦¬,</li>
<li>(z)ëŠ” ì˜¨ë„ í•¨ìˆ˜ì…ë‹ˆë‹¤.</li>
</ul>
<p>ê°„ë‹¨íˆ ë§í•´ ì´ê²ƒì€ ì•Œë ¤ì§„ ì ì—ì„œ ì˜¨ë„ ì°¨ì´ì˜ í‰ê· ì…ë‹ˆë‹¤.</p>
<!-- TIL ìˆ˜í‰ -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ì´ë¡ ì  ë³€ì´ê·¸ë¨ì€ ë‹¤ì†Œ ë³µì¡í•©ë‹ˆë‹¤. ë¨¼ì €, ê·¸ëŸ°ê²ƒì´ ë§ì´ ìˆìŠµë‹ˆë‹¤:</p>
<p><img src="/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_13.png" alt="Variogram"></p>
<p>ì—¬ê¸°ì„œ pëŠ” ë¶€ë¶„ ì¬, dëŠ” ê±°ë¦¬(hë¥¼ ì‚¬ìš©í–ˆì—ˆì£ ), nì€ ê·¹ì†Œê°’, rì€ ë²”ìœ„ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.</p>
<p>CDT ì½œë¡¬ë¹„ì•„ì—ì„œ ì´ëŸ¬í•œ ë§¤ê°œë³€ìˆ˜ì— ëŒ€í•œ ì •ë§ ì¢‹ì€ ì‹œê°ì  ì„¤ëª…ì„ ì°¾ì•˜ì–´ìš”. ì €ëŠ” ê·¸ë“¤ì˜ ìë£Œì—ì„œ Î³ì™€ ê±°ë¦¬ ì‚¬ì´ì˜ ê´€ê³„ë¥¼ ì„¤ëª…í•˜ëŠ” ì´ë¯¸ì§€ë¥¼ ì±„íƒí–ˆìŠµë‹ˆë‹¤. ì´ì œëŠ” sill, partial sill, nugget ë° rangeê°€ ë¬´ì—‡ì¸ì§€ ëª…í™•í•´ ë³´ì…ë‹ˆë‹¤.</p>
<!-- TIL ìˆ˜í‰ -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p><img src="/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_14.png" alt="Spatial Interpolation Method"></p>
<p>ì•Œê³ ë¦¬ì¦˜ì˜ ì „ì²´ ì•„ì´ë””ì–´ëŠ” ì´ë¡ ì  ë³€ì´ê·¸ë¨ì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ì¡°ì •í•˜ì—¬ ì‹¤í—˜ì ì¸ ê²ƒì— ë§ê²Œ ë§ì¶”ê³ , ê·¸ê²ƒì„ ì‚¬ìš©í•˜ì—¬ ë…¸ë“œì˜ ê°’ì„ ì˜ˆì¸¡í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.</p>
<p>ì´ ë°©ë²•ì„ êµ¬í˜„í•˜ë ¤ë©´ ëª‡ ê°€ì§€ ì¶”ê°€ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ í•„ìš”í•˜ë©° OrdinaryKrigingì´ë¼ëŠ” í´ë˜ìŠ¤ë¥¼ ìƒì„±í•´ì•¼í•©ë‹ˆë‹¤.</p>
<pre><code class="hljs language-python"><span class="hljs-keyword">from</span> scipy.linalg <span class="hljs-keyword">import</span> solve
<span class="hljs-keyword">from</span> itertools <span class="hljs-keyword">import</span> product
<span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> mean_squared_error <span class="hljs-keyword">as</span> MSE

<span class="hljs-keyword">class</span> <span class="hljs-title class_">OrdinaryKriging</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, lats, lons, values</span>):
        self.lats = lats
        self.lons= lons
        self.values = values

        self.nugget_values = [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]
        self.sill_values = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]
        self.range_values = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]

        <span class="hljs-comment"># ëª¨ìˆ˜ ê°’ì„ ë§ì¶”ê¸° ìœ„í•œ ëª¨ë“  ì¡°í•© ìƒì„±</span>
        self.parameter_combinations = <span class="hljs-built_in">list</span>(product(self.nugget_values, self.sill_values, self.range_values))
        self.optimal_pars = <span class="hljs-literal">None</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">theoretical_variogram</span>(<span class="hljs-params">self, h, nugget, sill, r</span>):
        <span class="hljs-keyword">return</span> nugget + (sill-nugget) * (<span class="hljs-number">1</span>-np.exp(-<span class="hljs-number">3</span>*h/r))

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">Euclidean</span>(<span class="hljs-params">self, X, Y</span>):
        all_dists, point_dists = [], []
        <span class="hljs-keyword">for</span> x,y <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(X, Y):
          k = <span class="hljs-number">0</span>
          <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(X)):
            h = np.linalg.norm(np.array([x, y]) - np.array([X[k], Y[k]))
            point_dists.append(h)
          all_dists.append(point_dists)
          point_dists = []
        <span class="hljs-keyword">return</span> all_dists

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">gamma</span>(<span class="hljs-params">self</span>):
        distances = self.Euclidean(self.lats, self.lons)
        differences = np.<span class="hljs-built_in">abs</span>(self.values.reshape(-<span class="hljs-number">1</span>,<span class="hljs-number">1</span>) - self.values)
        variogram_values = []
        <span class="hljs-keyword">for</span> h <span class="hljs-keyword">in</span> np.unique(distances):
            values_at_h = differences[(distances == h)]
            variogram_values.append(np.mean(values_at_h**<span class="hljs-number">2</span>))
        <span class="hljs-keyword">return</span> variogram_values, np.unique(distances)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">fit</span>(<span class="hljs-params">self</span>):
        experimental_variogram, distances = self.gamma()
        fit_metrics = []
        <span class="hljs-keyword">for</span> nugget, sill, range_ <span class="hljs-keyword">in</span> self.parameter_combinations:
            theoretical_variogram_values = self.theoretical_variogram(distances, nugget, sill, range_)
            fit_metric = MSE(experimental_variogram, theoretical_variogram_values)
            fit_metrics.append((nugget, sill, range_, fit_metric))

        self.optimal_pars = <span class="hljs-built_in">min</span>(fit_metrics, key=<span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">3</span>])[:<span class="hljs-number">3</span>]

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">predict</span>(<span class="hljs-params">self, point</span>):
        points = np.array([(x,y) <span class="hljs-keyword">for</span> x,y <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(self.lats, self.lons)])
        distances = np.linalg.norm(points - point, axis=<span class="hljs-number">1</span>)
        pars = <span class="hljs-built_in">list</span>(self.optimal_pars)
        pars.insert(<span class="hljs-number">0</span>, distances)
        weights = self.theoretical_variogram(*pars)
        weights /= np.<span class="hljs-built_in">sum</span>(weights)
        <span class="hljs-keyword">return</span> np.dot(weights, self.values)

kriging = OrdinaryKriging(df.LATITUDE.values, df.LONGITUDE.values, df.TAVG.values)

kriging.fit()
</code></pre>
<!-- TIL ìˆ˜í‰ -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ì´ì œ ê° í•¨ìˆ˜ë¥¼ ë”°ë¡œ ì‚´í´ë´…ì‹œë‹¤.
<strong>init</strong> í•¨ìˆ˜ëŠ” ì¢Œí‘œì™€ ê°’ì˜ ì´ˆê¸°í™” ì™¸ì— nugget, sill, rangeì˜ ê°€ëŠ¥í•œ ê°’ìœ¼ë¡œ êµ¬ì„±ëœ ì„¸ ê°œì˜ ë¦¬ìŠ¤íŠ¸ë¥¼ í¬í•¨í•©ë‹ˆë‹¤. ëª¨ë“  ê°€ëŠ¥í•œ ì¡°í•©ìœ¼ë¡œ ì„ì–´ì„œ parameter_combinations ë³€ìˆ˜ì— ì €ì¥ë©ë‹ˆë‹¤. ìš°ë¦¬ëŠ” ë‚˜ì¤‘ì— ìµœì  ê°’ì„ ì°¾ì„ ë•Œ í•„ìš”í•  ê²ƒì…ë‹ˆë‹¤.</p>
<pre><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, lats, lons, values</span>):
        self.lats = lats
        self.lons= lons
        self.values = values

        self.nugget_values = [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]
        self.sill_values = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]
        self.range_values = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]

        <span class="hljs-comment"># ë§ì¶”ê¸° ìœ„í•œ ëª¨ë“  íŒŒë¼ë¯¸í„° ê°’ ì¡°í•© ìƒì„±</span>
        self.parameter_combinations = <span class="hljs-built_in">list</span>(product(self.nugget_values, self.sill_values, self.range_values))
        self.optimal_pars = <span class="hljs-literal">None</span>
</code></pre>
<p>ë‘ ë²ˆì§¸ í•¨ìˆ˜ì¸ theoretical_variogramì€ ì´ì „ì— ì–¸ê¸‰ëœ ê³µì‹ ì¤‘ í•˜ë‚˜ë¥¼ íŒŒì´ì¬ìœ¼ë¡œ êµ¬í˜„í•œ ê²ƒì— ë¶ˆê³¼í•©ë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ” ì§€ìˆ˜ í•¨ìˆ˜ì…ë‹ˆë‹¤ (í•˜ì§€ë§Œ ë‹¤ë¥¸ í•¨ìˆ˜ì— ëŒ€í•œ ì½”ë“œë¥¼ ì‘ì„±í•˜ì—¬ ê²°ê³¼ë¥¼ ë¹„êµí•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤):</p>
<pre><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">theoretical_variogram</span>(<span class="hljs-params">self, h, nugget, sill, r</span>):
 <span class="hljs-keyword">return</span> nugget + (sill-nugget) * (<span class="hljs-number">1</span>-np.exp(-<span class="hljs-number">3</span>*h/r))
</code></pre>
<!-- TIL ìˆ˜í‰ -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ì„¸ ë²ˆì§¸ í´ë˜ìŠ¤ ë©”ì„œë“œëŠ” ìœ í´ë¦¬ë””ì•ˆì…ë‹ˆë‹¤. ì´ê²ƒì€ NNê³¼ IDWë¥¼ ìœ„í•´ ë§Œë“  í•¨ìˆ˜ì˜ ë³€ê²½ëœ ë²„ì „ì…ë‹ˆë‹¤. ì´ë²ˆì—ëŠ” ì ê³¼ ëª¨ë“  ë‹¤ë¥¸ ì  ì‚¬ì´ì˜ ê±°ë¦¬ë¥¼ ë‚˜íƒ€ë‚´ëŠ” (n,n) í–‰ë ¬ì„ ë°˜í™˜í•©ë‹ˆë‹¤ (ê° í–‰ì—ì„œ í•˜ë‚˜ì˜ ê°’ì€ 0ì´ë©°, ì ê³¼ ê·¸ ìì‹  ì‚¬ì´ì˜ ê±°ë¦¬ëŠ” 0ì…ë‹ˆë‹¤).</p>
<pre><code class="hljs language-js">def <span class="hljs-title class_">Euclidean</span>(self, X, Y):
        all_dists, point_dists = [], []
        <span class="hljs-keyword">for</span> x, y <span class="hljs-keyword">in</span> <span class="hljs-title function_">zip</span>(X, Y):
          k = <span class="hljs-number">0</span>
          <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-title function_">range</span>(<span class="hljs-title function_">len</span>(X)):
            h = np.<span class="hljs-property">linalg</span>.<span class="hljs-title function_">norm</span>(np.<span class="hljs-title function_">array</span>([x, y]) - np.<span class="hljs-title function_">array</span>([X[k], Y[k]))
            point_dists.<span class="hljs-title function_">append</span>(h)
          all_dists.<span class="hljs-title function_">append</span>(point_dists)
          point_dists = []
        <span class="hljs-keyword">return</span> all_dists
</code></pre>
<p>ë„¤ ë²ˆì§¸ í•¨ìˆ˜ëŠ” fittingì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ” ì‹¤í—˜ì  ë³€ë¦¬ì˜¤ê·¸ë¨ ê°’ê³¼ ìœ í´ë¦¬ë””ì•ˆ ê±°ë¦¬ë¥¼ ì–»ìŠµë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ sill, range ë° nuggetì˜ ì¡°í•©ì„ ë°˜ë³µí•˜ë©´ì„œ ì´ë¡ ì  ë³€ë¦¬ì˜¤ê·¸ë¨ ê°’ê³¼ ì‹¤í—˜ì  ê°’ ì‚¬ì´ì˜ í‰ê·  ì œê³± ì˜¤ì°¨(Mean Squared Error, MSE) ì¶”ì •ì„ ê³„ì‚°í•©ë‹ˆë‹¤ (ë‹¤ë¥¸ ë©”íŠ¸ë¦­ì„ ì‚¬ìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤). ê·¸ëŸ° ë‹¤ìŒ ìµœì ì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ í´ë˜ìŠ¤ ë³€ìˆ˜ optimal_parsì— ì €ì¥í•©ë‹ˆë‹¤.</p>
<pre><code class="hljs language-js">def <span class="hljs-title function_">fit</span>(self):
        experimental_variogram, distances = self.<span class="hljs-title function_">gamma</span>()
        fit_metrics = []
        <span class="hljs-keyword">for</span> nugget, sill, range_ <span class="hljs-keyword">in</span> self.<span class="hljs-property">parameter_combinations</span>:
            theoretical_variogram_values = self.<span class="hljs-title function_">theoretical_variogram</span>(distances, nugget, sill, range_)
            fit_metric = <span class="hljs-title function_">MSE</span>(experimental_variogram, theoretical_variogram_values)
            fit_metrics.<span class="hljs-title function_">append</span>((nugget, sill, range_, fit_metric))

        self.<span class="hljs-property">optimal_pars</span> = <span class="hljs-title function_">min</span>(fit_metrics, key=lambda <span class="hljs-attr">x</span>: x[<span class="hljs-number">3</span>])[:<span class="hljs-number">3</span>]
</code></pre>
<!-- TIL ìˆ˜í‰ -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ë§ˆì§€ë§‰ìœ¼ë¡œ ê°€ì¥ ì¤‘ìš”í•œ í•¨ìˆ˜ëŠ” ì˜ˆì¸¡ì…ë‹ˆë‹¤. ì…ë ¥ìœ¼ë¡œ ì  (lat;lon)ì„ ë°›ì•„ì„œ í•´ë‹¹ ì ê³¼ ë‹¤ë¥¸ ì•Œë ¤ì§„ ê°’ë“¤ ì‚¬ì´ì˜ ê±°ë¦¬ë¥¼ ì¶”ì •í•©ë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ, ì•ì„œ ì–»ì€ ìµœì  íŒŒë¼ë¯¸í„°ë¥¼ ì „ë‹¬í•˜ì—¬ ì´ë¡ ì  ë³€ì´ê·¸ë¨ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê³  ê°€ì¤‘ì¹˜ë¥¼ ì¶œë ¥ê°’ìœ¼ë¡œ ë°›ìŠµë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ ê°€ì¤‘ í‰ê· ì„ ê³„ì‚°í•˜ê³  ë°˜í™˜í•©ë‹ˆë‹¤.</p>
<pre><code class="hljs language-js">def <span class="hljs-title function_">predict</span>(self, point):
        points = np.<span class="hljs-title function_">array</span>([(x,y) <span class="hljs-keyword">for</span> x,y <span class="hljs-keyword">in</span> <span class="hljs-title function_">zip</span>(self.<span class="hljs-property">lats</span>, self.<span class="hljs-property">lons</span>)])
        distances = np.<span class="hljs-property">linalg</span>.<span class="hljs-title function_">norm</span>(points - point, axis=<span class="hljs-number">1</span>)
        pars = <span class="hljs-title function_">list</span>(self.<span class="hljs-property">optimal_pars</span>)
        pars.<span class="hljs-title function_">insert</span>(<span class="hljs-number">0</span>, distances)
        weights = self.<span class="hljs-title function_">theoretical_variogram</span>(*pars)
        weights /= np.<span class="hljs-title function_">sum</span>(weights)
        <span class="hljs-keyword">return</span> np.<span class="hljs-title function_">dot</span>(weights, self.<span class="hljs-property">values</span>)
</code></pre>
<p>ì´ì œ ëª¨ë“  ì˜ˆì¸¡ê°’ì„ ìˆ˜ì§‘í•˜ê³  ì§€ë„ë¥¼ ì‹œê°í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
<pre><code class="hljs language-js">row, grid = [], []
<span class="hljs-keyword">for</span> lat <span class="hljs-keyword">in</span> <span class="hljs-attr">LAT</span>:
  <span class="hljs-keyword">for</span> lon <span class="hljs-keyword">in</span> <span class="hljs-attr">LON</span>:
    row.<span class="hljs-title function_">append</span>(kriging.<span class="hljs-title function_">predict</span>(np.<span class="hljs-title function_">array</span>([lat, lon])))
  grid.<span class="hljs-title function_">append</span>(row)
  row=[]

ds = xr.<span class="hljs-title class_">Dataset</span>(
    {<span class="hljs-string">'TAVG'</span>: ([<span class="hljs-string">'lat'</span>, <span class="hljs-string">'lon'</span>], grid)},
    coords={<span class="hljs-string">'lat'</span>: <span class="hljs-variable constant_">LAT</span>, <span class="hljs-string">'lon'</span>: <span class="hljs-variable constant_">LON</span>})

fig, ax = plt.<span class="hljs-title function_">subplots</span>(subplot_kw=<span class="hljs-title function_">dict</span>(projection=ccrs.<span class="hljs-title class_">PlateCarree</span>()), figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">9</span>))
ds.<span class="hljs-title function_">where</span>(rg).<span class="hljs-property">TAVG</span>.<span class="hljs-title function_">plot</span>(ax=ax, alpha=<span class="hljs-number">0.6</span>)
gdf.<span class="hljs-title function_">plot</span>(ax=ax, color=<span class="hljs-string">'r'</span>, markersize=<span class="hljs-number">85</span>)
ax.<span class="hljs-title function_">gridlines</span>(draw_labels=<span class="hljs-title class_">True</span>,linewidth=<span class="hljs-number">2</span>, color=<span class="hljs-string">'black'</span>, alpha=<span class="hljs-number">0.5</span>, linestyle=<span class="hljs-string">'--'</span>)
plt.<span class="hljs-title function_">show</span>()
</code></pre>
<!-- TIL ìˆ˜í‰ -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p><img src="/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_15.png" alt="image"></p>
<p>ìœ„ì™€ ê°™ì´ ê²°ê³¼ê°€ IDWì—ì„œ ì–»ì€ ê²ƒê³¼ëŠ” ê½¤ ë‹¤ë¥´ë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆì–´ìš”. í¬ë¦¬ê¹…ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ë§¤ê°œë³€ìˆ˜ëŠ” ì„ íƒí•œ ì´ë¡ ì  ë³€ì´ê·¸ë¨ ì¢…ë¥˜ì¸ë°, ì´ëŠ” ì‚¬ì‹¤ ìƒ ì˜ˆì¸¡ëœ ê°’ê³¼ ê±°ë¦¬ ê°„ì˜ ê´€ê³„ë¥¼ ì •ì˜í•©ë‹ˆë‹¤. ì½”ë“œë¥¼ ì‚¬ìš©í•˜ê¸° ê·€ì°®ìœ¼ì‹œê±°ë‚˜ ì§ì ‘ ì‘ì„±í•˜ê³  ì‹¶ì§€ ì•Šë‹¤ë©´ ë§ì€ ë³€ì´ê·¸ë¨ ëª¨ë¸ì˜ êµ¬í˜„ì„ ê°–ê³  ìˆëŠ” PyKrige ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚´í´ë³´ì„¸ìš”.</p>
<p>ì´ ê¸€ì´ ìœ ìµí•˜ê³  í†µì°°ë ¥ì„ ì¤¬ìœ¼ë©´ ì¢‹ê² ì–´ìš”!</p>
<!-- TIL ìˆ˜í‰ -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ì €ì˜ Mediumì— ì˜¬ë¦° ëª¨ë“  ê²Œì‹œë¬¼ì€ ë¬´ë£Œë¡œ ê³µê°œë˜ì–´ ìˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì—¬ê¸°ì„œ ì œë¥¼ íŒ”ë¡œìš°í•´ ì£¼ì‹¤ ê²½ìš° ì •ë§ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤!</p>
<p>ì°¸ê³ ë¡œ, ì €ëŠ” (ì§€ë¦¬)ë°ì´í„° ê³¼í•™, ê¸°ê³„í•™ìŠµ/ì¸ê³µì§€ëŠ¥, ê·¸ë¦¬ê³  ê¸°í›„ ë³€í™”ì— ëŒ€í•´ ì—´ì •ì ìœ¼ë¡œ ê³µë¶€í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë§Œì•½ í•¨ê»˜ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ê³  ì‹¶ë‹¤ë©´ LinkedInì—ì„œ ì—°ë½ ì£¼ì„¸ìš”.</p>
<p>ğŸ›°ï¸ë” ë§ì€ ì†Œì‹ì„ ìœ„í•´ íŒ”ë¡œìš° í•´ì£¼ì„¸ìš”ğŸ›°ï¸</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"ê³µê°„ ë³´ê°„ì„ ìœ„í•œ 3ê°€ì§€ ì¸ê¸° ìˆëŠ” ë°©ë²•","description":"","date":"2024-07-09 19:17","slug":"2024-07-09-3PopularMethodsforSpatialInterpolation","content":"\n\n## ì²˜ìŒë¶€í„°, Pythonì—ì„œ\n\n\u003cimg src=\"/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_0.png\" /\u003e\n\në³´ê°„ë²•ì€ ë°ì´í„° ê³¼í•™ì ë¿ë§Œ ì•„ë‹ˆë¼ ë‹¤ì–‘í•œ ë¶„ì•¼ì˜ ì‚¬ëŒë“¤ì— ì˜í•´ ì‚¬ìš©ë˜ëŠ” ë§¤ìš° ì¼ë°˜ì ì¸ ìˆ˜í•™ì  ê°œë…ì…ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì§€ë¦¬ ê³µê°„ ë°ì´í„°ë¥¼ ë‹¤ë£° ë•Œ, ë³´ê°„ì€ ì¢…ì¢… í¬ì†Œí•œ ê´€ì¸¡ì¹˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ëŒ€í‘œì ì¸ ê·¸ë¦¬ë“œë¥¼ ë§Œë“¤ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ë” ë³µì¡í•´ì§‘ë‹ˆë‹¤.\n\nì§€ë¦¬ ê³µê°„ ë¶€ë¶„ì— ë“¤ì–´ê°€ê¸° ì „ì—, ì„ í˜• ë³´ê°„ì— ëŒ€í•´ ê°„ë‹¨íˆ ë˜ì§šì–´ ë´…ì‹œë‹¤.\n\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\në””ìì¸ì„ ë³´ì—¬ë“œë¦¬ê¸° ìœ„í•´ ì¼ë°˜ ë‹¤í•­ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤:\n\n```js\ndef F(x):\n  return -2*x**3+x**2+2.1\n\nx = np.arange(-5,5, 0.1)\ny = F(x)\n```\n\n\u003cimg src=\"/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_1.png\" /\u003e\n\nì´ì œ [-4.2, 0, 2.5]ì—ì„œ ëª‡ ê°œì˜ ì ì„ ë¬´ì‘ìœ„ë¡œ ìƒ˜í”Œë§í•˜ê³  ì´ë¥¼ ì—°ê²°í•´ ë³´ê² ìŠµë‹ˆë‹¤:\n\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n![ì´ë¯¸ì§€](/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_2.png)\n\nì´ê²ƒì€ ì„ í˜• ë³´ê°„ë²•ì´ë¼ê³  ë¶ˆë¦½ë‹ˆë‹¤. ê° êµ¬ê°„ì—ì„œ ì§ì„ ìœ¼ë¡œ í•¨ìˆ˜ë¥¼ ê·¼ì‚¬í•˜ê³  ìˆìœ¼ë©°, ì´ì œ 3ê°œì˜ ì ì—ì„œ í•¨ìˆ˜ì˜ ê°’ì„ ì•Œê³  ìˆì„ ë•Œ [-4.2;2.5] êµ¬ê°„ ë‚´ì˜ ê°’ì„ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\në†’ì€ ì •í™•ë„ë¥¼ ê°€ì§„ ë§ì€ ë‹¤ë¥¸ ë°©ë²•ë“¤ì´ ìˆì§€ë§Œ, ê·¸ ë’¤ì— ìˆëŠ” ì•„ì´ë””ì–´ëŠ” ë™ì¼í•©ë‹ˆë‹¤: ì ì–´ë„ ë‘ ê°œì˜ ì•Œë ¤ì§„ ì  ì‚¬ì´ì—ì„œ í•¨ìˆ˜ ê°’ì„ ì°¾ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\nì´ì œ ì§€ë¦¬ ê³µê°„ ë¶€ë¶„ìœ¼ë¡œ ë„˜ì–´ê°ˆ ì‹œê°„ì…ë‹ˆë‹¤. ì´ ììŠµì„œì—ì„œëŠ” NOAAì—ì„œ ì œê³µí•œ ìŠ¤ìœ„ìŠ¤ ì „ì—­ì˜ ê¸°ìƒ ì¸¡ì •ì†Œì—ì„œ ì¸¡ì •ëœ ì¼ì¼ í‰ê·  ëŒ€ê¸° ì˜¨ë„ì˜ ê³µê°„ ë³´ê°„ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ ëª©í‘œì…ë‹ˆë‹¤. ê¸°ëŒ€ë˜ëŠ” ê²°ê³¼ëŠ” 0.1Â° í•´ìƒë„ì˜ ì˜¨ë„ ê·¸ë¦¬ë“œì…ë‹ˆë‹¤.\n\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\në¨¼ì €, ìŠ¤ìœ„ìŠ¤ì˜ í–‰ì • ê²½ê³„ë¥¼ ì–»ì–´ì™€ì„œ geopandasë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹œê°í™”í•´ì•¼ í•©ë‹ˆë‹¤:\n\n```python\nimport geopandas as gpd\n\nshape = gpd.read_file('gadm41_CHE_0.shp')\nshape.plot()\n```\n\n\u003cimg src=\"/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_3.png\" /\u003e\n\nì •ë§ ëŒ€ë‹¨í•´ìš”! ìŠ¤ìœ„ìŠ¤ì¸ ê²ƒ ê°™ë„¤ìš” =)\n\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nì´ì œ ì˜¨ë„ ê´€ì¸¡ì¹˜ë¥¼ ê·¸ë˜í”„ë¡œ í‘œì‹œí•˜ê³  êµ­ê°€ ëª¨ì–‘ê³¼ ê²¹ì³ë³´ê² ìŠµë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ ì •ê¸°ì ì¸ íŒë‹¤ ë°ì´í„°í”„ë ˆì„ìœ¼ë¡œ ê¸°ìƒ ë°ì´í„°ë¥¼ ë¡œë“œí•œ ë‹¤ìŒ ì…°ì´í”„ë¦¬ í¬ì¸íŠ¸ë¡œ ë³€í™˜í•œ ì§€ë¦¬ ë°ì´í„°í”„ë ˆì„ìœ¼ë¡œ ë³€í™˜í•˜ê² ìŠµë‹ˆë‹¤:\n\n```python\nimport pandas as pd\nfrom shapely.geometry import Point\n\ndf = pd.read_csv('3639866.csv')\n\npoints = list()\nfor i in range(len(df)):\n  point = Point(df.loc[i, 'LONGITUDE'], df.loc[i, 'LATITUDE'])\n  points.append(point)\n\ngdf = gpd.GeoDataFrame(geometry=points).set_crs(shape.crs)\n```\n\nê·¸ë ‡ê²Œ í•˜ë©´ matplotlibì„ ì‚¬ìš©í•˜ì—¬ ë‘ ë°ì´í„°í”„ë ˆì„ì„ ì‰½ê²Œ ê²¹ì³ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n```python\nfig, ax = plt.subplots(figsize=(16,9))\nshape.plot(ax=ax, color='black')\ngdf.plot(ax=ax, color='r', markersize=85)\nplt.show()\n```\n\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n\n![ê·¸ë¦¬ë“œ ë° ì§€ë„ ì˜¤ë²„ë ˆì´ë¥¼ ì‹œê°í™”í•˜ê¸° ìœ„í•´ ë‹¤ìŒì„ ìˆ˜í–‰í•˜ê² ìŠµë‹ˆë‹¤:](/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_4.png)\n\n```js\nimport matplotlib.ticker as mticker\nimport cartopy.crs as ccrs\nfrom cartopy.mpl.gridliner import LONGITUDE_FORMATTER, LATITUDE_FORMATTER\n\nLAT, LON = np.arange(45.75, 48, 0.1), np.arange(6, 10.81, 0.1)\n\nfig, ax = plt.subplots(subplot_kw=dict(projection=ccrs.PlateCarree()), figsize=(16, 9))\nshape.plot(ax=ax, color='grey')\ngdf.plot(ax=ax, color='r', markersize=85)\n\ngl = ax.gridlines(draw_labels=True,linewidth=2, color='black', alpha=0.5, linestyle='--')\ngl.xlocator = mticker.FixedLocator(LON)\ngl.ylocator = mticker.FixedLocator(LAT)\ngl.xformatter = LONGITUDE_FORMATTER\ngl.yformatter = LATITUDE_FORMATTER\nplt.show()\n```\n\n![ê²°ê³¼ ì´ë¯¸ì§€](/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_5.png)\n\n\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nìœ„ ê·¸ë¦¼ì— ë‚˜íƒ€ë‚œ ì •ê·œ ê·¸ë¦¬ë“œì— ëŒ€í•´ ë³´ê°„ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ ëª©í‘œì…ë‹ˆë‹¤. ì´ ê·¸ë¦¬ë“œì—ëŠ” 8ê°œì˜ ì˜¨ë„ ê´€ì¸¡ì¹˜ê°€ ìˆìŠµë‹ˆë‹¤.\n\n# I. ìµœê·¼ì ‘ ì´ì›ƒ (NN)\n\nê°€ì¥ ì§ê´€ì ì´ê³  ê°„ë‹¨í•œ ë°©ë²• ì¤‘ í•˜ë‚˜ì¸ Nearest Neighbor (NN)ì— ëŒ€í•´ ì´ì•¼ê¸°í•˜ê² ìŠµë‹ˆë‹¤. ì´ë¦„ì—ì„œ ì•Œ ìˆ˜ ìˆë“¯ì´, ì´ ì•Œê³ ë¦¬ì¦˜ì€ ê° ê·¸ë¦¬ë“œ ë…¸ë“œì— ê°€ì¥ ê°€ê¹Œìš´ ê´€ì¸¡ì¹˜ì˜ ê°’ì„ í• ë‹¹í•©ë‹ˆë‹¤.\n\nì´ë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•´ í•„ìš”í•œ í•¨ìˆ˜ëŠ” ë‘ ê°€ì§€ë¿ì…ë‹ˆë‹¤. ì²« ë²ˆì§¸ í•¨ìˆ˜ëŠ” ìœ í´ë¦¬ë“œ í•¨ìˆ˜ì´ë©°, ë‹¤ìŒ ê³µì‹ì„ ì‚¬ìš©í•˜ì—¬ ë‘ ì  ì‚¬ì´ì˜ ê±°ë¦¬ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤:\n\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n\n![Image](/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_6.png)\n\në‘ ë²ˆì§¸ëŠ” NN ë©”ì†Œë“œ ìì²´ì…ë‹ˆë‹¤. ê´€ì¸¡ê°’ì„ ì €ì¥í•  ë¹ˆ ë°°ì—´ì„ ë§Œë“  í›„, ëª¨ë“  ìœ„ë„ì™€ ê²½ë„ë¥¼ ë°˜ë³µí•˜ë©´ì„œ ê° í¬ì¸íŠ¸ì—ì„œ í˜„ì¬ ê·¸ë¦¬ë“œ ë…¸ë“œê¹Œì§€ì˜ ê±°ë¦¬ë¥¼ ê³„ì‚°í•˜ê³  ê·¸ ê·¸ë¦¬ë“œ ë…¸ë“œì— ê°€ì¥ ê°€ê¹Œìš´ ê´€ì¸¡ê°’ì„ í• ë‹¹í•©ë‹ˆë‹¤.\n\n```js\ndef ìœ í´ë¦¬ë“œ(x1, x2, y1, y2):\n  return ((x1-x2)**2 + (y1-y2)**2) ** 0.5\n\ndef NN(data, LAT, LON):\n  array = np.empty((LAT.shape[0], LON.shape[0]))\n\n  for i, lat in enumerate(LAT):\n    for j, lon in enumerate(LON):\n      idx = data.apply(lambda row: ìœ í´ë¦¬ë“œ(row.LONGITUDE, lon, row.LATITUDE, lat), axis=1).argmin() \n      array[i, j] = data.loc[idx, 'TAVG']\n  return array\n```\n\nì „ì²´ ì•„ì´ë””ì–´ëŠ” ì´ í•œ ì¤„ì— ìˆìŠµë‹ˆë‹¤.\n\n\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```python\nidx = data.apply(lambda row: Euclidean(row.LONGITUDE, lon, row.LATITUDE, lat), axis=1).argmin()\n```\n\në³€ìˆ˜ dataëŠ” ê° í–‰ì´ í•˜ë‚˜ì˜ ê¸°ìƒ ì¥ë¹„ ì‚¬ì´íŠ¸ë¥¼ ë‚˜íƒ€ë‚´ëŠ” íŒë‹¤ ë°ì´í„°í”„ë ˆì„ì…ë‹ˆë‹¤. ë”°ë¼ì„œ for ë£¨í”„ì—ì„œ ê±°ë¦¬ë¥¼ ê³„ì‚°í•˜ê³  ìµœì†Œ ê±°ë¦¬ë¥¼ ê°€ì§„ ì‚¬ì´íŠ¸ì˜ ì¸ë±ìŠ¤ë¥¼ ì°¾ìŠµë‹ˆë‹¤.\n\nì´ì œ ì•Œê³ ë¦¬ì¦˜ì„ ì‹¤í–‰í•˜ê³  ê²°ê³¼ë¥¼ xarray ë°ì´í„°ì…‹ìœ¼ë¡œ ë˜í•‘í•´ ë´…ì‹œë‹¤:\n\n```python\nt2m = NN(df, LAT, LON)\nds = xr.Dataset(\n    {'TAVG': (['lat', 'lon'], t2m)},\n    coords={'lat': LAT, 'lon': LON})\n```\n\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nì´ì œ ê²°ê³¼ë¥¼ í”Œë¡œíŒ…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n![](/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_7.png)\n\në³´ê¸° ì¢‹ì§€ë§Œ, regionmask ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ìŠ¤ìœ„ìŠ¤ ë§¤ìŠ¤í¬ë¥¼ ë§Œë“¤ì–´ í”Œë¡¯ì„ ë” ë³´ê¸° ì¢‹ê²Œ ë³€ê²½í•´ ë³´ê² ìŠµë‹ˆë‹¤:\n\n```js\nshape['new_column'] = 0\nsw = shape.dissolve(by='new_column')['geometry']\nrg = regionmask.mask_3D_geopandas(sw, lon_or_obj=ds.lon, lat=ds.lat)\n\nfig, ax = plt.subplots(subplot_kw=dict(projection=ccrs.PlateCarree()), figsize=(16, 9))\n#shape.plot(ax=ax, color='black')\nds.where(rg).TAVG.plot(ax=ax, alpha=0.6)\ngdf.plot(ax=ax, color='r', markersize=85)\nax.gridlines(draw_labels=True, linewidth=2, color='black', alpha=0.5, linestyle='--')\nplt.show()\n```\n\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n\u003cimg src=\"/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_8.png\" /\u003e\n\në³´ì‹œë‹¤ì‹œí”¼ ì´ ë°©ë²•ì€ ë²”ì£¼í˜• ë°ì´í„°ì—ë§Œ ì ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìš°ë¦¬ê°€ ë‹¤ë£¨ëŠ” ê²ƒì€ ì˜¨ë„ë¡œ, ì´ëŠ” ì—°ì† ë³€ìˆ˜ë¡œ ì–´ë–¤ ë²”ìœ„ ì•ˆì—ì„œ ì–´ë–¤ ê°’ì´ë“  ê°€ì§ˆ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì´ ë³´ê°„ì€ í˜¼ë™ìŠ¤ëŸ¬ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í˜„ì‹¤ì—ì„œëŠ” í•­ìƒ ê·¸ë¼ë°ì´ì…˜ê³¼ ë¬´ì‘ìœ„ì„±ì´ ìˆìŠµë‹ˆë‹¤.\n\nê·¸ë˜ì„œ ì¢€ ë” ê³ ê¸‰ ì•Œê³ ë¦¬ì¦˜ì„ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.\n\n# II. ì—­ ê±°ë¦¬ ê°€ì¤‘ ì´ë™ë²• (IDW)\n\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nê¸°ë³¸ì ìœ¼ë¡œ ì—­ ê±°ë¦¬ ê°€ì¤‘ì¹˜(IDW)ëŠ” NNì˜ í–¥ìƒëœ ë²„ì „ì…ë‹ˆë‹¤:\n\n```js\ndef IDW(data, LAT, LON, betta=2):\n  array = np.empty((LAT.shape[0], LON.shape[0]))\n\n  for i, lat in enumerate(LAT):\n    for j, lon in enumerate(LON):\n      weights = data.apply(lambda row: Euclidean(row.LONGITUDE, lon, row.LATITUDE, lat)**(-betta), axis=1)\n      z = sum(weights*data.TAVG)/weights.sum()\n      array[i,j] = z\n  return array\n```\n\nê°€ê¹Œìš´ ì•Œë ¤ì§„ ì ì˜ ê°’ì„ í• ë‹¹í•˜ëŠ” ëŒ€ì‹ , ì—¬ê¸°ì„œëŠ” ê°€ì¤‘ì¹˜ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤. ê·¸ë¥¼ ìœ„í•´ ì•ì„œ ì–¸ê¸‰í•œ ìœ í´ë¦¬ë“œ ê±°ë¦¬ê°€ ì‚¬ìš©ë˜ì§€ë§Œ, ì´ë²ˆì—ëŠ” ê° ê±°ë¦¬ë¥¼ -Î² ìŠ¹ìœ¼ë¡œ ì œê³±í•©ë‹ˆë‹¤ (Î²ëŠ” ì„ì˜ì˜ ê°’ì…ë‹ˆë‹¤). ì´ëŸ¬í•œ ê°€ì¤‘ì¹˜ëŠ” ê° ì§€ë©´ ì ì´ íŠ¹ì • ê²©ì ë…¸ë“œì— ë¯¸ì¹˜ëŠ” ê¸°ì—¬ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ê±°ë¦¬ê°€ ë©€ìˆ˜ë¡ ì´ ì ì´ ë…¸ë“œ ê°’ì— ë¯¸ì¹˜ëŠ” ì˜í–¥ì´ ì ì–´ì§‘ë‹ˆë‹¤.\n\nê°€ì¤‘ì¹˜ë¥¼ ì–»ì€ í›„ ê°€ì¤‘ í‰ê· ì„ ê³„ì‚°í•©ë‹ˆë‹¤.\n\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n\n![image](/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_9.png)\n\n![image](/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_10.png)\n\nLetâ€™s plot it:\n\n![image](/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_11.png)\n\n\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\në³´ì‹œëŠ” ëŒ€ë¡œ, ì§€ê¸ˆ ê²°ê³¼ê°€ í›¨ì”¬ í˜„ì‹¤ì ì´ê³  ë¶€ë“œëŸ½ìŠµë‹ˆë‹¤!\n\n## III. í¬ë¦¬ì§•\n\nì˜¤ëŠ˜ì˜ ë§ˆì§€ë§‰ ë©”ì„œë“œëŠ” í¬ë¦¬ì§•ì…ë‹ˆë‹¤. ì´ ì„¸ ê°€ì§€ ë°©ë²• ì¤‘ì—ì„œ ê°€ì¥ ë³µì¡í•œ ë°©ë²• ì¤‘ í•˜ë‚˜ì´ë©°, ìš°ë¦¬ëŠ” ê°„ë‹¨íˆ ì•Œì•„ë³¼ ê²ƒì…ë‹ˆë‹¤. ì˜ì‹ì ì´ê³  íš¨ê³¼ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê³  ì‹¶ë‹¤ë©´ ë¬¸í—Œì„ ì‚´í´ë³¼ ê²ƒì„ ê³ ë ¤í•´ë³´ì„¸ìš”!\n\nê·¸ëŸ¬ë¯€ë¡œ ì´ ë°©ë²•ì˜ ì£¼ìš” ì•„ì´ë””ì–´ëŠ” ë°”ë¦¬ì˜¤ê·¸ë¨(ë˜ëŠ” ì„¸ë¯¸ë°”ë¦¬ì˜¤ê·¸ë¨)ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ë³¸ì§ˆì ìœ¼ë¡œ ë°”ë¦¬ì˜¤ê·¸ë¨ì€ ì–´ë–¤ ë§¤ê°œë³€ìˆ˜ì˜ ë³€ì´ê°€ ê±°ë¦¬ì™€ ë°©í–¥ì— ë”°ë¼ ì–´ë–»ê²Œ ë³€í•˜ëŠ”ì§€ë¥¼ ì¸¡ì •í•©ë‹ˆë‹¤. ì´ê²ƒì´ ë°”ë¡œ ìš°ë¦¬ê°€ ê³µê¸° ì˜¨ë„ë¥¼ ë‹¤ë£° ë•Œ í•„ìš”í•œ ë¶€ë¶„ì…ë‹ˆë‹¤.\n\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\ní¬ë¦¬ì§• ì•Œê³ ë¦¬ì¦˜ì„ êµ¬í˜„í•˜ë ¤ë©´ ë‘ ê°€ì§€ ìœ í˜•ì˜ ë³€ì´ë¡œê·¸ë¨ì´ í•„ìš”í•©ë‹ˆë‹¤: ì‹¤í—˜ì  ë³€ì´ë¡œê·¸ë¨ê³¼ ì´ë¡ ì  ë³€ì´ë¡œê·¸ë¨ì…ë‹ˆë‹¤.\n\nì²« ë²ˆì§¸ëŠ” ì •ë§ ì‰½ê²Œ ê³„ì‚°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°ë§ˆ Î³ë¡œ ì •ì˜ë©ë‹ˆë‹¤:\n\n\\[ \\gamma(h) = \\frac{1}{2N(h)}\\sum_{i=1}^{N(h)}[z(x_i) - z(x_i + h)]^2 \\]\n\nì—¬ê¸°ì„œ,\n- \\( h \\)ëŠ” ë‘ ì  ì‚¬ì´ì˜ ì§€ë¦¬ì  ê±°ë¦¬,\n- \\(z\\)ëŠ” ì˜¨ë„ í•¨ìˆ˜ì…ë‹ˆë‹¤.\n\nê°„ë‹¨íˆ ë§í•´ ì´ê²ƒì€ ì•Œë ¤ì§„ ì ì—ì„œ ì˜¨ë„ ì°¨ì´ì˜ í‰ê· ì…ë‹ˆë‹¤.\n\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nì´ë¡ ì  ë³€ì´ê·¸ë¨ì€ ë‹¤ì†Œ ë³µì¡í•©ë‹ˆë‹¤. ë¨¼ì €, ê·¸ëŸ°ê²ƒì´ ë§ì´ ìˆìŠµë‹ˆë‹¤:\n\n![Variogram](/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_13.png)\n\nì—¬ê¸°ì„œ pëŠ” ë¶€ë¶„ ì¬, dëŠ” ê±°ë¦¬(hë¥¼ ì‚¬ìš©í–ˆì—ˆì£ ), nì€ ê·¹ì†Œê°’, rì€ ë²”ìœ„ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.\n\nCDT ì½œë¡¬ë¹„ì•„ì—ì„œ ì´ëŸ¬í•œ ë§¤ê°œë³€ìˆ˜ì— ëŒ€í•œ ì •ë§ ì¢‹ì€ ì‹œê°ì  ì„¤ëª…ì„ ì°¾ì•˜ì–´ìš”. ì €ëŠ” ê·¸ë“¤ì˜ ìë£Œì—ì„œ Î³ì™€ ê±°ë¦¬ ì‚¬ì´ì˜ ê´€ê³„ë¥¼ ì„¤ëª…í•˜ëŠ” ì´ë¯¸ì§€ë¥¼ ì±„íƒí–ˆìŠµë‹ˆë‹¤. ì´ì œëŠ” sill, partial sill, nugget ë° rangeê°€ ë¬´ì—‡ì¸ì§€ ëª…í™•í•´ ë³´ì…ë‹ˆë‹¤.\n\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n\n![Spatial Interpolation Method](/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_14.png)\n\nì•Œê³ ë¦¬ì¦˜ì˜ ì „ì²´ ì•„ì´ë””ì–´ëŠ” ì´ë¡ ì  ë³€ì´ê·¸ë¨ì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ì¡°ì •í•˜ì—¬ ì‹¤í—˜ì ì¸ ê²ƒì— ë§ê²Œ ë§ì¶”ê³ , ê·¸ê²ƒì„ ì‚¬ìš©í•˜ì—¬ ë…¸ë“œì˜ ê°’ì„ ì˜ˆì¸¡í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\nì´ ë°©ë²•ì„ êµ¬í˜„í•˜ë ¤ë©´ ëª‡ ê°€ì§€ ì¶”ê°€ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ í•„ìš”í•˜ë©° OrdinaryKrigingì´ë¼ëŠ” í´ë˜ìŠ¤ë¥¼ ìƒì„±í•´ì•¼í•©ë‹ˆë‹¤.\n\n```python\nfrom scipy.linalg import solve\nfrom itertools import product\nfrom sklearn.metrics import mean_squared_error as MSE\n\nclass OrdinaryKriging:\n    def __init__(self, lats, lons, values):\n        self.lats = lats\n        self.lons= lons\n        self.values = values\n\n        self.nugget_values = [0, 1, 2, 3, 4]\n        self.sill_values = [1, 2, 3, 4, 5]\n        self.range_values = [1, 2, 3, 4, 5]\n\n        # ëª¨ìˆ˜ ê°’ì„ ë§ì¶”ê¸° ìœ„í•œ ëª¨ë“  ì¡°í•© ìƒì„±\n        self.parameter_combinations = list(product(self.nugget_values, self.sill_values, self.range_values))\n        self.optimal_pars = None\n\n    def theoretical_variogram(self, h, nugget, sill, r):\n        return nugget + (sill-nugget) * (1-np.exp(-3*h/r))\n\n    def Euclidean(self, X, Y):\n        all_dists, point_dists = [], []\n        for x,y in zip(X, Y):\n          k = 0\n          for k in range(len(X)):\n            h = np.linalg.norm(np.array([x, y]) - np.array([X[k], Y[k]))\n            point_dists.append(h)\n          all_dists.append(point_dists)\n          point_dists = []\n        return all_dists\n\n    def gamma(self):\n        distances = self.Euclidean(self.lats, self.lons)\n        differences = np.abs(self.values.reshape(-1,1) - self.values)\n        variogram_values = []\n        for h in np.unique(distances):\n            values_at_h = differences[(distances == h)]\n            variogram_values.append(np.mean(values_at_h**2))\n        return variogram_values, np.unique(distances)\n\n    def fit(self):\n        experimental_variogram, distances = self.gamma()\n        fit_metrics = []\n        for nugget, sill, range_ in self.parameter_combinations:\n            theoretical_variogram_values = self.theoretical_variogram(distances, nugget, sill, range_)\n            fit_metric = MSE(experimental_variogram, theoretical_variogram_values)\n            fit_metrics.append((nugget, sill, range_, fit_metric))\n\n        self.optimal_pars = min(fit_metrics, key=lambda x: x[3])[:3]\n\n    def predict(self, point):\n        points = np.array([(x,y) for x,y in zip(self.lats, self.lons)])\n        distances = np.linalg.norm(points - point, axis=1)\n        pars = list(self.optimal_pars)\n        pars.insert(0, distances)\n        weights = self.theoretical_variogram(*pars)\n        weights /= np.sum(weights)\n        return np.dot(weights, self.values)\n\nkriging = OrdinaryKriging(df.LATITUDE.values, df.LONGITUDE.values, df.TAVG.values)\n\nkriging.fit()\n```\n\n\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nì´ì œ ê° í•¨ìˆ˜ë¥¼ ë”°ë¡œ ì‚´í´ë´…ì‹œë‹¤.\n__init__ í•¨ìˆ˜ëŠ” ì¢Œí‘œì™€ ê°’ì˜ ì´ˆê¸°í™” ì™¸ì— nugget, sill, rangeì˜ ê°€ëŠ¥í•œ ê°’ìœ¼ë¡œ êµ¬ì„±ëœ ì„¸ ê°œì˜ ë¦¬ìŠ¤íŠ¸ë¥¼ í¬í•¨í•©ë‹ˆë‹¤. ëª¨ë“  ê°€ëŠ¥í•œ ì¡°í•©ìœ¼ë¡œ ì„ì–´ì„œ parameter_combinations ë³€ìˆ˜ì— ì €ì¥ë©ë‹ˆë‹¤. ìš°ë¦¬ëŠ” ë‚˜ì¤‘ì— ìµœì  ê°’ì„ ì°¾ì„ ë•Œ í•„ìš”í•  ê²ƒì…ë‹ˆë‹¤.\n\n```python\ndef __init__(self, lats, lons, values):\n        self.lats = lats\n        self.lons= lons\n        self.values = values\n\n        self.nugget_values = [0, 1, 2, 3, 4]\n        self.sill_values = [1, 2, 3, 4, 5]\n        self.range_values = [1, 2, 3, 4, 5]\n\n        # ë§ì¶”ê¸° ìœ„í•œ ëª¨ë“  íŒŒë¼ë¯¸í„° ê°’ ì¡°í•© ìƒì„±\n        self.parameter_combinations = list(product(self.nugget_values, self.sill_values, self.range_values))\n        self.optimal_pars = None\n```\n\në‘ ë²ˆì§¸ í•¨ìˆ˜ì¸ theoretical_variogramì€ ì´ì „ì— ì–¸ê¸‰ëœ ê³µì‹ ì¤‘ í•˜ë‚˜ë¥¼ íŒŒì´ì¬ìœ¼ë¡œ êµ¬í˜„í•œ ê²ƒì— ë¶ˆê³¼í•©ë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ” ì§€ìˆ˜ í•¨ìˆ˜ì…ë‹ˆë‹¤ (í•˜ì§€ë§Œ ë‹¤ë¥¸ í•¨ìˆ˜ì— ëŒ€í•œ ì½”ë“œë¥¼ ì‘ì„±í•˜ì—¬ ê²°ê³¼ë¥¼ ë¹„êµí•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤):\n\n```python\ndef theoretical_variogram(self, h, nugget, sill, r):\n return nugget + (sill-nugget) * (1-np.exp(-3*h/r))\n```\n\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nì„¸ ë²ˆì§¸ í´ë˜ìŠ¤ ë©”ì„œë“œëŠ” ìœ í´ë¦¬ë””ì•ˆì…ë‹ˆë‹¤. ì´ê²ƒì€ NNê³¼ IDWë¥¼ ìœ„í•´ ë§Œë“  í•¨ìˆ˜ì˜ ë³€ê²½ëœ ë²„ì „ì…ë‹ˆë‹¤. ì´ë²ˆì—ëŠ” ì ê³¼ ëª¨ë“  ë‹¤ë¥¸ ì  ì‚¬ì´ì˜ ê±°ë¦¬ë¥¼ ë‚˜íƒ€ë‚´ëŠ” (n,n) í–‰ë ¬ì„ ë°˜í™˜í•©ë‹ˆë‹¤ (ê° í–‰ì—ì„œ í•˜ë‚˜ì˜ ê°’ì€ 0ì´ë©°, ì ê³¼ ê·¸ ìì‹  ì‚¬ì´ì˜ ê±°ë¦¬ëŠ” 0ì…ë‹ˆë‹¤).\n\n```js\ndef Euclidean(self, X, Y):\n        all_dists, point_dists = [], []\n        for x, y in zip(X, Y):\n          k = 0\n          for k in range(len(X)):\n            h = np.linalg.norm(np.array([x, y]) - np.array([X[k], Y[k]))\n            point_dists.append(h)\n          all_dists.append(point_dists)\n          point_dists = []\n        return all_dists\n```\n\në„¤ ë²ˆì§¸ í•¨ìˆ˜ëŠ” fittingì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ” ì‹¤í—˜ì  ë³€ë¦¬ì˜¤ê·¸ë¨ ê°’ê³¼ ìœ í´ë¦¬ë””ì•ˆ ê±°ë¦¬ë¥¼ ì–»ìŠµë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ sill, range ë° nuggetì˜ ì¡°í•©ì„ ë°˜ë³µí•˜ë©´ì„œ ì´ë¡ ì  ë³€ë¦¬ì˜¤ê·¸ë¨ ê°’ê³¼ ì‹¤í—˜ì  ê°’ ì‚¬ì´ì˜ í‰ê·  ì œê³± ì˜¤ì°¨(Mean Squared Error, MSE) ì¶”ì •ì„ ê³„ì‚°í•©ë‹ˆë‹¤ (ë‹¤ë¥¸ ë©”íŠ¸ë¦­ì„ ì‚¬ìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤). ê·¸ëŸ° ë‹¤ìŒ ìµœì ì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ í´ë˜ìŠ¤ ë³€ìˆ˜ optimal_parsì— ì €ì¥í•©ë‹ˆë‹¤.\n\n```js\ndef fit(self):\n        experimental_variogram, distances = self.gamma()\n        fit_metrics = []\n        for nugget, sill, range_ in self.parameter_combinations:\n            theoretical_variogram_values = self.theoretical_variogram(distances, nugget, sill, range_)\n            fit_metric = MSE(experimental_variogram, theoretical_variogram_values)\n            fit_metrics.append((nugget, sill, range_, fit_metric))\n\n        self.optimal_pars = min(fit_metrics, key=lambda x: x[3])[:3]\n```\n\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\në§ˆì§€ë§‰ìœ¼ë¡œ ê°€ì¥ ì¤‘ìš”í•œ í•¨ìˆ˜ëŠ” ì˜ˆì¸¡ì…ë‹ˆë‹¤. ì…ë ¥ìœ¼ë¡œ ì  (lat;lon)ì„ ë°›ì•„ì„œ í•´ë‹¹ ì ê³¼ ë‹¤ë¥¸ ì•Œë ¤ì§„ ê°’ë“¤ ì‚¬ì´ì˜ ê±°ë¦¬ë¥¼ ì¶”ì •í•©ë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ, ì•ì„œ ì–»ì€ ìµœì  íŒŒë¼ë¯¸í„°ë¥¼ ì „ë‹¬í•˜ì—¬ ì´ë¡ ì  ë³€ì´ê·¸ë¨ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê³  ê°€ì¤‘ì¹˜ë¥¼ ì¶œë ¥ê°’ìœ¼ë¡œ ë°›ìŠµë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ ê°€ì¤‘ í‰ê· ì„ ê³„ì‚°í•˜ê³  ë°˜í™˜í•©ë‹ˆë‹¤.\n\n```js\ndef predict(self, point):\n        points = np.array([(x,y) for x,y in zip(self.lats, self.lons)])\n        distances = np.linalg.norm(points - point, axis=1)\n        pars = list(self.optimal_pars)\n        pars.insert(0, distances)\n        weights = self.theoretical_variogram(*pars)\n        weights /= np.sum(weights)\n        return np.dot(weights, self.values)\n```\n\nì´ì œ ëª¨ë“  ì˜ˆì¸¡ê°’ì„ ìˆ˜ì§‘í•˜ê³  ì§€ë„ë¥¼ ì‹œê°í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n```js\nrow, grid = [], []\nfor lat in LAT:\n  for lon in LON:\n    row.append(kriging.predict(np.array([lat, lon])))\n  grid.append(row)\n  row=[]\n\nds = xr.Dataset(\n    {'TAVG': (['lat', 'lon'], grid)},\n    coords={'lat': LAT, 'lon': LON})\n\nfig, ax = plt.subplots(subplot_kw=dict(projection=ccrs.PlateCarree()), figsize=(16, 9))\nds.where(rg).TAVG.plot(ax=ax, alpha=0.6)\ngdf.plot(ax=ax, color='r', markersize=85)\nax.gridlines(draw_labels=True,linewidth=2, color='black', alpha=0.5, linestyle='--')\nplt.show()\n```\n\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n\n![image](/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_15.png)\n\nìœ„ì™€ ê°™ì´ ê²°ê³¼ê°€ IDWì—ì„œ ì–»ì€ ê²ƒê³¼ëŠ” ê½¤ ë‹¤ë¥´ë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆì–´ìš”. í¬ë¦¬ê¹…ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ë§¤ê°œë³€ìˆ˜ëŠ” ì„ íƒí•œ ì´ë¡ ì  ë³€ì´ê·¸ë¨ ì¢…ë¥˜ì¸ë°, ì´ëŠ” ì‚¬ì‹¤ ìƒ ì˜ˆì¸¡ëœ ê°’ê³¼ ê±°ë¦¬ ê°„ì˜ ê´€ê³„ë¥¼ ì •ì˜í•©ë‹ˆë‹¤. ì½”ë“œë¥¼ ì‚¬ìš©í•˜ê¸° ê·€ì°®ìœ¼ì‹œê±°ë‚˜ ì§ì ‘ ì‘ì„±í•˜ê³  ì‹¶ì§€ ì•Šë‹¤ë©´ ë§ì€ ë³€ì´ê·¸ë¨ ëª¨ë¸ì˜ êµ¬í˜„ì„ ê°–ê³  ìˆëŠ” PyKrige ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚´í´ë³´ì„¸ìš”.\n\nì´ ê¸€ì´ ìœ ìµí•˜ê³  í†µì°°ë ¥ì„ ì¤¬ìœ¼ë©´ ì¢‹ê² ì–´ìš”!\n\n\n\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nì €ì˜ Mediumì— ì˜¬ë¦° ëª¨ë“  ê²Œì‹œë¬¼ì€ ë¬´ë£Œë¡œ ê³µê°œë˜ì–´ ìˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì—¬ê¸°ì„œ ì œë¥¼ íŒ”ë¡œìš°í•´ ì£¼ì‹¤ ê²½ìš° ì •ë§ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤!\n\nì°¸ê³ ë¡œ, ì €ëŠ” (ì§€ë¦¬)ë°ì´í„° ê³¼í•™, ê¸°ê³„í•™ìŠµ/ì¸ê³µì§€ëŠ¥, ê·¸ë¦¬ê³  ê¸°í›„ ë³€í™”ì— ëŒ€í•´ ì—´ì •ì ìœ¼ë¡œ ê³µë¶€í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë§Œì•½ í•¨ê»˜ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ê³  ì‹¶ë‹¤ë©´ LinkedInì—ì„œ ì—°ë½ ì£¼ì„¸ìš”.\n\nğŸ›°ï¸ë” ë§ì€ ì†Œì‹ì„ ìœ„í•´ íŒ”ë¡œìš° í•´ì£¼ì„¸ìš”ğŸ›°ï¸","ogImage":{"url":"/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_0.png"},"coverImage":"/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_0.png","tag":["Tech"],"readingTime":19},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003ch2\u003eì²˜ìŒë¶€í„°, Pythonì—ì„œ\u003c/h2\u003e\n\u003cimg src=\"/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_0.png\"\u003e\n\u003cp\u003eë³´ê°„ë²•ì€ ë°ì´í„° ê³¼í•™ì ë¿ë§Œ ì•„ë‹ˆë¼ ë‹¤ì–‘í•œ ë¶„ì•¼ì˜ ì‚¬ëŒë“¤ì— ì˜í•´ ì‚¬ìš©ë˜ëŠ” ë§¤ìš° ì¼ë°˜ì ì¸ ìˆ˜í•™ì  ê°œë…ì…ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì§€ë¦¬ ê³µê°„ ë°ì´í„°ë¥¼ ë‹¤ë£° ë•Œ, ë³´ê°„ì€ ì¢…ì¢… í¬ì†Œí•œ ê´€ì¸¡ì¹˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ëŒ€í‘œì ì¸ ê·¸ë¦¬ë“œë¥¼ ë§Œë“¤ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ë” ë³µì¡í•´ì§‘ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì§€ë¦¬ ê³µê°„ ë¶€ë¶„ì— ë“¤ì–´ê°€ê¸° ì „ì—, ì„ í˜• ë³´ê°„ì— ëŒ€í•´ ê°„ë‹¨íˆ ë˜ì§šì–´ ë´…ì‹œë‹¤.\u003c/p\u003e\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eë””ìì¸ì„ ë³´ì—¬ë“œë¦¬ê¸° ìœ„í•´ ì¼ë°˜ ë‹¤í•­ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003edef \u003cspan class=\"hljs-title function_\"\u003eF\u003c/span\u003e(x):\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e -\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e*x**\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e+x**\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e+\u003cspan class=\"hljs-number\"\u003e2.1\u003c/span\u003e\n\nx = np.\u003cspan class=\"hljs-title function_\"\u003earange\u003c/span\u003e(-\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0.1\u003c/span\u003e)\ny = \u003cspan class=\"hljs-title function_\"\u003eF\u003c/span\u003e(x)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cimg src=\"/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_1.png\"\u003e\n\u003cp\u003eì´ì œ [-4.2, 0, 2.5]ì—ì„œ ëª‡ ê°œì˜ ì ì„ ë¬´ì‘ìœ„ë¡œ ìƒ˜í”Œë§í•˜ê³  ì´ë¥¼ ì—°ê²°í•´ ë³´ê² ìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_2.png\" alt=\"ì´ë¯¸ì§€\"\u003e\u003c/p\u003e\n\u003cp\u003eì´ê²ƒì€ ì„ í˜• ë³´ê°„ë²•ì´ë¼ê³  ë¶ˆë¦½ë‹ˆë‹¤. ê° êµ¬ê°„ì—ì„œ ì§ì„ ìœ¼ë¡œ í•¨ìˆ˜ë¥¼ ê·¼ì‚¬í•˜ê³  ìˆìœ¼ë©°, ì´ì œ 3ê°œì˜ ì ì—ì„œ í•¨ìˆ˜ì˜ ê°’ì„ ì•Œê³  ìˆì„ ë•Œ [-4.2;2.5] êµ¬ê°„ ë‚´ì˜ ê°’ì„ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eë†’ì€ ì •í™•ë„ë¥¼ ê°€ì§„ ë§ì€ ë‹¤ë¥¸ ë°©ë²•ë“¤ì´ ìˆì§€ë§Œ, ê·¸ ë’¤ì— ìˆëŠ” ì•„ì´ë””ì–´ëŠ” ë™ì¼í•©ë‹ˆë‹¤: ì ì–´ë„ ë‘ ê°œì˜ ì•Œë ¤ì§„ ì  ì‚¬ì´ì—ì„œ í•¨ìˆ˜ ê°’ì„ ì°¾ëŠ” ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì´ì œ ì§€ë¦¬ ê³µê°„ ë¶€ë¶„ìœ¼ë¡œ ë„˜ì–´ê°ˆ ì‹œê°„ì…ë‹ˆë‹¤. ì´ ììŠµì„œì—ì„œëŠ” NOAAì—ì„œ ì œê³µí•œ ìŠ¤ìœ„ìŠ¤ ì „ì—­ì˜ ê¸°ìƒ ì¸¡ì •ì†Œì—ì„œ ì¸¡ì •ëœ ì¼ì¼ í‰ê·  ëŒ€ê¸° ì˜¨ë„ì˜ ê³µê°„ ë³´ê°„ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ ëª©í‘œì…ë‹ˆë‹¤. ê¸°ëŒ€ë˜ëŠ” ê²°ê³¼ëŠ” 0.1Â° í•´ìƒë„ì˜ ì˜¨ë„ ê·¸ë¦¬ë“œì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eë¨¼ì €, ìŠ¤ìœ„ìŠ¤ì˜ í–‰ì • ê²½ê³„ë¥¼ ì–»ì–´ì™€ì„œ geopandasë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹œê°í™”í•´ì•¼ í•©ë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e geopandas \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e gpd\n\nshape = gpd.read_file(\u003cspan class=\"hljs-string\"\u003e'gadm41_CHE_0.shp'\u003c/span\u003e)\nshape.plot()\n\u003c/code\u003e\u003c/pre\u003e\n\u003cimg src=\"/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_3.png\"\u003e\n\u003cp\u003eì •ë§ ëŒ€ë‹¨í•´ìš”! ìŠ¤ìœ„ìŠ¤ì¸ ê²ƒ ê°™ë„¤ìš” =)\u003c/p\u003e\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eì´ì œ ì˜¨ë„ ê´€ì¸¡ì¹˜ë¥¼ ê·¸ë˜í”„ë¡œ í‘œì‹œí•˜ê³  êµ­ê°€ ëª¨ì–‘ê³¼ ê²¹ì³ë³´ê² ìŠµë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ ì •ê¸°ì ì¸ íŒë‹¤ ë°ì´í„°í”„ë ˆì„ìœ¼ë¡œ ê¸°ìƒ ë°ì´í„°ë¥¼ ë¡œë“œí•œ ë‹¤ìŒ ì…°ì´í”„ë¦¬ í¬ì¸íŠ¸ë¡œ ë³€í™˜í•œ ì§€ë¦¬ ë°ì´í„°í”„ë ˆì„ìœ¼ë¡œ ë³€í™˜í•˜ê² ìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e pandas \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e pd\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e shapely.geometry \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e Point\n\ndf = pd.read_csv(\u003cspan class=\"hljs-string\"\u003e'3639866.csv'\u003c/span\u003e)\n\npoints = \u003cspan class=\"hljs-built_in\"\u003elist\u003c/span\u003e()\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e i \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003erange\u003c/span\u003e(\u003cspan class=\"hljs-built_in\"\u003elen\u003c/span\u003e(df)):\n  point = Point(df.loc[i, \u003cspan class=\"hljs-string\"\u003e'LONGITUDE'\u003c/span\u003e], df.loc[i, \u003cspan class=\"hljs-string\"\u003e'LATITUDE'\u003c/span\u003e])\n  points.append(point)\n\ngdf = gpd.GeoDataFrame(geometry=points).set_crs(shape.crs)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eê·¸ë ‡ê²Œ í•˜ë©´ matplotlibì„ ì‚¬ìš©í•˜ì—¬ ë‘ ë°ì´í„°í”„ë ˆì„ì„ ì‰½ê²Œ ê²¹ì³ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003efig, ax = plt.subplots(figsize=(\u003cspan class=\"hljs-number\"\u003e16\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e9\u003c/span\u003e))\nshape.plot(ax=ax, color=\u003cspan class=\"hljs-string\"\u003e'black'\u003c/span\u003e)\ngdf.plot(ax=ax, color=\u003cspan class=\"hljs-string\"\u003e'r'\u003c/span\u003e, markersize=\u003cspan class=\"hljs-number\"\u003e85\u003c/span\u003e)\nplt.show()\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_4.png\" alt=\"ê·¸ë¦¬ë“œ ë° ì§€ë„ ì˜¤ë²„ë ˆì´ë¥¼ ì‹œê°í™”í•˜ê¸° ìœ„í•´ ë‹¤ìŒì„ ìˆ˜í–‰í•˜ê² ìŠµë‹ˆë‹¤:\"\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e matplotlib.\u003cspan class=\"hljs-property\"\u003eticker\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e mticker\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e cartopy.\u003cspan class=\"hljs-property\"\u003ecrs\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e ccrs\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e cartopy.\u003cspan class=\"hljs-property\"\u003empl\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003egridliner\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eLONGITUDE_FORMATTER\u003c/span\u003e, \u003cspan class=\"hljs-variable constant_\"\u003eLATITUDE_FORMATTER\u003c/span\u003e\n\n\u003cspan class=\"hljs-variable constant_\"\u003eLAT\u003c/span\u003e, \u003cspan class=\"hljs-variable constant_\"\u003eLON\u003c/span\u003e = np.\u003cspan class=\"hljs-title function_\"\u003earange\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e45.75\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e48\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0.1\u003c/span\u003e), np.\u003cspan class=\"hljs-title function_\"\u003earange\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e10.81\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0.1\u003c/span\u003e)\n\nfig, ax = plt.\u003cspan class=\"hljs-title function_\"\u003esubplots\u003c/span\u003e(subplot_kw=\u003cspan class=\"hljs-title function_\"\u003edict\u003c/span\u003e(projection=ccrs.\u003cspan class=\"hljs-title class_\"\u003ePlateCarree\u003c/span\u003e()), figsize=(\u003cspan class=\"hljs-number\"\u003e16\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e9\u003c/span\u003e))\nshape.\u003cspan class=\"hljs-title function_\"\u003eplot\u003c/span\u003e(ax=ax, color=\u003cspan class=\"hljs-string\"\u003e'grey'\u003c/span\u003e)\ngdf.\u003cspan class=\"hljs-title function_\"\u003eplot\u003c/span\u003e(ax=ax, color=\u003cspan class=\"hljs-string\"\u003e'r'\u003c/span\u003e, markersize=\u003cspan class=\"hljs-number\"\u003e85\u003c/span\u003e)\n\ngl = ax.\u003cspan class=\"hljs-title function_\"\u003egridlines\u003c/span\u003e(draw_labels=\u003cspan class=\"hljs-title class_\"\u003eTrue\u003c/span\u003e,linewidth=\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, color=\u003cspan class=\"hljs-string\"\u003e'black'\u003c/span\u003e, alpha=\u003cspan class=\"hljs-number\"\u003e0.5\u003c/span\u003e, linestyle=\u003cspan class=\"hljs-string\"\u003e'--'\u003c/span\u003e)\ngl.\u003cspan class=\"hljs-property\"\u003exlocator\u003c/span\u003e = mticker.\u003cspan class=\"hljs-title class_\"\u003eFixedLocator\u003c/span\u003e(\u003cspan class=\"hljs-variable constant_\"\u003eLON\u003c/span\u003e)\ngl.\u003cspan class=\"hljs-property\"\u003eylocator\u003c/span\u003e = mticker.\u003cspan class=\"hljs-title class_\"\u003eFixedLocator\u003c/span\u003e(\u003cspan class=\"hljs-variable constant_\"\u003eLAT\u003c/span\u003e)\ngl.\u003cspan class=\"hljs-property\"\u003exformatter\u003c/span\u003e = \u003cspan class=\"hljs-variable constant_\"\u003eLONGITUDE_FORMATTER\u003c/span\u003e\ngl.\u003cspan class=\"hljs-property\"\u003eyformatter\u003c/span\u003e = \u003cspan class=\"hljs-variable constant_\"\u003eLATITUDE_FORMATTER\u003c/span\u003e\nplt.\u003cspan class=\"hljs-title function_\"\u003eshow\u003c/span\u003e()\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_5.png\" alt=\"ê²°ê³¼ ì´ë¯¸ì§€\"\u003e\u003c/p\u003e\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eìœ„ ê·¸ë¦¼ì— ë‚˜íƒ€ë‚œ ì •ê·œ ê·¸ë¦¬ë“œì— ëŒ€í•´ ë³´ê°„ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ ëª©í‘œì…ë‹ˆë‹¤. ì´ ê·¸ë¦¬ë“œì—ëŠ” 8ê°œì˜ ì˜¨ë„ ê´€ì¸¡ì¹˜ê°€ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003ch1\u003eI. ìµœê·¼ì ‘ ì´ì›ƒ (NN)\u003c/h1\u003e\n\u003cp\u003eê°€ì¥ ì§ê´€ì ì´ê³  ê°„ë‹¨í•œ ë°©ë²• ì¤‘ í•˜ë‚˜ì¸ Nearest Neighbor (NN)ì— ëŒ€í•´ ì´ì•¼ê¸°í•˜ê² ìŠµë‹ˆë‹¤. ì´ë¦„ì—ì„œ ì•Œ ìˆ˜ ìˆë“¯ì´, ì´ ì•Œê³ ë¦¬ì¦˜ì€ ê° ê·¸ë¦¬ë“œ ë…¸ë“œì— ê°€ì¥ ê°€ê¹Œìš´ ê´€ì¸¡ì¹˜ì˜ ê°’ì„ í• ë‹¹í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì´ë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•´ í•„ìš”í•œ í•¨ìˆ˜ëŠ” ë‘ ê°€ì§€ë¿ì…ë‹ˆë‹¤. ì²« ë²ˆì§¸ í•¨ìˆ˜ëŠ” ìœ í´ë¦¬ë“œ í•¨ìˆ˜ì´ë©°, ë‹¤ìŒ ê³µì‹ì„ ì‚¬ìš©í•˜ì—¬ ë‘ ì  ì‚¬ì´ì˜ ê±°ë¦¬ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤:\u003c/p\u003e\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_6.png\" alt=\"Image\"\u003e\u003c/p\u003e\n\u003cp\u003eë‘ ë²ˆì§¸ëŠ” NN ë©”ì†Œë“œ ìì²´ì…ë‹ˆë‹¤. ê´€ì¸¡ê°’ì„ ì €ì¥í•  ë¹ˆ ë°°ì—´ì„ ë§Œë“  í›„, ëª¨ë“  ìœ„ë„ì™€ ê²½ë„ë¥¼ ë°˜ë³µí•˜ë©´ì„œ ê° í¬ì¸íŠ¸ì—ì„œ í˜„ì¬ ê·¸ë¦¬ë“œ ë…¸ë“œê¹Œì§€ì˜ ê±°ë¦¬ë¥¼ ê³„ì‚°í•˜ê³  ê·¸ ê·¸ë¦¬ë“œ ë…¸ë“œì— ê°€ì¥ ê°€ê¹Œìš´ ê´€ì¸¡ê°’ì„ í• ë‹¹í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003edef ìœ í´ë¦¬ë“œ(x1, x2, y1, y2):\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e ((x1-x2)**\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e + (y1-y2)**\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e) ** \u003cspan class=\"hljs-number\"\u003e0.5\u003c/span\u003e\n\ndef \u003cspan class=\"hljs-title function_\"\u003eNN\u003c/span\u003e(data, \u003cspan class=\"hljs-variable constant_\"\u003eLAT\u003c/span\u003e, \u003cspan class=\"hljs-variable constant_\"\u003eLON\u003c/span\u003e):\n  array = np.\u003cspan class=\"hljs-title function_\"\u003eempty\u003c/span\u003e((\u003cspan class=\"hljs-variable constant_\"\u003eLAT\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eshape\u003c/span\u003e[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e], \u003cspan class=\"hljs-variable constant_\"\u003eLON\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eshape\u003c/span\u003e[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e]))\n\n  \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e i, lat \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eenumerate\u003c/span\u003e(\u003cspan class=\"hljs-variable constant_\"\u003eLAT\u003c/span\u003e):\n    \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e j, lon \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eenumerate\u003c/span\u003e(\u003cspan class=\"hljs-variable constant_\"\u003eLON\u003c/span\u003e):\n      idx = data.\u003cspan class=\"hljs-title function_\"\u003eapply\u003c/span\u003e(lambda \u003cspan class=\"hljs-attr\"\u003erow\u003c/span\u003e: ìœ í´ë¦¬ë“œ(row.\u003cspan class=\"hljs-property\"\u003eLONGITUDE\u003c/span\u003e, lon, row.\u003cspan class=\"hljs-property\"\u003eLATITUDE\u003c/span\u003e, lat), axis=\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003eargmin\u003c/span\u003e() \n      array[i, j] = data.\u003cspan class=\"hljs-property\"\u003eloc\u003c/span\u003e[idx, \u003cspan class=\"hljs-string\"\u003e'TAVG'\u003c/span\u003e]\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e array\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì „ì²´ ì•„ì´ë””ì–´ëŠ” ì´ í•œ ì¤„ì— ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003eidx = data.apply(\u003cspan class=\"hljs-keyword\"\u003elambda\u003c/span\u003e row: Euclidean(row.LONGITUDE, lon, row.LATITUDE, lat), axis=\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e).argmin()\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eë³€ìˆ˜ dataëŠ” ê° í–‰ì´ í•˜ë‚˜ì˜ ê¸°ìƒ ì¥ë¹„ ì‚¬ì´íŠ¸ë¥¼ ë‚˜íƒ€ë‚´ëŠ” íŒë‹¤ ë°ì´í„°í”„ë ˆì„ì…ë‹ˆë‹¤. ë”°ë¼ì„œ for ë£¨í”„ì—ì„œ ê±°ë¦¬ë¥¼ ê³„ì‚°í•˜ê³  ìµœì†Œ ê±°ë¦¬ë¥¼ ê°€ì§„ ì‚¬ì´íŠ¸ì˜ ì¸ë±ìŠ¤ë¥¼ ì°¾ìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì´ì œ ì•Œê³ ë¦¬ì¦˜ì„ ì‹¤í–‰í•˜ê³  ê²°ê³¼ë¥¼ xarray ë°ì´í„°ì…‹ìœ¼ë¡œ ë˜í•‘í•´ ë´…ì‹œë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003et2m = NN(df, LAT, LON)\nds = xr.Dataset(\n    {\u003cspan class=\"hljs-string\"\u003e'TAVG'\u003c/span\u003e: ([\u003cspan class=\"hljs-string\"\u003e'lat'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'lon'\u003c/span\u003e], t2m)},\n    coords={\u003cspan class=\"hljs-string\"\u003e'lat'\u003c/span\u003e: LAT, \u003cspan class=\"hljs-string\"\u003e'lon'\u003c/span\u003e: LON})\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eì´ì œ ê²°ê³¼ë¥¼ í”Œë¡œíŒ…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_7.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eë³´ê¸° ì¢‹ì§€ë§Œ, regionmask ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ìŠ¤ìœ„ìŠ¤ ë§¤ìŠ¤í¬ë¥¼ ë§Œë“¤ì–´ í”Œë¡¯ì„ ë” ë³´ê¸° ì¢‹ê²Œ ë³€ê²½í•´ ë³´ê² ìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eshape[\u003cspan class=\"hljs-string\"\u003e'new_column'\u003c/span\u003e] = \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\nsw = shape.\u003cspan class=\"hljs-title function_\"\u003edissolve\u003c/span\u003e(by=\u003cspan class=\"hljs-string\"\u003e'new_column'\u003c/span\u003e)[\u003cspan class=\"hljs-string\"\u003e'geometry'\u003c/span\u003e]\nrg = regionmask.\u003cspan class=\"hljs-title function_\"\u003emask_3D_geopandas\u003c/span\u003e(sw, lon_or_obj=ds.\u003cspan class=\"hljs-property\"\u003elon\u003c/span\u003e, lat=ds.\u003cspan class=\"hljs-property\"\u003elat\u003c/span\u003e)\n\nfig, ax = plt.\u003cspan class=\"hljs-title function_\"\u003esubplots\u003c/span\u003e(subplot_kw=\u003cspan class=\"hljs-title function_\"\u003edict\u003c/span\u003e(projection=ccrs.\u003cspan class=\"hljs-title class_\"\u003ePlateCarree\u003c/span\u003e()), figsize=(\u003cspan class=\"hljs-number\"\u003e16\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e9\u003c/span\u003e))\n#shape.\u003cspan class=\"hljs-title function_\"\u003eplot\u003c/span\u003e(ax=ax, color=\u003cspan class=\"hljs-string\"\u003e'black'\u003c/span\u003e)\nds.\u003cspan class=\"hljs-title function_\"\u003ewhere\u003c/span\u003e(rg).\u003cspan class=\"hljs-property\"\u003eTAVG\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eplot\u003c/span\u003e(ax=ax, alpha=\u003cspan class=\"hljs-number\"\u003e0.6\u003c/span\u003e)\ngdf.\u003cspan class=\"hljs-title function_\"\u003eplot\u003c/span\u003e(ax=ax, color=\u003cspan class=\"hljs-string\"\u003e'r'\u003c/span\u003e, markersize=\u003cspan class=\"hljs-number\"\u003e85\u003c/span\u003e)\nax.\u003cspan class=\"hljs-title function_\"\u003egridlines\u003c/span\u003e(draw_labels=\u003cspan class=\"hljs-title class_\"\u003eTrue\u003c/span\u003e, linewidth=\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, color=\u003cspan class=\"hljs-string\"\u003e'black'\u003c/span\u003e, alpha=\u003cspan class=\"hljs-number\"\u003e0.5\u003c/span\u003e, linestyle=\u003cspan class=\"hljs-string\"\u003e'--'\u003c/span\u003e)\nplt.\u003cspan class=\"hljs-title function_\"\u003eshow\u003c/span\u003e()\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cimg src=\"/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_8.png\"\u003e\n\u003cp\u003eë³´ì‹œë‹¤ì‹œí”¼ ì´ ë°©ë²•ì€ ë²”ì£¼í˜• ë°ì´í„°ì—ë§Œ ì ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìš°ë¦¬ê°€ ë‹¤ë£¨ëŠ” ê²ƒì€ ì˜¨ë„ë¡œ, ì´ëŠ” ì—°ì† ë³€ìˆ˜ë¡œ ì–´ë–¤ ë²”ìœ„ ì•ˆì—ì„œ ì–´ë–¤ ê°’ì´ë“  ê°€ì§ˆ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì´ ë³´ê°„ì€ í˜¼ë™ìŠ¤ëŸ¬ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í˜„ì‹¤ì—ì„œëŠ” í•­ìƒ ê·¸ë¼ë°ì´ì…˜ê³¼ ë¬´ì‘ìœ„ì„±ì´ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eê·¸ë˜ì„œ ì¢€ ë” ê³ ê¸‰ ì•Œê³ ë¦¬ì¦˜ì„ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003ch1\u003eII. ì—­ ê±°ë¦¬ ê°€ì¤‘ ì´ë™ë²• (IDW)\u003c/h1\u003e\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eê¸°ë³¸ì ìœ¼ë¡œ ì—­ ê±°ë¦¬ ê°€ì¤‘ì¹˜(IDW)ëŠ” NNì˜ í–¥ìƒëœ ë²„ì „ì…ë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003edef \u003cspan class=\"hljs-title function_\"\u003eIDW\u003c/span\u003e(data, \u003cspan class=\"hljs-variable constant_\"\u003eLAT\u003c/span\u003e, \u003cspan class=\"hljs-variable constant_\"\u003eLON\u003c/span\u003e, betta=\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e):\n  array = np.\u003cspan class=\"hljs-title function_\"\u003eempty\u003c/span\u003e((\u003cspan class=\"hljs-variable constant_\"\u003eLAT\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eshape\u003c/span\u003e[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e], \u003cspan class=\"hljs-variable constant_\"\u003eLON\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eshape\u003c/span\u003e[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e]))\n\n  \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e i, lat \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eenumerate\u003c/span\u003e(\u003cspan class=\"hljs-variable constant_\"\u003eLAT\u003c/span\u003e):\n    \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e j, lon \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eenumerate\u003c/span\u003e(\u003cspan class=\"hljs-variable constant_\"\u003eLON\u003c/span\u003e):\n      weights = data.\u003cspan class=\"hljs-title function_\"\u003eapply\u003c/span\u003e(lambda \u003cspan class=\"hljs-attr\"\u003erow\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eEuclidean\u003c/span\u003e(row.\u003cspan class=\"hljs-property\"\u003eLONGITUDE\u003c/span\u003e, lon, row.\u003cspan class=\"hljs-property\"\u003eLATITUDE\u003c/span\u003e, lat)**(-betta), axis=\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)\n      z = \u003cspan class=\"hljs-title function_\"\u003esum\u003c/span\u003e(weights*data.\u003cspan class=\"hljs-property\"\u003eTAVG\u003c/span\u003e)/weights.\u003cspan class=\"hljs-title function_\"\u003esum\u003c/span\u003e()\n      array[i,j] = z\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e array\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eê°€ê¹Œìš´ ì•Œë ¤ì§„ ì ì˜ ê°’ì„ í• ë‹¹í•˜ëŠ” ëŒ€ì‹ , ì—¬ê¸°ì„œëŠ” ê°€ì¤‘ì¹˜ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤. ê·¸ë¥¼ ìœ„í•´ ì•ì„œ ì–¸ê¸‰í•œ ìœ í´ë¦¬ë“œ ê±°ë¦¬ê°€ ì‚¬ìš©ë˜ì§€ë§Œ, ì´ë²ˆì—ëŠ” ê° ê±°ë¦¬ë¥¼ -Î² ìŠ¹ìœ¼ë¡œ ì œê³±í•©ë‹ˆë‹¤ (Î²ëŠ” ì„ì˜ì˜ ê°’ì…ë‹ˆë‹¤). ì´ëŸ¬í•œ ê°€ì¤‘ì¹˜ëŠ” ê° ì§€ë©´ ì ì´ íŠ¹ì • ê²©ì ë…¸ë“œì— ë¯¸ì¹˜ëŠ” ê¸°ì—¬ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ê±°ë¦¬ê°€ ë©€ìˆ˜ë¡ ì´ ì ì´ ë…¸ë“œ ê°’ì— ë¯¸ì¹˜ëŠ” ì˜í–¥ì´ ì ì–´ì§‘ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eê°€ì¤‘ì¹˜ë¥¼ ì–»ì€ í›„ ê°€ì¤‘ í‰ê· ì„ ê³„ì‚°í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_9.png\" alt=\"image\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_10.png\" alt=\"image\"\u003e\u003c/p\u003e\n\u003cp\u003eLetâ€™s plot it:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_11.png\" alt=\"image\"\u003e\u003c/p\u003e\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eë³´ì‹œëŠ” ëŒ€ë¡œ, ì§€ê¸ˆ ê²°ê³¼ê°€ í›¨ì”¬ í˜„ì‹¤ì ì´ê³  ë¶€ë“œëŸ½ìŠµë‹ˆë‹¤!\u003c/p\u003e\n\u003ch2\u003eIII. í¬ë¦¬ì§•\u003c/h2\u003e\n\u003cp\u003eì˜¤ëŠ˜ì˜ ë§ˆì§€ë§‰ ë©”ì„œë“œëŠ” í¬ë¦¬ì§•ì…ë‹ˆë‹¤. ì´ ì„¸ ê°€ì§€ ë°©ë²• ì¤‘ì—ì„œ ê°€ì¥ ë³µì¡í•œ ë°©ë²• ì¤‘ í•˜ë‚˜ì´ë©°, ìš°ë¦¬ëŠ” ê°„ë‹¨íˆ ì•Œì•„ë³¼ ê²ƒì…ë‹ˆë‹¤. ì˜ì‹ì ì´ê³  íš¨ê³¼ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê³  ì‹¶ë‹¤ë©´ ë¬¸í—Œì„ ì‚´í´ë³¼ ê²ƒì„ ê³ ë ¤í•´ë³´ì„¸ìš”!\u003c/p\u003e\n\u003cp\u003eê·¸ëŸ¬ë¯€ë¡œ ì´ ë°©ë²•ì˜ ì£¼ìš” ì•„ì´ë””ì–´ëŠ” ë°”ë¦¬ì˜¤ê·¸ë¨(ë˜ëŠ” ì„¸ë¯¸ë°”ë¦¬ì˜¤ê·¸ë¨)ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ë³¸ì§ˆì ìœ¼ë¡œ ë°”ë¦¬ì˜¤ê·¸ë¨ì€ ì–´ë–¤ ë§¤ê°œë³€ìˆ˜ì˜ ë³€ì´ê°€ ê±°ë¦¬ì™€ ë°©í–¥ì— ë”°ë¼ ì–´ë–»ê²Œ ë³€í•˜ëŠ”ì§€ë¥¼ ì¸¡ì •í•©ë‹ˆë‹¤. ì´ê²ƒì´ ë°”ë¡œ ìš°ë¦¬ê°€ ê³µê¸° ì˜¨ë„ë¥¼ ë‹¤ë£° ë•Œ í•„ìš”í•œ ë¶€ë¶„ì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eí¬ë¦¬ì§• ì•Œê³ ë¦¬ì¦˜ì„ êµ¬í˜„í•˜ë ¤ë©´ ë‘ ê°€ì§€ ìœ í˜•ì˜ ë³€ì´ë¡œê·¸ë¨ì´ í•„ìš”í•©ë‹ˆë‹¤: ì‹¤í—˜ì  ë³€ì´ë¡œê·¸ë¨ê³¼ ì´ë¡ ì  ë³€ì´ë¡œê·¸ë¨ì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì²« ë²ˆì§¸ëŠ” ì •ë§ ì‰½ê²Œ ê³„ì‚°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°ë§ˆ Î³ë¡œ ì •ì˜ë©ë‹ˆë‹¤:\u003c/p\u003e\n\u003cp\u003e[ \\gamma(h) = \\frac{1}{2N(h)}\\sum_{i=1}^{N(h)}[z(x_i) - z(x_i + h)]^2 ]\u003c/p\u003e\n\u003cp\u003eì—¬ê¸°ì„œ,\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e( h )ëŠ” ë‘ ì  ì‚¬ì´ì˜ ì§€ë¦¬ì  ê±°ë¦¬,\u003c/li\u003e\n\u003cli\u003e(z)ëŠ” ì˜¨ë„ í•¨ìˆ˜ì…ë‹ˆë‹¤.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eê°„ë‹¨íˆ ë§í•´ ì´ê²ƒì€ ì•Œë ¤ì§„ ì ì—ì„œ ì˜¨ë„ ì°¨ì´ì˜ í‰ê· ì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eì´ë¡ ì  ë³€ì´ê·¸ë¨ì€ ë‹¤ì†Œ ë³µì¡í•©ë‹ˆë‹¤. ë¨¼ì €, ê·¸ëŸ°ê²ƒì´ ë§ì´ ìˆìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_13.png\" alt=\"Variogram\"\u003e\u003c/p\u003e\n\u003cp\u003eì—¬ê¸°ì„œ pëŠ” ë¶€ë¶„ ì¬, dëŠ” ê±°ë¦¬(hë¥¼ ì‚¬ìš©í–ˆì—ˆì£ ), nì€ ê·¹ì†Œê°’, rì€ ë²”ìœ„ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eCDT ì½œë¡¬ë¹„ì•„ì—ì„œ ì´ëŸ¬í•œ ë§¤ê°œë³€ìˆ˜ì— ëŒ€í•œ ì •ë§ ì¢‹ì€ ì‹œê°ì  ì„¤ëª…ì„ ì°¾ì•˜ì–´ìš”. ì €ëŠ” ê·¸ë“¤ì˜ ìë£Œì—ì„œ Î³ì™€ ê±°ë¦¬ ì‚¬ì´ì˜ ê´€ê³„ë¥¼ ì„¤ëª…í•˜ëŠ” ì´ë¯¸ì§€ë¥¼ ì±„íƒí–ˆìŠµë‹ˆë‹¤. ì´ì œëŠ” sill, partial sill, nugget ë° rangeê°€ ë¬´ì—‡ì¸ì§€ ëª…í™•í•´ ë³´ì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_14.png\" alt=\"Spatial Interpolation Method\"\u003e\u003c/p\u003e\n\u003cp\u003eì•Œê³ ë¦¬ì¦˜ì˜ ì „ì²´ ì•„ì´ë””ì–´ëŠ” ì´ë¡ ì  ë³€ì´ê·¸ë¨ì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ì¡°ì •í•˜ì—¬ ì‹¤í—˜ì ì¸ ê²ƒì— ë§ê²Œ ë§ì¶”ê³ , ê·¸ê²ƒì„ ì‚¬ìš©í•˜ì—¬ ë…¸ë“œì˜ ê°’ì„ ì˜ˆì¸¡í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì´ ë°©ë²•ì„ êµ¬í˜„í•˜ë ¤ë©´ ëª‡ ê°€ì§€ ì¶”ê°€ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ í•„ìš”í•˜ë©° OrdinaryKrigingì´ë¼ëŠ” í´ë˜ìŠ¤ë¥¼ ìƒì„±í•´ì•¼í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e scipy.linalg \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e solve\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e itertools \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e product\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e sklearn.metrics \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e mean_squared_error \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e MSE\n\n\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eOrdinaryKriging\u003c/span\u003e:\n    \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003e__init__\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eself, lats, lons, values\u003c/span\u003e):\n        self.lats = lats\n        self.lons= lons\n        self.values = values\n\n        self.nugget_values = [\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e]\n        self.sill_values = [\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e]\n        self.range_values = [\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e]\n\n        \u003cspan class=\"hljs-comment\"\u003e# ëª¨ìˆ˜ ê°’ì„ ë§ì¶”ê¸° ìœ„í•œ ëª¨ë“  ì¡°í•© ìƒì„±\u003c/span\u003e\n        self.parameter_combinations = \u003cspan class=\"hljs-built_in\"\u003elist\u003c/span\u003e(product(self.nugget_values, self.sill_values, self.range_values))\n        self.optimal_pars = \u003cspan class=\"hljs-literal\"\u003eNone\u003c/span\u003e\n\n    \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003etheoretical_variogram\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eself, h, nugget, sill, r\u003c/span\u003e):\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e nugget + (sill-nugget) * (\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e-np.exp(-\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e*h/r))\n\n    \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eEuclidean\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eself, X, Y\u003c/span\u003e):\n        all_dists, point_dists = [], []\n        \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e x,y \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003ezip\u003c/span\u003e(X, Y):\n          k = \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n          \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e k \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003erange\u003c/span\u003e(\u003cspan class=\"hljs-built_in\"\u003elen\u003c/span\u003e(X)):\n            h = np.linalg.norm(np.array([x, y]) - np.array([X[k], Y[k]))\n            point_dists.append(h)\n          all_dists.append(point_dists)\n          point_dists = []\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e all_dists\n\n    \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003egamma\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eself\u003c/span\u003e):\n        distances = self.Euclidean(self.lats, self.lons)\n        differences = np.\u003cspan class=\"hljs-built_in\"\u003eabs\u003c/span\u003e(self.values.reshape(-\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) - self.values)\n        variogram_values = []\n        \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e h \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e np.unique(distances):\n            values_at_h = differences[(distances == h)]\n            variogram_values.append(np.mean(values_at_h**\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e))\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e variogram_values, np.unique(distances)\n\n    \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003efit\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eself\u003c/span\u003e):\n        experimental_variogram, distances = self.gamma()\n        fit_metrics = []\n        \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e nugget, sill, range_ \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e self.parameter_combinations:\n            theoretical_variogram_values = self.theoretical_variogram(distances, nugget, sill, range_)\n            fit_metric = MSE(experimental_variogram, theoretical_variogram_values)\n            fit_metrics.append((nugget, sill, range_, fit_metric))\n\n        self.optimal_pars = \u003cspan class=\"hljs-built_in\"\u003emin\u003c/span\u003e(fit_metrics, key=\u003cspan class=\"hljs-keyword\"\u003elambda\u003c/span\u003e x: x[\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e])[:\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e]\n\n    \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003epredict\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eself, point\u003c/span\u003e):\n        points = np.array([(x,y) \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e x,y \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003ezip\u003c/span\u003e(self.lats, self.lons)])\n        distances = np.linalg.norm(points - point, axis=\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)\n        pars = \u003cspan class=\"hljs-built_in\"\u003elist\u003c/span\u003e(self.optimal_pars)\n        pars.insert(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, distances)\n        weights = self.theoretical_variogram(*pars)\n        weights /= np.\u003cspan class=\"hljs-built_in\"\u003esum\u003c/span\u003e(weights)\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e np.dot(weights, self.values)\n\nkriging = OrdinaryKriging(df.LATITUDE.values, df.LONGITUDE.values, df.TAVG.values)\n\nkriging.fit()\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eì´ì œ ê° í•¨ìˆ˜ë¥¼ ë”°ë¡œ ì‚´í´ë´…ì‹œë‹¤.\n\u003cstrong\u003einit\u003c/strong\u003e í•¨ìˆ˜ëŠ” ì¢Œí‘œì™€ ê°’ì˜ ì´ˆê¸°í™” ì™¸ì— nugget, sill, rangeì˜ ê°€ëŠ¥í•œ ê°’ìœ¼ë¡œ êµ¬ì„±ëœ ì„¸ ê°œì˜ ë¦¬ìŠ¤íŠ¸ë¥¼ í¬í•¨í•©ë‹ˆë‹¤. ëª¨ë“  ê°€ëŠ¥í•œ ì¡°í•©ìœ¼ë¡œ ì„ì–´ì„œ parameter_combinations ë³€ìˆ˜ì— ì €ì¥ë©ë‹ˆë‹¤. ìš°ë¦¬ëŠ” ë‚˜ì¤‘ì— ìµœì  ê°’ì„ ì°¾ì„ ë•Œ í•„ìš”í•  ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003e__init__\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eself, lats, lons, values\u003c/span\u003e):\n        self.lats = lats\n        self.lons= lons\n        self.values = values\n\n        self.nugget_values = [\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e]\n        self.sill_values = [\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e]\n        self.range_values = [\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e]\n\n        \u003cspan class=\"hljs-comment\"\u003e# ë§ì¶”ê¸° ìœ„í•œ ëª¨ë“  íŒŒë¼ë¯¸í„° ê°’ ì¡°í•© ìƒì„±\u003c/span\u003e\n        self.parameter_combinations = \u003cspan class=\"hljs-built_in\"\u003elist\u003c/span\u003e(product(self.nugget_values, self.sill_values, self.range_values))\n        self.optimal_pars = \u003cspan class=\"hljs-literal\"\u003eNone\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eë‘ ë²ˆì§¸ í•¨ìˆ˜ì¸ theoretical_variogramì€ ì´ì „ì— ì–¸ê¸‰ëœ ê³µì‹ ì¤‘ í•˜ë‚˜ë¥¼ íŒŒì´ì¬ìœ¼ë¡œ êµ¬í˜„í•œ ê²ƒì— ë¶ˆê³¼í•©ë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ” ì§€ìˆ˜ í•¨ìˆ˜ì…ë‹ˆë‹¤ (í•˜ì§€ë§Œ ë‹¤ë¥¸ í•¨ìˆ˜ì— ëŒ€í•œ ì½”ë“œë¥¼ ì‘ì„±í•˜ì—¬ ê²°ê³¼ë¥¼ ë¹„êµí•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤):\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003etheoretical_variogram\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eself, h, nugget, sill, r\u003c/span\u003e):\n \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e nugget + (sill-nugget) * (\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e-np.exp(-\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e*h/r))\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eì„¸ ë²ˆì§¸ í´ë˜ìŠ¤ ë©”ì„œë“œëŠ” ìœ í´ë¦¬ë””ì•ˆì…ë‹ˆë‹¤. ì´ê²ƒì€ NNê³¼ IDWë¥¼ ìœ„í•´ ë§Œë“  í•¨ìˆ˜ì˜ ë³€ê²½ëœ ë²„ì „ì…ë‹ˆë‹¤. ì´ë²ˆì—ëŠ” ì ê³¼ ëª¨ë“  ë‹¤ë¥¸ ì  ì‚¬ì´ì˜ ê±°ë¦¬ë¥¼ ë‚˜íƒ€ë‚´ëŠ” (n,n) í–‰ë ¬ì„ ë°˜í™˜í•©ë‹ˆë‹¤ (ê° í–‰ì—ì„œ í•˜ë‚˜ì˜ ê°’ì€ 0ì´ë©°, ì ê³¼ ê·¸ ìì‹  ì‚¬ì´ì˜ ê±°ë¦¬ëŠ” 0ì…ë‹ˆë‹¤).\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003edef \u003cspan class=\"hljs-title class_\"\u003eEuclidean\u003c/span\u003e(self, X, Y):\n        all_dists, point_dists = [], []\n        \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e x, y \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ezip\u003c/span\u003e(X, Y):\n          k = \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n          \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e k \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003erange\u003c/span\u003e(\u003cspan class=\"hljs-title function_\"\u003elen\u003c/span\u003e(X)):\n            h = np.\u003cspan class=\"hljs-property\"\u003elinalg\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003enorm\u003c/span\u003e(np.\u003cspan class=\"hljs-title function_\"\u003earray\u003c/span\u003e([x, y]) - np.\u003cspan class=\"hljs-title function_\"\u003earray\u003c/span\u003e([X[k], Y[k]))\n            point_dists.\u003cspan class=\"hljs-title function_\"\u003eappend\u003c/span\u003e(h)\n          all_dists.\u003cspan class=\"hljs-title function_\"\u003eappend\u003c/span\u003e(point_dists)\n          point_dists = []\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e all_dists\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eë„¤ ë²ˆì§¸ í•¨ìˆ˜ëŠ” fittingì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ” ì‹¤í—˜ì  ë³€ë¦¬ì˜¤ê·¸ë¨ ê°’ê³¼ ìœ í´ë¦¬ë””ì•ˆ ê±°ë¦¬ë¥¼ ì–»ìŠµë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ sill, range ë° nuggetì˜ ì¡°í•©ì„ ë°˜ë³µí•˜ë©´ì„œ ì´ë¡ ì  ë³€ë¦¬ì˜¤ê·¸ë¨ ê°’ê³¼ ì‹¤í—˜ì  ê°’ ì‚¬ì´ì˜ í‰ê·  ì œê³± ì˜¤ì°¨(Mean Squared Error, MSE) ì¶”ì •ì„ ê³„ì‚°í•©ë‹ˆë‹¤ (ë‹¤ë¥¸ ë©”íŠ¸ë¦­ì„ ì‚¬ìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤). ê·¸ëŸ° ë‹¤ìŒ ìµœì ì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ í´ë˜ìŠ¤ ë³€ìˆ˜ optimal_parsì— ì €ì¥í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003edef \u003cspan class=\"hljs-title function_\"\u003efit\u003c/span\u003e(self):\n        experimental_variogram, distances = self.\u003cspan class=\"hljs-title function_\"\u003egamma\u003c/span\u003e()\n        fit_metrics = []\n        \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e nugget, sill, range_ \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e self.\u003cspan class=\"hljs-property\"\u003eparameter_combinations\u003c/span\u003e:\n            theoretical_variogram_values = self.\u003cspan class=\"hljs-title function_\"\u003etheoretical_variogram\u003c/span\u003e(distances, nugget, sill, range_)\n            fit_metric = \u003cspan class=\"hljs-title function_\"\u003eMSE\u003c/span\u003e(experimental_variogram, theoretical_variogram_values)\n            fit_metrics.\u003cspan class=\"hljs-title function_\"\u003eappend\u003c/span\u003e((nugget, sill, range_, fit_metric))\n\n        self.\u003cspan class=\"hljs-property\"\u003eoptimal_pars\u003c/span\u003e = \u003cspan class=\"hljs-title function_\"\u003emin\u003c/span\u003e(fit_metrics, key=lambda \u003cspan class=\"hljs-attr\"\u003ex\u003c/span\u003e: x[\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e])[:\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e]\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eë§ˆì§€ë§‰ìœ¼ë¡œ ê°€ì¥ ì¤‘ìš”í•œ í•¨ìˆ˜ëŠ” ì˜ˆì¸¡ì…ë‹ˆë‹¤. ì…ë ¥ìœ¼ë¡œ ì  (lat;lon)ì„ ë°›ì•„ì„œ í•´ë‹¹ ì ê³¼ ë‹¤ë¥¸ ì•Œë ¤ì§„ ê°’ë“¤ ì‚¬ì´ì˜ ê±°ë¦¬ë¥¼ ì¶”ì •í•©ë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ, ì•ì„œ ì–»ì€ ìµœì  íŒŒë¼ë¯¸í„°ë¥¼ ì „ë‹¬í•˜ì—¬ ì´ë¡ ì  ë³€ì´ê·¸ë¨ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê³  ê°€ì¤‘ì¹˜ë¥¼ ì¶œë ¥ê°’ìœ¼ë¡œ ë°›ìŠµë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ ê°€ì¤‘ í‰ê· ì„ ê³„ì‚°í•˜ê³  ë°˜í™˜í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003edef \u003cspan class=\"hljs-title function_\"\u003epredict\u003c/span\u003e(self, point):\n        points = np.\u003cspan class=\"hljs-title function_\"\u003earray\u003c/span\u003e([(x,y) \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e x,y \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ezip\u003c/span\u003e(self.\u003cspan class=\"hljs-property\"\u003elats\u003c/span\u003e, self.\u003cspan class=\"hljs-property\"\u003elons\u003c/span\u003e)])\n        distances = np.\u003cspan class=\"hljs-property\"\u003elinalg\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003enorm\u003c/span\u003e(points - point, axis=\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)\n        pars = \u003cspan class=\"hljs-title function_\"\u003elist\u003c/span\u003e(self.\u003cspan class=\"hljs-property\"\u003eoptimal_pars\u003c/span\u003e)\n        pars.\u003cspan class=\"hljs-title function_\"\u003einsert\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, distances)\n        weights = self.\u003cspan class=\"hljs-title function_\"\u003etheoretical_variogram\u003c/span\u003e(*pars)\n        weights /= np.\u003cspan class=\"hljs-title function_\"\u003esum\u003c/span\u003e(weights)\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e np.\u003cspan class=\"hljs-title function_\"\u003edot\u003c/span\u003e(weights, self.\u003cspan class=\"hljs-property\"\u003evalues\u003c/span\u003e)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì´ì œ ëª¨ë“  ì˜ˆì¸¡ê°’ì„ ìˆ˜ì§‘í•˜ê³  ì§€ë„ë¥¼ ì‹œê°í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003erow, grid = [], []\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e lat \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eLAT\u003c/span\u003e:\n  \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e lon \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eLON\u003c/span\u003e:\n    row.\u003cspan class=\"hljs-title function_\"\u003eappend\u003c/span\u003e(kriging.\u003cspan class=\"hljs-title function_\"\u003epredict\u003c/span\u003e(np.\u003cspan class=\"hljs-title function_\"\u003earray\u003c/span\u003e([lat, lon])))\n  grid.\u003cspan class=\"hljs-title function_\"\u003eappend\u003c/span\u003e(row)\n  row=[]\n\nds = xr.\u003cspan class=\"hljs-title class_\"\u003eDataset\u003c/span\u003e(\n    {\u003cspan class=\"hljs-string\"\u003e'TAVG'\u003c/span\u003e: ([\u003cspan class=\"hljs-string\"\u003e'lat'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'lon'\u003c/span\u003e], grid)},\n    coords={\u003cspan class=\"hljs-string\"\u003e'lat'\u003c/span\u003e: \u003cspan class=\"hljs-variable constant_\"\u003eLAT\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'lon'\u003c/span\u003e: \u003cspan class=\"hljs-variable constant_\"\u003eLON\u003c/span\u003e})\n\nfig, ax = plt.\u003cspan class=\"hljs-title function_\"\u003esubplots\u003c/span\u003e(subplot_kw=\u003cspan class=\"hljs-title function_\"\u003edict\u003c/span\u003e(projection=ccrs.\u003cspan class=\"hljs-title class_\"\u003ePlateCarree\u003c/span\u003e()), figsize=(\u003cspan class=\"hljs-number\"\u003e16\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e9\u003c/span\u003e))\nds.\u003cspan class=\"hljs-title function_\"\u003ewhere\u003c/span\u003e(rg).\u003cspan class=\"hljs-property\"\u003eTAVG\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eplot\u003c/span\u003e(ax=ax, alpha=\u003cspan class=\"hljs-number\"\u003e0.6\u003c/span\u003e)\ngdf.\u003cspan class=\"hljs-title function_\"\u003eplot\u003c/span\u003e(ax=ax, color=\u003cspan class=\"hljs-string\"\u003e'r'\u003c/span\u003e, markersize=\u003cspan class=\"hljs-number\"\u003e85\u003c/span\u003e)\nax.\u003cspan class=\"hljs-title function_\"\u003egridlines\u003c/span\u003e(draw_labels=\u003cspan class=\"hljs-title class_\"\u003eTrue\u003c/span\u003e,linewidth=\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, color=\u003cspan class=\"hljs-string\"\u003e'black'\u003c/span\u003e, alpha=\u003cspan class=\"hljs-number\"\u003e0.5\u003c/span\u003e, linestyle=\u003cspan class=\"hljs-string\"\u003e'--'\u003c/span\u003e)\nplt.\u003cspan class=\"hljs-title function_\"\u003eshow\u003c/span\u003e()\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-07-09-3PopularMethodsforSpatialInterpolation_15.png\" alt=\"image\"\u003e\u003c/p\u003e\n\u003cp\u003eìœ„ì™€ ê°™ì´ ê²°ê³¼ê°€ IDWì—ì„œ ì–»ì€ ê²ƒê³¼ëŠ” ê½¤ ë‹¤ë¥´ë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆì–´ìš”. í¬ë¦¬ê¹…ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ë§¤ê°œë³€ìˆ˜ëŠ” ì„ íƒí•œ ì´ë¡ ì  ë³€ì´ê·¸ë¨ ì¢…ë¥˜ì¸ë°, ì´ëŠ” ì‚¬ì‹¤ ìƒ ì˜ˆì¸¡ëœ ê°’ê³¼ ê±°ë¦¬ ê°„ì˜ ê´€ê³„ë¥¼ ì •ì˜í•©ë‹ˆë‹¤. ì½”ë“œë¥¼ ì‚¬ìš©í•˜ê¸° ê·€ì°®ìœ¼ì‹œê±°ë‚˜ ì§ì ‘ ì‘ì„±í•˜ê³  ì‹¶ì§€ ì•Šë‹¤ë©´ ë§ì€ ë³€ì´ê·¸ë¨ ëª¨ë¸ì˜ êµ¬í˜„ì„ ê°–ê³  ìˆëŠ” PyKrige ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚´í´ë³´ì„¸ìš”.\u003c/p\u003e\n\u003cp\u003eì´ ê¸€ì´ ìœ ìµí•˜ê³  í†µì°°ë ¥ì„ ì¤¬ìœ¼ë©´ ì¢‹ê² ì–´ìš”!\u003c/p\u003e\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eì €ì˜ Mediumì— ì˜¬ë¦° ëª¨ë“  ê²Œì‹œë¬¼ì€ ë¬´ë£Œë¡œ ê³µê°œë˜ì–´ ìˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì—¬ê¸°ì„œ ì œë¥¼ íŒ”ë¡œìš°í•´ ì£¼ì‹¤ ê²½ìš° ì •ë§ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤!\u003c/p\u003e\n\u003cp\u003eì°¸ê³ ë¡œ, ì €ëŠ” (ì§€ë¦¬)ë°ì´í„° ê³¼í•™, ê¸°ê³„í•™ìŠµ/ì¸ê³µì§€ëŠ¥, ê·¸ë¦¬ê³  ê¸°í›„ ë³€í™”ì— ëŒ€í•´ ì—´ì •ì ìœ¼ë¡œ ê³µë¶€í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë§Œì•½ í•¨ê»˜ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ê³  ì‹¶ë‹¤ë©´ LinkedInì—ì„œ ì—°ë½ ì£¼ì„¸ìš”.\u003c/p\u003e\n\u003cp\u003eğŸ›°ï¸ë” ë§ì€ ì†Œì‹ì„ ìœ„í•´ íŒ”ë¡œìš° í•´ì£¼ì„¸ìš”ğŸ›°ï¸\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-07-09-3PopularMethodsforSpatialInterpolation"},"buildId":"OY-qm1-_Mz9jLZ5863EbF","assetPrefix":"/TIL","isFallback":false,"gsp":true,"scriptLoader":[{"async":true,"src":"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4877378276818686","strategy":"lazyOnload","crossOrigin":"anonymous"}]}</script></body></html>