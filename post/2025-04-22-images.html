<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>2025년 최신 이미지 최적화 기술과 활용법 총정리 | TIL</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://13akstjq.github.io/TIL//post/2025-04-22-images" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="2025년 최신 이미지 최적화 기술과 활용법 총정리 | TIL" data-gatsby-head="true"/><meta property="og:title" content="2025년 최신 이미지 최적화 기술과 활용법 총정리 | TIL" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/TIL/assets/img/nextjs.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://TIL.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://13akstjq.github.io/TIL//post/2025-04-22-images" data-gatsby-head="true"/><meta name="twitter:title" content="2025년 최신 이미지 최적화 기술과 활용법 총정리 | TIL" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/TIL/assets/img/nextjs.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | TIL" data-gatsby-head="true"/><meta name="article:published_time" content="2025-04-22 13:12" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/TIL/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/TIL/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/TIL/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/TIL/favicons/favicon-96x96.png"/><link rel="icon" href="/TIL/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/TIL/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/TIL/favicons/browserconfig.xml"/><link rel="preload" href="/TIL/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/TIL/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/TIL/_next/static/css/0eef537492fed77a.css" as="style"/><link rel="stylesheet" href="/TIL/_next/static/css/0eef537492fed77a.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/TIL/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/TIL/_next/static/chunks/webpack-21ffe88bdca56cba.js" defer=""></script><script src="/TIL/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/TIL/_next/static/chunks/main-a5eeabb286676ce6.js" defer=""></script><script src="/TIL/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/TIL/_next/static/chunks/75fc9c18-4a646156c659a948.js" defer=""></script><script src="/TIL/_next/static/chunks/348-02483b66b493dd81.js" defer=""></script><script src="/TIL/_next/static/chunks/pages/post/%5Bslug%5D-8ded8b979ba73586.js" defer=""></script><script src="/TIL/_next/static/olPs1cVezSGTqD7OaewDI/_buildManifest.js" defer=""></script><script src="/TIL/_next/static/olPs1cVezSGTqD7OaewDI/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/TIL">TIL</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/TIL/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">2025년 최신 이미지 최적화 기술과 활용법 총정리</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="2025년 최신 이미지 최적화 기술과 활용법 총정리" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/TIL/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">TIL</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Apr 22, 2025</span><span class="posts_reading_time__f7YPP">24<!-- --> min read</span></span></div></div></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<h1>이미지 최적화, Next.js 내장 API 대신 클라우드 연동하기</h1>
<p>안녕하세요! 오늘은 Next.js에서 기본 제공하는 이미지 최적화 API 대신, 클라우드 제공업체의 이미지를 활용하는 방법에 대해 알아볼게요.</p>
<p>Next.js 자체적으로 이미지 최적화 기능이 굉장히 편리하지만, 경우에 따라 AWS, Cloudinary, Imgix 같은 클라우드 서비스를 사용해야 할 때도 있죠. 그럴 땐 <code>next.config.js</code>에 약간의 설정만 추가하면 쉽게 커스터마이징 할 수 있어요.</p>
<pre><code class="hljs language-js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">images</span>: {
    <span class="hljs-attr">loader</span>: <span class="hljs-string">'custom'</span>,         <span class="hljs-comment">// 커스텀 로더를 사용하겠다는 뜻이에요</span>
    <span class="hljs-attr">loaderFile</span>: <span class="hljs-string">'./my/image/loader.js'</span>, <span class="hljs-comment">// 이미지 URL을 변환하는 함수가 담긴 파일 경로</span>
  },
}
</code></pre>
<p>위 설정에서 <code>loaderFile</code>은 Next.js 프로젝트 루트 기준 상대 경로로 지정해야 해요. 그리고 이 파일은 기본(default)으로 함수를 내보내야 하죠. 이 함수는 이미지 URL을 문자열로 반환하게 만들면 됩니다.</p>
<p>예를 들면, 내 클라우드 이미지 서비스 URL을 붙이는 방식으로 직접 조절할 수 있게 만드는 거죠!</p>
<h3>예시: loader.js 파일</h3>
<pre><code class="hljs language-js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">loader</span>(<span class="hljs-params">{ src, width, quality }</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-string">`https://your-cloud-service.com/<span class="hljs-subst">${src}</span>?w=<span class="hljs-subst">${width}</span>&#x26;q=<span class="hljs-subst">${quality || <span class="hljs-number">75</span>}</span>`</span>;
}
</code></pre>
<ul>
<li><code>src</code>: 최종적으로 최적화할 이미지 경로</li>
<li><code>width</code>: 요청하는 이미지의 너비 (Next.js가 필요에 따라 조절)</li>
<li><code>quality</code>: 이미지 품질 (옵션, 없으면 기본값 75 사용)</li>
</ul>
<p>이런 방식으로 자체 클라우드 이미지 URL 생성 로직을 자유롭게 구현할 수 있답니다.</p>
<hr>
<h3>추가 팁!</h3>
<ul>
<li>클라우드를 활용하면, 이미지 변환뿐 아니라 CDN을 통한 빠른 로딩까지 누릴 수 있어요.</li>
<li>AWS S3 + CloudFront, Cloudinary, Imgix 등이 대표적입니다.</li>
<li><code>next/image</code> 컴포넌트와의 호환성을 유지하면서도 유연하게 커스터마이징 가능해요.</li>
<li><code>loaderFile</code>을 지정하지 않고 <code>loader: 'imgix'</code>나 <code>loader: 'cloudinary'</code> 같은 기본 제공 로더를 쓸 수도 있어요.</li>
</ul>
<p>이미지 최적화 전략을 고민 중이라면, 내 프로젝트에 가장 잘 맞는 방식을 찾아보고 적용하는 게 중요합니다. Next.js의 확장성 덕분에, 다양한 클라우드 서비스와 쉽게 연동할 수 있으니 걱정하지 마세요!</p>
<p>필요하면 다음 번에 각 클라우드 제공업체별 최적화 설정법도 소개할게요. 편하게 댓글로 요청해주세요~</p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>안녕하세요 여러분! 오늘은 Next.js에서 이미지 최적화를 할 때 자주 사용되는 커스텀 이미지 로더 함수에 대해 이야기해볼게요.</p>
<p>위 코드를 보면 <code>myImageLoader</code>라는 함수가 있어요. 요 함수는 다음과 같이 생겼죠:</p>
<pre><code class="hljs language-js"><span class="hljs-string">'use client'</span>
 
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">myImageLoader</span>(<span class="hljs-params">{ src, width, quality }</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-string">`https://example.com/<span class="hljs-subst">${src}</span>?w=<span class="hljs-subst">${width}</span>&#x26;q=<span class="hljs-subst">${quality || <span class="hljs-number">75</span>}</span>`</span>
}
</code></pre>
<h3>이 함수가 하는 일?</h3>
<p>이 함수는 이미지 URL을 받아서 다음과 같이 변형해줘요.</p>
<ul>
<li><code>src</code>: 원본 이미지 경로</li>
<li><code>width</code>: 요청하는 이미지 너비 (이미지 최적화를 위해)</li>
<li><code>quality</code>: 이미지 품질. 만약 입력 안 하면 기본값 75로 설정됨</li>
</ul>
<p>즉, <code>https://example.com/이미지경로?w=이미지너비&#x26;q=품질</code> 형태로 URL을 만들어서 커스텀 이미지 서버나 CDN에 최적화된 이미지를 요청하게 만드는 거예요.</p>
<hr>
<h3>어떻게 쓰나요?</h3>
<p><code>next/image</code> 컴포넌트를 사용할 때 <code>loader</code> prop에 이 함수를 넘겨주면 돼요.</p>
<pre><code class="hljs language-jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Image</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'next/image'</span>
<span class="hljs-keyword">import</span> myImageLoader <span class="hljs-keyword">from</span> <span class="hljs-string">'./myImageLoader'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">MyComponent</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">Image</span>
      <span class="hljs-attr">loader</span>=<span class="hljs-string">{myImageLoader}</span>
      <span class="hljs-attr">src</span>=<span class="hljs-string">"path/to/image.jpg"</span>
      <span class="hljs-attr">alt</span>=<span class="hljs-string">"My Image"</span>
      <span class="hljs-attr">width</span>=<span class="hljs-string">{800}</span>
      <span class="hljs-attr">height</span>=<span class="hljs-string">{600}</span>
    /></span></span>
  )
}
</code></pre>
<hr>
<h3>여기서 알면 좋은 팁!</h3>
<ul>
<li>이 loader 함수를 커스텀하고 싶으면 <code>use client</code> 지시어를 꼭 붙여서 클라이언트 컴포넌트로 만들어야 해요. 그래야 함수가 직렬화되어 클라이언트에서 잘 작동하거든요.</li>
<li>Next.js 내장 이미지 최적화 API가 어떻게 동작하는지도 잘 이해해두면 좋아요. 공식 문서에서 <a href="https://nextjs.org/docs/api-reference/next/image#configuration" rel="nofollow" target="_blank">Image Configuration Options</a> 참고하시면 유용해요.</li>
</ul>
<hr>
<h3>추가로 알아두면 좋은 점</h3>
<ul>
<li>커스텀 로더를 사용하면, Next.js가 제공하는 기본 최적화 기능을 일부 포기하는 경우가 있어요. 그렇기 때문에 중간 CDN 혹은 별도 이미지 서버가 있을 때 최적화 문제를 직접 해결하고 싶을 때 사용하면 좋습니다.</li>
<li>만약 여러 종류의 이미지를 각각 다른 서버에서 받는 경우, 로더 함수를 조금 더 복잡하게 만들어서 서버별 분기처리도 가능해요.</li>
</ul>
<p>그러니까 상황에 맞게 잘 활용하면 공식 next/image 기능을 더 유연하고 강력하게 쓸 수 있다는 뜻이죠!</p>
<hr>
<p>요약한 표도 준비했어요.</p>





























<table><thead><tr><th>항목</th><th>설명</th></tr></thead><tbody><tr><td><code>src</code></td><td>원본 이미지 경로</td></tr><tr><td><code>width</code></td><td>요청 이미지 너비, 최적화를 위해 사용</td></tr><tr><td><code>quality</code></td><td>이미지 품질, 기본값은 75</td></tr><tr><td><code>loader</code> prop</td><td>next/image 컴포넌트에 커스텀 로더 함수를 전달하여 이미지 URL 생성 제어 가능</td></tr><tr><td><code>use client</code></td><td>커스텀 로더가 클라이언트 컴포넌트가 되도록 지시어를 붙여야 함 (함수 직렬화 필요)</td></tr></tbody></table>
<hr>
<p>이런 커스텀 로더 활용법으로 Next.js 이미지를 나만의 방식으로 최적화해보세요! 다음에도 개발 꿀팁 가지고 올게요 :)</p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h2>예제 로더 구성</h2>
<p>이미지 최적화 서비스를 만들 때, 각각의 CDN이나 이미지 서비스들이 요구하는 방식에 맞춰 URL을 만드는 게 중요해요. 여기서는 대표적인 서비스들의 로더 예시를 보여드릴게요.</p>









































































<table><thead><tr><th>서비스명</th><th>설명</th></tr></thead><tbody><tr><td>Akamai</td><td>Akamai CDN 이미지 로더</td></tr><tr><td>AWS CloudFront</td><td>AWS의 CDN 서비스</td></tr><tr><td>Cloudinary</td><td>이미지와 비디오 관리 플랫폼</td></tr><tr><td>Cloudflare</td><td>웹 최적화 및 CDN 서비스</td></tr><tr><td>Contentful</td><td>컨텐츠 관리 시스템</td></tr><tr><td>Fastly</td><td>고성능 CDN</td></tr><tr><td>Gumlet</td><td>이미지 최적화 및 변환 서비스</td></tr><tr><td>ImageEngine</td><td>이미지 최적화 솔루션</td></tr><tr><td>Imgix</td><td>실시간 이미지 처리 서비스</td></tr><tr><td>PixelBin</td><td>이미지 최적화 플랫폼</td></tr><tr><td>Sanity</td><td>구조화된 컨텐츠 관리 시스템</td></tr><tr><td>Sirv</td><td>이미지 호스팅과 CDN</td></tr><tr><td>Supabase</td><td>오픈 소스 백엔드 플랫폼</td></tr><tr><td>Thumbor</td><td>오픈 소스 이미지 처리 서버</td></tr><tr><td>Imagekit</td><td>실시간 이미지 최적화 서비스</td></tr><tr><td>Nitrogen AIO</td><td>AI 기반 이미지 최적화 도구</td></tr></tbody></table>
<hr>
<h3>Akamai 예시 코드</h3>
<pre><code class="hljs language-js"><span class="hljs-comment">// 공식 문서: https://techdocs.akamai.com/ivm/reference/test-images-on-demand</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">akamaiLoader</span>(<span class="hljs-params">{ src, width, quality }</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-string">`https://example.com/<span class="hljs-subst">${src}</span>?imwidth=<span class="hljs-subst">${width}</span>`</span>
}
</code></pre>
<p>Akamai는 URL에 <code>imwidth</code> 파라미터로 원하는 이미지 너비를 지정하는 식으로 이미지를 요청할 수 있어요. 이처럼 각 서비스마다 URL 포맷이 다르니, 서비스를 사용할 때는 꼭 공식 문서를 확인해 주세요!</p>
<hr>
<h3>조금 더 유용한 팁!</h3>
<ul>
<li><code>quality</code> 파라미터를 지원하는 경우, 이미지 품질 조절도 가능한데요. 품질을 조절하면 파일 크기를 줄이면서도 적당한 화면 퀄리티를 유지할 수 있어요.</li>
<li>width, height를 명확히 지정하면 브라우저가 레이아웃을 미리 잡는데 도움이 돼서 LCP(최대 콘텐츠 표시 시간) 개선에 유리합니다.</li>
<li>이미지를 다루는 서비스마다 URL 규칙이 다르기 때문에, 공통 인터페이스로 로더 함수를 만들어두면 코드 관리가 편해집니다.</li>
</ul>
<p>이미지 최적화는 웹 성능에 엄청 큰 영향을 미치니까, 여러분만의 로더를 만들어서 꼭 활용해보세요!</p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h3>AWS CloudFront 이미지 최적화 로더</h3>
<p>AWS CloudFront는 CDN 서비스로 유명하지만, 이미지 최적화 기능도 정말 강력해요. 위 코드 예제는 CloudFront의 이미지 최적화 API와 연동하는 간단한 로더 함수입니다.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">cloudfrontLoader</span>(<span class="hljs-params">{ src, width, quality }</span>) {
  <span class="hljs-keyword">const</span> url = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">`https://example.com<span class="hljs-subst">${src}</span>`</span>)
  url.<span class="hljs-property">searchParams</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'format'</span>, <span class="hljs-string">'auto'</span>) <span class="hljs-comment">// 이미지 포맷을 자동으로 변환 (WebP, AVIF 등 지원)</span>
  url.<span class="hljs-property">searchParams</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'width'</span>, width.<span class="hljs-title function_">toString</span>()) <span class="hljs-comment">// 원하는 이미지 너비 지정</span>
  url.<span class="hljs-property">searchParams</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'quality'</span>, (quality || <span class="hljs-number">75</span>).<span class="hljs-title function_">toString</span>()) <span class="hljs-comment">// 퀄리티 조절 (기본 75)</span>
  <span class="hljs-keyword">return</span> url.<span class="hljs-property">href</span>
}
</code></pre>
<ul>
<li><strong>format=auto</strong>: 브라우저가 지원하는 최적의 이미지 포맷(WebP, AVIF 등)을 자동으로 선택해줍니다. 이걸 사용하면 무조건 파일 사이즈가 줄어들어 빠른 로딩이 가능해지죠.</li>
<li><strong>width</strong>와 <strong>quality</strong> 설정으로 원하는 사이즈와 품질을 자유롭게 조절할 수 있어요.</li>
</ul>
<p><strong>팁!</strong> AWS는 CloudFront 외에도 <a href="https://aws.amazon.com/solutions/implementations/image-handler/" rel="nofollow" target="_blank">AWS Image Handler</a> 솔루션을 제공합니다. 요구사항에 따라 서버리스 방식으로 이미지 리사이징, 최적화를 구현할 수도 있어요.</p>
<hr>
<h3>Cloudinary 이미지 최적화 로더</h3>
<p>Cloudinary는 이미지 및 비디오 관리에서 거의 표준처럼 쓰이는 서비스인데요, 여기서도 자동 변환과 최적화 기능을 활용할 수 있습니다.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">cloudinaryLoader</span>(<span class="hljs-params">{ src, width, quality }</span>) {
  <span class="hljs-keyword">const</span> params = [<span class="hljs-string">'f_auto'</span>, <span class="hljs-string">'c_limit'</span>, <span class="hljs-string">`w_<span class="hljs-subst">${width}</span>`</span>, <span class="hljs-string">`q_<span class="hljs-subst">${quality || <span class="hljs-string">'auto'</span>}</span>`</span>]
  <span class="hljs-keyword">return</span> <span class="hljs-string">`https://example.com/<span class="hljs-subst">${params.join(<span class="hljs-string">','</span>)}</span><span class="hljs-subst">${src}</span>`</span>
}
</code></pre>
<ul>
<li><strong>f_auto</strong>: 자동 이미지 포맷 변환</li>
<li><strong>c_limit</strong>: 컨텐츠 제한 모드로 이미지가 지정한 width보다 크면 축소</li>
<li><strong>w_300</strong>: 이미지 너비 300픽셀 설정 예시</li>
<li><strong>q_auto</strong>: 이미지 퀄리티를 자동으로 최적화</li>
</ul>
<p>Cloudinary는 다양한 트랜스포메이션 옵션을 제공하니, 공식 문서나 데모 페이지(<a href="https://res.cloudinary.com/demo/image/upload/w_300,c_limit,q_auto/turtles.jpg" rel="nofollow" target="_blank">링크</a>)를 참고해서 꼭 활용해보세요!</p>
<hr>
<h3>한 줄 요약</h3>




















<table><thead><tr><th>서비스</th><th>이미지 최적화 키워드</th><th>특징 및 참고사항</th></tr></thead><tbody><tr><td>AWS CloudFront</td><td><code>format=auto</code>, <code>width</code>, <code>quality</code></td><td>AWS 인프라 연동, 서버리스 이미지 최적화 가능</td></tr><tr><td>Cloudinary</td><td><code>f_auto</code>, <code>c_limit</code>, <code>w_</code>, <code>q_</code></td><td>다양한 이미지 변환/최적화 기능 제공, 쉽게 적용 가능</td></tr></tbody></table>
<hr>
<p>저도 예전에 이미지 최적화 때문에 엄청 고민했는데, 이런 CDN 서비스의 자동 최적화 기능을 이용하니 정말 편하더라고요. 직접 써보면서 서비스마다 조금씩 다른 파라미터와 특성을 비교해 보는 것도 좋은 공부가 될 거예요!</p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h3>Cloudflare 이미지 로더 함수</h3>
<pre><code class="hljs language-js"><span class="hljs-comment">// Docs: https://developers.cloudflare.com/images/transform-images</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">cloudflareLoader</span>(<span class="hljs-params">{ src, width, quality }</span>) {
  <span class="hljs-keyword">const</span> params = [<span class="hljs-string">`width=<span class="hljs-subst">${width}</span>`</span>, <span class="hljs-string">`quality=<span class="hljs-subst">${quality || <span class="hljs-number">75</span>}</span>`</span>, <span class="hljs-string">'format=auto'</span>]
  <span class="hljs-keyword">return</span> <span class="hljs-string">`https://example.com/cdn-cgi/image/<span class="hljs-subst">${params.join(<span class="hljs-string">','</span>)}</span>/<span class="hljs-subst">${src}</span>`</span>
}
</code></pre>
<p>여기서는 Cloudflare의 이미지 변환 API를 이용해서 이미지를 자동 포맷(webp, avif 등)으로 변경하고, 지정한 너비(width)와 품질(quality)를 적용해주고 있어요. quality는 지정하지 않으면 기본값 75로 처리하니 참고하세요.</p>
<p>포인트는 URL에 쿼리스트링 대신 path 부분에 파라미터를 쉼표로 구분해서 넣는다는 거예요. Cloudflare 방식만 좀 특별하니 헷갈리지 말기!</p>
<hr>
<h3>Contentful 이미지 로더 함수</h3>
<pre><code class="hljs language-js"><span class="hljs-comment">// Docs: https://www.contentful.com/developers/docs/references/images-api/</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">contentfulLoader</span>(<span class="hljs-params">{ src, width, quality }</span>) {
  <span class="hljs-keyword">const</span> url = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">`https://example.com<span class="hljs-subst">${src}</span>`</span>)
  url.<span class="hljs-property">searchParams</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'fm'</span>, <span class="hljs-string">'webp'</span>)
  url.<span class="hljs-property">searchParams</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'w'</span>, width.<span class="hljs-title function_">toString</span>())
  url.<span class="hljs-property">searchParams</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'q'</span>, (quality || <span class="hljs-number">75</span>).<span class="hljs-title function_">toString</span>())
  <span class="hljs-keyword">return</span> url.<span class="hljs-property">href</span>
}
</code></pre>
<p>Contentful 이미지 API를 쓸 때는 URLSearchParams를 이용해서 쿼리스트링을 붙여줘요. 여기서 <code>fm=webp</code>는 이미지 포맷을 webp로 강제 변환하는 옵션이고, <code>w</code>는 너비, <code>q</code>는 품질이에요.</p>
<p>Contentful은 URL에 쿼리파라미터를 붙이는 형식이라 Cloudflare와 달리 경로가 복잡하지 않아서 편리해요.</p>
<hr>
<h3>추가 팁</h3>
<ul>
<li>이미지 최적화할 때는 가능한 한 <code>format=auto</code>나 <code>fm=webp</code> 같은 포맷 자동 변환 기능을 꼭 쓰는 게 좋아요. 요즘 브라우저 대부분이 webp, avif 등 고효율 포맷을 지원해서 페이지 로딩 속도가 훨씬 빨라진답니다.</li>
<li>이미지 너비(width)를 꼭 지정해서 너무 큰 원본 이미지를 불필요하게 불러오지 않도록 하세요.</li>
<li>품질(quality)을 75 정도로 설정하면 품질과 파일 크기의 균형이 잘 맞는 편이에요. 필요하다면 조절해보세요.</li>
</ul>
<p>이렇게 내가 쓰는 CDN이나 이미지 제공 서비스에 맞게 최적화 로더 함수를 만들어서 쓰면 Next.js 같은 프레임워크에서 자동으로 최적화된 이미지를 잘 뽑아줄 수 있어요. 한번 직접 만들어서 써보면 생각보다 간단하고 효과가 확실하니 도전해보세요!</p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h3>Fastly와 Gumlet 이미지 로더 비교</h3>
<p>이미지 최적화와 관련해서 Fastly와 Gumlet 두 가지 서비스를 많이 사용하죠. 여기서 각각의 간단한 커스텀 이미지 로더 함수 예제를 소개할게요. 이 함수들은 주로 Next.js 같은 프레임워크에서 이미지 URL을 동적으로 생성할 때 유용하게 쓰입니다.</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// Fastly 로더 예제</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fastlyLoader</span>(<span class="hljs-params">{ src, width, quality }</span>) {
  <span class="hljs-keyword">const</span> url = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">`https://example.com<span class="hljs-subst">${src}</span>`</span>)
  url.<span class="hljs-property">searchParams</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'auto'</span>, <span class="hljs-string">'webp'</span>) <span class="hljs-comment">// 자동으로 WebP 포맷 변환</span>
  url.<span class="hljs-property">searchParams</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'width'</span>, width.<span class="hljs-title function_">toString</span>()) <span class="hljs-comment">// 이미지 너비 설정</span>
  url.<span class="hljs-property">searchParams</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'quality'</span>, (quality || <span class="hljs-number">75</span>).<span class="hljs-title function_">toString</span>()) <span class="hljs-comment">// 이미지 품질 설정 (기본 75)</span>
  <span class="hljs-keyword">return</span> url.<span class="hljs-property">href</span>
}
</code></pre>
<pre><code class="hljs language-js"><span class="hljs-comment">// Gumlet 로더 예제</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">gumletLoader</span>(<span class="hljs-params">{ src, width, quality }</span>) {
  <span class="hljs-keyword">const</span> url = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">`https://example.com<span class="hljs-subst">${src}</span>`</span>)
  url.<span class="hljs-property">searchParams</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'format'</span>, <span class="hljs-string">'auto'</span>) <span class="hljs-comment">// 자동 포맷 변환</span>
  url.<span class="hljs-property">searchParams</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'w'</span>, width.<span class="hljs-title function_">toString</span>()) <span class="hljs-comment">// 이미지 너비 설정</span>
  url.<span class="hljs-property">searchParams</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'q'</span>, (quality || <span class="hljs-number">75</span>).<span class="hljs-title function_">toString</span>()) <span class="hljs-comment">// 이미지 품질 설정 (기본 75)</span>
  <span class="hljs-keyword">return</span> url.<span class="hljs-property">href</span>
}
</code></pre>






























<table><thead><tr><th>항목</th><th>Fastly</th><th>Gumlet</th></tr></thead><tbody><tr><td>포맷 자동변환</td><td><code>auto=webp</code></td><td><code>format=auto</code></td></tr><tr><td>이미지 너비</td><td><code>width</code></td><td><code>w</code></td></tr><tr><td>품질 설정</td><td><code>quality</code> (기본값 75)</td><td><code>q</code> (기본값 75)</td></tr><tr><td>공식 문서</td><td><a href="https://developer.fastly.com/reference/io/" rel="nofollow" target="_blank">Fastly IO Docs</a></td><td><a href="https://docs.gumlet.com/reference/image-transform-size" rel="nofollow" target="_blank">Gumlet Docs</a></td></tr></tbody></table>
<hr>
<h3>빠르게 정리하는 팁!</h3>
<ul>
<li>두 서비스 모두 이미지 포맷을 자동변환해서 WebP 같은 최신 포맷으로 최적화할 수 있어요.</li>
<li>파라미터 명칭이 조금 다르니 사용할 때 코드를 잘 확인해야 합니다.</li>
<li><code>quality</code> 기본값을 75로 맞추는 건 적당한 품질 유지와 용량 절약 균형을 위해 많이 쓰입니다.</li>
<li>URL 생성시 <code>new URL</code>을 쓰면 쿼리 파라미터 세팅이 편해서 추천해요.</li>
</ul>
<p>이렇게 커스텀 로더를 쓰면 내 서비스에 맞춰 최적의 이미지 URL을 자동으로 만들어주니까 퍼포먼스에 큰 도움이 됩니다. 나중에 더 심화된 옵션들도 활용해보면 좋아요!</p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h3>ImageEngine</h3>
<pre><code class="hljs language-js"><span class="hljs-comment">// 공식 문서: https://support.imageengine.io/hc/en-us/articles/360058880672-Directives</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">imageengineLoader</span>(<span class="hljs-params">{ src, width, quality }</span>) {
  <span class="hljs-keyword">const</span> compression = <span class="hljs-number">100</span> - (quality || <span class="hljs-number">50</span>)  <span class="hljs-comment">// quality가 없으면 기본 50으로 지정 후 압축률 계산</span>
  <span class="hljs-keyword">const</span> params = [<span class="hljs-string">`w_<span class="hljs-subst">${width}</span>`</span>, <span class="hljs-string">`cmpr_<span class="hljs-subst">${compression}</span>`</span>]
  <span class="hljs-keyword">return</span> <span class="hljs-string">`https://example.com<span class="hljs-subst">${src}</span>?imgeng=/<span class="hljs-subst">${params.join(<span class="hljs-string">'/'</span>)}</span>`</span>
}
</code></pre>
<p>ImageEngine은 이미지의 크기 조절과 압축률을 URL 파라미터로 조절해서 최적화해주는 서비스입니다. 위 코드에서는 너비(width)와 품질(quality)를 받아서 적절한 압축 비율로 변환하고, 이 매개변수를 URL에 붙여서 반환해줍니다.</p>
<ul>
<li><code>w_{width}</code> : 이미지 너비 지정</li>
<li><code>cmpr_{value}</code> : 압축률 지정 (100에서 quality 값을 뺀 값)</li>
</ul>
<blockquote>
<p>참고로, quality 값을 0~100까지 넘겨주면 압축률을 구할 수 있어서 좀 더 세밀하게 이미지 품질과 용량을 조절할 수 있답니다.</p>
</blockquote>
<hr>
<h3>Imgix</h3>
<pre><code class="hljs language-js"><span class="hljs-comment">// 예제 이미지: https://static.imgix.net/daisy.png?format=auto&#x26;fit=max&#x26;w=300</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">imgixLoader</span>(<span class="hljs-params">{ src, width, quality }</span>) {
  <span class="hljs-keyword">const</span> url = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">`https://example.com<span class="hljs-subst">${src}</span>`</span>)
  <span class="hljs-keyword">const</span> params = url.<span class="hljs-property">searchParams</span>
  params.<span class="hljs-title function_">set</span>(<span class="hljs-string">'auto'</span>, params.<span class="hljs-title function_">getAll</span>(<span class="hljs-string">'auto'</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">','</span>) || <span class="hljs-string">'format'</span>)  <span class="hljs-comment">// 자동 포맷 설정</span>
  params.<span class="hljs-title function_">set</span>(<span class="hljs-string">'fit'</span>, params.<span class="hljs-title function_">get</span>(<span class="hljs-string">'fit'</span>) || <span class="hljs-string">'max'</span>)                    <span class="hljs-comment">// 이미지 fitting 방식 지정</span>
  params.<span class="hljs-title function_">set</span>(<span class="hljs-string">'w'</span>, params.<span class="hljs-title function_">get</span>(<span class="hljs-string">'w'</span>) || width.<span class="hljs-title function_">toString</span>())             <span class="hljs-comment">// 너비 지정</span>
  params.<span class="hljs-title function_">set</span>(<span class="hljs-string">'q'</span>, (quality || <span class="hljs-number">50</span>).<span class="hljs-title function_">toString</span>())                      <span class="hljs-comment">// 품질 지정</span>
  <span class="hljs-keyword">return</span> url.<span class="hljs-property">href</span>
}
</code></pre>
<p>Imgix는 매우 인기있는 이미지 최적화 및 제공 서비스입니다. 위 예시 코드는 URL 객체를 활용해 기존 쿼리 파라미터를 유지하면서 자동 포맷, 맞춤 크기, 품질을 지정해서 반환하고 있어요.</p>
<ul>
<li><code>auto=format</code> : 브라우저에 최적화된 형식으로 자동 변환 (webp, jpeg 등)</li>
<li><code>fit=max</code> : 이미지 fitting 방법으로 최대 크기까지 맞춤 (crop이나 clip도 가능해요)</li>
<li><code>w</code> : 너비(width) 지정</li>
<li><code>q</code> : 품질(quality) 지정 (기본값 50)</li>
</ul>
<blockquote>
<p>URL 객체를 쓰는 이유? 쿼리 파라미터를 쉽게 조작하면서 중복 제거하고 올바른 URL을 만들기 위해서에요.</p>
</blockquote>
<h3>한 번에 비교해보는 주요 파라미터</h3>








































<table><thead><tr><th>서비스</th><th>주요 파라미터</th><th>설명</th></tr></thead><tbody><tr><td>ImageEngine</td><td><code>w_{width}</code></td><td>이미지 너비 지정</td></tr><tr><td></td><td><code>cmpr_{compression}</code></td><td>압축률 지정 (100 - quality)</td></tr><tr><td>Imgix</td><td><code>w</code></td><td>이미지 너비 지정</td></tr><tr><td></td><td><code>q</code></td><td>품질(quality) 지정</td></tr><tr><td></td><td><code>auto=format</code></td><td>자동 포맷 변환</td></tr><tr><td></td><td><code>fit</code></td><td>이미지 fitting 방식</td></tr></tbody></table>
<hr>
<h3>참고 팁</h3>
<ul>
<li>이미지 최적화할 때는 무조건 품질을 최고로 올리는 것보다, 용량과 품질의 적절한 균형점을 찾는 게 중요해요.</li>
<li>'quality' 값을 너무 낮게 하면 이미지가 뭉개지고, 너무 높이면 로딩 속도가 느려지니까요. 보통 50~70 사이 조절이 많이 쓰입니다.</li>
<li>또한, <code>auto=format</code> 같은 기능을 지원하는 서비스는 유용해요. 브라우저에 맞는 최적 포맷으로 변환해주거든요.</li>
</ul>
<p>기본적인 사용법과 개념부터 잡고, 필요에 따라 각 서비스 공식 문서를 참고해서 더 세밀하게 조정해보길 추천드립니다!</p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h3>PixelBin 이미지 로더 함수</h3>
<pre><code class="hljs language-js"><span class="hljs-comment">// Doc (Resize): https://www.pixelbin.io/docs/transformations/basic/resize/#width-w</span>
<span class="hljs-comment">// Doc (Optimise): https://www.pixelbin.io/docs/optimizations/quality/#image-quality-when-delivering</span>
<span class="hljs-comment">// Doc (Auto Format Delivery): https://www.pixelbin.io/docs/optimizations/format/#automatic-format-selection-with-f_auto-url-parameter</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">pixelBinLoader</span>(<span class="hljs-params">{ src, width, quality }</span>) {
  <span class="hljs-keyword">const</span> name = <span class="hljs-string">'&#x3C;your-cloud-name>'</span>
  <span class="hljs-keyword">const</span> opt = <span class="hljs-string">`t.resize(w:<span class="hljs-subst">${width}</span>)~t.compress(q:<span class="hljs-subst">${quality || <span class="hljs-number">75</span>}</span>)`</span>
  <span class="hljs-keyword">return</span> <span class="hljs-string">`https://cdn.pixelbin.io/v2/<span class="hljs-subst">${name}</span>/<span class="hljs-subst">${opt}</span>/<span class="hljs-subst">${src}</span>?f_auto=true`</span>
}
</code></pre>
<p>PixelBin은 이미지 크기 조절, 압축, 포맷 자동 변환 등을 손쉽게 적용할 수 있게 해주는 이미지 CDN 서비스예요. 위 코드에서 <code>width</code>와 <code>quality</code>를 받아서 이미지를 최적화된 형태로 반환합니다.</p>
<ul>
<li><code>t.resize(w:${width})</code>: 원하는 가로 폭으로 이미지 크기를 조절</li>
<li><code>t.compress(q:${quality || 75})</code>: 이미지 품질을 0~100으로 지정하며 기본값은 75</li>
<li><code>?f_auto=true</code>: 브라우저에 맞춰 최적의 이미지 포맷(WebP, AVIF 등)을 자동 선택해줍니다.</li>
</ul>
<p>직접 클라우드 이름(<code>&#x3C;your-cloud-name></code>)을 넣어서 사용하세요. PixelBin 덕분에 이미지 최적화가 훨씬 간편해져서 페이지 속도 개선에 아주 좋아요!</p>
<hr>
<h3>Sanity 이미지 로더 함수</h3>
<pre><code class="hljs language-js"><span class="hljs-comment">// Docs: https://www.sanity.io/docs/image-urls</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">sanityLoader</span>(<span class="hljs-params">{ src, width, quality }</span>) {
  <span class="hljs-keyword">const</span> prj = <span class="hljs-string">'zp7mbokg'</span>
  <span class="hljs-keyword">const</span> dataset = <span class="hljs-string">'production'</span>
  <span class="hljs-keyword">const</span> url = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">`https://cdn.sanity.io/images/<span class="hljs-subst">${prj}</span>/<span class="hljs-subst">${dataset}</span><span class="hljs-subst">${src}</span>`</span>)
  url.<span class="hljs-property">searchParams</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'auto'</span>, <span class="hljs-string">'format'</span>)
  url.<span class="hljs-property">searchParams</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'fit'</span>, <span class="hljs-string">'max'</span>)
  url.<span class="hljs-property">searchParams</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'w'</span>, width.<span class="hljs-title function_">toString</span>())
  <span class="hljs-keyword">if</span> (quality) {
    url.<span class="hljs-property">searchParams</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'q'</span>, quality.<span class="hljs-title function_">toString</span>())
  }
  <span class="hljs-keyword">return</span> url.<span class="hljs-property">href</span>
}
</code></pre>
<p>Sanity는 헤드리스 CMS답게 이미지를 효과적으로 다룰 수 있는 내장 이미지 CDN을 제공합니다. 위 코드는 프로젝트 ID와 데이터셋만 맞춰주면 원하는 크기와 품질로 이미지를 요청할 수 있어요.</p>
<ul>
<li><code>auto=format</code>: 자동으로 최적의 이미지 포맷을 선택</li>
<li><code>fit=max</code>: 지정한 크기 내에서 이미지 크기를 최대한 맞춤</li>
<li><code>w</code>: 가로 폭 지정</li>
<li><code>q</code>: 이미지 품질 지정 (optional)</li>
</ul>
<p>Sanity를 쓰면서 매번 직접 URL 다루기 귀찮다면 이렇게 로더 함수로 한 번 만들어 두면 훨씬 편하겠죠?</p>
<hr>
<h3>추가 팁!</h3>
<p>요즘은 다양한 디바이스가 많으니까 이미지 사이즈와 포맷 최적화는 필수가 됐어요. 위 두 예시 모두 <strong>자동 포맷 변환</strong>을 지원하는데, 이런 기능을 활용하면 꼭 WebP, AVIF 같은 최신 포맷을 개별 지원하지 않아도 되니 개발이 한결 수월해진답니다.</p>
<p>또한, <code>quality</code> 값을 너무 높게 잡으면 페이지 로딩 속도가 늦어지고, 너무 낮게 하면 화질이 떨어질 수 있으니 적절한 타협이 중요해요. 보통 70~80 정도가 밸런스가 잘 맞는 편입니다. 실제 서비스에 적용 전에는 꼭 여러 디바이스에서 테스트해보세요!</p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h3>Sirv 이미지 로더</h3>
<p>Sirv는 이미지 최적화와 다이나믹 이미징을 지원하는 서비스에요. 위 코드를 보면, 이미지 URL에 필요한 파라미터를 추가해서 최적화된 이미지를 불러올 수 있게 만들어두었죠.</p>
<ul>
<li><code>format</code> 파라미터는 이미지 형식을 지정하는데, 기본값은 <code>'optimal'</code>로 설정해서 브라우저에 맞는 포맷을 자동으로 선택합니다.</li>
<li><code>w</code>는 이미지의 너비를 의미하고, 값을 넣어주지 않았다면 <code>width</code> 매개변수에서 받아 활용해요.</li>
<li><code>q</code>는 이미지 품질(quality) 숫자로, 기본값 85를 사용하지만 필요에 따라 조절 가능해요.</li>
</ul>
<pre><code class="hljs language-js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">sirvLoader</span>(<span class="hljs-params">{ src, width, quality }</span>) {
  <span class="hljs-keyword">const</span> url = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">`https://example.com<span class="hljs-subst">${src}</span>`</span>)
  <span class="hljs-keyword">const</span> params = url.<span class="hljs-property">searchParams</span>
  params.<span class="hljs-title function_">set</span>(<span class="hljs-string">'format'</span>, params.<span class="hljs-title function_">getAll</span>(<span class="hljs-string">'format'</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">','</span>) || <span class="hljs-string">'optimal'</span>)
  params.<span class="hljs-title function_">set</span>(<span class="hljs-string">'w'</span>, params.<span class="hljs-title function_">get</span>(<span class="hljs-string">'w'</span>) || width.<span class="hljs-title function_">toString</span>())
  params.<span class="hljs-title function_">set</span>(<span class="hljs-string">'q'</span>, (quality || <span class="hljs-number">85</span>).<span class="hljs-title function_">toString</span>())
  <span class="hljs-keyword">return</span> url.<span class="hljs-property">href</span>
}
</code></pre>
<h3>Supabase 이미지 로더</h3>
<p>Supabase의 스토리지를 이용해 이미지 변환 기능을 쓸 때는 URL 파라미터로 <code>width</code>와 <code>quality</code>을 넣으면 돼요.</p>
<ul>
<li><code>width</code> 파라미터로 원하는 이미지 너비를 지정하고,</li>
<li><code>quality</code>를 통해 이미지 압축 정도를 조절할 수 있어요. 기본 75로 설정되어 있습니다.</li>
</ul>
<pre><code class="hljs language-js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">supabaseLoader</span>(<span class="hljs-params">{ src, width, quality }</span>) {
  <span class="hljs-keyword">const</span> url = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">`https://example.com<span class="hljs-subst">${src}</span>`</span>)
  url.<span class="hljs-property">searchParams</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'width'</span>, width.<span class="hljs-title function_">toString</span>())
  url.<span class="hljs-property">searchParams</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'quality'</span>, (quality || <span class="hljs-number">75</span>).<span class="hljs-title function_">toString</span>())
  <span class="hljs-keyword">return</span> url.<span class="hljs-property">href</span>
}
</code></pre>
<hr>
<h3>추가 팁  — Next.js와 함께 쓸 때</h3>
<p>이 두 로더는 Next.js의 <code>next/image</code> 컴포넌트에서 <code>loader</code> 옵션으로 지정해서 쓸 수 있어요. 이렇게 하면 이미지 최적화가 훨씬 간편해지죠.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Image</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'next/image'</span>
<span class="hljs-keyword">import</span> sirvLoader <span class="hljs-keyword">from</span> <span class="hljs-string">'./sirvLoader'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">MyComponent</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">Image</span>
      <span class="hljs-attr">loader</span>=<span class="hljs-string">{sirvLoader}</span>
      <span class="hljs-attr">src</span>=<span class="hljs-string">"/my-image.png"</span>
      <span class="hljs-attr">width</span>=<span class="hljs-string">{800}</span>
      <span class="hljs-attr">height</span>=<span class="hljs-string">{600}</span>
      <span class="hljs-attr">alt</span>=<span class="hljs-string">"Example image"</span>
    /></span></span>
  )
}
</code></pre>
<p>Supabase도 마찬가지구요.</p>
<p>만약 여러분이 이미지 최적화나 변환 기능을 직접 구현하거나 타 서비스와 연동할 계획이라면, 이런 커스텀 로더 패턴을 잘 기억해 두는 게 좋아요. 서비스마다 요구하는 쿼리 파라미터가 다르니 꼭 공식 문서를 참고하세요!</p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h3>Thumbor와 ImageKit.io 이미지 로더 함수 비교</h3>
<p>안녕하세요! 오늘은 이미지 최적화 서비스인 Thumbor와 ImageKit.io를 사용할 때 자주 쓰이는 이미지 URL 생성 함수 예제를 소개할게요. 여러분이 Next.js 같은 프레임워크에서 커스텀 이미지 로더를 만들 때 참고하면 좋아요.</p>
<hr>
<h4>Thumbor</h4>
<pre><code class="hljs language-js"><span class="hljs-comment">// 공식 문서: https://thumbor.readthedocs.io/en/latest/</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">thumborLoader</span>(<span class="hljs-params">{ src, width, quality }</span>) {
  <span class="hljs-keyword">const</span> params = [<span class="hljs-string">`<span class="hljs-subst">${width}</span>x0`</span>, <span class="hljs-string">`filters:quality(<span class="hljs-subst">${quality || <span class="hljs-number">75</span>}</span>)`</span>]
  <span class="hljs-keyword">return</span> <span class="hljs-string">`https://example.com<span class="hljs-subst">${params.join(<span class="hljs-string">'/'</span>)}</span><span class="hljs-subst">${src}</span>`</span>
}
</code></pre>
<ul>
<li>사용법:
<ul>
<li><code>width</code>만 지정하고 높이(height)는 0으로 고정해서 비율을 유지합니다.</li>
<li><code>quality</code>는 필터로 적용하며 기본값은 75입니다.</li>
</ul>
</li>
<li>Thumbor는 URL 구조가 <code>/widthxheight/filters:.../image_path</code> 형식이에요.</li>
<li>실제 사용할 때 <code>https://example.com</code> 대신 본인 서버 주소로 바꾸시면 됩니다.</li>
</ul>
<hr>
<h4>ImageKit.io</h4>
<pre><code class="hljs language-js"><span class="hljs-comment">// 공식 문서: https://imagekit.io/docs/image-transformation</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">imageKitLoader</span>(<span class="hljs-params">{ src, width, quality }</span>) {
  <span class="hljs-keyword">const</span> params = [<span class="hljs-string">`w-<span class="hljs-subst">${width}</span>`</span>, <span class="hljs-string">`q-<span class="hljs-subst">${quality || <span class="hljs-number">80</span>}</span>`</span>]
  <span class="hljs-keyword">return</span> <span class="hljs-string">`https://ik.imagekit.io/your_imagekit_id/<span class="hljs-subst">${src}</span>?tr=<span class="hljs-subst">${params.join(<span class="hljs-string">','</span>)}</span>`</span>
}
</code></pre>
<ul>
<li>사용법:
<ul>
<li>URL 쿼리 스트링 <code>?tr=</code> 뒤에 변환 옵션을 쉼표로 구분해서 넣는 방식이에요.</li>
<li><code>w-</code>는 너비 지정, <code>q-</code>는 품질 설정이며 기본값은 80입니다.</li>
</ul>
</li>
<li><code>your_imagekit_id</code>를 본인 계정에 맞게 바꿔 주세요.</li>
</ul>
<hr>
<h3>비교 및 팁</h3>






























<table><thead><tr><th>특징</th><th>Thumbor</th><th>ImageKit.io</th></tr></thead><tbody><tr><td>URL 형식</td><td><code>/widthxheight/filters:value/image</code></td><td><code>?tr=options</code> 쿼리 스트링</td></tr><tr><td>품질 기본값</td><td>75</td><td>80</td></tr><tr><td>비율 유지 방식</td><td>높이 0으로 설정해서 자동 맞춤</td><td>너비만 지정, 자동 비율 유지</td></tr><tr><td>공식 문서 링크</td><td><a href="https://thumbor.readthedocs.io/en/latest/" rel="nofollow" target="_blank">Thumbor Docs</a></td><td><a href="https://imagekit.io/docs/image-transformation" rel="nofollow" target="_blank">ImageKit Docs</a></td></tr></tbody></table>
<hr>
<h3>한마디</h3>
<p>이미지 최적화는 페이지 로딩 속도에 직접적인 영향을 미치기 때문에 꼭 신경 써야 하는 부분이에요. Thumbor와 ImageKit.io 모두 강력한 기능을 제공하니 프로젝트 상황에 맞게 선택하세요. 특히 ImageKit은 CDN 연동이 원활하고, Thumbor는 직접 서버에서 동작하므로 관리 편의성이 달라요.</p>
<p>궁금한 점 있으면 댓글로 물어봐 주세요! 다음에도 더 유용한 개발 정보로 찾아올게요~</p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h3>Nitrogen AIO</h3>
<p>안녕하세요! 오늘은 Nitrogen AIO의 <code>aioLoader</code> 함수를 한번 같이 살펴볼게요. 이 코드는 이미지 URL을 받아서, 파라미터를 조작해 최적화된 이미지 URL을 자동으로 만들어주는 역할을 합니다.</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// Docs: https://docs.n7.io/aio/intergrations/</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">aioLoader</span>(<span class="hljs-params">{ src, width, quality }</span>) {
  <span class="hljs-keyword">const</span> url = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(src, <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span>) <span class="hljs-comment">// 주어진 src를 기반으로 URL 객체 생성</span>
  <span class="hljs-keyword">const</span> params = url.<span class="hljs-property">searchParams</span>             <span class="hljs-comment">// URL의 쿼리 파라미터 접근</span>
  <span class="hljs-keyword">const</span> aioParams = params.<span class="hljs-title function_">getAll</span>(<span class="hljs-string">'aio'</span>)      <span class="hljs-comment">// 'aio' 키에 해당하는 모든 값 가져오기</span>
  aioParams.<span class="hljs-title function_">push</span>(<span class="hljs-string">`w-<span class="hljs-subst">${width}</span>`</span>)                 <span class="hljs-comment">// 너비 정보 추가 (예: w-800)</span>
  <span class="hljs-keyword">if</span> (quality) {
    aioParams.<span class="hljs-title function_">push</span>(<span class="hljs-string">`q-<span class="hljs-subst">${quality.toString()}</span>`</span>) <span class="hljs-comment">// 품질 정보 추가 (예: q-75)</span>
  }
  params.<span class="hljs-title function_">set</span>(<span class="hljs-string">'aio'</span>, aioParams.<span class="hljs-title function_">join</span>(<span class="hljs-string">';'</span>))       <span class="hljs-comment">// 'aio' 파라미터를 새롭게 세팅. 여러 값은 ';'로 구분</span>
  <span class="hljs-keyword">return</span> url.<span class="hljs-property">href</span>                              <span class="hljs-comment">// 최종 변환된 URL 반환</span>
}
</code></pre>
<hr>
<h3>코드 설명</h3>
<ul>
<li><code>new URL(src, window.location.href)</code>: 상대경로나 절대경로로 전달된 <code>src</code>를 URL 객체로 변환합니다. 이렇게 하면 쉽게 쿼리 파라미터를 조작할 수 있죠.</li>
<li><code>params.getAll('aio')</code>: 하나의 쿼리 파라미터 키에 여러 값이 있을 때, 모두 배열로 가져올 수 있습니다. 예를 들어 <code>?aio=foo&#x26;aio=bar</code>면 <code>['foo','bar']</code>가 나오죠.</li>
<li><code>aioParams.push(...)</code>: 이미지의 너비와 품질 정보를 <code>'aio'</code> 파라미터 값 안에 추가해줍니다. 이렇게 하여 이미지 최적화 옵션을 전달하죠.</li>
<li>마지막으로 <code>params.set('aio', aioParams.join(';'))</code>: 여러 옵션을 세미콜론(;)으로 연결하여 하나의 <code>'aio'</code> 쿼리 파라미터로 변환합니다.</li>
</ul>
<hr>
<h3>추가 팁 🧐</h3>
<ul>
<li>
<p><strong>왜 'aio' 파라미터를 여러 개 합쳐서 넣을까?</strong></p>
<p>여러 옵션을 하나의 키(<code>aio</code>) 밑에 세미콜론으로 이어붙이면 URL이 깔끔해지고 쿼리 파라미터 키가 너무 많아지는 걸 방지할 수 있어요.</p>
</li>
<li>
<p><strong>quality 값이 없으면 어떻게 될까요?</strong></p>
<p>만약 <code>quality</code>가 주어지지 않으면 기본 품질 설정을 유지하거나 서버 쪽에서 기본값이 사용됩니다.</p>
</li>
<li>
<p><strong>더 다양한 옵션 추가하기</strong></p>
<p>필요하다면 <code>aioParams.push(...)</code> 부분을 확장해서 다른 이미지 최적화 옵션(예: 포맷 변환, 크롭 등)도 추가할 수 있어요.</p>
</li>
</ul>
<hr>
<p>이렇게 간단한 함수 하나로 이미지 URL을 동적으로 최적화할 수 있다는 게 Nitrogen AIO의 매력 중 하나랍니다! 만약 실제 프로젝트에 적용한다면, 이미지 로드시 항상 원하는 크기와 품질로 이미지를 불러오게 되어 사용자 경험이 한층 좋아질 거예요.</p>
<p>더 궁금한 점 있으면 언제든 물어보세요! 😊</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"2025년 최신 이미지 최적화 기술과 활용법 총정리","description":"","date":"2025-04-22 13:12","slug":"2025-04-22-images","content":"\n\n# 이미지 최적화, Next.js 내장 API 대신 클라우드 연동하기\n\n안녕하세요! 오늘은 Next.js에서 기본 제공하는 이미지 최적화 API 대신, 클라우드 제공업체의 이미지를 활용하는 방법에 대해 알아볼게요. \n\nNext.js 자체적으로 이미지 최적화 기능이 굉장히 편리하지만, 경우에 따라 AWS, Cloudinary, Imgix 같은 클라우드 서비스를 사용해야 할 때도 있죠. 그럴 땐 `next.config.js`에 약간의 설정만 추가하면 쉽게 커스터마이징 할 수 있어요.\n\n```js\nmodule.exports = {\n  images: {\n    loader: 'custom',         // 커스텀 로더를 사용하겠다는 뜻이에요\n    loaderFile: './my/image/loader.js', // 이미지 URL을 변환하는 함수가 담긴 파일 경로\n  },\n}\n```\n\n위 설정에서 `loaderFile`은 Next.js 프로젝트 루트 기준 상대 경로로 지정해야 해요. 그리고 이 파일은 기본(default)으로 함수를 내보내야 하죠. 이 함수는 이미지 URL을 문자열로 반환하게 만들면 됩니다. \n\n예를 들면, 내 클라우드 이미지 서비스 URL을 붙이는 방식으로 직접 조절할 수 있게 만드는 거죠! \n\n### 예시: loader.js 파일\n\n```js\nexport default function loader({ src, width, quality }) {\n  return `https://your-cloud-service.com/${src}?w=${width}\u0026q=${quality || 75}`;\n}\n```\n\n- `src`: 최종적으로 최적화할 이미지 경로\n- `width`: 요청하는 이미지의 너비 (Next.js가 필요에 따라 조절)\n- `quality`: 이미지 품질 (옵션, 없으면 기본값 75 사용)\n\n이런 방식으로 자체 클라우드 이미지 URL 생성 로직을 자유롭게 구현할 수 있답니다.\n\n---\n\n### 추가 팁!\n\n- 클라우드를 활용하면, 이미지 변환뿐 아니라 CDN을 통한 빠른 로딩까지 누릴 수 있어요.\n- AWS S3 + CloudFront, Cloudinary, Imgix 등이 대표적입니다.\n- `next/image` 컴포넌트와의 호환성을 유지하면서도 유연하게 커스터마이징 가능해요.\n- `loaderFile`을 지정하지 않고 `loader: 'imgix'`나 `loader: 'cloudinary'` 같은 기본 제공 로더를 쓸 수도 있어요.\n\n이미지 최적화 전략을 고민 중이라면, 내 프로젝트에 가장 잘 맞는 방식을 찾아보고 적용하는 게 중요합니다. Next.js의 확장성 덕분에, 다양한 클라우드 서비스와 쉽게 연동할 수 있으니 걱정하지 마세요!\n\n필요하면 다음 번에 각 클라우드 제공업체별 최적화 설정법도 소개할게요. 편하게 댓글로 요청해주세요~\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n안녕하세요 여러분! 오늘은 Next.js에서 이미지 최적화를 할 때 자주 사용되는 커스텀 이미지 로더 함수에 대해 이야기해볼게요.\n\n위 코드를 보면 `myImageLoader`라는 함수가 있어요. 요 함수는 다음과 같이 생겼죠:\n\n```js\n'use client'\n \nexport default function myImageLoader({ src, width, quality }) {\n  return `https://example.com/${src}?w=${width}\u0026q=${quality || 75}`\n}\n```\n\n### 이 함수가 하는 일?\n이 함수는 이미지 URL을 받아서 다음과 같이 변형해줘요.\n\n- `src`: 원본 이미지 경로\n- `width`: 요청하는 이미지 너비 (이미지 최적화를 위해)\n- `quality`: 이미지 품질. 만약 입력 안 하면 기본값 75로 설정됨\n\n즉, `https://example.com/이미지경로?w=이미지너비\u0026q=품질` 형태로 URL을 만들어서 커스텀 이미지 서버나 CDN에 최적화된 이미지를 요청하게 만드는 거예요.\n\n---\n\n### 어떻게 쓰나요?\n\n`next/image` 컴포넌트를 사용할 때 `loader` prop에 이 함수를 넘겨주면 돼요.\n\n```jsx\nimport Image from 'next/image'\nimport myImageLoader from './myImageLoader'\n\nexport default function MyComponent() {\n  return (\n    \u003cImage\n      loader={myImageLoader}\n      src=\"path/to/image.jpg\"\n      alt=\"My Image\"\n      width={800}\n      height={600}\n    /\u003e\n  )\n}\n```\n\n---\n\n### 여기서 알면 좋은 팁!\n\n- 이 loader 함수를 커스텀하고 싶으면 `use client` 지시어를 꼭 붙여서 클라이언트 컴포넌트로 만들어야 해요. 그래야 함수가 직렬화되어 클라이언트에서 잘 작동하거든요.\n- Next.js 내장 이미지 최적화 API가 어떻게 동작하는지도 잘 이해해두면 좋아요. 공식 문서에서 [Image Configuration Options](https://nextjs.org/docs/api-reference/next/image#configuration) 참고하시면 유용해요.\n\n---\n\n### 추가로 알아두면 좋은 점\n\n- 커스텀 로더를 사용하면, Next.js가 제공하는 기본 최적화 기능을 일부 포기하는 경우가 있어요. 그렇기 때문에 중간 CDN 혹은 별도 이미지 서버가 있을 때 최적화 문제를 직접 해결하고 싶을 때 사용하면 좋습니다.\n- 만약 여러 종류의 이미지를 각각 다른 서버에서 받는 경우, 로더 함수를 조금 더 복잡하게 만들어서 서버별 분기처리도 가능해요.\n\n그러니까 상황에 맞게 잘 활용하면 공식 next/image 기능을 더 유연하고 강력하게 쓸 수 있다는 뜻이죠!\n\n---\n\n요약한 표도 준비했어요.\n\n| 항목         | 설명                                                                                   |\n|--------------|----------------------------------------------------------------------------------------|\n| `src`        | 원본 이미지 경로                                                                        |\n| `width`      | 요청 이미지 너비, 최적화를 위해 사용                                                    |\n| `quality`    | 이미지 품질, 기본값은 75                                                                |\n| `loader` prop | next/image 컴포넌트에 커스텀 로더 함수를 전달하여 이미지 URL 생성 제어 가능              |\n| `use client` | 커스텀 로더가 클라이언트 컴포넌트가 되도록 지시어를 붙여야 함 (함수 직렬화 필요)        |\n\n---\n\n이런 커스텀 로더 활용법으로 Next.js 이미지를 나만의 방식으로 최적화해보세요! 다음에도 개발 꿀팁 가지고 올게요 :)\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n## 예제 로더 구성\n\n이미지 최적화 서비스를 만들 때, 각각의 CDN이나 이미지 서비스들이 요구하는 방식에 맞춰 URL을 만드는 게 중요해요. 여기서는 대표적인 서비스들의 로더 예시를 보여드릴게요.\n\n| 서비스명           | 설명                          |\n|-------------------|-----------------------------|\n| Akamai            | Akamai CDN 이미지 로더       |\n| AWS CloudFront    | AWS의 CDN 서비스             |\n| Cloudinary        | 이미지와 비디오 관리 플랫폼  |\n| Cloudflare        | 웹 최적화 및 CDN 서비스      |\n| Contentful        | 컨텐츠 관리 시스템           |\n| Fastly            | 고성능 CDN                   |\n| Gumlet            | 이미지 최적화 및 변환 서비스 |\n| ImageEngine       | 이미지 최적화 솔루션          |\n| Imgix             | 실시간 이미지 처리 서비스     |\n| PixelBin          | 이미지 최적화 플랫폼          |\n| Sanity            | 구조화된 컨텐츠 관리 시스템   |\n| Sirv              | 이미지 호스팅과 CDN           |\n| Supabase          | 오픈 소스 백엔드 플랫폼       |\n| Thumbor           | 오픈 소스 이미지 처리 서버    |\n| Imagekit          | 실시간 이미지 최적화 서비스   |\n| Nitrogen AIO      | AI 기반 이미지 최적화 도구    |\n\n---\n\n### Akamai 예시 코드\n\n```js\n// 공식 문서: https://techdocs.akamai.com/ivm/reference/test-images-on-demand\nexport default function akamaiLoader({ src, width, quality }) {\n  return `https://example.com/${src}?imwidth=${width}`\n}\n```\n\nAkamai는 URL에 `imwidth` 파라미터로 원하는 이미지 너비를 지정하는 식으로 이미지를 요청할 수 있어요. 이처럼 각 서비스마다 URL 포맷이 다르니, 서비스를 사용할 때는 꼭 공식 문서를 확인해 주세요!\n\n---\n\n### 조금 더 유용한 팁!\n\n- `quality` 파라미터를 지원하는 경우, 이미지 품질 조절도 가능한데요. 품질을 조절하면 파일 크기를 줄이면서도 적당한 화면 퀄리티를 유지할 수 있어요.\n- width, height를 명확히 지정하면 브라우저가 레이아웃을 미리 잡는데 도움이 돼서 LCP(최대 콘텐츠 표시 시간) 개선에 유리합니다.\n- 이미지를 다루는 서비스마다 URL 규칙이 다르기 때문에, 공통 인터페이스로 로더 함수를 만들어두면 코드 관리가 편해집니다.\n\n이미지 최적화는 웹 성능에 엄청 큰 영향을 미치니까, 여러분만의 로더를 만들어서 꼭 활용해보세요!\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n### AWS CloudFront 이미지 최적화 로더\n\nAWS CloudFront는 CDN 서비스로 유명하지만, 이미지 최적화 기능도 정말 강력해요. 위 코드 예제는 CloudFront의 이미지 최적화 API와 연동하는 간단한 로더 함수입니다.\n\n```js\nexport default function cloudfrontLoader({ src, width, quality }) {\n  const url = new URL(`https://example.com${src}`)\n  url.searchParams.set('format', 'auto') // 이미지 포맷을 자동으로 변환 (WebP, AVIF 등 지원)\n  url.searchParams.set('width', width.toString()) // 원하는 이미지 너비 지정\n  url.searchParams.set('quality', (quality || 75).toString()) // 퀄리티 조절 (기본 75)\n  return url.href\n}\n```\n\n- **format=auto**: 브라우저가 지원하는 최적의 이미지 포맷(WebP, AVIF 등)을 자동으로 선택해줍니다. 이걸 사용하면 무조건 파일 사이즈가 줄어들어 빠른 로딩이 가능해지죠.\n- **width**와 **quality** 설정으로 원하는 사이즈와 품질을 자유롭게 조절할 수 있어요.\n\n**팁!** AWS는 CloudFront 외에도 [AWS Image Handler](https://aws.amazon.com/solutions/implementations/image-handler/) 솔루션을 제공합니다. 요구사항에 따라 서버리스 방식으로 이미지 리사이징, 최적화를 구현할 수도 있어요.\n\n---\n\n### Cloudinary 이미지 최적화 로더\n\nCloudinary는 이미지 및 비디오 관리에서 거의 표준처럼 쓰이는 서비스인데요, 여기서도 자동 변환과 최적화 기능을 활용할 수 있습니다.\n\n```js\nexport default function cloudinaryLoader({ src, width, quality }) {\n  const params = ['f_auto', 'c_limit', `w_${width}`, `q_${quality || 'auto'}`]\n  return `https://example.com/${params.join(',')}${src}`\n}\n```\n\n- **f_auto**: 자동 이미지 포맷 변환\n- **c_limit**: 컨텐츠 제한 모드로 이미지가 지정한 width보다 크면 축소\n- **w_300**: 이미지 너비 300픽셀 설정 예시\n- **q_auto**: 이미지 퀄리티를 자동으로 최적화\n\nCloudinary는 다양한 트랜스포메이션 옵션을 제공하니, 공식 문서나 데모 페이지([링크](https://res.cloudinary.com/demo/image/upload/w_300,c_limit,q_auto/turtles.jpg))를 참고해서 꼭 활용해보세요!\n\n---\n\n### 한 줄 요약\n\n| 서비스       | 이미지 최적화 키워드                  | 특징 및 참고사항                                   |\n|--------------|-----------------------------------|--------------------------------------------------|\n| AWS CloudFront | `format=auto`, `width`, `quality` | AWS 인프라 연동, 서버리스 이미지 최적화 가능        |\n| Cloudinary     | `f_auto`, `c_limit`, `w_`, `q_`    | 다양한 이미지 변환/최적화 기능 제공, 쉽게 적용 가능 |\n\n---\n\n저도 예전에 이미지 최적화 때문에 엄청 고민했는데, 이런 CDN 서비스의 자동 최적화 기능을 이용하니 정말 편하더라고요. 직접 써보면서 서비스마다 조금씩 다른 파라미터와 특성을 비교해 보는 것도 좋은 공부가 될 거예요!\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n### Cloudflare 이미지 로더 함수\n\n```js\n// Docs: https://developers.cloudflare.com/images/transform-images\nexport default function cloudflareLoader({ src, width, quality }) {\n  const params = [`width=${width}`, `quality=${quality || 75}`, 'format=auto']\n  return `https://example.com/cdn-cgi/image/${params.join(',')}/${src}`\n}\n```\n\n여기서는 Cloudflare의 이미지 변환 API를 이용해서 이미지를 자동 포맷(webp, avif 등)으로 변경하고, 지정한 너비(width)와 품질(quality)를 적용해주고 있어요. quality는 지정하지 않으면 기본값 75로 처리하니 참고하세요.\n\n포인트는 URL에 쿼리스트링 대신 path 부분에 파라미터를 쉼표로 구분해서 넣는다는 거예요. Cloudflare 방식만 좀 특별하니 헷갈리지 말기!\n\n---\n\n### Contentful 이미지 로더 함수\n\n```js\n// Docs: https://www.contentful.com/developers/docs/references/images-api/\nexport default function contentfulLoader({ src, width, quality }) {\n  const url = new URL(`https://example.com${src}`)\n  url.searchParams.set('fm', 'webp')\n  url.searchParams.set('w', width.toString())\n  url.searchParams.set('q', (quality || 75).toString())\n  return url.href\n}\n```\n\nContentful 이미지 API를 쓸 때는 URLSearchParams를 이용해서 쿼리스트링을 붙여줘요. 여기서 `fm=webp`는 이미지 포맷을 webp로 강제 변환하는 옵션이고, `w`는 너비, `q`는 품질이에요.\n\nContentful은 URL에 쿼리파라미터를 붙이는 형식이라 Cloudflare와 달리 경로가 복잡하지 않아서 편리해요.\n\n---\n\n### 추가 팁\n\n- 이미지 최적화할 때는 가능한 한 `format=auto`나 `fm=webp` 같은 포맷 자동 변환 기능을 꼭 쓰는 게 좋아요. 요즘 브라우저 대부분이 webp, avif 등 고효율 포맷을 지원해서 페이지 로딩 속도가 훨씬 빨라진답니다.\n- 이미지 너비(width)를 꼭 지정해서 너무 큰 원본 이미지를 불필요하게 불러오지 않도록 하세요.\n- 품질(quality)을 75 정도로 설정하면 품질과 파일 크기의 균형이 잘 맞는 편이에요. 필요하다면 조절해보세요.\n\n이렇게 내가 쓰는 CDN이나 이미지 제공 서비스에 맞게 최적화 로더 함수를 만들어서 쓰면 Next.js 같은 프레임워크에서 자동으로 최적화된 이미지를 잘 뽑아줄 수 있어요. 한번 직접 만들어서 써보면 생각보다 간단하고 효과가 확실하니 도전해보세요!\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n### Fastly와 Gumlet 이미지 로더 비교\n\n이미지 최적화와 관련해서 Fastly와 Gumlet 두 가지 서비스를 많이 사용하죠. 여기서 각각의 간단한 커스텀 이미지 로더 함수 예제를 소개할게요. 이 함수들은 주로 Next.js 같은 프레임워크에서 이미지 URL을 동적으로 생성할 때 유용하게 쓰입니다.\n\n```js\n// Fastly 로더 예제\nexport default function fastlyLoader({ src, width, quality }) {\n  const url = new URL(`https://example.com${src}`)\n  url.searchParams.set('auto', 'webp') // 자동으로 WebP 포맷 변환\n  url.searchParams.set('width', width.toString()) // 이미지 너비 설정\n  url.searchParams.set('quality', (quality || 75).toString()) // 이미지 품질 설정 (기본 75)\n  return url.href\n}\n```\n\n```js\n// Gumlet 로더 예제\nexport default function gumletLoader({ src, width, quality }) {\n  const url = new URL(`https://example.com${src}`)\n  url.searchParams.set('format', 'auto') // 자동 포맷 변환\n  url.searchParams.set('w', width.toString()) // 이미지 너비 설정\n  url.searchParams.set('q', (quality || 75).toString()) // 이미지 품질 설정 (기본 75)\n  return url.href\n}\n```\n\n| 항목         | Fastly                              | Gumlet                              |\n|--------------|-----------------------------------|-----------------------------------|\n| 포맷 자동변환 | `auto=webp`                       | `format=auto`                     |\n| 이미지 너비   | `width`                           | `w`                               |\n| 품질 설정    | `quality` (기본값 75)             | `q` (기본값 75)                   |\n| 공식 문서    | [Fastly IO Docs](https://developer.fastly.com/reference/io/) | [Gumlet Docs](https://docs.gumlet.com/reference/image-transform-size) |\n\n---\n\n### 빠르게 정리하는 팁!\n\n- 두 서비스 모두 이미지 포맷을 자동변환해서 WebP 같은 최신 포맷으로 최적화할 수 있어요.\n- 파라미터 명칭이 조금 다르니 사용할 때 코드를 잘 확인해야 합니다.\n- `quality` 기본값을 75로 맞추는 건 적당한 품질 유지와 용량 절약 균형을 위해 많이 쓰입니다.\n- URL 생성시 `new URL`을 쓰면 쿼리 파라미터 세팅이 편해서 추천해요.\n\n이렇게 커스텀 로더를 쓰면 내 서비스에 맞춰 최적의 이미지 URL을 자동으로 만들어주니까 퍼포먼스에 큰 도움이 됩니다. 나중에 더 심화된 옵션들도 활용해보면 좋아요!\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n### ImageEngine\n\n```js\n// 공식 문서: https://support.imageengine.io/hc/en-us/articles/360058880672-Directives\nexport default function imageengineLoader({ src, width, quality }) {\n  const compression = 100 - (quality || 50)  // quality가 없으면 기본 50으로 지정 후 압축률 계산\n  const params = [`w_${width}`, `cmpr_${compression}`]\n  return `https://example.com${src}?imgeng=/${params.join('/')}`\n}\n```\n\nImageEngine은 이미지의 크기 조절과 압축률을 URL 파라미터로 조절해서 최적화해주는 서비스입니다. 위 코드에서는 너비(width)와 품질(quality)를 받아서 적절한 압축 비율로 변환하고, 이 매개변수를 URL에 붙여서 반환해줍니다.\n\n- `w_{width}` : 이미지 너비 지정\n- `cmpr_{value}` : 압축률 지정 (100에서 quality 값을 뺀 값)\n\n\u003e 참고로, quality 값을 0~100까지 넘겨주면 압축률을 구할 수 있어서 좀 더 세밀하게 이미지 품질과 용량을 조절할 수 있답니다.\n\n---\n\n### Imgix\n\n```js\n// 예제 이미지: https://static.imgix.net/daisy.png?format=auto\u0026fit=max\u0026w=300\nexport default function imgixLoader({ src, width, quality }) {\n  const url = new URL(`https://example.com${src}`)\n  const params = url.searchParams\n  params.set('auto', params.getAll('auto').join(',') || 'format')  // 자동 포맷 설정\n  params.set('fit', params.get('fit') || 'max')                    // 이미지 fitting 방식 지정\n  params.set('w', params.get('w') || width.toString())             // 너비 지정\n  params.set('q', (quality || 50).toString())                      // 품질 지정\n  return url.href\n}\n```\n\nImgix는 매우 인기있는 이미지 최적화 및 제공 서비스입니다. 위 예시 코드는 URL 객체를 활용해 기존 쿼리 파라미터를 유지하면서 자동 포맷, 맞춤 크기, 품질을 지정해서 반환하고 있어요.\n\n- `auto=format` : 브라우저에 최적화된 형식으로 자동 변환 (webp, jpeg 등)\n- `fit=max` : 이미지 fitting 방법으로 최대 크기까지 맞춤 (crop이나 clip도 가능해요)\n- `w` : 너비(width) 지정\n- `q` : 품질(quality) 지정 (기본값 50)\n\n\u003e URL 객체를 쓰는 이유? 쿼리 파라미터를 쉽게 조작하면서 중복 제거하고 올바른 URL을 만들기 위해서에요.\n\n### 한 번에 비교해보는 주요 파라미터\n\n| 서비스    | 주요 파라미터        | 설명                                   |\n|-----------|---------------------|--------------------------------------|\n| ImageEngine | `w_{width}`         | 이미지 너비 지정                      |\n|           | `cmpr_{compression}` | 압축률 지정 (100 - quality)           |\n| Imgix     | `w`                  | 이미지 너비 지정                      |\n|           | `q`                  | 품질(quality) 지정                    |\n|           | `auto=format`        | 자동 포맷 변환                        |\n|           | `fit`                | 이미지 fitting 방식                   |\n\n---\n\n### 참고 팁\n- 이미지 최적화할 때는 무조건 품질을 최고로 올리는 것보다, 용량과 품질의 적절한 균형점을 찾는 게 중요해요.\n- 'quality' 값을 너무 낮게 하면 이미지가 뭉개지고, 너무 높이면 로딩 속도가 느려지니까요. 보통 50~70 사이 조절이 많이 쓰입니다.\n- 또한, `auto=format` 같은 기능을 지원하는 서비스는 유용해요. 브라우저에 맞는 최적 포맷으로 변환해주거든요.\n\n기본적인 사용법과 개념부터 잡고, 필요에 따라 각 서비스 공식 문서를 참고해서 더 세밀하게 조정해보길 추천드립니다!\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n### PixelBin 이미지 로더 함수\n\n```js\n// Doc (Resize): https://www.pixelbin.io/docs/transformations/basic/resize/#width-w\n// Doc (Optimise): https://www.pixelbin.io/docs/optimizations/quality/#image-quality-when-delivering\n// Doc (Auto Format Delivery): https://www.pixelbin.io/docs/optimizations/format/#automatic-format-selection-with-f_auto-url-parameter\nexport default function pixelBinLoader({ src, width, quality }) {\n  const name = '\u003cyour-cloud-name\u003e'\n  const opt = `t.resize(w:${width})~t.compress(q:${quality || 75})`\n  return `https://cdn.pixelbin.io/v2/${name}/${opt}/${src}?f_auto=true`\n}\n```\n\nPixelBin은 이미지 크기 조절, 압축, 포맷 자동 변환 등을 손쉽게 적용할 수 있게 해주는 이미지 CDN 서비스예요. 위 코드에서 `width`와 `quality`를 받아서 이미지를 최적화된 형태로 반환합니다.\n\n- `t.resize(w:${width})`: 원하는 가로 폭으로 이미지 크기를 조절\n- `t.compress(q:${quality || 75})`: 이미지 품질을 0~100으로 지정하며 기본값은 75\n- `?f_auto=true`: 브라우저에 맞춰 최적의 이미지 포맷(WebP, AVIF 등)을 자동 선택해줍니다.\n\n직접 클라우드 이름(`\u003cyour-cloud-name\u003e`)을 넣어서 사용하세요. PixelBin 덕분에 이미지 최적화가 훨씬 간편해져서 페이지 속도 개선에 아주 좋아요!\n\n---\n\n### Sanity 이미지 로더 함수\n\n```js\n// Docs: https://www.sanity.io/docs/image-urls\nexport default function sanityLoader({ src, width, quality }) {\n  const prj = 'zp7mbokg'\n  const dataset = 'production'\n  const url = new URL(`https://cdn.sanity.io/images/${prj}/${dataset}${src}`)\n  url.searchParams.set('auto', 'format')\n  url.searchParams.set('fit', 'max')\n  url.searchParams.set('w', width.toString())\n  if (quality) {\n    url.searchParams.set('q', quality.toString())\n  }\n  return url.href\n}\n```\n\nSanity는 헤드리스 CMS답게 이미지를 효과적으로 다룰 수 있는 내장 이미지 CDN을 제공합니다. 위 코드는 프로젝트 ID와 데이터셋만 맞춰주면 원하는 크기와 품질로 이미지를 요청할 수 있어요.\n\n- `auto=format`: 자동으로 최적의 이미지 포맷을 선택\n- `fit=max`: 지정한 크기 내에서 이미지 크기를 최대한 맞춤\n- `w`: 가로 폭 지정\n- `q`: 이미지 품질 지정 (optional)\n\nSanity를 쓰면서 매번 직접 URL 다루기 귀찮다면 이렇게 로더 함수로 한 번 만들어 두면 훨씬 편하겠죠?\n\n---\n\n### 추가 팁!\n\n요즘은 다양한 디바이스가 많으니까 이미지 사이즈와 포맷 최적화는 필수가 됐어요. 위 두 예시 모두 **자동 포맷 변환**을 지원하는데, 이런 기능을 활용하면 꼭 WebP, AVIF 같은 최신 포맷을 개별 지원하지 않아도 되니 개발이 한결 수월해진답니다.\n\n또한, `quality` 값을 너무 높게 잡으면 페이지 로딩 속도가 늦어지고, 너무 낮게 하면 화질이 떨어질 수 있으니 적절한 타협이 중요해요. 보통 70~80 정도가 밸런스가 잘 맞는 편입니다. 실제 서비스에 적용 전에는 꼭 여러 디바이스에서 테스트해보세요!\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n### Sirv 이미지 로더\n\nSirv는 이미지 최적화와 다이나믹 이미징을 지원하는 서비스에요. 위 코드를 보면, 이미지 URL에 필요한 파라미터를 추가해서 최적화된 이미지를 불러올 수 있게 만들어두었죠.\n\n- `format` 파라미터는 이미지 형식을 지정하는데, 기본값은 `'optimal'`로 설정해서 브라우저에 맞는 포맷을 자동으로 선택합니다.\n- `w`는 이미지의 너비를 의미하고, 값을 넣어주지 않았다면 `width` 매개변수에서 받아 활용해요.\n- `q`는 이미지 품질(quality) 숫자로, 기본값 85를 사용하지만 필요에 따라 조절 가능해요.\n\n```js\nexport default function sirvLoader({ src, width, quality }) {\n  const url = new URL(`https://example.com${src}`)\n  const params = url.searchParams\n  params.set('format', params.getAll('format').join(',') || 'optimal')\n  params.set('w', params.get('w') || width.toString())\n  params.set('q', (quality || 85).toString())\n  return url.href\n}\n```\n\n### Supabase 이미지 로더\n\nSupabase의 스토리지를 이용해 이미지 변환 기능을 쓸 때는 URL 파라미터로 `width`와 `quality`을 넣으면 돼요.\n\n- `width` 파라미터로 원하는 이미지 너비를 지정하고,\n- `quality`를 통해 이미지 압축 정도를 조절할 수 있어요. 기본 75로 설정되어 있습니다.\n\n```js\nexport default function supabaseLoader({ src, width, quality }) {\n  const url = new URL(`https://example.com${src}`)\n  url.searchParams.set('width', width.toString())\n  url.searchParams.set('quality', (quality || 75).toString())\n  return url.href\n}\n```\n\n---\n\n### 추가 팁  — Next.js와 함께 쓸 때\n\n이 두 로더는 Next.js의 `next/image` 컴포넌트에서 `loader` 옵션으로 지정해서 쓸 수 있어요. 이렇게 하면 이미지 최적화가 훨씬 간편해지죠.\n\n```js\nimport Image from 'next/image'\nimport sirvLoader from './sirvLoader'\n\nexport default function MyComponent() {\n  return (\n    \u003cImage\n      loader={sirvLoader}\n      src=\"/my-image.png\"\n      width={800}\n      height={600}\n      alt=\"Example image\"\n    /\u003e\n  )\n}\n```\n\nSupabase도 마찬가지구요.\n\n만약 여러분이 이미지 최적화나 변환 기능을 직접 구현하거나 타 서비스와 연동할 계획이라면, 이런 커스텀 로더 패턴을 잘 기억해 두는 게 좋아요. 서비스마다 요구하는 쿼리 파라미터가 다르니 꼭 공식 문서를 참고하세요!\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n### Thumbor와 ImageKit.io 이미지 로더 함수 비교\n\n안녕하세요! 오늘은 이미지 최적화 서비스인 Thumbor와 ImageKit.io를 사용할 때 자주 쓰이는 이미지 URL 생성 함수 예제를 소개할게요. 여러분이 Next.js 같은 프레임워크에서 커스텀 이미지 로더를 만들 때 참고하면 좋아요.\n\n---\n\n#### Thumbor\n\n```js\n// 공식 문서: https://thumbor.readthedocs.io/en/latest/\nexport default function thumborLoader({ src, width, quality }) {\n  const params = [`${width}x0`, `filters:quality(${quality || 75})`]\n  return `https://example.com${params.join('/')}${src}`\n}\n```\n\n- 사용법: \n  - `width`만 지정하고 높이(height)는 0으로 고정해서 비율을 유지합니다.\n  - `quality`는 필터로 적용하며 기본값은 75입니다.\n- Thumbor는 URL 구조가 `/widthxheight/filters:.../image_path` 형식이에요.\n- 실제 사용할 때 `https://example.com` 대신 본인 서버 주소로 바꾸시면 됩니다.\n\n---\n\n#### ImageKit.io\n\n```js\n// 공식 문서: https://imagekit.io/docs/image-transformation\nexport default function imageKitLoader({ src, width, quality }) {\n  const params = [`w-${width}`, `q-${quality || 80}`]\n  return `https://ik.imagekit.io/your_imagekit_id/${src}?tr=${params.join(',')}`\n}\n```\n\n- 사용법:\n  - URL 쿼리 스트링 `?tr=` 뒤에 변환 옵션을 쉼표로 구분해서 넣는 방식이에요.\n  - `w-`는 너비 지정, `q-`는 품질 설정이며 기본값은 80입니다.\n- `your_imagekit_id`를 본인 계정에 맞게 바꿔 주세요.\n\n---\n\n### 비교 및 팁\n\n| 특징            | Thumbor                                | ImageKit.io                         |\n|-----------------|--------------------------------------|-----------------------------------|\n| URL 형식        | `/widthxheight/filters:value/image`  | `?tr=options` 쿼리 스트링           |\n| 품질 기본값      | 75                                   | 80                                |\n| 비율 유지 방식   | 높이 0으로 설정해서 자동 맞춤         | 너비만 지정, 자동 비율 유지           |\n| 공식 문서 링크    | [Thumbor Docs](https://thumbor.readthedocs.io/en/latest/) | [ImageKit Docs](https://imagekit.io/docs/image-transformation) |\n\n---\n\n### 한마디\n\n이미지 최적화는 페이지 로딩 속도에 직접적인 영향을 미치기 때문에 꼭 신경 써야 하는 부분이에요. Thumbor와 ImageKit.io 모두 강력한 기능을 제공하니 프로젝트 상황에 맞게 선택하세요. 특히 ImageKit은 CDN 연동이 원활하고, Thumbor는 직접 서버에서 동작하므로 관리 편의성이 달라요.\n\n궁금한 점 있으면 댓글로 물어봐 주세요! 다음에도 더 유용한 개발 정보로 찾아올게요~\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n### Nitrogen AIO\n\n안녕하세요! 오늘은 Nitrogen AIO의 `aioLoader` 함수를 한번 같이 살펴볼게요. 이 코드는 이미지 URL을 받아서, 파라미터를 조작해 최적화된 이미지 URL을 자동으로 만들어주는 역할을 합니다.\n\n```js\n// Docs: https://docs.n7.io/aio/intergrations/\nexport default function aioLoader({ src, width, quality }) {\n  const url = new URL(src, window.location.href) // 주어진 src를 기반으로 URL 객체 생성\n  const params = url.searchParams             // URL의 쿼리 파라미터 접근\n  const aioParams = params.getAll('aio')      // 'aio' 키에 해당하는 모든 값 가져오기\n  aioParams.push(`w-${width}`)                 // 너비 정보 추가 (예: w-800)\n  if (quality) {\n    aioParams.push(`q-${quality.toString()}`) // 품질 정보 추가 (예: q-75)\n  }\n  params.set('aio', aioParams.join(';'))       // 'aio' 파라미터를 새롭게 세팅. 여러 값은 ';'로 구분\n  return url.href                              // 최종 변환된 URL 반환\n}\n```\n\n---\n\n### 코드 설명\n\n- `new URL(src, window.location.href)`: 상대경로나 절대경로로 전달된 `src`를 URL 객체로 변환합니다. 이렇게 하면 쉽게 쿼리 파라미터를 조작할 수 있죠.\n- `params.getAll('aio')`: 하나의 쿼리 파라미터 키에 여러 값이 있을 때, 모두 배열로 가져올 수 있습니다. 예를 들어 `?aio=foo\u0026aio=bar`면 `['foo','bar']`가 나오죠.\n- `aioParams.push(...)`: 이미지의 너비와 품질 정보를 `'aio'` 파라미터 값 안에 추가해줍니다. 이렇게 하여 이미지 최적화 옵션을 전달하죠.\n- 마지막으로 `params.set('aio', aioParams.join(';'))`: 여러 옵션을 세미콜론(;)으로 연결하여 하나의 `'aio'` 쿼리 파라미터로 변환합니다.\n\n---\n\n### 추가 팁 🧐\n\n- **왜 'aio' 파라미터를 여러 개 합쳐서 넣을까?**\n\n  여러 옵션을 하나의 키(`aio`) 밑에 세미콜론으로 이어붙이면 URL이 깔끔해지고 쿼리 파라미터 키가 너무 많아지는 걸 방지할 수 있어요.\n\n- **quality 값이 없으면 어떻게 될까요?**\n\n  만약 `quality`가 주어지지 않으면 기본 품질 설정을 유지하거나 서버 쪽에서 기본값이 사용됩니다.\n\n- **더 다양한 옵션 추가하기**\n\n  필요하다면 `aioParams.push(...)` 부분을 확장해서 다른 이미지 최적화 옵션(예: 포맷 변환, 크롭 등)도 추가할 수 있어요.\n\n---\n\n이렇게 간단한 함수 하나로 이미지 URL을 동적으로 최적화할 수 있다는 게 Nitrogen AIO의 매력 중 하나랍니다! 만약 실제 프로젝트에 적용한다면, 이미지 로드시 항상 원하는 크기와 품질로 이미지를 불러오게 되어 사용자 경험이 한층 좋아질 거예요.\n\n더 궁금한 점 있으면 언제든 물어보세요! 😊","ogImage":{"url":"/TIL/assets/img/nextjs.png"},"coverImage":"/TIL/assets/img/nextjs.png","tag":["Tech"],"readingTime":24},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003ch1\u003e이미지 최적화, Next.js 내장 API 대신 클라우드 연동하기\u003c/h1\u003e\n\u003cp\u003e안녕하세요! 오늘은 Next.js에서 기본 제공하는 이미지 최적화 API 대신, 클라우드 제공업체의 이미지를 활용하는 방법에 대해 알아볼게요.\u003c/p\u003e\n\u003cp\u003eNext.js 자체적으로 이미지 최적화 기능이 굉장히 편리하지만, 경우에 따라 AWS, Cloudinary, Imgix 같은 클라우드 서비스를 사용해야 할 때도 있죠. 그럴 땐 \u003ccode\u003enext.config.js\u003c/code\u003e에 약간의 설정만 추가하면 쉽게 커스터마이징 할 수 있어요.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable language_\"\u003emodule\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eexports\u003c/span\u003e = {\n  \u003cspan class=\"hljs-attr\"\u003eimages\u003c/span\u003e: {\n    \u003cspan class=\"hljs-attr\"\u003eloader\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'custom'\u003c/span\u003e,         \u003cspan class=\"hljs-comment\"\u003e// 커스텀 로더를 사용하겠다는 뜻이에요\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eloaderFile\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'./my/image/loader.js'\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// 이미지 URL을 변환하는 함수가 담긴 파일 경로\u003c/span\u003e\n  },\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e위 설정에서 \u003ccode\u003eloaderFile\u003c/code\u003e은 Next.js 프로젝트 루트 기준 상대 경로로 지정해야 해요. 그리고 이 파일은 기본(default)으로 함수를 내보내야 하죠. 이 함수는 이미지 URL을 문자열로 반환하게 만들면 됩니다.\u003c/p\u003e\n\u003cp\u003e예를 들면, 내 클라우드 이미지 서비스 URL을 붙이는 방식으로 직접 조절할 수 있게 만드는 거죠!\u003c/p\u003e\n\u003ch3\u003e예시: loader.js 파일\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eloader\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e{ src, width, quality }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e`https://your-cloud-service.com/\u003cspan class=\"hljs-subst\"\u003e${src}\u003c/span\u003e?w=\u003cspan class=\"hljs-subst\"\u003e${width}\u003c/span\u003e\u0026#x26;q=\u003cspan class=\"hljs-subst\"\u003e${quality || \u003cspan class=\"hljs-number\"\u003e75\u003c/span\u003e}\u003c/span\u003e`\u003c/span\u003e;\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003esrc\u003c/code\u003e: 최종적으로 최적화할 이미지 경로\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ewidth\u003c/code\u003e: 요청하는 이미지의 너비 (Next.js가 필요에 따라 조절)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003equality\u003c/code\u003e: 이미지 품질 (옵션, 없으면 기본값 75 사용)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e이런 방식으로 자체 클라우드 이미지 URL 생성 로직을 자유롭게 구현할 수 있답니다.\u003c/p\u003e\n\u003chr\u003e\n\u003ch3\u003e추가 팁!\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e클라우드를 활용하면, 이미지 변환뿐 아니라 CDN을 통한 빠른 로딩까지 누릴 수 있어요.\u003c/li\u003e\n\u003cli\u003eAWS S3 + CloudFront, Cloudinary, Imgix 등이 대표적입니다.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003enext/image\u003c/code\u003e 컴포넌트와의 호환성을 유지하면서도 유연하게 커스터마이징 가능해요.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eloaderFile\u003c/code\u003e을 지정하지 않고 \u003ccode\u003eloader: 'imgix'\u003c/code\u003e나 \u003ccode\u003eloader: 'cloudinary'\u003c/code\u003e 같은 기본 제공 로더를 쓸 수도 있어요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e이미지 최적화 전략을 고민 중이라면, 내 프로젝트에 가장 잘 맞는 방식을 찾아보고 적용하는 게 중요합니다. Next.js의 확장성 덕분에, 다양한 클라우드 서비스와 쉽게 연동할 수 있으니 걱정하지 마세요!\u003c/p\u003e\n\u003cp\u003e필요하면 다음 번에 각 클라우드 제공업체별 최적화 설정법도 소개할게요. 편하게 댓글로 요청해주세요~\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e안녕하세요 여러분! 오늘은 Next.js에서 이미지 최적화를 할 때 자주 사용되는 커스텀 이미지 로더 함수에 대해 이야기해볼게요.\u003c/p\u003e\n\u003cp\u003e위 코드를 보면 \u003ccode\u003emyImageLoader\u003c/code\u003e라는 함수가 있어요. 요 함수는 다음과 같이 생겼죠:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-string\"\u003e'use client'\u003c/span\u003e\n \n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003emyImageLoader\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e{ src, width, quality }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e`https://example.com/\u003cspan class=\"hljs-subst\"\u003e${src}\u003c/span\u003e?w=\u003cspan class=\"hljs-subst\"\u003e${width}\u003c/span\u003e\u0026#x26;q=\u003cspan class=\"hljs-subst\"\u003e${quality || \u003cspan class=\"hljs-number\"\u003e75\u003c/span\u003e}\u003c/span\u003e`\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003e이 함수가 하는 일?\u003c/h3\u003e\n\u003cp\u003e이 함수는 이미지 URL을 받아서 다음과 같이 변형해줘요.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003esrc\u003c/code\u003e: 원본 이미지 경로\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ewidth\u003c/code\u003e: 요청하는 이미지 너비 (이미지 최적화를 위해)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003equality\u003c/code\u003e: 이미지 품질. 만약 입력 안 하면 기본값 75로 설정됨\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e즉, \u003ccode\u003ehttps://example.com/이미지경로?w=이미지너비\u0026#x26;q=품질\u003c/code\u003e 형태로 URL을 만들어서 커스텀 이미지 서버나 CDN에 최적화된 이미지를 요청하게 만드는 거예요.\u003c/p\u003e\n\u003chr\u003e\n\u003ch3\u003e어떻게 쓰나요?\u003c/h3\u003e\n\u003cp\u003e\u003ccode\u003enext/image\u003c/code\u003e 컴포넌트를 사용할 때 \u003ccode\u003eloader\u003c/code\u003e prop에 이 함수를 넘겨주면 돼요.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-jsx\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eImage\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'next/image'\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e myImageLoader \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'./myImageLoader'\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eMyComponent\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eImage\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003eloader\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{myImageLoader}\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003esrc\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"path/to/image.jpg\"\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003ealt\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"My Image\"\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003ewidth\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{800}\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003eheight\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{600}\u003c/span\u003e\n    /\u003e\u003c/span\u003e\u003c/span\u003e\n  )\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003ch3\u003e여기서 알면 좋은 팁!\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e이 loader 함수를 커스텀하고 싶으면 \u003ccode\u003euse client\u003c/code\u003e 지시어를 꼭 붙여서 클라이언트 컴포넌트로 만들어야 해요. 그래야 함수가 직렬화되어 클라이언트에서 잘 작동하거든요.\u003c/li\u003e\n\u003cli\u003eNext.js 내장 이미지 최적화 API가 어떻게 동작하는지도 잘 이해해두면 좋아요. 공식 문서에서 \u003ca href=\"https://nextjs.org/docs/api-reference/next/image#configuration\" rel=\"nofollow\" target=\"_blank\"\u003eImage Configuration Options\u003c/a\u003e 참고하시면 유용해요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch3\u003e추가로 알아두면 좋은 점\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e커스텀 로더를 사용하면, Next.js가 제공하는 기본 최적화 기능을 일부 포기하는 경우가 있어요. 그렇기 때문에 중간 CDN 혹은 별도 이미지 서버가 있을 때 최적화 문제를 직접 해결하고 싶을 때 사용하면 좋습니다.\u003c/li\u003e\n\u003cli\u003e만약 여러 종류의 이미지를 각각 다른 서버에서 받는 경우, 로더 함수를 조금 더 복잡하게 만들어서 서버별 분기처리도 가능해요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e그러니까 상황에 맞게 잘 활용하면 공식 next/image 기능을 더 유연하고 강력하게 쓸 수 있다는 뜻이죠!\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003e요약한 표도 준비했어요.\u003c/p\u003e\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003ctable\u003e\u003cthead\u003e\u003ctr\u003e\u003cth\u003e항목\u003c/th\u003e\u003cth\u003e설명\u003c/th\u003e\u003c/tr\u003e\u003c/thead\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd\u003e\u003ccode\u003esrc\u003c/code\u003e\u003c/td\u003e\u003ctd\u003e원본 이미지 경로\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003ccode\u003ewidth\u003c/code\u003e\u003c/td\u003e\u003ctd\u003e요청 이미지 너비, 최적화를 위해 사용\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003ccode\u003equality\u003c/code\u003e\u003c/td\u003e\u003ctd\u003e이미지 품질, 기본값은 75\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003ccode\u003eloader\u003c/code\u003e prop\u003c/td\u003e\u003ctd\u003enext/image 컴포넌트에 커스텀 로더 함수를 전달하여 이미지 URL 생성 제어 가능\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003ccode\u003euse client\u003c/code\u003e\u003c/td\u003e\u003ctd\u003e커스텀 로더가 클라이언트 컴포넌트가 되도록 지시어를 붙여야 함 (함수 직렬화 필요)\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\u003chr\u003e\n\u003cp\u003e이런 커스텀 로더 활용법으로 Next.js 이미지를 나만의 방식으로 최적화해보세요! 다음에도 개발 꿀팁 가지고 올게요 :)\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch2\u003e예제 로더 구성\u003c/h2\u003e\n\u003cp\u003e이미지 최적화 서비스를 만들 때, 각각의 CDN이나 이미지 서비스들이 요구하는 방식에 맞춰 URL을 만드는 게 중요해요. 여기서는 대표적인 서비스들의 로더 예시를 보여드릴게요.\u003c/p\u003e\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003ctable\u003e\u003cthead\u003e\u003ctr\u003e\u003cth\u003e서비스명\u003c/th\u003e\u003cth\u003e설명\u003c/th\u003e\u003c/tr\u003e\u003c/thead\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd\u003eAkamai\u003c/td\u003e\u003ctd\u003eAkamai CDN 이미지 로더\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003eAWS CloudFront\u003c/td\u003e\u003ctd\u003eAWS의 CDN 서비스\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003eCloudinary\u003c/td\u003e\u003ctd\u003e이미지와 비디오 관리 플랫폼\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003eCloudflare\u003c/td\u003e\u003ctd\u003e웹 최적화 및 CDN 서비스\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003eContentful\u003c/td\u003e\u003ctd\u003e컨텐츠 관리 시스템\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003eFastly\u003c/td\u003e\u003ctd\u003e고성능 CDN\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003eGumlet\u003c/td\u003e\u003ctd\u003e이미지 최적화 및 변환 서비스\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003eImageEngine\u003c/td\u003e\u003ctd\u003e이미지 최적화 솔루션\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003eImgix\u003c/td\u003e\u003ctd\u003e실시간 이미지 처리 서비스\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003ePixelBin\u003c/td\u003e\u003ctd\u003e이미지 최적화 플랫폼\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003eSanity\u003c/td\u003e\u003ctd\u003e구조화된 컨텐츠 관리 시스템\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003eSirv\u003c/td\u003e\u003ctd\u003e이미지 호스팅과 CDN\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003eSupabase\u003c/td\u003e\u003ctd\u003e오픈 소스 백엔드 플랫폼\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003eThumbor\u003c/td\u003e\u003ctd\u003e오픈 소스 이미지 처리 서버\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003eImagekit\u003c/td\u003e\u003ctd\u003e실시간 이미지 최적화 서비스\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003eNitrogen AIO\u003c/td\u003e\u003ctd\u003eAI 기반 이미지 최적화 도구\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\u003chr\u003e\n\u003ch3\u003eAkamai 예시 코드\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// 공식 문서: https://techdocs.akamai.com/ivm/reference/test-images-on-demand\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eakamaiLoader\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e{ src, width, quality }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e`https://example.com/\u003cspan class=\"hljs-subst\"\u003e${src}\u003c/span\u003e?imwidth=\u003cspan class=\"hljs-subst\"\u003e${width}\u003c/span\u003e`\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAkamai는 URL에 \u003ccode\u003eimwidth\u003c/code\u003e 파라미터로 원하는 이미지 너비를 지정하는 식으로 이미지를 요청할 수 있어요. 이처럼 각 서비스마다 URL 포맷이 다르니, 서비스를 사용할 때는 꼭 공식 문서를 확인해 주세요!\u003c/p\u003e\n\u003chr\u003e\n\u003ch3\u003e조금 더 유용한 팁!\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003equality\u003c/code\u003e 파라미터를 지원하는 경우, 이미지 품질 조절도 가능한데요. 품질을 조절하면 파일 크기를 줄이면서도 적당한 화면 퀄리티를 유지할 수 있어요.\u003c/li\u003e\n\u003cli\u003ewidth, height를 명확히 지정하면 브라우저가 레이아웃을 미리 잡는데 도움이 돼서 LCP(최대 콘텐츠 표시 시간) 개선에 유리합니다.\u003c/li\u003e\n\u003cli\u003e이미지를 다루는 서비스마다 URL 규칙이 다르기 때문에, 공통 인터페이스로 로더 함수를 만들어두면 코드 관리가 편해집니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e이미지 최적화는 웹 성능에 엄청 큰 영향을 미치니까, 여러분만의 로더를 만들어서 꼭 활용해보세요!\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch3\u003eAWS CloudFront 이미지 최적화 로더\u003c/h3\u003e\n\u003cp\u003eAWS CloudFront는 CDN 서비스로 유명하지만, 이미지 최적화 기능도 정말 강력해요. 위 코드 예제는 CloudFront의 이미지 최적화 API와 연동하는 간단한 로더 함수입니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ecloudfrontLoader\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e{ src, width, quality }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e url = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eURL\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e`https://example.com\u003cspan class=\"hljs-subst\"\u003e${src}\u003c/span\u003e`\u003c/span\u003e)\n  url.\u003cspan class=\"hljs-property\"\u003esearchParams\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eset\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'format'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'auto'\u003c/span\u003e) \u003cspan class=\"hljs-comment\"\u003e// 이미지 포맷을 자동으로 변환 (WebP, AVIF 등 지원)\u003c/span\u003e\n  url.\u003cspan class=\"hljs-property\"\u003esearchParams\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eset\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'width'\u003c/span\u003e, width.\u003cspan class=\"hljs-title function_\"\u003etoString\u003c/span\u003e()) \u003cspan class=\"hljs-comment\"\u003e// 원하는 이미지 너비 지정\u003c/span\u003e\n  url.\u003cspan class=\"hljs-property\"\u003esearchParams\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eset\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'quality'\u003c/span\u003e, (quality || \u003cspan class=\"hljs-number\"\u003e75\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003etoString\u003c/span\u003e()) \u003cspan class=\"hljs-comment\"\u003e// 퀄리티 조절 (기본 75)\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e url.\u003cspan class=\"hljs-property\"\u003ehref\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eformat=auto\u003c/strong\u003e: 브라우저가 지원하는 최적의 이미지 포맷(WebP, AVIF 등)을 자동으로 선택해줍니다. 이걸 사용하면 무조건 파일 사이즈가 줄어들어 빠른 로딩이 가능해지죠.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ewidth\u003c/strong\u003e와 \u003cstrong\u003equality\u003c/strong\u003e 설정으로 원하는 사이즈와 품질을 자유롭게 조절할 수 있어요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003e팁!\u003c/strong\u003e AWS는 CloudFront 외에도 \u003ca href=\"https://aws.amazon.com/solutions/implementations/image-handler/\" rel=\"nofollow\" target=\"_blank\"\u003eAWS Image Handler\u003c/a\u003e 솔루션을 제공합니다. 요구사항에 따라 서버리스 방식으로 이미지 리사이징, 최적화를 구현할 수도 있어요.\u003c/p\u003e\n\u003chr\u003e\n\u003ch3\u003eCloudinary 이미지 최적화 로더\u003c/h3\u003e\n\u003cp\u003eCloudinary는 이미지 및 비디오 관리에서 거의 표준처럼 쓰이는 서비스인데요, 여기서도 자동 변환과 최적화 기능을 활용할 수 있습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ecloudinaryLoader\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e{ src, width, quality }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e params = [\u003cspan class=\"hljs-string\"\u003e'f_auto'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'c_limit'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e`w_\u003cspan class=\"hljs-subst\"\u003e${width}\u003c/span\u003e`\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e`q_\u003cspan class=\"hljs-subst\"\u003e${quality || \u003cspan class=\"hljs-string\"\u003e'auto'\u003c/span\u003e}\u003c/span\u003e`\u003c/span\u003e]\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e`https://example.com/\u003cspan class=\"hljs-subst\"\u003e${params.join(\u003cspan class=\"hljs-string\"\u003e','\u003c/span\u003e)}\u003c/span\u003e\u003cspan class=\"hljs-subst\"\u003e${src}\u003c/span\u003e`\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003ef_auto\u003c/strong\u003e: 자동 이미지 포맷 변환\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ec_limit\u003c/strong\u003e: 컨텐츠 제한 모드로 이미지가 지정한 width보다 크면 축소\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ew_300\u003c/strong\u003e: 이미지 너비 300픽셀 설정 예시\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eq_auto\u003c/strong\u003e: 이미지 퀄리티를 자동으로 최적화\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eCloudinary는 다양한 트랜스포메이션 옵션을 제공하니, 공식 문서나 데모 페이지(\u003ca href=\"https://res.cloudinary.com/demo/image/upload/w_300,c_limit,q_auto/turtles.jpg\" rel=\"nofollow\" target=\"_blank\"\u003e링크\u003c/a\u003e)를 참고해서 꼭 활용해보세요!\u003c/p\u003e\n\u003chr\u003e\n\u003ch3\u003e한 줄 요약\u003c/h3\u003e\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003ctable\u003e\u003cthead\u003e\u003ctr\u003e\u003cth\u003e서비스\u003c/th\u003e\u003cth\u003e이미지 최적화 키워드\u003c/th\u003e\u003cth\u003e특징 및 참고사항\u003c/th\u003e\u003c/tr\u003e\u003c/thead\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd\u003eAWS CloudFront\u003c/td\u003e\u003ctd\u003e\u003ccode\u003eformat=auto\u003c/code\u003e, \u003ccode\u003ewidth\u003c/code\u003e, \u003ccode\u003equality\u003c/code\u003e\u003c/td\u003e\u003ctd\u003eAWS 인프라 연동, 서버리스 이미지 최적화 가능\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003eCloudinary\u003c/td\u003e\u003ctd\u003e\u003ccode\u003ef_auto\u003c/code\u003e, \u003ccode\u003ec_limit\u003c/code\u003e, \u003ccode\u003ew_\u003c/code\u003e, \u003ccode\u003eq_\u003c/code\u003e\u003c/td\u003e\u003ctd\u003e다양한 이미지 변환/최적화 기능 제공, 쉽게 적용 가능\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\u003chr\u003e\n\u003cp\u003e저도 예전에 이미지 최적화 때문에 엄청 고민했는데, 이런 CDN 서비스의 자동 최적화 기능을 이용하니 정말 편하더라고요. 직접 써보면서 서비스마다 조금씩 다른 파라미터와 특성을 비교해 보는 것도 좋은 공부가 될 거예요!\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch3\u003eCloudflare 이미지 로더 함수\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// Docs: https://developers.cloudflare.com/images/transform-images\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ecloudflareLoader\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e{ src, width, quality }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e params = [\u003cspan class=\"hljs-string\"\u003e`width=\u003cspan class=\"hljs-subst\"\u003e${width}\u003c/span\u003e`\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e`quality=\u003cspan class=\"hljs-subst\"\u003e${quality || \u003cspan class=\"hljs-number\"\u003e75\u003c/span\u003e}\u003c/span\u003e`\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'format=auto'\u003c/span\u003e]\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e`https://example.com/cdn-cgi/image/\u003cspan class=\"hljs-subst\"\u003e${params.join(\u003cspan class=\"hljs-string\"\u003e','\u003c/span\u003e)}\u003c/span\u003e/\u003cspan class=\"hljs-subst\"\u003e${src}\u003c/span\u003e`\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e여기서는 Cloudflare의 이미지 변환 API를 이용해서 이미지를 자동 포맷(webp, avif 등)으로 변경하고, 지정한 너비(width)와 품질(quality)를 적용해주고 있어요. quality는 지정하지 않으면 기본값 75로 처리하니 참고하세요.\u003c/p\u003e\n\u003cp\u003e포인트는 URL에 쿼리스트링 대신 path 부분에 파라미터를 쉼표로 구분해서 넣는다는 거예요. Cloudflare 방식만 좀 특별하니 헷갈리지 말기!\u003c/p\u003e\n\u003chr\u003e\n\u003ch3\u003eContentful 이미지 로더 함수\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// Docs: https://www.contentful.com/developers/docs/references/images-api/\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003econtentfulLoader\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e{ src, width, quality }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e url = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eURL\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e`https://example.com\u003cspan class=\"hljs-subst\"\u003e${src}\u003c/span\u003e`\u003c/span\u003e)\n  url.\u003cspan class=\"hljs-property\"\u003esearchParams\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eset\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'fm'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'webp'\u003c/span\u003e)\n  url.\u003cspan class=\"hljs-property\"\u003esearchParams\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eset\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'w'\u003c/span\u003e, width.\u003cspan class=\"hljs-title function_\"\u003etoString\u003c/span\u003e())\n  url.\u003cspan class=\"hljs-property\"\u003esearchParams\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eset\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'q'\u003c/span\u003e, (quality || \u003cspan class=\"hljs-number\"\u003e75\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003etoString\u003c/span\u003e())\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e url.\u003cspan class=\"hljs-property\"\u003ehref\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eContentful 이미지 API를 쓸 때는 URLSearchParams를 이용해서 쿼리스트링을 붙여줘요. 여기서 \u003ccode\u003efm=webp\u003c/code\u003e는 이미지 포맷을 webp로 강제 변환하는 옵션이고, \u003ccode\u003ew\u003c/code\u003e는 너비, \u003ccode\u003eq\u003c/code\u003e는 품질이에요.\u003c/p\u003e\n\u003cp\u003eContentful은 URL에 쿼리파라미터를 붙이는 형식이라 Cloudflare와 달리 경로가 복잡하지 않아서 편리해요.\u003c/p\u003e\n\u003chr\u003e\n\u003ch3\u003e추가 팁\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e이미지 최적화할 때는 가능한 한 \u003ccode\u003eformat=auto\u003c/code\u003e나 \u003ccode\u003efm=webp\u003c/code\u003e 같은 포맷 자동 변환 기능을 꼭 쓰는 게 좋아요. 요즘 브라우저 대부분이 webp, avif 등 고효율 포맷을 지원해서 페이지 로딩 속도가 훨씬 빨라진답니다.\u003c/li\u003e\n\u003cli\u003e이미지 너비(width)를 꼭 지정해서 너무 큰 원본 이미지를 불필요하게 불러오지 않도록 하세요.\u003c/li\u003e\n\u003cli\u003e품질(quality)을 75 정도로 설정하면 품질과 파일 크기의 균형이 잘 맞는 편이에요. 필요하다면 조절해보세요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e이렇게 내가 쓰는 CDN이나 이미지 제공 서비스에 맞게 최적화 로더 함수를 만들어서 쓰면 Next.js 같은 프레임워크에서 자동으로 최적화된 이미지를 잘 뽑아줄 수 있어요. 한번 직접 만들어서 써보면 생각보다 간단하고 효과가 확실하니 도전해보세요!\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch3\u003eFastly와 Gumlet 이미지 로더 비교\u003c/h3\u003e\n\u003cp\u003e이미지 최적화와 관련해서 Fastly와 Gumlet 두 가지 서비스를 많이 사용하죠. 여기서 각각의 간단한 커스텀 이미지 로더 함수 예제를 소개할게요. 이 함수들은 주로 Next.js 같은 프레임워크에서 이미지 URL을 동적으로 생성할 때 유용하게 쓰입니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// Fastly 로더 예제\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003efastlyLoader\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e{ src, width, quality }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e url = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eURL\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e`https://example.com\u003cspan class=\"hljs-subst\"\u003e${src}\u003c/span\u003e`\u003c/span\u003e)\n  url.\u003cspan class=\"hljs-property\"\u003esearchParams\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eset\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'auto'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'webp'\u003c/span\u003e) \u003cspan class=\"hljs-comment\"\u003e// 자동으로 WebP 포맷 변환\u003c/span\u003e\n  url.\u003cspan class=\"hljs-property\"\u003esearchParams\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eset\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'width'\u003c/span\u003e, width.\u003cspan class=\"hljs-title function_\"\u003etoString\u003c/span\u003e()) \u003cspan class=\"hljs-comment\"\u003e// 이미지 너비 설정\u003c/span\u003e\n  url.\u003cspan class=\"hljs-property\"\u003esearchParams\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eset\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'quality'\u003c/span\u003e, (quality || \u003cspan class=\"hljs-number\"\u003e75\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003etoString\u003c/span\u003e()) \u003cspan class=\"hljs-comment\"\u003e// 이미지 품질 설정 (기본 75)\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e url.\u003cspan class=\"hljs-property\"\u003ehref\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// Gumlet 로더 예제\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003egumletLoader\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e{ src, width, quality }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e url = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eURL\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e`https://example.com\u003cspan class=\"hljs-subst\"\u003e${src}\u003c/span\u003e`\u003c/span\u003e)\n  url.\u003cspan class=\"hljs-property\"\u003esearchParams\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eset\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'format'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'auto'\u003c/span\u003e) \u003cspan class=\"hljs-comment\"\u003e// 자동 포맷 변환\u003c/span\u003e\n  url.\u003cspan class=\"hljs-property\"\u003esearchParams\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eset\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'w'\u003c/span\u003e, width.\u003cspan class=\"hljs-title function_\"\u003etoString\u003c/span\u003e()) \u003cspan class=\"hljs-comment\"\u003e// 이미지 너비 설정\u003c/span\u003e\n  url.\u003cspan class=\"hljs-property\"\u003esearchParams\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eset\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'q'\u003c/span\u003e, (quality || \u003cspan class=\"hljs-number\"\u003e75\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003etoString\u003c/span\u003e()) \u003cspan class=\"hljs-comment\"\u003e// 이미지 품질 설정 (기본 75)\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e url.\u003cspan class=\"hljs-property\"\u003ehref\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003ctable\u003e\u003cthead\u003e\u003ctr\u003e\u003cth\u003e항목\u003c/th\u003e\u003cth\u003eFastly\u003c/th\u003e\u003cth\u003eGumlet\u003c/th\u003e\u003c/tr\u003e\u003c/thead\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd\u003e포맷 자동변환\u003c/td\u003e\u003ctd\u003e\u003ccode\u003eauto=webp\u003c/code\u003e\u003c/td\u003e\u003ctd\u003e\u003ccode\u003eformat=auto\u003c/code\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e이미지 너비\u003c/td\u003e\u003ctd\u003e\u003ccode\u003ewidth\u003c/code\u003e\u003c/td\u003e\u003ctd\u003e\u003ccode\u003ew\u003c/code\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e품질 설정\u003c/td\u003e\u003ctd\u003e\u003ccode\u003equality\u003c/code\u003e (기본값 75)\u003c/td\u003e\u003ctd\u003e\u003ccode\u003eq\u003c/code\u003e (기본값 75)\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e공식 문서\u003c/td\u003e\u003ctd\u003e\u003ca href=\"https://developer.fastly.com/reference/io/\" rel=\"nofollow\" target=\"_blank\"\u003eFastly IO Docs\u003c/a\u003e\u003c/td\u003e\u003ctd\u003e\u003ca href=\"https://docs.gumlet.com/reference/image-transform-size\" rel=\"nofollow\" target=\"_blank\"\u003eGumlet Docs\u003c/a\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\u003chr\u003e\n\u003ch3\u003e빠르게 정리하는 팁!\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e두 서비스 모두 이미지 포맷을 자동변환해서 WebP 같은 최신 포맷으로 최적화할 수 있어요.\u003c/li\u003e\n\u003cli\u003e파라미터 명칭이 조금 다르니 사용할 때 코드를 잘 확인해야 합니다.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003equality\u003c/code\u003e 기본값을 75로 맞추는 건 적당한 품질 유지와 용량 절약 균형을 위해 많이 쓰입니다.\u003c/li\u003e\n\u003cli\u003eURL 생성시 \u003ccode\u003enew URL\u003c/code\u003e을 쓰면 쿼리 파라미터 세팅이 편해서 추천해요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e이렇게 커스텀 로더를 쓰면 내 서비스에 맞춰 최적의 이미지 URL을 자동으로 만들어주니까 퍼포먼스에 큰 도움이 됩니다. 나중에 더 심화된 옵션들도 활용해보면 좋아요!\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch3\u003eImageEngine\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// 공식 문서: https://support.imageengine.io/hc/en-us/articles/360058880672-Directives\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eimageengineLoader\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e{ src, width, quality }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e compression = \u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e - (quality || \u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e)  \u003cspan class=\"hljs-comment\"\u003e// quality가 없으면 기본 50으로 지정 후 압축률 계산\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e params = [\u003cspan class=\"hljs-string\"\u003e`w_\u003cspan class=\"hljs-subst\"\u003e${width}\u003c/span\u003e`\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e`cmpr_\u003cspan class=\"hljs-subst\"\u003e${compression}\u003c/span\u003e`\u003c/span\u003e]\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e`https://example.com\u003cspan class=\"hljs-subst\"\u003e${src}\u003c/span\u003e?imgeng=/\u003cspan class=\"hljs-subst\"\u003e${params.join(\u003cspan class=\"hljs-string\"\u003e'/'\u003c/span\u003e)}\u003c/span\u003e`\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eImageEngine은 이미지의 크기 조절과 압축률을 URL 파라미터로 조절해서 최적화해주는 서비스입니다. 위 코드에서는 너비(width)와 품질(quality)를 받아서 적절한 압축 비율로 변환하고, 이 매개변수를 URL에 붙여서 반환해줍니다.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003ew_{width}\u003c/code\u003e : 이미지 너비 지정\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ecmpr_{value}\u003c/code\u003e : 압축률 지정 (100에서 quality 값을 뺀 값)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003cp\u003e참고로, quality 값을 0~100까지 넘겨주면 압축률을 구할 수 있어서 좀 더 세밀하게 이미지 품질과 용량을 조절할 수 있답니다.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003chr\u003e\n\u003ch3\u003eImgix\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// 예제 이미지: https://static.imgix.net/daisy.png?format=auto\u0026#x26;fit=max\u0026#x26;w=300\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eimgixLoader\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e{ src, width, quality }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e url = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eURL\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e`https://example.com\u003cspan class=\"hljs-subst\"\u003e${src}\u003c/span\u003e`\u003c/span\u003e)\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e params = url.\u003cspan class=\"hljs-property\"\u003esearchParams\u003c/span\u003e\n  params.\u003cspan class=\"hljs-title function_\"\u003eset\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'auto'\u003c/span\u003e, params.\u003cspan class=\"hljs-title function_\"\u003egetAll\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'auto'\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003ejoin\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e','\u003c/span\u003e) || \u003cspan class=\"hljs-string\"\u003e'format'\u003c/span\u003e)  \u003cspan class=\"hljs-comment\"\u003e// 자동 포맷 설정\u003c/span\u003e\n  params.\u003cspan class=\"hljs-title function_\"\u003eset\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'fit'\u003c/span\u003e, params.\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'fit'\u003c/span\u003e) || \u003cspan class=\"hljs-string\"\u003e'max'\u003c/span\u003e)                    \u003cspan class=\"hljs-comment\"\u003e// 이미지 fitting 방식 지정\u003c/span\u003e\n  params.\u003cspan class=\"hljs-title function_\"\u003eset\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'w'\u003c/span\u003e, params.\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'w'\u003c/span\u003e) || width.\u003cspan class=\"hljs-title function_\"\u003etoString\u003c/span\u003e())             \u003cspan class=\"hljs-comment\"\u003e// 너비 지정\u003c/span\u003e\n  params.\u003cspan class=\"hljs-title function_\"\u003eset\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'q'\u003c/span\u003e, (quality || \u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003etoString\u003c/span\u003e())                      \u003cspan class=\"hljs-comment\"\u003e// 품질 지정\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e url.\u003cspan class=\"hljs-property\"\u003ehref\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eImgix는 매우 인기있는 이미지 최적화 및 제공 서비스입니다. 위 예시 코드는 URL 객체를 활용해 기존 쿼리 파라미터를 유지하면서 자동 포맷, 맞춤 크기, 품질을 지정해서 반환하고 있어요.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eauto=format\u003c/code\u003e : 브라우저에 최적화된 형식으로 자동 변환 (webp, jpeg 등)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003efit=max\u003c/code\u003e : 이미지 fitting 방법으로 최대 크기까지 맞춤 (crop이나 clip도 가능해요)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ew\u003c/code\u003e : 너비(width) 지정\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eq\u003c/code\u003e : 품질(quality) 지정 (기본값 50)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003cp\u003eURL 객체를 쓰는 이유? 쿼리 파라미터를 쉽게 조작하면서 중복 제거하고 올바른 URL을 만들기 위해서에요.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch3\u003e한 번에 비교해보는 주요 파라미터\u003c/h3\u003e\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003ctable\u003e\u003cthead\u003e\u003ctr\u003e\u003cth\u003e서비스\u003c/th\u003e\u003cth\u003e주요 파라미터\u003c/th\u003e\u003cth\u003e설명\u003c/th\u003e\u003c/tr\u003e\u003c/thead\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd\u003eImageEngine\u003c/td\u003e\u003ctd\u003e\u003ccode\u003ew_{width}\u003c/code\u003e\u003c/td\u003e\u003ctd\u003e이미지 너비 지정\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003c/td\u003e\u003ctd\u003e\u003ccode\u003ecmpr_{compression}\u003c/code\u003e\u003c/td\u003e\u003ctd\u003e압축률 지정 (100 - quality)\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003eImgix\u003c/td\u003e\u003ctd\u003e\u003ccode\u003ew\u003c/code\u003e\u003c/td\u003e\u003ctd\u003e이미지 너비 지정\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003c/td\u003e\u003ctd\u003e\u003ccode\u003eq\u003c/code\u003e\u003c/td\u003e\u003ctd\u003e품질(quality) 지정\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003c/td\u003e\u003ctd\u003e\u003ccode\u003eauto=format\u003c/code\u003e\u003c/td\u003e\u003ctd\u003e자동 포맷 변환\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003c/td\u003e\u003ctd\u003e\u003ccode\u003efit\u003c/code\u003e\u003c/td\u003e\u003ctd\u003e이미지 fitting 방식\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\u003chr\u003e\n\u003ch3\u003e참고 팁\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e이미지 최적화할 때는 무조건 품질을 최고로 올리는 것보다, 용량과 품질의 적절한 균형점을 찾는 게 중요해요.\u003c/li\u003e\n\u003cli\u003e'quality' 값을 너무 낮게 하면 이미지가 뭉개지고, 너무 높이면 로딩 속도가 느려지니까요. 보통 50~70 사이 조절이 많이 쓰입니다.\u003c/li\u003e\n\u003cli\u003e또한, \u003ccode\u003eauto=format\u003c/code\u003e 같은 기능을 지원하는 서비스는 유용해요. 브라우저에 맞는 최적 포맷으로 변환해주거든요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e기본적인 사용법과 개념부터 잡고, 필요에 따라 각 서비스 공식 문서를 참고해서 더 세밀하게 조정해보길 추천드립니다!\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch3\u003ePixelBin 이미지 로더 함수\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// Doc (Resize): https://www.pixelbin.io/docs/transformations/basic/resize/#width-w\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// Doc (Optimise): https://www.pixelbin.io/docs/optimizations/quality/#image-quality-when-delivering\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// Doc (Auto Format Delivery): https://www.pixelbin.io/docs/optimizations/format/#automatic-format-selection-with-f_auto-url-parameter\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003epixelBinLoader\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e{ src, width, quality }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e name = \u003cspan class=\"hljs-string\"\u003e'\u0026#x3C;your-cloud-name\u003e'\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e opt = \u003cspan class=\"hljs-string\"\u003e`t.resize(w:\u003cspan class=\"hljs-subst\"\u003e${width}\u003c/span\u003e)~t.compress(q:\u003cspan class=\"hljs-subst\"\u003e${quality || \u003cspan class=\"hljs-number\"\u003e75\u003c/span\u003e}\u003c/span\u003e)`\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e`https://cdn.pixelbin.io/v2/\u003cspan class=\"hljs-subst\"\u003e${name}\u003c/span\u003e/\u003cspan class=\"hljs-subst\"\u003e${opt}\u003c/span\u003e/\u003cspan class=\"hljs-subst\"\u003e${src}\u003c/span\u003e?f_auto=true`\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003ePixelBin은 이미지 크기 조절, 압축, 포맷 자동 변환 등을 손쉽게 적용할 수 있게 해주는 이미지 CDN 서비스예요. 위 코드에서 \u003ccode\u003ewidth\u003c/code\u003e와 \u003ccode\u003equality\u003c/code\u003e를 받아서 이미지를 최적화된 형태로 반환합니다.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003et.resize(w:${width})\u003c/code\u003e: 원하는 가로 폭으로 이미지 크기를 조절\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003et.compress(q:${quality || 75})\u003c/code\u003e: 이미지 품질을 0~100으로 지정하며 기본값은 75\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e?f_auto=true\u003c/code\u003e: 브라우저에 맞춰 최적의 이미지 포맷(WebP, AVIF 등)을 자동 선택해줍니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e직접 클라우드 이름(\u003ccode\u003e\u0026#x3C;your-cloud-name\u003e\u003c/code\u003e)을 넣어서 사용하세요. PixelBin 덕분에 이미지 최적화가 훨씬 간편해져서 페이지 속도 개선에 아주 좋아요!\u003c/p\u003e\n\u003chr\u003e\n\u003ch3\u003eSanity 이미지 로더 함수\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// Docs: https://www.sanity.io/docs/image-urls\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003esanityLoader\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e{ src, width, quality }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e prj = \u003cspan class=\"hljs-string\"\u003e'zp7mbokg'\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e dataset = \u003cspan class=\"hljs-string\"\u003e'production'\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e url = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eURL\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e`https://cdn.sanity.io/images/\u003cspan class=\"hljs-subst\"\u003e${prj}\u003c/span\u003e/\u003cspan class=\"hljs-subst\"\u003e${dataset}\u003c/span\u003e\u003cspan class=\"hljs-subst\"\u003e${src}\u003c/span\u003e`\u003c/span\u003e)\n  url.\u003cspan class=\"hljs-property\"\u003esearchParams\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eset\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'auto'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'format'\u003c/span\u003e)\n  url.\u003cspan class=\"hljs-property\"\u003esearchParams\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eset\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'fit'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'max'\u003c/span\u003e)\n  url.\u003cspan class=\"hljs-property\"\u003esearchParams\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eset\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'w'\u003c/span\u003e, width.\u003cspan class=\"hljs-title function_\"\u003etoString\u003c/span\u003e())\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (quality) {\n    url.\u003cspan class=\"hljs-property\"\u003esearchParams\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eset\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'q'\u003c/span\u003e, quality.\u003cspan class=\"hljs-title function_\"\u003etoString\u003c/span\u003e())\n  }\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e url.\u003cspan class=\"hljs-property\"\u003ehref\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSanity는 헤드리스 CMS답게 이미지를 효과적으로 다룰 수 있는 내장 이미지 CDN을 제공합니다. 위 코드는 프로젝트 ID와 데이터셋만 맞춰주면 원하는 크기와 품질로 이미지를 요청할 수 있어요.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eauto=format\u003c/code\u003e: 자동으로 최적의 이미지 포맷을 선택\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003efit=max\u003c/code\u003e: 지정한 크기 내에서 이미지 크기를 최대한 맞춤\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ew\u003c/code\u003e: 가로 폭 지정\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eq\u003c/code\u003e: 이미지 품질 지정 (optional)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eSanity를 쓰면서 매번 직접 URL 다루기 귀찮다면 이렇게 로더 함수로 한 번 만들어 두면 훨씬 편하겠죠?\u003c/p\u003e\n\u003chr\u003e\n\u003ch3\u003e추가 팁!\u003c/h3\u003e\n\u003cp\u003e요즘은 다양한 디바이스가 많으니까 이미지 사이즈와 포맷 최적화는 필수가 됐어요. 위 두 예시 모두 \u003cstrong\u003e자동 포맷 변환\u003c/strong\u003e을 지원하는데, 이런 기능을 활용하면 꼭 WebP, AVIF 같은 최신 포맷을 개별 지원하지 않아도 되니 개발이 한결 수월해진답니다.\u003c/p\u003e\n\u003cp\u003e또한, \u003ccode\u003equality\u003c/code\u003e 값을 너무 높게 잡으면 페이지 로딩 속도가 늦어지고, 너무 낮게 하면 화질이 떨어질 수 있으니 적절한 타협이 중요해요. 보통 70~80 정도가 밸런스가 잘 맞는 편입니다. 실제 서비스에 적용 전에는 꼭 여러 디바이스에서 테스트해보세요!\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch3\u003eSirv 이미지 로더\u003c/h3\u003e\n\u003cp\u003eSirv는 이미지 최적화와 다이나믹 이미징을 지원하는 서비스에요. 위 코드를 보면, 이미지 URL에 필요한 파라미터를 추가해서 최적화된 이미지를 불러올 수 있게 만들어두었죠.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eformat\u003c/code\u003e 파라미터는 이미지 형식을 지정하는데, 기본값은 \u003ccode\u003e'optimal'\u003c/code\u003e로 설정해서 브라우저에 맞는 포맷을 자동으로 선택합니다.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ew\u003c/code\u003e는 이미지의 너비를 의미하고, 값을 넣어주지 않았다면 \u003ccode\u003ewidth\u003c/code\u003e 매개변수에서 받아 활용해요.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eq\u003c/code\u003e는 이미지 품질(quality) 숫자로, 기본값 85를 사용하지만 필요에 따라 조절 가능해요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003esirvLoader\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e{ src, width, quality }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e url = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eURL\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e`https://example.com\u003cspan class=\"hljs-subst\"\u003e${src}\u003c/span\u003e`\u003c/span\u003e)\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e params = url.\u003cspan class=\"hljs-property\"\u003esearchParams\u003c/span\u003e\n  params.\u003cspan class=\"hljs-title function_\"\u003eset\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'format'\u003c/span\u003e, params.\u003cspan class=\"hljs-title function_\"\u003egetAll\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'format'\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003ejoin\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e','\u003c/span\u003e) || \u003cspan class=\"hljs-string\"\u003e'optimal'\u003c/span\u003e)\n  params.\u003cspan class=\"hljs-title function_\"\u003eset\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'w'\u003c/span\u003e, params.\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'w'\u003c/span\u003e) || width.\u003cspan class=\"hljs-title function_\"\u003etoString\u003c/span\u003e())\n  params.\u003cspan class=\"hljs-title function_\"\u003eset\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'q'\u003c/span\u003e, (quality || \u003cspan class=\"hljs-number\"\u003e85\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003etoString\u003c/span\u003e())\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e url.\u003cspan class=\"hljs-property\"\u003ehref\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eSupabase 이미지 로더\u003c/h3\u003e\n\u003cp\u003eSupabase의 스토리지를 이용해 이미지 변환 기능을 쓸 때는 URL 파라미터로 \u003ccode\u003ewidth\u003c/code\u003e와 \u003ccode\u003equality\u003c/code\u003e을 넣으면 돼요.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003ewidth\u003c/code\u003e 파라미터로 원하는 이미지 너비를 지정하고,\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003equality\u003c/code\u003e를 통해 이미지 압축 정도를 조절할 수 있어요. 기본 75로 설정되어 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003esupabaseLoader\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e{ src, width, quality }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e url = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eURL\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e`https://example.com\u003cspan class=\"hljs-subst\"\u003e${src}\u003c/span\u003e`\u003c/span\u003e)\n  url.\u003cspan class=\"hljs-property\"\u003esearchParams\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eset\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'width'\u003c/span\u003e, width.\u003cspan class=\"hljs-title function_\"\u003etoString\u003c/span\u003e())\n  url.\u003cspan class=\"hljs-property\"\u003esearchParams\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eset\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'quality'\u003c/span\u003e, (quality || \u003cspan class=\"hljs-number\"\u003e75\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003etoString\u003c/span\u003e())\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e url.\u003cspan class=\"hljs-property\"\u003ehref\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003ch3\u003e추가 팁  — Next.js와 함께 쓸 때\u003c/h3\u003e\n\u003cp\u003e이 두 로더는 Next.js의 \u003ccode\u003enext/image\u003c/code\u003e 컴포넌트에서 \u003ccode\u003eloader\u003c/code\u003e 옵션으로 지정해서 쓸 수 있어요. 이렇게 하면 이미지 최적화가 훨씬 간편해지죠.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eImage\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'next/image'\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e sirvLoader \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'./sirvLoader'\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eMyComponent\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eImage\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003eloader\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{sirvLoader}\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003esrc\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"/my-image.png\"\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003ewidth\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{800}\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003eheight\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{600}\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003ealt\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"Example image\"\u003c/span\u003e\n    /\u003e\u003c/span\u003e\u003c/span\u003e\n  )\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSupabase도 마찬가지구요.\u003c/p\u003e\n\u003cp\u003e만약 여러분이 이미지 최적화나 변환 기능을 직접 구현하거나 타 서비스와 연동할 계획이라면, 이런 커스텀 로더 패턴을 잘 기억해 두는 게 좋아요. 서비스마다 요구하는 쿼리 파라미터가 다르니 꼭 공식 문서를 참고하세요!\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch3\u003eThumbor와 ImageKit.io 이미지 로더 함수 비교\u003c/h3\u003e\n\u003cp\u003e안녕하세요! 오늘은 이미지 최적화 서비스인 Thumbor와 ImageKit.io를 사용할 때 자주 쓰이는 이미지 URL 생성 함수 예제를 소개할게요. 여러분이 Next.js 같은 프레임워크에서 커스텀 이미지 로더를 만들 때 참고하면 좋아요.\u003c/p\u003e\n\u003chr\u003e\n\u003ch4\u003eThumbor\u003c/h4\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// 공식 문서: https://thumbor.readthedocs.io/en/latest/\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ethumborLoader\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e{ src, width, quality }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e params = [\u003cspan class=\"hljs-string\"\u003e`\u003cspan class=\"hljs-subst\"\u003e${width}\u003c/span\u003ex0`\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e`filters:quality(\u003cspan class=\"hljs-subst\"\u003e${quality || \u003cspan class=\"hljs-number\"\u003e75\u003c/span\u003e}\u003c/span\u003e)`\u003c/span\u003e]\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e`https://example.com\u003cspan class=\"hljs-subst\"\u003e${params.join(\u003cspan class=\"hljs-string\"\u003e'/'\u003c/span\u003e)}\u003c/span\u003e\u003cspan class=\"hljs-subst\"\u003e${src}\u003c/span\u003e`\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e사용법:\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003ewidth\u003c/code\u003e만 지정하고 높이(height)는 0으로 고정해서 비율을 유지합니다.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003equality\u003c/code\u003e는 필터로 적용하며 기본값은 75입니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eThumbor는 URL 구조가 \u003ccode\u003e/widthxheight/filters:.../image_path\u003c/code\u003e 형식이에요.\u003c/li\u003e\n\u003cli\u003e실제 사용할 때 \u003ccode\u003ehttps://example.com\u003c/code\u003e 대신 본인 서버 주소로 바꾸시면 됩니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch4\u003eImageKit.io\u003c/h4\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// 공식 문서: https://imagekit.io/docs/image-transformation\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eimageKitLoader\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e{ src, width, quality }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e params = [\u003cspan class=\"hljs-string\"\u003e`w-\u003cspan class=\"hljs-subst\"\u003e${width}\u003c/span\u003e`\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e`q-\u003cspan class=\"hljs-subst\"\u003e${quality || \u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e}\u003c/span\u003e`\u003c/span\u003e]\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e`https://ik.imagekit.io/your_imagekit_id/\u003cspan class=\"hljs-subst\"\u003e${src}\u003c/span\u003e?tr=\u003cspan class=\"hljs-subst\"\u003e${params.join(\u003cspan class=\"hljs-string\"\u003e','\u003c/span\u003e)}\u003c/span\u003e`\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e사용법:\n\u003cul\u003e\n\u003cli\u003eURL 쿼리 스트링 \u003ccode\u003e?tr=\u003c/code\u003e 뒤에 변환 옵션을 쉼표로 구분해서 넣는 방식이에요.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ew-\u003c/code\u003e는 너비 지정, \u003ccode\u003eq-\u003c/code\u003e는 품질 설정이며 기본값은 80입니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eyour_imagekit_id\u003c/code\u003e를 본인 계정에 맞게 바꿔 주세요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch3\u003e비교 및 팁\u003c/h3\u003e\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003ctable\u003e\u003cthead\u003e\u003ctr\u003e\u003cth\u003e특징\u003c/th\u003e\u003cth\u003eThumbor\u003c/th\u003e\u003cth\u003eImageKit.io\u003c/th\u003e\u003c/tr\u003e\u003c/thead\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd\u003eURL 형식\u003c/td\u003e\u003ctd\u003e\u003ccode\u003e/widthxheight/filters:value/image\u003c/code\u003e\u003c/td\u003e\u003ctd\u003e\u003ccode\u003e?tr=options\u003c/code\u003e 쿼리 스트링\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e품질 기본값\u003c/td\u003e\u003ctd\u003e75\u003c/td\u003e\u003ctd\u003e80\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e비율 유지 방식\u003c/td\u003e\u003ctd\u003e높이 0으로 설정해서 자동 맞춤\u003c/td\u003e\u003ctd\u003e너비만 지정, 자동 비율 유지\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e공식 문서 링크\u003c/td\u003e\u003ctd\u003e\u003ca href=\"https://thumbor.readthedocs.io/en/latest/\" rel=\"nofollow\" target=\"_blank\"\u003eThumbor Docs\u003c/a\u003e\u003c/td\u003e\u003ctd\u003e\u003ca href=\"https://imagekit.io/docs/image-transformation\" rel=\"nofollow\" target=\"_blank\"\u003eImageKit Docs\u003c/a\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\u003chr\u003e\n\u003ch3\u003e한마디\u003c/h3\u003e\n\u003cp\u003e이미지 최적화는 페이지 로딩 속도에 직접적인 영향을 미치기 때문에 꼭 신경 써야 하는 부분이에요. Thumbor와 ImageKit.io 모두 강력한 기능을 제공하니 프로젝트 상황에 맞게 선택하세요. 특히 ImageKit은 CDN 연동이 원활하고, Thumbor는 직접 서버에서 동작하므로 관리 편의성이 달라요.\u003c/p\u003e\n\u003cp\u003e궁금한 점 있으면 댓글로 물어봐 주세요! 다음에도 더 유용한 개발 정보로 찾아올게요~\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch3\u003eNitrogen AIO\u003c/h3\u003e\n\u003cp\u003e안녕하세요! 오늘은 Nitrogen AIO의 \u003ccode\u003eaioLoader\u003c/code\u003e 함수를 한번 같이 살펴볼게요. 이 코드는 이미지 URL을 받아서, 파라미터를 조작해 최적화된 이미지 URL을 자동으로 만들어주는 역할을 합니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// Docs: https://docs.n7.io/aio/intergrations/\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eaioLoader\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e{ src, width, quality }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e url = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eURL\u003c/span\u003e(src, \u003cspan class=\"hljs-variable language_\"\u003ewindow\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003elocation\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ehref\u003c/span\u003e) \u003cspan class=\"hljs-comment\"\u003e// 주어진 src를 기반으로 URL 객체 생성\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e params = url.\u003cspan class=\"hljs-property\"\u003esearchParams\u003c/span\u003e             \u003cspan class=\"hljs-comment\"\u003e// URL의 쿼리 파라미터 접근\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e aioParams = params.\u003cspan class=\"hljs-title function_\"\u003egetAll\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'aio'\u003c/span\u003e)      \u003cspan class=\"hljs-comment\"\u003e// 'aio' 키에 해당하는 모든 값 가져오기\u003c/span\u003e\n  aioParams.\u003cspan class=\"hljs-title function_\"\u003epush\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e`w-\u003cspan class=\"hljs-subst\"\u003e${width}\u003c/span\u003e`\u003c/span\u003e)                 \u003cspan class=\"hljs-comment\"\u003e// 너비 정보 추가 (예: w-800)\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (quality) {\n    aioParams.\u003cspan class=\"hljs-title function_\"\u003epush\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e`q-\u003cspan class=\"hljs-subst\"\u003e${quality.toString()}\u003c/span\u003e`\u003c/span\u003e) \u003cspan class=\"hljs-comment\"\u003e// 품질 정보 추가 (예: q-75)\u003c/span\u003e\n  }\n  params.\u003cspan class=\"hljs-title function_\"\u003eset\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'aio'\u003c/span\u003e, aioParams.\u003cspan class=\"hljs-title function_\"\u003ejoin\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e';'\u003c/span\u003e))       \u003cspan class=\"hljs-comment\"\u003e// 'aio' 파라미터를 새롭게 세팅. 여러 값은 ';'로 구분\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e url.\u003cspan class=\"hljs-property\"\u003ehref\u003c/span\u003e                              \u003cspan class=\"hljs-comment\"\u003e// 최종 변환된 URL 반환\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003ch3\u003e코드 설명\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003enew URL(src, window.location.href)\u003c/code\u003e: 상대경로나 절대경로로 전달된 \u003ccode\u003esrc\u003c/code\u003e를 URL 객체로 변환합니다. 이렇게 하면 쉽게 쿼리 파라미터를 조작할 수 있죠.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eparams.getAll('aio')\u003c/code\u003e: 하나의 쿼리 파라미터 키에 여러 값이 있을 때, 모두 배열로 가져올 수 있습니다. 예를 들어 \u003ccode\u003e?aio=foo\u0026#x26;aio=bar\u003c/code\u003e면 \u003ccode\u003e['foo','bar']\u003c/code\u003e가 나오죠.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eaioParams.push(...)\u003c/code\u003e: 이미지의 너비와 품질 정보를 \u003ccode\u003e'aio'\u003c/code\u003e 파라미터 값 안에 추가해줍니다. 이렇게 하여 이미지 최적화 옵션을 전달하죠.\u003c/li\u003e\n\u003cli\u003e마지막으로 \u003ccode\u003eparams.set('aio', aioParams.join(';'))\u003c/code\u003e: 여러 옵션을 세미콜론(;)으로 연결하여 하나의 \u003ccode\u003e'aio'\u003c/code\u003e 쿼리 파라미터로 변환합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch3\u003e추가 팁 🧐\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e왜 'aio' 파라미터를 여러 개 합쳐서 넣을까?\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e여러 옵션을 하나의 키(\u003ccode\u003eaio\u003c/code\u003e) 밑에 세미콜론으로 이어붙이면 URL이 깔끔해지고 쿼리 파라미터 키가 너무 많아지는 걸 방지할 수 있어요.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003equality 값이 없으면 어떻게 될까요?\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e만약 \u003ccode\u003equality\u003c/code\u003e가 주어지지 않으면 기본 품질 설정을 유지하거나 서버 쪽에서 기본값이 사용됩니다.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e더 다양한 옵션 추가하기\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e필요하다면 \u003ccode\u003eaioParams.push(...)\u003c/code\u003e 부분을 확장해서 다른 이미지 최적화 옵션(예: 포맷 변환, 크롭 등)도 추가할 수 있어요.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003cp\u003e이렇게 간단한 함수 하나로 이미지 URL을 동적으로 최적화할 수 있다는 게 Nitrogen AIO의 매력 중 하나랍니다! 만약 실제 프로젝트에 적용한다면, 이미지 로드시 항상 원하는 크기와 품질로 이미지를 불러오게 되어 사용자 경험이 한층 좋아질 거예요.\u003c/p\u003e\n\u003cp\u003e더 궁금한 점 있으면 언제든 물어보세요! 😊\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2025-04-22-images"},"buildId":"olPs1cVezSGTqD7OaewDI","assetPrefix":"/TIL","isFallback":false,"gsp":true,"scriptLoader":[{"async":true,"src":"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4877378276818686","strategy":"lazyOnload","crossOrigin":"anonymous"}]}</script></body></html>