<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>Quantstats, TA, PyPortfolioOpt, FinanceToolkit을 이용한 미국 빅테크 주식 통합 퀀트 트레이딩 분석 | TIL</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://13akstjq.github.io/TIL//post/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="Quantstats, TA, PyPortfolioOpt, FinanceToolkit을 이용한 미국 빅테크 주식 통합 퀀트 트레이딩 분석 | TIL" data-gatsby-head="true"/><meta property="og:title" content="Quantstats, TA, PyPortfolioOpt, FinanceToolkit을 이용한 미국 빅테크 주식 통합 퀀트 트레이딩 분석 | TIL" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://TIL.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://13akstjq.github.io/TIL//post/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit" data-gatsby-head="true"/><meta name="twitter:title" content="Quantstats, TA, PyPortfolioOpt, FinanceToolkit을 이용한 미국 빅테크 주식 통합 퀀트 트레이딩 분석 | TIL" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | TIL" data-gatsby-head="true"/><meta name="article:published_time" content="2024-07-13 20:25" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/TIL/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/TIL/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/TIL/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/TIL/favicons/favicon-96x96.png"/><link rel="icon" href="/TIL/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/TIL/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/TIL/favicons/browserconfig.xml"/><link rel="preload" href="/TIL/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/TIL/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/TIL/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/TIL/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/TIL/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/TIL/_next/static/chunks/webpack-21ffe88bdca56cba.js" defer=""></script><script src="/TIL/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/TIL/_next/static/chunks/main-a5eeabb286676ce6.js" defer=""></script><script src="/TIL/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/TIL/_next/static/chunks/75fc9c18-4a646156c659a948.js" defer=""></script><script src="/TIL/_next/static/chunks/348-02483b66b493dd81.js" defer=""></script><script src="/TIL/_next/static/chunks/pages/post/%5Bslug%5D-5ecfd58aae5a7e3d.js" defer=""></script><script src="/TIL/_next/static/B2TETmJptwqhd4vJNGZoH/_buildManifest.js" defer=""></script><script src="/TIL/_next/static/B2TETmJptwqhd4vJNGZoH/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/TIL">TIL</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/TIL/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">Quantstats, TA, PyPortfolioOpt, FinanceToolkit을 이용한 미국 빅테크 주식 통합 퀀트 트레이딩 분석</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="Quantstats, TA, PyPortfolioOpt, FinanceToolkit을 이용한 미국 빅테크 주식 통합 퀀트 트레이딩 분석" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/TIL/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">TIL</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Jul 13, 2024</span><span class="posts_reading_time__f7YPP">76<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_0.png">
<ul>
<li>이 게시물에서는 기술적, 근본적 분석 도구 및 현대 포트폴리오 최적화(PO) 알고리즘을 통합하여 파이썬에서 미국 대형 기술 기업들의 양적 거래 분석에 초점을 맞추고 있습니다.</li>
</ul>
<h2>미국의 대형 기술 기업이란?</h2>
<ul>
<li>빅 포 (알파벳, 아마존, 애플, 메타)</li>
<li>빅 파이브 (알파벳, 아마존, 애플, 메타, 마이크로소프트)</li>
<li>멋진 일곱 (알파벳, 아마존, 애플, 메타, 마이크로소프트, 엔비디아, 테슬라)</li>
<li>기타: 보고서에 따르면 AMD는 2023년 이후 브랜드 성장을 상당히 경험했으며, 전년대비 53% 증가했습니다. 또한 AMD의 브랜드 가치가 비즈니스 기술 및 서비스 플랫폼 부문에서 5186만 달러에 달했습니다. 그 강한 성장이 어디서 비롯된 것인지 쉽게 추측할 수 있습니다. AMD는 최근 몇 년 동안 경쟁사 인텔과 엔비디아가 해 온 것처럼 AI에 주력하고 있습니다.</li>
</ul>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h2>비즈니스 케이스</h2>
<ul>
<li>최근 몇 년간 미국 주식 시장은 빅테크가 주도한 놀라운 성장 기회를 제공해 왔습니다. 하지만, 상승장이 계속될 수 있을까요?</li>
<li>빅테크 기업들은 역사상 가장 큰 반독점 입법 파동에 직면하고 있습니다.</li>
<li>세계적인 세금 전쟁이 임박했습니다. 이는 빅테크에 큰 타격을 줄 수 있습니다.</li>
<li>결론: 이러한 인상적인 성과에도 불구하고, 현재의 고 인플레이션과 이자율 경제환경에서 특히 높은 가치평가를 받는 기술 주식에 베팅하는 것에 대해 투자자들은 조심해야 합니다. Nvidia 칩과 Meta의 대형 언어 모델과 같은 AI 응용 프로그램은 약속을 보이지만, 이들의 시장가치는 실제 소비자 혜택과 실현된 생산성 향상에 궁극적으로 의존할 것입니다.</li>
</ul>
<h2>프로젝트 목표</h2>
<ul>
<li>우리의 궁극적인 목표는 기술적 분석 (TA) 지표, 주식 기초 내용 및 위험과 수익을 동시에 고려하는 포트폴리오 최적화를 통합하는 것입니다.</li>
<li>Markowitz (1952) [1]는 투자 포트폴리오의 다양성을 옹호하며, 이 과정이 투자의 분산을 줄인다는 것을 입증했습니다.</li>
<li>이 다양성 개념들은 Modern Portfolio Theory (MPT)을 불러일으켰는데, 이는 위험과 수익이라는 두 가지 상충하는 목표 사이에서 선택하는 아이디어를 가져왔습니다.</li>
<li>TA 지표는 자산 가격과 거래량의 추세를 식별하기 위해 시장 참가자들에 의해 널리 사용됩니다. 최근 연구에 따르면 [2], 우리는 MPT와 TA 간의 격차를 줄이기 위해 TA 신호의 최적 가중치를 직접 다중 TA 신호의 함수로 매개변수화된 PO 전략을 개발했습니다.</li>
<li>일부 거래자들은 FA 대신 TA를 선호하지만, 가장 성공적인 전략은 종종 두 가지를 조화롭게 적용한 것에서 나옵니다. 이는 거래자들이 즉각적인 가격 변동과 장기적인 경제 예측에서 모두 이익을 취할 수 있도록 하며 [3], 이 통합된 PO 접근 방식은 시장 역학을 이해하는 것을 강화할 뿐만 아니라 거래자들이 견고한 투자 결정을 내리기 위한 포괄적인 도구 상자를 제공합니다.</li>
</ul>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h2>기술 분석 (TA)</h2>
<ul>
<li>TA는 시장을 분석하는 프레임워크를 트레이더에 제공하여 트렌드, 지지/저항 수준 및 진입/퇴출 지점을 식별하는 데 도움을 줍니다 [5].</li>
<li>TA의 두 가지 주요 가정은 다음과 같습니다 [5]: (1) 보안 가격은 기본적인 요소를 포함한 모든 중요한 정보를 반영한다; (2) 가격 변동은 상승, 하락 또는 측면 추세를 따른다.</li>
</ul>
<h2>근본 분석 (FA)</h2>
<ul>
<li>TA는 단기적인 패턴만 식별하는 반면, FA는 주식 가격이 실제 가치를 저평가(또는 고평가)하는 자산을 강조할 것입니다 [5, 7].</li>
<li>간단히 말해, 스마트한 투자 결정을 내리는 것이 FA의 주요 이점입니다. 이는 회사가 얼마나 벌고 지출하는지, 얼마나 많은 제품을 판매하는지 및 외부 요소에 어떻게 영향을 받는지를 이해하는 것을 포함합니다 [7].</li>
</ul>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h2>TA vs FA</h2>
<ul>
<li>FA(기업 재무 분석)는 자산의 품질에 초점을 맞추고, TA(기술적 분석)는 시장 동향을 가치의 지표로 삼습니다. 두 방법 모두 주식 가격의 미래 동향을 예측하는 데 사용됩니다.</li>
</ul>
<h2>포트폴리오 최적화</h2>
<ul>
<li>PO(포트폴리오 최적화)는 투자자가 자산을 선택하여 재무 위험을 최소화하고 ROI를 극대화하는 프로세스입니다.</li>
<li>투자 수익률(ROI)은 모든 산업에서 익숙한 지표입니다.</li>
<li>재정적으로 위험은 투자 수익이 기대와 다를 가능성을 의미합니다.</li>
</ul>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h2>도구들:</h2>
<ul>
<li>Quantstats는 포트폴리오 분석을 위한 광범위한 기능을 제공합니다. 양적 분석가, 트레이더 및 포트폴리오 매니저를 대상으로 하며, 투자 전략에 대한 보다 깊은 통찰력을 얻고자 하는 사용자를 위해 설계되었습니다.</li>
<li>TA는 금융 시계열 데이터 세트에 대한 TA 라이브러리입니다. 금융 시계열 데이터 세트(오픈, 클로즈, 하이, 로우, 볼륨)에서 피쳐 엔지니어링을 수행하는 데 유용합니다. Pandas와 Numpy에 기반을 두고 있습니다.</li>
<li>PyPortfolioOpt는 전통적인 MPT 및 Black-Litterman 할당뿐만 아니라 Shrinkage, Hierarchical Risk Parity와 같은 분야의 최근 개발사항들을 구현하는 라이브러리입니다. 또한, 지수 가중 공분산 행렬과 같은 혁신적인 실험적 기능도 포함하고 있습니다.</li>
<li>FinanceToolkit은 가장 단순한 방식으로 150가지 이상의 재무 비율, 지표 및 성과 측정 항목이 포함된 오픈 소스 툴킷입니다. 이 툴킷은 주식에만 국한되지 않고, 옵션, 화폐, 암호화폐, ETF, 상장펀드, 지수, 머니 마켓, 상품, 주요 경제 지표 등에 대한 역사적 데이터 및 샤프 비율, VaR과 같은 중요한 성과 및 위험 측정 수단을 얻기 위해 사용할 수 있습니다.</li>
</ul>
<h2>자료</h2>
<ul>
<li>금융 시장을 위한 데이터 과학</li>
<li>FinanceToolkit 예제</li>
<li>주식 시장 트렌드 및 Value at Risk</li>
</ul>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h2>프로젝트 마일스톤</h2>
<ul>
<li>빅 포 매칭 2020-2024 (BF)의 기초적인 리스크-수익 분석</li>
<li>등가치 가중 BF 포트폴리오의 성과 분석</li>
<li>Sharpe Ratio 최대화를 위한 BF 최적화 (효율적 투자선) vs S&#x26;P 500</li>
<li>(NVDA, AMD) vs 벤치마크 누적 수익률 및 VaR</li>
<li>(NVDA, AMD) 수익성 분석 및 그리스 감도</li>
<li>NVDA 및 AMD의 Fama-French 요인과의 상관 관계</li>
<li>(AAPL, AMZN, META, MSFT, GOOG) 재무 분석 및 주가 시뮬레이션</li>
<li>TA 이치모쿠 클라우드 차트: NVDA vs AMD</li>
<li>META 주식 TA, RSI vs EMA 전략 백테스팅</li>
</ul>
<p>위의 프로젝트 마일스톤에 대해 깊이 있게 탐구하는 포괄적인 안내서입니다. 해당 프로젝트는 가상 안콘다 환경을 생성한 후 주피터 노트북에서 구현되었습니다.</p>
<h2>기본 임포트 및 설치</h2>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>필요한 Python 라이브러리 설치 및 불러오기</li>
</ul>
<pre><code class="hljs language-js">!pip install quantstats, ta, pypfopt, plotly, yfinance, sklearn, seaborn, scipy
</code></pre>
<pre><code class="hljs language-js"># 라이브러리 불러오기

# 데이터 처리 및 통계 분석 
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
#<span class="hljs-keyword">from</span> pandas_datareader <span class="hljs-keyword">import</span> data
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">from</span> scipy <span class="hljs-keyword">import</span> stats

# 데이터 시각화 
<span class="hljs-keyword">import</span> matplotlib.<span class="hljs-property">pyplot</span> <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> seaborn <span class="hljs-keyword">as</span> sns
<span class="hljs-keyword">import</span> plotly.<span class="hljs-property">express</span> <span class="hljs-keyword">as</span> px
<span class="hljs-keyword">import</span> plotly.<span class="hljs-property">graph_objects</span> <span class="hljs-keyword">as</span> go
<span class="hljs-keyword">from</span> plotly.<span class="hljs-property">subplots</span> <span class="hljs-keyword">import</span> make_subplots

# 최적화 및 자산 할당
<span class="hljs-keyword">from</span> pypfopt.<span class="hljs-property">efficient_frontier</span> <span class="hljs-keyword">import</span> <span class="hljs-title class_">EfficientFrontier</span>
<span class="hljs-keyword">from</span> pypfopt <span class="hljs-keyword">import</span> risk_models
<span class="hljs-keyword">from</span> pypfopt <span class="hljs-keyword">import</span> expected_returns
<span class="hljs-keyword">from</span> pypfopt <span class="hljs-keyword">import</span> black_litterman, <span class="hljs-title class_">BlackLittermanModel</span>

# 금융 데이터 
<span class="hljs-keyword">import</span> quantstats <span class="hljs-keyword">as</span> qs
<span class="hljs-keyword">import</span> ta
<span class="hljs-keyword">import</span> yfinance <span class="hljs-keyword">as</span> yf

# 선형 회귀 모델
<span class="hljs-keyword">from</span> sklearn.<span class="hljs-property">linear_model</span> <span class="hljs-keyword">import</span> <span class="hljs-title class_">LinearRegression</span>

# <span class="hljs-title class_">Plotly</span> 오프라인 모드 활성화
<span class="hljs-keyword">from</span> plotly.<span class="hljs-property">offline</span> <span class="hljs-keyword">import</span> init_notebook_mode
<span class="hljs-title function_">init_notebook_mode</span>(connected=<span class="hljs-title class_">True</span>)


# 포트폴리오 최적화를 위한 라이브러리 불러오기
<span class="hljs-keyword">from</span> pypfopt.<span class="hljs-property">efficient_frontier</span> <span class="hljs-keyword">import</span> <span class="hljs-title class_">EfficientFrontier</span>
<span class="hljs-keyword">from</span> pypfopt <span class="hljs-keyword">import</span> risk_models
<span class="hljs-keyword">from</span> pypfopt <span class="hljs-keyword">import</span> expected_returns

# 날짜 및 경고 숨기기 
<span class="hljs-keyword">import</span> datetime <span class="hljs-keyword">as</span> dt
<span class="hljs-keyword">import</span> warnings
warnings.<span class="hljs-title function_">filterwarnings</span>(<span class="hljs-string">"ignore"</span>)
</code></pre>
<h1>2020–2024 빅 포 팝 4 (BF) 기본 수익-변동성 분석</h1>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>입력된 BF 주식 데이터 2020-2024년을 읽는 중</li>
</ul>
<pre><code class="hljs language-js">#<span class="hljs-title class_">Big</span> <span class="hljs-title class_">Four</span>
tickers = [<span class="hljs-string">"AAPL"</span>, <span class="hljs-string">"GOOG"</span>,<span class="hljs-string">"AMZN"</span>,<span class="hljs-string">"META"</span>] 
aapl = qs.<span class="hljs-property">utils</span>.<span class="hljs-title function_">download_returns</span>(tickers)
aapl = aapl.<span class="hljs-property">loc</span>[<span class="hljs-string">'2020-01-01'</span>:<span class="hljs-string">'2024-07-10'</span>]
</code></pre>
<ul>
<li>BF 주식의 일일 수익률 그래픽 표시</li>
</ul>
<pre><code class="hljs language-js"># 각 주식의 일일 수익률 그래픽 표시
<span class="hljs-title function_">print</span>(<span class="hljs-string">'\n'</span>)
<span class="hljs-title function_">print</span>(<span class="hljs-string">'\n주식 일일 수익률 그래픽:\n'</span>)
qs.<span class="hljs-property">plots</span>.<span class="hljs-title function_">daily_returns</span>(aapl,benchmark=<span class="hljs-string">'SPY'</span>)
</code></pre>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p><img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_1.png" alt="image"></p>
<ul>
<li>주식의 성과를 평가하는 가장 좋은 방법 중 하나는 일일 수익률을 계산하는 것입니다.</li>
<li>위에 있는 플롯은 기본적으로 주식 가치가 하루 동안 얼마나 변화했는지 보여줍니다. 이 기본 정보를 사용하여 회사에 더 많이 투자하거나 다른 곳에 투자를 시도할지 결정할 수 있습니다.</li>
<li>BF 주식 누적 수익 그래플 작성</li>
</ul>
<pre><code class="hljs language-js"># 각 주식에 대한 누적 수익 그래프 작성
<span class="hljs-title function_">print</span>(<span class="hljs-string">'\n'</span>)
<span class="hljs-title function_">print</span>(<span class="hljs-string">'\nStock Cumulative Returns Plot\n'</span>)
qs.<span class="hljs-property">plots</span>.<span class="hljs-title function_">returns</span>(aapl)
</code></pre>
<p><img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_2.png" alt="image"></p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>누적 수익 대비는 일정 기간 동안 투자 가격의 총 변화를 의미합니다.</li>
<li>이것은 물가 상승 및 기타 외부 요인의 영향을 고려하지 않는 총 명목 수익입니다.</li>
<li>양의 수익은 이익을 나타내고, 음의 수익은 손실을 나타냅니다.</li>
<li>세금은 대부분의 투자에 대한 누적 수익을 상당히 줄일 수 있습니다.</li>
</ul>
<h2>BF의 첨도</h2>
<ul>
<li>BF 일일 수익의 첨도를 계산하고 그래프로 나타내기</li>
</ul>
<pre><code class="hljs language-js"># 첨도를 측정하기 위해 quantstats 사용
<span class="hljs-title function_">print</span>(<span class="hljs-string">'\n'</span>)
<span class="hljs-title function_">print</span>(<span class="hljs-string">"BF의 첨도: "</span>, qs.<span class="hljs-property">stats</span>.<span class="hljs-title function_">kurtosis</span>(aapl).<span class="hljs-title function_">round</span>(<span class="hljs-number">2</span>))

<span class="hljs-variable constant_">AAPL</span>     <span class="hljs-number">5.03</span>
<span class="hljs-variable constant_">AMZN</span>     <span class="hljs-number">4.00</span>
<span class="hljs-variable constant_">GOOG</span>     <span class="hljs-number">3.63</span>
<span class="hljs-variable constant_">META</span>    <span class="hljs-number">17.71</span>
<span class="hljs-attr">dtype</span>: float64

qs.<span class="hljs-property">stats</span>.<span class="hljs-title function_">kurtosis</span>(aapl).<span class="hljs-title function_">round</span>(<span class="hljs-number">2</span>).<span class="hljs-property">plot</span>.<span class="hljs-title function_">bar</span>(label=<span class="hljs-string">'첨도'</span>)
plt.<span class="hljs-title function_">legend</span>()
</code></pre>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p><img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_3.png" alt="image"></p>
<ul>
<li>첨도(Kurtosis)는 분포의 꼬리 모양을 측정합니다.</li>
<li>금융 분석에서 첨도는 투자의 가격 변동성 리스크를 측정하는 데 사용됩니다. 첨도는 투자의 가격이 정기적으로 경험하는 변동성을 측정합니다. 수익 분포의 높은 첨도는 투자가 가끔 극단적인 수익을 내줄 것을 시사합니다. 높은 첨도는 큰 양의 양수 수익 또는 극단적인 음수 수익을 나타낼 수 있다는 것을 염두에 두세요.</li>
<li>우리는 BF의 일일 수익을 첨두관련 분포(첨도 ` 3.0)로 간주할 수 있습니다. 이 분포는 긴 꼬리(이상치)를 가진 곡선으로 나타납니다.</li>
<li>추론: kur(META) `` kur(AAPL) ` kur(AMZN) ~ kur(GOOG)</li>
</ul>
<h2>BF의 왜도(Skewness)</h2>
<ul>
<li>BF의 일일 수익의 왜도(Skewness)를 계산하고 그래프에 표시하기</li>
</ul>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js"># <span class="hljs-title class_">Quantstats</span>를 사용하여 왜도 측정
<span class="hljs-title function_">print</span>(<span class="hljs-string">'\n'</span>)
<span class="hljs-title function_">print</span>(<span class="hljs-string">"주식 왜도: "</span>, qs.<span class="hljs-property">stats</span>.<span class="hljs-title function_">skew</span>(aapl).<span class="hljs-title function_">round</span>(<span class="hljs-number">2</span>))

주식 왜도:  <span class="hljs-title class_">Ticker</span>
<span class="hljs-variable constant_">AAPL</span>    <span class="hljs-number">0.12</span>
<span class="hljs-variable constant_">AMZN</span>    <span class="hljs-number">0.12</span>
<span class="hljs-variable constant_">GOOG</span>   -<span class="hljs-number">0.06</span>
<span class="hljs-variable constant_">META</span>   -<span class="hljs-number">0.29</span>
<span class="hljs-attr">dtype</span>: float64

qs.<span class="hljs-property">stats</span>.<span class="hljs-title function_">skew</span>(aapl).<span class="hljs-title function_">round</span>(<span class="hljs-number">2</span>).<span class="hljs-property">plot</span>.<span class="hljs-title function_">bar</span>(label=<span class="hljs-string">'Skewness'</span>)
plt.<span class="hljs-title function_">legend</span>()
</code></pre>
<p><img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_4.png" alt="분산 도표"></p>
<ul>
<li>왜도는 데이터가 대칭적 벨 곡선에서 벗어나는 방향과 정도를 나타냅니다.</li>
<li>왜도가 0인 분포는 완전히 대칭적이며 분포의 왼쪽과 오른쪽이 거울 이미지인 것을 의미합니다. 양수 왜도는 오른쪽 꼬리가 왼쪽보다 길거나 더 두껍다는 것을 의미하며, 데이터가 높은 값을 가질 가능성이 높음을 시사합니다. 음수 왜도는 왼쪽 꼬리가 오른쪽보다 길거나 더 두꺼워 낮은 값을 가질 가능성을 시사합니다.</li>
<li>일반적으로 -0.5 ~ 0.5 사이의 값은 약간의 왜도 수준을 나타냅니다.</li>
<li>추론: skew(META)=-0.29</li>
<li>실현 왜도와 미래 가격 간에 부정적인 교차 섹션이 관찰됩니다. — 음수 왜도를 가진 주식은 높은 변동성에 대해 미래 수익이 높게 보상됩니다.</li>
<li>GOOG의 부정적인 왜도는 투자자가 빈번한 소규모 이익과 소수의 큰 손실을 기대할 수 있다는 것을 의미합니다. 실제로, 많은 거래 전략이 부정적으로 왜도된 분포에 기초합니다.</li>
<li>AAPL 및 AMZN의 0에서 적정한 양수의 왜도와 결합되면, 이러한 분포는 안정적인 수익과 낮은 리스크를 시사할 것입니다.</li>
</ul>
<h2>BF의 표준 편차</h2>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>BF 일별 수익률의 표준 편차(STD)를 계산하고 그래프로 플로팅합니다.</li>
</ul>
<pre><code class="hljs language-js"># 표준 편차 계산하기
<span class="hljs-title function_">print</span>(<span class="hljs-string">'\n'</span>)
<span class="hljs-title function_">print</span>(<span class="hljs-string">"주식 표준 편차: "</span>, aapl.<span class="hljs-title function_">std</span>().<span class="hljs-title function_">round</span>(<span class="hljs-number">3</span>))

주식 표준 편차:  <span class="hljs-title class_">Ticker</span>
<span class="hljs-variable constant_">AAPL</span>    <span class="hljs-number">0.021</span>
<span class="hljs-variable constant_">AMZN</span>    <span class="hljs-number">0.023</span>
<span class="hljs-variable constant_">GOOG</span>    <span class="hljs-number">0.021</span>
<span class="hljs-variable constant_">META</span>    <span class="hljs-number">0.029</span>
<span class="hljs-attr">dtype</span>: float64

aapl.<span class="hljs-title function_">std</span>().<span class="hljs-title function_">round</span>(<span class="hljs-number">3</span>).<span class="hljs-property">plot</span>.<span class="hljs-title function_">bar</span>(label=<span class="hljs-string">'STD'</span>)
plt.<span class="hljs-title function_">legend</span>()
</code></pre>
<img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_5.png">
<ul>
<li>표준 편차는 투자를 비교하는 기본적인 방법으로, 데이터의 변동이나 분산을 측정합니다. 더 높은 표준 편차는 더 높은 위험을 의미합니다.</li>
<li>데이터 포인트가 평균에서 더 멀리 떨어져 있는 경우 데이터 세트 내에서 더 높은 편차가 있습니다. 표준 편차는 분산의 제곱근으로 계산됩니다.</li>
<li>변동성이 큰 주식은 표준 편차가 높고, 안정적인 블루 칩 주가 주식의 편차는 보통 낮습니다.</li>
<li>결론: std(AAPL, AMZN, GOOG) 약 0.02, std(META) 약 0.03입니다.</li>
</ul>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h2>BF 상관 분석</h2>
<ul>
<li>페어 플롯(pairplot)과 상관 행렬은 자산 간의 상관 관계를 시각화하는 데 유용한 도구입니다.</li>
<li>BF 일일 수익의 페어 플롯을 생성합니다.</li>
</ul>
<pre><code class="hljs language-js"># 페어 플롯
sns.<span class="hljs-title function_">pairplot</span>(aapl, kind=<span class="hljs-string">'reg'</span>)
plt.<span class="hljs-title function_">show</span>()
</code></pre>
<p><img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_6.png" alt="이미지"></p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>위의 플롯은 구글과 메타 주식 간의 흥미로운 선형 관계를 보여줍니다.</li>
<li>BF 일일 수익의 상관 행렬을 플로팅한 결과입니다.</li>
</ul>
<pre><code class="hljs language-js"># 상관 행렬
corr = aapl.<span class="hljs-title function_">corr</span>()
mask = np.<span class="hljs-title function_">zeros_like</span>(corr, dtype=bool)
mask[np.<span class="hljs-title function_">triu_indices_from</span>(mask)] = <span class="hljs-title class_">True</span>
sns.<span class="hljs-title function_">heatmap</span>(corr, annot=<span class="hljs-title class_">True</span>, mask=mask)
plt.<span class="hljs-title function_">show</span>()
</code></pre>
<p><img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_7.png" alt="이미지"></p>
<ul>
<li>GOOG와 AAPL, AMZN, META의 3개 주식 간에는 0.64~0.66 정도의 강한 양의 상관 관계가 있습니다.</li>
</ul>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h2>BF의 베타 계수</h2>
<ul>
<li>주식의 베타 계수는 시장 기준으로 시간이 지남에 따른 변동성을 측정하는 지표입니다. 1의 베타는 주식의 변동성이 시장과 정확히 일치한다는 것을 의미합니다. 더 높은 베타는 큰 변동성을 나타내고, 낮은 베타는 덜한 변동성을 나타냅니다.</li>
<li>BF의 벤치마크 SPY에 대한 베타 계수를 계산하기 위해 선형 회귀 분석을 사용합니다.</li>
</ul>
<pre><code class="hljs language-js">bench = [<span class="hljs-string">"SPY"</span>] 
spy = qs.<span class="hljs-property">utils</span>.<span class="hljs-title function_">download_returns</span>(bench)
spy = spy.<span class="hljs-property">loc</span>[<span class="hljs-string">'2020-01-01'</span>:<span class="hljs-string">'2024-07-10'</span>]

# 인덱스 제거
spy_no_index = spy.<span class="hljs-title function_">reset_index</span>(drop = <span class="hljs-title class_">True</span>)
aapl_no_index = aapl.<span class="hljs-title function_">reset_index</span>(drop = <span class="hljs-title class_">True</span>)

# 애플의 수익률과 벤치마크 사이의 선형 관계 설정

자산=<span class="hljs-string">'AAPL'</span>
X = spy_no_index.<span class="hljs-property">values</span>.<span class="hljs-title function_">reshape</span>(-<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)
y = aapl_no_index[asset].<span class="hljs-property">values</span>.<span class="hljs-title function_">reshape</span>(-<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)

linreg = <span class="hljs-title class_">LinearRegression</span>().<span class="hljs-title function_">fit</span>(X, y)

베타 = linreg.<span class="hljs-property">coef_</span>[<span class="hljs-number">0</span>]
알파 = linreg.<span class="hljs-property">intercept_</span>
<span class="hljs-title function_">print</span>(<span class="hljs-string">'\n'</span>)
<span class="hljs-title function_">print</span>(<span class="hljs-string">'AAPL 베타: '</span>, beta.<span class="hljs-title function_">round</span>(<span class="hljs-number">3</span>))
<span class="hljs-title function_">print</span>(<span class="hljs-string">'\nAAPL 알파: '</span>, alpha.<span class="hljs-title function_">round</span>(<span class="hljs-number">3</span>))


자산_베타 = []
자산_베타.<span class="hljs-title function_">append</span>(베타.<span class="hljs-title function_">round</span>(<span class="hljs-number">3</span>)[<span class="hljs-number">0</span>])

<span class="hljs-variable constant_">AAPL</span> 베타:  [<span class="hljs-number">1.203</span>]

<span class="hljs-variable constant_">AAPL</span> 알파:  [<span class="hljs-number">0.001</span>]

자산=<span class="hljs-string">'AMZN'</span>
X = spy_no_index.<span class="hljs-property">values</span>.<span class="hljs-title function_">reshape</span>(-<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)
y = aapl_no_index[asset].<span class="hljs-property">values</span>.<span class="hljs-title function_">reshape</span>(-<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)

linreg = <span class="hljs-title class_">LinearRegression</span>().<span class="hljs-title function_">fit</span>(X, y)

베타 = linreg.<span class="hljs-property">coef_</span>[<span class="hljs-number">0</span>]
알파 = linreg.<span class="hljs-property">intercept_</span>
<span class="hljs-title function_">print</span>(<span class="hljs-string">'\n'</span>)
<span class="hljs-title function_">print</span>(<span class="hljs-string">'AMZN 베타: '</span>, beta.<span class="hljs-title function_">round</span>(<span class="hljs-number">3</span>))
<span class="hljs-title function_">print</span>(<span class="hljs-string">'\nAMZN 알파: '</span>, alpha.<span class="hljs-title function_">round</span>(<span class="hljs-number">3</span>))

자산_베타.<span class="hljs-title function_">append</span>(베타.<span class="hljs-title function_">round</span>(<span class="hljs-number">3</span>)[<span class="hljs-number">0</span>])

<span class="hljs-variable constant_">AMZN</span> 베타:  [<span class="hljs-number">1.075</span>]

<span class="hljs-variable constant_">AMZN</span> 알파:  [<span class="hljs-number">0.</span>]

자산=<span class="hljs-string">'META'</span>
X = spy_no_index.<span class="hljs-property">values</span>.<span class="hljs-title function_">reshape</span>(-<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)
y = aapl_no_index[asset].<span class="hljs-property">values</span>.<span class="hljs-title function_">reshape</span>(-<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)

linreg = <span class="hljs-title class_">LinearRegression</span>().<span class="hljs-title function_">fit</span>(X, y)

베타 = linreg.<span class="hljs-property">coef_</span>[<span class="hljs-number">0</span>]
알파 = linreg.<span class="hljs-property">intercept_</span>
<span class="hljs-title function_">print</span>(<span class="hljs-string">'\n'</span>)
<span class="hljs-title function_">print</span>(<span class="hljs-string">'META 베타: '</span>, beta.<span class="hljs-title function_">round</span>(<span class="hljs-number">3</span>))
<span class="hljs-title function_">print</span>(<span class="hljs-string">'\nMETA 알파: '</span>, alpha.<span class="hljs-title function_">round</span>(<span class="hljs-number">3</span>))

자산_베타.<span class="hljs-title function_">append</span>(베타.<span class="hljs-title function_">round</span>(<span class="hljs-number">3</span>)[<span class="hljs-number">0</span>])

<span class="hljs-variable constant_">META</span> 베타:  [<span class="hljs-number">1.324</span>]

<span class="hljs-variable constant_">META</span> 알파:  [<span class="hljs-number">0.001</span>]

자산=<span class="hljs-string">'GOOG'</span>
X = spy_no_index.<span class="hljs-property">values</span>.<span class="hljs-title function_">reshape</span>(-<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)
y = aapl_no_index[asset].<span class="hljs-property">values</span>.<span class="hljs-title function_">reshape</span>(-<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)

linreg = <span class="hljs-title class_">LinearRegression</span>().<span class="hljs-title function_">fit</span>(X, y)

베타 = linreg.<span class="hljs-property">coef_</span>[<span class="hljs-number">0</span>]
알파 = linreg.<span class="hljs-property">intercept_</span>
<span class="hljs-title function_">print</span>(<span class="hljs-string">'\n'</span>)
<span class="hljs-title function_">print</span>(<span class="hljs-string">'GOOG 베타: '</span>, beta.<span class="hljs-title function_">round</span>(<span class="hljs-number">3</span>))
<span class="hljs-title function_">print</span>(<span class="hljs-string">'\nGOOG 알파: '</span>, alpha.<span class="hljs-title function_">round</span>(<span class="hljs-number">3</span>))

자산_베타.<span class="hljs-title function_">append</span>(베타.<span class="hljs-title function_">round</span>(<span class="hljs-number">3</span>)[<span class="hljs-number">0</span>])

<span class="hljs-variable constant_">GOOG</span> 베타:  [<span class="hljs-number">1.139</span>]

<span class="hljs-variable constant_">GOOG</span> 알파:  [<span class="hljs-number">0.</span>]

<span class="hljs-title function_">print</span>(자산_베타)
[<span class="hljs-number">1.203</span>, <span class="hljs-number">1.075</span>, <span class="hljs-number">1.324</span>, <span class="hljs-number">1.139</span>]
</code></pre>
<ul>
<li>BF의 베타 계수를 플로팅하기</li>
</ul>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-python">fig, ax = plt.subplots(figsize=(<span class="hljs-number">6</span>, <span class="hljs-number">6</span>))

x = asset_beta
tickers1=[<span class="hljs-string">'AAPL'</span>, <span class="hljs-string">'AMZN'</span>, <span class="hljs-string">'META'</span>, <span class="hljs-string">'GOOG'</span>]

ax.pie(x, labels=tickers1, autopct=<span class="hljs-string">'%.1f%%'</span>,
       wedgeprops={<span class="hljs-string">'linewidth'</span>: <span class="hljs-number">3.0</span>, <span class="hljs-string">'edgecolor'</span>: <span class="hljs-string">'white'</span>},
       textprops={<span class="hljs-string">'size'</span>: <span class="hljs-string">'x-large'</span>})
ax.set_title(<span class="hljs-string">'Asset Beta'</span>, fontsize=<span class="hljs-number">18</span>)
plt.tight_layout()
</code></pre>
<p><img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_8.png" alt="Pie Chart"></p>
<pre><code class="hljs language-python"><span class="hljs-comment">#import numpy as np</span>
<span class="hljs-comment">#import matplotlib.pyplot as plt</span>
 
courses = tickers
values = x
 
fig = plt.figure(figsize=(<span class="hljs-number">10</span>, <span class="hljs-number">5</span>))

<span class="hljs-comment"># creating the bar plot</span>
plt.bar(courses, values, color=<span class="hljs-string">'maroon'</span>, width=<span class="hljs-number">0.4</span>)

plt.xlabel(<span class="hljs-string">"Assets"</span>)
plt.ylabel(<span class="hljs-string">"Beta Value"</span>)
plt.title(<span class="hljs-string">"Asset Beta Values"</span>)
plt.show()
</code></pre>
<p><img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_9.png" alt="Bar Chart"></p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>정의상 S&#x26;P 500 지수와 같은 시장은 베타가 1.0이며, 개별 주식은 시장과 얼마나 벗어나는지에 따라 순위가 매겨집니다.</li>
<li>추론: BF 주식은 베타가 1.0보다 높기 때문에 시간이 지남에 따라 시장보다 더 많이 흔듭니다.</li>
</ul>
<h2>BF의 샤프 비율</h2>
<ul>
<li>샤프 비율은 투자의 위험 조정 수익률을 측정하는 지표입니다.</li>
<li>BF의 샤프 비율을 계산하고 시각화합니다.</li>
</ul>
<pre><code class="hljs language-js"># 샤프 비율 계산
<span class="hljs-title function_">print</span>(<span class="hljs-string">'\n'</span>)
<span class="hljs-title function_">print</span>(<span class="hljs-string">"주식의 샤프 비율: "</span>, qs.<span class="hljs-property">stats</span>.<span class="hljs-title function_">sharpe</span>(aapl).<span class="hljs-title function_">round</span>(<span class="hljs-number">2</span>))
주식의 샤프 비율: <span class="hljs-title class_">Ticker</span>
<span class="hljs-variable constant_">AAPL</span> <span class="hljs-number">0.93</span>
<span class="hljs-variable constant_">AMZN</span> <span class="hljs-number">0.65</span>
<span class="hljs-variable constant_">GOOG</span> <span class="hljs-number">0.87</span>
<span class="hljs-variable constant_">META</span> <span class="hljs-number">0.69</span>
<span class="hljs-attr">dtype</span>: float64

qs.<span class="hljs-property">stats</span>.<span class="hljs-title function_">sharpe</span>(aapl).<span class="hljs-title function_">round</span>(<span class="hljs-number">2</span>).<span class="hljs-property">plot</span>.<span class="hljs-title function_">bar</span>(label=<span class="hljs-string">'샤프 비율'</span>)
plt.<span class="hljs-title function_">legend</span>()
</code></pre>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p><img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_10.png" alt="image"></p>
<ul>
<li>Sharpe ratio가 높을수록 투자가 다른 Sharpe ratio가 낮은 투자에 비해 주어진 위험 수준에서 더 높은 수익을 제공함을 나타냅니다.</li>
<li>결론: AAPL은 다른 3개 주식 (AMZN, GOOG, META)에 비해 주어진 위험 수준에서 더 높은 수익을 제공할 수 있습니다. AAPL의 Sharpe ratio가 거의 1에 가깝다는 것은 투자의 평균 수익이 리스크-프리 이자율과 거의 같다는 것을 의미합니다.</li>
</ul>
<h1>등중 BF 포트폴리오의 성과 분석</h1>
<ul>
<li>등중 BF 포트폴리오의 성과를 살펴봅시다.</li>
<li>각 보안의 가중치 = 포트폴리오 내 보안 수로 1을 나눈 값</li>
<li>4개 주식으로 이루어진 BF 포트폴리오에서 각 주식은 25%의 가중치를 가집니다.</li>
</ul>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js">weights = [<span class="hljs-number">0.25</span>, <span class="hljs-number">0.25</span>, <span class="hljs-number">0.25</span>, <span class="hljs-number">0.25</span>] # 각 주식의 가중치 정의
ap=aapl[<span class="hljs-string">'AAPL'</span>]
am=aapl[<span class="hljs-string">'AMZN'</span>]
me=aapl[<span class="hljs-string">'META'</span>]
ms=aapl[<span class="hljs-string">'GOOG'</span>]
portfolio = ap*weights[<span class="hljs-number">0</span>] + am*weights[<span class="hljs-number">1</span>] + me*weights[<span class="hljs-number">2</span>] + ms*weights[<span class="hljs-number">3</span>] # 각 주식을 해당 가중치로 곱하여 포트폴리오 생성
portfolio # 포트폴리오의 일일 수익률 표시

<span class="hljs-title class_">Date</span>
<span class="hljs-number">2020</span>-<span class="hljs-number">01</span>-<span class="hljs-number">02</span>    <span class="hljs-number">0.023684</span>
<span class="hljs-number">2020</span>-<span class="hljs-number">01</span>-<span class="hljs-number">03</span>   -<span class="hljs-number">0.008015</span>
<span class="hljs-number">2020</span>-<span class="hljs-number">01</span>-<span class="hljs-number">06</span>    <span class="hljs-number">0.016586</span>
<span class="hljs-number">2020</span>-<span class="hljs-number">01</span>-<span class="hljs-number">07</span>   -<span class="hljs-number">0.000268</span>
<span class="hljs-number">2020</span>-<span class="hljs-number">01</span>-<span class="hljs-number">08</span>    <span class="hljs-number">0.006574</span>
                ...   
<span class="hljs-number">2024</span>-<span class="hljs-number">07</span>-<span class="hljs-number">02</span>    <span class="hljs-number">0.012870</span>
<span class="hljs-number">2024</span>-<span class="hljs-number">07</span>-<span class="hljs-number">03</span>   -<span class="hljs-number">0.000289</span>
<span class="hljs-number">2024</span>-<span class="hljs-number">07</span>-<span class="hljs-number">05</span>    <span class="hljs-number">0.029234</span>
<span class="hljs-number">2024</span>-<span class="hljs-number">07</span>-<span class="hljs-number">08</span>   -<span class="hljs-number">0.006084</span>
<span class="hljs-number">2024</span>-<span class="hljs-number">07</span>-<span class="hljs-number">09</span>    <span class="hljs-number">0.001275</span>
<span class="hljs-title class_">Length</span>: <span class="hljs-number">1136</span>, <span class="hljs-attr">dtype</span>: float64
</code></pre>
<ul>
<li>포트폴리오의 일일 수익률, 히스토그램, 누적 수익률 플로팅</li>
</ul>
<pre><code class="hljs language-js">portfolio.<span class="hljs-title function_">plot</span>()
</code></pre>
<img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_11.png">
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js">portfolio.<span class="hljs-title function_">hist</span>()
</code></pre>
<img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_12.png">
<pre><code class="hljs language-js">qs.<span class="hljs-property">plots</span>.<span class="hljs-title function_">returns</span>(portfolio)
</code></pre>
<img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_13.png">
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>Equal-Weighted BF 포트폴리오 성과 보고서 및 전략 시각화 vs SPY 기준 생성 중입니다!</li>
</ul>
<pre><code class="hljs language-js">qs.<span class="hljs-property">reports</span>.<span class="hljs-title function_">full</span>(portfolio, benchmark = spy)
</code></pre>
<pre><code class="hljs language-js">성과 지표
                           기준          전략
-------------------------  -----------  ----------
시작 기간                 <span class="hljs-number">2020</span>-<span class="hljs-number">01</span>-<span class="hljs-number">02</span>   <span class="hljs-number">2020</span>-<span class="hljs-number">01</span>-<span class="hljs-number">02</span>
종료 기간                 <span class="hljs-number">2024</span>-<span class="hljs-number">07</span>-<span class="hljs-number">09</span>   <span class="hljs-number">2024</span>-<span class="hljs-number">07</span>-<span class="hljs-number">09</span>
무위험 이자율             <span class="hljs-number">0.0</span>%         <span class="hljs-number">0.0</span>%
시장 참여 시간            <span class="hljs-number">100.0</span>%       <span class="hljs-number">100.0</span>%

누적 수익률               <span class="hljs-number">72.69</span>%       <span class="hljs-number">191.47</span>%
<span class="hljs-variable constant_">CAGR</span>﹪                    <span class="hljs-number">8.7</span>%         <span class="hljs-number">17.75</span>%

샤프 지수                 <span class="hljs-number">0.67</span>         <span class="hljs-number">0.91</span>
확률적 샤프 비율          <span class="hljs-number">91.92</span>%       <span class="hljs-number">97.3</span>%
스마트 샤프                <span class="hljs-number">0.6</span>          <span class="hljs-number">0.82</span>
소르티노 지수              <span class="hljs-number">0.93</span>         <span class="hljs-number">1.31</span>
스마트 소르티노             <span class="hljs-number">0.84</span>         <span class="hljs-number">1.18</span>
소르티노/√<span class="hljs-number">2</span>                <span class="hljs-number">0.66</span>         <span class="hljs-number">0.93</span>
스마트 소르티노/√<span class="hljs-number">2</span>         <span class="hljs-number">0.59</span>         <span class="hljs-number">0.83</span>
오메가                     <span class="hljs-number">1.18</span>         <span class="hljs-number">1.18</span>

최대 하락폭               -<span class="hljs-number">34.1</span>%       -<span class="hljs-number">49.12</span>%
최장기 하락일             <span class="hljs-number">745</span>          <span class="hljs-number">690</span>
변동성 (연간)             <span class="hljs-number">21.66</span>%       <span class="hljs-number">31.42</span>%
R^<span class="hljs-number">2</span>                      <span class="hljs-number">0.67</span>         <span class="hljs-number">0.67</span>
정보 비율                 <span class="hljs-number">0.05</span>         <span class="hljs-number">0.05</span>
칼마르 비율               <span class="hljs-number">0.26</span>         <span class="hljs-number">0.36</span>
비대칭도                   -<span class="hljs-number">0.54</span>        -<span class="hljs-number">0.14</span>
첨도                     <span class="hljs-number">11.14</span>        <span class="hljs-number">4.01</span>

예상 일일 %              <span class="hljs-number">0.05</span>%        <span class="hljs-number">0.09</span>%
예상 월별 %              <span class="hljs-number">1.0</span>%         <span class="hljs-number">1.96</span>%
예상 연간 %              <span class="hljs-number">11.55</span>%       <span class="hljs-number">23.86</span>%
켈리 기준                <span class="hljs-number">4.81</span>%        <span class="hljs-number">5.39</span>%
파산 위험                 <span class="hljs-number">0.0</span>%         <span class="hljs-number">0.0</span>%
일일 <span class="hljs-title class_">VaR</span>                 -<span class="hljs-number">2.19</span>%       -<span class="hljs-number">3.14</span>%
예상 손실 (cVaR)         -<span class="hljs-number">2.19</span>%       -<span class="hljs-number">3.14</span>%

최대 연속 승리           <span class="hljs-number">10</span>           <span class="hljs-number">8</span>
최대 연속 패배           <span class="hljs-number">7</span>            <span class="hljs-number">6</span>
이익/통곽 비율          <span class="hljs-number">0.14</span>         <span class="hljs-number">0.18</span>
이익/통곽 (1M)          <span class="hljs-number">0.7</span>          <span class="hljs-number">1.12</span>

상환 비율                <span class="hljs-number">0.92</span>         <span class="hljs-number">0.96</span>
이익 요소               <span class="hljs-number">1.14</span>         <span class="hljs-number">1.18</span>
상식적 비율              <span class="hljs-number">1.08</span>         <span class="hljs-number">1.14</span>
<span class="hljs-variable constant_">CPC</span> 지수                <span class="hljs-number">0.57</span>         <span class="hljs-number">0.61</span>
테일 비율               <span class="hljs-number">0.95</span>         <span class="hljs-number">0.97</span>
이상치 승률             <span class="hljs-number">4.9</span>          <span class="hljs-number">3.06</span>
이상치 손실률           <span class="hljs-number">4.78</span>         <span class="hljs-number">3.19</span>

<span class="hljs-variable constant_">MTD</span>                     <span class="hljs-number">2.13</span>%        <span class="hljs-number">5.18</span>%
3M                      <span class="hljs-number">7.15</span>%        <span class="hljs-number">16.73</span>%
6M                      <span class="hljs-number">17.11</span>%       <span class="hljs-number">36.32</span>%
<span class="hljs-variable constant_">YTD</span>                     <span class="hljs-number">16.94</span>%       <span class="hljs-number">34.8</span>%
1Y                      <span class="hljs-number">26.74</span>%       <span class="hljs-number">54.69</span>%
3Y (연간)              <span class="hljs-number">5.54</span>%        <span class="hljs-number">9.97</span>%
5Y (연간)              <span class="hljs-number">8.7</span>%         <span class="hljs-number">17.75</span>%
10Y (연간)             <span class="hljs-number">8.7</span>%         <span class="hljs-number">17.75</span>%
전체 기간 (연간)       <span class="hljs-number">8.7</span>%         <span class="hljs-number">17.75</span>%

최고 효과 일             <span class="hljs-number">9.06</span>%        <span class="hljs-number">10.41</span>%
최악의 날               -<span class="hljs-number">10.94</span>%      -<span class="hljs-number">10.9</span>%
최고 월                  <span class="hljs-number">12.7</span>%        <span class="hljs-number">20.41</span>%
최악의 월               -<span class="hljs-number">13.0</span>%       -<span class="hljs-number">15.13</span>%
최고 연도               <span class="hljs-number">27.04</span>%       <span class="hljs-number">91.38</span>%
최악의 연도             -<span class="hljs-number">19.48</span>%      -<span class="hljs-number">44.71</span>%

평균 하락                  -<span class="hljs-number">2.12</span>%       -<span class="hljs-number">3.55</span>%
평균 하락 일             <span class="hljs-number">21</span>           <span class="hljs-number">23</span>
회복 계수                <span class="hljs-number">1.91</span>         <span class="hljs-number">2.63</span>
울서 지수                <span class="hljs-number">0.1</span>          <span class="hljs-number">0.18</span>
평정 지수                <span class="hljs-number">0.44</span>         <span class="hljs-number">0.42</span>

월별 상승 평균           <span class="hljs-number">4.73</span>%        <span class="hljs-number">7.66</span>%
월별 하락 평균           -<span class="hljs-number">5.82</span>%       -<span class="hljs-number">7.11</span>%
이익 일 %                 <span class="hljs-number">54.41</span>%       <span class="hljs-number">53.7</span>%
이익 월 %                <span class="hljs-number">63.64</span>%       <span class="hljs-number">65.45</span>%
이익 분기 %              <span class="hljs-number">73.68</span>%       <span class="hljs-number">68.42</span>%
이익 연도 %              <span class="hljs-number">80.0</span>%        <span class="hljs-number">80.0</span>%

베타                       -            <span class="hljs-number">1.19</span>
알파                      -            <span class="hljs-number">0.12</span>
상관관계               -            <span class="hljs-number">81.71</span>%
<span class="hljs-title class_">Treynor</span> <span class="hljs-title class_">Ratio</span>           -            <span class="hljs-number">161.56</span>%
없음


최악 <span class="hljs-number">5</span> 번 하락
</code></pre>
<img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_14.png">
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>전략 시각화 대 SPY 벤치마크</li>
</ul>
<p><img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_15.png" alt="이미지1"></p>
<p><img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_16.png" alt="이미지2"></p>
<p><img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_17.png" alt="이미지3"></p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p><img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_18.png" alt="image 1"></p>
<p><img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_19.png" alt="image 2"></p>
<p><img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_20.png" alt="image 3"></p>
<ul>
<li>결과:</li>
</ul>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>
<p>전략 누적 수익률은 약 200%에 비해 벤치마크는 약 75%입니다.</p>
</li>
<li>
<p>전략 누적 수익률(변동성 매칭)은 약 125%입니다.</p>
</li>
<li>
<p>연말 전략 수익률은 약 30%에 비해 벤치마크는 약 15%입니다.</p>
</li>
<li>
<p>월간 수익률 분포: 전략은 약 5%에 비해 벤치마크는 약 3%입니다.</p>
</li>
<li>
<p>롤링 베타는 약 1.5입니다.</p>
</li>
<li>
<p>롤링 변동성은 약 0.2에 비해 벤치마크는 약 0.1입니다.</p>
</li>
<li>
<p>롤링 샤프 비율은 약 2.5입니다.</p>
</li>
<li>
<p>롤링 소르티노 비율은 약 5.0입니다.</p>
</li>
<li>
<p>최악의 손실액은 2021년 12월 28일에 -47%입니다.</p>
</li>
<li>
<p>월간 최소 활동 수익률은 2022년 10월에 -15%입니다.</p>
</li>
<li>
<p>전략 수익률 분위: 분기별으로 약 10% 및 연간으로 약 45%입니다.</p>
</li>
<li>
<p>전략의 누적 수익률 및 샤프 비율이 벤치마크보다 높아, 같은 위험 수준에 더 나은 수익을 창출한다는 것을 보여줍니다.</p>
</li>
<li>
<p>일반적으로 샤프 비율이 1.0보다 크면 투자자들에게 만족스럽거나 양호한 것으로 간주됩니다. 2.0보다 높은 비율은 매우 우수하다고 평가됩니다. 전략의 샤프 비율은 약 2.5입니다.</p>
</li>
<li>
<p>소르티노 비율은 2 이상이면 이상적인 것으로 간주됩니다. 우리의 전략은 약 5.0의 소르티노 비율을 얻습니다.</p>
</li>
<li>
<p>베타가 1보다 큰 경우: 베타가 1.0보다 크면 해당 자산의 가격이 이론적으로 시장보다 더 변동적임을 나타냅니다. 주식의 베타가 1.2면 시장보다 20% 더 변동적이라고 가정됩니다 (롤링 변동성 vs 벤치마크 비교). 테크놀로지 주식은 주요 벤치마크보다 더 높은 베타 값을 갖는 경향이 있습니다.</p>
</li>
<li>
<p>전반적으로 제안된 Equal-Weighted BF Portfolio는 합리적인 투자 수익률을 창출했지만 SPY에 비해 더 높은 변동성을 동반합니다.</p>
</li>
</ul>
<h1>BF의 최대 샤프 비율을 위한 효율적 투자 가장자리</h1>
<ul>
<li>PyPortfolioOpt 라이브러리는 EfficientFrontier 클래스를 제공하며, 이 클래스는 공분산 행렬과 예상 수익을 입력으로 사용합니다. weights 변수는 최대 샤프 비율을 갖는 목표에 따라 각 자산에 대한 최적화된 가중치를 저장합니다.</li>
<li>효율적인 투자 가장자리(Point of Origin)를 위한 라이브러리 가져오기 및 주식 데이터 읽기.</li>
</ul>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js"># 포트폴리오 최적화를 위한 라이브러리 가져오기
<span class="hljs-keyword">from</span> pypfopt.<span class="hljs-property">efficient_frontier</span> <span class="hljs-keyword">import</span> <span class="hljs-title class_">EfficientFrontier</span>
<span class="hljs-keyword">from</span> pypfopt <span class="hljs-keyword">import</span> risk_models
<span class="hljs-keyword">from</span> pypfopt <span class="hljs-keyword">import</span> expected_returns

df=yf.<span class="hljs-title function_">download</span>(tickers, start = <span class="hljs-string">'2020-01-01'</span>)[<span class="hljs-string">'Adj Close'</span>]
df.<span class="hljs-title function_">tail</span>()

<span class="hljs-title class_">Ticker</span>     <span class="hljs-variable constant_">AAPL</span>       <span class="hljs-variable constant_">AMZN</span>       <span class="hljs-variable constant_">GOOG</span>       <span class="hljs-variable constant_">META</span>
<span class="hljs-title class_">Date</span>    
<span class="hljs-number">2024</span>-<span class="hljs-number">07</span>-<span class="hljs-number">02</span> <span class="hljs-number">220.270004</span> <span class="hljs-number">200.000000</span> <span class="hljs-number">186.610001</span> <span class="hljs-number">509.500000</span>
<span class="hljs-number">2024</span>-<span class="hljs-number">07</span>-<span class="hljs-number">03</span> <span class="hljs-number">221.550003</span> <span class="hljs-number">197.589996</span> <span class="hljs-number">187.389999</span> <span class="hljs-number">509.959991</span>
<span class="hljs-number">2024</span>-<span class="hljs-number">07</span>-<span class="hljs-number">05</span> <span class="hljs-number">226.339996</span> <span class="hljs-number">200.000000</span> <span class="hljs-number">191.960007</span> <span class="hljs-number">539.909973</span>
<span class="hljs-number">2024</span>-<span class="hljs-number">07</span>-<span class="hljs-number">08</span> <span class="hljs-number">227.820007</span> <span class="hljs-number">199.289993</span> <span class="hljs-number">190.479996</span> <span class="hljs-number">529.320007</span>
<span class="hljs-number">2024</span>-<span class="hljs-number">07</span>-<span class="hljs-number">09</span> <span class="hljs-number">228.679993</span> <span class="hljs-number">199.339996</span> <span class="hljs-number">190.440002</span> <span class="hljs-number">530.000000</span>
</code></pre>
<ul>
<li>연간화된 기대수익률 및 연간 샘플 공분산 행렬을 계산하고 플로팅합니다.</li>
</ul>
<pre><code class="hljs language-js"># 연간화된 기대수익률 및 연간 샘플 공분산 행렬 계산
mu = expected_returns.<span class="hljs-title function_">mean_historical_return</span>(df) # 기대 수익률
S = risk_models.<span class="hljs-title function_">sample_cov</span>(df) # 공분산 행렬

# 연간화된 기대수익률 시각화
mu

<span class="hljs-title class_">Ticker</span>
<span class="hljs-variable constant_">AAPL</span>    <span class="hljs-number">0.288713</span>
<span class="hljs-variable constant_">AMZN</span>    <span class="hljs-number">0.179139</span>
<span class="hljs-variable constant_">GOOG</span>    <span class="hljs-number">0.255711</span>
<span class="hljs-variable constant_">META</span>    <span class="hljs-number">0.229041</span>
<span class="hljs-attr">dtype</span>: float64

mu.<span class="hljs-property">plot</span>.<span class="hljs-title function_">bar</span>(label=<span class="hljs-string">'연간화된 기대수익률'</span>)
plt.<span class="hljs-title function_">legend</span>()
</code></pre>
<img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_21.png">
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>공분산 행렬 시각화</li>
</ul>
<pre><code class="hljs language-js"># 공분산 행렬 시각화
S

|        | <span class="hljs-variable constant_">AAPL</span>    | <span class="hljs-variable constant_">AMZN</span>    | <span class="hljs-variable constant_">GOOG</span>    | <span class="hljs-variable constant_">META</span>    |
|--------|---------|---------|---------|---------|
| <span class="hljs-variable constant_">AAPL</span>   | <span class="hljs-number">0.106707</span>| <span class="hljs-number">0.071803</span>| <span class="hljs-number">0.070835</span>| <span class="hljs-number">0.086041</span>|
| <span class="hljs-variable constant_">AMZN</span>   | <span class="hljs-number">0.071803</span>| <span class="hljs-number">0.132787</span>| <span class="hljs-number">0.078590</span>| <span class="hljs-number">0.103355</span>|
| <span class="hljs-variable constant_">GOOG</span>   | <span class="hljs-number">0.070835</span>| <span class="hljs-number">0.078590</span>| <span class="hljs-number">0.107778</span>| <span class="hljs-number">0.098501</span>|
| <span class="hljs-variable constant_">META</span>   | <span class="hljs-number">0.086041</span>| <span class="hljs-number">0.103355</span>| <span class="hljs-number">0.098501</span>| <span class="hljs-number">0.213837</span>|

S.<span class="hljs-property">style</span>.<span class="hljs-title function_">background_gradient</span>(cmap=<span class="hljs-string">'coolwarm'</span>)
</code></pre>
<img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_22.png">
<ul>
<li>MSR에 대한 포트폴리오 최적화</li>
</ul>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js"># 최대 샤프 비율을 위한 최적화
ef = <span class="hljs-title class_">EfficientFrontier</span>(mu, S) # 기대수익과 공분산 행렬을 입력으로 제공
weights = ef.<span class="hljs-title function_">max_sharpe</span>() # 샤프 비율 최적화를 위한 가중치 최적화

clean_weights = ef.<span class="hljs-title function_">clean_weights</span>() # clean_weights는 가중치를 반올림하고 거의 <span class="hljs-number">0</span>에 가까운 값을 잘라냄

# 최적화된 가중치와 포트폴리오의 예상 수익을 출력
clean_weights

<span class="hljs-title class_">OrderedDict</span>([(<span class="hljs-string">'AAPL'</span>, <span class="hljs-number">0.66721</span>),
             (<span class="hljs-string">'AMZN'</span>, <span class="hljs-number">0.0</span>),
             (<span class="hljs-string">'GOOG'</span>, <span class="hljs-number">0.33279</span>),
             (<span class="hljs-string">'META'</span>, <span class="hljs-number">0.0</span>)])
</code></pre>
<ul>
<li>MSR 최적화 포트폴리오 생성</li>
</ul>
<pre><code class="hljs language-js"># 최적화된 가중치를 사용하여 새로운 포트폴리오 생성
new_weights = [<span class="hljs-number">0.66721</span>, <span class="hljs-number">0.33279</span>]
optimized_portfolio = df[<span class="hljs-string">'AAPL'</span>]*new_weights[<span class="hljs-number">0</span>] + df[<span class="hljs-string">'GOOG'</span>]*new_weights[<span class="hljs-number">1</span>]
optimized_portfolio # 일일 수익 시각화

<span class="hljs-title class_">Date</span>
<span class="hljs-number">2020</span>-<span class="hljs-number">01</span>-<span class="hljs-number">02</span>     <span class="hljs-number">71.406448</span>
<span class="hljs-number">2020</span>-<span class="hljs-number">01</span>-<span class="hljs-number">03</span>     <span class="hljs-number">70.821647</span>
<span class="hljs-number">2020</span>-<span class="hljs-number">01</span>-<span class="hljs-number">06</span>     <span class="hljs-number">71.763386</span>
<span class="hljs-number">2020</span>-<span class="hljs-number">01</span>-<span class="hljs-number">07</span>     <span class="hljs-number">71.520408</span>
<span class="hljs-number">2020</span>-<span class="hljs-number">01</span>-<span class="hljs-number">08</span>     <span class="hljs-number">72.480875</span>
                 ...    
<span class="hljs-number">2024</span>-<span class="hljs-number">07</span>-<span class="hljs-number">02</span>    <span class="hljs-number">209.068292</span>
<span class="hljs-number">2024</span>-<span class="hljs-number">07</span>-<span class="hljs-number">03</span>    <span class="hljs-number">210.181895</span>
<span class="hljs-number">2024</span>-<span class="hljs-number">07</span>-<span class="hljs-number">05</span>    <span class="hljs-number">214.898680</span>
<span class="hljs-number">2024</span>-<span class="hljs-number">07</span>-<span class="hljs-number">08</span>    <span class="hljs-number">215.393625</span>
<span class="hljs-number">2024</span>-<span class="hljs-number">07</span>-<span class="hljs-number">09</span>    <span class="hljs-number">215.954106</span>
<span class="hljs-title class_">Length</span>: <span class="hljs-number">1136</span>, <span class="hljs-attr">dtype</span>: float64
</code></pre>
<ul>
<li>MSR 누적 수익 시각화</li>
</ul>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-python">optimized_portfolio.plot(label=<span class="hljs-string">'최적화된 포트폴리오'</span>)
plt.legend()
</code></pre>
<p><img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_23.png" alt="이미지"></p>
<ul>
<li>MSR PO는 BF 대신 AAPL과 GOOG (총 2개 자산)만 고려하여 220%의 수익을 제공합니다. 이는 B2로 불리며 페어 트레이딩의 잠재적 후보입니다.</li>
<li>MSR B2 포트폴리오 성과 보고서 및 전략 시각화를 SPY 벤치마크 대비 생성</li>
</ul>
<pre><code class="hljs language-python"><span class="hljs-comment"># 첫 번째 포트폴리오와 최적화된 포트폴리오를 비교하는 새로운 보고서 표시</span>
qs.reports.full(optimized_portfolio, benchmark=portfolio)

성과 지표
                           벤치마크    전략
-------------------------  -----------  ----------
시작 기간               <span class="hljs-number">2020</span>-01-03   <span class="hljs-number">2020</span>-01-03
종료 기간                 <span class="hljs-number">2024</span>-07-09   <span class="hljs-number">2024</span>-07-09
무위험 이자율             <span class="hljs-number">0.0</span>%         <span class="hljs-number">0.0</span>%
시장 참여 시간           <span class="hljs-number">100.0</span>%       <span class="hljs-number">100.0</span>%

누적 수익            <span class="hljs-number">184.73</span>%      <span class="hljs-number">202.43</span>%
CAGR﹪           <span class="hljs-number">17.34</span>%       <span class="hljs-number">18.43</span>%

샤프                     <span class="hljs-number">0.9</span>          <span class="hljs-number">0.96</span>
확률적인 샤프 비율         <span class="hljs-number">97.08</span>%       <span class="hljs-number">97.9</span>%
스마트 샤프               <span class="hljs-number">0.79</span>         <span class="hljs-number">0.84</span>
소르티노                    <span class="hljs-number">1.29</span>         <span class="hljs-number">1.4</span>
스마트 소르티노              <span class="hljs-number">1.13</span>         <span class="hljs-number">1.23</span>
소르티노/√<span class="hljs-number">2</span>                 <span class="hljs-number">0.91</span>         <span class="hljs-number">0.99</span>
스마트 소르티노/√<span class="hljs-number">2</span>           <span class="hljs-number">0.8</span>          <span class="hljs-number">0.87</span>
오메가                      <span class="hljs-number">1.19</span>         <span class="hljs-number">1.19</span>

최대 손실                 -<span class="hljs-number">49.12</span>%      -<span class="hljs-number">33.58</span>%
최장 연속 손실 일수            <span class="hljs-number">690</span>          <span class="hljs-number">542</span>
변동성 (연간)          <span class="hljs-number">31.42</span>%       <span class="hljs-number">30.32</span>%
R^<span class="hljs-number">2</span>                        <span class="hljs-number">0.8</span>          <span class="hljs-number">0.8</span>
정보 비율                  <span class="hljs-number">0.0</span>          <span class="hljs-number">0.0</span>
칼마르                     <span class="hljs-number">0.35</span>         <span class="hljs-number">0.55</span>
외도                       -<span class="hljs-number">0.14</span>        -<span class="hljs-number">0.07</span>
첨도                      <span class="hljs-number">4.02</span>         <span class="hljs-number">4.66</span>

기대되는 일일 %           <span class="hljs-number">0.09</span>%        <span class="hljs-number">0.1</span>%
기대되는 월간 %         <span class="hljs-number">1.92</span>%        <span class="hljs-number">2.03</span>%
기대되는 연간 %          <span class="hljs-number">23.28</span>%       <span class="hljs-number">24.77</span>%
켈리 기준                   <span class="hljs-number">5.11</span>%        <span class="hljs-number">8.13</span>%
파산 위험                <span class="hljs-number">0.0</span>%         <span class="hljs-number">0.0</span>%
일일 가치위험            -<span class="hljs-number">3.14</span>%       -<span class="hljs-number">3.03</span>%
기대되는 실패(조건부 VaR)   -<span class="hljs-number">3.14</span>%       -<span class="hljs-number">3.03</span>%

연속 최대 성공 수          <span class="hljs-number">8</span>            <span class="hljs-number">11</span>
연속 최대 손실 수          <span class="hljs-number">6</span>            <span class="hljs-number">6</span>
이익/손실 비율           <span class="hljs-number">0.17</span>         <span class="hljs-number">0.19</span>
이익/손실 (1M)            <span class="hljs-number">1.1</span>          <span class="hljs-number">1.14</span>

상환 비율                 <span class="hljs-number">0.95</span>         <span class="hljs-number">0.98</span>
이익 요소               <span class="hljs-number">1.17</span>         <span class="hljs-number">1.19</span>
상식적인 비율           <span class="hljs-number">1.14</span>         <span class="hljs-number">1.16</span>
CPC 지수                <span class="hljs-number">0.6</span>          <span class="hljs-number">0.63</span>
꼬리 비율                <span class="hljs-number">0.97</span>         <span class="hljs-number">0.98</span>
이상치 이기는 비율        <span class="hljs-number">3.8</span>          <span class="hljs-number">3.97</span>
이상치 손실 비율         <span class="hljs-number">3.55</span>         <span class="hljs-number">3.62</span>

월말 이익                  <span class="hljs-number">5.18</span>%        <span class="hljs-number">7.14</span>%
<span class="hljs-number">3</span>개월간                   <span class="hljs-number">16.73</span>%       <span class="hljs-number">31.57</span>%
<span class="hljs-number">6</span>개월간                   <span class="hljs-number">36.32</span>%       <span class="hljs-number">26.89</span>%
YTD                      <span class="hljs-number">34.8</span>%        <span class="hljs-number">23.43</span>%
<span class="hljs-number">1</span>년                    <span class="hljs-number">54.69</span>%       <span class="hljs-number">29.71</span>%
<span class="hljs-number">3</span>년 (연간)             <span class="hljs-number">9.97</span>%        <span class="hljs-number">10.51</span>%
<span class="hljs-number">5</span>년 (연간)             <span class="hljs-number">17.34</span>%       <span class="hljs-number">18.43</span>%
<span class="hljs-number">10</span>년 (연간)            <span class="hljs-number">17.34</span>%       <span class="hljs-number">18.43</span>%
최고치 (연간)           <span class="hljs-number">17.34</span>%       <span class="hljs-number">18.43</span>%

최고 수익 날짜         <span class="hljs-number">10.41</span>%       <span class="hljs-number">11.17</span>%
최악의 날              -<span class="hljs-number">10.9</span>%       -<span class="hljs-number">12.32</span>%
최고의 월              <span class="hljs-number">20.41</span>%       <span class="hljs-number">18.65</span>%
최악의 월             -<span class="hljs-number">15.13</span>%      -<span class="hljs-number">12.31</span>%
최고의 연도           <span class="hljs-number">91.38</span>%       <span class="hljs-number">62.29</span>%
최악의 연도          -<span class="hljs-number">44.71</span>%      -<span class="hljs-number">29.98</span>%

평균 하락                 -<span class="hljs-number">3.59</span>%       -<span class="hljs-number">4.0</span>%
평균 하락 일수            <span class="hljs-number">23</span>           <span class="hljs-number">26</span>
회복 요인                  <span class="hljs-number">2.58</span>         <span class="hljs-number">3.91</span>
울서 지수                  <span class="hljs-number">0.18</span>         <span class="hljs-number">0.12</span>
평온 지수                   <span class="hljs-number">0.42</span>         <span class="hljs-number">0.94</span>

평균 상승 월              <span class="hljs-number">7.75</span>%        <span class="hljs-number">8.26</span>%
평균 하락 월           -<span class="hljs-number">6.91</span>%       -<span class="hljs-number">6.96</span>%
이익 일 %                 <span class="hljs-number">53.66</span>%       <span class="hljs-number">54.54</span>%
이익 월 %                <span class="hljs-number">65.45</span>%       <span class="hljs-number">58.18</span>%
이익 분기 %             <span class="hljs-number">68.42</span>%       <span class="hljs-number">57.89</span>%
이익 연도 %              <span class="hljs-number">80.0</span>%        <span class="hljs-number">80.0</span>%

베타                       -            <span class="hljs-number">0.86</span>
알파                      -            <span class="hljs-number">0.05</span>
상관 관계                -            <span class="hljs-number">89.32</span>%
트레이너 비율              -            <span class="hljs-number">234.87</span>%
없음
</code></pre>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>최악의 5번의 Drawdown</li>
</ul>
<p><img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_24.png" alt="Worst Drawdowns"></p>
<ul>
<li>MSR PO 전략 시각화</li>
</ul>
<p><img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_25.png" alt="MSR PO Strategy Visualization"></p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p><img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_26.png" alt="Image 1"></p>
<p><img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_27.png" alt="Image 2"></p>
<p><img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_28.png" alt="Image 3"></p>
<p><img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_29.png" alt="Image 4"></p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>
<p>결론:</p>
</li>
<li>
<p>전략 누적 수익률 약 220%.</p>
</li>
<li>
<p>전략 누적 수익률 (변동성 일치) 약 210%.</p>
</li>
<li>
<p>월별 수익 분포: 전략 약 7% 대 벤치마크 약 3%.</p>
</li>
<li>
<p>롤링 베타 약 0.6</p>
</li>
<li>
<p>롤링 변동성 약 0.2</p>
</li>
<li>
<p>롤링 샤프 비율 약 2.5</p>
</li>
<li>
<p>롤링 소티노 비율 약 5.0</p>
</li>
<li>
<p>최대 손실 약 -31% (2021년 01월 04일)</p>
</li>
<li>
<p>최소 월간 순활 수익 약 -10% (2022년 10월)</p>
</li>
<li>
<p>전략 수익 분위 수: 분기별로 약 10%, 연간으로 약 50%.</p>
</li>
<li>
<p>전략의 누적 수익률과 샤프 비율이 벤치마크보다 높음을 보여줍니다. 이는 더 많은 수익을 가져오지만, 같은 수준의 위험을 감수하고 있음을 의미합니다.</p>
</li>
<li>
<p>베타 값이 1보다 낮다는 것은 MSR B2가 전체 시장보다 덜 변동성이 있다는 것을 의미합니다.</p>
</li>
<li>
<p>전반적으로 최적화된 MSR B2 포트폴리오는 위험-수익 교환 관계 측면에서 50% BF-to-B2 포트폴리오 비용 절감까지 고려하여 평등가중 BF 포트폴리오보다 우수한 성과를 거뒀습니다.</p>
</li>
</ul>
<h1>(NVDA, AMD) 대 S&#x26;P 500 수익성 분석</h1>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>FinanceToolkit [9]를 사용하여 (NVDA, AMD) 대 S&#x26;P 500 수익 분석의 세부 정보를 살펴보겠습니다.</li>
<li>입력한 과거 데이터, 손익 계산서, 수익성 비율, FA 및 TA 지표 가져오기 [9]</li>
</ul>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> matplotlib.<span class="hljs-property">pyplot</span> <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> matplotlib.<span class="hljs-property">ticker</span> <span class="hljs-keyword">as</span> mtick
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> seaborn <span class="hljs-keyword">as</span> sns
<span class="hljs-keyword">from</span> matplotlib <span class="hljs-keyword">import</span> patheffects

<span class="hljs-keyword">from</span> financetoolkit <span class="hljs-keyword">import</span> <span class="hljs-title class_">Toolkit</span>

<span class="hljs-variable constant_">API_KEY</span> = <span class="hljs-string">"YOUR API KEY"</span>

companies = <span class="hljs-title class_">Toolkit</span>([<span class="hljs-string">"NVDA"</span>, <span class="hljs-string">"AMD"</span>], api_key=<span class="hljs-variable constant_">API_KEY</span>, start_date=<span class="hljs-string">"2017-12-31"</span>)

# 손익 계산서
historical_data = companies.<span class="hljs-title function_">get_historical_data</span>()

# 재무 제표 예시
income_statement = companies.<span class="hljs-title function_">get_income_statement</span>()

# 수익성 비율
profitability_ratios = companies.<span class="hljs-property">ratios</span>.<span class="hljs-title function_">collect_profitability_ratios</span>()

# 그리스 금융 지표
all_greeks = companies.<span class="hljs-property">options</span>.<span class="hljs-title function_">collect_all_greeks</span>(expiration_time_range=<span class="hljs-number">180</span>)


# 요소 자산 상관 관계
factor_asset_correlations = companies.<span class="hljs-property">performance</span>.<span class="hljs-title function_">get_factor_asset_correlations</span>(
    period=<span class="hljs-string">"quarterly"</span>
)

# <span class="hljs-title class_">VaR</span>
value_at_risk = companies.<span class="hljs-property">risk</span>.<span class="hljs-title function_">get_value_at_risk</span>(period=<span class="hljs-string">"weekly"</span>)

# <span class="hljs-variable constant_">TA</span> 지표
ichimoku_cloud = companies.<span class="hljs-property">technicals</span>.<span class="hljs-title function_">get_ichimoku_cloud</span>()
</code></pre>
<h2>누적 수익률</h2>
<ul>
<li>NVDA, AMD 및 S&#x26;P 500의 누적 수익률을 시각화합니다. [9]</li>
</ul>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js"><span class="hljs-title function_">display</span>(역사적_데이터)

# 클립 보드에 복사 (이건 <span class="hljs-variable constant_">README</span>에 데이터를 붙여 넣기 위함입니다)
pd.<span class="hljs-property">io</span>.<span class="hljs-property">clipboards</span>.<span class="hljs-title function_">to_clipboard</span>(
    역사적_데이터.<span class="hljs-title function_">xs</span>(<span class="hljs-string">"NVDA"</span>, axis=<span class="hljs-number">1</span>, level=<span class="hljs-number">1</span>).<span class="hljs-property">iloc</span>[:-<span class="hljs-number">1</span>].<span class="hljs-title function_">head</span>().<span class="hljs-title function_">to_markdown</span>(),
    excel=<span class="hljs-title class_">False</span>,
)

# 누적 수익을 위한 라인 차트 생성
ax = 역사적_데이터[<span class="hljs-string">"누적 수익"</span>].<span class="hljs-title function_">plot</span>(
    figsize=(<span class="hljs-number">15</span>, <span class="hljs-number">5</span>),
    lw=<span class="hljs-number">2</span>,
)

# 색상 및 라인 스타일 사용자 정의
ax.<span class="hljs-title function_">set_prop_cycle</span>(color=[<span class="hljs-string">"#007ACC"</span>, <span class="hljs-string">"#FF6F61"</span>, <span class="hljs-string">"#4CAF50"</span>])
ax.<span class="hljs-title function_">set_xlabel</span>(<span class="hljs-string">"년도"</span>)
ax.<span class="hljs-title function_">set_ylabel</span>(<span class="hljs-string">"누적 수익"</span>)
ax.<span class="hljs-title function_">set_title</span>(
    <span class="hljs-string">"NVDA 및 AMD의 누적 수익과 S&#x26;P 500을 벤치마크로 함께한 수익"</span>
)

# 범례 추가
ax.<span class="hljs-title function_">legend</span>([<span class="hljs-string">"NVDA"</span>, <span class="hljs-string">"AMD"</span>, <span class="hljs-string">"S&#x26;P 500"</span>], loc=<span class="hljs-string">"upper left"</span>)

# 가시성을 위해 그리드 라인 추가
ax.<span class="hljs-title function_">grid</span>(<span class="hljs-title class_">True</span>, linestyle=<span class="hljs-string">"--"</span>, alpha=<span class="hljs-number">0.7</span>)

plt.<span class="hljs-title function_">show</span>()
</code></pre>
<img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_30.png">
<h2>변동성</h2>
<ul>
<li>NVDA 및 AMD 대 S&#x26;P 500의 변동성 그래픽화</li>
</ul>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js"><span class="hljs-title function_">print</span>(historical_data[<span class="hljs-string">'Volatility'</span>].<span class="hljs-property">iloc</span>[-<span class="hljs-number">1</span>])
<span class="hljs-variable constant_">NVDA</span>        <span class="hljs-number">0.0324</span>
<span class="hljs-variable constant_">AMD</span>         <span class="hljs-number">0.0345</span>
<span class="hljs-title class_">Benchmark</span>   <span class="hljs-number">0.0125</span>
<span class="hljs-title class_">Name</span>: <span class="hljs-number">2024</span>-<span class="hljs-number">07</span>-<span class="hljs-number">09</span>, <span class="hljs-attr">dtype</span>: float64

historical_data[<span class="hljs-string">'Volatility'</span>].<span class="hljs-property">iloc</span>[-<span class="hljs-number">1</span>].<span class="hljs-property">plot</span>.<span class="hljs-title function_">bar</span>(title=<span class="hljs-string">'Volatility'</span>)
</code></pre>
<p><img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_31.png" alt="Image"></p>
<ul>
<li>저희 두 자산의 변동성이 벤치마크의 3배 정도 더 높다는 것을 알 수 있습니다.</li>
</ul>
<h2>손익계산서</h2>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>2019년부터 2024년까지의 NVDA 및 AMD 손익 계산서를 비교해보세요 [9]</li>
</ul>
<pre><code class="hljs language-js">income_statement를 출력하세요

# 클립보드에 복사하세요 (<span class="hljs-variable constant_">README</span>에 데이터를 붙여넣기 위한 용도입니다)
pd.<span class="hljs-property">io</span>.<span class="hljs-property">clipboards</span>.<span class="hljs-title function_">to_clipboard</span>(
    income_statement.<span class="hljs-property">loc</span>[<span class="hljs-string">"NVDA"</span>].<span class="hljs-title function_">head</span>().<span class="hljs-title function_">to_markdown</span>(), excel=<span class="hljs-title class_">False</span>
)

# 막대 그래프 생성
ebitda_data = income_statement.<span class="hljs-property">loc</span>[:, <span class="hljs-string">"EBITDA"</span>, :].<span class="hljs-property">T</span>
colors = [<span class="hljs-string">"#007ACC"</span>, <span class="hljs-string">"#FF6F61"</span>]
ax = ebitda_data.<span class="hljs-property">plot</span>.<span class="hljs-title function_">bar</span>(figsize=(<span class="hljs-number">15</span>, <span class="hljs-number">5</span>), color=colors)

# 막대 위에 데이터 라벨 추가 (백만으로 나누어 사용자 정의 포맷팅 (백만과 천 단위 구분))
<span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> ax.<span class="hljs-property">patches</span>:
    ebitda_millions = p.<span class="hljs-title function_">get_height</span>() / <span class="hljs-number">1_000_000_000</span>
    label = f<span class="hljs-string">"{ebitda_millions:,.2f} M"</span>
    x = p.<span class="hljs-title function_">get_x</span>() + p.<span class="hljs-title function_">get_width</span>() / <span class="hljs-number">2.0</span>
    y = p.<span class="hljs-title function_">get_height</span>()

    # 라벨이 차트 상단과 너무 가까운지 확인
    <span class="hljs-keyword">if</span> y &#x3C; <span class="hljs-number">0.2</span> * ax.<span class="hljs-title function_">get_ylim</span>()[<span class="hljs-number">1</span>]:
        va = <span class="hljs-string">"bottom"</span>
        xytext = (<span class="hljs-number">0</span>, <span class="hljs-number">5</span>)
    <span class="hljs-attr">else</span>:
        va = <span class="hljs-string">"top"</span>
        xytext = (<span class="hljs-number">0</span>, -<span class="hljs-number">5</span>)

    # 텍스트에 대한 스트로크 효과 생성
    text = ax.<span class="hljs-title function_">annotate</span>(
        label,
        (x, y),
        ha=<span class="hljs-string">"center"</span>,
        va=va,
        fontsize=<span class="hljs-number">10</span>,
        color=<span class="hljs-string">"black"</span>,
        xytext=xytext,
        textcoords=<span class="hljs-string">"offset points"</span>,
    )
    text.<span class="hljs-title function_">set_path_effects</span>([patheffects.<span class="hljs-title function_">withStroke</span>(linewidth=<span class="hljs-number">3</span>, foreground=<span class="hljs-string">"white"</span>)])

# 축 라벨 사용자 정의
plt.<span class="hljs-title function_">xlabel</span>(<span class="hljs-string">""</span>, fontsize=<span class="hljs-number">10</span>)
plt.<span class="hljs-title function_">ylabel</span>(<span class="hljs-string">""</span>, fontsize=<span class="hljs-number">10</span>)

# x tick의 각도 조정
plt.<span class="hljs-title function_">xticks</span>(rotation=<span class="hljs-number">0</span>)

# 제목 설정
plt.<span class="hljs-title function_">title</span>(
    <span class="hljs-string">"Earnings Before Interest, Taxes, Depreciation and Amortization (EBITDA) of NVDA &#x26; AMD"</span>,
    fontsize=<span class="hljs-number">12</span>,
)

# 명확성을 위해 수평 grid 추가
plt.<span class="hljs-title function_">grid</span>(axis=<span class="hljs-string">"y"</span>, linestyle=<span class="hljs-string">"--"</span>, alpha=<span class="hljs-number">0.7</span>)

# y축에 천 단위 구분 추가
ax.<span class="hljs-property">yaxis</span>.<span class="hljs-title function_">set_major_formatter</span>(
    mtick.<span class="hljs-title class_">FuncFormatter</span>(lambda x, <span class="hljs-attr">_</span>: f<span class="hljs-string">"{x / 1_000_000_000:,.0f} M"</span>)
)

# 그래프 출력
plt.<span class="hljs-title function_">show</span>()
</code></pre>
<p><img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_32.png" alt="차트1"></p>
<p><img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_33.png" alt="차트2"></p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p><img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_34.png" alt="Profitability Ratios"></p>
<h2>수익성 비율</h2>
<ul>
<li>NVDA 및 AMD 수익성 비율 2019–2024 시각화 [9]</li>
</ul>
<pre><code class="hljs language-js"><span class="hljs-title function_">display</span>(profitability_ratios)

# 클립 보드로 복사 (이것은 <span class="hljs-variable constant_">README</span>에 데이터를 붙여넣기하기 위한 것입니다)
pd.<span class="hljs-property">io</span>.<span class="hljs-property">clipboards</span>.<span class="hljs-title function_">to_clipboard</span>(
    profitability_ratios.<span class="hljs-property">loc</span>[<span class="hljs-string">"NVDA"</span>].<span class="hljs-title function_">head</span>().<span class="hljs-title function_">to_markdown</span>(), excel=<span class="hljs-title class_">False</span>
)

ratios_to_plot = [
    <span class="hljs-string">"Return on Assets"</span>,
    <span class="hljs-string">"Return on Equity"</span>,
    <span class="hljs-string">"Return on Invested Capital"</span>,
    <span class="hljs-string">"Return on Tangible Assets"</span>,
]

# 그림 생성
ax = (
    (profitability_ratios.<span class="hljs-title function_">dropna</span>(axis=<span class="hljs-number">1</span>) * <span class="hljs-number">100</span>)
    .<span class="hljs-property">loc</span>[<span class="hljs-string">"NVDA"</span>, ratios_to_plot, :]
    .<span class="hljs-property">T</span>.<span class="hljs-title function_">plot</span>(figsize=(<span class="hljs-number">15</span>, <span class="hljs-number">5</span>), title=<span class="hljs-string">"NVDA의 수익성 비율"</span>, lw=<span class="hljs-number">2</span>)
)

# 라인 스타일과 색상 커스터마이징
line_styles = [<span class="hljs-string">"-"</span>, <span class="hljs-string">"--"</span>, <span class="hljs-string">"-."</span>, <span class="hljs-string">":"</span>]
line_colors = [<span class="hljs-string">"blue"</span>, <span class="hljs-string">"red"</span>, <span class="hljs-string">"green"</span>, <span class="hljs-string">"purple"</span>]
<span class="hljs-keyword">for</span> i, line <span class="hljs-keyword">in</span> <span class="hljs-title function_">enumerate</span>(ax.<span class="hljs-title function_">get_lines</span>()):
    line.<span class="hljs-title function_">set_linestyle</span>(line_styles[i])
    line.<span class="hljs-title function_">set_color</span>(line_colors[i])

# 범례 커스터마이징
ax.<span class="hljs-title function_">legend</span>(ratios_to_plot)

# 라벨 및 그리드 추가
plt.<span class="hljs-title function_">xlabel</span>(<span class="hljs-string">"Year"</span>, fontsize=<span class="hljs-number">12</span>)
plt.<span class="hljs-title function_">ylabel</span>(<span class="hljs-string">"Percentage (%)"</span>, fontsize=<span class="hljs-number">12</span>)
plt.<span class="hljs-title function_">grid</span>(<span class="hljs-title class_">True</span>, linestyle=<span class="hljs-string">"--"</span>, alpha=<span class="hljs-number">0.7</span>)

# 제목 커스터마이징
plt.<span class="hljs-title function_">title</span>(<span class="hljs-string">"NVDA의 수익성 비율"</span>)

# 그림 표시
plt.<span class="hljs-title function_">show</span>()
</code></pre>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>-md</p>
<p><img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_35.png" alt="image"></p>
<p><img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_36.png" alt="image"></p>
<ul>
<li>AMD 수익성 비율 그래픽 그리기</li>
</ul>
<pre><code class="hljs language-js"># 클립 보드로 복사 (<span class="hljs-variable constant_">README</span>에 데이터를 붙여넣을 때 사용)
pd.<span class="hljs-property">io</span>.<span class="hljs-property">clipboards</span>.<span class="hljs-title function_">to_clipboard</span>(
    profitability_ratios.<span class="hljs-property">loc</span>[<span class="hljs-string">"AMD"</span>].<span class="hljs-title function_">head</span>().<span class="hljs-title function_">to_markdown</span>(), excel=<span class="hljs-title class_">False</span>
)

ratios_to_plot = [
    <span class="hljs-string">"Return on Assets"</span>,
    <span class="hljs-string">"Return on Equity"</span>,
    <span class="hljs-string">"Return on Invested Capital"</span>,
    <span class="hljs-string">"Return on Tangible Assets"</span>,
]

# 그림 생성
ax = (
    (profitability_ratios.<span class="hljs-title function_">dropna</span>(axis=<span class="hljs-number">1</span>) * <span class="hljs-number">100</span>)
    .<span class="hljs-property">loc</span>[<span class="hljs-string">"AMD"</span>, ratios_to_plot, :]
    .<span class="hljs-property">T</span>.<span class="hljs-title function_">plot</span>(figsize=(<span class="hljs-number">15</span>, <span class="hljs-number">5</span>), title=<span class="hljs-string">"AMD의 수익성 비율"</span>, lw=<span class="hljs-number">2</span>)
)

# 라인 스타일과 색상 사용자 정의
line_styles = [<span class="hljs-string">"-"</span>, <span class="hljs-string">"--"</span>, <span class="hljs-string">"-."</span>, <span class="hljs-string">":"</span>]
line_colors = [<span class="hljs-string">"blue"</span>, <span class="hljs-string">"red"</span>, <span class="hljs-string">"green"</span>, <span class="hljs-string">"purple"</span>]
<span class="hljs-keyword">for</span> i, line <span class="hljs-keyword">in</span> <span class="hljs-title function_">enumerate</span>(ax.<span class="hljs-title function_">get_lines</span>()):
    line.<span class="hljs-title function_">set_linestyle</span>(line_styles[i])
    line.<span class="hljs-title function_">set_color</span>(line_colors[i])

# 범례 사용자 정의
ax.<span class="hljs-title function_">legend</span>(ratios_to_plot)

# 레이블과 그리드 추가
plt.<span class="hljs-title function_">xlabel</span>(<span class="hljs-string">"년도"</span>, fontsize=<span class="hljs-number">12</span>)
plt.<span class="hljs-title function_">ylabel</span>(<span class="hljs-string">"백분율 (%)"</span>, fontsize=<span class="hljs-number">12</span>)
plt.<span class="hljs-title function_">grid</span>(<span class="hljs-title class_">True</span>, linestyle=<span class="hljs-string">"--"</span>, alpha=<span class="hljs-number">0.7</span>)

# 제목 사용자 정의
plt.<span class="hljs-title function_">title</span>(<span class="hljs-string">"AMD의 수익성 비율"</span>)

# 그림 표시
plt.<span class="hljs-title function_">show</span>()
</code></pre>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p><img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_37.png" alt="Image"></p>
<ul>
<li>2023년 NVDA 대 AMD 수익성 비율 검토</li>
</ul>
<pre><code class="hljs language-js"><span class="hljs-title function_">print</span>(profitability_ratios[<span class="hljs-string">'2023'</span>])

<span class="hljs-variable constant_">AMD</span>   매출 이익율                                     <span class="hljs-number">0.4612</span>
      영업 이익율                                   <span class="hljs-number">0.0177</span>
      순이익율                                      <span class="hljs-number">0.0377</span>
      이자 상환 여유성 비율                           <span class="hljs-number">37.283</span>
      세전 순이익 마진                              <span class="hljs-number">0.0217</span>
      유효 세율                                   -<span class="hljs-number">0.7033</span>
      자산 수익률                                   <span class="hljs-number">0.0126</span>
      자본 수익률                                   <span class="hljs-number">0.0154</span>
      투자 자본 이익률                             <span class="hljs-number">0.0146</span>
      자본 운용 이익률                               <span class="hljs-number">0.01</span>
      유형 자산 수익률                             <span class="hljs-number">0.0083</span>
      소득 품질 비율                               <span class="hljs-number">1.952</span>
      <span class="hljs-variable constant_">EBT</span>당 순이익                                <span class="hljs-number">1.6811</span>
      영업현금흐름 대 영업 현금흐름 비율           <span class="hljs-number">0.6725</span>
      <span class="hljs-variable constant_">EBT</span> 대 <span class="hljs-variable constant_">EBIT</span> 비율                           <span class="hljs-number">0.8274</span>
      <span class="hljs-variable constant_">EBIT</span> 대 매출                               <span class="hljs-number">0.0271</span>
<span class="hljs-variable constant_">NVDA</span>  매출 이익율                                    <span class="hljs-number">0.5693</span>
      영업 이익율                                   <span class="hljs-number">0.1566</span>
      순이익율                                      <span class="hljs-number">0.1619</span>
      이자 상환 여유성 비율                        <span class="hljs-number">22.0153</span>
      세전 순이익 마진                             <span class="hljs-number">0.155</span>
      유효 세율                                  -<span class="hljs-number">0.0447</span>
      자산 수익률                                   <span class="hljs-number">0.1023</span>
      자본 수익률                                   <span class="hljs-number">0.1793</span>
      투자 자본 이익률                            <span class="hljs-number">0.1319</span>
      자본 운용 이익률                            <span class="hljs-number">0.1283</span>
      유형 자산 수익률                            <span class="hljs-number">0.0693</span>
      소득 품질 비율                              <span class="hljs-number">1.2914</span>
      <span class="hljs-variable constant_">EBT</span>당 순이익                               <span class="hljs-number">1.0447</span>
      영업현금흐름 대 영업 현금흐름 비율           <span class="hljs-number">0.6751</span>
      <span class="hljs-variable constant_">EBT</span> 대 <span class="hljs-variable constant_">EBIT</span> 비율                           <span class="hljs-number">0.941</span>
      <span class="hljs-variable constant_">EBIT</span> 대 매출                               <span class="hljs-number">0.1647</span>
<span class="hljs-title class_">Name</span>: <span class="hljs-number">2023</span>, <span class="hljs-attr">dtype</span>: float64

plt.<span class="hljs-title function_">figure</span>(figsize=(<span class="hljs-number">14</span>, <span class="hljs-number">8</span>))
prof=profitability_ratios[<span class="hljs-string">'2023'</span>]
cols = [<span class="hljs-string">'NVDA'</span>, <span class="hljs-string">'AMD'</span>]
prof[cols].<span class="hljs-title function_">plot</span>(kind=<span class="hljs-string">'bar'</span>)
</code></pre>
<p><img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_38.png" alt="Image"></p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>2023년 NVDA 대 AMD 수익성 비율 확대</li>
</ul>
<pre><code class="hljs language-js">plt.<span class="hljs-title function_">figure</span>(figsize=(<span class="hljs-number">14</span>, <span class="hljs-number">8</span>))
prof = profitability_ratios[<span class="hljs-string">'2023'</span>]
cols = [<span class="hljs-string">'NVDA'</span>, <span class="hljs-string">'AMD'</span>]
prof[cols].<span class="hljs-title function_">plot</span>(kind=<span class="hljs-string">'bar'</span>)
plt.<span class="hljs-title function_">ylim</span>(-<span class="hljs-number">1</span>, <span class="hljs-number">2.5</span>)
</code></pre>
<p><img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_39.png" alt="Profitability Ratios"></p>
<h2>AMD 대 NVDA 그리스 민감도</h2>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>AMD에 대한 그리스 감수치 분석 중 [9]</li>
</ul>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> matplotlib.<span class="hljs-property">pyplot</span> <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">from</span> matplotlib <span class="hljs-keyword">import</span> cm

fig, ax = plt.<span class="hljs-title function_">subplots</span>(figsize=(<span class="hljs-number">15</span>, <span class="hljs-number">10</span>), ncols=<span class="hljs-number">2</span>, nrows=<span class="hljs-number">2</span>)

delta_over_time_df = pd.<span class="hljs-title class_">DataFrame</span>()
dates = all_greeks.<span class="hljs-property">columns</span>.<span class="hljs-title function_">get_level_values</span>(<span class="hljs-number">0</span>)

# <span class="hljs-number">1</span>, <span class="hljs-number">2</span>개월 ... 처리
<span class="hljs-keyword">for</span> i, time <span class="hljs-keyword">in</span> <span class="hljs-title function_">enumerate</span>(<span class="hljs-title function_">range</span>(<span class="hljs-number">30</span>, <span class="hljs-number">210</span>, <span class="hljs-number">30</span>)):

    <span class="hljs-attr">try</span>:
        period_column = dates[time]
    except <span class="hljs-title class_">IndexError</span>:
        period_column = dates[-<span class="hljs-number">1</span>]

    color = cm.<span class="hljs-title function_">viridis</span>(i / <span class="hljs-number">5</span>)  # 색상 변화에 viridis colormap 사용

    # <span class="hljs-title class_">Delta</span> plot
    ax[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>].<span class="hljs-title function_">plot</span>(all_greeks.<span class="hljs-property">loc</span>[<span class="hljs-string">"AMD"</span>, (period_column, <span class="hljs-string">"Delta"</span>)], color=color)

    # <span class="hljs-title class_">Gamma</span> plot
    ax[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>].<span class="hljs-title function_">plot</span>(all_greeks.<span class="hljs-property">loc</span>[<span class="hljs-string">"AMD"</span>, (period_column, <span class="hljs-string">"Gamma"</span>)], color=color)

    # <span class="hljs-title class_">Theta</span> plot
    ax[<span class="hljs-number">1</span>, <span class="hljs-number">0</span>].<span class="hljs-title function_">plot</span>(all_greeks.<span class="hljs-property">loc</span>[<span class="hljs-string">"AMD"</span>, (period_column, <span class="hljs-string">"Theta"</span>)], color=color)

    # <span class="hljs-title class_">Vega</span> plot
    ax[<span class="hljs-number">1</span>, <span class="hljs-number">1</span>].<span class="hljs-title function_">plot</span>(all_greeks.<span class="hljs-property">loc</span>[<span class="hljs-string">"AMD"</span>, (period_column, <span class="hljs-string">"Vega"</span>)], color=color)

    delta_over_time_df = pd.<span class="hljs-title function_">concat</span>(
        [delta_over_time_df, all_greeks.<span class="hljs-property">loc</span>[<span class="hljs-string">"AMD"</span>, (period_column, <span class="hljs-string">"Delta"</span>)]], axis=<span class="hljs-number">1</span>
    )

date_labels = [
    <span class="hljs-string">"1 달"</span>,
    <span class="hljs-string">"2 달"</span>,
    <span class="hljs-string">"3 달"</span>,
    <span class="hljs-string">"4 달"</span>,
    <span class="hljs-string">"5 달"</span>,
    <span class="hljs-string">"6 달"</span>,
]

delta_over_time_df.<span class="hljs-property">columns</span> = date_labels

# <span class="hljs-title class_">DataFrame</span> 표시
<span class="hljs-title function_">display</span>(delta_over_time_df.<span class="hljs-property">iloc</span>[<span class="hljs-number">7</span>:<span class="hljs-number">12</span>])

# 클립보드로 복사 (<span class="hljs-variable constant_">README</span>에 데이터를 붙여넣으려면)
pd.<span class="hljs-property">io</span>.<span class="hljs-property">clipboards</span>.<span class="hljs-title function_">to_clipboard</span>(delta_over_time_df.<span class="hljs-property">iloc</span>[<span class="hljs-number">7</span>:<span class="hljs-number">12</span>].<span class="hljs-title function_">to_markdown</span>(), excel=<span class="hljs-title class_">False</span>)

# 타이틀 및 레이블
<span class="hljs-keyword">for</span> number1, number2 <span class="hljs-keyword">in</span> [(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>), (<span class="hljs-number">1</span>, <span class="hljs-number">0</span>), (<span class="hljs-number">0</span>, <span class="hljs-number">1</span>), (<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)]:
    ax[number1, number2].<span class="hljs-title function_">set_xlim</span>(
        [all_greeks.<span class="hljs-property">loc</span>[<span class="hljs-string">"AMD"</span>].<span class="hljs-property">index</span>.<span class="hljs-title function_">min</span>(), all_greeks.<span class="hljs-property">loc</span>[<span class="hljs-string">"AMD"</span>].<span class="hljs-property">index</span>.<span class="hljs-title function_">max</span>()]
    )
    ax[number1, number2].<span class="hljs-title function_">grid</span>(<span class="hljs-title class_">True</span>, linestyle=<span class="hljs-string">"--"</span>, alpha=<span class="hljs-number">0.7</span>)
    ax[number1, number2].<span class="hljs-title function_">set_xlabel</span>(<span class="hljs-string">"행사가"</span>)
    ax[number1, number2].<span class="hljs-title function_">set_facecolor</span>(<span class="hljs-string">"#F5F5F5"</span>)

ax[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>].<span class="hljs-title function_">set_title</span>(<span class="hljs-string">"Delta"</span>)
ax[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>].<span class="hljs-title function_">set_title</span>(<span class="hljs-string">"Gamma"</span>)
ax[<span class="hljs-number">1</span>, <span class="hljs-number">0</span>].<span class="hljs-title function_">set_title</span>(<span class="hljs-string">"Theta"</span>)
ax[<span class="hljs-number">1</span>, <span class="hljs-number">1</span>].<span class="hljs-title function_">set_title</span>(<span class="hljs-string">"Vega"</span>)

# 레이아웃 조정
fig.<span class="hljs-title function_">legend</span>(
    date_labels,
    loc=<span class="hljs-string">"upper center"</span>,
    ncol=<span class="hljs-number">6</span>,
    bbox_to_anchor=(<span class="hljs-number">0.5</span>, <span class="hljs-number">0</span>),
    frameon=<span class="hljs-title class_">False</span>,
)
fig.<span class="hljs-title function_">suptitle</span>(
    <span class="hljs-string">"AMD에 대한 그리스 감수치 분석"</span>, fontsize=<span class="hljs-number">30</span>, x=<span class="hljs-number">0.5</span>, y=<span class="hljs-number">0.98</span>, fontfamily=<span class="hljs-string">"cursive"</span>
)

fig.<span class="hljs-title function_">tight_layout</span>()

# 플롯 표시
plt.<span class="hljs-title function_">show</span>()

    <span class="hljs-number">1</span> 달 <span class="hljs-number">2</span> 달 <span class="hljs-number">3</span> 달 <span class="hljs-number">4</span> 달 <span class="hljs-number">5</span> 달 <span class="hljs-number">6</span> 달
<span class="hljs-number">165</span> <span class="hljs-number">0.872</span> <span class="hljs-number">0.8067</span> <span class="hljs-number">0.7692</span> <span class="hljs-number">0.7398</span> <span class="hljs-number">0.7236</span> <span class="hljs-number">0.7113</span>
<span class="hljs-number">170</span> <span class="hljs-number">0.7487</span> <span class="hljs-number">0.698</span> <span class="hljs-number">0.6728</span> <span class="hljs-number">0.6544</span> <span class="hljs-number">0.6449</span> <span class="hljs-number">0.638</span>
<span class="hljs-number">175</span> <span class="hljs-number">0.5863</span> <span class="hljs-number">0.5721</span> <span class="hljs-number">0.5664</span> <span class="hljs-number">0.5631</span> <span class="hljs-number">0.562</span> <span class="hljs-number">0.5615</span>
<span class="hljs-number">180</span> <span class="hljs-number">0.4124</span> <span class="hljs-number">0.442</span> <span class="hljs-number">0.458</span> <span class="hljs-number">0.471</span> <span class="hljs-number">0.4786</span> <span class="hljs-number">0.4848</span>
<span class="hljs-number">185</span> <span class="hljs-number">0.2582</span> <span class="hljs-number">0.3212</span> <span class="hljs-number">0.3555</span> <span class="hljs-number">0.3828</span> <span class="hljs-number">0.3985</span> <span class="hljs-number">0.4108</span>
</code></pre>
<img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_40.png">
<ul>
<li>NVDA에 대한 그리스 감수치 분석 중 [9]</li>
</ul>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> matplotlib.<span class="hljs-property">pyplot</span> <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">from</span> matplotlib <span class="hljs-keyword">import</span> cm

fig, ax = plt.<span class="hljs-title function_">subplots</span>(figsize=(<span class="hljs-number">15</span>, <span class="hljs-number">10</span>), ncols=<span class="hljs-number">2</span>, nrows=<span class="hljs-number">2</span>)

delta_over_time_df = pd.<span class="hljs-title class_">DataFrame</span>()
dates = all_greeks.<span class="hljs-property">columns</span>.<span class="hljs-title function_">get_level_values</span>(<span class="hljs-number">0</span>)

# <span class="hljs-title class_">Loop</span> through different times
<span class="hljs-keyword">for</span> i, time <span class="hljs-keyword">in</span> <span class="hljs-title function_">enumerate</span>(<span class="hljs-title function_">range</span>(<span class="hljs-number">30</span>, <span class="hljs-number">210</span>, <span class="hljs-number">30</span>)):

    <span class="hljs-attr">try</span>:
        period_column = dates[time]
    except <span class="hljs-title class_">IndexError</span>:
        period_column = dates[-<span class="hljs-number">1</span>]

    color = cm.<span class="hljs-title function_">viridis</span>(i / <span class="hljs-number">5</span>)  # <span class="hljs-title class_">Using</span> viridis colormap <span class="hljs-keyword">for</span> color variation

    # <span class="hljs-title class_">Delta</span> plot
    ax[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>].<span class="hljs-title function_">plot</span>(all_greeks.<span class="hljs-property">loc</span>[<span class="hljs-string">"NVDA"</span>, (period_column, <span class="hljs-string">"Delta"</span>)], color=color)

    # <span class="hljs-title class_">Gamma</span> plot
    ax[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>].<span class="hljs-title function_">plot</span>(all_greeks.<span class="hljs-property">loc</span>[<span class="hljs-string">"NVDA"</span>, (period_column, <span class="hljs-string">"Gamma"</span>)], color=color)

    # <span class="hljs-title class_">Theta</span> plot
    ax[<span class="hljs-number">1</span>, <span class="hljs-number">0</span>].<span class="hljs-title function_">plot</span>(all_greeks.<span class="hljs-property">loc</span>[<span class="hljs-string">"NVDA"</span>, (period_column, <span class="hljs-string">"Theta"</span>)], color=color)

    # <span class="hljs-title class_">Vega</span> plot
    ax[<span class="hljs-number">1</span>, <span class="hljs-number">1</span>].<span class="hljs-title function_">plot</span>(all_greeks.<span class="hljs-property">loc</span>[<span class="hljs-string">"NVDA"</span>, (period_column, <span class="hljs-string">"Vega"</span>)], color=color)

    delta_over_time_df = pd.<span class="hljs-title function_">concat</span>(
        [delta_over_time_df, all_greeks.<span class="hljs-property">loc</span>[<span class="hljs-string">"NVDA"</span>, (period_column, <span class="hljs-string">"Delta"</span>)]], axis=<span class="hljs-number">1</span>
    )

date_labels = [
    <span class="hljs-string">"1 Month"</span>,
    <span class="hljs-string">"2 Months"</span>,
    <span class="hljs-string">"3 Months"</span>,
    <span class="hljs-string">"4 Months"</span>,
    <span class="hljs-string">"5 Months"</span>,
    <span class="hljs-string">"6 Months"</span>,
]

delta_over_time_df.<span class="hljs-property">columns</span> = date_labels

# <span class="hljs-title class_">Show</span> the <span class="hljs-title class_">DataFrame</span>
<span class="hljs-title function_">display</span>(delta_over_time_df.<span class="hljs-property">iloc</span>[<span class="hljs-number">7</span>:<span class="hljs-number">12</span>])

# <span class="hljs-title class_">Copy</span> to clipboard (<span class="hljs-variable language_">this</span> is just to paste the data <span class="hljs-keyword">in</span> the <span class="hljs-variable constant_">README</span>)
pd.<span class="hljs-property">io</span>.<span class="hljs-property">clipboards</span>.<span class="hljs-title function_">to_clipboard</span>(delta_over_time_df.<span class="hljs-property">iloc</span>[<span class="hljs-number">7</span>:<span class="hljs-number">12</span>].<span class="hljs-title function_">to_markdown</span>(), excel=<span class="hljs-title class_">False</span>)

# <span class="hljs-title class_">Titles</span> and labels
<span class="hljs-keyword">for</span> number1, number2 <span class="hljs-keyword">in</span> [(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>), (<span class="hljs-number">1</span>, <span class="hljs-number">0</span>), (<span class="hljs-number">0</span>, <span class="hljs-number">1</span>), (<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)]:
    ax[number1, number2].<span class="hljs-title function_">set_xlim</span>(
        [all_greeks.<span class="hljs-property">loc</span>[<span class="hljs-string">"NVDA"</span>].<span class="hljs-property">index</span>.<span class="hljs-title function_">min</span>(), all_greeks.<span class="hljs-property">loc</span>[<span class="hljs-string">"NVDA"</span>].<span class="hljs-property">index</span>.<span class="hljs-title function_">max</span>()]
    )
    ax[number1, number2].<span class="hljs-title function_">grid</span>(<span class="hljs-title class_">True</span>, linestyle=<span class="hljs-string">"--"</span>, alpha=<span class="hljs-number">0.7</span>)
    ax[number1, number2].<span class="hljs-title function_">set_xlabel</span>(<span class="hljs-string">"Strike Price"</span>)
    ax[number1, number2].<span class="hljs-title function_">set_facecolor</span>(<span class="hljs-string">"#F5F5F5"</span>)

ax[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>].<span class="hljs-title function_">set_title</span>(<span class="hljs-string">"Delta"</span>)
ax[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>].<span class="hljs-title function_">set_title</span>(<span class="hljs-string">"Gamma"</span>)
ax[<span class="hljs-number">1</span>, <span class="hljs-number">0</span>].<span class="hljs-title function_">set_title</span>(<span class="hljs-string">"Theta"</span>)
ax[<span class="hljs-number">1</span>, <span class="hljs-number">1</span>].<span class="hljs-title function_">set_title</span>(<span class="hljs-string">"Vega"</span>)

# <span class="hljs-title class_">Adjust</span> layout
fig.<span class="hljs-title function_">legend</span>(
    date_labels,
    loc=<span class="hljs-string">"upper center"</span>,
    ncol=<span class="hljs-number">6</span>,
    bbox_to_anchor=(<span class="hljs-number">0.5</span>, <span class="hljs-number">0</span>),
    frameon=<span class="hljs-title class_">False</span>,
)
fig.<span class="hljs-title function_">suptitle</span>(
    <span class="hljs-string">"Greek Sensitivities for NVDA"</span>, fontsize=<span class="hljs-number">30</span>, x=<span class="hljs-number">0.5</span>, y=<span class="hljs-number">0.98</span>, fontfamily=<span class="hljs-string">"cursive"</span>
)

fig.<span class="hljs-title function_">tight_layout</span>()

# <span class="hljs-title class_">Show</span> the plot
plt.<span class="hljs-title function_">show</span>()

    <span class="hljs-number">1</span> <span class="hljs-title class_">Month</span> <span class="hljs-number">2</span> <span class="hljs-title class_">Months</span> <span class="hljs-number">3</span> <span class="hljs-title class_">Months</span> <span class="hljs-number">4</span> <span class="hljs-title class_">Months</span> <span class="hljs-number">5</span> <span class="hljs-title class_">Months</span> <span class="hljs-number">6</span> <span class="hljs-title class_">Months</span>
<span class="hljs-number">135</span> <span class="hljs-number">0.3367</span> <span class="hljs-number">0.3835</span> <span class="hljs-number">0.4084</span> <span class="hljs-number">0.4282</span> <span class="hljs-number">0.4395</span> <span class="hljs-number">0.4484</span>
<span class="hljs-number">140</span> <span class="hljs-number">0.1525</span> <span class="hljs-number">0.2277</span> <span class="hljs-number">0.2722</span> <span class="hljs-number">0.3087</span> <span class="hljs-number">0.3298</span> <span class="hljs-number">0.3466</span>
<span class="hljs-number">145</span> <span class="hljs-number">0.0539</span> <span class="hljs-number">0.1188</span> <span class="hljs-number">0.1666</span> <span class="hljs-number">0.2099</span> <span class="hljs-number">0.2363</span> <span class="hljs-number">0.2578</span>
<span class="hljs-number">150</span> <span class="hljs-number">0.0149</span> <span class="hljs-number">0.0547</span> <span class="hljs-number">0.0939</span> <span class="hljs-number">0.1349</span> <span class="hljs-number">0.1619</span> <span class="hljs-number">0.1848</span>
<span class="hljs-number">155</span> <span class="hljs-number">0.0033</span> <span class="hljs-number">0.0224</span> <span class="hljs-number">0.049</span> <span class="hljs-number">0.0822</span> <span class="hljs-number">0.1063</span> <span class="hljs-number">0.128</span>
</code></pre>
<img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_41.png">
<p>해석: 옵션 그리스는 옵션 가격이 변동성이나 기초 자산의 가격과 같은 기본 결정 요소에 대한 민감성을 나타내는 재정적 측정치입니다. 그리스는 옵션 포트폴리오를 분석하고 옵션 또는 옵션 포트폴리오의 민감성 분석에 활용됩니다. 이러한 측정치는 많은 투자자에 의해 옵션 거래에 대한 정보를 얻기 위한 필수적인 요소로 간주됩니다.</p>
<p>Delta: 기초 자산의 가격이 $1 증가하면 옵션의 가격이 Delta 금액만큼 변동합니다.</p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>감마는 델타의 변화가 기초 자산 가격 변동과 어떻게 관련되는지를 측정하는 지표입니다. 기초 자산 가격이 $1 증가하면, 옵션의 델타는 감마만큼 변화합니다.</p>
<p>베가는 옵션의 가격이 기초 자산의 변동성에 얼마나 민감한지를 나타내는 옵션 그리스 중 하나입니다. 기초 자산의 변동성이 1% 증가하면, 옵션 가격은 베가만큼 변화합니다.</p>
<p>세타는 옵션 가격이 옵션의 만기까지 남은 시간에 대해 얼마나 민감한지를 나타내는 지표입니다. 옵션의 만기까지 남은 기간이 하루 줄어들면, 옵션 가격은 세타만큼 변화합니다. 세타 옵션 그리스는 시간 가치 손실이라고도 불립니다.</p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>ATM(At the money)은 옵션의 행사 가격이 기초 자산의 현재 시장 가격과 동일한 상황을 말합니다. ATM 콜 옵션은 델타가 0.50입니다.</li>
<li>NVDA/AMD의 ATM 행사 가격 USD는 130/175입니다.</li>
<li>세타는 일반적으로 롱 포지션에 대해 음수로 표현되며, 옵션 가치의 얼마나 많은 부분이 손실되고 있는지를 나타냅니다.</li>
<li>저희의 그래프는 NVDA/AMD의 ATM 세타가 약 -0.3/-0.45임을 보여줍니다.</li>
<li>델타가 . 40-. 60 범위에 있거나 일반적으로 옵션이 ATM일 때 감마가 가장 높습니다. 따라서 만약 옵션의 델타가 +40이고 감마가 10이라면 기초 자산 가격이 1달러 오르면 그 옵션의 델타가 +50이 됩니다.</li>
<li>저희 예시에서 NVDA/AMD의 ATM 감마는 0.05/0.035입니다.</li>
<li>옵션 베가는 기본 주가 변동성에 대한 옵션의 민감도를 보고하는 것입니다. 더 높은 베가 값은 옵션 가격이 변동성 변화에 민감하다는 것을 나타내고, 더 낮은 베가는 옵션 가격이 변동성 변화에 민감하지 않다는 것을 나타냅니다.</li>
<li>우리의 다이어그램은 NVDA/AMD의 ATM 베가가 0.14/0.18임을 나타냅니다.</li>
</ul>
<h2>NVDA &#x26; AMD VaR vs Benchmark</h2>
<ul>
<li>NVDA &#x26; AMD Value-at-Risk (VaR) vs Benchmark을 플로팅합니다. [9]</li>
</ul>













































































<table><thead><tr><th></th><th>NVDA</th><th>AMD</th><th>Benchmark</th></tr></thead><tbody><tr><td>2017-01-02/2017-01-08</td><td>-0.0198</td><td>-0.0141</td><td>-0.0007</td></tr><tr><td>2017-01-09/2017-01-15</td><td>-0.0146</td><td>-0.0356</td><td>-0.0031</td></tr><tr><td>2017-01-16/2017-01-22</td><td>-0.0217</td><td>-0.0627</td><td>-0.0037</td></tr><tr><td>2017-01-23/2017-01-29</td><td>NaN</td><td>-0.004</td><td>-0.0024</td></tr><tr><td>2017-01-30/2017-02-05</td><td>-0.0131</td><td>-0.0192</td><td>-0.005</td></tr><tr><td>...</td><td>...</td><td>...</td><td>...</td></tr><tr><td>2024-06-03/2024-06-09</td><td>-0.0096</td><td>-0.0215</td><td>-0.001</td></tr><tr><td>2024-06-10/2024-06-16</td><td>-0.0042</td><td>-0.0376</td><td>NaN</td></tr><tr><td>2024-06-17/2024-06-23</td><td>-0.0349</td><td>-0.0214</td><td>-0.0025</td></tr><tr><td>2024-06-24/2024-06-30</td><td>-0.0573</td><td>-0.0147</td><td>-0.0038</td></tr><tr><td>2024-07-01/2024-07-07</td><td>-0.0079</td><td>-0.0255</td><td>NaN</td></tr></tbody></table>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p><img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_42.png" alt="이미지"></p>
<p>2024-07 추론: NVDA, AMD 및 S&#x26;P 500의 VaR은 각각 약 5%, 3% 및 1%입니다.</p>
<h2>NVDA 및 AMD의 Fama-French 요인과의 상관 관계</h2>
<ul>
<li>투자자들은 위험을 양적화하고 자본에 대한 예상 수익을 추정하는 데 사용되는 금융 모델을 찾고 있습니다. Fama French 5요인 모델은 가장 고전적인 모델 중 하나입니다(Fama 및 French, 2015).</li>
<li>NVDA와 AMD의 Fama-French 요인과의 상관 관계 탐색</li>
</ul>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js">화면에 요소 대상 상호 상관 관계를 표시합니다.

# 클립 보드에 복사하기 (<span class="hljs-variable constant_">README</span>에 데이터를 붙여넣기하려는 목적)
pd.<span class="hljs-property">io</span>.<span class="hljs-property">clipboards</span>.<span class="hljs-title function_">to_clipboard</span>(
    factor_asset_correlations.<span class="hljs-title function_">xs</span>(<span class="hljs-string">"NVDA"</span>, axis=<span class="hljs-number">1</span>, level=<span class="hljs-number">0</span>)
    .<span class="hljs-property">iloc</span>[:-<span class="hljs-number">1</span>]
    .<span class="hljs-title function_">tail</span>()
    .<span class="hljs-title function_">to_markdown</span>(),
    excel=<span class="hljs-title class_">False</span>,
)

# factor_asset_correlations <span class="hljs-title class_">DataFrame</span>을 정의하세요 (<span class="hljs-title class_">YourDataFrame</span>을 대체하세요)
correlations_aapl = factor_asset_correlations.<span class="hljs-title function_">xs</span>(<span class="hljs-string">"NVDA"</span>, axis=<span class="hljs-number">1</span>, level=<span class="hljs-number">0</span>)
correlations_msft = factor_asset_correlations.<span class="hljs-title function_">xs</span>(<span class="hljs-string">"AMD"</span>, axis=<span class="hljs-number">1</span>, level=<span class="hljs-number">0</span>)

# x축을 공유하며 서브플롯을 만들고 스타일을 사용자 정의하세요
fig, (ax1, ax2) = plt.<span class="hljs-title function_">subplots</span>(<span class="hljs-number">2</span>, <span class="hljs-number">1</span>, figsize=(<span class="hljs-number">10</span>, <span class="hljs-number">8</span>), sharex=<span class="hljs-title class_">True</span>)

# 선에 대한 색상 팔렛트 설정
colors = [<span class="hljs-string">"#007ACC"</span>, <span class="hljs-string">"#FF6F61"</span>, <span class="hljs-string">"#4CAF50"</span>, <span class="hljs-string">"#FFD700"</span>, <span class="hljs-string">"#FF6347"</span>, <span class="hljs-string">"#6A5ACD"</span>, <span class="hljs-string">"#FF8C00"</span>]

# <span class="hljs-variable constant_">AAPL</span>의 상호 상관 관계 그래프
correlations_aapl.<span class="hljs-title function_">plot</span>(
    ax=ax1, title=<span class="hljs-string">"NVDA의 Fama-French Factors와의 상관 관계"</span>, color=colors
)
ax1.<span class="hljs-title function_">set_ylabel</span>(<span class="hljs-string">"상관 관계"</span>)
ax1.<span class="hljs-title function_">legend</span>(loc=<span class="hljs-string">"upper right"</span>, frameon=<span class="hljs-title class_">False</span>)

# <span class="hljs-variable constant_">MSFT</span>의 상호 상관 관계 그래프
correlations_msft.<span class="hljs-title function_">plot</span>(
    ax=ax2, title=<span class="hljs-string">"AMD의 Fama-French Factors와의 상관 관계"</span>, color=colors
)
ax2.<span class="hljs-title function_">set_xlabel</span>(<span class="hljs-string">"날짜"</span>)
ax2.<span class="hljs-title function_">set_ylabel</span>(<span class="hljs-string">"상관 관계"</span>)
ax2.<span class="hljs-title function_">legend</span>(loc=<span class="hljs-string">"upper right"</span>, frameon=<span class="hljs-title class_">False</span>)

# 명확한 그리드 선을 추가하세요
ax1.<span class="hljs-title function_">grid</span>(<span class="hljs-title class_">True</span>, linestyle=<span class="hljs-string">"--"</span>, alpha=<span class="hljs-number">0.5</span>)
ax2.<span class="hljs-title function_">grid</span>(<span class="hljs-title class_">True</span>, linestyle=<span class="hljs-string">"--"</span>, alpha=<span class="hljs-number">0.5</span>)

# 범례 및 레이블을 사용자 정의하세요
ax1.<span class="hljs-title function_">legend</span>(loc=<span class="hljs-string">"upper right"</span>, frameon=<span class="hljs-title class_">False</span>)
ax2.<span class="hljs-title function_">legend</span>(loc=<span class="hljs-string">"upper right"</span>, frameon=<span class="hljs-title class_">False</span>)

# 서브플롯의 배경색을 설정하세요
ax1.<span class="hljs-title function_">set_facecolor</span>(<span class="hljs-string">"#F9F9F9"</span>)
ax2.<span class="hljs-title function_">set_facecolor</span>(<span class="hljs-string">"#F9F9F9"</span>)

# 서브플롯의 위쪽과 오른쪽 테두리를 제거하세요
ax1.<span class="hljs-property">spines</span>[[<span class="hljs-string">"top"</span>, <span class="hljs-string">"right"</span>]].<span class="hljs-title function_">set_visible</span>(<span class="hljs-title class_">False</span>)
ax2.<span class="hljs-property">spines</span>[[<span class="hljs-string">"top"</span>, <span class="hljs-string">"right"</span>]].<span class="hljs-title function_">set_visible</span>(<span class="hljs-title class_">False</span>)

# 간격을 최적화하기 위해 tight 레이아웃 설정
plt.<span class="hljs-title function_">tight_layout</span>()

# 그래프 보기
plt.<span class="hljs-title function_">show</span>()
</code></pre>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>MKT은 시장의 초과수익입니다. 이것은 가치가 가중치가 부여된 시장 포트폴리오의 수익률입니다.</li>
<li>SMB는 소형 주식의 다양한 포트폴리오의 수익률에서 대형 주식의 다양한 포트폴리오의 수익률을 뺀 값입니다.</li>
<li>HML은 고 Book-to-Market 비율을 가진 주식의 다양한 포트폴리오와 저 Book-to-Market 비율을 가진 주식의 다양한 포트폴리오 간의 차이입니다.</li>
<li>RMW는 강한(높고 안정적인) 수익성을 가진 주식의 다양한 포트폴리오와 약한(낮은) 수익성을 가진 주식의 다양한 포트폴리오 간의 차이입니다.</li>
<li>CMA는 저 및 고 투자 기업의 다양한 포트폴리오 간의 차이로 정의됩니다. 여기서 저/고 투자는 재투자 비율이 낮음/높음을 의미합니다.</li>
</ul>
<h2>추론 2024:</h2>
<ul>
<li>HML(NVDA)`HML(AMD)</li>
<li>만약 가치 주식이 성장 주식을 능가할 것이라고 믿는다면, 포트폴리오를 HML 요인이 높은 자산 쪽으로 기울이는 것이 좋습니다.</li>
<li>우리의 예에서는 저 Book-to-Market 비율을 가진 대형기업의 경우, "큰 규모" 및 "낮은 가치" 범주로 분류됩니다. Fama-French 모델에 따르면, 이 기업은 장기적으로 낮은 수익률을 제공할 것으로 예상되며, SMB 및 HML 요인이 모두 음수일 것으로 예상됩니다.</li>
<li>HML 요인과 유사하게 정의된 수익성 요인(RMW)은 운영 수익성이 강한(높음) 기업과 약한(낮은) 기업의 수익률 간의 차이입니다. 우리는 알 수 있습니다.</li>
<li>RMW(NVDA) 약 0.25이며 RMW(AMD) 약 0.1입니다.</li>
</ul>
<h2>TA 이치모쿠 클라우드: NVDA 대 AMD</h2>
<ul>
<li>TA 이치모쿠 클라우드는 시장 심리와 가격 모멘텀을 한눈에 볼 수 있게 하여 트레이더가 추세를 식별하는 데 도움을 줄 수 있습니다.</li>
<li>NVDA &#x26; AMD에 대한 이치모쿠 클라우드 비교</li>
</ul>
<pre><code class="hljs language-js"><span class="hljs-title function_">display</span>(ichimoku_cloud)

# 이치모쿠 클라우드 데이터 데이터프레임 정의
ichimoku_data_aapl = ichimoku_cloud.<span class="hljs-title function_">xs</span>(<span class="hljs-string">"NVDA"</span>, level=<span class="hljs-number">1</span>, axis=<span class="hljs-number">1</span>)
ichimoku_data_msft = ichimoku_cloud.<span class="hljs-title function_">xs</span>(<span class="hljs-string">"AMD"</span>, level=<span class="hljs-number">1</span>, axis=<span class="hljs-number">1</span>)

# 클립보드에 복사 (이것은 <span class="hljs-variable constant_">README</span>에 데이터를 붙여넣기하기 위한 것입니다)
pd.<span class="hljs-property">io</span>.<span class="hljs-property">clipboards</span>.<span class="hljs-title function_">to_clipboard</span>(ichimoku_data_aapl.<span class="hljs-title function_">tail</span>().<span class="hljs-title function_">to_markdown</span>(), excel=<span class="hljs-title class_">False</span>)

# 마지막 <span class="hljs-number">500</span>행 가져오기
ichimoku_data_aapl = ichimoku_data_aapl.<span class="hljs-property">iloc</span>[-<span class="hljs-number">500</span>:]
ichimoku_data_msft = ichimoku_data_msft.<span class="hljs-property">iloc</span>[-<span class="hljs-number">500</span>:]

# 수평 서브플롯을 위한 그림 및 두 개의 축 생성
fig, (ax1, ax2) = plt.<span class="hljs-title function_">subplots</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, figsize=(<span class="hljs-number">15</span>, <span class="hljs-number">6</span>))

# <span class="hljs-title class_">PeriodIndex</span>를 <span class="hljs-title class_">DatetimeIndex</span>로 변환
ichimoku_data_aapl.<span class="hljs-property">index</span> = ichimoku_data_aapl.<span class="hljs-property">index</span>.<span class="hljs-title function_">to_timestamp</span>()
ichimoku_data_msft.<span class="hljs-property">index</span> = ichimoku_data_msft.<span class="hljs-property">index</span>.<span class="hljs-title function_">to_timestamp</span>()

# <span class="hljs-variable constant_">NVDA</span>용 이치모쿠 클라우드 플롯
ax1.<span class="hljs-title function_">plot</span>(
    ichimoku_data_aapl.<span class="hljs-property">index</span>,
    ichimoku_data_aapl[<span class="hljs-string">"Conversion Line"</span>],
    color=<span class="hljs-string">"blue"</span>,
    label=<span class="hljs-string">"Conversion Line (텐칸센)"</span>,
    linewidth=<span class="hljs-number">2</span>,
)
ax1.<span class="hljs-title function_">plot</span>(
    ichimoku_data_aapl.<span class="hljs-property">index</span>,
    ichimoku_data_aapl[<span class="hljs-string">"Base Line"</span>],
    color=<span class="hljs-string">"red"</span>,
    label=<span class="hljs-string">"Base Line (기준선)"</span>,
    linewidth=<span class="hljs-number">2</span>,
)
ax1.<span class="hljs-title function_">fill_between</span>(
    ichimoku_data_aapl.<span class="hljs-property">index</span>,
    ichimoku_data_aapl[<span class="hljs-string">"Leading Span A"</span>],
    ichimoku_data_aapl[<span class="hljs-string">"Leading Span B"</span>],
    where=ichimoku_data_aapl[<span class="hljs-string">"Leading Span A"</span>] >= ichimoku_data_aapl[<span class="hljs-string">"Leading Span B"</span>],
    facecolor=<span class="hljs-string">"green"</span>,
    alpha=<span class="hljs-number">0.2</span>,
    label=<span class="hljs-string">"상승 클라우드"</span>,
)
ax1.<span class="hljs-title function_">fill_between</span>(
    ichimoku_data_aapl.<span class="hljs-property">index</span>,
    ichimoku_data_aapl[<span class="hljs-string">"Leading Span A"</span>],
    ichimoku_data_aapl[<span class="hljs-string">"Leading Span B"</span>],
    where=ichimoku_data_aapl[<span class="hljs-string">"Leading Span A"</span>] &#x3C; ichimoku_data_aapl[<span class="hljs-string">"Leading Span B"</span>],
    facecolor=<span class="hljs-string">"red"</span>,
    alpha=<span class="hljs-number">0.2</span>,
    label=<span class="hljs-string">"하락 클라우드"</span>,
)

# <span class="hljs-variable constant_">NVDA</span>에 대한 범례 및 레이블 사용자 정의
ax1.<span class="hljs-title function_">legend</span>(loc=<span class="hljs-string">"upper left"</span>)
ax1.<span class="hljs-title function_">set_xlabel</span>(<span class="hljs-string">"날짜"</span>, fontsize=<span class="hljs-number">14</span>)
ax1.<span class="hljs-title function_">set_ylabel</span>(<span class="hljs-string">"가격"</span>, fontsize=<span class="hljs-number">14</span>)
ax1.<span class="hljs-title function_">set_title</span>(<span class="hljs-string">"이치모쿠 클라우드 차트 (NVDA)"</span>, fontsize=<span class="hljs-number">16</span>)
ax1.<span class="hljs-title function_">grid</span>(<span class="hljs-title class_">True</span>, linestyle=<span class="hljs-string">"--"</span>, alpha=<span class="hljs-number">0.5</span>)
ax1.<span class="hljs-title function_">set_facecolor</span>(<span class="hljs-string">"#f7f7f7"</span>)
ax1.<span class="hljs-title function_">tick_params</span>(axis=<span class="hljs-string">"both"</span>, which=<span class="hljs-string">"major"</span>, labelsize=<span class="hljs-number">12</span>)

# <span class="hljs-variable constant_">MSFT</span>용 이치모쿠 클라우드 플롯
ax2.<span class="hljs-title function_">plot</span>(
    ichimoku_data_msft.<span class="hljs-property">index</span>,
    ichimoku_data_msft[<span class="hljs-string">"Conversion Line"</span>],
    color=<span class="hljs-string">"blue"</span>,
    label=<span class="hljs-string">"Conversion Line (텐칸센)"</span>,
    linewidth=<span class="hljs-number">2</span>,
)
ax2.<span class="hljs-title function_">plot</span>(
    ichimoku_data_msft.<span class="hljs-property">index</span>,
    ichimoku_data_msft[<span class="hljs-string">"Base Line"</span>],
    color=<span class="hljs-string">"red"</span>,
    label=<span class="hljs-string">"Base Line (기준선)"</span>,
    linewidth=<span class="hljs-number">2</span>,
)
ax2.<span class="hljs-title function_">fill_between</span>(
    ichimoku_data_msft.<span class="hljs-property">index</span>,
    ichimoku_data_msft[<span class="hljs-string">"Leading Span A"</span>],
    ichimoku_data_msft[<span class="hljs-string">"Leading Span B"</span>],
    where=ichimoku_data_msft[<span class="hljs-string">"Leading Span A"</span>] >= ichimoku_data_msft[<span class="hljs-string">"Leading Span B"</span>],
    facecolor=<span class="hljs-string">"green"</span>,
    alpha=<span class="hljs-number">0.2</span>,
    label=<span class="hljs-string">"상승 클라우드"</span>,
)
ax2.<span class="hljs-title function_">fill_between</span>(
    ichimoku_data_msft.<span class="hljs-property">index</span>,
    ichimoku_data_msft[<span class="hljs-string">"Leading Span A"</span>],
    ichimoku_data_msft[<span class="hljs-string">"Leading Span B"</span>],
    where=ichimoku_data_msft[<span class="hljs-string">"Leading Span A"</span>] &#x3C; ichimoku_data_msft[<span class="hljs-string">"Leading Span B"</span>],
    facecolor=<span class="hljs-string">"red"</span>,
    alpha=<span class="hljs-number">0.2</span>,
    label=<span class="hljs-string">"하락 클라우드"</span>,
)

# <span class="hljs-variable constant_">AMD</span>에 대한 범례 및 레이블 사용자 정의
ax2.<span class="hljs-title function_">legend</span>(loc=<span class="hljs-string">"upper left"</span>)
ax2.<span class="hljs-title function_">set_xlabel</span>(<span class="hljs-string">"날짜"</span>, fontsize=<span class="hljs-number">14</span>)
ax2.<span class="hljs-title function_">set_ylabel</span>(<span class="hljs-string">"가격"</span>, fontsize=<span class="hljs-number">14</span>)
ax2.<span class="hljs-title function_">set_title</span>(<span class="hljs-string">"이치모쿠 클라우드 차트 (AMD)"</span>, fontsize=<span class="hljs-number">16</span>)
ax2.<span class="hljs-title function_">grid</span>(<span class="hljs-title class_">True</span>, linestyle=<span class="hljs-string">"--"</span>, alpha=<span class="hljs-number">0.5</span>)
ax2.<span class="hljs-title function_">set_facecolor</span>(<span class="hljs-string">"#f7f7f7"</span>)
ax2.<span class="hljs-title function_">tick_params</span>(axis=<span class="hljs-string">"both"</span>, which=<span class="hljs-string">"major"</span>, labelsize=<span class="hljs-number">12</span>)

# 서브플롯 간의 간격 조정
plt.<span class="hljs-title function_">tight_layout</span>()

# 플롯 보기
plt.<span class="hljs-title function_">show</span>()
</code></pre>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p><img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_45.png" alt="이미지"></p>
<ul>
<li>이 그래프는 NVDA 및 AMD가 각각 상승 및 하락하는 단기 추세를 따르는 것을 보여줍니다. AMD 플롯을 보면 2024년 7월에 Tenkan Sen(파란색 선)과 Kijun Sen(빨간색 선)이 명확히 교차하는 것을 볼 수 있습니다.</li>
</ul>
<h2>1년 빅테크 주가 예측</h2>
<ul>
<li>FinanceToolkit이 1년 빅테크 주식을 예측할 수 있나요?</li>
<li>회사 티커로 Toolkit을 초기화하고 1년 주식 가격 시뮬레이션을 플로팅하기 [9]</li>
</ul>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js"># 회사 티커로 <span class="hljs-title class_">Toolkit</span>을 초기화합니다
회사 = <span class="hljs-title class_">Toolkit</span>(
    [<span class="hljs-string">"AAPL"</span>, <span class="hljs-string">"MSFT"</span>, <span class="hljs-string">"GOOGL"</span>, <span class="hljs-string">"AMZN"</span>], api_key=<span class="hljs-variable constant_">API_KEY</span>, start_date=<span class="hljs-string">"2005-01-01"</span>
)

주가모의실험 = 회사.<span class="hljs-property">options</span>.<span class="hljs-title function_">get_stock_price_simulation</span>(timesteps=<span class="hljs-number">10</span>)

fig, ax = plt.<span class="hljs-title function_">subplots</span>(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, figsize=(<span class="hljs-number">15</span>, <span class="hljs-number">10</span>))

주가모의실험_전치 = 주가모의실험.<span class="hljs-property">T</span>
주가모의실험_전치.<span class="hljs-property">index</span> = (
    주가모의실험_전치.<span class="hljs-property">index</span>.<span class="hljs-title function_">astype</span>(<span class="hljs-string">"datetime64[ns]"</span>)
)

<span class="hljs-keyword">for</span> i, 티커 <span class="hljs-keyword">in</span> <span class="hljs-title function_">enumerate</span>(회사.<span class="hljs-property">_tickers</span>):
    ax[i <span class="hljs-comment">// 2, i % 2].plot(주가모의실험_전치[티커])</span>
    ax[i <span class="hljs-comment">// 2, i % 2].set_title(티커)</span>
    ax[i <span class="hljs-comment">// 2, i % 2].xaxis.set_tick_params(rotation=20)</span>
    ax[i <span class="hljs-comment">// 2, i % 2].yaxis.set_tick_params(labelsize=8)</span>
    ax[i <span class="hljs-comment">// 2, i % 2].grid(linestyle="--", alpha=0.5)</span>

fig.<span class="hljs-title function_">suptitle</span>(<span class="hljs-string">"주가 모의실험"</span>, fontweight=<span class="hljs-string">"bold"</span>)
fig.<span class="hljs-title function_">tight_layout</span>()
plt.<span class="hljs-title function_">show</span>()
</code></pre>
<img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_46.png">
<ul>
<li>이러한 예측은 시간이 흐름에 따른 자본 가격의 이항 리턴 분포에 기반합니다. 이 모델에서는 각 반복마다 두 가지 가능한 결과가 있습니다 — 상승하거나 하락하며, 이는 이항 트리를 따릅니다.</li>
<li>시간에 따라 이 두 값을 그리는 것은 이항 트리를 만드는 것으로 알려져 있습니다. 이항 모델에 대한 자세한 내용은 Equity Derivatives의 가격 결정 및 분석(금융 Toolbox)을 참조하십시오.</li>
<li>이 모델은 직관적이며 잘 알려진 Black-Scholes 모델보다 실무에서 더 자주 사용됩니다.</li>
</ul>
<h2>META 캔들스틱 &#x26; 기술 분석 지표</h2>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>마침내, 지난 729일 동안의 META TA 전략들을 탐색해 보겠습니다.</li>
<li>주식 데이터 읽기</li>
</ul>
<pre><code class="hljs language-js">ticker=<span class="hljs-string">"META"</span>
dfme = yf.<span class="hljs-title function_">download</span>(ticker, start = <span class="hljs-string">'2020-01-01'</span>)
</code></pre>
<ul>
<li>META 캔들스틱 차트 2020–2024 및 TA 지표 표시</li>
</ul>
<pre><code class="hljs language-js"># 이동평균 추가
dfme[<span class="hljs-string">'EMA9'</span>] = dfme[<span class="hljs-string">'Adj Close'</span>].<span class="hljs-title function_">ewm</span>(span = <span class="hljs-number">9</span>, adjust = <span class="hljs-title class_">False</span>).<span class="hljs-title function_">mean</span>() # 지수 이동평균 <span class="hljs-number">9</span>기간
dfme[<span class="hljs-string">'SMA20'</span>] = dfme[<span class="hljs-string">'Adj Close'</span>].<span class="hljs-title function_">rolling</span>(<span class="hljs-variable language_">window</span>=<span class="hljs-number">20</span>).<span class="hljs-title function_">mean</span>() # 단순 이동평균 <span class="hljs-number">20</span>기간
dfme[<span class="hljs-string">'SMA50'</span>] = dfme[<span class="hljs-string">'Adj Close'</span>].<span class="hljs-title function_">rolling</span>(<span class="hljs-variable language_">window</span>=<span class="hljs-number">50</span>).<span class="hljs-title function_">mean</span>() # 단순 이동평균 <span class="hljs-number">50</span>기간
dfme[<span class="hljs-string">'SMA100'</span>] = dfme[<span class="hljs-string">'Adj Close'</span>].<span class="hljs-title function_">rolling</span>(<span class="hljs-variable language_">window</span>=<span class="hljs-number">100</span>).<span class="hljs-title function_">mean</span>() # 단순 이동평균 <span class="hljs-number">100</span>기간
dfme[<span class="hljs-string">'SMA200'</span>] = dfme[<span class="hljs-string">'Adj Close'</span>].<span class="hljs-title function_">rolling</span>(<span class="hljs-variable language_">window</span>=<span class="hljs-number">200</span>).<span class="hljs-title function_">mean</span>() # 단순 이동평균 <span class="hljs-number">200</span>기간

# <span class="hljs-number">14</span>기간 <span class="hljs-variable constant_">RSI</span> 추가
delta = dfme[<span class="hljs-string">'Adj Close'</span>].<span class="hljs-title function_">diff</span>() # 델타 계산
gain = delta.<span class="hljs-title function_">where</span>(delta > <span class="hljs-number">0</span>,<span class="hljs-number">0</span>) # 상승값 획득
loss = -delta.<span class="hljs-title function_">where</span>(delta &#x3C; <span class="hljs-number">0</span>,<span class="hljs-number">0</span>) # 하락값 획득
avg_gain = gain.<span class="hljs-title function_">rolling</span>(<span class="hljs-variable language_">window</span>=<span class="hljs-number">14</span>).<span class="hljs-title function_">mean</span>() # <span class="hljs-number">14</span>기간 평균 상승값 측정
avg_loss = loss.<span class="hljs-title function_">rolling</span>(<span class="hljs-variable language_">window</span>=<span class="hljs-number">14</span>).<span class="hljs-title function_">mean</span>() # <span class="hljs-number">14</span>기간 평균 하락값 측정
rs = avg_gain/avg_loss # <span class="hljs-variable constant_">RS</span> 계산
dfme[<span class="hljs-string">'RSI'</span>] = <span class="hljs-number">100</span> - (<span class="hljs-number">100</span> / (<span class="hljs-number">1</span> + rs)) # 데이터 프레임에 <span class="hljs-variable constant_">RSI</span> 열 생성

# <span class="hljs-number">20</span>기간 볼린저 밴드 추가
dfme[<span class="hljs-string">'BB_UPPER'</span>] = dfme[<span class="hljs-string">'SMA20'</span>] + <span class="hljs-number">2</span>*dfme[<span class="hljs-string">'Adj Close'</span>].<span class="hljs-title function_">rolling</span>(<span class="hljs-variable language_">window</span>=<span class="hljs-number">20</span>).<span class="hljs-title function_">std</span>() # 상단 밴드
dfme[<span class="hljs-string">'BB_LOWER'</span>] = dfme[<span class="hljs-string">'SMA20'</span>] - <span class="hljs-number">2</span>*dfme[<span class="hljs-string">'Adj Close'</span>].<span class="hljs-title function_">rolling</span>(<span class="hljs-variable language_">window</span>=<span class="hljs-number">20</span>).<span class="hljs-title function_">std</span>() # 하단 밴드

# <span class="hljs-number">14</span>기간 <span class="hljs-variable constant_">ATR</span> 추가
dfme[<span class="hljs-string">'TR'</span>] = pd.<span class="hljs-title class_">DataFrame</span>(np.<span class="hljs-title function_">maximum</span>(np.<span class="hljs-title function_">maximum</span>(dfme[<span class="hljs-string">'High'</span>] - dfme[<span class="hljs-string">'Low'</span>], <span class="hljs-title function_">abs</span>(dfme[<span class="hljs-string">'High'</span>] - dfme[<span class="hljs-string">'Adj Close'</span>].<span class="hljs-title function_">shift</span>())), <span class="hljs-title function_">abs</span>(dfme[<span class="hljs-string">'Low'</span>] - dfme[<span class="hljs-string">'Adj Close'</span>].<span class="hljs-title function_">shift</span>())), index = dfme.<span class="hljs-property">index</span>)
dfme[<span class="hljs-string">'ATR'</span>] = dfme[<span class="hljs-string">'TR'</span>].<span class="hljs-title function_">rolling</span>(<span class="hljs-variable language_">window</span> = <span class="hljs-number">14</span>).<span class="hljs-title function_">mean</span>() # 데이터 프레임에 <span class="hljs-variable constant_">ATR</span> 열 생성

# 지표와 함께 캔들스틱 차트 표시
fig = <span class="hljs-title function_">make_subplots</span>(rows=<span class="hljs-number">4</span>, cols=<span class="hljs-number">1</span>, shared_xaxes=<span class="hljs-title class_">True</span>, vertical_spacing=<span class="hljs-number">0.05</span>,row_heights=[<span class="hljs-number">0.6</span>, <span class="hljs-number">0.10</span>, <span class="hljs-number">0.10</span>, <span class="hljs-number">0.20</span>])

# 캔들스틱
fig.<span class="hljs-title function_">add_trace</span>(go.<span class="hljs-title class_">Candlestick</span>(x=dfme.<span class="hljs-property">index</span>,
                             open=dfme[<span class="hljs-string">'Open'</span>],
                             high=dfme[<span class="hljs-string">'High'</span>],
                             low=dfme[<span class="hljs-string">'Low'</span>],
                             close=dfme[<span class="hljs-string">'Adj Close'</span>],
                             name=<span class="hljs-string">'META'</span>),
              row=<span class="hljs-number">1</span>, col=<span class="hljs-number">1</span>)

# 이동평균
fig.<span class="hljs-title function_">add_trace</span>(go.<span class="hljs-title class_">Scatter</span>(x=dfme.<span class="hljs-property">index</span>,
                         y=dfme[<span class="hljs-string">'EMA9'</span>],
                         mode=<span class="hljs-string">'lines'</span>,
                         line=<span class="hljs-title function_">dict</span>(color=<span class="hljs-string">'#90EE90'</span>),
                         name=<span class="hljs-string">'EMA9'</span>),
              row=<span class="hljs-number">1</span>, col=<span class="hljs-number">1</span>)

# 이하 생략
...

fig.<span class="hljs-title function_">show</span>()
</code></pre>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_47.png">
<h2>META RSI 대 MA 백테스팅</h2>
<ul>
<li>기술적 분석 백테스팅: 지난 729일 동안의 일별 META 데이터에서 RSI 및 MA 전략의 기대 수익 비교</li>
</ul>
<pre><code class="hljs language-python">end_date = dt.datetime.now() <span class="hljs-comment"># 3월 21일 날짜를 정의</span>
start_date = end_date - dt.timedelta(days=<span class="hljs-number">729</span>) <span class="hljs-comment"># 지난 729일 동안의 시간별 데이터 로딩</span>

hourly_eur_usd = yf.download(<span class="hljs-string">'META'</span>, start=start_date, end=end_date, interval=<span class="hljs-string">'1d'</span>)
hourly_eur_usd 

           Open       High       Low        Close      Adj Close   Volume
Date      
<span class="hljs-number">2022</span>-07-<span class="hljs-number">12</span> <span class="hljs-number">164.800003</span> <span class="hljs-number">165.910004</span> <span class="hljs-number">162.100006</span> <span class="hljs-number">163.270004</span> <span class="hljs-number">162.935181</span> <span class="hljs-number">16639700</span>
<span class="hljs-number">2022</span>-07-<span class="hljs-number">13</span> <span class="hljs-number">160.160004</span> <span class="hljs-number">164.979996</span> <span class="hljs-number">159.610001</span> <span class="hljs-number">163.490005</span> <span class="hljs-number">163.154739</span> <span class="hljs-number">16555100</span>
<span class="hljs-number">2022</span>-07-<span class="hljs-number">14</span> <span class="hljs-number">161.220001</span> <span class="hljs-number">162.589996</span> <span class="hljs-number">157.279999</span> <span class="hljs-number">158.050003</span> <span class="hljs-number">157.725891</span> <span class="hljs-number">23765200</span>
<span class="hljs-number">2022</span>-07-<span class="hljs-number">15</span> <span class="hljs-number">160.539993</span> <span class="hljs-number">164.979996</span> <span class="hljs-number">159.820007</span> <span class="hljs-number">164.699997</span> <span class="hljs-number">164.362244</span> <span class="hljs-number">23342800</span>
<span class="hljs-number">2022</span>-07-<span class="hljs-number">18</span> <span class="hljs-number">166.750000</span> <span class="hljs-number">171.690002</span> <span class="hljs-number">165.639999</span> <span class="hljs-number">167.229996</span> <span class="hljs-number">166.887054</span> <span class="hljs-number">23574300</span>
<span class="hljs-meta">... </span>... ... ... ... ... ...
<span class="hljs-number">2024</span>-07-02 <span class="hljs-number">500.760010</span> <span class="hljs-number">510.500000</span> <span class="hljs-number">499.450012</span> <span class="hljs-number">509.500000</span> <span class="hljs-number">509.500000</span> <span class="hljs-number">7739500</span>
<span class="hljs-number">2024</span>-07-03 <span class="hljs-number">506.369995</span> <span class="hljs-number">511.279999</span> <span class="hljs-number">506.019989</span> <span class="hljs-number">509.959991</span> <span class="hljs-number">509.959991</span> <span class="hljs-number">6005600</span>
<span class="hljs-number">2024</span>-07-05 <span class="hljs-number">511.600006</span> <span class="hljs-number">540.869995</span> <span class="hljs-number">511.600006</span> <span class="hljs-number">539.909973</span> <span class="hljs-number">539.909973</span> <span class="hljs-number">21354100</span>
<span class="hljs-number">2024</span>-07-08 <span class="hljs-number">542.349976</span> <span class="hljs-number">542.809998</span> <span class="hljs-number">526.650024</span> <span class="hljs-number">529.320007</span> <span class="hljs-number">529.320007</span> <span class="hljs-number">14917500</span>
<span class="hljs-number">2024</span>-07-09 <span class="hljs-number">533.750000</span> <span class="hljs-number">537.479980</span> <span class="hljs-number">528.190002</span> <span class="hljs-number">530.000000</span> <span class="hljs-number">530.000000</span> <span class="hljs-number">8753200</span>
<span class="hljs-number">501</span> rows × <span class="hljs-number">6</span> columns
</code></pre>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>RSI 백테스팅 전략 구현하기</li>
</ul>
<pre><code class="hljs language-js"># <span class="hljs-variable constant_">TA</span> 라이브러리를 사용하여 <span class="hljs-variable constant_">RSI</span> 계산하기
hourly_eur_usd[<span class="hljs-string">'rsi'</span>] = ta.<span class="hljs-property">momentum</span>.<span class="hljs-title class_">RSIIndicator</span>(hourly_eur_usd[<span class="hljs-string">'Adj Close'</span>], <span class="hljs-variable language_">window</span>=<span class="hljs-number">14</span>).<span class="hljs-title function_">rsi</span>()

# <span class="hljs-variable constant_">RSI</span> 전략의 매개변수 정의
rsi_period = <span class="hljs-number">14</span>
overbought = <span class="hljs-number">80</span>
oversold = <span class="hljs-number">40</span>

# 신호를 저장할 새 열 생성
hourly_eur_usd[<span class="hljs-string">'signal'</span>] = <span class="hljs-number">0</span> # 포지션을 가지지 않을 때 <span class="hljs-string">'signal'</span> = <span class="hljs-number">0</span>

# 진입점 생성
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-title function_">range</span>(rsi_period, <span class="hljs-title function_">len</span>(hourly_eur_usd)):
    <span class="hljs-keyword">if</span> hourly_eur_usd[<span class="hljs-string">'rsi'</span>][i] > overbought and hourly_eur_usd[<span class="hljs-string">'rsi'</span>][i - <span class="hljs-number">1</span>] &#x3C;= <span class="hljs-attr">overbought</span>:
        hourly_eur_usd[<span class="hljs-string">'signal'</span>][i] = -<span class="hljs-number">1</span> # <span class="hljs-string">'signal'</span> = -<span class="hljs-number">1</span> 일 때 판매
    elif hourly_eur_usd[<span class="hljs-string">'rsi'</span>][i] &#x3C; oversold and hourly_eur_usd[<span class="hljs-string">'rsi'</span>][i - <span class="hljs-number">1</span>] >= <span class="hljs-attr">oversold</span>:
        hourly_eur_usd[<span class="hljs-string">'signal'</span>][i] = <span class="hljs-number">1</span> # <span class="hljs-string">'signal'</span> = <span class="hljs-number">1</span> 일 때 구매
        
# 통화쌍의 일일 수익률 계산
hourly_eur_usd[<span class="hljs-string">'returns'</span>] = hourly_eur_usd[<span class="hljs-string">'Adj Close'</span>].<span class="hljs-title function_">pct_change</span>()
hourly_eur_usd[<span class="hljs-string">'cumulative_returns'</span>] = (<span class="hljs-number">1</span> + hourly_eur_usd[<span class="hljs-string">'returns'</span>]).<span class="hljs-title function_">cumprod</span>() - <span class="hljs-number">1</span> # 기간의 총 수익률

# 신호를 수익에 적용
hourly_eur_usd[<span class="hljs-string">'strategy_returns'</span>] = hourly_eur_usd[<span class="hljs-string">'signal'</span>].<span class="hljs-title function_">shift</span>(<span class="hljs-number">1</span>) * hourly_eur_usd[<span class="hljs-string">'returns'</span>]

# 전략의 누적 수익 계산
hourly_eur_usd[<span class="hljs-string">'cumulative_strategy_returns'</span>] = (<span class="hljs-number">1</span> + hourly_eur_usd[<span class="hljs-string">'strategy_returns'</span>]).<span class="hljs-title function_">cumprod</span>() - <span class="hljs-number">1</span>

# 초기 자본을 $100으로 설정
initial_capital = <span class="hljs-number">100</span>

# 전체 포트폴리오 가치 계산
hourly_eur_usd[<span class="hljs-string">'portfolio_value'</span>] = (<span class="hljs-number">1</span> + hourly_eur_usd[<span class="hljs-string">'strategy_returns'</span>]).<span class="hljs-title function_">cumprod</span>() * initial_capital

# 거래 수, 초기 자본, 최종 자본 출력
num_trades = hourly_eur_usd[<span class="hljs-string">'signal'</span>].<span class="hljs-title function_">abs</span>().<span class="hljs-title function_">sum</span>()
final_capital = hourly_eur_usd[<span class="hljs-string">'portfolio_value'</span>].<span class="hljs-property">iloc</span>[-<span class="hljs-number">1</span>]
total_return = (final_capital - initial_capital) / initial_capital * <span class="hljs-number">100</span>

<span class="hljs-title function_">print</span>(<span class="hljs-string">'\n'</span>)
<span class="hljs-title function_">print</span>(f<span class="hljs-string">"거래 수: {num_trades}"</span>)
<span class="hljs-title function_">print</span>(f<span class="hljs-string">"초기 자본: ${initial_capital}"</span>)
<span class="hljs-title function_">print</span>(f<span class="hljs-string">"최종 자본: ${final_capital:.2f}"</span>)
<span class="hljs-title function_">print</span>(f<span class="hljs-string">"총 수익률: {total_return:.2f}%"</span>)
<span class="hljs-title function_">print</span>(<span class="hljs-string">'\n'</span>)

# 포트폴리오 총 가치 플로팅
fig = go.<span class="hljs-title class_">Figure</span>()

fig.<span class="hljs-title function_">add_trace</span>(go.<span class="hljs-title class_">Scatter</span>(x=hourly_eur_usd.<span class="hljs-property">index</span>,
                         y=hourly_eur_usd[<span class="hljs-string">'portfolio_value'</span>].<span class="hljs-title function_">round</span>(<span class="hljs-number">2</span>),
                         mode=<span class="hljs-string">'lines'</span>,
                         line=<span class="hljs-title function_">dict</span>(color=<span class="hljs-string">'#00BFFF'</span>),
                         name=<span class="hljs-string">'포트폴리오 가치'</span>))

fig.<span class="hljs-title function_">update_layout</span>(title=<span class="hljs-string">'예상 수익 RSI 전략 META 데이터'</span>,
                  xaxis_title=<span class="hljs-string">'날짜'</span>,
                  yaxis_title=<span class="hljs-string">'가치 ($)'</span>,
                  template=<span class="hljs-string">'plotly_dark'</span>,
                  height=<span class="hljs-number">600</span>)

fig.<span class="hljs-title function_">show</span>()

거래 수: <span class="hljs-number">11</span>
초기 자본: $100
최종 자본: $107<span class="hljs-number">.97</span>
총 수익률: <span class="hljs-number">7.97</span>%
</code></pre>
<img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_48.png">
<ul>
<li>MA 백테스팅 전략 구현하기</li>
</ul>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js"># <span class="hljs-variable constant_">TA</span> 라이브러리를 사용하여 <span class="hljs-variable constant_">EMA</span> 생성
ws = <span class="hljs-number">5</span>
wl = <span class="hljs-number">10</span>
hourly_eur_usd[<span class="hljs-string">'ema9'</span>] = ta.<span class="hljs-property">trend</span>.<span class="hljs-title function_">ema_indicator</span>(hourly_eur_usd[<span class="hljs-string">'Adj Close'</span>], <span class="hljs-variable language_">window</span>=ws)

# <span class="hljs-variable constant_">TA</span> 라이브러리를 사용하여 <span class="hljs-variable constant_">SMA</span> 생성
hourly_eur_usd[<span class="hljs-string">'sma20'</span>] = ta.<span class="hljs-property">trend</span>.<span class="hljs-title function_">sma_indicator</span>(hourly_eur_usd[<span class="hljs-string">'Adj Close'</span>], <span class="hljs-variable language_">window</span>=wl)

# 이동평균 교차 전략 매개변수 정의
short_ma = <span class="hljs-string">'ema9'</span>
long_ma = <span class="hljs-string">'sma20'</span>

# 신호를 저장할 새 열 생성
hourly_eur_usd[<span class="hljs-string">'signal'</span>] = <span class="hljs-number">0</span>

# 진입 신호 생성
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-title function_">range</span>(<span class="hljs-number">1</span>, <span class="hljs-title function_">len</span>(hourly_eur_usd)):
    <span class="hljs-keyword">if</span> hourly_eur_usd[short_ma][i] > hourly_eur_usd[long_ma][i] and hourly_eur_usd[short_ma][i - <span class="hljs-number">1</span>] &#x3C;= hourly_eur_usd[long_ma][i - <span class="hljs-number">1</span>]:
        hourly_eur_usd[<span class="hljs-string">'signal'</span>][i] = <span class="hljs-number">1</span>  # 매수 신호
    elif hourly_eur_usd[short_ma][i] &#x3C; hourly_eur_usd[long_ma][i] and hourly_eur_usd[short_ma][i - <span class="hljs-number">1</span>] >= hourly_eur_usd[long_ma][i - <span class="hljs-number">1</span>]:
        hourly_eur_usd[<span class="hljs-string">'signal'</span>][i] = -<span class="hljs-number">1</span>  # 매도 신호

# 총 수익률 계산
hourly_eur_usd[<span class="hljs-string">'returns'</span>] = hourly_eur_usd[<span class="hljs-string">'Adj Close'</span>].<span class="hljs-title function_">pct_change</span>()
hourly_eur_usd[<span class="hljs-string">'cumulative_returns'</span>] = (<span class="hljs-number">1</span> + hourly_eur_usd[<span class="hljs-string">'returns'</span>]).<span class="hljs-title function_">cumprod</span>() - <span class="hljs-number">1</span>

# 수익률에 신호 적용
hourly_eur_usd[<span class="hljs-string">'strategy_returns'</span>] = hourly_eur_usd[<span class="hljs-string">'signal'</span>].<span class="hljs-title function_">shift</span>(<span class="hljs-number">1</span>) * hourly_eur_usd[<span class="hljs-string">'returns'</span>]

# 누적 수익률 계산
hourly_eur_usd[<span class="hljs-string">'cumulative_strategy_returns'</span>] = (<span class="hljs-number">1</span> + hourly_eur_usd[<span class="hljs-string">'strategy_returns'</span>]).<span class="hljs-title function_">cumprod</span>() - <span class="hljs-number">1</span>

# 초기 자본 설정
initial_capital = <span class="hljs-number">100</span>

# 포트폴리오 가치 총액 계산
hourly_eur_usd[<span class="hljs-string">'portfolio_value'</span>] = (<span class="hljs-number">1</span> + hourly_eur_usd[<span class="hljs-string">'strategy_returns'</span>]).<span class="hljs-title function_">cumprod</span>() * initial_capital

# 거래 횟수, 초기 자본, 최종 자본 출력
num_trades = hourly_eur_usd[<span class="hljs-string">'signal'</span>].<span class="hljs-title function_">abs</span>().<span class="hljs-title function_">sum</span>()
final_capital = hourly_eur_usd[<span class="hljs-string">'portfolio_value'</span>].<span class="hljs-property">iloc</span>[-<span class="hljs-number">1</span>]
total_return = (final_capital - initial_capital) / initial_capital * <span class="hljs-number">100</span>

<span class="hljs-title function_">print</span>(<span class="hljs-string">'\n'</span>)
<span class="hljs-title function_">print</span>(f<span class="hljs-string">"거래 횟수: {num_trades}"</span>)
<span class="hljs-title function_">print</span>(f<span class="hljs-string">"초기 자본: ${initial_capital}"</span>)
<span class="hljs-title function_">print</span>(f<span class="hljs-string">"최종 자본: ${final_capital:.2f}"</span>)
<span class="hljs-title function_">print</span>(f<span class="hljs-string">"총 수익률: {total_return:.2f}%"</span>)
<span class="hljs-title function_">print</span>(<span class="hljs-string">'\n'</span>)

# 전략 가치 그래픽화
fig = go.<span class="hljs-title class_">Figure</span>()

fig.<span class="hljs-title function_">add_trace</span>(go.<span class="hljs-title class_">Scatter</span>(x=hourly_eur_usd.<span class="hljs-property">index</span>,
                         y=hourly_eur_usd[<span class="hljs-string">'portfolio_value'</span>].<span class="hljs-title function_">round</span>(<span class="hljs-number">2</span>),
                         mode=<span class="hljs-string">'lines'</span>,
                         line=<span class="hljs-title function_">dict</span>(color=<span class="hljs-string">'#00BFFF'</span>),
                         name=<span class="hljs-string">'포트폴리오 가치'</span>))

fig.<span class="hljs-title function_">update_layout</span>(title=<span class="hljs-string">'META 데이터에 기대되는 결과 이동평균 교차 전략'</span>,
                  xaxis_title=<span class="hljs-string">'날짜'</span>,
                  yaxis_title=<span class="hljs-string">'가치 ($)'</span>,
                  template=<span class="hljs-string">'plotly_dark'</span>,
                  height=<span class="hljs-number">600</span>)

fig.<span class="hljs-title function_">show</span>()

거래 횟수: <span class="hljs-number">50</span>
초기 자본: $100
최종 자본: $108<span class="hljs-number">.00</span>
총 수익률: <span class="hljs-number">8.00</span>%
</code></pre>
<img src="/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_49.png">
<ul>
<li>RSI 및 MA 전략은 모두 2022년부터 2024년까지 META 데이터에서 약 8%의 예상 수익을 산출함을 확인할 수 있습니다. 그러나 거래 횟수 측면에서 RSI 전략이 더 우수함을 알 수 있습니다. 즉, 11 (RSI) vs 50 (MA).</li>
</ul>
<h1>결론</h1>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>저희 사회의 디지털화가 급속히 증가함에 따라 미국 대형 기술 기업(Big Tech)들이 디지털 인프라와 플랫폼 소유를 통해 엄청난 부를 축적하고 영향력을 행사하게 되었습니다.</li>
<li>본 게시물에서는 기술적, 기본적 분석 도구와 최신 포트폴리오 최적화(PO) 알고리즘을 Python을 활용해 통합한 미국 Big Tech들의 양적 거래 분석을 제시했습니다.</li>
<li>우리는 기술적 분석 지표, 주식 기초 및 리스크 및 수익을 동시에 고려한 PO를 통합했습니다.</li>
<li>우리는 이번 연구 동안 Quantstats, TA, PyPortfolioOpt, Plotly, FinanceToolkit 라이브러리를 사용했습니다.</li>
<li>누적 수익, 첨도, 비대칭도, 상관 관계, 표준편차, 베타, 샤프 비율 등의 금융 지표를 분석했습니다.</li>
<li>2020년부터 2024년까지의 금융 성과인 등가 가중 포트폴리오와 최대 샤프 비율 포트폴리오와 S&#x26;P 전략을 비교했습니다(Sortino, Sharpe, Calmar, Treynor 비율, 켈리 기준, MTD, 최대 하락 폭, 베타, 알파, 연평균 복리 증가율 등).</li>
<li>2019년부터 2024년까지 NVDA 대 AMD 손익 계산서와 수익성 비율을 분석했습니다. 그리스 감능성, Value-at-Risk(VaR) 대 대조군, Fama-French 5 요인과의 상관 관계를 시각화했습니다.</li>
<li>주식 가격 예측에 대한 1년치 Big Tech 주가 예측을 시간별로 이루어진 자산 가격의 이항 분포를 따르는 움직임 상승 또는 하락 두 가지 결과를 지닌 이진 트리를 따라 반복하여 모델을 사용했습니다.</li>
<li>기술 시장의 감성 및 가격 모멘텀을 파악하기 위해 TA Ichimoku 클라우드를 활용했습니다.</li>
<li>마지막 729일의 META TA 전략을 탐색하면서 RSI 대 MA 크로스오버 거래 신호(백테스팅)의 예상 수익을 비교했습니다.</li>
<li>TA 지표와 함께 2020년부터 2024년까지의 META 캔들스틱 차트는 주식 데이터 시각화에서 Plotly의 강력함을 보여 주었습니다.</li>
</ul>
<h1>참고 문헌</h1>
<ul>
<li>Markowitz, H., 1952, PORTFOLIO SELECTION. The Journal of Finance.</li>
<li>Markowitz meets technical analysis: Building optimal portfolios by exploiting information in trend-following signals</li>
<li>Mastering Market Movements: Integrating Technical and Fundamental Analysis in Trading</li>
<li>Fundamental vs. Technical Analysis: An Overview</li>
<li>The Advantages and Disadvantages of Technical Analysis</li>
<li>The pros and cons of fundamental analysis</li>
<li>Fundamental Analysis: Advantages And Disadvantages</li>
<li>Portfolio Optimization: How to Find Your Investment Balance</li>
<li>Financial Analysis with the Finance Toolkit in Python</li>
</ul>
<h1>더 알아보기</h1>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>주식 포트폴리오 위험/수익률 최적화</li>
<li>비트코인, 금, 원유 가격의 종합 분석</li>
<li>Max(수익률/위험) 거래를 향하여</li>
<li>75가지 간단한 FinTA 지표를 사용한 NVDA 기술 분석</li>
</ul>
<h2>연락처</h2>
<ul>
<li>웹사이트</li>
<li>GitHub</li>
<li>X/Twitter</li>
<li>Pinterest</li>
<li>Mastodon</li>
<li>Tumblr</li>
</ul>
<h2>면책사항</h2>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>다음의 면책 조항은이 기사에 제공 된 정보가 교육 용도로만 사용되며 재정 건전성 또는 투자 자문으로 간주되어서는 안 된다는 것을 명확히합니다.</li>
<li>제공된 정보는 귀하의 개별 재정 상황, 목표 또는 리스크 허용도를 고려하지 않습니다.</li>
<li>귀하가 하는 어떠한 투자 결정이나 조치도 귀하의 전적인 책임입니다.</li>
<li>귀하의 재정 목표, 리스크 허용도 및 투자 시간표에 근거하여 어떤 투자의 적합성을 독립적으로 평가해야합니다.</li>
<li>귀하는 귀하의 특정 요구에 맞게 맞춤 지도를 제공할 수있는 인증 된 재무 전문가의 조언을 구하는 것이 좋습니다.</li>
<li>제공되는 도구, 데이터, 콘텐츠 및 정보는 개인의 투자 요구를 충족시키기 위해 맞춤화되지 않았습니다. 따라서 도구, 데이터, 콘텐츠 및 정보는 정보 및 교육 목적으로만 제공됩니다.</li>
</ul>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Quantstats, TA, PyPortfolioOpt, FinanceToolkit을 이용한 미국 빅테크 주식 통합 퀀트 트레이딩 분석","description":"","date":"2024-07-13 20:25","slug":"2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit","content":"\n\n\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_0.png\" /\u003e\n\n- 이 게시물에서는 기술적, 근본적 분석 도구 및 현대 포트폴리오 최적화(PO) 알고리즘을 통합하여 파이썬에서 미국 대형 기술 기업들의 양적 거래 분석에 초점을 맞추고 있습니다.\n\n## 미국의 대형 기술 기업이란?\n\n- 빅 포 (알파벳, 아마존, 애플, 메타)\n- 빅 파이브 (알파벳, 아마존, 애플, 메타, 마이크로소프트)\n- 멋진 일곱 (알파벳, 아마존, 애플, 메타, 마이크로소프트, 엔비디아, 테슬라)\n- 기타: 보고서에 따르면 AMD는 2023년 이후 브랜드 성장을 상당히 경험했으며, 전년대비 53% 증가했습니다. 또한 AMD의 브랜드 가치가 비즈니스 기술 및 서비스 플랫폼 부문에서 5186만 달러에 달했습니다. 그 강한 성장이 어디서 비롯된 것인지 쉽게 추측할 수 있습니다. AMD는 최근 몇 년 동안 경쟁사 인텔과 엔비디아가 해 온 것처럼 AI에 주력하고 있습니다.\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n## 비즈니스 케이스\n\n- 최근 몇 년간 미국 주식 시장은 빅테크가 주도한 놀라운 성장 기회를 제공해 왔습니다. 하지만, 상승장이 계속될 수 있을까요?\n- 빅테크 기업들은 역사상 가장 큰 반독점 입법 파동에 직면하고 있습니다.\n- 세계적인 세금 전쟁이 임박했습니다. 이는 빅테크에 큰 타격을 줄 수 있습니다.\n- 결론: 이러한 인상적인 성과에도 불구하고, 현재의 고 인플레이션과 이자율 경제환경에서 특히 높은 가치평가를 받는 기술 주식에 베팅하는 것에 대해 투자자들은 조심해야 합니다. Nvidia 칩과 Meta의 대형 언어 모델과 같은 AI 응용 프로그램은 약속을 보이지만, 이들의 시장가치는 실제 소비자 혜택과 실현된 생산성 향상에 궁극적으로 의존할 것입니다.\n\n## 프로젝트 목표\n\n- 우리의 궁극적인 목표는 기술적 분석 (TA) 지표, 주식 기초 내용 및 위험과 수익을 동시에 고려하는 포트폴리오 최적화를 통합하는 것입니다.\n- Markowitz (1952) [1]는 투자 포트폴리오의 다양성을 옹호하며, 이 과정이 투자의 분산을 줄인다는 것을 입증했습니다.\n- 이 다양성 개념들은 Modern Portfolio Theory (MPT)을 불러일으켰는데, 이는 위험과 수익이라는 두 가지 상충하는 목표 사이에서 선택하는 아이디어를 가져왔습니다.\n- TA 지표는 자산 가격과 거래량의 추세를 식별하기 위해 시장 참가자들에 의해 널리 사용됩니다. 최근 연구에 따르면 [2], 우리는 MPT와 TA 간의 격차를 줄이기 위해 TA 신호의 최적 가중치를 직접 다중 TA 신호의 함수로 매개변수화된 PO 전략을 개발했습니다.\n- 일부 거래자들은 FA 대신 TA를 선호하지만, 가장 성공적인 전략은 종종 두 가지를 조화롭게 적용한 것에서 나옵니다. 이는 거래자들이 즉각적인 가격 변동과 장기적인 경제 예측에서 모두 이익을 취할 수 있도록 하며 [3], 이 통합된 PO 접근 방식은 시장 역학을 이해하는 것을 강화할 뿐만 아니라 거래자들이 견고한 투자 결정을 내리기 위한 포괄적인 도구 상자를 제공합니다.\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n## 기술 분석 (TA)\n\n- TA는 시장을 분석하는 프레임워크를 트레이더에 제공하여 트렌드, 지지/저항 수준 및 진입/퇴출 지점을 식별하는 데 도움을 줍니다 [5].\n- TA의 두 가지 주요 가정은 다음과 같습니다 [5]: (1) 보안 가격은 기본적인 요소를 포함한 모든 중요한 정보를 반영한다; (2) 가격 변동은 상승, 하락 또는 측면 추세를 따른다.\n\n## 근본 분석 (FA)\n\n- TA는 단기적인 패턴만 식별하는 반면, FA는 주식 가격이 실제 가치를 저평가(또는 고평가)하는 자산을 강조할 것입니다 [5, 7].\n- 간단히 말해, 스마트한 투자 결정을 내리는 것이 FA의 주요 이점입니다. 이는 회사가 얼마나 벌고 지출하는지, 얼마나 많은 제품을 판매하는지 및 외부 요소에 어떻게 영향을 받는지를 이해하는 것을 포함합니다 [7].\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n## TA vs FA\n\n- FA(기업 재무 분석)는 자산의 품질에 초점을 맞추고, TA(기술적 분석)는 시장 동향을 가치의 지표로 삼습니다. 두 방법 모두 주식 가격의 미래 동향을 예측하는 데 사용됩니다.\n\n## 포트폴리오 최적화\n\n- PO(포트폴리오 최적화)는 투자자가 자산을 선택하여 재무 위험을 최소화하고 ROI를 극대화하는 프로세스입니다.\n- 투자 수익률(ROI)은 모든 산업에서 익숙한 지표입니다.\n- 재정적으로 위험은 투자 수익이 기대와 다를 가능성을 의미합니다.\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n## 도구들:\n\n- Quantstats는 포트폴리오 분석을 위한 광범위한 기능을 제공합니다. 양적 분석가, 트레이더 및 포트폴리오 매니저를 대상으로 하며, 투자 전략에 대한 보다 깊은 통찰력을 얻고자 하는 사용자를 위해 설계되었습니다.\n- TA는 금융 시계열 데이터 세트에 대한 TA 라이브러리입니다. 금융 시계열 데이터 세트(오픈, 클로즈, 하이, 로우, 볼륨)에서 피쳐 엔지니어링을 수행하는 데 유용합니다. Pandas와 Numpy에 기반을 두고 있습니다.\n- PyPortfolioOpt는 전통적인 MPT 및 Black-Litterman 할당뿐만 아니라 Shrinkage, Hierarchical Risk Parity와 같은 분야의 최근 개발사항들을 구현하는 라이브러리입니다. 또한, 지수 가중 공분산 행렬과 같은 혁신적인 실험적 기능도 포함하고 있습니다.\n- FinanceToolkit은 가장 단순한 방식으로 150가지 이상의 재무 비율, 지표 및 성과 측정 항목이 포함된 오픈 소스 툴킷입니다. 이 툴킷은 주식에만 국한되지 않고, 옵션, 화폐, 암호화폐, ETF, 상장펀드, 지수, 머니 마켓, 상품, 주요 경제 지표 등에 대한 역사적 데이터 및 샤프 비율, VaR과 같은 중요한 성과 및 위험 측정 수단을 얻기 위해 사용할 수 있습니다.\n\n## 자료\n\n- 금융 시장을 위한 데이터 과학\n- FinanceToolkit 예제\n- 주식 시장 트렌드 및 Value at Risk\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n## 프로젝트 마일스톤\n\n- 빅 포 매칭 2020-2024 (BF)의 기초적인 리스크-수익 분석\n- 등가치 가중 BF 포트폴리오의 성과 분석\n- Sharpe Ratio 최대화를 위한 BF 최적화 (효율적 투자선) vs S\u0026P 500\n- (NVDA, AMD) vs 벤치마크 누적 수익률 및 VaR\n- (NVDA, AMD) 수익성 분석 및 그리스 감도\n- NVDA 및 AMD의 Fama-French 요인과의 상관 관계\n- (AAPL, AMZN, META, MSFT, GOOG) 재무 분석 및 주가 시뮬레이션\n- TA 이치모쿠 클라우드 차트: NVDA vs AMD\n- META 주식 TA, RSI vs EMA 전략 백테스팅\n\n위의 프로젝트 마일스톤에 대해 깊이 있게 탐구하는 포괄적인 안내서입니다. 해당 프로젝트는 가상 안콘다 환경을 생성한 후 주피터 노트북에서 구현되었습니다.\n\n## 기본 임포트 및 설치\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- 필요한 Python 라이브러리 설치 및 불러오기\n\n```js\n!pip install quantstats, ta, pypfopt, plotly, yfinance, sklearn, seaborn, scipy\n```\n\n```js\n# 라이브러리 불러오기\n\n# 데이터 처리 및 통계 분석 \nimport pandas as pd\n#from pandas_datareader import data\nimport numpy as np\nfrom scipy import stats\n\n# 데이터 시각화 \nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport plotly.express as px\nimport plotly.graph_objects as go\nfrom plotly.subplots import make_subplots\n\n# 최적화 및 자산 할당\nfrom pypfopt.efficient_frontier import EfficientFrontier\nfrom pypfopt import risk_models\nfrom pypfopt import expected_returns\nfrom pypfopt import black_litterman, BlackLittermanModel\n\n# 금융 데이터 \nimport quantstats as qs\nimport ta\nimport yfinance as yf\n\n# 선형 회귀 모델\nfrom sklearn.linear_model import LinearRegression\n\n# Plotly 오프라인 모드 활성화\nfrom plotly.offline import init_notebook_mode\ninit_notebook_mode(connected=True)\n\n\n# 포트폴리오 최적화를 위한 라이브러리 불러오기\nfrom pypfopt.efficient_frontier import EfficientFrontier\nfrom pypfopt import risk_models\nfrom pypfopt import expected_returns\n\n# 날짜 및 경고 숨기기 \nimport datetime as dt\nimport warnings\nwarnings.filterwarnings(\"ignore\")\n```\n\n# 2020–2024 빅 포 팝 4 (BF) 기본 수익-변동성 분석\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- 입력된 BF 주식 데이터 2020-2024년을 읽는 중\n\n```js\n#Big Four\ntickers = [\"AAPL\", \"GOOG\",\"AMZN\",\"META\"] \naapl = qs.utils.download_returns(tickers)\naapl = aapl.loc['2020-01-01':'2024-07-10']\n```\n\n- BF 주식의 일일 수익률 그래픽 표시\n\n```js\n# 각 주식의 일일 수익률 그래픽 표시\nprint('\\n')\nprint('\\n주식 일일 수익률 그래픽:\\n')\nqs.plots.daily_returns(aapl,benchmark='SPY')\n```\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n\n![image](/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_1.png)\n\n- 주식의 성과를 평가하는 가장 좋은 방법 중 하나는 일일 수익률을 계산하는 것입니다.\n- 위에 있는 플롯은 기본적으로 주식 가치가 하루 동안 얼마나 변화했는지 보여줍니다. 이 기본 정보를 사용하여 회사에 더 많이 투자하거나 다른 곳에 투자를 시도할지 결정할 수 있습니다.\n- BF 주식 누적 수익 그래플 작성\n\n```js\n# 각 주식에 대한 누적 수익 그래프 작성\nprint('\\n')\nprint('\\nStock Cumulative Returns Plot\\n')\nqs.plots.returns(aapl)\n```\n\n![image](/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_2.png)\n\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- 누적 수익 대비는 일정 기간 동안 투자 가격의 총 변화를 의미합니다.\n- 이것은 물가 상승 및 기타 외부 요인의 영향을 고려하지 않는 총 명목 수익입니다.\n- 양의 수익은 이익을 나타내고, 음의 수익은 손실을 나타냅니다.\n- 세금은 대부분의 투자에 대한 누적 수익을 상당히 줄일 수 있습니다.\n\n## BF의 첨도\n\n- BF 일일 수익의 첨도를 계산하고 그래프로 나타내기\n\n```js\n# 첨도를 측정하기 위해 quantstats 사용\nprint('\\n')\nprint(\"BF의 첨도: \", qs.stats.kurtosis(aapl).round(2))\n\nAAPL     5.03\nAMZN     4.00\nGOOG     3.63\nMETA    17.71\ndtype: float64\n\nqs.stats.kurtosis(aapl).round(2).plot.bar(label='첨도')\nplt.legend()\n```\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n![image](/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_3.png)\n\n- 첨도(Kurtosis)는 분포의 꼬리 모양을 측정합니다.\n- 금융 분석에서 첨도는 투자의 가격 변동성 리스크를 측정하는 데 사용됩니다. 첨도는 투자의 가격이 정기적으로 경험하는 변동성을 측정합니다. 수익 분포의 높은 첨도는 투자가 가끔 극단적인 수익을 내줄 것을 시사합니다. 높은 첨도는 큰 양의 양수 수익 또는 극단적인 음수 수익을 나타낼 수 있다는 것을 염두에 두세요.\n- 우리는 BF의 일일 수익을 첨두관련 분포(첨도 ` 3.0)로 간주할 수 있습니다. 이 분포는 긴 꼬리(이상치)를 가진 곡선으로 나타납니다.\n- 추론: kur(META) `` kur(AAPL) ` kur(AMZN) ~ kur(GOOG)\n\n## BF의 왜도(Skewness)\n\n- BF의 일일 수익의 왜도(Skewness)를 계산하고 그래프에 표시하기\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\n# Quantstats를 사용하여 왜도 측정\nprint('\\n')\nprint(\"주식 왜도: \", qs.stats.skew(aapl).round(2))\n\n주식 왜도:  Ticker\nAAPL    0.12\nAMZN    0.12\nGOOG   -0.06\nMETA   -0.29\ndtype: float64\n\nqs.stats.skew(aapl).round(2).plot.bar(label='Skewness')\nplt.legend()\n```\n\n![분산 도표](/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_4.png)\n\n- 왜도는 데이터가 대칭적 벨 곡선에서 벗어나는 방향과 정도를 나타냅니다.\n- 왜도가 0인 분포는 완전히 대칭적이며 분포의 왼쪽과 오른쪽이 거울 이미지인 것을 의미합니다. 양수 왜도는 오른쪽 꼬리가 왼쪽보다 길거나 더 두껍다는 것을 의미하며, 데이터가 높은 값을 가질 가능성이 높음을 시사합니다. 음수 왜도는 왼쪽 꼬리가 오른쪽보다 길거나 더 두꺼워 낮은 값을 가질 가능성을 시사합니다.\n- 일반적으로 -0.5 ~ 0.5 사이의 값은 약간의 왜도 수준을 나타냅니다.\n- 추론: skew(META)=-0.29\n- 실현 왜도와 미래 가격 간에 부정적인 교차 섹션이 관찰됩니다. — 음수 왜도를 가진 주식은 높은 변동성에 대해 미래 수익이 높게 보상됩니다.\n- GOOG의 부정적인 왜도는 투자자가 빈번한 소규모 이익과 소수의 큰 손실을 기대할 수 있다는 것을 의미합니다. 실제로, 많은 거래 전략이 부정적으로 왜도된 분포에 기초합니다.\n- AAPL 및 AMZN의 0에서 적정한 양수의 왜도와 결합되면, 이러한 분포는 안정적인 수익과 낮은 리스크를 시사할 것입니다.\n\n## BF의 표준 편차\n\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- BF 일별 수익률의 표준 편차(STD)를 계산하고 그래프로 플로팅합니다.\n\n```js\n# 표준 편차 계산하기\nprint('\\n')\nprint(\"주식 표준 편차: \", aapl.std().round(3))\n\n주식 표준 편차:  Ticker\nAAPL    0.021\nAMZN    0.023\nGOOG    0.021\nMETA    0.029\ndtype: float64\n\naapl.std().round(3).plot.bar(label='STD')\nplt.legend()\n```\n\n\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_5.png\" /\u003e\n\n- 표준 편차는 투자를 비교하는 기본적인 방법으로, 데이터의 변동이나 분산을 측정합니다. 더 높은 표준 편차는 더 높은 위험을 의미합니다.\n- 데이터 포인트가 평균에서 더 멀리 떨어져 있는 경우 데이터 세트 내에서 더 높은 편차가 있습니다. 표준 편차는 분산의 제곱근으로 계산됩니다.\n- 변동성이 큰 주식은 표준 편차가 높고, 안정적인 블루 칩 주가 주식의 편차는 보통 낮습니다.\n- 결론: std(AAPL, AMZN, GOOG) 약 0.02, std(META) 약 0.03입니다.\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n## BF 상관 분석\n\n- 페어 플롯(pairplot)과 상관 행렬은 자산 간의 상관 관계를 시각화하는 데 유용한 도구입니다.\n- BF 일일 수익의 페어 플롯을 생성합니다.\n\n```js\n# 페어 플롯\nsns.pairplot(aapl, kind='reg')\nplt.show()\n```\n\n![이미지](/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_6.png)\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- 위의 플롯은 구글과 메타 주식 간의 흥미로운 선형 관계를 보여줍니다.\n- BF 일일 수익의 상관 행렬을 플로팅한 결과입니다.\n\n```js\n# 상관 행렬\ncorr = aapl.corr()\nmask = np.zeros_like(corr, dtype=bool)\nmask[np.triu_indices_from(mask)] = True\nsns.heatmap(corr, annot=True, mask=mask)\nplt.show()\n```\n\n![이미지](/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_7.png)\n\n- GOOG와 AAPL, AMZN, META의 3개 주식 간에는 0.64~0.66 정도의 강한 양의 상관 관계가 있습니다.\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n## BF의 베타 계수\n\n- 주식의 베타 계수는 시장 기준으로 시간이 지남에 따른 변동성을 측정하는 지표입니다. 1의 베타는 주식의 변동성이 시장과 정확히 일치한다는 것을 의미합니다. 더 높은 베타는 큰 변동성을 나타내고, 낮은 베타는 덜한 변동성을 나타냅니다.\n- BF의 벤치마크 SPY에 대한 베타 계수를 계산하기 위해 선형 회귀 분석을 사용합니다.\n\n```js\nbench = [\"SPY\"] \nspy = qs.utils.download_returns(bench)\nspy = spy.loc['2020-01-01':'2024-07-10']\n\n# 인덱스 제거\nspy_no_index = spy.reset_index(drop = True)\naapl_no_index = aapl.reset_index(drop = True)\n\n# 애플의 수익률과 벤치마크 사이의 선형 관계 설정\n\n자산='AAPL'\nX = spy_no_index.values.reshape(-1,1)\ny = aapl_no_index[asset].values.reshape(-1,1)\n\nlinreg = LinearRegression().fit(X, y)\n\n베타 = linreg.coef_[0]\n알파 = linreg.intercept_\nprint('\\n')\nprint('AAPL 베타: ', beta.round(3))\nprint('\\nAAPL 알파: ', alpha.round(3))\n\n\n자산_베타 = []\n자산_베타.append(베타.round(3)[0])\n\nAAPL 베타:  [1.203]\n\nAAPL 알파:  [0.001]\n\n자산='AMZN'\nX = spy_no_index.values.reshape(-1,1)\ny = aapl_no_index[asset].values.reshape(-1,1)\n\nlinreg = LinearRegression().fit(X, y)\n\n베타 = linreg.coef_[0]\n알파 = linreg.intercept_\nprint('\\n')\nprint('AMZN 베타: ', beta.round(3))\nprint('\\nAMZN 알파: ', alpha.round(3))\n\n자산_베타.append(베타.round(3)[0])\n\nAMZN 베타:  [1.075]\n\nAMZN 알파:  [0.]\n\n자산='META'\nX = spy_no_index.values.reshape(-1,1)\ny = aapl_no_index[asset].values.reshape(-1,1)\n\nlinreg = LinearRegression().fit(X, y)\n\n베타 = linreg.coef_[0]\n알파 = linreg.intercept_\nprint('\\n')\nprint('META 베타: ', beta.round(3))\nprint('\\nMETA 알파: ', alpha.round(3))\n\n자산_베타.append(베타.round(3)[0])\n\nMETA 베타:  [1.324]\n\nMETA 알파:  [0.001]\n\n자산='GOOG'\nX = spy_no_index.values.reshape(-1,1)\ny = aapl_no_index[asset].values.reshape(-1,1)\n\nlinreg = LinearRegression().fit(X, y)\n\n베타 = linreg.coef_[0]\n알파 = linreg.intercept_\nprint('\\n')\nprint('GOOG 베타: ', beta.round(3))\nprint('\\nGOOG 알파: ', alpha.round(3))\n\n자산_베타.append(베타.round(3)[0])\n\nGOOG 베타:  [1.139]\n\nGOOG 알파:  [0.]\n\nprint(자산_베타)\n[1.203, 1.075, 1.324, 1.139]\r\n```\n\n- BF의 베타 계수를 플로팅하기\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```python\nfig, ax = plt.subplots(figsize=(6, 6))\n\nx = asset_beta\ntickers1=['AAPL', 'AMZN', 'META', 'GOOG']\n\nax.pie(x, labels=tickers1, autopct='%.1f%%',\n       wedgeprops={'linewidth': 3.0, 'edgecolor': 'white'},\n       textprops={'size': 'x-large'})\nax.set_title('Asset Beta', fontsize=18)\nplt.tight_layout()\n```\n\n![Pie Chart](/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_8.png)\n\n```python\n#import numpy as np\n#import matplotlib.pyplot as plt\n \ncourses = tickers\nvalues = x\n \nfig = plt.figure(figsize=(10, 5))\n\n# creating the bar plot\nplt.bar(courses, values, color='maroon', width=0.4)\n\nplt.xlabel(\"Assets\")\nplt.ylabel(\"Beta Value\")\nplt.title(\"Asset Beta Values\")\nplt.show()\n```\n\n![Bar Chart](/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_9.png)\n\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- 정의상 S\u0026P 500 지수와 같은 시장은 베타가 1.0이며, 개별 주식은 시장과 얼마나 벗어나는지에 따라 순위가 매겨집니다.\n- 추론: BF 주식은 베타가 1.0보다 높기 때문에 시간이 지남에 따라 시장보다 더 많이 흔듭니다.\n\n## BF의 샤프 비율\n\n- 샤프 비율은 투자의 위험 조정 수익률을 측정하는 지표입니다.\n- BF의 샤프 비율을 계산하고 시각화합니다.\n\n```js\n# 샤프 비율 계산\nprint('\\n')\nprint(\"주식의 샤프 비율: \", qs.stats.sharpe(aapl).round(2))\n주식의 샤프 비율: Ticker\nAAPL 0.93\nAMZN 0.65\nGOOG 0.87\nMETA 0.69\ndtype: float64\n\nqs.stats.sharpe(aapl).round(2).plot.bar(label='샤프 비율')\nplt.legend()\n```\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n![image](/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_10.png)\n\n- Sharpe ratio가 높을수록 투자가 다른 Sharpe ratio가 낮은 투자에 비해 주어진 위험 수준에서 더 높은 수익을 제공함을 나타냅니다.\n- 결론: AAPL은 다른 3개 주식 (AMZN, GOOG, META)에 비해 주어진 위험 수준에서 더 높은 수익을 제공할 수 있습니다. AAPL의 Sharpe ratio가 거의 1에 가깝다는 것은 투자의 평균 수익이 리스크-프리 이자율과 거의 같다는 것을 의미합니다.\n\n# 등중 BF 포트폴리오의 성과 분석\n\n- 등중 BF 포트폴리오의 성과를 살펴봅시다.\n- 각 보안의 가중치 = 포트폴리오 내 보안 수로 1을 나눈 값\n- 4개 주식으로 이루어진 BF 포트폴리오에서 각 주식은 25%의 가중치를 가집니다.\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\nweights = [0.25, 0.25, 0.25, 0.25] # 각 주식의 가중치 정의\nap=aapl['AAPL']\nam=aapl['AMZN']\nme=aapl['META']\nms=aapl['GOOG']\nportfolio = ap*weights[0] + am*weights[1] + me*weights[2] + ms*weights[3] # 각 주식을 해당 가중치로 곱하여 포트폴리오 생성\nportfolio # 포트폴리오의 일일 수익률 표시\n\nDate\n2020-01-02    0.023684\n2020-01-03   -0.008015\n2020-01-06    0.016586\n2020-01-07   -0.000268\n2020-01-08    0.006574\n                ...   \n2024-07-02    0.012870\n2024-07-03   -0.000289\n2024-07-05    0.029234\n2024-07-08   -0.006084\n2024-07-09    0.001275\nLength: 1136, dtype: float64\n```\n\n- 포트폴리오의 일일 수익률, 히스토그램, 누적 수익률 플로팅\n\n```js\nportfolio.plot()\n```\n\n\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_11.png\" /\u003e\n\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\nportfolio.hist()\n```\n\n\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_12.png\" /\u003e\n\n```js\nqs.plots.returns(portfolio)\n```\n\n\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_13.png\" /\u003e\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- Equal-Weighted BF 포트폴리오 성과 보고서 및 전략 시각화 vs SPY 기준 생성 중입니다!\n\n```js\nqs.reports.full(portfolio, benchmark = spy)\n```\n\n```js\n성과 지표\n                           기준          전략\n-------------------------  -----------  ----------\n시작 기간                 2020-01-02   2020-01-02\n종료 기간                 2024-07-09   2024-07-09\n무위험 이자율             0.0%         0.0%\n시장 참여 시간            100.0%       100.0%\n\n누적 수익률               72.69%       191.47%\nCAGR﹪                    8.7%         17.75%\n\n샤프 지수                 0.67         0.91\n확률적 샤프 비율          91.92%       97.3%\n스마트 샤프                0.6          0.82\n소르티노 지수              0.93         1.31\n스마트 소르티노             0.84         1.18\n소르티노/√2                0.66         0.93\n스마트 소르티노/√2         0.59         0.83\n오메가                     1.18         1.18\n\n최대 하락폭               -34.1%       -49.12%\n최장기 하락일             745          690\n변동성 (연간)             21.66%       31.42%\nR^2                      0.67         0.67\n정보 비율                 0.05         0.05\n칼마르 비율               0.26         0.36\n비대칭도                   -0.54        -0.14\n첨도                     11.14        4.01\n\n예상 일일 %              0.05%        0.09%\n예상 월별 %              1.0%         1.96%\n예상 연간 %              11.55%       23.86%\n켈리 기준                4.81%        5.39%\n파산 위험                 0.0%         0.0%\n일일 VaR                 -2.19%       -3.14%\n예상 손실 (cVaR)         -2.19%       -3.14%\n\n최대 연속 승리           10           8\n최대 연속 패배           7            6\n이익/통곽 비율          0.14         0.18\n이익/통곽 (1M)          0.7          1.12\n\n상환 비율                0.92         0.96\n이익 요소               1.14         1.18\n상식적 비율              1.08         1.14\nCPC 지수                0.57         0.61\n테일 비율               0.95         0.97\n이상치 승률             4.9          3.06\n이상치 손실률           4.78         3.19\n\nMTD                     2.13%        5.18%\n3M                      7.15%        16.73%\n6M                      17.11%       36.32%\nYTD                     16.94%       34.8%\n1Y                      26.74%       54.69%\n3Y (연간)              5.54%        9.97%\n5Y (연간)              8.7%         17.75%\n10Y (연간)             8.7%         17.75%\n전체 기간 (연간)       8.7%         17.75%\n\n최고 효과 일             9.06%        10.41%\n최악의 날               -10.94%      -10.9%\n최고 월                  12.7%        20.41%\n최악의 월               -13.0%       -15.13%\n최고 연도               27.04%       91.38%\n최악의 연도             -19.48%      -44.71%\n\n평균 하락                  -2.12%       -3.55%\n평균 하락 일             21           23\n회복 계수                1.91         2.63\n울서 지수                0.1          0.18\n평정 지수                0.44         0.42\n\n월별 상승 평균           4.73%        7.66%\n월별 하락 평균           -5.82%       -7.11%\n이익 일 %                 54.41%       53.7%\n이익 월 %                63.64%       65.45%\n이익 분기 %              73.68%       68.42%\n이익 연도 %              80.0%        80.0%\n\n베타                       -            1.19\n알파                      -            0.12\n상관관계               -            81.71%\nTreynor Ratio           -            161.56%\n없음\n\n\n최악 5 번 하락\n```\n\n\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_14.png\" /\u003e\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- 전략 시각화 대 SPY 벤치마크\n\n![이미지1](/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_15.png)\n\n![이미지2](/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_16.png)\n\n![이미지3](/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_17.png)\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n\n![image 1](/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_18.png)\n\n![image 2](/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_19.png)\n\n![image 3](/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_20.png)\n\n- 결과:\n\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- 전략 누적 수익률은 약 200%에 비해 벤치마크는 약 75%입니다.\n- 전략 누적 수익률(변동성 매칭)은 약 125%입니다.\n- 연말 전략 수익률은 약 30%에 비해 벤치마크는 약 15%입니다.\n- 월간 수익률 분포: 전략은 약 5%에 비해 벤치마크는 약 3%입니다.\n- 롤링 베타는 약 1.5입니다.\n- 롤링 변동성은 약 0.2에 비해 벤치마크는 약 0.1입니다.\n- 롤링 샤프 비율은 약 2.5입니다.\n- 롤링 소르티노 비율은 약 5.0입니다.\n- 최악의 손실액은 2021년 12월 28일에 -47%입니다.\n- 월간 최소 활동 수익률은 2022년 10월에 -15%입니다.\n- 전략 수익률 분위: 분기별으로 약 10% 및 연간으로 약 45%입니다.\n\n- 전략의 누적 수익률 및 샤프 비율이 벤치마크보다 높아, 같은 위험 수준에 더 나은 수익을 창출한다는 것을 보여줍니다.\n- 일반적으로 샤프 비율이 1.0보다 크면 투자자들에게 만족스럽거나 양호한 것으로 간주됩니다. 2.0보다 높은 비율은 매우 우수하다고 평가됩니다. 전략의 샤프 비율은 약 2.5입니다.\n- 소르티노 비율은 2 이상이면 이상적인 것으로 간주됩니다. 우리의 전략은 약 5.0의 소르티노 비율을 얻습니다.\n- 베타가 1보다 큰 경우: 베타가 1.0보다 크면 해당 자산의 가격이 이론적으로 시장보다 더 변동적임을 나타냅니다. 주식의 베타가 1.2면 시장보다 20% 더 변동적이라고 가정됩니다 (롤링 변동성 vs 벤치마크 비교). 테크놀로지 주식은 주요 벤치마크보다 더 높은 베타 값을 갖는 경향이 있습니다.\n- 전반적으로 제안된 Equal-Weighted BF Portfolio는 합리적인 투자 수익률을 창출했지만 SPY에 비해 더 높은 변동성을 동반합니다.\n\n# BF의 최대 샤프 비율을 위한 효율적 투자 가장자리\n\n- PyPortfolioOpt 라이브러리는 EfficientFrontier 클래스를 제공하며, 이 클래스는 공분산 행렬과 예상 수익을 입력으로 사용합니다. weights 변수는 최대 샤프 비율을 갖는 목표에 따라 각 자산에 대한 최적화된 가중치를 저장합니다.\n- 효율적인 투자 가장자리(Point of Origin)를 위한 라이브러리 가져오기 및 주식 데이터 읽기.\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\n# 포트폴리오 최적화를 위한 라이브러리 가져오기\nfrom pypfopt.efficient_frontier import EfficientFrontier\nfrom pypfopt import risk_models\nfrom pypfopt import expected_returns\n\ndf=yf.download(tickers, start = '2020-01-01')['Adj Close']\ndf.tail()\n\nTicker     AAPL       AMZN       GOOG       META\nDate    \n2024-07-02 220.270004 200.000000 186.610001 509.500000\n2024-07-03 221.550003 197.589996 187.389999 509.959991\n2024-07-05 226.339996 200.000000 191.960007 539.909973\n2024-07-08 227.820007 199.289993 190.479996 529.320007\n2024-07-09 228.679993 199.339996 190.440002 530.000000\n```\n\n- 연간화된 기대수익률 및 연간 샘플 공분산 행렬을 계산하고 플로팅합니다.\n\n```js\n# 연간화된 기대수익률 및 연간 샘플 공분산 행렬 계산\nmu = expected_returns.mean_historical_return(df) # 기대 수익률\nS = risk_models.sample_cov(df) # 공분산 행렬\n\n# 연간화된 기대수익률 시각화\nmu\n\nTicker\nAAPL    0.288713\nAMZN    0.179139\nGOOG    0.255711\nMETA    0.229041\ndtype: float64\n\nmu.plot.bar(label='연간화된 기대수익률')\nplt.legend()\n```\n\n\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_21.png\" /\u003e\n\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- 공분산 행렬 시각화\n\n```js\n# 공분산 행렬 시각화\nS\n\n|        | AAPL    | AMZN    | GOOG    | META    |\n|--------|---------|---------|---------|---------|\n| AAPL   | 0.106707| 0.071803| 0.070835| 0.086041|\n| AMZN   | 0.071803| 0.132787| 0.078590| 0.103355|\n| GOOG   | 0.070835| 0.078590| 0.107778| 0.098501|\n| META   | 0.086041| 0.103355| 0.098501| 0.213837|\n\nS.style.background_gradient(cmap='coolwarm')\n```\n\n\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_22.png\" /\u003e\n\n- MSR에 대한 포트폴리오 최적화\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\n# 최대 샤프 비율을 위한 최적화\nef = EfficientFrontier(mu, S) # 기대수익과 공분산 행렬을 입력으로 제공\nweights = ef.max_sharpe() # 샤프 비율 최적화를 위한 가중치 최적화\n\nclean_weights = ef.clean_weights() # clean_weights는 가중치를 반올림하고 거의 0에 가까운 값을 잘라냄\n\n# 최적화된 가중치와 포트폴리오의 예상 수익을 출력\nclean_weights\n\nOrderedDict([('AAPL', 0.66721),\n             ('AMZN', 0.0),\n             ('GOOG', 0.33279),\n             ('META', 0.0)])\n```\n\n- MSR 최적화 포트폴리오 생성\n\n```js\n# 최적화된 가중치를 사용하여 새로운 포트폴리오 생성\nnew_weights = [0.66721, 0.33279]\noptimized_portfolio = df['AAPL']*new_weights[0] + df['GOOG']*new_weights[1]\noptimized_portfolio # 일일 수익 시각화\n\nDate\n2020-01-02     71.406448\n2020-01-03     70.821647\n2020-01-06     71.763386\n2020-01-07     71.520408\n2020-01-08     72.480875\n                 ...    \n2024-07-02    209.068292\n2024-07-03    210.181895\n2024-07-05    214.898680\n2024-07-08    215.393625\n2024-07-09    215.954106\nLength: 1136, dtype: float64\n```\n\n- MSR 누적 수익 시각화 \n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```python\noptimized_portfolio.plot(label='최적화된 포트폴리오')\nplt.legend()\n```\n\n![이미지](/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_23.png)\n\n- MSR PO는 BF 대신 AAPL과 GOOG (총 2개 자산)만 고려하여 220%의 수익을 제공합니다. 이는 B2로 불리며 페어 트레이딩의 잠재적 후보입니다.\n- MSR B2 포트폴리오 성과 보고서 및 전략 시각화를 SPY 벤치마크 대비 생성\n\n```python\n# 첫 번째 포트폴리오와 최적화된 포트폴리오를 비교하는 새로운 보고서 표시\nqs.reports.full(optimized_portfolio, benchmark=portfolio)\n\n성과 지표\n                           벤치마크    전략\n-------------------------  -----------  ----------\n시작 기간               2020-01-03   2020-01-03\n종료 기간                 2024-07-09   2024-07-09\n무위험 이자율             0.0%         0.0%\n시장 참여 시간           100.0%       100.0%\n\n누적 수익            184.73%      202.43%\nCAGR﹪           17.34%       18.43%\n\n샤프                     0.9          0.96\n확률적인 샤프 비율         97.08%       97.9%\n스마트 샤프               0.79         0.84\n소르티노                    1.29         1.4\n스마트 소르티노              1.13         1.23\n소르티노/√2                 0.91         0.99\n스마트 소르티노/√2           0.8          0.87\n오메가                      1.19         1.19\n\n최대 손실                 -49.12%      -33.58%\n최장 연속 손실 일수            690          542\n변동성 (연간)          31.42%       30.32%\nR^2                        0.8          0.8\n정보 비율                  0.0          0.0\n칼마르                     0.35         0.55\n외도                       -0.14        -0.07\n첨도                      4.02         4.66\n\n기대되는 일일 %           0.09%        0.1%\n기대되는 월간 %         1.92%        2.03%\n기대되는 연간 %          23.28%       24.77%\n켈리 기준                   5.11%        8.13%\n파산 위험                0.0%         0.0%\n일일 가치위험            -3.14%       -3.03%\n기대되는 실패(조건부 VaR)   -3.14%       -3.03%\n\n연속 최대 성공 수          8            11\n연속 최대 손실 수          6            6\n이익/손실 비율           0.17         0.19\n이익/손실 (1M)            1.1          1.14\n\n상환 비율                 0.95         0.98\n이익 요소               1.17         1.19\n상식적인 비율           1.14         1.16\nCPC 지수                0.6          0.63\n꼬리 비율                0.97         0.98\n이상치 이기는 비율        3.8          3.97\n이상치 손실 비율         3.55         3.62\n\n월말 이익                  5.18%        7.14%\n3개월간                   16.73%       31.57%\n6개월간                   36.32%       26.89%\nYTD                      34.8%        23.43%\n1년                    54.69%       29.71%\n3년 (연간)             9.97%        10.51%\n5년 (연간)             17.34%       18.43%\n10년 (연간)            17.34%       18.43%\n최고치 (연간)           17.34%       18.43%\n\n최고 수익 날짜         10.41%       11.17%\n최악의 날              -10.9%       -12.32%\n최고의 월              20.41%       18.65%\n최악의 월             -15.13%      -12.31%\n최고의 연도           91.38%       62.29%\n최악의 연도          -44.71%      -29.98%\n\n평균 하락                 -3.59%       -4.0%\n평균 하락 일수            23           26\n회복 요인                  2.58         3.91\n울서 지수                  0.18         0.12\n평온 지수                   0.42         0.94\n\n평균 상승 월              7.75%        8.26%\n평균 하락 월           -6.91%       -6.96%\n이익 일 %                 53.66%       54.54%\n이익 월 %                65.45%       58.18%\n이익 분기 %             68.42%       57.89%\n이익 연도 %              80.0%        80.0%\n\n베타                       -            0.86\n알파                      -            0.05\n상관 관계                -            89.32%\n트레이너 비율              -            234.87%\n없음\n```\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- 최악의 5번의 Drawdown\n\n![Worst Drawdowns](/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_24.png)\n\n- MSR PO 전략 시각화\n\n![MSR PO Strategy Visualization](/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_25.png)\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n\n![Image 1](/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_26.png)\n\n![Image 2](/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_27.png)\n\n![Image 3](/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_28.png)\n\n![Image 4](/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_29.png)\n\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- 결론:\n\n- 전략 누적 수익률 약 220%.\n- 전략 누적 수익률 (변동성 일치) 약 210%.\n- 월별 수익 분포: 전략 약 7% 대 벤치마크 약 3%.\n- 롤링 베타 약 0.6\n- 롤링 변동성 약 0.2\n- 롤링 샤프 비율 약 2.5\n- 롤링 소티노 비율 약 5.0\n- 최대 손실 약 -31% (2021년 01월 04일)\n- 최소 월간 순활 수익 약 -10% (2022년 10월)\n- 전략 수익 분위 수: 분기별로 약 10%, 연간으로 약 50%.\n\n- 전략의 누적 수익률과 샤프 비율이 벤치마크보다 높음을 보여줍니다. 이는 더 많은 수익을 가져오지만, 같은 수준의 위험을 감수하고 있음을 의미합니다.\n- 베타 값이 1보다 낮다는 것은 MSR B2가 전체 시장보다 덜 변동성이 있다는 것을 의미합니다.\n- 전반적으로 최적화된 MSR B2 포트폴리오는 위험-수익 교환 관계 측면에서 50% BF-to-B2 포트폴리오 비용 절감까지 고려하여 평등가중 BF 포트폴리오보다 우수한 성과를 거뒀습니다.\n\n# (NVDA, AMD) 대 S\u0026P 500 수익성 분석\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- FinanceToolkit [9]를 사용하여 (NVDA, AMD) 대 S\u0026P 500 수익 분석의 세부 정보를 살펴보겠습니다.\n- 입력한 과거 데이터, 손익 계산서, 수익성 비율, FA 및 TA 지표 가져오기 [9]\n\n```js\nimport matplotlib.pyplot as plt\nimport matplotlib.ticker as mtick\nimport pandas as pd\nimport seaborn as sns\nfrom matplotlib import patheffects\n\nfrom financetoolkit import Toolkit\n\nAPI_KEY = \"YOUR API KEY\"\n\ncompanies = Toolkit([\"NVDA\", \"AMD\"], api_key=API_KEY, start_date=\"2017-12-31\")\n\n# 손익 계산서\nhistorical_data = companies.get_historical_data()\n\n# 재무 제표 예시\nincome_statement = companies.get_income_statement()\n\n# 수익성 비율\nprofitability_ratios = companies.ratios.collect_profitability_ratios()\n\n# 그리스 금융 지표\nall_greeks = companies.options.collect_all_greeks(expiration_time_range=180)\n\n\n# 요소 자산 상관 관계\nfactor_asset_correlations = companies.performance.get_factor_asset_correlations(\n    period=\"quarterly\"\n)\n\n# VaR\nvalue_at_risk = companies.risk.get_value_at_risk(period=\"weekly\")\n\n# TA 지표\nichimoku_cloud = companies.technicals.get_ichimoku_cloud()\n```\n\n## 누적 수익률\n\n- NVDA, AMD 및 S\u0026P 500의 누적 수익률을 시각화합니다. [9]\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\ndisplay(역사적_데이터)\n\n# 클립 보드에 복사 (이건 README에 데이터를 붙여 넣기 위함입니다)\npd.io.clipboards.to_clipboard(\n    역사적_데이터.xs(\"NVDA\", axis=1, level=1).iloc[:-1].head().to_markdown(),\n    excel=False,\n)\n\n# 누적 수익을 위한 라인 차트 생성\nax = 역사적_데이터[\"누적 수익\"].plot(\n    figsize=(15, 5),\n    lw=2,\n)\n\n# 색상 및 라인 스타일 사용자 정의\nax.set_prop_cycle(color=[\"#007ACC\", \"#FF6F61\", \"#4CAF50\"])\nax.set_xlabel(\"년도\")\nax.set_ylabel(\"누적 수익\")\nax.set_title(\n    \"NVDA 및 AMD의 누적 수익과 S\u0026P 500을 벤치마크로 함께한 수익\"\n)\n\n# 범례 추가\nax.legend([\"NVDA\", \"AMD\", \"S\u0026P 500\"], loc=\"upper left\")\n\n# 가시성을 위해 그리드 라인 추가\nax.grid(True, linestyle=\"--\", alpha=0.7)\n\nplt.show()\n```\n\n\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_30.png\" /\u003e\n\n## 변동성\n\n- NVDA 및 AMD 대 S\u0026P 500의 변동성 그래픽화\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\nprint(historical_data['Volatility'].iloc[-1])\nNVDA        0.0324\nAMD         0.0345\nBenchmark   0.0125\nName: 2024-07-09, dtype: float64\n\nhistorical_data['Volatility'].iloc[-1].plot.bar(title='Volatility')\n```\n\n![Image](/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_31.png)\n\n- 저희 두 자산의 변동성이 벤치마크의 3배 정도 더 높다는 것을 알 수 있습니다.\n\n## 손익계산서\n\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- 2019년부터 2024년까지의 NVDA 및 AMD 손익 계산서를 비교해보세요 [9]\n\n```js\nincome_statement를 출력하세요\n\n# 클립보드에 복사하세요 (README에 데이터를 붙여넣기 위한 용도입니다)\npd.io.clipboards.to_clipboard(\n    income_statement.loc[\"NVDA\"].head().to_markdown(), excel=False\n)\n\n# 막대 그래프 생성\nebitda_data = income_statement.loc[:, \"EBITDA\", :].T\ncolors = [\"#007ACC\", \"#FF6F61\"]\nax = ebitda_data.plot.bar(figsize=(15, 5), color=colors)\n\n# 막대 위에 데이터 라벨 추가 (백만으로 나누어 사용자 정의 포맷팅 (백만과 천 단위 구분))\nfor p in ax.patches:\n    ebitda_millions = p.get_height() / 1_000_000_000\n    label = f\"{ebitda_millions:,.2f} M\"\n    x = p.get_x() + p.get_width() / 2.0\n    y = p.get_height()\n\n    # 라벨이 차트 상단과 너무 가까운지 확인\n    if y \u003c 0.2 * ax.get_ylim()[1]:\n        va = \"bottom\"\n        xytext = (0, 5)\n    else:\n        va = \"top\"\n        xytext = (0, -5)\n\n    # 텍스트에 대한 스트로크 효과 생성\n    text = ax.annotate(\n        label,\n        (x, y),\n        ha=\"center\",\n        va=va,\n        fontsize=10,\n        color=\"black\",\n        xytext=xytext,\n        textcoords=\"offset points\",\n    )\n    text.set_path_effects([patheffects.withStroke(linewidth=3, foreground=\"white\")])\n\n# 축 라벨 사용자 정의\nplt.xlabel(\"\", fontsize=10)\nplt.ylabel(\"\", fontsize=10)\n\n# x tick의 각도 조정\nplt.xticks(rotation=0)\n\n# 제목 설정\nplt.title(\n    \"Earnings Before Interest, Taxes, Depreciation and Amortization (EBITDA) of NVDA \u0026 AMD\",\n    fontsize=12,\n)\n\n# 명확성을 위해 수평 grid 추가\nplt.grid(axis=\"y\", linestyle=\"--\", alpha=0.7)\n\n# y축에 천 단위 구분 추가\nax.yaxis.set_major_formatter(\n    mtick.FuncFormatter(lambda x, _: f\"{x / 1_000_000_000:,.0f} M\")\n)\n\n# 그래프 출력\nplt.show()\n```\n\n![차트1](/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_32.png)\n\n![차트2](/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_33.png)\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n\n![Profitability Ratios](/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_34.png)\n\n## 수익성 비율\n\n- NVDA 및 AMD 수익성 비율 2019–2024 시각화 [9]\n\n```js\ndisplay(profitability_ratios)\n\n# 클립 보드로 복사 (이것은 README에 데이터를 붙여넣기하기 위한 것입니다)\npd.io.clipboards.to_clipboard(\n    profitability_ratios.loc[\"NVDA\"].head().to_markdown(), excel=False\n)\n\nratios_to_plot = [\n    \"Return on Assets\",\n    \"Return on Equity\",\n    \"Return on Invested Capital\",\n    \"Return on Tangible Assets\",\n]\n\n# 그림 생성\nax = (\n    (profitability_ratios.dropna(axis=1) * 100)\n    .loc[\"NVDA\", ratios_to_plot, :]\n    .T.plot(figsize=(15, 5), title=\"NVDA의 수익성 비율\", lw=2)\n)\n\n# 라인 스타일과 색상 커스터마이징\nline_styles = [\"-\", \"--\", \"-.\", \":\"]\nline_colors = [\"blue\", \"red\", \"green\", \"purple\"]\nfor i, line in enumerate(ax.get_lines()):\n    line.set_linestyle(line_styles[i])\n    line.set_color(line_colors[i])\n\n# 범례 커스터마이징\nax.legend(ratios_to_plot)\n\n# 라벨 및 그리드 추가\nplt.xlabel(\"Year\", fontsize=12)\nplt.ylabel(\"Percentage (%)\", fontsize=12)\nplt.grid(True, linestyle=\"--\", alpha=0.7)\n\n# 제목 커스터마이징\nplt.title(\"NVDA의 수익성 비율\")\n\n# 그림 표시\nplt.show()\n```\n\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n-md\n\n![image](/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_35.png)\n\n![image](/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_36.png)\n\n- AMD 수익성 비율 그래픽 그리기\n\n```js\n# 클립 보드로 복사 (README에 데이터를 붙여넣을 때 사용)\npd.io.clipboards.to_clipboard(\n    profitability_ratios.loc[\"AMD\"].head().to_markdown(), excel=False\n)\n\nratios_to_plot = [\n    \"Return on Assets\",\n    \"Return on Equity\",\n    \"Return on Invested Capital\",\n    \"Return on Tangible Assets\",\n]\n\n# 그림 생성\nax = (\n    (profitability_ratios.dropna(axis=1) * 100)\n    .loc[\"AMD\", ratios_to_plot, :]\n    .T.plot(figsize=(15, 5), title=\"AMD의 수익성 비율\", lw=2)\n)\n\n# 라인 스타일과 색상 사용자 정의\nline_styles = [\"-\", \"--\", \"-.\", \":\"]\nline_colors = [\"blue\", \"red\", \"green\", \"purple\"]\nfor i, line in enumerate(ax.get_lines()):\n    line.set_linestyle(line_styles[i])\n    line.set_color(line_colors[i])\n\n# 범례 사용자 정의\nax.legend(ratios_to_plot)\n\n# 레이블과 그리드 추가\nplt.xlabel(\"년도\", fontsize=12)\nplt.ylabel(\"백분율 (%)\", fontsize=12)\nplt.grid(True, linestyle=\"--\", alpha=0.7)\n\n# 제목 사용자 정의\nplt.title(\"AMD의 수익성 비율\")\n\n# 그림 표시\nplt.show()\n```\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n\n![Image](/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_37.png)\n\n- 2023년 NVDA 대 AMD 수익성 비율 검토\n\n```js\nprint(profitability_ratios['2023'])\n\nAMD   매출 이익율                                     0.4612\n      영업 이익율                                   0.0177\n      순이익율                                      0.0377\n      이자 상환 여유성 비율                           37.283\n      세전 순이익 마진                              0.0217\n      유효 세율                                   -0.7033\n      자산 수익률                                   0.0126\n      자본 수익률                                   0.0154\n      투자 자본 이익률                             0.0146\n      자본 운용 이익률                               0.01\n      유형 자산 수익률                             0.0083\n      소득 품질 비율                               1.952\n      EBT당 순이익                                1.6811\n      영업현금흐름 대 영업 현금흐름 비율           0.6725\n      EBT 대 EBIT 비율                           0.8274\n      EBIT 대 매출                               0.0271\nNVDA  매출 이익율                                    0.5693\n      영업 이익율                                   0.1566\n      순이익율                                      0.1619\n      이자 상환 여유성 비율                        22.0153\n      세전 순이익 마진                             0.155\n      유효 세율                                  -0.0447\n      자산 수익률                                   0.1023\n      자본 수익률                                   0.1793\n      투자 자본 이익률                            0.1319\n      자본 운용 이익률                            0.1283\n      유형 자산 수익률                            0.0693\n      소득 품질 비율                              1.2914\n      EBT당 순이익                               1.0447\n      영업현금흐름 대 영업 현금흐름 비율           0.6751\n      EBT 대 EBIT 비율                           0.941\n      EBIT 대 매출                               0.1647\nName: 2023, dtype: float64\n\nplt.figure(figsize=(14, 8))\nprof=profitability_ratios['2023']\ncols = ['NVDA', 'AMD']\nprof[cols].plot(kind='bar')\n```\n\n![Image](/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_38.png)\n\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- 2023년 NVDA 대 AMD 수익성 비율 확대\n\n```js\nplt.figure(figsize=(14, 8))\nprof = profitability_ratios['2023']\ncols = ['NVDA', 'AMD']\nprof[cols].plot(kind='bar')\nplt.ylim(-1, 2.5)\n```\n\n![Profitability Ratios](/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_39.png)\n\n## AMD 대 NVDA 그리스 민감도\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- AMD에 대한 그리스 감수치 분석 중 [9]\n\n```js\nimport matplotlib.pyplot as plt\nfrom matplotlib import cm\n\nfig, ax = plt.subplots(figsize=(15, 10), ncols=2, nrows=2)\n\ndelta_over_time_df = pd.DataFrame()\ndates = all_greeks.columns.get_level_values(0)\n\n# 1, 2개월 ... 처리\nfor i, time in enumerate(range(30, 210, 30)):\n\n    try:\n        period_column = dates[time]\n    except IndexError:\n        period_column = dates[-1]\n\n    color = cm.viridis(i / 5)  # 색상 변화에 viridis colormap 사용\n\n    # Delta plot\n    ax[0, 0].plot(all_greeks.loc[\"AMD\", (period_column, \"Delta\")], color=color)\n\n    # Gamma plot\n    ax[0, 1].plot(all_greeks.loc[\"AMD\", (period_column, \"Gamma\")], color=color)\n\n    # Theta plot\n    ax[1, 0].plot(all_greeks.loc[\"AMD\", (period_column, \"Theta\")], color=color)\n\n    # Vega plot\n    ax[1, 1].plot(all_greeks.loc[\"AMD\", (period_column, \"Vega\")], color=color)\n\n    delta_over_time_df = pd.concat(\n        [delta_over_time_df, all_greeks.loc[\"AMD\", (period_column, \"Delta\")]], axis=1\n    )\n\ndate_labels = [\n    \"1 달\",\n    \"2 달\",\n    \"3 달\",\n    \"4 달\",\n    \"5 달\",\n    \"6 달\",\n]\n\ndelta_over_time_df.columns = date_labels\n\n# DataFrame 표시\ndisplay(delta_over_time_df.iloc[7:12])\n\n# 클립보드로 복사 (README에 데이터를 붙여넣으려면)\npd.io.clipboards.to_clipboard(delta_over_time_df.iloc[7:12].to_markdown(), excel=False)\n\n# 타이틀 및 레이블\nfor number1, number2 in [(0, 0), (1, 0), (0, 1), (1, 1)]:\n    ax[number1, number2].set_xlim(\n        [all_greeks.loc[\"AMD\"].index.min(), all_greeks.loc[\"AMD\"].index.max()]\n    )\n    ax[number1, number2].grid(True, linestyle=\"--\", alpha=0.7)\n    ax[number1, number2].set_xlabel(\"행사가\")\n    ax[number1, number2].set_facecolor(\"#F5F5F5\")\n\nax[0, 0].set_title(\"Delta\")\nax[0, 1].set_title(\"Gamma\")\nax[1, 0].set_title(\"Theta\")\nax[1, 1].set_title(\"Vega\")\n\n# 레이아웃 조정\nfig.legend(\n    date_labels,\n    loc=\"upper center\",\n    ncol=6,\n    bbox_to_anchor=(0.5, 0),\n    frameon=False,\n)\nfig.suptitle(\n    \"AMD에 대한 그리스 감수치 분석\", fontsize=30, x=0.5, y=0.98, fontfamily=\"cursive\"\n)\n\nfig.tight_layout()\n\n# 플롯 표시\nplt.show()\n\n    1 달 2 달 3 달 4 달 5 달 6 달\n165 0.872 0.8067 0.7692 0.7398 0.7236 0.7113\n170 0.7487 0.698 0.6728 0.6544 0.6449 0.638\n175 0.5863 0.5721 0.5664 0.5631 0.562 0.5615\n180 0.4124 0.442 0.458 0.471 0.4786 0.4848\n185 0.2582 0.3212 0.3555 0.3828 0.3985 0.4108\n```\n\n\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_40.png\" /\u003e\n\n- NVDA에 대한 그리스 감수치 분석 중 [9]\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n\n```js\nimport matplotlib.pyplot as plt\nfrom matplotlib import cm\n\nfig, ax = plt.subplots(figsize=(15, 10), ncols=2, nrows=2)\n\ndelta_over_time_df = pd.DataFrame()\ndates = all_greeks.columns.get_level_values(0)\n\n# Loop through different times\nfor i, time in enumerate(range(30, 210, 30)):\n\n    try:\n        period_column = dates[time]\n    except IndexError:\n        period_column = dates[-1]\n\n    color = cm.viridis(i / 5)  # Using viridis colormap for color variation\n\n    # Delta plot\n    ax[0, 0].plot(all_greeks.loc[\"NVDA\", (period_column, \"Delta\")], color=color)\n\n    # Gamma plot\n    ax[0, 1].plot(all_greeks.loc[\"NVDA\", (period_column, \"Gamma\")], color=color)\n\n    # Theta plot\n    ax[1, 0].plot(all_greeks.loc[\"NVDA\", (period_column, \"Theta\")], color=color)\n\n    # Vega plot\n    ax[1, 1].plot(all_greeks.loc[\"NVDA\", (period_column, \"Vega\")], color=color)\n\n    delta_over_time_df = pd.concat(\n        [delta_over_time_df, all_greeks.loc[\"NVDA\", (period_column, \"Delta\")]], axis=1\n    )\n\ndate_labels = [\n    \"1 Month\",\n    \"2 Months\",\n    \"3 Months\",\n    \"4 Months\",\n    \"5 Months\",\n    \"6 Months\",\n]\n\ndelta_over_time_df.columns = date_labels\n\n# Show the DataFrame\ndisplay(delta_over_time_df.iloc[7:12])\n\n# Copy to clipboard (this is just to paste the data in the README)\npd.io.clipboards.to_clipboard(delta_over_time_df.iloc[7:12].to_markdown(), excel=False)\n\n# Titles and labels\nfor number1, number2 in [(0, 0), (1, 0), (0, 1), (1, 1)]:\n    ax[number1, number2].set_xlim(\n        [all_greeks.loc[\"NVDA\"].index.min(), all_greeks.loc[\"NVDA\"].index.max()]\n    )\n    ax[number1, number2].grid(True, linestyle=\"--\", alpha=0.7)\n    ax[number1, number2].set_xlabel(\"Strike Price\")\n    ax[number1, number2].set_facecolor(\"#F5F5F5\")\n\nax[0, 0].set_title(\"Delta\")\nax[0, 1].set_title(\"Gamma\")\nax[1, 0].set_title(\"Theta\")\nax[1, 1].set_title(\"Vega\")\n\n# Adjust layout\nfig.legend(\n    date_labels,\n    loc=\"upper center\",\n    ncol=6,\n    bbox_to_anchor=(0.5, 0),\n    frameon=False,\n)\nfig.suptitle(\n    \"Greek Sensitivities for NVDA\", fontsize=30, x=0.5, y=0.98, fontfamily=\"cursive\"\n)\n\nfig.tight_layout()\n\n# Show the plot\nplt.show()\n\n    1 Month 2 Months 3 Months 4 Months 5 Months 6 Months\n135 0.3367 0.3835 0.4084 0.4282 0.4395 0.4484\n140 0.1525 0.2277 0.2722 0.3087 0.3298 0.3466\n145 0.0539 0.1188 0.1666 0.2099 0.2363 0.2578\n150 0.0149 0.0547 0.0939 0.1349 0.1619 0.1848\n155 0.0033 0.0224 0.049 0.0822 0.1063 0.128\n```\n\n\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_41.png\" /\u003e\n\n해석: 옵션 그리스는 옵션 가격이 변동성이나 기초 자산의 가격과 같은 기본 결정 요소에 대한 민감성을 나타내는 재정적 측정치입니다. 그리스는 옵션 포트폴리오를 분석하고 옵션 또는 옵션 포트폴리오의 민감성 분석에 활용됩니다. 이러한 측정치는 많은 투자자에 의해 옵션 거래에 대한 정보를 얻기 위한 필수적인 요소로 간주됩니다.\n\nDelta: 기초 자산의 가격이 $1 증가하면 옵션의 가격이 Delta 금액만큼 변동합니다.\n\n\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n감마는 델타의 변화가 기초 자산 가격 변동과 어떻게 관련되는지를 측정하는 지표입니다. 기초 자산 가격이 $1 증가하면, 옵션의 델타는 감마만큼 변화합니다.\n\n베가는 옵션의 가격이 기초 자산의 변동성에 얼마나 민감한지를 나타내는 옵션 그리스 중 하나입니다. 기초 자산의 변동성이 1% 증가하면, 옵션 가격은 베가만큼 변화합니다.\n\n세타는 옵션 가격이 옵션의 만기까지 남은 시간에 대해 얼마나 민감한지를 나타내는 지표입니다. 옵션의 만기까지 남은 기간이 하루 줄어들면, 옵션 가격은 세타만큼 변화합니다. 세타 옵션 그리스는 시간 가치 손실이라고도 불립니다.\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- ATM(At the money)은 옵션의 행사 가격이 기초 자산의 현재 시장 가격과 동일한 상황을 말합니다. ATM 콜 옵션은 델타가 0.50입니다.\n- NVDA/AMD의 ATM 행사 가격 USD는 130/175입니다.\n- 세타는 일반적으로 롱 포지션에 대해 음수로 표현되며, 옵션 가치의 얼마나 많은 부분이 손실되고 있는지를 나타냅니다.\n- 저희의 그래프는 NVDA/AMD의 ATM 세타가 약 -0.3/-0.45임을 보여줍니다.\n- 델타가 . 40-. 60 범위에 있거나 일반적으로 옵션이 ATM일 때 감마가 가장 높습니다. 따라서 만약 옵션의 델타가 +40이고 감마가 10이라면 기초 자산 가격이 1달러 오르면 그 옵션의 델타가 +50이 됩니다.\n- 저희 예시에서 NVDA/AMD의 ATM 감마는 0.05/0.035입니다.\n- 옵션 베가는 기본 주가 변동성에 대한 옵션의 민감도를 보고하는 것입니다. 더 높은 베가 값은 옵션 가격이 변동성 변화에 민감하다는 것을 나타내고, 더 낮은 베가는 옵션 가격이 변동성 변화에 민감하지 않다는 것을 나타냅니다.\n- 우리의 다이어그램은 NVDA/AMD의 ATM 베가가 0.14/0.18임을 나타냅니다.\n\n## NVDA \u0026 AMD VaR vs Benchmark\n\n- NVDA \u0026 AMD Value-at-Risk (VaR) vs Benchmark을 플로팅합니다. [9]\n\n\n|                 | NVDA    | AMD     | Benchmark |\n|-----------------|---------|---------|-----------|\n| 2017-01-02/2017-01-08 | -0.0198 | -0.0141    | -0.0007  |\n| 2017-01-09/2017-01-15 | -0.0146 | -0.0356    | -0.0031  |\n| 2017-01-16/2017-01-22 | -0.0217 | -0.0627    | -0.0037  |\n| 2017-01-23/2017-01-29 | NaN     | -0.004     | -0.0024  |\n| 2017-01-30/2017-02-05 | -0.0131 | -0.0192    | -0.005   |\n| ...             | ...     | ...     | ...       |\n| 2024-06-03/2024-06-09 | -0.0096 | -0.0215    | -0.001   |\n| 2024-06-10/2024-06-16 | -0.0042 | -0.0376    | NaN      |\n| 2024-06-17/2024-06-23 | -0.0349 | -0.0214    | -0.0025  |\n| 2024-06-24/2024-06-30 | -0.0573 | -0.0147    | -0.0038  |\n| 2024-07-01/2024-07-07 | -0.0079 | -0.0255    | NaN      |\n\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n![이미지](/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_42.png)\n\n2024-07 추론: NVDA, AMD 및 S\u0026P 500의 VaR은 각각 약 5%, 3% 및 1%입니다.\n\n## NVDA 및 AMD의 Fama-French 요인과의 상관 관계\n\n- 투자자들은 위험을 양적화하고 자본에 대한 예상 수익을 추정하는 데 사용되는 금융 모델을 찾고 있습니다. Fama French 5요인 모델은 가장 고전적인 모델 중 하나입니다(Fama 및 French, 2015).\n- NVDA와 AMD의 Fama-French 요인과의 상관 관계 탐색\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\n화면에 요소 대상 상호 상관 관계를 표시합니다.\n\n# 클립 보드에 복사하기 (README에 데이터를 붙여넣기하려는 목적)\npd.io.clipboards.to_clipboard(\n    factor_asset_correlations.xs(\"NVDA\", axis=1, level=0)\n    .iloc[:-1]\n    .tail()\n    .to_markdown(),\n    excel=False,\n)\n\n# factor_asset_correlations DataFrame을 정의하세요 (YourDataFrame을 대체하세요)\ncorrelations_aapl = factor_asset_correlations.xs(\"NVDA\", axis=1, level=0)\ncorrelations_msft = factor_asset_correlations.xs(\"AMD\", axis=1, level=0)\n\n# x축을 공유하며 서브플롯을 만들고 스타일을 사용자 정의하세요\nfig, (ax1, ax2) = plt.subplots(2, 1, figsize=(10, 8), sharex=True)\n\n# 선에 대한 색상 팔렛트 설정\ncolors = [\"#007ACC\", \"#FF6F61\", \"#4CAF50\", \"#FFD700\", \"#FF6347\", \"#6A5ACD\", \"#FF8C00\"]\n\n# AAPL의 상호 상관 관계 그래프\ncorrelations_aapl.plot(\n    ax=ax1, title=\"NVDA의 Fama-French Factors와의 상관 관계\", color=colors\n)\nax1.set_ylabel(\"상관 관계\")\nax1.legend(loc=\"upper right\", frameon=False)\n\n# MSFT의 상호 상관 관계 그래프\ncorrelations_msft.plot(\n    ax=ax2, title=\"AMD의 Fama-French Factors와의 상관 관계\", color=colors\n)\nax2.set_xlabel(\"날짜\")\nax2.set_ylabel(\"상관 관계\")\nax2.legend(loc=\"upper right\", frameon=False)\n\n# 명확한 그리드 선을 추가하세요\nax1.grid(True, linestyle=\"--\", alpha=0.5)\nax2.grid(True, linestyle=\"--\", alpha=0.5)\n\n# 범례 및 레이블을 사용자 정의하세요\nax1.legend(loc=\"upper right\", frameon=False)\nax2.legend(loc=\"upper right\", frameon=False)\n\n# 서브플롯의 배경색을 설정하세요\nax1.set_facecolor(\"#F9F9F9\")\nax2.set_facecolor(\"#F9F9F9\")\n\n# 서브플롯의 위쪽과 오른쪽 테두리를 제거하세요\nax1.spines[[\"top\", \"right\"]].set_visible(False)\nax2.spines[[\"top\", \"right\"]].set_visible(False)\n\n# 간격을 최적화하기 위해 tight 레이아웃 설정\nplt.tight_layout()\n\n# 그래프 보기\nplt.show()\r\n```\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- MKT은 시장의 초과수익입니다. 이것은 가치가 가중치가 부여된 시장 포트폴리오의 수익률입니다.\n- SMB는 소형 주식의 다양한 포트폴리오의 수익률에서 대형 주식의 다양한 포트폴리오의 수익률을 뺀 값입니다.\n- HML은 고 Book-to-Market 비율을 가진 주식의 다양한 포트폴리오와 저 Book-to-Market 비율을 가진 주식의 다양한 포트폴리오 간의 차이입니다.\n- RMW는 강한(높고 안정적인) 수익성을 가진 주식의 다양한 포트폴리오와 약한(낮은) 수익성을 가진 주식의 다양한 포트폴리오 간의 차이입니다.\n- CMA는 저 및 고 투자 기업의 다양한 포트폴리오 간의 차이로 정의됩니다. 여기서 저/고 투자는 재투자 비율이 낮음/높음을 의미합니다.\n\n## 추론 2024:\n- HML(NVDA)`HML(AMD)\n- 만약 가치 주식이 성장 주식을 능가할 것이라고 믿는다면, 포트폴리오를 HML 요인이 높은 자산 쪽으로 기울이는 것이 좋습니다.\n- 우리의 예에서는 저 Book-to-Market 비율을 가진 대형기업의 경우, \"큰 규모\" 및 \"낮은 가치\" 범주로 분류됩니다. Fama-French 모델에 따르면, 이 기업은 장기적으로 낮은 수익률을 제공할 것으로 예상되며, SMB 및 HML 요인이 모두 음수일 것으로 예상됩니다.\n- HML 요인과 유사하게 정의된 수익성 요인(RMW)은 운영 수익성이 강한(높음) 기업과 약한(낮은) 기업의 수익률 간의 차이입니다. 우리는 알 수 있습니다.\n- RMW(NVDA) 약 0.25이며 RMW(AMD) 약 0.1입니다.\n\n## TA 이치모쿠 클라우드: NVDA 대 AMD\n\n- TA 이치모쿠 클라우드는 시장 심리와 가격 모멘텀을 한눈에 볼 수 있게 하여 트레이더가 추세를 식별하는 데 도움을 줄 수 있습니다.\n- NVDA \u0026 AMD에 대한 이치모쿠 클라우드 비교\n\n```js\ndisplay(ichimoku_cloud)\n\n# 이치모쿠 클라우드 데이터 데이터프레임 정의\nichimoku_data_aapl = ichimoku_cloud.xs(\"NVDA\", level=1, axis=1)\nichimoku_data_msft = ichimoku_cloud.xs(\"AMD\", level=1, axis=1)\n\n# 클립보드에 복사 (이것은 README에 데이터를 붙여넣기하기 위한 것입니다)\npd.io.clipboards.to_clipboard(ichimoku_data_aapl.tail().to_markdown(), excel=False)\n\n# 마지막 500행 가져오기\nichimoku_data_aapl = ichimoku_data_aapl.iloc[-500:]\nichimoku_data_msft = ichimoku_data_msft.iloc[-500:]\n\n# 수평 서브플롯을 위한 그림 및 두 개의 축 생성\nfig, (ax1, ax2) = plt.subplots(1, 2, figsize=(15, 6))\n\n# PeriodIndex를 DatetimeIndex로 변환\nichimoku_data_aapl.index = ichimoku_data_aapl.index.to_timestamp()\nichimoku_data_msft.index = ichimoku_data_msft.index.to_timestamp()\n\n# NVDA용 이치모쿠 클라우드 플롯\nax1.plot(\n    ichimoku_data_aapl.index,\n    ichimoku_data_aapl[\"Conversion Line\"],\n    color=\"blue\",\n    label=\"Conversion Line (텐칸센)\",\n    linewidth=2,\n)\nax1.plot(\n    ichimoku_data_aapl.index,\n    ichimoku_data_aapl[\"Base Line\"],\n    color=\"red\",\n    label=\"Base Line (기준선)\",\n    linewidth=2,\n)\nax1.fill_between(\n    ichimoku_data_aapl.index,\n    ichimoku_data_aapl[\"Leading Span A\"],\n    ichimoku_data_aapl[\"Leading Span B\"],\n    where=ichimoku_data_aapl[\"Leading Span A\"] \u003e= ichimoku_data_aapl[\"Leading Span B\"],\n    facecolor=\"green\",\n    alpha=0.2,\n    label=\"상승 클라우드\",\n)\nax1.fill_between(\n    ichimoku_data_aapl.index,\n    ichimoku_data_aapl[\"Leading Span A\"],\n    ichimoku_data_aapl[\"Leading Span B\"],\n    where=ichimoku_data_aapl[\"Leading Span A\"] \u003c ichimoku_data_aapl[\"Leading Span B\"],\n    facecolor=\"red\",\n    alpha=0.2,\n    label=\"하락 클라우드\",\n)\n\n# NVDA에 대한 범례 및 레이블 사용자 정의\nax1.legend(loc=\"upper left\")\nax1.set_xlabel(\"날짜\", fontsize=14)\nax1.set_ylabel(\"가격\", fontsize=14)\nax1.set_title(\"이치모쿠 클라우드 차트 (NVDA)\", fontsize=16)\nax1.grid(True, linestyle=\"--\", alpha=0.5)\nax1.set_facecolor(\"#f7f7f7\")\nax1.tick_params(axis=\"both\", which=\"major\", labelsize=12)\n\n# MSFT용 이치모쿠 클라우드 플롯\nax2.plot(\n    ichimoku_data_msft.index,\n    ichimoku_data_msft[\"Conversion Line\"],\n    color=\"blue\",\n    label=\"Conversion Line (텐칸센)\",\n    linewidth=2,\n)\nax2.plot(\n    ichimoku_data_msft.index,\n    ichimoku_data_msft[\"Base Line\"],\n    color=\"red\",\n    label=\"Base Line (기준선)\",\n    linewidth=2,\n)\nax2.fill_between(\n    ichimoku_data_msft.index,\n    ichimoku_data_msft[\"Leading Span A\"],\n    ichimoku_data_msft[\"Leading Span B\"],\n    where=ichimoku_data_msft[\"Leading Span A\"] \u003e= ichimoku_data_msft[\"Leading Span B\"],\n    facecolor=\"green\",\n    alpha=0.2,\n    label=\"상승 클라우드\",\n)\nax2.fill_between(\n    ichimoku_data_msft.index,\n    ichimoku_data_msft[\"Leading Span A\"],\n    ichimoku_data_msft[\"Leading Span B\"],\n    where=ichimoku_data_msft[\"Leading Span A\"] \u003c ichimoku_data_msft[\"Leading Span B\"],\n    facecolor=\"red\",\n    alpha=0.2,\n    label=\"하락 클라우드\",\n)\n\n# AMD에 대한 범례 및 레이블 사용자 정의\nax2.legend(loc=\"upper left\")\nax2.set_xlabel(\"날짜\", fontsize=14)\nax2.set_ylabel(\"가격\", fontsize=14)\nax2.set_title(\"이치모쿠 클라우드 차트 (AMD)\", fontsize=16)\nax2.grid(True, linestyle=\"--\", alpha=0.5)\nax2.set_facecolor(\"#f7f7f7\")\nax2.tick_params(axis=\"both\", which=\"major\", labelsize=12)\n\n# 서브플롯 간의 간격 조정\nplt.tight_layout()\n\n# 플롯 보기\nplt.show()\n```\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n\n![이미지](/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_45.png)\n\n- 이 그래프는 NVDA 및 AMD가 각각 상승 및 하락하는 단기 추세를 따르는 것을 보여줍니다. AMD 플롯을 보면 2024년 7월에 Tenkan Sen(파란색 선)과 Kijun Sen(빨간색 선)이 명확히 교차하는 것을 볼 수 있습니다.\n\n## 1년 빅테크 주가 예측\n\n- FinanceToolkit이 1년 빅테크 주식을 예측할 수 있나요?\n- 회사 티커로 Toolkit을 초기화하고 1년 주식 가격 시뮬레이션을 플로팅하기 [9]\n\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\n# 회사 티커로 Toolkit을 초기화합니다\n회사 = Toolkit(\n    [\"AAPL\", \"MSFT\", \"GOOGL\", \"AMZN\"], api_key=API_KEY, start_date=\"2005-01-01\"\n)\n\n주가모의실험 = 회사.options.get_stock_price_simulation(timesteps=10)\n\nfig, ax = plt.subplots(2, 2, figsize=(15, 10))\n\n주가모의실험_전치 = 주가모의실험.T\n주가모의실험_전치.index = (\n    주가모의실험_전치.index.astype(\"datetime64[ns]\")\n)\n\nfor i, 티커 in enumerate(회사._tickers):\n    ax[i // 2, i % 2].plot(주가모의실험_전치[티커])\n    ax[i // 2, i % 2].set_title(티커)\n    ax[i // 2, i % 2].xaxis.set_tick_params(rotation=20)\n    ax[i // 2, i % 2].yaxis.set_tick_params(labelsize=8)\n    ax[i // 2, i % 2].grid(linestyle=\"--\", alpha=0.5)\n\nfig.suptitle(\"주가 모의실험\", fontweight=\"bold\")\nfig.tight_layout()\nplt.show()\r\n```\n\n\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_46.png\" /\u003e\n\n- 이러한 예측은 시간이 흐름에 따른 자본 가격의 이항 리턴 분포에 기반합니다. 이 모델에서는 각 반복마다 두 가지 가능한 결과가 있습니다 — 상승하거나 하락하며, 이는 이항 트리를 따릅니다.\n- 시간에 따라 이 두 값을 그리는 것은 이항 트리를 만드는 것으로 알려져 있습니다. 이항 모델에 대한 자세한 내용은 Equity Derivatives의 가격 결정 및 분석(금융 Toolbox)을 참조하십시오.\n- 이 모델은 직관적이며 잘 알려진 Black-Scholes 모델보다 실무에서 더 자주 사용됩니다.\n\n## META 캔들스틱 \u0026 기술 분석 지표\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- 마침내, 지난 729일 동안의 META TA 전략들을 탐색해 보겠습니다.\n- 주식 데이터 읽기\n\n```js\nticker=\"META\"\ndfme = yf.download(ticker, start = '2020-01-01')\n```\n\n- META 캔들스틱 차트 2020–2024 및 TA 지표 표시\n\n```js\n# 이동평균 추가\ndfme['EMA9'] = dfme['Adj Close'].ewm(span = 9, adjust = False).mean() # 지수 이동평균 9기간\ndfme['SMA20'] = dfme['Adj Close'].rolling(window=20).mean() # 단순 이동평균 20기간\ndfme['SMA50'] = dfme['Adj Close'].rolling(window=50).mean() # 단순 이동평균 50기간\ndfme['SMA100'] = dfme['Adj Close'].rolling(window=100).mean() # 단순 이동평균 100기간\ndfme['SMA200'] = dfme['Adj Close'].rolling(window=200).mean() # 단순 이동평균 200기간\n\n# 14기간 RSI 추가\ndelta = dfme['Adj Close'].diff() # 델타 계산\ngain = delta.where(delta \u003e 0,0) # 상승값 획득\nloss = -delta.where(delta \u003c 0,0) # 하락값 획득\navg_gain = gain.rolling(window=14).mean() # 14기간 평균 상승값 측정\navg_loss = loss.rolling(window=14).mean() # 14기간 평균 하락값 측정\nrs = avg_gain/avg_loss # RS 계산\ndfme['RSI'] = 100 - (100 / (1 + rs)) # 데이터 프레임에 RSI 열 생성\n\n# 20기간 볼린저 밴드 추가\ndfme['BB_UPPER'] = dfme['SMA20'] + 2*dfme['Adj Close'].rolling(window=20).std() # 상단 밴드\ndfme['BB_LOWER'] = dfme['SMA20'] - 2*dfme['Adj Close'].rolling(window=20).std() # 하단 밴드\n\n# 14기간 ATR 추가\ndfme['TR'] = pd.DataFrame(np.maximum(np.maximum(dfme['High'] - dfme['Low'], abs(dfme['High'] - dfme['Adj Close'].shift())), abs(dfme['Low'] - dfme['Adj Close'].shift())), index = dfme.index)\ndfme['ATR'] = dfme['TR'].rolling(window = 14).mean() # 데이터 프레임에 ATR 열 생성\n\n# 지표와 함께 캔들스틱 차트 표시\nfig = make_subplots(rows=4, cols=1, shared_xaxes=True, vertical_spacing=0.05,row_heights=[0.6, 0.10, 0.10, 0.20])\n\n# 캔들스틱\nfig.add_trace(go.Candlestick(x=dfme.index,\n                             open=dfme['Open'],\n                             high=dfme['High'],\n                             low=dfme['Low'],\n                             close=dfme['Adj Close'],\n                             name='META'),\n              row=1, col=1)\n\n# 이동평균\nfig.add_trace(go.Scatter(x=dfme.index,\n                         y=dfme['EMA9'],\n                         mode='lines',\n                         line=dict(color='#90EE90'),\n                         name='EMA9'),\n              row=1, col=1)\n\n# 이하 생략\n...\n\nfig.show()\n```\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_47.png\" /\u003e\n\n## META RSI 대 MA 백테스팅\n\n- 기술적 분석 백테스팅: 지난 729일 동안의 일별 META 데이터에서 RSI 및 MA 전략의 기대 수익 비교\n\n```python\nend_date = dt.datetime.now() # 3월 21일 날짜를 정의\nstart_date = end_date - dt.timedelta(days=729) # 지난 729일 동안의 시간별 데이터 로딩\n\nhourly_eur_usd = yf.download('META', start=start_date, end=end_date, interval='1d')\nhourly_eur_usd \n\n           Open       High       Low        Close      Adj Close   Volume\nDate      \n2022-07-12 164.800003 165.910004 162.100006 163.270004 162.935181 16639700\n2022-07-13 160.160004 164.979996 159.610001 163.490005 163.154739 16555100\n2022-07-14 161.220001 162.589996 157.279999 158.050003 157.725891 23765200\n2022-07-15 160.539993 164.979996 159.820007 164.699997 164.362244 23342800\n2022-07-18 166.750000 171.690002 165.639999 167.229996 166.887054 23574300\n... ... ... ... ... ... ...\n2024-07-02 500.760010 510.500000 499.450012 509.500000 509.500000 7739500\n2024-07-03 506.369995 511.279999 506.019989 509.959991 509.959991 6005600\n2024-07-05 511.600006 540.869995 511.600006 539.909973 539.909973 21354100\n2024-07-08 542.349976 542.809998 526.650024 529.320007 529.320007 14917500\n2024-07-09 533.750000 537.479980 528.190002 530.000000 530.000000 8753200\n501 rows × 6 columns\n```\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- RSI 백테스팅 전략 구현하기\n\n```js\n# TA 라이브러리를 사용하여 RSI 계산하기\nhourly_eur_usd['rsi'] = ta.momentum.RSIIndicator(hourly_eur_usd['Adj Close'], window=14).rsi()\n\n# RSI 전략의 매개변수 정의\nrsi_period = 14\noverbought = 80\noversold = 40\n\n# 신호를 저장할 새 열 생성\nhourly_eur_usd['signal'] = 0 # 포지션을 가지지 않을 때 'signal' = 0\n\n# 진입점 생성\nfor i in range(rsi_period, len(hourly_eur_usd)):\n    if hourly_eur_usd['rsi'][i] \u003e overbought and hourly_eur_usd['rsi'][i - 1] \u003c= overbought:\n        hourly_eur_usd['signal'][i] = -1 # 'signal' = -1 일 때 판매\n    elif hourly_eur_usd['rsi'][i] \u003c oversold and hourly_eur_usd['rsi'][i - 1] \u003e= oversold:\n        hourly_eur_usd['signal'][i] = 1 # 'signal' = 1 일 때 구매\n        \n# 통화쌍의 일일 수익률 계산\nhourly_eur_usd['returns'] = hourly_eur_usd['Adj Close'].pct_change()\nhourly_eur_usd['cumulative_returns'] = (1 + hourly_eur_usd['returns']).cumprod() - 1 # 기간의 총 수익률\n\n# 신호를 수익에 적용\nhourly_eur_usd['strategy_returns'] = hourly_eur_usd['signal'].shift(1) * hourly_eur_usd['returns']\n\n# 전략의 누적 수익 계산\nhourly_eur_usd['cumulative_strategy_returns'] = (1 + hourly_eur_usd['strategy_returns']).cumprod() - 1\n\n# 초기 자본을 $100으로 설정\ninitial_capital = 100\n\n# 전체 포트폴리오 가치 계산\nhourly_eur_usd['portfolio_value'] = (1 + hourly_eur_usd['strategy_returns']).cumprod() * initial_capital\n\n# 거래 수, 초기 자본, 최종 자본 출력\nnum_trades = hourly_eur_usd['signal'].abs().sum()\nfinal_capital = hourly_eur_usd['portfolio_value'].iloc[-1]\ntotal_return = (final_capital - initial_capital) / initial_capital * 100\n\nprint('\\n')\nprint(f\"거래 수: {num_trades}\")\nprint(f\"초기 자본: ${initial_capital}\")\nprint(f\"최종 자본: ${final_capital:.2f}\")\nprint(f\"총 수익률: {total_return:.2f}%\")\nprint('\\n')\n\n# 포트폴리오 총 가치 플로팅\nfig = go.Figure()\n\nfig.add_trace(go.Scatter(x=hourly_eur_usd.index,\n                         y=hourly_eur_usd['portfolio_value'].round(2),\n                         mode='lines',\n                         line=dict(color='#00BFFF'),\n                         name='포트폴리오 가치'))\n\nfig.update_layout(title='예상 수익 RSI 전략 META 데이터',\n                  xaxis_title='날짜',\n                  yaxis_title='가치 ($)',\n                  template='plotly_dark',\n                  height=600)\n\nfig.show()\n\n거래 수: 11\n초기 자본: $100\n최종 자본: $107.97\n총 수익률: 7.97%\r\n```\n\n\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_48.png\" /\u003e\n\n- MA 백테스팅 전략 구현하기\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\n# TA 라이브러리를 사용하여 EMA 생성\nws = 5\nwl = 10\nhourly_eur_usd['ema9'] = ta.trend.ema_indicator(hourly_eur_usd['Adj Close'], window=ws)\n\n# TA 라이브러리를 사용하여 SMA 생성\nhourly_eur_usd['sma20'] = ta.trend.sma_indicator(hourly_eur_usd['Adj Close'], window=wl)\n\n# 이동평균 교차 전략 매개변수 정의\nshort_ma = 'ema9'\nlong_ma = 'sma20'\n\n# 신호를 저장할 새 열 생성\nhourly_eur_usd['signal'] = 0\n\n# 진입 신호 생성\nfor i in range(1, len(hourly_eur_usd)):\n    if hourly_eur_usd[short_ma][i] \u003e hourly_eur_usd[long_ma][i] and hourly_eur_usd[short_ma][i - 1] \u003c= hourly_eur_usd[long_ma][i - 1]:\n        hourly_eur_usd['signal'][i] = 1  # 매수 신호\n    elif hourly_eur_usd[short_ma][i] \u003c hourly_eur_usd[long_ma][i] and hourly_eur_usd[short_ma][i - 1] \u003e= hourly_eur_usd[long_ma][i - 1]:\n        hourly_eur_usd['signal'][i] = -1  # 매도 신호\n\n# 총 수익률 계산\nhourly_eur_usd['returns'] = hourly_eur_usd['Adj Close'].pct_change()\nhourly_eur_usd['cumulative_returns'] = (1 + hourly_eur_usd['returns']).cumprod() - 1\n\n# 수익률에 신호 적용\nhourly_eur_usd['strategy_returns'] = hourly_eur_usd['signal'].shift(1) * hourly_eur_usd['returns']\n\n# 누적 수익률 계산\nhourly_eur_usd['cumulative_strategy_returns'] = (1 + hourly_eur_usd['strategy_returns']).cumprod() - 1\n\n# 초기 자본 설정\ninitial_capital = 100\n\n# 포트폴리오 가치 총액 계산\nhourly_eur_usd['portfolio_value'] = (1 + hourly_eur_usd['strategy_returns']).cumprod() * initial_capital\n\n# 거래 횟수, 초기 자본, 최종 자본 출력\nnum_trades = hourly_eur_usd['signal'].abs().sum()\nfinal_capital = hourly_eur_usd['portfolio_value'].iloc[-1]\ntotal_return = (final_capital - initial_capital) / initial_capital * 100\n\nprint('\\n')\nprint(f\"거래 횟수: {num_trades}\")\nprint(f\"초기 자본: ${initial_capital}\")\nprint(f\"최종 자본: ${final_capital:.2f}\")\nprint(f\"총 수익률: {total_return:.2f}%\")\nprint('\\n')\n\n# 전략 가치 그래픽화\nfig = go.Figure()\n\nfig.add_trace(go.Scatter(x=hourly_eur_usd.index,\n                         y=hourly_eur_usd['portfolio_value'].round(2),\n                         mode='lines',\n                         line=dict(color='#00BFFF'),\n                         name='포트폴리오 가치'))\n\nfig.update_layout(title='META 데이터에 기대되는 결과 이동평균 교차 전략',\n                  xaxis_title='날짜',\n                  yaxis_title='가치 ($)',\n                  template='plotly_dark',\n                  height=600)\n\nfig.show()\n\n거래 횟수: 50\n초기 자본: $100\n최종 자본: $108.00\n총 수익률: 8.00%\n```\n\n\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_49.png\" /\u003e\n\n- RSI 및 MA 전략은 모두 2022년부터 2024년까지 META 데이터에서 약 8%의 예상 수익을 산출함을 확인할 수 있습니다. 그러나 거래 횟수 측면에서 RSI 전략이 더 우수함을 알 수 있습니다. 즉, 11 (RSI) vs 50 (MA).\n\n# 결론\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- 저희 사회의 디지털화가 급속히 증가함에 따라 미국 대형 기술 기업(Big Tech)들이 디지털 인프라와 플랫폼 소유를 통해 엄청난 부를 축적하고 영향력을 행사하게 되었습니다.\n- 본 게시물에서는 기술적, 기본적 분석 도구와 최신 포트폴리오 최적화(PO) 알고리즘을 Python을 활용해 통합한 미국 Big Tech들의 양적 거래 분석을 제시했습니다.\n- 우리는 기술적 분석 지표, 주식 기초 및 리스크 및 수익을 동시에 고려한 PO를 통합했습니다.\n- 우리는 이번 연구 동안 Quantstats, TA, PyPortfolioOpt, Plotly, FinanceToolkit 라이브러리를 사용했습니다.\n- 누적 수익, 첨도, 비대칭도, 상관 관계, 표준편차, 베타, 샤프 비율 등의 금융 지표를 분석했습니다.\n- 2020년부터 2024년까지의 금융 성과인 등가 가중 포트폴리오와 최대 샤프 비율 포트폴리오와 S\u0026P 전략을 비교했습니다(Sortino, Sharpe, Calmar, Treynor 비율, 켈리 기준, MTD, 최대 하락 폭, 베타, 알파, 연평균 복리 증가율 등).\n- 2019년부터 2024년까지 NVDA 대 AMD 손익 계산서와 수익성 비율을 분석했습니다. 그리스 감능성, Value-at-Risk(VaR) 대 대조군, Fama-French 5 요인과의 상관 관계를 시각화했습니다.\n- 주식 가격 예측에 대한 1년치 Big Tech 주가 예측을 시간별로 이루어진 자산 가격의 이항 분포를 따르는 움직임 상승 또는 하락 두 가지 결과를 지닌 이진 트리를 따라 반복하여 모델을 사용했습니다.\n- 기술 시장의 감성 및 가격 모멘텀을 파악하기 위해 TA Ichimoku 클라우드를 활용했습니다.\n- 마지막 729일의 META TA 전략을 탐색하면서 RSI 대 MA 크로스오버 거래 신호(백테스팅)의 예상 수익을 비교했습니다.\n- TA 지표와 함께 2020년부터 2024년까지의 META 캔들스틱 차트는 주식 데이터 시각화에서 Plotly의 강력함을 보여 주었습니다.\n\n# 참고 문헌\n\n- Markowitz, H., 1952, PORTFOLIO SELECTION. The Journal of Finance.\n- Markowitz meets technical analysis: Building optimal portfolios by exploiting information in trend-following signals\n- Mastering Market Movements: Integrating Technical and Fundamental Analysis in Trading\n- Fundamental vs. Technical Analysis: An Overview\n- The Advantages and Disadvantages of Technical Analysis\n- The pros and cons of fundamental analysis\n- Fundamental Analysis: Advantages And Disadvantages\n- Portfolio Optimization: How to Find Your Investment Balance\n- Financial Analysis with the Finance Toolkit in Python\n\n# 더 알아보기\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- 주식 포트폴리오 위험/수익률 최적화\n- 비트코인, 금, 원유 가격의 종합 분석\n- Max(수익률/위험) 거래를 향하여\n- 75가지 간단한 FinTA 지표를 사용한 NVDA 기술 분석\n\n## 연락처\n\n- 웹사이트\n- GitHub\n- X/Twitter\n- Pinterest\n- Mastodon\n- Tumblr\n\n## 면책사항\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- 다음의 면책 조항은이 기사에 제공 된 정보가 교육 용도로만 사용되며 재정 건전성 또는 투자 자문으로 간주되어서는 안 된다는 것을 명확히합니다.\n- 제공된 정보는 귀하의 개별 재정 상황, 목표 또는 리스크 허용도를 고려하지 않습니다.\n- 귀하가 하는 어떠한 투자 결정이나 조치도 귀하의 전적인 책임입니다.\n- 귀하의 재정 목표, 리스크 허용도 및 투자 시간표에 근거하여 어떤 투자의 적합성을 독립적으로 평가해야합니다.\n- 귀하는 귀하의 특정 요구에 맞게 맞춤 지도를 제공할 수있는 인증 된 재무 전문가의 조언을 구하는 것이 좋습니다.\n- 제공되는 도구, 데이터, 콘텐츠 및 정보는 개인의 투자 요구를 충족시키기 위해 맞춤화되지 않았습니다. 따라서 도구, 데이터, 콘텐츠 및 정보는 정보 및 교육 목적으로만 제공됩니다.","ogImage":{"url":"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_0.png"},"coverImage":"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_0.png","tag":["Tech"],"readingTime":76},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_0.png\"\u003e\n\u003cul\u003e\n\u003cli\u003e이 게시물에서는 기술적, 근본적 분석 도구 및 현대 포트폴리오 최적화(PO) 알고리즘을 통합하여 파이썬에서 미국 대형 기술 기업들의 양적 거래 분석에 초점을 맞추고 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e미국의 대형 기술 기업이란?\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e빅 포 (알파벳, 아마존, 애플, 메타)\u003c/li\u003e\n\u003cli\u003e빅 파이브 (알파벳, 아마존, 애플, 메타, 마이크로소프트)\u003c/li\u003e\n\u003cli\u003e멋진 일곱 (알파벳, 아마존, 애플, 메타, 마이크로소프트, 엔비디아, 테슬라)\u003c/li\u003e\n\u003cli\u003e기타: 보고서에 따르면 AMD는 2023년 이후 브랜드 성장을 상당히 경험했으며, 전년대비 53% 증가했습니다. 또한 AMD의 브랜드 가치가 비즈니스 기술 및 서비스 플랫폼 부문에서 5186만 달러에 달했습니다. 그 강한 성장이 어디서 비롯된 것인지 쉽게 추측할 수 있습니다. AMD는 최근 몇 년 동안 경쟁사 인텔과 엔비디아가 해 온 것처럼 AI에 주력하고 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch2\u003e비즈니스 케이스\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e최근 몇 년간 미국 주식 시장은 빅테크가 주도한 놀라운 성장 기회를 제공해 왔습니다. 하지만, 상승장이 계속될 수 있을까요?\u003c/li\u003e\n\u003cli\u003e빅테크 기업들은 역사상 가장 큰 반독점 입법 파동에 직면하고 있습니다.\u003c/li\u003e\n\u003cli\u003e세계적인 세금 전쟁이 임박했습니다. 이는 빅테크에 큰 타격을 줄 수 있습니다.\u003c/li\u003e\n\u003cli\u003e결론: 이러한 인상적인 성과에도 불구하고, 현재의 고 인플레이션과 이자율 경제환경에서 특히 높은 가치평가를 받는 기술 주식에 베팅하는 것에 대해 투자자들은 조심해야 합니다. Nvidia 칩과 Meta의 대형 언어 모델과 같은 AI 응용 프로그램은 약속을 보이지만, 이들의 시장가치는 실제 소비자 혜택과 실현된 생산성 향상에 궁극적으로 의존할 것입니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e프로젝트 목표\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e우리의 궁극적인 목표는 기술적 분석 (TA) 지표, 주식 기초 내용 및 위험과 수익을 동시에 고려하는 포트폴리오 최적화를 통합하는 것입니다.\u003c/li\u003e\n\u003cli\u003eMarkowitz (1952) [1]는 투자 포트폴리오의 다양성을 옹호하며, 이 과정이 투자의 분산을 줄인다는 것을 입증했습니다.\u003c/li\u003e\n\u003cli\u003e이 다양성 개념들은 Modern Portfolio Theory (MPT)을 불러일으켰는데, 이는 위험과 수익이라는 두 가지 상충하는 목표 사이에서 선택하는 아이디어를 가져왔습니다.\u003c/li\u003e\n\u003cli\u003eTA 지표는 자산 가격과 거래량의 추세를 식별하기 위해 시장 참가자들에 의해 널리 사용됩니다. 최근 연구에 따르면 [2], 우리는 MPT와 TA 간의 격차를 줄이기 위해 TA 신호의 최적 가중치를 직접 다중 TA 신호의 함수로 매개변수화된 PO 전략을 개발했습니다.\u003c/li\u003e\n\u003cli\u003e일부 거래자들은 FA 대신 TA를 선호하지만, 가장 성공적인 전략은 종종 두 가지를 조화롭게 적용한 것에서 나옵니다. 이는 거래자들이 즉각적인 가격 변동과 장기적인 경제 예측에서 모두 이익을 취할 수 있도록 하며 [3], 이 통합된 PO 접근 방식은 시장 역학을 이해하는 것을 강화할 뿐만 아니라 거래자들이 견고한 투자 결정을 내리기 위한 포괄적인 도구 상자를 제공합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch2\u003e기술 분석 (TA)\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eTA는 시장을 분석하는 프레임워크를 트레이더에 제공하여 트렌드, 지지/저항 수준 및 진입/퇴출 지점을 식별하는 데 도움을 줍니다 [5].\u003c/li\u003e\n\u003cli\u003eTA의 두 가지 주요 가정은 다음과 같습니다 [5]: (1) 보안 가격은 기본적인 요소를 포함한 모든 중요한 정보를 반영한다; (2) 가격 변동은 상승, 하락 또는 측면 추세를 따른다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e근본 분석 (FA)\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eTA는 단기적인 패턴만 식별하는 반면, FA는 주식 가격이 실제 가치를 저평가(또는 고평가)하는 자산을 강조할 것입니다 [5, 7].\u003c/li\u003e\n\u003cli\u003e간단히 말해, 스마트한 투자 결정을 내리는 것이 FA의 주요 이점입니다. 이는 회사가 얼마나 벌고 지출하는지, 얼마나 많은 제품을 판매하는지 및 외부 요소에 어떻게 영향을 받는지를 이해하는 것을 포함합니다 [7].\u003c/li\u003e\n\u003c/ul\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch2\u003eTA vs FA\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eFA(기업 재무 분석)는 자산의 품질에 초점을 맞추고, TA(기술적 분석)는 시장 동향을 가치의 지표로 삼습니다. 두 방법 모두 주식 가격의 미래 동향을 예측하는 데 사용됩니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e포트폴리오 최적화\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003ePO(포트폴리오 최적화)는 투자자가 자산을 선택하여 재무 위험을 최소화하고 ROI를 극대화하는 프로세스입니다.\u003c/li\u003e\n\u003cli\u003e투자 수익률(ROI)은 모든 산업에서 익숙한 지표입니다.\u003c/li\u003e\n\u003cli\u003e재정적으로 위험은 투자 수익이 기대와 다를 가능성을 의미합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch2\u003e도구들:\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eQuantstats는 포트폴리오 분석을 위한 광범위한 기능을 제공합니다. 양적 분석가, 트레이더 및 포트폴리오 매니저를 대상으로 하며, 투자 전략에 대한 보다 깊은 통찰력을 얻고자 하는 사용자를 위해 설계되었습니다.\u003c/li\u003e\n\u003cli\u003eTA는 금융 시계열 데이터 세트에 대한 TA 라이브러리입니다. 금융 시계열 데이터 세트(오픈, 클로즈, 하이, 로우, 볼륨)에서 피쳐 엔지니어링을 수행하는 데 유용합니다. Pandas와 Numpy에 기반을 두고 있습니다.\u003c/li\u003e\n\u003cli\u003ePyPortfolioOpt는 전통적인 MPT 및 Black-Litterman 할당뿐만 아니라 Shrinkage, Hierarchical Risk Parity와 같은 분야의 최근 개발사항들을 구현하는 라이브러리입니다. 또한, 지수 가중 공분산 행렬과 같은 혁신적인 실험적 기능도 포함하고 있습니다.\u003c/li\u003e\n\u003cli\u003eFinanceToolkit은 가장 단순한 방식으로 150가지 이상의 재무 비율, 지표 및 성과 측정 항목이 포함된 오픈 소스 툴킷입니다. 이 툴킷은 주식에만 국한되지 않고, 옵션, 화폐, 암호화폐, ETF, 상장펀드, 지수, 머니 마켓, 상품, 주요 경제 지표 등에 대한 역사적 데이터 및 샤프 비율, VaR과 같은 중요한 성과 및 위험 측정 수단을 얻기 위해 사용할 수 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e자료\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e금융 시장을 위한 데이터 과학\u003c/li\u003e\n\u003cli\u003eFinanceToolkit 예제\u003c/li\u003e\n\u003cli\u003e주식 시장 트렌드 및 Value at Risk\u003c/li\u003e\n\u003c/ul\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch2\u003e프로젝트 마일스톤\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e빅 포 매칭 2020-2024 (BF)의 기초적인 리스크-수익 분석\u003c/li\u003e\n\u003cli\u003e등가치 가중 BF 포트폴리오의 성과 분석\u003c/li\u003e\n\u003cli\u003eSharpe Ratio 최대화를 위한 BF 최적화 (효율적 투자선) vs S\u0026#x26;P 500\u003c/li\u003e\n\u003cli\u003e(NVDA, AMD) vs 벤치마크 누적 수익률 및 VaR\u003c/li\u003e\n\u003cli\u003e(NVDA, AMD) 수익성 분석 및 그리스 감도\u003c/li\u003e\n\u003cli\u003eNVDA 및 AMD의 Fama-French 요인과의 상관 관계\u003c/li\u003e\n\u003cli\u003e(AAPL, AMZN, META, MSFT, GOOG) 재무 분석 및 주가 시뮬레이션\u003c/li\u003e\n\u003cli\u003eTA 이치모쿠 클라우드 차트: NVDA vs AMD\u003c/li\u003e\n\u003cli\u003eMETA 주식 TA, RSI vs EMA 전략 백테스팅\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e위의 프로젝트 마일스톤에 대해 깊이 있게 탐구하는 포괄적인 안내서입니다. 해당 프로젝트는 가상 안콘다 환경을 생성한 후 주피터 노트북에서 구현되었습니다.\u003c/p\u003e\n\u003ch2\u003e기본 임포트 및 설치\u003c/h2\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003e필요한 Python 라이브러리 설치 및 불러오기\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e!pip install quantstats, ta, pypfopt, plotly, yfinance, sklearn, seaborn, scipy\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# 라이브러리 불러오기\n\n# 데이터 처리 및 통계 분석 \n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e pandas \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e pd\n#\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e pandas_datareader \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e data\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e numpy \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e np\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e scipy \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e stats\n\n# 데이터 시각화 \n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e matplotlib.\u003cspan class=\"hljs-property\"\u003epyplot\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e plt\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e seaborn \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e sns\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e plotly.\u003cspan class=\"hljs-property\"\u003eexpress\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e px\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e plotly.\u003cspan class=\"hljs-property\"\u003egraph_objects\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e go\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e plotly.\u003cspan class=\"hljs-property\"\u003esubplots\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e make_subplots\n\n# 최적화 및 자산 할당\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e pypfopt.\u003cspan class=\"hljs-property\"\u003eefficient_frontier\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eEfficientFrontier\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e pypfopt \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e risk_models\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e pypfopt \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e expected_returns\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e pypfopt \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e black_litterman, \u003cspan class=\"hljs-title class_\"\u003eBlackLittermanModel\u003c/span\u003e\n\n# 금융 데이터 \n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e quantstats \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e qs\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e ta\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e yfinance \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e yf\n\n# 선형 회귀 모델\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e sklearn.\u003cspan class=\"hljs-property\"\u003elinear_model\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eLinearRegression\u003c/span\u003e\n\n# \u003cspan class=\"hljs-title class_\"\u003ePlotly\u003c/span\u003e 오프라인 모드 활성화\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e plotly.\u003cspan class=\"hljs-property\"\u003eoffline\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e init_notebook_mode\n\u003cspan class=\"hljs-title function_\"\u003einit_notebook_mode\u003c/span\u003e(connected=\u003cspan class=\"hljs-title class_\"\u003eTrue\u003c/span\u003e)\n\n\n# 포트폴리오 최적화를 위한 라이브러리 불러오기\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e pypfopt.\u003cspan class=\"hljs-property\"\u003eefficient_frontier\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eEfficientFrontier\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e pypfopt \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e risk_models\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e pypfopt \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e expected_returns\n\n# 날짜 및 경고 숨기기 \n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e datetime \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e dt\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e warnings\nwarnings.\u003cspan class=\"hljs-title function_\"\u003efilterwarnings\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"ignore\"\u003c/span\u003e)\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e2020–2024 빅 포 팝 4 (BF) 기본 수익-변동성 분석\u003c/h1\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003e입력된 BF 주식 데이터 2020-2024년을 읽는 중\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e#\u003cspan class=\"hljs-title class_\"\u003eBig\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eFour\u003c/span\u003e\ntickers = [\u003cspan class=\"hljs-string\"\u003e\"AAPL\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"GOOG\"\u003c/span\u003e,\u003cspan class=\"hljs-string\"\u003e\"AMZN\"\u003c/span\u003e,\u003cspan class=\"hljs-string\"\u003e\"META\"\u003c/span\u003e] \naapl = qs.\u003cspan class=\"hljs-property\"\u003eutils\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003edownload_returns\u003c/span\u003e(tickers)\naapl = aapl.\u003cspan class=\"hljs-property\"\u003eloc\u003c/span\u003e[\u003cspan class=\"hljs-string\"\u003e'2020-01-01'\u003c/span\u003e:\u003cspan class=\"hljs-string\"\u003e'2024-07-10'\u003c/span\u003e]\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003eBF 주식의 일일 수익률 그래픽 표시\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# 각 주식의 일일 수익률 그래픽 표시\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'\\n'\u003c/span\u003e)\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'\\n주식 일일 수익률 그래픽:\\n'\u003c/span\u003e)\nqs.\u003cspan class=\"hljs-property\"\u003eplots\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003edaily_returns\u003c/span\u003e(aapl,benchmark=\u003cspan class=\"hljs-string\"\u003e'SPY'\u003c/span\u003e)\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_1.png\" alt=\"image\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e주식의 성과를 평가하는 가장 좋은 방법 중 하나는 일일 수익률을 계산하는 것입니다.\u003c/li\u003e\n\u003cli\u003e위에 있는 플롯은 기본적으로 주식 가치가 하루 동안 얼마나 변화했는지 보여줍니다. 이 기본 정보를 사용하여 회사에 더 많이 투자하거나 다른 곳에 투자를 시도할지 결정할 수 있습니다.\u003c/li\u003e\n\u003cli\u003eBF 주식 누적 수익 그래플 작성\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# 각 주식에 대한 누적 수익 그래프 작성\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'\\n'\u003c/span\u003e)\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'\\nStock Cumulative Returns Plot\\n'\u003c/span\u003e)\nqs.\u003cspan class=\"hljs-property\"\u003eplots\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ereturns\u003c/span\u003e(aapl)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_2.png\" alt=\"image\"\u003e\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003e누적 수익 대비는 일정 기간 동안 투자 가격의 총 변화를 의미합니다.\u003c/li\u003e\n\u003cli\u003e이것은 물가 상승 및 기타 외부 요인의 영향을 고려하지 않는 총 명목 수익입니다.\u003c/li\u003e\n\u003cli\u003e양의 수익은 이익을 나타내고, 음의 수익은 손실을 나타냅니다.\u003c/li\u003e\n\u003cli\u003e세금은 대부분의 투자에 대한 누적 수익을 상당히 줄일 수 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eBF의 첨도\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eBF 일일 수익의 첨도를 계산하고 그래프로 나타내기\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# 첨도를 측정하기 위해 quantstats 사용\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'\\n'\u003c/span\u003e)\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"BF의 첨도: \"\u003c/span\u003e, qs.\u003cspan class=\"hljs-property\"\u003estats\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ekurtosis\u003c/span\u003e(aapl).\u003cspan class=\"hljs-title function_\"\u003eround\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e))\n\n\u003cspan class=\"hljs-variable constant_\"\u003eAAPL\u003c/span\u003e     \u003cspan class=\"hljs-number\"\u003e5.03\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eAMZN\u003c/span\u003e     \u003cspan class=\"hljs-number\"\u003e4.00\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eGOOG\u003c/span\u003e     \u003cspan class=\"hljs-number\"\u003e3.63\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eMETA\u003c/span\u003e    \u003cspan class=\"hljs-number\"\u003e17.71\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003edtype\u003c/span\u003e: float64\n\nqs.\u003cspan class=\"hljs-property\"\u003estats\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ekurtosis\u003c/span\u003e(aapl).\u003cspan class=\"hljs-title function_\"\u003eround\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e).\u003cspan class=\"hljs-property\"\u003eplot\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ebar\u003c/span\u003e(label=\u003cspan class=\"hljs-string\"\u003e'첨도'\u003c/span\u003e)\nplt.\u003cspan class=\"hljs-title function_\"\u003elegend\u003c/span\u003e()\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_3.png\" alt=\"image\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e첨도(Kurtosis)는 분포의 꼬리 모양을 측정합니다.\u003c/li\u003e\n\u003cli\u003e금융 분석에서 첨도는 투자의 가격 변동성 리스크를 측정하는 데 사용됩니다. 첨도는 투자의 가격이 정기적으로 경험하는 변동성을 측정합니다. 수익 분포의 높은 첨도는 투자가 가끔 극단적인 수익을 내줄 것을 시사합니다. 높은 첨도는 큰 양의 양수 수익 또는 극단적인 음수 수익을 나타낼 수 있다는 것을 염두에 두세요.\u003c/li\u003e\n\u003cli\u003e우리는 BF의 일일 수익을 첨두관련 분포(첨도 ` 3.0)로 간주할 수 있습니다. 이 분포는 긴 꼬리(이상치)를 가진 곡선으로 나타납니다.\u003c/li\u003e\n\u003cli\u003e추론: kur(META) `` kur(AAPL) ` kur(AMZN) ~ kur(GOOG)\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eBF의 왜도(Skewness)\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eBF의 일일 수익의 왜도(Skewness)를 계산하고 그래프에 표시하기\u003c/li\u003e\n\u003c/ul\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# \u003cspan class=\"hljs-title class_\"\u003eQuantstats\u003c/span\u003e를 사용하여 왜도 측정\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'\\n'\u003c/span\u003e)\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"주식 왜도: \"\u003c/span\u003e, qs.\u003cspan class=\"hljs-property\"\u003estats\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eskew\u003c/span\u003e(aapl).\u003cspan class=\"hljs-title function_\"\u003eround\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e))\n\n주식 왜도:  \u003cspan class=\"hljs-title class_\"\u003eTicker\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eAAPL\u003c/span\u003e    \u003cspan class=\"hljs-number\"\u003e0.12\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eAMZN\u003c/span\u003e    \u003cspan class=\"hljs-number\"\u003e0.12\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eGOOG\u003c/span\u003e   -\u003cspan class=\"hljs-number\"\u003e0.06\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eMETA\u003c/span\u003e   -\u003cspan class=\"hljs-number\"\u003e0.29\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003edtype\u003c/span\u003e: float64\n\nqs.\u003cspan class=\"hljs-property\"\u003estats\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eskew\u003c/span\u003e(aapl).\u003cspan class=\"hljs-title function_\"\u003eround\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e).\u003cspan class=\"hljs-property\"\u003eplot\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ebar\u003c/span\u003e(label=\u003cspan class=\"hljs-string\"\u003e'Skewness'\u003c/span\u003e)\nplt.\u003cspan class=\"hljs-title function_\"\u003elegend\u003c/span\u003e()\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_4.png\" alt=\"분산 도표\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e왜도는 데이터가 대칭적 벨 곡선에서 벗어나는 방향과 정도를 나타냅니다.\u003c/li\u003e\n\u003cli\u003e왜도가 0인 분포는 완전히 대칭적이며 분포의 왼쪽과 오른쪽이 거울 이미지인 것을 의미합니다. 양수 왜도는 오른쪽 꼬리가 왼쪽보다 길거나 더 두껍다는 것을 의미하며, 데이터가 높은 값을 가질 가능성이 높음을 시사합니다. 음수 왜도는 왼쪽 꼬리가 오른쪽보다 길거나 더 두꺼워 낮은 값을 가질 가능성을 시사합니다.\u003c/li\u003e\n\u003cli\u003e일반적으로 -0.5 ~ 0.5 사이의 값은 약간의 왜도 수준을 나타냅니다.\u003c/li\u003e\n\u003cli\u003e추론: skew(META)=-0.29\u003c/li\u003e\n\u003cli\u003e실현 왜도와 미래 가격 간에 부정적인 교차 섹션이 관찰됩니다. — 음수 왜도를 가진 주식은 높은 변동성에 대해 미래 수익이 높게 보상됩니다.\u003c/li\u003e\n\u003cli\u003eGOOG의 부정적인 왜도는 투자자가 빈번한 소규모 이익과 소수의 큰 손실을 기대할 수 있다는 것을 의미합니다. 실제로, 많은 거래 전략이 부정적으로 왜도된 분포에 기초합니다.\u003c/li\u003e\n\u003cli\u003eAAPL 및 AMZN의 0에서 적정한 양수의 왜도와 결합되면, 이러한 분포는 안정적인 수익과 낮은 리스크를 시사할 것입니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eBF의 표준 편차\u003c/h2\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003eBF 일별 수익률의 표준 편차(STD)를 계산하고 그래프로 플로팅합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# 표준 편차 계산하기\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'\\n'\u003c/span\u003e)\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"주식 표준 편차: \"\u003c/span\u003e, aapl.\u003cspan class=\"hljs-title function_\"\u003estd\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003eround\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e))\n\n주식 표준 편차:  \u003cspan class=\"hljs-title class_\"\u003eTicker\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eAAPL\u003c/span\u003e    \u003cspan class=\"hljs-number\"\u003e0.021\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eAMZN\u003c/span\u003e    \u003cspan class=\"hljs-number\"\u003e0.023\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eGOOG\u003c/span\u003e    \u003cspan class=\"hljs-number\"\u003e0.021\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eMETA\u003c/span\u003e    \u003cspan class=\"hljs-number\"\u003e0.029\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003edtype\u003c/span\u003e: float64\n\naapl.\u003cspan class=\"hljs-title function_\"\u003estd\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003eround\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e).\u003cspan class=\"hljs-property\"\u003eplot\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ebar\u003c/span\u003e(label=\u003cspan class=\"hljs-string\"\u003e'STD'\u003c/span\u003e)\nplt.\u003cspan class=\"hljs-title function_\"\u003elegend\u003c/span\u003e()\n\u003c/code\u003e\u003c/pre\u003e\n\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_5.png\"\u003e\n\u003cul\u003e\n\u003cli\u003e표준 편차는 투자를 비교하는 기본적인 방법으로, 데이터의 변동이나 분산을 측정합니다. 더 높은 표준 편차는 더 높은 위험을 의미합니다.\u003c/li\u003e\n\u003cli\u003e데이터 포인트가 평균에서 더 멀리 떨어져 있는 경우 데이터 세트 내에서 더 높은 편차가 있습니다. 표준 편차는 분산의 제곱근으로 계산됩니다.\u003c/li\u003e\n\u003cli\u003e변동성이 큰 주식은 표준 편차가 높고, 안정적인 블루 칩 주가 주식의 편차는 보통 낮습니다.\u003c/li\u003e\n\u003cli\u003e결론: std(AAPL, AMZN, GOOG) 약 0.02, std(META) 약 0.03입니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch2\u003eBF 상관 분석\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e페어 플롯(pairplot)과 상관 행렬은 자산 간의 상관 관계를 시각화하는 데 유용한 도구입니다.\u003c/li\u003e\n\u003cli\u003eBF 일일 수익의 페어 플롯을 생성합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# 페어 플롯\nsns.\u003cspan class=\"hljs-title function_\"\u003epairplot\u003c/span\u003e(aapl, kind=\u003cspan class=\"hljs-string\"\u003e'reg'\u003c/span\u003e)\nplt.\u003cspan class=\"hljs-title function_\"\u003eshow\u003c/span\u003e()\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_6.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003e위의 플롯은 구글과 메타 주식 간의 흥미로운 선형 관계를 보여줍니다.\u003c/li\u003e\n\u003cli\u003eBF 일일 수익의 상관 행렬을 플로팅한 결과입니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# 상관 행렬\ncorr = aapl.\u003cspan class=\"hljs-title function_\"\u003ecorr\u003c/span\u003e()\nmask = np.\u003cspan class=\"hljs-title function_\"\u003ezeros_like\u003c/span\u003e(corr, dtype=bool)\nmask[np.\u003cspan class=\"hljs-title function_\"\u003etriu_indices_from\u003c/span\u003e(mask)] = \u003cspan class=\"hljs-title class_\"\u003eTrue\u003c/span\u003e\nsns.\u003cspan class=\"hljs-title function_\"\u003eheatmap\u003c/span\u003e(corr, annot=\u003cspan class=\"hljs-title class_\"\u003eTrue\u003c/span\u003e, mask=mask)\nplt.\u003cspan class=\"hljs-title function_\"\u003eshow\u003c/span\u003e()\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_7.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eGOOG와 AAPL, AMZN, META의 3개 주식 간에는 0.64~0.66 정도의 강한 양의 상관 관계가 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch2\u003eBF의 베타 계수\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e주식의 베타 계수는 시장 기준으로 시간이 지남에 따른 변동성을 측정하는 지표입니다. 1의 베타는 주식의 변동성이 시장과 정확히 일치한다는 것을 의미합니다. 더 높은 베타는 큰 변동성을 나타내고, 낮은 베타는 덜한 변동성을 나타냅니다.\u003c/li\u003e\n\u003cli\u003eBF의 벤치마크 SPY에 대한 베타 계수를 계산하기 위해 선형 회귀 분석을 사용합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ebench = [\u003cspan class=\"hljs-string\"\u003e\"SPY\"\u003c/span\u003e] \nspy = qs.\u003cspan class=\"hljs-property\"\u003eutils\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003edownload_returns\u003c/span\u003e(bench)\nspy = spy.\u003cspan class=\"hljs-property\"\u003eloc\u003c/span\u003e[\u003cspan class=\"hljs-string\"\u003e'2020-01-01'\u003c/span\u003e:\u003cspan class=\"hljs-string\"\u003e'2024-07-10'\u003c/span\u003e]\n\n# 인덱스 제거\nspy_no_index = spy.\u003cspan class=\"hljs-title function_\"\u003ereset_index\u003c/span\u003e(drop = \u003cspan class=\"hljs-title class_\"\u003eTrue\u003c/span\u003e)\naapl_no_index = aapl.\u003cspan class=\"hljs-title function_\"\u003ereset_index\u003c/span\u003e(drop = \u003cspan class=\"hljs-title class_\"\u003eTrue\u003c/span\u003e)\n\n# 애플의 수익률과 벤치마크 사이의 선형 관계 설정\n\n자산=\u003cspan class=\"hljs-string\"\u003e'AAPL'\u003c/span\u003e\nX = spy_no_index.\u003cspan class=\"hljs-property\"\u003evalues\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ereshape\u003c/span\u003e(-\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)\ny = aapl_no_index[asset].\u003cspan class=\"hljs-property\"\u003evalues\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ereshape\u003c/span\u003e(-\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)\n\nlinreg = \u003cspan class=\"hljs-title class_\"\u003eLinearRegression\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003efit\u003c/span\u003e(X, y)\n\n베타 = linreg.\u003cspan class=\"hljs-property\"\u003ecoef_\u003c/span\u003e[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e]\n알파 = linreg.\u003cspan class=\"hljs-property\"\u003eintercept_\u003c/span\u003e\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'\\n'\u003c/span\u003e)\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'AAPL 베타: '\u003c/span\u003e, beta.\u003cspan class=\"hljs-title function_\"\u003eround\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e))\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'\\nAAPL 알파: '\u003c/span\u003e, alpha.\u003cspan class=\"hljs-title function_\"\u003eround\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e))\n\n\n자산_베타 = []\n자산_베타.\u003cspan class=\"hljs-title function_\"\u003eappend\u003c/span\u003e(베타.\u003cspan class=\"hljs-title function_\"\u003eround\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e)[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e])\n\n\u003cspan class=\"hljs-variable constant_\"\u003eAAPL\u003c/span\u003e 베타:  [\u003cspan class=\"hljs-number\"\u003e1.203\u003c/span\u003e]\n\n\u003cspan class=\"hljs-variable constant_\"\u003eAAPL\u003c/span\u003e 알파:  [\u003cspan class=\"hljs-number\"\u003e0.001\u003c/span\u003e]\n\n자산=\u003cspan class=\"hljs-string\"\u003e'AMZN'\u003c/span\u003e\nX = spy_no_index.\u003cspan class=\"hljs-property\"\u003evalues\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ereshape\u003c/span\u003e(-\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)\ny = aapl_no_index[asset].\u003cspan class=\"hljs-property\"\u003evalues\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ereshape\u003c/span\u003e(-\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)\n\nlinreg = \u003cspan class=\"hljs-title class_\"\u003eLinearRegression\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003efit\u003c/span\u003e(X, y)\n\n베타 = linreg.\u003cspan class=\"hljs-property\"\u003ecoef_\u003c/span\u003e[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e]\n알파 = linreg.\u003cspan class=\"hljs-property\"\u003eintercept_\u003c/span\u003e\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'\\n'\u003c/span\u003e)\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'AMZN 베타: '\u003c/span\u003e, beta.\u003cspan class=\"hljs-title function_\"\u003eround\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e))\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'\\nAMZN 알파: '\u003c/span\u003e, alpha.\u003cspan class=\"hljs-title function_\"\u003eround\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e))\n\n자산_베타.\u003cspan class=\"hljs-title function_\"\u003eappend\u003c/span\u003e(베타.\u003cspan class=\"hljs-title function_\"\u003eround\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e)[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e])\n\n\u003cspan class=\"hljs-variable constant_\"\u003eAMZN\u003c/span\u003e 베타:  [\u003cspan class=\"hljs-number\"\u003e1.075\u003c/span\u003e]\n\n\u003cspan class=\"hljs-variable constant_\"\u003eAMZN\u003c/span\u003e 알파:  [\u003cspan class=\"hljs-number\"\u003e0.\u003c/span\u003e]\n\n자산=\u003cspan class=\"hljs-string\"\u003e'META'\u003c/span\u003e\nX = spy_no_index.\u003cspan class=\"hljs-property\"\u003evalues\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ereshape\u003c/span\u003e(-\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)\ny = aapl_no_index[asset].\u003cspan class=\"hljs-property\"\u003evalues\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ereshape\u003c/span\u003e(-\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)\n\nlinreg = \u003cspan class=\"hljs-title class_\"\u003eLinearRegression\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003efit\u003c/span\u003e(X, y)\n\n베타 = linreg.\u003cspan class=\"hljs-property\"\u003ecoef_\u003c/span\u003e[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e]\n알파 = linreg.\u003cspan class=\"hljs-property\"\u003eintercept_\u003c/span\u003e\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'\\n'\u003c/span\u003e)\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'META 베타: '\u003c/span\u003e, beta.\u003cspan class=\"hljs-title function_\"\u003eround\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e))\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'\\nMETA 알파: '\u003c/span\u003e, alpha.\u003cspan class=\"hljs-title function_\"\u003eround\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e))\n\n자산_베타.\u003cspan class=\"hljs-title function_\"\u003eappend\u003c/span\u003e(베타.\u003cspan class=\"hljs-title function_\"\u003eround\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e)[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e])\n\n\u003cspan class=\"hljs-variable constant_\"\u003eMETA\u003c/span\u003e 베타:  [\u003cspan class=\"hljs-number\"\u003e1.324\u003c/span\u003e]\n\n\u003cspan class=\"hljs-variable constant_\"\u003eMETA\u003c/span\u003e 알파:  [\u003cspan class=\"hljs-number\"\u003e0.001\u003c/span\u003e]\n\n자산=\u003cspan class=\"hljs-string\"\u003e'GOOG'\u003c/span\u003e\nX = spy_no_index.\u003cspan class=\"hljs-property\"\u003evalues\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ereshape\u003c/span\u003e(-\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)\ny = aapl_no_index[asset].\u003cspan class=\"hljs-property\"\u003evalues\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ereshape\u003c/span\u003e(-\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)\n\nlinreg = \u003cspan class=\"hljs-title class_\"\u003eLinearRegression\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003efit\u003c/span\u003e(X, y)\n\n베타 = linreg.\u003cspan class=\"hljs-property\"\u003ecoef_\u003c/span\u003e[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e]\n알파 = linreg.\u003cspan class=\"hljs-property\"\u003eintercept_\u003c/span\u003e\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'\\n'\u003c/span\u003e)\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'GOOG 베타: '\u003c/span\u003e, beta.\u003cspan class=\"hljs-title function_\"\u003eround\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e))\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'\\nGOOG 알파: '\u003c/span\u003e, alpha.\u003cspan class=\"hljs-title function_\"\u003eround\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e))\n\n자산_베타.\u003cspan class=\"hljs-title function_\"\u003eappend\u003c/span\u003e(베타.\u003cspan class=\"hljs-title function_\"\u003eround\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e)[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e])\n\n\u003cspan class=\"hljs-variable constant_\"\u003eGOOG\u003c/span\u003e 베타:  [\u003cspan class=\"hljs-number\"\u003e1.139\u003c/span\u003e]\n\n\u003cspan class=\"hljs-variable constant_\"\u003eGOOG\u003c/span\u003e 알파:  [\u003cspan class=\"hljs-number\"\u003e0.\u003c/span\u003e]\n\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(자산_베타)\n[\u003cspan class=\"hljs-number\"\u003e1.203\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1.075\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1.324\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1.139\u003c/span\u003e]\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003eBF의 베타 계수를 플로팅하기\u003c/li\u003e\n\u003c/ul\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003efig, ax = plt.subplots(figsize=(\u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e))\n\nx = asset_beta\ntickers1=[\u003cspan class=\"hljs-string\"\u003e'AAPL'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'AMZN'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'META'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'GOOG'\u003c/span\u003e]\n\nax.pie(x, labels=tickers1, autopct=\u003cspan class=\"hljs-string\"\u003e'%.1f%%'\u003c/span\u003e,\n       wedgeprops={\u003cspan class=\"hljs-string\"\u003e'linewidth'\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e3.0\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'edgecolor'\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'white'\u003c/span\u003e},\n       textprops={\u003cspan class=\"hljs-string\"\u003e'size'\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'x-large'\u003c/span\u003e})\nax.set_title(\u003cspan class=\"hljs-string\"\u003e'Asset Beta'\u003c/span\u003e, fontsize=\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e)\nplt.tight_layout()\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_8.png\" alt=\"Pie Chart\"\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-comment\"\u003e#import numpy as np\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e#import matplotlib.pyplot as plt\u003c/span\u003e\n \ncourses = tickers\nvalues = x\n \nfig = plt.figure(figsize=(\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e))\n\n\u003cspan class=\"hljs-comment\"\u003e# creating the bar plot\u003c/span\u003e\nplt.bar(courses, values, color=\u003cspan class=\"hljs-string\"\u003e'maroon'\u003c/span\u003e, width=\u003cspan class=\"hljs-number\"\u003e0.4\u003c/span\u003e)\n\nplt.xlabel(\u003cspan class=\"hljs-string\"\u003e\"Assets\"\u003c/span\u003e)\nplt.ylabel(\u003cspan class=\"hljs-string\"\u003e\"Beta Value\"\u003c/span\u003e)\nplt.title(\u003cspan class=\"hljs-string\"\u003e\"Asset Beta Values\"\u003c/span\u003e)\nplt.show()\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_9.png\" alt=\"Bar Chart\"\u003e\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003e정의상 S\u0026#x26;P 500 지수와 같은 시장은 베타가 1.0이며, 개별 주식은 시장과 얼마나 벗어나는지에 따라 순위가 매겨집니다.\u003c/li\u003e\n\u003cli\u003e추론: BF 주식은 베타가 1.0보다 높기 때문에 시간이 지남에 따라 시장보다 더 많이 흔듭니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eBF의 샤프 비율\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e샤프 비율은 투자의 위험 조정 수익률을 측정하는 지표입니다.\u003c/li\u003e\n\u003cli\u003eBF의 샤프 비율을 계산하고 시각화합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# 샤프 비율 계산\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'\\n'\u003c/span\u003e)\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"주식의 샤프 비율: \"\u003c/span\u003e, qs.\u003cspan class=\"hljs-property\"\u003estats\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003esharpe\u003c/span\u003e(aapl).\u003cspan class=\"hljs-title function_\"\u003eround\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e))\n주식의 샤프 비율: \u003cspan class=\"hljs-title class_\"\u003eTicker\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eAAPL\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.93\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eAMZN\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.65\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eGOOG\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.87\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eMETA\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.69\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003edtype\u003c/span\u003e: float64\n\nqs.\u003cspan class=\"hljs-property\"\u003estats\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003esharpe\u003c/span\u003e(aapl).\u003cspan class=\"hljs-title function_\"\u003eround\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e).\u003cspan class=\"hljs-property\"\u003eplot\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ebar\u003c/span\u003e(label=\u003cspan class=\"hljs-string\"\u003e'샤프 비율'\u003c/span\u003e)\nplt.\u003cspan class=\"hljs-title function_\"\u003elegend\u003c/span\u003e()\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_10.png\" alt=\"image\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eSharpe ratio가 높을수록 투자가 다른 Sharpe ratio가 낮은 투자에 비해 주어진 위험 수준에서 더 높은 수익을 제공함을 나타냅니다.\u003c/li\u003e\n\u003cli\u003e결론: AAPL은 다른 3개 주식 (AMZN, GOOG, META)에 비해 주어진 위험 수준에서 더 높은 수익을 제공할 수 있습니다. AAPL의 Sharpe ratio가 거의 1에 가깝다는 것은 투자의 평균 수익이 리스크-프리 이자율과 거의 같다는 것을 의미합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003e등중 BF 포트폴리오의 성과 분석\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e등중 BF 포트폴리오의 성과를 살펴봅시다.\u003c/li\u003e\n\u003cli\u003e각 보안의 가중치 = 포트폴리오 내 보안 수로 1을 나눈 값\u003c/li\u003e\n\u003cli\u003e4개 주식으로 이루어진 BF 포트폴리오에서 각 주식은 25%의 가중치를 가집니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eweights = [\u003cspan class=\"hljs-number\"\u003e0.25\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0.25\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0.25\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0.25\u003c/span\u003e] # 각 주식의 가중치 정의\nap=aapl[\u003cspan class=\"hljs-string\"\u003e'AAPL'\u003c/span\u003e]\nam=aapl[\u003cspan class=\"hljs-string\"\u003e'AMZN'\u003c/span\u003e]\nme=aapl[\u003cspan class=\"hljs-string\"\u003e'META'\u003c/span\u003e]\nms=aapl[\u003cspan class=\"hljs-string\"\u003e'GOOG'\u003c/span\u003e]\nportfolio = ap*weights[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e] + am*weights[\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e] + me*weights[\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e] + ms*weights[\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e] # 각 주식을 해당 가중치로 곱하여 포트폴리오 생성\nportfolio # 포트폴리오의 일일 수익률 표시\n\n\u003cspan class=\"hljs-title class_\"\u003eDate\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e2020\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e01\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e02\u003c/span\u003e    \u003cspan class=\"hljs-number\"\u003e0.023684\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e2020\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e01\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e03\u003c/span\u003e   -\u003cspan class=\"hljs-number\"\u003e0.008015\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e2020\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e01\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e06\u003c/span\u003e    \u003cspan class=\"hljs-number\"\u003e0.016586\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e2020\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e01\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e07\u003c/span\u003e   -\u003cspan class=\"hljs-number\"\u003e0.000268\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e2020\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e01\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e08\u003c/span\u003e    \u003cspan class=\"hljs-number\"\u003e0.006574\u003c/span\u003e\n                ...   \n\u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e07\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e02\u003c/span\u003e    \u003cspan class=\"hljs-number\"\u003e0.012870\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e07\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e03\u003c/span\u003e   -\u003cspan class=\"hljs-number\"\u003e0.000289\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e07\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e05\u003c/span\u003e    \u003cspan class=\"hljs-number\"\u003e0.029234\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e07\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e08\u003c/span\u003e   -\u003cspan class=\"hljs-number\"\u003e0.006084\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e07\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e09\u003c/span\u003e    \u003cspan class=\"hljs-number\"\u003e0.001275\u003c/span\u003e\n\u003cspan class=\"hljs-title class_\"\u003eLength\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1136\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003edtype\u003c/span\u003e: float64\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e포트폴리오의 일일 수익률, 히스토그램, 누적 수익률 플로팅\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eportfolio.\u003cspan class=\"hljs-title function_\"\u003eplot\u003c/span\u003e()\n\u003c/code\u003e\u003c/pre\u003e\n\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_11.png\"\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eportfolio.\u003cspan class=\"hljs-title function_\"\u003ehist\u003c/span\u003e()\n\u003c/code\u003e\u003c/pre\u003e\n\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_12.png\"\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eqs.\u003cspan class=\"hljs-property\"\u003eplots\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ereturns\u003c/span\u003e(portfolio)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_13.png\"\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003eEqual-Weighted BF 포트폴리오 성과 보고서 및 전략 시각화 vs SPY 기준 생성 중입니다!\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eqs.\u003cspan class=\"hljs-property\"\u003ereports\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003efull\u003c/span\u003e(portfolio, benchmark = spy)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e성과 지표\n                           기준          전략\n-------------------------  -----------  ----------\n시작 기간                 \u003cspan class=\"hljs-number\"\u003e2020\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e01\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e02\u003c/span\u003e   \u003cspan class=\"hljs-number\"\u003e2020\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e01\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e02\u003c/span\u003e\n종료 기간                 \u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e07\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e09\u003c/span\u003e   \u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e07\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e09\u003c/span\u003e\n무위험 이자율             \u003cspan class=\"hljs-number\"\u003e0.0\u003c/span\u003e%         \u003cspan class=\"hljs-number\"\u003e0.0\u003c/span\u003e%\n시장 참여 시간            \u003cspan class=\"hljs-number\"\u003e100.0\u003c/span\u003e%       \u003cspan class=\"hljs-number\"\u003e100.0\u003c/span\u003e%\n\n누적 수익률               \u003cspan class=\"hljs-number\"\u003e72.69\u003c/span\u003e%       \u003cspan class=\"hljs-number\"\u003e191.47\u003c/span\u003e%\n\u003cspan class=\"hljs-variable constant_\"\u003eCAGR\u003c/span\u003e﹪                    \u003cspan class=\"hljs-number\"\u003e8.7\u003c/span\u003e%         \u003cspan class=\"hljs-number\"\u003e17.75\u003c/span\u003e%\n\n샤프 지수                 \u003cspan class=\"hljs-number\"\u003e0.67\u003c/span\u003e         \u003cspan class=\"hljs-number\"\u003e0.91\u003c/span\u003e\n확률적 샤프 비율          \u003cspan class=\"hljs-number\"\u003e91.92\u003c/span\u003e%       \u003cspan class=\"hljs-number\"\u003e97.3\u003c/span\u003e%\n스마트 샤프                \u003cspan class=\"hljs-number\"\u003e0.6\u003c/span\u003e          \u003cspan class=\"hljs-number\"\u003e0.82\u003c/span\u003e\n소르티노 지수              \u003cspan class=\"hljs-number\"\u003e0.93\u003c/span\u003e         \u003cspan class=\"hljs-number\"\u003e1.31\u003c/span\u003e\n스마트 소르티노             \u003cspan class=\"hljs-number\"\u003e0.84\u003c/span\u003e         \u003cspan class=\"hljs-number\"\u003e1.18\u003c/span\u003e\n소르티노/√\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e                \u003cspan class=\"hljs-number\"\u003e0.66\u003c/span\u003e         \u003cspan class=\"hljs-number\"\u003e0.93\u003c/span\u003e\n스마트 소르티노/√\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e         \u003cspan class=\"hljs-number\"\u003e0.59\u003c/span\u003e         \u003cspan class=\"hljs-number\"\u003e0.83\u003c/span\u003e\n오메가                     \u003cspan class=\"hljs-number\"\u003e1.18\u003c/span\u003e         \u003cspan class=\"hljs-number\"\u003e1.18\u003c/span\u003e\n\n최대 하락폭               -\u003cspan class=\"hljs-number\"\u003e34.1\u003c/span\u003e%       -\u003cspan class=\"hljs-number\"\u003e49.12\u003c/span\u003e%\n최장기 하락일             \u003cspan class=\"hljs-number\"\u003e745\u003c/span\u003e          \u003cspan class=\"hljs-number\"\u003e690\u003c/span\u003e\n변동성 (연간)             \u003cspan class=\"hljs-number\"\u003e21.66\u003c/span\u003e%       \u003cspan class=\"hljs-number\"\u003e31.42\u003c/span\u003e%\nR^\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e                      \u003cspan class=\"hljs-number\"\u003e0.67\u003c/span\u003e         \u003cspan class=\"hljs-number\"\u003e0.67\u003c/span\u003e\n정보 비율                 \u003cspan class=\"hljs-number\"\u003e0.05\u003c/span\u003e         \u003cspan class=\"hljs-number\"\u003e0.05\u003c/span\u003e\n칼마르 비율               \u003cspan class=\"hljs-number\"\u003e0.26\u003c/span\u003e         \u003cspan class=\"hljs-number\"\u003e0.36\u003c/span\u003e\n비대칭도                   -\u003cspan class=\"hljs-number\"\u003e0.54\u003c/span\u003e        -\u003cspan class=\"hljs-number\"\u003e0.14\u003c/span\u003e\n첨도                     \u003cspan class=\"hljs-number\"\u003e11.14\u003c/span\u003e        \u003cspan class=\"hljs-number\"\u003e4.01\u003c/span\u003e\n\n예상 일일 %              \u003cspan class=\"hljs-number\"\u003e0.05\u003c/span\u003e%        \u003cspan class=\"hljs-number\"\u003e0.09\u003c/span\u003e%\n예상 월별 %              \u003cspan class=\"hljs-number\"\u003e1.0\u003c/span\u003e%         \u003cspan class=\"hljs-number\"\u003e1.96\u003c/span\u003e%\n예상 연간 %              \u003cspan class=\"hljs-number\"\u003e11.55\u003c/span\u003e%       \u003cspan class=\"hljs-number\"\u003e23.86\u003c/span\u003e%\n켈리 기준                \u003cspan class=\"hljs-number\"\u003e4.81\u003c/span\u003e%        \u003cspan class=\"hljs-number\"\u003e5.39\u003c/span\u003e%\n파산 위험                 \u003cspan class=\"hljs-number\"\u003e0.0\u003c/span\u003e%         \u003cspan class=\"hljs-number\"\u003e0.0\u003c/span\u003e%\n일일 \u003cspan class=\"hljs-title class_\"\u003eVaR\u003c/span\u003e                 -\u003cspan class=\"hljs-number\"\u003e2.19\u003c/span\u003e%       -\u003cspan class=\"hljs-number\"\u003e3.14\u003c/span\u003e%\n예상 손실 (cVaR)         -\u003cspan class=\"hljs-number\"\u003e2.19\u003c/span\u003e%       -\u003cspan class=\"hljs-number\"\u003e3.14\u003c/span\u003e%\n\n최대 연속 승리           \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e           \u003cspan class=\"hljs-number\"\u003e8\u003c/span\u003e\n최대 연속 패배           \u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e            \u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e\n이익/통곽 비율          \u003cspan class=\"hljs-number\"\u003e0.14\u003c/span\u003e         \u003cspan class=\"hljs-number\"\u003e0.18\u003c/span\u003e\n이익/통곽 (1M)          \u003cspan class=\"hljs-number\"\u003e0.7\u003c/span\u003e          \u003cspan class=\"hljs-number\"\u003e1.12\u003c/span\u003e\n\n상환 비율                \u003cspan class=\"hljs-number\"\u003e0.92\u003c/span\u003e         \u003cspan class=\"hljs-number\"\u003e0.96\u003c/span\u003e\n이익 요소               \u003cspan class=\"hljs-number\"\u003e1.14\u003c/span\u003e         \u003cspan class=\"hljs-number\"\u003e1.18\u003c/span\u003e\n상식적 비율              \u003cspan class=\"hljs-number\"\u003e1.08\u003c/span\u003e         \u003cspan class=\"hljs-number\"\u003e1.14\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eCPC\u003c/span\u003e 지수                \u003cspan class=\"hljs-number\"\u003e0.57\u003c/span\u003e         \u003cspan class=\"hljs-number\"\u003e0.61\u003c/span\u003e\n테일 비율               \u003cspan class=\"hljs-number\"\u003e0.95\u003c/span\u003e         \u003cspan class=\"hljs-number\"\u003e0.97\u003c/span\u003e\n이상치 승률             \u003cspan class=\"hljs-number\"\u003e4.9\u003c/span\u003e          \u003cspan class=\"hljs-number\"\u003e3.06\u003c/span\u003e\n이상치 손실률           \u003cspan class=\"hljs-number\"\u003e4.78\u003c/span\u003e         \u003cspan class=\"hljs-number\"\u003e3.19\u003c/span\u003e\n\n\u003cspan class=\"hljs-variable constant_\"\u003eMTD\u003c/span\u003e                     \u003cspan class=\"hljs-number\"\u003e2.13\u003c/span\u003e%        \u003cspan class=\"hljs-number\"\u003e5.18\u003c/span\u003e%\n3M                      \u003cspan class=\"hljs-number\"\u003e7.15\u003c/span\u003e%        \u003cspan class=\"hljs-number\"\u003e16.73\u003c/span\u003e%\n6M                      \u003cspan class=\"hljs-number\"\u003e17.11\u003c/span\u003e%       \u003cspan class=\"hljs-number\"\u003e36.32\u003c/span\u003e%\n\u003cspan class=\"hljs-variable constant_\"\u003eYTD\u003c/span\u003e                     \u003cspan class=\"hljs-number\"\u003e16.94\u003c/span\u003e%       \u003cspan class=\"hljs-number\"\u003e34.8\u003c/span\u003e%\n1Y                      \u003cspan class=\"hljs-number\"\u003e26.74\u003c/span\u003e%       \u003cspan class=\"hljs-number\"\u003e54.69\u003c/span\u003e%\n3Y (연간)              \u003cspan class=\"hljs-number\"\u003e5.54\u003c/span\u003e%        \u003cspan class=\"hljs-number\"\u003e9.97\u003c/span\u003e%\n5Y (연간)              \u003cspan class=\"hljs-number\"\u003e8.7\u003c/span\u003e%         \u003cspan class=\"hljs-number\"\u003e17.75\u003c/span\u003e%\n10Y (연간)             \u003cspan class=\"hljs-number\"\u003e8.7\u003c/span\u003e%         \u003cspan class=\"hljs-number\"\u003e17.75\u003c/span\u003e%\n전체 기간 (연간)       \u003cspan class=\"hljs-number\"\u003e8.7\u003c/span\u003e%         \u003cspan class=\"hljs-number\"\u003e17.75\u003c/span\u003e%\n\n최고 효과 일             \u003cspan class=\"hljs-number\"\u003e9.06\u003c/span\u003e%        \u003cspan class=\"hljs-number\"\u003e10.41\u003c/span\u003e%\n최악의 날               -\u003cspan class=\"hljs-number\"\u003e10.94\u003c/span\u003e%      -\u003cspan class=\"hljs-number\"\u003e10.9\u003c/span\u003e%\n최고 월                  \u003cspan class=\"hljs-number\"\u003e12.7\u003c/span\u003e%        \u003cspan class=\"hljs-number\"\u003e20.41\u003c/span\u003e%\n최악의 월               -\u003cspan class=\"hljs-number\"\u003e13.0\u003c/span\u003e%       -\u003cspan class=\"hljs-number\"\u003e15.13\u003c/span\u003e%\n최고 연도               \u003cspan class=\"hljs-number\"\u003e27.04\u003c/span\u003e%       \u003cspan class=\"hljs-number\"\u003e91.38\u003c/span\u003e%\n최악의 연도             -\u003cspan class=\"hljs-number\"\u003e19.48\u003c/span\u003e%      -\u003cspan class=\"hljs-number\"\u003e44.71\u003c/span\u003e%\n\n평균 하락                  -\u003cspan class=\"hljs-number\"\u003e2.12\u003c/span\u003e%       -\u003cspan class=\"hljs-number\"\u003e3.55\u003c/span\u003e%\n평균 하락 일             \u003cspan class=\"hljs-number\"\u003e21\u003c/span\u003e           \u003cspan class=\"hljs-number\"\u003e23\u003c/span\u003e\n회복 계수                \u003cspan class=\"hljs-number\"\u003e1.91\u003c/span\u003e         \u003cspan class=\"hljs-number\"\u003e2.63\u003c/span\u003e\n울서 지수                \u003cspan class=\"hljs-number\"\u003e0.1\u003c/span\u003e          \u003cspan class=\"hljs-number\"\u003e0.18\u003c/span\u003e\n평정 지수                \u003cspan class=\"hljs-number\"\u003e0.44\u003c/span\u003e         \u003cspan class=\"hljs-number\"\u003e0.42\u003c/span\u003e\n\n월별 상승 평균           \u003cspan class=\"hljs-number\"\u003e4.73\u003c/span\u003e%        \u003cspan class=\"hljs-number\"\u003e7.66\u003c/span\u003e%\n월별 하락 평균           -\u003cspan class=\"hljs-number\"\u003e5.82\u003c/span\u003e%       -\u003cspan class=\"hljs-number\"\u003e7.11\u003c/span\u003e%\n이익 일 %                 \u003cspan class=\"hljs-number\"\u003e54.41\u003c/span\u003e%       \u003cspan class=\"hljs-number\"\u003e53.7\u003c/span\u003e%\n이익 월 %                \u003cspan class=\"hljs-number\"\u003e63.64\u003c/span\u003e%       \u003cspan class=\"hljs-number\"\u003e65.45\u003c/span\u003e%\n이익 분기 %              \u003cspan class=\"hljs-number\"\u003e73.68\u003c/span\u003e%       \u003cspan class=\"hljs-number\"\u003e68.42\u003c/span\u003e%\n이익 연도 %              \u003cspan class=\"hljs-number\"\u003e80.0\u003c/span\u003e%        \u003cspan class=\"hljs-number\"\u003e80.0\u003c/span\u003e%\n\n베타                       -            \u003cspan class=\"hljs-number\"\u003e1.19\u003c/span\u003e\n알파                      -            \u003cspan class=\"hljs-number\"\u003e0.12\u003c/span\u003e\n상관관계               -            \u003cspan class=\"hljs-number\"\u003e81.71\u003c/span\u003e%\n\u003cspan class=\"hljs-title class_\"\u003eTreynor\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eRatio\u003c/span\u003e           -            \u003cspan class=\"hljs-number\"\u003e161.56\u003c/span\u003e%\n없음\n\n\n최악 \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e 번 하락\n\u003c/code\u003e\u003c/pre\u003e\n\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_14.png\"\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003e전략 시각화 대 SPY 벤치마크\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_15.png\" alt=\"이미지1\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_16.png\" alt=\"이미지2\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_17.png\" alt=\"이미지3\"\u003e\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_18.png\" alt=\"image 1\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_19.png\" alt=\"image 2\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_20.png\" alt=\"image 3\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e결과:\u003c/li\u003e\n\u003c/ul\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e전략 누적 수익률은 약 200%에 비해 벤치마크는 약 75%입니다.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e전략 누적 수익률(변동성 매칭)은 약 125%입니다.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e연말 전략 수익률은 약 30%에 비해 벤치마크는 약 15%입니다.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e월간 수익률 분포: 전략은 약 5%에 비해 벤치마크는 약 3%입니다.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e롤링 베타는 약 1.5입니다.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e롤링 변동성은 약 0.2에 비해 벤치마크는 약 0.1입니다.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e롤링 샤프 비율은 약 2.5입니다.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e롤링 소르티노 비율은 약 5.0입니다.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e최악의 손실액은 2021년 12월 28일에 -47%입니다.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e월간 최소 활동 수익률은 2022년 10월에 -15%입니다.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e전략 수익률 분위: 분기별으로 약 10% 및 연간으로 약 45%입니다.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e전략의 누적 수익률 및 샤프 비율이 벤치마크보다 높아, 같은 위험 수준에 더 나은 수익을 창출한다는 것을 보여줍니다.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e일반적으로 샤프 비율이 1.0보다 크면 투자자들에게 만족스럽거나 양호한 것으로 간주됩니다. 2.0보다 높은 비율은 매우 우수하다고 평가됩니다. 전략의 샤프 비율은 약 2.5입니다.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e소르티노 비율은 2 이상이면 이상적인 것으로 간주됩니다. 우리의 전략은 약 5.0의 소르티노 비율을 얻습니다.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e베타가 1보다 큰 경우: 베타가 1.0보다 크면 해당 자산의 가격이 이론적으로 시장보다 더 변동적임을 나타냅니다. 주식의 베타가 1.2면 시장보다 20% 더 변동적이라고 가정됩니다 (롤링 변동성 vs 벤치마크 비교). 테크놀로지 주식은 주요 벤치마크보다 더 높은 베타 값을 갖는 경향이 있습니다.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e전반적으로 제안된 Equal-Weighted BF Portfolio는 합리적인 투자 수익률을 창출했지만 SPY에 비해 더 높은 변동성을 동반합니다.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003eBF의 최대 샤프 비율을 위한 효율적 투자 가장자리\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003ePyPortfolioOpt 라이브러리는 EfficientFrontier 클래스를 제공하며, 이 클래스는 공분산 행렬과 예상 수익을 입력으로 사용합니다. weights 변수는 최대 샤프 비율을 갖는 목표에 따라 각 자산에 대한 최적화된 가중치를 저장합니다.\u003c/li\u003e\n\u003cli\u003e효율적인 투자 가장자리(Point of Origin)를 위한 라이브러리 가져오기 및 주식 데이터 읽기.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# 포트폴리오 최적화를 위한 라이브러리 가져오기\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e pypfopt.\u003cspan class=\"hljs-property\"\u003eefficient_frontier\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eEfficientFrontier\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e pypfopt \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e risk_models\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e pypfopt \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e expected_returns\n\ndf=yf.\u003cspan class=\"hljs-title function_\"\u003edownload\u003c/span\u003e(tickers, start = \u003cspan class=\"hljs-string\"\u003e'2020-01-01'\u003c/span\u003e)[\u003cspan class=\"hljs-string\"\u003e'Adj Close'\u003c/span\u003e]\ndf.\u003cspan class=\"hljs-title function_\"\u003etail\u003c/span\u003e()\n\n\u003cspan class=\"hljs-title class_\"\u003eTicker\u003c/span\u003e     \u003cspan class=\"hljs-variable constant_\"\u003eAAPL\u003c/span\u003e       \u003cspan class=\"hljs-variable constant_\"\u003eAMZN\u003c/span\u003e       \u003cspan class=\"hljs-variable constant_\"\u003eGOOG\u003c/span\u003e       \u003cspan class=\"hljs-variable constant_\"\u003eMETA\u003c/span\u003e\n\u003cspan class=\"hljs-title class_\"\u003eDate\u003c/span\u003e    \n\u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e07\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e02\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e220.270004\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e200.000000\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e186.610001\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e509.500000\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e07\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e03\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e221.550003\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e197.589996\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e187.389999\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e509.959991\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e07\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e05\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e226.339996\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e200.000000\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e191.960007\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e539.909973\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e07\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e08\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e227.820007\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e199.289993\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e190.479996\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e529.320007\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e07\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e09\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e228.679993\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e199.339996\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e190.440002\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e530.000000\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e연간화된 기대수익률 및 연간 샘플 공분산 행렬을 계산하고 플로팅합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# 연간화된 기대수익률 및 연간 샘플 공분산 행렬 계산\nmu = expected_returns.\u003cspan class=\"hljs-title function_\"\u003emean_historical_return\u003c/span\u003e(df) # 기대 수익률\nS = risk_models.\u003cspan class=\"hljs-title function_\"\u003esample_cov\u003c/span\u003e(df) # 공분산 행렬\n\n# 연간화된 기대수익률 시각화\nmu\n\n\u003cspan class=\"hljs-title class_\"\u003eTicker\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eAAPL\u003c/span\u003e    \u003cspan class=\"hljs-number\"\u003e0.288713\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eAMZN\u003c/span\u003e    \u003cspan class=\"hljs-number\"\u003e0.179139\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eGOOG\u003c/span\u003e    \u003cspan class=\"hljs-number\"\u003e0.255711\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eMETA\u003c/span\u003e    \u003cspan class=\"hljs-number\"\u003e0.229041\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003edtype\u003c/span\u003e: float64\n\nmu.\u003cspan class=\"hljs-property\"\u003eplot\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ebar\u003c/span\u003e(label=\u003cspan class=\"hljs-string\"\u003e'연간화된 기대수익률'\u003c/span\u003e)\nplt.\u003cspan class=\"hljs-title function_\"\u003elegend\u003c/span\u003e()\n\u003c/code\u003e\u003c/pre\u003e\n\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_21.png\"\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003e공분산 행렬 시각화\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# 공분산 행렬 시각화\nS\n\n|        | \u003cspan class=\"hljs-variable constant_\"\u003eAAPL\u003c/span\u003e    | \u003cspan class=\"hljs-variable constant_\"\u003eAMZN\u003c/span\u003e    | \u003cspan class=\"hljs-variable constant_\"\u003eGOOG\u003c/span\u003e    | \u003cspan class=\"hljs-variable constant_\"\u003eMETA\u003c/span\u003e    |\n|--------|---------|---------|---------|---------|\n| \u003cspan class=\"hljs-variable constant_\"\u003eAAPL\u003c/span\u003e   | \u003cspan class=\"hljs-number\"\u003e0.106707\u003c/span\u003e| \u003cspan class=\"hljs-number\"\u003e0.071803\u003c/span\u003e| \u003cspan class=\"hljs-number\"\u003e0.070835\u003c/span\u003e| \u003cspan class=\"hljs-number\"\u003e0.086041\u003c/span\u003e|\n| \u003cspan class=\"hljs-variable constant_\"\u003eAMZN\u003c/span\u003e   | \u003cspan class=\"hljs-number\"\u003e0.071803\u003c/span\u003e| \u003cspan class=\"hljs-number\"\u003e0.132787\u003c/span\u003e| \u003cspan class=\"hljs-number\"\u003e0.078590\u003c/span\u003e| \u003cspan class=\"hljs-number\"\u003e0.103355\u003c/span\u003e|\n| \u003cspan class=\"hljs-variable constant_\"\u003eGOOG\u003c/span\u003e   | \u003cspan class=\"hljs-number\"\u003e0.070835\u003c/span\u003e| \u003cspan class=\"hljs-number\"\u003e0.078590\u003c/span\u003e| \u003cspan class=\"hljs-number\"\u003e0.107778\u003c/span\u003e| \u003cspan class=\"hljs-number\"\u003e0.098501\u003c/span\u003e|\n| \u003cspan class=\"hljs-variable constant_\"\u003eMETA\u003c/span\u003e   | \u003cspan class=\"hljs-number\"\u003e0.086041\u003c/span\u003e| \u003cspan class=\"hljs-number\"\u003e0.103355\u003c/span\u003e| \u003cspan class=\"hljs-number\"\u003e0.098501\u003c/span\u003e| \u003cspan class=\"hljs-number\"\u003e0.213837\u003c/span\u003e|\n\nS.\u003cspan class=\"hljs-property\"\u003estyle\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ebackground_gradient\u003c/span\u003e(cmap=\u003cspan class=\"hljs-string\"\u003e'coolwarm'\u003c/span\u003e)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_22.png\"\u003e\n\u003cul\u003e\n\u003cli\u003eMSR에 대한 포트폴리오 최적화\u003c/li\u003e\n\u003c/ul\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# 최대 샤프 비율을 위한 최적화\nef = \u003cspan class=\"hljs-title class_\"\u003eEfficientFrontier\u003c/span\u003e(mu, S) # 기대수익과 공분산 행렬을 입력으로 제공\nweights = ef.\u003cspan class=\"hljs-title function_\"\u003emax_sharpe\u003c/span\u003e() # 샤프 비율 최적화를 위한 가중치 최적화\n\nclean_weights = ef.\u003cspan class=\"hljs-title function_\"\u003eclean_weights\u003c/span\u003e() # clean_weights는 가중치를 반올림하고 거의 \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e에 가까운 값을 잘라냄\n\n# 최적화된 가중치와 포트폴리오의 예상 수익을 출력\nclean_weights\n\n\u003cspan class=\"hljs-title class_\"\u003eOrderedDict\u003c/span\u003e([(\u003cspan class=\"hljs-string\"\u003e'AAPL'\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0.66721\u003c/span\u003e),\n             (\u003cspan class=\"hljs-string\"\u003e'AMZN'\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0.0\u003c/span\u003e),\n             (\u003cspan class=\"hljs-string\"\u003e'GOOG'\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0.33279\u003c/span\u003e),\n             (\u003cspan class=\"hljs-string\"\u003e'META'\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0.0\u003c/span\u003e)])\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003eMSR 최적화 포트폴리오 생성\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# 최적화된 가중치를 사용하여 새로운 포트폴리오 생성\nnew_weights = [\u003cspan class=\"hljs-number\"\u003e0.66721\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0.33279\u003c/span\u003e]\noptimized_portfolio = df[\u003cspan class=\"hljs-string\"\u003e'AAPL'\u003c/span\u003e]*new_weights[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e] + df[\u003cspan class=\"hljs-string\"\u003e'GOOG'\u003c/span\u003e]*new_weights[\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e]\noptimized_portfolio # 일일 수익 시각화\n\n\u003cspan class=\"hljs-title class_\"\u003eDate\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e2020\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e01\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e02\u003c/span\u003e     \u003cspan class=\"hljs-number\"\u003e71.406448\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e2020\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e01\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e03\u003c/span\u003e     \u003cspan class=\"hljs-number\"\u003e70.821647\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e2020\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e01\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e06\u003c/span\u003e     \u003cspan class=\"hljs-number\"\u003e71.763386\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e2020\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e01\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e07\u003c/span\u003e     \u003cspan class=\"hljs-number\"\u003e71.520408\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e2020\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e01\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e08\u003c/span\u003e     \u003cspan class=\"hljs-number\"\u003e72.480875\u003c/span\u003e\n                 ...    \n\u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e07\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e02\u003c/span\u003e    \u003cspan class=\"hljs-number\"\u003e209.068292\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e07\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e03\u003c/span\u003e    \u003cspan class=\"hljs-number\"\u003e210.181895\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e07\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e05\u003c/span\u003e    \u003cspan class=\"hljs-number\"\u003e214.898680\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e07\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e08\u003c/span\u003e    \u003cspan class=\"hljs-number\"\u003e215.393625\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e07\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e09\u003c/span\u003e    \u003cspan class=\"hljs-number\"\u003e215.954106\u003c/span\u003e\n\u003cspan class=\"hljs-title class_\"\u003eLength\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1136\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003edtype\u003c/span\u003e: float64\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003eMSR 누적 수익 시각화\u003c/li\u003e\n\u003c/ul\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003eoptimized_portfolio.plot(label=\u003cspan class=\"hljs-string\"\u003e'최적화된 포트폴리오'\u003c/span\u003e)\nplt.legend()\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_23.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eMSR PO는 BF 대신 AAPL과 GOOG (총 2개 자산)만 고려하여 220%의 수익을 제공합니다. 이는 B2로 불리며 페어 트레이딩의 잠재적 후보입니다.\u003c/li\u003e\n\u003cli\u003eMSR B2 포트폴리오 성과 보고서 및 전략 시각화를 SPY 벤치마크 대비 생성\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-comment\"\u003e# 첫 번째 포트폴리오와 최적화된 포트폴리오를 비교하는 새로운 보고서 표시\u003c/span\u003e\nqs.reports.full(optimized_portfolio, benchmark=portfolio)\n\n성과 지표\n                           벤치마크    전략\n-------------------------  -----------  ----------\n시작 기간               \u003cspan class=\"hljs-number\"\u003e2020\u003c/span\u003e-01-03   \u003cspan class=\"hljs-number\"\u003e2020\u003c/span\u003e-01-03\n종료 기간                 \u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e-07-09   \u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e-07-09\n무위험 이자율             \u003cspan class=\"hljs-number\"\u003e0.0\u003c/span\u003e%         \u003cspan class=\"hljs-number\"\u003e0.0\u003c/span\u003e%\n시장 참여 시간           \u003cspan class=\"hljs-number\"\u003e100.0\u003c/span\u003e%       \u003cspan class=\"hljs-number\"\u003e100.0\u003c/span\u003e%\n\n누적 수익            \u003cspan class=\"hljs-number\"\u003e184.73\u003c/span\u003e%      \u003cspan class=\"hljs-number\"\u003e202.43\u003c/span\u003e%\nCAGR﹪           \u003cspan class=\"hljs-number\"\u003e17.34\u003c/span\u003e%       \u003cspan class=\"hljs-number\"\u003e18.43\u003c/span\u003e%\n\n샤프                     \u003cspan class=\"hljs-number\"\u003e0.9\u003c/span\u003e          \u003cspan class=\"hljs-number\"\u003e0.96\u003c/span\u003e\n확률적인 샤프 비율         \u003cspan class=\"hljs-number\"\u003e97.08\u003c/span\u003e%       \u003cspan class=\"hljs-number\"\u003e97.9\u003c/span\u003e%\n스마트 샤프               \u003cspan class=\"hljs-number\"\u003e0.79\u003c/span\u003e         \u003cspan class=\"hljs-number\"\u003e0.84\u003c/span\u003e\n소르티노                    \u003cspan class=\"hljs-number\"\u003e1.29\u003c/span\u003e         \u003cspan class=\"hljs-number\"\u003e1.4\u003c/span\u003e\n스마트 소르티노              \u003cspan class=\"hljs-number\"\u003e1.13\u003c/span\u003e         \u003cspan class=\"hljs-number\"\u003e1.23\u003c/span\u003e\n소르티노/√\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e                 \u003cspan class=\"hljs-number\"\u003e0.91\u003c/span\u003e         \u003cspan class=\"hljs-number\"\u003e0.99\u003c/span\u003e\n스마트 소르티노/√\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e           \u003cspan class=\"hljs-number\"\u003e0.8\u003c/span\u003e          \u003cspan class=\"hljs-number\"\u003e0.87\u003c/span\u003e\n오메가                      \u003cspan class=\"hljs-number\"\u003e1.19\u003c/span\u003e         \u003cspan class=\"hljs-number\"\u003e1.19\u003c/span\u003e\n\n최대 손실                 -\u003cspan class=\"hljs-number\"\u003e49.12\u003c/span\u003e%      -\u003cspan class=\"hljs-number\"\u003e33.58\u003c/span\u003e%\n최장 연속 손실 일수            \u003cspan class=\"hljs-number\"\u003e690\u003c/span\u003e          \u003cspan class=\"hljs-number\"\u003e542\u003c/span\u003e\n변동성 (연간)          \u003cspan class=\"hljs-number\"\u003e31.42\u003c/span\u003e%       \u003cspan class=\"hljs-number\"\u003e30.32\u003c/span\u003e%\nR^\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e                        \u003cspan class=\"hljs-number\"\u003e0.8\u003c/span\u003e          \u003cspan class=\"hljs-number\"\u003e0.8\u003c/span\u003e\n정보 비율                  \u003cspan class=\"hljs-number\"\u003e0.0\u003c/span\u003e          \u003cspan class=\"hljs-number\"\u003e0.0\u003c/span\u003e\n칼마르                     \u003cspan class=\"hljs-number\"\u003e0.35\u003c/span\u003e         \u003cspan class=\"hljs-number\"\u003e0.55\u003c/span\u003e\n외도                       -\u003cspan class=\"hljs-number\"\u003e0.14\u003c/span\u003e        -\u003cspan class=\"hljs-number\"\u003e0.07\u003c/span\u003e\n첨도                      \u003cspan class=\"hljs-number\"\u003e4.02\u003c/span\u003e         \u003cspan class=\"hljs-number\"\u003e4.66\u003c/span\u003e\n\n기대되는 일일 %           \u003cspan class=\"hljs-number\"\u003e0.09\u003c/span\u003e%        \u003cspan class=\"hljs-number\"\u003e0.1\u003c/span\u003e%\n기대되는 월간 %         \u003cspan class=\"hljs-number\"\u003e1.92\u003c/span\u003e%        \u003cspan class=\"hljs-number\"\u003e2.03\u003c/span\u003e%\n기대되는 연간 %          \u003cspan class=\"hljs-number\"\u003e23.28\u003c/span\u003e%       \u003cspan class=\"hljs-number\"\u003e24.77\u003c/span\u003e%\n켈리 기준                   \u003cspan class=\"hljs-number\"\u003e5.11\u003c/span\u003e%        \u003cspan class=\"hljs-number\"\u003e8.13\u003c/span\u003e%\n파산 위험                \u003cspan class=\"hljs-number\"\u003e0.0\u003c/span\u003e%         \u003cspan class=\"hljs-number\"\u003e0.0\u003c/span\u003e%\n일일 가치위험            -\u003cspan class=\"hljs-number\"\u003e3.14\u003c/span\u003e%       -\u003cspan class=\"hljs-number\"\u003e3.03\u003c/span\u003e%\n기대되는 실패(조건부 VaR)   -\u003cspan class=\"hljs-number\"\u003e3.14\u003c/span\u003e%       -\u003cspan class=\"hljs-number\"\u003e3.03\u003c/span\u003e%\n\n연속 최대 성공 수          \u003cspan class=\"hljs-number\"\u003e8\u003c/span\u003e            \u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e\n연속 최대 손실 수          \u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e            \u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e\n이익/손실 비율           \u003cspan class=\"hljs-number\"\u003e0.17\u003c/span\u003e         \u003cspan class=\"hljs-number\"\u003e0.19\u003c/span\u003e\n이익/손실 (1M)            \u003cspan class=\"hljs-number\"\u003e1.1\u003c/span\u003e          \u003cspan class=\"hljs-number\"\u003e1.14\u003c/span\u003e\n\n상환 비율                 \u003cspan class=\"hljs-number\"\u003e0.95\u003c/span\u003e         \u003cspan class=\"hljs-number\"\u003e0.98\u003c/span\u003e\n이익 요소               \u003cspan class=\"hljs-number\"\u003e1.17\u003c/span\u003e         \u003cspan class=\"hljs-number\"\u003e1.19\u003c/span\u003e\n상식적인 비율           \u003cspan class=\"hljs-number\"\u003e1.14\u003c/span\u003e         \u003cspan class=\"hljs-number\"\u003e1.16\u003c/span\u003e\nCPC 지수                \u003cspan class=\"hljs-number\"\u003e0.6\u003c/span\u003e          \u003cspan class=\"hljs-number\"\u003e0.63\u003c/span\u003e\n꼬리 비율                \u003cspan class=\"hljs-number\"\u003e0.97\u003c/span\u003e         \u003cspan class=\"hljs-number\"\u003e0.98\u003c/span\u003e\n이상치 이기는 비율        \u003cspan class=\"hljs-number\"\u003e3.8\u003c/span\u003e          \u003cspan class=\"hljs-number\"\u003e3.97\u003c/span\u003e\n이상치 손실 비율         \u003cspan class=\"hljs-number\"\u003e3.55\u003c/span\u003e         \u003cspan class=\"hljs-number\"\u003e3.62\u003c/span\u003e\n\n월말 이익                  \u003cspan class=\"hljs-number\"\u003e5.18\u003c/span\u003e%        \u003cspan class=\"hljs-number\"\u003e7.14\u003c/span\u003e%\n\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e개월간                   \u003cspan class=\"hljs-number\"\u003e16.73\u003c/span\u003e%       \u003cspan class=\"hljs-number\"\u003e31.57\u003c/span\u003e%\n\u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e개월간                   \u003cspan class=\"hljs-number\"\u003e36.32\u003c/span\u003e%       \u003cspan class=\"hljs-number\"\u003e26.89\u003c/span\u003e%\nYTD                      \u003cspan class=\"hljs-number\"\u003e34.8\u003c/span\u003e%        \u003cspan class=\"hljs-number\"\u003e23.43\u003c/span\u003e%\n\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e년                    \u003cspan class=\"hljs-number\"\u003e54.69\u003c/span\u003e%       \u003cspan class=\"hljs-number\"\u003e29.71\u003c/span\u003e%\n\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e년 (연간)             \u003cspan class=\"hljs-number\"\u003e9.97\u003c/span\u003e%        \u003cspan class=\"hljs-number\"\u003e10.51\u003c/span\u003e%\n\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e년 (연간)             \u003cspan class=\"hljs-number\"\u003e17.34\u003c/span\u003e%       \u003cspan class=\"hljs-number\"\u003e18.43\u003c/span\u003e%\n\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e년 (연간)            \u003cspan class=\"hljs-number\"\u003e17.34\u003c/span\u003e%       \u003cspan class=\"hljs-number\"\u003e18.43\u003c/span\u003e%\n최고치 (연간)           \u003cspan class=\"hljs-number\"\u003e17.34\u003c/span\u003e%       \u003cspan class=\"hljs-number\"\u003e18.43\u003c/span\u003e%\n\n최고 수익 날짜         \u003cspan class=\"hljs-number\"\u003e10.41\u003c/span\u003e%       \u003cspan class=\"hljs-number\"\u003e11.17\u003c/span\u003e%\n최악의 날              -\u003cspan class=\"hljs-number\"\u003e10.9\u003c/span\u003e%       -\u003cspan class=\"hljs-number\"\u003e12.32\u003c/span\u003e%\n최고의 월              \u003cspan class=\"hljs-number\"\u003e20.41\u003c/span\u003e%       \u003cspan class=\"hljs-number\"\u003e18.65\u003c/span\u003e%\n최악의 월             -\u003cspan class=\"hljs-number\"\u003e15.13\u003c/span\u003e%      -\u003cspan class=\"hljs-number\"\u003e12.31\u003c/span\u003e%\n최고의 연도           \u003cspan class=\"hljs-number\"\u003e91.38\u003c/span\u003e%       \u003cspan class=\"hljs-number\"\u003e62.29\u003c/span\u003e%\n최악의 연도          -\u003cspan class=\"hljs-number\"\u003e44.71\u003c/span\u003e%      -\u003cspan class=\"hljs-number\"\u003e29.98\u003c/span\u003e%\n\n평균 하락                 -\u003cspan class=\"hljs-number\"\u003e3.59\u003c/span\u003e%       -\u003cspan class=\"hljs-number\"\u003e4.0\u003c/span\u003e%\n평균 하락 일수            \u003cspan class=\"hljs-number\"\u003e23\u003c/span\u003e           \u003cspan class=\"hljs-number\"\u003e26\u003c/span\u003e\n회복 요인                  \u003cspan class=\"hljs-number\"\u003e2.58\u003c/span\u003e         \u003cspan class=\"hljs-number\"\u003e3.91\u003c/span\u003e\n울서 지수                  \u003cspan class=\"hljs-number\"\u003e0.18\u003c/span\u003e         \u003cspan class=\"hljs-number\"\u003e0.12\u003c/span\u003e\n평온 지수                   \u003cspan class=\"hljs-number\"\u003e0.42\u003c/span\u003e         \u003cspan class=\"hljs-number\"\u003e0.94\u003c/span\u003e\n\n평균 상승 월              \u003cspan class=\"hljs-number\"\u003e7.75\u003c/span\u003e%        \u003cspan class=\"hljs-number\"\u003e8.26\u003c/span\u003e%\n평균 하락 월           -\u003cspan class=\"hljs-number\"\u003e6.91\u003c/span\u003e%       -\u003cspan class=\"hljs-number\"\u003e6.96\u003c/span\u003e%\n이익 일 %                 \u003cspan class=\"hljs-number\"\u003e53.66\u003c/span\u003e%       \u003cspan class=\"hljs-number\"\u003e54.54\u003c/span\u003e%\n이익 월 %                \u003cspan class=\"hljs-number\"\u003e65.45\u003c/span\u003e%       \u003cspan class=\"hljs-number\"\u003e58.18\u003c/span\u003e%\n이익 분기 %             \u003cspan class=\"hljs-number\"\u003e68.42\u003c/span\u003e%       \u003cspan class=\"hljs-number\"\u003e57.89\u003c/span\u003e%\n이익 연도 %              \u003cspan class=\"hljs-number\"\u003e80.0\u003c/span\u003e%        \u003cspan class=\"hljs-number\"\u003e80.0\u003c/span\u003e%\n\n베타                       -            \u003cspan class=\"hljs-number\"\u003e0.86\u003c/span\u003e\n알파                      -            \u003cspan class=\"hljs-number\"\u003e0.05\u003c/span\u003e\n상관 관계                -            \u003cspan class=\"hljs-number\"\u003e89.32\u003c/span\u003e%\n트레이너 비율              -            \u003cspan class=\"hljs-number\"\u003e234.87\u003c/span\u003e%\n없음\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003e최악의 5번의 Drawdown\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_24.png\" alt=\"Worst Drawdowns\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eMSR PO 전략 시각화\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_25.png\" alt=\"MSR PO Strategy Visualization\"\u003e\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_26.png\" alt=\"Image 1\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_27.png\" alt=\"Image 2\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_28.png\" alt=\"Image 3\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_29.png\" alt=\"Image 4\"\u003e\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e결론:\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e전략 누적 수익률 약 220%.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e전략 누적 수익률 (변동성 일치) 약 210%.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e월별 수익 분포: 전략 약 7% 대 벤치마크 약 3%.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e롤링 베타 약 0.6\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e롤링 변동성 약 0.2\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e롤링 샤프 비율 약 2.5\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e롤링 소티노 비율 약 5.0\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e최대 손실 약 -31% (2021년 01월 04일)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e최소 월간 순활 수익 약 -10% (2022년 10월)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e전략 수익 분위 수: 분기별로 약 10%, 연간으로 약 50%.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e전략의 누적 수익률과 샤프 비율이 벤치마크보다 높음을 보여줍니다. 이는 더 많은 수익을 가져오지만, 같은 수준의 위험을 감수하고 있음을 의미합니다.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e베타 값이 1보다 낮다는 것은 MSR B2가 전체 시장보다 덜 변동성이 있다는 것을 의미합니다.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e전반적으로 최적화된 MSR B2 포트폴리오는 위험-수익 교환 관계 측면에서 50% BF-to-B2 포트폴리오 비용 절감까지 고려하여 평등가중 BF 포트폴리오보다 우수한 성과를 거뒀습니다.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003e(NVDA, AMD) 대 S\u0026#x26;P 500 수익성 분석\u003c/h1\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003eFinanceToolkit [9]를 사용하여 (NVDA, AMD) 대 S\u0026#x26;P 500 수익 분석의 세부 정보를 살펴보겠습니다.\u003c/li\u003e\n\u003cli\u003e입력한 과거 데이터, 손익 계산서, 수익성 비율, FA 및 TA 지표 가져오기 [9]\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e matplotlib.\u003cspan class=\"hljs-property\"\u003epyplot\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e plt\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e matplotlib.\u003cspan class=\"hljs-property\"\u003eticker\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e mtick\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e pandas \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e pd\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e seaborn \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e sns\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e matplotlib \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e patheffects\n\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e financetoolkit \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eToolkit\u003c/span\u003e\n\n\u003cspan class=\"hljs-variable constant_\"\u003eAPI_KEY\u003c/span\u003e = \u003cspan class=\"hljs-string\"\u003e\"YOUR API KEY\"\u003c/span\u003e\n\ncompanies = \u003cspan class=\"hljs-title class_\"\u003eToolkit\u003c/span\u003e([\u003cspan class=\"hljs-string\"\u003e\"NVDA\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"AMD\"\u003c/span\u003e], api_key=\u003cspan class=\"hljs-variable constant_\"\u003eAPI_KEY\u003c/span\u003e, start_date=\u003cspan class=\"hljs-string\"\u003e\"2017-12-31\"\u003c/span\u003e)\n\n# 손익 계산서\nhistorical_data = companies.\u003cspan class=\"hljs-title function_\"\u003eget_historical_data\u003c/span\u003e()\n\n# 재무 제표 예시\nincome_statement = companies.\u003cspan class=\"hljs-title function_\"\u003eget_income_statement\u003c/span\u003e()\n\n# 수익성 비율\nprofitability_ratios = companies.\u003cspan class=\"hljs-property\"\u003eratios\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ecollect_profitability_ratios\u003c/span\u003e()\n\n# 그리스 금융 지표\nall_greeks = companies.\u003cspan class=\"hljs-property\"\u003eoptions\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ecollect_all_greeks\u003c/span\u003e(expiration_time_range=\u003cspan class=\"hljs-number\"\u003e180\u003c/span\u003e)\n\n\n# 요소 자산 상관 관계\nfactor_asset_correlations = companies.\u003cspan class=\"hljs-property\"\u003eperformance\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eget_factor_asset_correlations\u003c/span\u003e(\n    period=\u003cspan class=\"hljs-string\"\u003e\"quarterly\"\u003c/span\u003e\n)\n\n# \u003cspan class=\"hljs-title class_\"\u003eVaR\u003c/span\u003e\nvalue_at_risk = companies.\u003cspan class=\"hljs-property\"\u003erisk\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eget_value_at_risk\u003c/span\u003e(period=\u003cspan class=\"hljs-string\"\u003e\"weekly\"\u003c/span\u003e)\n\n# \u003cspan class=\"hljs-variable constant_\"\u003eTA\u003c/span\u003e 지표\nichimoku_cloud = companies.\u003cspan class=\"hljs-property\"\u003etechnicals\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eget_ichimoku_cloud\u003c/span\u003e()\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e누적 수익률\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eNVDA, AMD 및 S\u0026#x26;P 500의 누적 수익률을 시각화합니다. [9]\u003c/li\u003e\n\u003c/ul\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title function_\"\u003edisplay\u003c/span\u003e(역사적_데이터)\n\n# 클립 보드에 복사 (이건 \u003cspan class=\"hljs-variable constant_\"\u003eREADME\u003c/span\u003e에 데이터를 붙여 넣기 위함입니다)\npd.\u003cspan class=\"hljs-property\"\u003eio\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eclipboards\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eto_clipboard\u003c/span\u003e(\n    역사적_데이터.\u003cspan class=\"hljs-title function_\"\u003exs\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"NVDA\"\u003c/span\u003e, axis=\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, level=\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e).\u003cspan class=\"hljs-property\"\u003eiloc\u003c/span\u003e[:-\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003ehead\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003eto_markdown\u003c/span\u003e(),\n    excel=\u003cspan class=\"hljs-title class_\"\u003eFalse\u003c/span\u003e,\n)\n\n# 누적 수익을 위한 라인 차트 생성\nax = 역사적_데이터[\u003cspan class=\"hljs-string\"\u003e\"누적 수익\"\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003eplot\u003c/span\u003e(\n    figsize=(\u003cspan class=\"hljs-number\"\u003e15\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e),\n    lw=\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e,\n)\n\n# 색상 및 라인 스타일 사용자 정의\nax.\u003cspan class=\"hljs-title function_\"\u003eset_prop_cycle\u003c/span\u003e(color=[\u003cspan class=\"hljs-string\"\u003e\"#007ACC\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"#FF6F61\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"#4CAF50\"\u003c/span\u003e])\nax.\u003cspan class=\"hljs-title function_\"\u003eset_xlabel\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"년도\"\u003c/span\u003e)\nax.\u003cspan class=\"hljs-title function_\"\u003eset_ylabel\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"누적 수익\"\u003c/span\u003e)\nax.\u003cspan class=\"hljs-title function_\"\u003eset_title\u003c/span\u003e(\n    \u003cspan class=\"hljs-string\"\u003e\"NVDA 및 AMD의 누적 수익과 S\u0026#x26;P 500을 벤치마크로 함께한 수익\"\u003c/span\u003e\n)\n\n# 범례 추가\nax.\u003cspan class=\"hljs-title function_\"\u003elegend\u003c/span\u003e([\u003cspan class=\"hljs-string\"\u003e\"NVDA\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"AMD\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"S\u0026#x26;P 500\"\u003c/span\u003e], loc=\u003cspan class=\"hljs-string\"\u003e\"upper left\"\u003c/span\u003e)\n\n# 가시성을 위해 그리드 라인 추가\nax.\u003cspan class=\"hljs-title function_\"\u003egrid\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eTrue\u003c/span\u003e, linestyle=\u003cspan class=\"hljs-string\"\u003e\"--\"\u003c/span\u003e, alpha=\u003cspan class=\"hljs-number\"\u003e0.7\u003c/span\u003e)\n\nplt.\u003cspan class=\"hljs-title function_\"\u003eshow\u003c/span\u003e()\n\u003c/code\u003e\u003c/pre\u003e\n\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_30.png\"\u003e\n\u003ch2\u003e변동성\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eNVDA 및 AMD 대 S\u0026#x26;P 500의 변동성 그래픽화\u003c/li\u003e\n\u003c/ul\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(historical_data[\u003cspan class=\"hljs-string\"\u003e'Volatility'\u003c/span\u003e].\u003cspan class=\"hljs-property\"\u003eiloc\u003c/span\u003e[-\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e])\n\u003cspan class=\"hljs-variable constant_\"\u003eNVDA\u003c/span\u003e        \u003cspan class=\"hljs-number\"\u003e0.0324\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eAMD\u003c/span\u003e         \u003cspan class=\"hljs-number\"\u003e0.0345\u003c/span\u003e\n\u003cspan class=\"hljs-title class_\"\u003eBenchmark\u003c/span\u003e   \u003cspan class=\"hljs-number\"\u003e0.0125\u003c/span\u003e\n\u003cspan class=\"hljs-title class_\"\u003eName\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e07\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e09\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003edtype\u003c/span\u003e: float64\n\nhistorical_data[\u003cspan class=\"hljs-string\"\u003e'Volatility'\u003c/span\u003e].\u003cspan class=\"hljs-property\"\u003eiloc\u003c/span\u003e[-\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e].\u003cspan class=\"hljs-property\"\u003eplot\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ebar\u003c/span\u003e(title=\u003cspan class=\"hljs-string\"\u003e'Volatility'\u003c/span\u003e)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_31.png\" alt=\"Image\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e저희 두 자산의 변동성이 벤치마크의 3배 정도 더 높다는 것을 알 수 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e손익계산서\u003c/h2\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003e2019년부터 2024년까지의 NVDA 및 AMD 손익 계산서를 비교해보세요 [9]\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eincome_statement를 출력하세요\n\n# 클립보드에 복사하세요 (\u003cspan class=\"hljs-variable constant_\"\u003eREADME\u003c/span\u003e에 데이터를 붙여넣기 위한 용도입니다)\npd.\u003cspan class=\"hljs-property\"\u003eio\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eclipboards\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eto_clipboard\u003c/span\u003e(\n    income_statement.\u003cspan class=\"hljs-property\"\u003eloc\u003c/span\u003e[\u003cspan class=\"hljs-string\"\u003e\"NVDA\"\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003ehead\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003eto_markdown\u003c/span\u003e(), excel=\u003cspan class=\"hljs-title class_\"\u003eFalse\u003c/span\u003e\n)\n\n# 막대 그래프 생성\nebitda_data = income_statement.\u003cspan class=\"hljs-property\"\u003eloc\u003c/span\u003e[:, \u003cspan class=\"hljs-string\"\u003e\"EBITDA\"\u003c/span\u003e, :].\u003cspan class=\"hljs-property\"\u003eT\u003c/span\u003e\ncolors = [\u003cspan class=\"hljs-string\"\u003e\"#007ACC\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"#FF6F61\"\u003c/span\u003e]\nax = ebitda_data.\u003cspan class=\"hljs-property\"\u003eplot\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ebar\u003c/span\u003e(figsize=(\u003cspan class=\"hljs-number\"\u003e15\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e), color=colors)\n\n# 막대 위에 데이터 라벨 추가 (백만으로 나누어 사용자 정의 포맷팅 (백만과 천 단위 구분))\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e p \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e ax.\u003cspan class=\"hljs-property\"\u003epatches\u003c/span\u003e:\n    ebitda_millions = p.\u003cspan class=\"hljs-title function_\"\u003eget_height\u003c/span\u003e() / \u003cspan class=\"hljs-number\"\u003e1_000_000_000\u003c/span\u003e\n    label = f\u003cspan class=\"hljs-string\"\u003e\"{ebitda_millions:,.2f} M\"\u003c/span\u003e\n    x = p.\u003cspan class=\"hljs-title function_\"\u003eget_x\u003c/span\u003e() + p.\u003cspan class=\"hljs-title function_\"\u003eget_width\u003c/span\u003e() / \u003cspan class=\"hljs-number\"\u003e2.0\u003c/span\u003e\n    y = p.\u003cspan class=\"hljs-title function_\"\u003eget_height\u003c/span\u003e()\n\n    # 라벨이 차트 상단과 너무 가까운지 확인\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e y \u0026#x3C; \u003cspan class=\"hljs-number\"\u003e0.2\u003c/span\u003e * ax.\u003cspan class=\"hljs-title function_\"\u003eget_ylim\u003c/span\u003e()[\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e]:\n        va = \u003cspan class=\"hljs-string\"\u003e\"bottom\"\u003c/span\u003e\n        xytext = (\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e)\n    \u003cspan class=\"hljs-attr\"\u003eelse\u003c/span\u003e:\n        va = \u003cspan class=\"hljs-string\"\u003e\"top\"\u003c/span\u003e\n        xytext = (\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, -\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e)\n\n    # 텍스트에 대한 스트로크 효과 생성\n    text = ax.\u003cspan class=\"hljs-title function_\"\u003eannotate\u003c/span\u003e(\n        label,\n        (x, y),\n        ha=\u003cspan class=\"hljs-string\"\u003e\"center\"\u003c/span\u003e,\n        va=va,\n        fontsize=\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e,\n        color=\u003cspan class=\"hljs-string\"\u003e\"black\"\u003c/span\u003e,\n        xytext=xytext,\n        textcoords=\u003cspan class=\"hljs-string\"\u003e\"offset points\"\u003c/span\u003e,\n    )\n    text.\u003cspan class=\"hljs-title function_\"\u003eset_path_effects\u003c/span\u003e([patheffects.\u003cspan class=\"hljs-title function_\"\u003ewithStroke\u003c/span\u003e(linewidth=\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, foreground=\u003cspan class=\"hljs-string\"\u003e\"white\"\u003c/span\u003e)])\n\n# 축 라벨 사용자 정의\nplt.\u003cspan class=\"hljs-title function_\"\u003exlabel\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e, fontsize=\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e)\nplt.\u003cspan class=\"hljs-title function_\"\u003eylabel\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e, fontsize=\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e)\n\n# x tick의 각도 조정\nplt.\u003cspan class=\"hljs-title function_\"\u003exticks\u003c/span\u003e(rotation=\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e)\n\n# 제목 설정\nplt.\u003cspan class=\"hljs-title function_\"\u003etitle\u003c/span\u003e(\n    \u003cspan class=\"hljs-string\"\u003e\"Earnings Before Interest, Taxes, Depreciation and Amortization (EBITDA) of NVDA \u0026#x26; AMD\"\u003c/span\u003e,\n    fontsize=\u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e,\n)\n\n# 명확성을 위해 수평 grid 추가\nplt.\u003cspan class=\"hljs-title function_\"\u003egrid\u003c/span\u003e(axis=\u003cspan class=\"hljs-string\"\u003e\"y\"\u003c/span\u003e, linestyle=\u003cspan class=\"hljs-string\"\u003e\"--\"\u003c/span\u003e, alpha=\u003cspan class=\"hljs-number\"\u003e0.7\u003c/span\u003e)\n\n# y축에 천 단위 구분 추가\nax.\u003cspan class=\"hljs-property\"\u003eyaxis\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eset_major_formatter\u003c/span\u003e(\n    mtick.\u003cspan class=\"hljs-title class_\"\u003eFuncFormatter\u003c/span\u003e(lambda x, \u003cspan class=\"hljs-attr\"\u003e_\u003c/span\u003e: f\u003cspan class=\"hljs-string\"\u003e\"{x / 1_000_000_000:,.0f} M\"\u003c/span\u003e)\n)\n\n# 그래프 출력\nplt.\u003cspan class=\"hljs-title function_\"\u003eshow\u003c/span\u003e()\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_32.png\" alt=\"차트1\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_33.png\" alt=\"차트2\"\u003e\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_34.png\" alt=\"Profitability Ratios\"\u003e\u003c/p\u003e\n\u003ch2\u003e수익성 비율\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eNVDA 및 AMD 수익성 비율 2019–2024 시각화 [9]\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title function_\"\u003edisplay\u003c/span\u003e(profitability_ratios)\n\n# 클립 보드로 복사 (이것은 \u003cspan class=\"hljs-variable constant_\"\u003eREADME\u003c/span\u003e에 데이터를 붙여넣기하기 위한 것입니다)\npd.\u003cspan class=\"hljs-property\"\u003eio\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eclipboards\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eto_clipboard\u003c/span\u003e(\n    profitability_ratios.\u003cspan class=\"hljs-property\"\u003eloc\u003c/span\u003e[\u003cspan class=\"hljs-string\"\u003e\"NVDA\"\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003ehead\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003eto_markdown\u003c/span\u003e(), excel=\u003cspan class=\"hljs-title class_\"\u003eFalse\u003c/span\u003e\n)\n\nratios_to_plot = [\n    \u003cspan class=\"hljs-string\"\u003e\"Return on Assets\"\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\"Return on Equity\"\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\"Return on Invested Capital\"\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\"Return on Tangible Assets\"\u003c/span\u003e,\n]\n\n# 그림 생성\nax = (\n    (profitability_ratios.\u003cspan class=\"hljs-title function_\"\u003edropna\u003c/span\u003e(axis=\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) * \u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e)\n    .\u003cspan class=\"hljs-property\"\u003eloc\u003c/span\u003e[\u003cspan class=\"hljs-string\"\u003e\"NVDA\"\u003c/span\u003e, ratios_to_plot, :]\n    .\u003cspan class=\"hljs-property\"\u003eT\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eplot\u003c/span\u003e(figsize=(\u003cspan class=\"hljs-number\"\u003e15\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e), title=\u003cspan class=\"hljs-string\"\u003e\"NVDA의 수익성 비율\"\u003c/span\u003e, lw=\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e)\n)\n\n# 라인 스타일과 색상 커스터마이징\nline_styles = [\u003cspan class=\"hljs-string\"\u003e\"-\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"--\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"-.\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\":\"\u003c/span\u003e]\nline_colors = [\u003cspan class=\"hljs-string\"\u003e\"blue\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"red\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"green\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"purple\"\u003c/span\u003e]\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e i, line \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eenumerate\u003c/span\u003e(ax.\u003cspan class=\"hljs-title function_\"\u003eget_lines\u003c/span\u003e()):\n    line.\u003cspan class=\"hljs-title function_\"\u003eset_linestyle\u003c/span\u003e(line_styles[i])\n    line.\u003cspan class=\"hljs-title function_\"\u003eset_color\u003c/span\u003e(line_colors[i])\n\n# 범례 커스터마이징\nax.\u003cspan class=\"hljs-title function_\"\u003elegend\u003c/span\u003e(ratios_to_plot)\n\n# 라벨 및 그리드 추가\nplt.\u003cspan class=\"hljs-title function_\"\u003exlabel\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"Year\"\u003c/span\u003e, fontsize=\u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e)\nplt.\u003cspan class=\"hljs-title function_\"\u003eylabel\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"Percentage (%)\"\u003c/span\u003e, fontsize=\u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e)\nplt.\u003cspan class=\"hljs-title function_\"\u003egrid\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eTrue\u003c/span\u003e, linestyle=\u003cspan class=\"hljs-string\"\u003e\"--\"\u003c/span\u003e, alpha=\u003cspan class=\"hljs-number\"\u003e0.7\u003c/span\u003e)\n\n# 제목 커스터마이징\nplt.\u003cspan class=\"hljs-title function_\"\u003etitle\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"NVDA의 수익성 비율\"\u003c/span\u003e)\n\n# 그림 표시\nplt.\u003cspan class=\"hljs-title function_\"\u003eshow\u003c/span\u003e()\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e-md\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_35.png\" alt=\"image\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_36.png\" alt=\"image\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eAMD 수익성 비율 그래픽 그리기\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# 클립 보드로 복사 (\u003cspan class=\"hljs-variable constant_\"\u003eREADME\u003c/span\u003e에 데이터를 붙여넣을 때 사용)\npd.\u003cspan class=\"hljs-property\"\u003eio\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eclipboards\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eto_clipboard\u003c/span\u003e(\n    profitability_ratios.\u003cspan class=\"hljs-property\"\u003eloc\u003c/span\u003e[\u003cspan class=\"hljs-string\"\u003e\"AMD\"\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003ehead\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003eto_markdown\u003c/span\u003e(), excel=\u003cspan class=\"hljs-title class_\"\u003eFalse\u003c/span\u003e\n)\n\nratios_to_plot = [\n    \u003cspan class=\"hljs-string\"\u003e\"Return on Assets\"\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\"Return on Equity\"\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\"Return on Invested Capital\"\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\"Return on Tangible Assets\"\u003c/span\u003e,\n]\n\n# 그림 생성\nax = (\n    (profitability_ratios.\u003cspan class=\"hljs-title function_\"\u003edropna\u003c/span\u003e(axis=\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) * \u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e)\n    .\u003cspan class=\"hljs-property\"\u003eloc\u003c/span\u003e[\u003cspan class=\"hljs-string\"\u003e\"AMD\"\u003c/span\u003e, ratios_to_plot, :]\n    .\u003cspan class=\"hljs-property\"\u003eT\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eplot\u003c/span\u003e(figsize=(\u003cspan class=\"hljs-number\"\u003e15\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e), title=\u003cspan class=\"hljs-string\"\u003e\"AMD의 수익성 비율\"\u003c/span\u003e, lw=\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e)\n)\n\n# 라인 스타일과 색상 사용자 정의\nline_styles = [\u003cspan class=\"hljs-string\"\u003e\"-\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"--\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"-.\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\":\"\u003c/span\u003e]\nline_colors = [\u003cspan class=\"hljs-string\"\u003e\"blue\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"red\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"green\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"purple\"\u003c/span\u003e]\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e i, line \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eenumerate\u003c/span\u003e(ax.\u003cspan class=\"hljs-title function_\"\u003eget_lines\u003c/span\u003e()):\n    line.\u003cspan class=\"hljs-title function_\"\u003eset_linestyle\u003c/span\u003e(line_styles[i])\n    line.\u003cspan class=\"hljs-title function_\"\u003eset_color\u003c/span\u003e(line_colors[i])\n\n# 범례 사용자 정의\nax.\u003cspan class=\"hljs-title function_\"\u003elegend\u003c/span\u003e(ratios_to_plot)\n\n# 레이블과 그리드 추가\nplt.\u003cspan class=\"hljs-title function_\"\u003exlabel\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"년도\"\u003c/span\u003e, fontsize=\u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e)\nplt.\u003cspan class=\"hljs-title function_\"\u003eylabel\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"백분율 (%)\"\u003c/span\u003e, fontsize=\u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e)\nplt.\u003cspan class=\"hljs-title function_\"\u003egrid\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eTrue\u003c/span\u003e, linestyle=\u003cspan class=\"hljs-string\"\u003e\"--\"\u003c/span\u003e, alpha=\u003cspan class=\"hljs-number\"\u003e0.7\u003c/span\u003e)\n\n# 제목 사용자 정의\nplt.\u003cspan class=\"hljs-title function_\"\u003etitle\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"AMD의 수익성 비율\"\u003c/span\u003e)\n\n# 그림 표시\nplt.\u003cspan class=\"hljs-title function_\"\u003eshow\u003c/span\u003e()\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_37.png\" alt=\"Image\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e2023년 NVDA 대 AMD 수익성 비율 검토\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(profitability_ratios[\u003cspan class=\"hljs-string\"\u003e'2023'\u003c/span\u003e])\n\n\u003cspan class=\"hljs-variable constant_\"\u003eAMD\u003c/span\u003e   매출 이익율                                     \u003cspan class=\"hljs-number\"\u003e0.4612\u003c/span\u003e\n      영업 이익율                                   \u003cspan class=\"hljs-number\"\u003e0.0177\u003c/span\u003e\n      순이익율                                      \u003cspan class=\"hljs-number\"\u003e0.0377\u003c/span\u003e\n      이자 상환 여유성 비율                           \u003cspan class=\"hljs-number\"\u003e37.283\u003c/span\u003e\n      세전 순이익 마진                              \u003cspan class=\"hljs-number\"\u003e0.0217\u003c/span\u003e\n      유효 세율                                   -\u003cspan class=\"hljs-number\"\u003e0.7033\u003c/span\u003e\n      자산 수익률                                   \u003cspan class=\"hljs-number\"\u003e0.0126\u003c/span\u003e\n      자본 수익률                                   \u003cspan class=\"hljs-number\"\u003e0.0154\u003c/span\u003e\n      투자 자본 이익률                             \u003cspan class=\"hljs-number\"\u003e0.0146\u003c/span\u003e\n      자본 운용 이익률                               \u003cspan class=\"hljs-number\"\u003e0.01\u003c/span\u003e\n      유형 자산 수익률                             \u003cspan class=\"hljs-number\"\u003e0.0083\u003c/span\u003e\n      소득 품질 비율                               \u003cspan class=\"hljs-number\"\u003e1.952\u003c/span\u003e\n      \u003cspan class=\"hljs-variable constant_\"\u003eEBT\u003c/span\u003e당 순이익                                \u003cspan class=\"hljs-number\"\u003e1.6811\u003c/span\u003e\n      영업현금흐름 대 영업 현금흐름 비율           \u003cspan class=\"hljs-number\"\u003e0.6725\u003c/span\u003e\n      \u003cspan class=\"hljs-variable constant_\"\u003eEBT\u003c/span\u003e 대 \u003cspan class=\"hljs-variable constant_\"\u003eEBIT\u003c/span\u003e 비율                           \u003cspan class=\"hljs-number\"\u003e0.8274\u003c/span\u003e\n      \u003cspan class=\"hljs-variable constant_\"\u003eEBIT\u003c/span\u003e 대 매출                               \u003cspan class=\"hljs-number\"\u003e0.0271\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eNVDA\u003c/span\u003e  매출 이익율                                    \u003cspan class=\"hljs-number\"\u003e0.5693\u003c/span\u003e\n      영업 이익율                                   \u003cspan class=\"hljs-number\"\u003e0.1566\u003c/span\u003e\n      순이익율                                      \u003cspan class=\"hljs-number\"\u003e0.1619\u003c/span\u003e\n      이자 상환 여유성 비율                        \u003cspan class=\"hljs-number\"\u003e22.0153\u003c/span\u003e\n      세전 순이익 마진                             \u003cspan class=\"hljs-number\"\u003e0.155\u003c/span\u003e\n      유효 세율                                  -\u003cspan class=\"hljs-number\"\u003e0.0447\u003c/span\u003e\n      자산 수익률                                   \u003cspan class=\"hljs-number\"\u003e0.1023\u003c/span\u003e\n      자본 수익률                                   \u003cspan class=\"hljs-number\"\u003e0.1793\u003c/span\u003e\n      투자 자본 이익률                            \u003cspan class=\"hljs-number\"\u003e0.1319\u003c/span\u003e\n      자본 운용 이익률                            \u003cspan class=\"hljs-number\"\u003e0.1283\u003c/span\u003e\n      유형 자산 수익률                            \u003cspan class=\"hljs-number\"\u003e0.0693\u003c/span\u003e\n      소득 품질 비율                              \u003cspan class=\"hljs-number\"\u003e1.2914\u003c/span\u003e\n      \u003cspan class=\"hljs-variable constant_\"\u003eEBT\u003c/span\u003e당 순이익                               \u003cspan class=\"hljs-number\"\u003e1.0447\u003c/span\u003e\n      영업현금흐름 대 영업 현금흐름 비율           \u003cspan class=\"hljs-number\"\u003e0.6751\u003c/span\u003e\n      \u003cspan class=\"hljs-variable constant_\"\u003eEBT\u003c/span\u003e 대 \u003cspan class=\"hljs-variable constant_\"\u003eEBIT\u003c/span\u003e 비율                           \u003cspan class=\"hljs-number\"\u003e0.941\u003c/span\u003e\n      \u003cspan class=\"hljs-variable constant_\"\u003eEBIT\u003c/span\u003e 대 매출                               \u003cspan class=\"hljs-number\"\u003e0.1647\u003c/span\u003e\n\u003cspan class=\"hljs-title class_\"\u003eName\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e2023\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003edtype\u003c/span\u003e: float64\n\nplt.\u003cspan class=\"hljs-title function_\"\u003efigure\u003c/span\u003e(figsize=(\u003cspan class=\"hljs-number\"\u003e14\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e8\u003c/span\u003e))\nprof=profitability_ratios[\u003cspan class=\"hljs-string\"\u003e'2023'\u003c/span\u003e]\ncols = [\u003cspan class=\"hljs-string\"\u003e'NVDA'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'AMD'\u003c/span\u003e]\nprof[cols].\u003cspan class=\"hljs-title function_\"\u003eplot\u003c/span\u003e(kind=\u003cspan class=\"hljs-string\"\u003e'bar'\u003c/span\u003e)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_38.png\" alt=\"Image\"\u003e\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003e2023년 NVDA 대 AMD 수익성 비율 확대\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eplt.\u003cspan class=\"hljs-title function_\"\u003efigure\u003c/span\u003e(figsize=(\u003cspan class=\"hljs-number\"\u003e14\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e8\u003c/span\u003e))\nprof = profitability_ratios[\u003cspan class=\"hljs-string\"\u003e'2023'\u003c/span\u003e]\ncols = [\u003cspan class=\"hljs-string\"\u003e'NVDA'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'AMD'\u003c/span\u003e]\nprof[cols].\u003cspan class=\"hljs-title function_\"\u003eplot\u003c/span\u003e(kind=\u003cspan class=\"hljs-string\"\u003e'bar'\u003c/span\u003e)\nplt.\u003cspan class=\"hljs-title function_\"\u003eylim\u003c/span\u003e(-\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e2.5\u003c/span\u003e)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_39.png\" alt=\"Profitability Ratios\"\u003e\u003c/p\u003e\n\u003ch2\u003eAMD 대 NVDA 그리스 민감도\u003c/h2\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003eAMD에 대한 그리스 감수치 분석 중 [9]\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e matplotlib.\u003cspan class=\"hljs-property\"\u003epyplot\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e plt\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e matplotlib \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e cm\n\nfig, ax = plt.\u003cspan class=\"hljs-title function_\"\u003esubplots\u003c/span\u003e(figsize=(\u003cspan class=\"hljs-number\"\u003e15\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e), ncols=\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, nrows=\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e)\n\ndelta_over_time_df = pd.\u003cspan class=\"hljs-title class_\"\u003eDataFrame\u003c/span\u003e()\ndates = all_greeks.\u003cspan class=\"hljs-property\"\u003ecolumns\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eget_level_values\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e)\n\n# \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e개월 ... 처리\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e i, time \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eenumerate\u003c/span\u003e(\u003cspan class=\"hljs-title function_\"\u003erange\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e30\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e210\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e30\u003c/span\u003e)):\n\n    \u003cspan class=\"hljs-attr\"\u003etry\u003c/span\u003e:\n        period_column = dates[time]\n    except \u003cspan class=\"hljs-title class_\"\u003eIndexError\u003c/span\u003e:\n        period_column = dates[-\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e]\n\n    color = cm.\u003cspan class=\"hljs-title function_\"\u003eviridis\u003c/span\u003e(i / \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e)  # 색상 변화에 viridis colormap 사용\n\n    # \u003cspan class=\"hljs-title class_\"\u003eDelta\u003c/span\u003e plot\n    ax[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003eplot\u003c/span\u003e(all_greeks.\u003cspan class=\"hljs-property\"\u003eloc\u003c/span\u003e[\u003cspan class=\"hljs-string\"\u003e\"AMD\"\u003c/span\u003e, (period_column, \u003cspan class=\"hljs-string\"\u003e\"Delta\"\u003c/span\u003e)], color=color)\n\n    # \u003cspan class=\"hljs-title class_\"\u003eGamma\u003c/span\u003e plot\n    ax[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003eplot\u003c/span\u003e(all_greeks.\u003cspan class=\"hljs-property\"\u003eloc\u003c/span\u003e[\u003cspan class=\"hljs-string\"\u003e\"AMD\"\u003c/span\u003e, (period_column, \u003cspan class=\"hljs-string\"\u003e\"Gamma\"\u003c/span\u003e)], color=color)\n\n    # \u003cspan class=\"hljs-title class_\"\u003eTheta\u003c/span\u003e plot\n    ax[\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003eplot\u003c/span\u003e(all_greeks.\u003cspan class=\"hljs-property\"\u003eloc\u003c/span\u003e[\u003cspan class=\"hljs-string\"\u003e\"AMD\"\u003c/span\u003e, (period_column, \u003cspan class=\"hljs-string\"\u003e\"Theta\"\u003c/span\u003e)], color=color)\n\n    # \u003cspan class=\"hljs-title class_\"\u003eVega\u003c/span\u003e plot\n    ax[\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003eplot\u003c/span\u003e(all_greeks.\u003cspan class=\"hljs-property\"\u003eloc\u003c/span\u003e[\u003cspan class=\"hljs-string\"\u003e\"AMD\"\u003c/span\u003e, (period_column, \u003cspan class=\"hljs-string\"\u003e\"Vega\"\u003c/span\u003e)], color=color)\n\n    delta_over_time_df = pd.\u003cspan class=\"hljs-title function_\"\u003econcat\u003c/span\u003e(\n        [delta_over_time_df, all_greeks.\u003cspan class=\"hljs-property\"\u003eloc\u003c/span\u003e[\u003cspan class=\"hljs-string\"\u003e\"AMD\"\u003c/span\u003e, (period_column, \u003cspan class=\"hljs-string\"\u003e\"Delta\"\u003c/span\u003e)]], axis=\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\n    )\n\ndate_labels = [\n    \u003cspan class=\"hljs-string\"\u003e\"1 달\"\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\"2 달\"\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\"3 달\"\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\"4 달\"\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\"5 달\"\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\"6 달\"\u003c/span\u003e,\n]\n\ndelta_over_time_df.\u003cspan class=\"hljs-property\"\u003ecolumns\u003c/span\u003e = date_labels\n\n# \u003cspan class=\"hljs-title class_\"\u003eDataFrame\u003c/span\u003e 표시\n\u003cspan class=\"hljs-title function_\"\u003edisplay\u003c/span\u003e(delta_over_time_df.\u003cspan class=\"hljs-property\"\u003eiloc\u003c/span\u003e[\u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e])\n\n# 클립보드로 복사 (\u003cspan class=\"hljs-variable constant_\"\u003eREADME\u003c/span\u003e에 데이터를 붙여넣으려면)\npd.\u003cspan class=\"hljs-property\"\u003eio\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eclipboards\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eto_clipboard\u003c/span\u003e(delta_over_time_df.\u003cspan class=\"hljs-property\"\u003eiloc\u003c/span\u003e[\u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003eto_markdown\u003c/span\u003e(), excel=\u003cspan class=\"hljs-title class_\"\u003eFalse\u003c/span\u003e)\n\n# 타이틀 및 레이블\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e number1, number2 \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e [(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e), (\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e), (\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e), (\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)]:\n    ax[number1, number2].\u003cspan class=\"hljs-title function_\"\u003eset_xlim\u003c/span\u003e(\n        [all_greeks.\u003cspan class=\"hljs-property\"\u003eloc\u003c/span\u003e[\u003cspan class=\"hljs-string\"\u003e\"AMD\"\u003c/span\u003e].\u003cspan class=\"hljs-property\"\u003eindex\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003emin\u003c/span\u003e(), all_greeks.\u003cspan class=\"hljs-property\"\u003eloc\u003c/span\u003e[\u003cspan class=\"hljs-string\"\u003e\"AMD\"\u003c/span\u003e].\u003cspan class=\"hljs-property\"\u003eindex\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003emax\u003c/span\u003e()]\n    )\n    ax[number1, number2].\u003cspan class=\"hljs-title function_\"\u003egrid\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eTrue\u003c/span\u003e, linestyle=\u003cspan class=\"hljs-string\"\u003e\"--\"\u003c/span\u003e, alpha=\u003cspan class=\"hljs-number\"\u003e0.7\u003c/span\u003e)\n    ax[number1, number2].\u003cspan class=\"hljs-title function_\"\u003eset_xlabel\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"행사가\"\u003c/span\u003e)\n    ax[number1, number2].\u003cspan class=\"hljs-title function_\"\u003eset_facecolor\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"#F5F5F5\"\u003c/span\u003e)\n\nax[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003eset_title\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"Delta\"\u003c/span\u003e)\nax[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003eset_title\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"Gamma\"\u003c/span\u003e)\nax[\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003eset_title\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"Theta\"\u003c/span\u003e)\nax[\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003eset_title\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"Vega\"\u003c/span\u003e)\n\n# 레이아웃 조정\nfig.\u003cspan class=\"hljs-title function_\"\u003elegend\u003c/span\u003e(\n    date_labels,\n    loc=\u003cspan class=\"hljs-string\"\u003e\"upper center\"\u003c/span\u003e,\n    ncol=\u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e,\n    bbox_to_anchor=(\u003cspan class=\"hljs-number\"\u003e0.5\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e),\n    frameon=\u003cspan class=\"hljs-title class_\"\u003eFalse\u003c/span\u003e,\n)\nfig.\u003cspan class=\"hljs-title function_\"\u003esuptitle\u003c/span\u003e(\n    \u003cspan class=\"hljs-string\"\u003e\"AMD에 대한 그리스 감수치 분석\"\u003c/span\u003e, fontsize=\u003cspan class=\"hljs-number\"\u003e30\u003c/span\u003e, x=\u003cspan class=\"hljs-number\"\u003e0.5\u003c/span\u003e, y=\u003cspan class=\"hljs-number\"\u003e0.98\u003c/span\u003e, fontfamily=\u003cspan class=\"hljs-string\"\u003e\"cursive\"\u003c/span\u003e\n)\n\nfig.\u003cspan class=\"hljs-title function_\"\u003etight_layout\u003c/span\u003e()\n\n# 플롯 표시\nplt.\u003cspan class=\"hljs-title function_\"\u003eshow\u003c/span\u003e()\n\n    \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e 달 \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e 달 \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e 달 \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e 달 \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e 달 \u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e 달\n\u003cspan class=\"hljs-number\"\u003e165\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.872\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.8067\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.7692\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.7398\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.7236\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.7113\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e170\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.7487\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.698\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.6728\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.6544\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.6449\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.638\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e175\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.5863\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.5721\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.5664\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.5631\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.562\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.5615\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e180\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.4124\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.442\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.458\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.471\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.4786\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.4848\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e185\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.2582\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.3212\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.3555\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.3828\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.3985\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.4108\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_40.png\"\u003e\n\u003cul\u003e\n\u003cli\u003eNVDA에 대한 그리스 감수치 분석 중 [9]\u003c/li\u003e\n\u003c/ul\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e matplotlib.\u003cspan class=\"hljs-property\"\u003epyplot\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e plt\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e matplotlib \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e cm\n\nfig, ax = plt.\u003cspan class=\"hljs-title function_\"\u003esubplots\u003c/span\u003e(figsize=(\u003cspan class=\"hljs-number\"\u003e15\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e), ncols=\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, nrows=\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e)\n\ndelta_over_time_df = pd.\u003cspan class=\"hljs-title class_\"\u003eDataFrame\u003c/span\u003e()\ndates = all_greeks.\u003cspan class=\"hljs-property\"\u003ecolumns\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eget_level_values\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e)\n\n# \u003cspan class=\"hljs-title class_\"\u003eLoop\u003c/span\u003e through different times\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e i, time \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eenumerate\u003c/span\u003e(\u003cspan class=\"hljs-title function_\"\u003erange\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e30\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e210\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e30\u003c/span\u003e)):\n\n    \u003cspan class=\"hljs-attr\"\u003etry\u003c/span\u003e:\n        period_column = dates[time]\n    except \u003cspan class=\"hljs-title class_\"\u003eIndexError\u003c/span\u003e:\n        period_column = dates[-\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e]\n\n    color = cm.\u003cspan class=\"hljs-title function_\"\u003eviridis\u003c/span\u003e(i / \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e)  # \u003cspan class=\"hljs-title class_\"\u003eUsing\u003c/span\u003e viridis colormap \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e color variation\n\n    # \u003cspan class=\"hljs-title class_\"\u003eDelta\u003c/span\u003e plot\n    ax[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003eplot\u003c/span\u003e(all_greeks.\u003cspan class=\"hljs-property\"\u003eloc\u003c/span\u003e[\u003cspan class=\"hljs-string\"\u003e\"NVDA\"\u003c/span\u003e, (period_column, \u003cspan class=\"hljs-string\"\u003e\"Delta\"\u003c/span\u003e)], color=color)\n\n    # \u003cspan class=\"hljs-title class_\"\u003eGamma\u003c/span\u003e plot\n    ax[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003eplot\u003c/span\u003e(all_greeks.\u003cspan class=\"hljs-property\"\u003eloc\u003c/span\u003e[\u003cspan class=\"hljs-string\"\u003e\"NVDA\"\u003c/span\u003e, (period_column, \u003cspan class=\"hljs-string\"\u003e\"Gamma\"\u003c/span\u003e)], color=color)\n\n    # \u003cspan class=\"hljs-title class_\"\u003eTheta\u003c/span\u003e plot\n    ax[\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003eplot\u003c/span\u003e(all_greeks.\u003cspan class=\"hljs-property\"\u003eloc\u003c/span\u003e[\u003cspan class=\"hljs-string\"\u003e\"NVDA\"\u003c/span\u003e, (period_column, \u003cspan class=\"hljs-string\"\u003e\"Theta\"\u003c/span\u003e)], color=color)\n\n    # \u003cspan class=\"hljs-title class_\"\u003eVega\u003c/span\u003e plot\n    ax[\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003eplot\u003c/span\u003e(all_greeks.\u003cspan class=\"hljs-property\"\u003eloc\u003c/span\u003e[\u003cspan class=\"hljs-string\"\u003e\"NVDA\"\u003c/span\u003e, (period_column, \u003cspan class=\"hljs-string\"\u003e\"Vega\"\u003c/span\u003e)], color=color)\n\n    delta_over_time_df = pd.\u003cspan class=\"hljs-title function_\"\u003econcat\u003c/span\u003e(\n        [delta_over_time_df, all_greeks.\u003cspan class=\"hljs-property\"\u003eloc\u003c/span\u003e[\u003cspan class=\"hljs-string\"\u003e\"NVDA\"\u003c/span\u003e, (period_column, \u003cspan class=\"hljs-string\"\u003e\"Delta\"\u003c/span\u003e)]], axis=\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\n    )\n\ndate_labels = [\n    \u003cspan class=\"hljs-string\"\u003e\"1 Month\"\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\"2 Months\"\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\"3 Months\"\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\"4 Months\"\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\"5 Months\"\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\"6 Months\"\u003c/span\u003e,\n]\n\ndelta_over_time_df.\u003cspan class=\"hljs-property\"\u003ecolumns\u003c/span\u003e = date_labels\n\n# \u003cspan class=\"hljs-title class_\"\u003eShow\u003c/span\u003e the \u003cspan class=\"hljs-title class_\"\u003eDataFrame\u003c/span\u003e\n\u003cspan class=\"hljs-title function_\"\u003edisplay\u003c/span\u003e(delta_over_time_df.\u003cspan class=\"hljs-property\"\u003eiloc\u003c/span\u003e[\u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e])\n\n# \u003cspan class=\"hljs-title class_\"\u003eCopy\u003c/span\u003e to clipboard (\u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e is just to paste the data \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e the \u003cspan class=\"hljs-variable constant_\"\u003eREADME\u003c/span\u003e)\npd.\u003cspan class=\"hljs-property\"\u003eio\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eclipboards\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eto_clipboard\u003c/span\u003e(delta_over_time_df.\u003cspan class=\"hljs-property\"\u003eiloc\u003c/span\u003e[\u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003eto_markdown\u003c/span\u003e(), excel=\u003cspan class=\"hljs-title class_\"\u003eFalse\u003c/span\u003e)\n\n# \u003cspan class=\"hljs-title class_\"\u003eTitles\u003c/span\u003e and labels\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e number1, number2 \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e [(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e), (\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e), (\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e), (\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)]:\n    ax[number1, number2].\u003cspan class=\"hljs-title function_\"\u003eset_xlim\u003c/span\u003e(\n        [all_greeks.\u003cspan class=\"hljs-property\"\u003eloc\u003c/span\u003e[\u003cspan class=\"hljs-string\"\u003e\"NVDA\"\u003c/span\u003e].\u003cspan class=\"hljs-property\"\u003eindex\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003emin\u003c/span\u003e(), all_greeks.\u003cspan class=\"hljs-property\"\u003eloc\u003c/span\u003e[\u003cspan class=\"hljs-string\"\u003e\"NVDA\"\u003c/span\u003e].\u003cspan class=\"hljs-property\"\u003eindex\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003emax\u003c/span\u003e()]\n    )\n    ax[number1, number2].\u003cspan class=\"hljs-title function_\"\u003egrid\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eTrue\u003c/span\u003e, linestyle=\u003cspan class=\"hljs-string\"\u003e\"--\"\u003c/span\u003e, alpha=\u003cspan class=\"hljs-number\"\u003e0.7\u003c/span\u003e)\n    ax[number1, number2].\u003cspan class=\"hljs-title function_\"\u003eset_xlabel\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"Strike Price\"\u003c/span\u003e)\n    ax[number1, number2].\u003cspan class=\"hljs-title function_\"\u003eset_facecolor\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"#F5F5F5\"\u003c/span\u003e)\n\nax[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003eset_title\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"Delta\"\u003c/span\u003e)\nax[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003eset_title\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"Gamma\"\u003c/span\u003e)\nax[\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003eset_title\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"Theta\"\u003c/span\u003e)\nax[\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003eset_title\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"Vega\"\u003c/span\u003e)\n\n# \u003cspan class=\"hljs-title class_\"\u003eAdjust\u003c/span\u003e layout\nfig.\u003cspan class=\"hljs-title function_\"\u003elegend\u003c/span\u003e(\n    date_labels,\n    loc=\u003cspan class=\"hljs-string\"\u003e\"upper center\"\u003c/span\u003e,\n    ncol=\u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e,\n    bbox_to_anchor=(\u003cspan class=\"hljs-number\"\u003e0.5\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e),\n    frameon=\u003cspan class=\"hljs-title class_\"\u003eFalse\u003c/span\u003e,\n)\nfig.\u003cspan class=\"hljs-title function_\"\u003esuptitle\u003c/span\u003e(\n    \u003cspan class=\"hljs-string\"\u003e\"Greek Sensitivities for NVDA\"\u003c/span\u003e, fontsize=\u003cspan class=\"hljs-number\"\u003e30\u003c/span\u003e, x=\u003cspan class=\"hljs-number\"\u003e0.5\u003c/span\u003e, y=\u003cspan class=\"hljs-number\"\u003e0.98\u003c/span\u003e, fontfamily=\u003cspan class=\"hljs-string\"\u003e\"cursive\"\u003c/span\u003e\n)\n\nfig.\u003cspan class=\"hljs-title function_\"\u003etight_layout\u003c/span\u003e()\n\n# \u003cspan class=\"hljs-title class_\"\u003eShow\u003c/span\u003e the plot\nplt.\u003cspan class=\"hljs-title function_\"\u003eshow\u003c/span\u003e()\n\n    \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eMonth\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eMonths\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eMonths\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eMonths\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eMonths\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eMonths\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e135\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.3367\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.3835\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.4084\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.4282\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.4395\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.4484\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e140\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.1525\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.2277\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.2722\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.3087\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.3298\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.3466\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e145\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.0539\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.1188\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.1666\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.2099\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.2363\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.2578\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e150\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.0149\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.0547\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.0939\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.1349\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.1619\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.1848\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e155\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.0033\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.0224\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.049\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.0822\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.1063\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.128\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_41.png\"\u003e\n\u003cp\u003e해석: 옵션 그리스는 옵션 가격이 변동성이나 기초 자산의 가격과 같은 기본 결정 요소에 대한 민감성을 나타내는 재정적 측정치입니다. 그리스는 옵션 포트폴리오를 분석하고 옵션 또는 옵션 포트폴리오의 민감성 분석에 활용됩니다. 이러한 측정치는 많은 투자자에 의해 옵션 거래에 대한 정보를 얻기 위한 필수적인 요소로 간주됩니다.\u003c/p\u003e\n\u003cp\u003eDelta: 기초 자산의 가격이 $1 증가하면 옵션의 가격이 Delta 금액만큼 변동합니다.\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e감마는 델타의 변화가 기초 자산 가격 변동과 어떻게 관련되는지를 측정하는 지표입니다. 기초 자산 가격이 $1 증가하면, 옵션의 델타는 감마만큼 변화합니다.\u003c/p\u003e\n\u003cp\u003e베가는 옵션의 가격이 기초 자산의 변동성에 얼마나 민감한지를 나타내는 옵션 그리스 중 하나입니다. 기초 자산의 변동성이 1% 증가하면, 옵션 가격은 베가만큼 변화합니다.\u003c/p\u003e\n\u003cp\u003e세타는 옵션 가격이 옵션의 만기까지 남은 시간에 대해 얼마나 민감한지를 나타내는 지표입니다. 옵션의 만기까지 남은 기간이 하루 줄어들면, 옵션 가격은 세타만큼 변화합니다. 세타 옵션 그리스는 시간 가치 손실이라고도 불립니다.\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003eATM(At the money)은 옵션의 행사 가격이 기초 자산의 현재 시장 가격과 동일한 상황을 말합니다. ATM 콜 옵션은 델타가 0.50입니다.\u003c/li\u003e\n\u003cli\u003eNVDA/AMD의 ATM 행사 가격 USD는 130/175입니다.\u003c/li\u003e\n\u003cli\u003e세타는 일반적으로 롱 포지션에 대해 음수로 표현되며, 옵션 가치의 얼마나 많은 부분이 손실되고 있는지를 나타냅니다.\u003c/li\u003e\n\u003cli\u003e저희의 그래프는 NVDA/AMD의 ATM 세타가 약 -0.3/-0.45임을 보여줍니다.\u003c/li\u003e\n\u003cli\u003e델타가 . 40-. 60 범위에 있거나 일반적으로 옵션이 ATM일 때 감마가 가장 높습니다. 따라서 만약 옵션의 델타가 +40이고 감마가 10이라면 기초 자산 가격이 1달러 오르면 그 옵션의 델타가 +50이 됩니다.\u003c/li\u003e\n\u003cli\u003e저희 예시에서 NVDA/AMD의 ATM 감마는 0.05/0.035입니다.\u003c/li\u003e\n\u003cli\u003e옵션 베가는 기본 주가 변동성에 대한 옵션의 민감도를 보고하는 것입니다. 더 높은 베가 값은 옵션 가격이 변동성 변화에 민감하다는 것을 나타내고, 더 낮은 베가는 옵션 가격이 변동성 변화에 민감하지 않다는 것을 나타냅니다.\u003c/li\u003e\n\u003cli\u003e우리의 다이어그램은 NVDA/AMD의 ATM 베가가 0.14/0.18임을 나타냅니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eNVDA \u0026#x26; AMD VaR vs Benchmark\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eNVDA \u0026#x26; AMD Value-at-Risk (VaR) vs Benchmark을 플로팅합니다. [9]\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003ctable\u003e\u003cthead\u003e\u003ctr\u003e\u003cth\u003e\u003c/th\u003e\u003cth\u003eNVDA\u003c/th\u003e\u003cth\u003eAMD\u003c/th\u003e\u003cth\u003eBenchmark\u003c/th\u003e\u003c/tr\u003e\u003c/thead\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd\u003e2017-01-02/2017-01-08\u003c/td\u003e\u003ctd\u003e-0.0198\u003c/td\u003e\u003ctd\u003e-0.0141\u003c/td\u003e\u003ctd\u003e-0.0007\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e2017-01-09/2017-01-15\u003c/td\u003e\u003ctd\u003e-0.0146\u003c/td\u003e\u003ctd\u003e-0.0356\u003c/td\u003e\u003ctd\u003e-0.0031\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e2017-01-16/2017-01-22\u003c/td\u003e\u003ctd\u003e-0.0217\u003c/td\u003e\u003ctd\u003e-0.0627\u003c/td\u003e\u003ctd\u003e-0.0037\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e2017-01-23/2017-01-29\u003c/td\u003e\u003ctd\u003eNaN\u003c/td\u003e\u003ctd\u003e-0.004\u003c/td\u003e\u003ctd\u003e-0.0024\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e2017-01-30/2017-02-05\u003c/td\u003e\u003ctd\u003e-0.0131\u003c/td\u003e\u003ctd\u003e-0.0192\u003c/td\u003e\u003ctd\u003e-0.005\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e...\u003c/td\u003e\u003ctd\u003e...\u003c/td\u003e\u003ctd\u003e...\u003c/td\u003e\u003ctd\u003e...\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e2024-06-03/2024-06-09\u003c/td\u003e\u003ctd\u003e-0.0096\u003c/td\u003e\u003ctd\u003e-0.0215\u003c/td\u003e\u003ctd\u003e-0.001\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e2024-06-10/2024-06-16\u003c/td\u003e\u003ctd\u003e-0.0042\u003c/td\u003e\u003ctd\u003e-0.0376\u003c/td\u003e\u003ctd\u003eNaN\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e2024-06-17/2024-06-23\u003c/td\u003e\u003ctd\u003e-0.0349\u003c/td\u003e\u003ctd\u003e-0.0214\u003c/td\u003e\u003ctd\u003e-0.0025\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e2024-06-24/2024-06-30\u003c/td\u003e\u003ctd\u003e-0.0573\u003c/td\u003e\u003ctd\u003e-0.0147\u003c/td\u003e\u003ctd\u003e-0.0038\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e2024-07-01/2024-07-07\u003c/td\u003e\u003ctd\u003e-0.0079\u003c/td\u003e\u003ctd\u003e-0.0255\u003c/td\u003e\u003ctd\u003eNaN\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_42.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cp\u003e2024-07 추론: NVDA, AMD 및 S\u0026#x26;P 500의 VaR은 각각 약 5%, 3% 및 1%입니다.\u003c/p\u003e\n\u003ch2\u003eNVDA 및 AMD의 Fama-French 요인과의 상관 관계\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e투자자들은 위험을 양적화하고 자본에 대한 예상 수익을 추정하는 데 사용되는 금융 모델을 찾고 있습니다. Fama French 5요인 모델은 가장 고전적인 모델 중 하나입니다(Fama 및 French, 2015).\u003c/li\u003e\n\u003cli\u003eNVDA와 AMD의 Fama-French 요인과의 상관 관계 탐색\u003c/li\u003e\n\u003c/ul\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e화면에 요소 대상 상호 상관 관계를 표시합니다.\n\n# 클립 보드에 복사하기 (\u003cspan class=\"hljs-variable constant_\"\u003eREADME\u003c/span\u003e에 데이터를 붙여넣기하려는 목적)\npd.\u003cspan class=\"hljs-property\"\u003eio\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eclipboards\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eto_clipboard\u003c/span\u003e(\n    factor_asset_correlations.\u003cspan class=\"hljs-title function_\"\u003exs\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"NVDA\"\u003c/span\u003e, axis=\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, level=\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e)\n    .\u003cspan class=\"hljs-property\"\u003eiloc\u003c/span\u003e[:-\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e]\n    .\u003cspan class=\"hljs-title function_\"\u003etail\u003c/span\u003e()\n    .\u003cspan class=\"hljs-title function_\"\u003eto_markdown\u003c/span\u003e(),\n    excel=\u003cspan class=\"hljs-title class_\"\u003eFalse\u003c/span\u003e,\n)\n\n# factor_asset_correlations \u003cspan class=\"hljs-title class_\"\u003eDataFrame\u003c/span\u003e을 정의하세요 (\u003cspan class=\"hljs-title class_\"\u003eYourDataFrame\u003c/span\u003e을 대체하세요)\ncorrelations_aapl = factor_asset_correlations.\u003cspan class=\"hljs-title function_\"\u003exs\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"NVDA\"\u003c/span\u003e, axis=\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, level=\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e)\ncorrelations_msft = factor_asset_correlations.\u003cspan class=\"hljs-title function_\"\u003exs\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"AMD\"\u003c/span\u003e, axis=\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, level=\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e)\n\n# x축을 공유하며 서브플롯을 만들고 스타일을 사용자 정의하세요\nfig, (ax1, ax2) = plt.\u003cspan class=\"hljs-title function_\"\u003esubplots\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, figsize=(\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e8\u003c/span\u003e), sharex=\u003cspan class=\"hljs-title class_\"\u003eTrue\u003c/span\u003e)\n\n# 선에 대한 색상 팔렛트 설정\ncolors = [\u003cspan class=\"hljs-string\"\u003e\"#007ACC\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"#FF6F61\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"#4CAF50\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"#FFD700\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"#FF6347\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"#6A5ACD\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"#FF8C00\"\u003c/span\u003e]\n\n# \u003cspan class=\"hljs-variable constant_\"\u003eAAPL\u003c/span\u003e의 상호 상관 관계 그래프\ncorrelations_aapl.\u003cspan class=\"hljs-title function_\"\u003eplot\u003c/span\u003e(\n    ax=ax1, title=\u003cspan class=\"hljs-string\"\u003e\"NVDA의 Fama-French Factors와의 상관 관계\"\u003c/span\u003e, color=colors\n)\nax1.\u003cspan class=\"hljs-title function_\"\u003eset_ylabel\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"상관 관계\"\u003c/span\u003e)\nax1.\u003cspan class=\"hljs-title function_\"\u003elegend\u003c/span\u003e(loc=\u003cspan class=\"hljs-string\"\u003e\"upper right\"\u003c/span\u003e, frameon=\u003cspan class=\"hljs-title class_\"\u003eFalse\u003c/span\u003e)\n\n# \u003cspan class=\"hljs-variable constant_\"\u003eMSFT\u003c/span\u003e의 상호 상관 관계 그래프\ncorrelations_msft.\u003cspan class=\"hljs-title function_\"\u003eplot\u003c/span\u003e(\n    ax=ax2, title=\u003cspan class=\"hljs-string\"\u003e\"AMD의 Fama-French Factors와의 상관 관계\"\u003c/span\u003e, color=colors\n)\nax2.\u003cspan class=\"hljs-title function_\"\u003eset_xlabel\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"날짜\"\u003c/span\u003e)\nax2.\u003cspan class=\"hljs-title function_\"\u003eset_ylabel\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"상관 관계\"\u003c/span\u003e)\nax2.\u003cspan class=\"hljs-title function_\"\u003elegend\u003c/span\u003e(loc=\u003cspan class=\"hljs-string\"\u003e\"upper right\"\u003c/span\u003e, frameon=\u003cspan class=\"hljs-title class_\"\u003eFalse\u003c/span\u003e)\n\n# 명확한 그리드 선을 추가하세요\nax1.\u003cspan class=\"hljs-title function_\"\u003egrid\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eTrue\u003c/span\u003e, linestyle=\u003cspan class=\"hljs-string\"\u003e\"--\"\u003c/span\u003e, alpha=\u003cspan class=\"hljs-number\"\u003e0.5\u003c/span\u003e)\nax2.\u003cspan class=\"hljs-title function_\"\u003egrid\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eTrue\u003c/span\u003e, linestyle=\u003cspan class=\"hljs-string\"\u003e\"--\"\u003c/span\u003e, alpha=\u003cspan class=\"hljs-number\"\u003e0.5\u003c/span\u003e)\n\n# 범례 및 레이블을 사용자 정의하세요\nax1.\u003cspan class=\"hljs-title function_\"\u003elegend\u003c/span\u003e(loc=\u003cspan class=\"hljs-string\"\u003e\"upper right\"\u003c/span\u003e, frameon=\u003cspan class=\"hljs-title class_\"\u003eFalse\u003c/span\u003e)\nax2.\u003cspan class=\"hljs-title function_\"\u003elegend\u003c/span\u003e(loc=\u003cspan class=\"hljs-string\"\u003e\"upper right\"\u003c/span\u003e, frameon=\u003cspan class=\"hljs-title class_\"\u003eFalse\u003c/span\u003e)\n\n# 서브플롯의 배경색을 설정하세요\nax1.\u003cspan class=\"hljs-title function_\"\u003eset_facecolor\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"#F9F9F9\"\u003c/span\u003e)\nax2.\u003cspan class=\"hljs-title function_\"\u003eset_facecolor\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"#F9F9F9\"\u003c/span\u003e)\n\n# 서브플롯의 위쪽과 오른쪽 테두리를 제거하세요\nax1.\u003cspan class=\"hljs-property\"\u003espines\u003c/span\u003e[[\u003cspan class=\"hljs-string\"\u003e\"top\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"right\"\u003c/span\u003e]].\u003cspan class=\"hljs-title function_\"\u003eset_visible\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eFalse\u003c/span\u003e)\nax2.\u003cspan class=\"hljs-property\"\u003espines\u003c/span\u003e[[\u003cspan class=\"hljs-string\"\u003e\"top\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"right\"\u003c/span\u003e]].\u003cspan class=\"hljs-title function_\"\u003eset_visible\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eFalse\u003c/span\u003e)\n\n# 간격을 최적화하기 위해 tight 레이아웃 설정\nplt.\u003cspan class=\"hljs-title function_\"\u003etight_layout\u003c/span\u003e()\n\n# 그래프 보기\nplt.\u003cspan class=\"hljs-title function_\"\u003eshow\u003c/span\u003e()\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003eMKT은 시장의 초과수익입니다. 이것은 가치가 가중치가 부여된 시장 포트폴리오의 수익률입니다.\u003c/li\u003e\n\u003cli\u003eSMB는 소형 주식의 다양한 포트폴리오의 수익률에서 대형 주식의 다양한 포트폴리오의 수익률을 뺀 값입니다.\u003c/li\u003e\n\u003cli\u003eHML은 고 Book-to-Market 비율을 가진 주식의 다양한 포트폴리오와 저 Book-to-Market 비율을 가진 주식의 다양한 포트폴리오 간의 차이입니다.\u003c/li\u003e\n\u003cli\u003eRMW는 강한(높고 안정적인) 수익성을 가진 주식의 다양한 포트폴리오와 약한(낮은) 수익성을 가진 주식의 다양한 포트폴리오 간의 차이입니다.\u003c/li\u003e\n\u003cli\u003eCMA는 저 및 고 투자 기업의 다양한 포트폴리오 간의 차이로 정의됩니다. 여기서 저/고 투자는 재투자 비율이 낮음/높음을 의미합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e추론 2024:\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eHML(NVDA)`HML(AMD)\u003c/li\u003e\n\u003cli\u003e만약 가치 주식이 성장 주식을 능가할 것이라고 믿는다면, 포트폴리오를 HML 요인이 높은 자산 쪽으로 기울이는 것이 좋습니다.\u003c/li\u003e\n\u003cli\u003e우리의 예에서는 저 Book-to-Market 비율을 가진 대형기업의 경우, \"큰 규모\" 및 \"낮은 가치\" 범주로 분류됩니다. Fama-French 모델에 따르면, 이 기업은 장기적으로 낮은 수익률을 제공할 것으로 예상되며, SMB 및 HML 요인이 모두 음수일 것으로 예상됩니다.\u003c/li\u003e\n\u003cli\u003eHML 요인과 유사하게 정의된 수익성 요인(RMW)은 운영 수익성이 강한(높음) 기업과 약한(낮은) 기업의 수익률 간의 차이입니다. 우리는 알 수 있습니다.\u003c/li\u003e\n\u003cli\u003eRMW(NVDA) 약 0.25이며 RMW(AMD) 약 0.1입니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eTA 이치모쿠 클라우드: NVDA 대 AMD\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eTA 이치모쿠 클라우드는 시장 심리와 가격 모멘텀을 한눈에 볼 수 있게 하여 트레이더가 추세를 식별하는 데 도움을 줄 수 있습니다.\u003c/li\u003e\n\u003cli\u003eNVDA \u0026#x26; AMD에 대한 이치모쿠 클라우드 비교\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title function_\"\u003edisplay\u003c/span\u003e(ichimoku_cloud)\n\n# 이치모쿠 클라우드 데이터 데이터프레임 정의\nichimoku_data_aapl = ichimoku_cloud.\u003cspan class=\"hljs-title function_\"\u003exs\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"NVDA\"\u003c/span\u003e, level=\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, axis=\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)\nichimoku_data_msft = ichimoku_cloud.\u003cspan class=\"hljs-title function_\"\u003exs\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"AMD\"\u003c/span\u003e, level=\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, axis=\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)\n\n# 클립보드에 복사 (이것은 \u003cspan class=\"hljs-variable constant_\"\u003eREADME\u003c/span\u003e에 데이터를 붙여넣기하기 위한 것입니다)\npd.\u003cspan class=\"hljs-property\"\u003eio\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eclipboards\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eto_clipboard\u003c/span\u003e(ichimoku_data_aapl.\u003cspan class=\"hljs-title function_\"\u003etail\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003eto_markdown\u003c/span\u003e(), excel=\u003cspan class=\"hljs-title class_\"\u003eFalse\u003c/span\u003e)\n\n# 마지막 \u003cspan class=\"hljs-number\"\u003e500\u003c/span\u003e행 가져오기\nichimoku_data_aapl = ichimoku_data_aapl.\u003cspan class=\"hljs-property\"\u003eiloc\u003c/span\u003e[-\u003cspan class=\"hljs-number\"\u003e500\u003c/span\u003e:]\nichimoku_data_msft = ichimoku_data_msft.\u003cspan class=\"hljs-property\"\u003eiloc\u003c/span\u003e[-\u003cspan class=\"hljs-number\"\u003e500\u003c/span\u003e:]\n\n# 수평 서브플롯을 위한 그림 및 두 개의 축 생성\nfig, (ax1, ax2) = plt.\u003cspan class=\"hljs-title function_\"\u003esubplots\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, figsize=(\u003cspan class=\"hljs-number\"\u003e15\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e))\n\n# \u003cspan class=\"hljs-title class_\"\u003ePeriodIndex\u003c/span\u003e를 \u003cspan class=\"hljs-title class_\"\u003eDatetimeIndex\u003c/span\u003e로 변환\nichimoku_data_aapl.\u003cspan class=\"hljs-property\"\u003eindex\u003c/span\u003e = ichimoku_data_aapl.\u003cspan class=\"hljs-property\"\u003eindex\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eto_timestamp\u003c/span\u003e()\nichimoku_data_msft.\u003cspan class=\"hljs-property\"\u003eindex\u003c/span\u003e = ichimoku_data_msft.\u003cspan class=\"hljs-property\"\u003eindex\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eto_timestamp\u003c/span\u003e()\n\n# \u003cspan class=\"hljs-variable constant_\"\u003eNVDA\u003c/span\u003e용 이치모쿠 클라우드 플롯\nax1.\u003cspan class=\"hljs-title function_\"\u003eplot\u003c/span\u003e(\n    ichimoku_data_aapl.\u003cspan class=\"hljs-property\"\u003eindex\u003c/span\u003e,\n    ichimoku_data_aapl[\u003cspan class=\"hljs-string\"\u003e\"Conversion Line\"\u003c/span\u003e],\n    color=\u003cspan class=\"hljs-string\"\u003e\"blue\"\u003c/span\u003e,\n    label=\u003cspan class=\"hljs-string\"\u003e\"Conversion Line (텐칸센)\"\u003c/span\u003e,\n    linewidth=\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e,\n)\nax1.\u003cspan class=\"hljs-title function_\"\u003eplot\u003c/span\u003e(\n    ichimoku_data_aapl.\u003cspan class=\"hljs-property\"\u003eindex\u003c/span\u003e,\n    ichimoku_data_aapl[\u003cspan class=\"hljs-string\"\u003e\"Base Line\"\u003c/span\u003e],\n    color=\u003cspan class=\"hljs-string\"\u003e\"red\"\u003c/span\u003e,\n    label=\u003cspan class=\"hljs-string\"\u003e\"Base Line (기준선)\"\u003c/span\u003e,\n    linewidth=\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e,\n)\nax1.\u003cspan class=\"hljs-title function_\"\u003efill_between\u003c/span\u003e(\n    ichimoku_data_aapl.\u003cspan class=\"hljs-property\"\u003eindex\u003c/span\u003e,\n    ichimoku_data_aapl[\u003cspan class=\"hljs-string\"\u003e\"Leading Span A\"\u003c/span\u003e],\n    ichimoku_data_aapl[\u003cspan class=\"hljs-string\"\u003e\"Leading Span B\"\u003c/span\u003e],\n    where=ichimoku_data_aapl[\u003cspan class=\"hljs-string\"\u003e\"Leading Span A\"\u003c/span\u003e] \u003e= ichimoku_data_aapl[\u003cspan class=\"hljs-string\"\u003e\"Leading Span B\"\u003c/span\u003e],\n    facecolor=\u003cspan class=\"hljs-string\"\u003e\"green\"\u003c/span\u003e,\n    alpha=\u003cspan class=\"hljs-number\"\u003e0.2\u003c/span\u003e,\n    label=\u003cspan class=\"hljs-string\"\u003e\"상승 클라우드\"\u003c/span\u003e,\n)\nax1.\u003cspan class=\"hljs-title function_\"\u003efill_between\u003c/span\u003e(\n    ichimoku_data_aapl.\u003cspan class=\"hljs-property\"\u003eindex\u003c/span\u003e,\n    ichimoku_data_aapl[\u003cspan class=\"hljs-string\"\u003e\"Leading Span A\"\u003c/span\u003e],\n    ichimoku_data_aapl[\u003cspan class=\"hljs-string\"\u003e\"Leading Span B\"\u003c/span\u003e],\n    where=ichimoku_data_aapl[\u003cspan class=\"hljs-string\"\u003e\"Leading Span A\"\u003c/span\u003e] \u0026#x3C; ichimoku_data_aapl[\u003cspan class=\"hljs-string\"\u003e\"Leading Span B\"\u003c/span\u003e],\n    facecolor=\u003cspan class=\"hljs-string\"\u003e\"red\"\u003c/span\u003e,\n    alpha=\u003cspan class=\"hljs-number\"\u003e0.2\u003c/span\u003e,\n    label=\u003cspan class=\"hljs-string\"\u003e\"하락 클라우드\"\u003c/span\u003e,\n)\n\n# \u003cspan class=\"hljs-variable constant_\"\u003eNVDA\u003c/span\u003e에 대한 범례 및 레이블 사용자 정의\nax1.\u003cspan class=\"hljs-title function_\"\u003elegend\u003c/span\u003e(loc=\u003cspan class=\"hljs-string\"\u003e\"upper left\"\u003c/span\u003e)\nax1.\u003cspan class=\"hljs-title function_\"\u003eset_xlabel\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"날짜\"\u003c/span\u003e, fontsize=\u003cspan class=\"hljs-number\"\u003e14\u003c/span\u003e)\nax1.\u003cspan class=\"hljs-title function_\"\u003eset_ylabel\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"가격\"\u003c/span\u003e, fontsize=\u003cspan class=\"hljs-number\"\u003e14\u003c/span\u003e)\nax1.\u003cspan class=\"hljs-title function_\"\u003eset_title\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"이치모쿠 클라우드 차트 (NVDA)\"\u003c/span\u003e, fontsize=\u003cspan class=\"hljs-number\"\u003e16\u003c/span\u003e)\nax1.\u003cspan class=\"hljs-title function_\"\u003egrid\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eTrue\u003c/span\u003e, linestyle=\u003cspan class=\"hljs-string\"\u003e\"--\"\u003c/span\u003e, alpha=\u003cspan class=\"hljs-number\"\u003e0.5\u003c/span\u003e)\nax1.\u003cspan class=\"hljs-title function_\"\u003eset_facecolor\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"#f7f7f7\"\u003c/span\u003e)\nax1.\u003cspan class=\"hljs-title function_\"\u003etick_params\u003c/span\u003e(axis=\u003cspan class=\"hljs-string\"\u003e\"both\"\u003c/span\u003e, which=\u003cspan class=\"hljs-string\"\u003e\"major\"\u003c/span\u003e, labelsize=\u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e)\n\n# \u003cspan class=\"hljs-variable constant_\"\u003eMSFT\u003c/span\u003e용 이치모쿠 클라우드 플롯\nax2.\u003cspan class=\"hljs-title function_\"\u003eplot\u003c/span\u003e(\n    ichimoku_data_msft.\u003cspan class=\"hljs-property\"\u003eindex\u003c/span\u003e,\n    ichimoku_data_msft[\u003cspan class=\"hljs-string\"\u003e\"Conversion Line\"\u003c/span\u003e],\n    color=\u003cspan class=\"hljs-string\"\u003e\"blue\"\u003c/span\u003e,\n    label=\u003cspan class=\"hljs-string\"\u003e\"Conversion Line (텐칸센)\"\u003c/span\u003e,\n    linewidth=\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e,\n)\nax2.\u003cspan class=\"hljs-title function_\"\u003eplot\u003c/span\u003e(\n    ichimoku_data_msft.\u003cspan class=\"hljs-property\"\u003eindex\u003c/span\u003e,\n    ichimoku_data_msft[\u003cspan class=\"hljs-string\"\u003e\"Base Line\"\u003c/span\u003e],\n    color=\u003cspan class=\"hljs-string\"\u003e\"red\"\u003c/span\u003e,\n    label=\u003cspan class=\"hljs-string\"\u003e\"Base Line (기준선)\"\u003c/span\u003e,\n    linewidth=\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e,\n)\nax2.\u003cspan class=\"hljs-title function_\"\u003efill_between\u003c/span\u003e(\n    ichimoku_data_msft.\u003cspan class=\"hljs-property\"\u003eindex\u003c/span\u003e,\n    ichimoku_data_msft[\u003cspan class=\"hljs-string\"\u003e\"Leading Span A\"\u003c/span\u003e],\n    ichimoku_data_msft[\u003cspan class=\"hljs-string\"\u003e\"Leading Span B\"\u003c/span\u003e],\n    where=ichimoku_data_msft[\u003cspan class=\"hljs-string\"\u003e\"Leading Span A\"\u003c/span\u003e] \u003e= ichimoku_data_msft[\u003cspan class=\"hljs-string\"\u003e\"Leading Span B\"\u003c/span\u003e],\n    facecolor=\u003cspan class=\"hljs-string\"\u003e\"green\"\u003c/span\u003e,\n    alpha=\u003cspan class=\"hljs-number\"\u003e0.2\u003c/span\u003e,\n    label=\u003cspan class=\"hljs-string\"\u003e\"상승 클라우드\"\u003c/span\u003e,\n)\nax2.\u003cspan class=\"hljs-title function_\"\u003efill_between\u003c/span\u003e(\n    ichimoku_data_msft.\u003cspan class=\"hljs-property\"\u003eindex\u003c/span\u003e,\n    ichimoku_data_msft[\u003cspan class=\"hljs-string\"\u003e\"Leading Span A\"\u003c/span\u003e],\n    ichimoku_data_msft[\u003cspan class=\"hljs-string\"\u003e\"Leading Span B\"\u003c/span\u003e],\n    where=ichimoku_data_msft[\u003cspan class=\"hljs-string\"\u003e\"Leading Span A\"\u003c/span\u003e] \u0026#x3C; ichimoku_data_msft[\u003cspan class=\"hljs-string\"\u003e\"Leading Span B\"\u003c/span\u003e],\n    facecolor=\u003cspan class=\"hljs-string\"\u003e\"red\"\u003c/span\u003e,\n    alpha=\u003cspan class=\"hljs-number\"\u003e0.2\u003c/span\u003e,\n    label=\u003cspan class=\"hljs-string\"\u003e\"하락 클라우드\"\u003c/span\u003e,\n)\n\n# \u003cspan class=\"hljs-variable constant_\"\u003eAMD\u003c/span\u003e에 대한 범례 및 레이블 사용자 정의\nax2.\u003cspan class=\"hljs-title function_\"\u003elegend\u003c/span\u003e(loc=\u003cspan class=\"hljs-string\"\u003e\"upper left\"\u003c/span\u003e)\nax2.\u003cspan class=\"hljs-title function_\"\u003eset_xlabel\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"날짜\"\u003c/span\u003e, fontsize=\u003cspan class=\"hljs-number\"\u003e14\u003c/span\u003e)\nax2.\u003cspan class=\"hljs-title function_\"\u003eset_ylabel\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"가격\"\u003c/span\u003e, fontsize=\u003cspan class=\"hljs-number\"\u003e14\u003c/span\u003e)\nax2.\u003cspan class=\"hljs-title function_\"\u003eset_title\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"이치모쿠 클라우드 차트 (AMD)\"\u003c/span\u003e, fontsize=\u003cspan class=\"hljs-number\"\u003e16\u003c/span\u003e)\nax2.\u003cspan class=\"hljs-title function_\"\u003egrid\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eTrue\u003c/span\u003e, linestyle=\u003cspan class=\"hljs-string\"\u003e\"--\"\u003c/span\u003e, alpha=\u003cspan class=\"hljs-number\"\u003e0.5\u003c/span\u003e)\nax2.\u003cspan class=\"hljs-title function_\"\u003eset_facecolor\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"#f7f7f7\"\u003c/span\u003e)\nax2.\u003cspan class=\"hljs-title function_\"\u003etick_params\u003c/span\u003e(axis=\u003cspan class=\"hljs-string\"\u003e\"both\"\u003c/span\u003e, which=\u003cspan class=\"hljs-string\"\u003e\"major\"\u003c/span\u003e, labelsize=\u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e)\n\n# 서브플롯 간의 간격 조정\nplt.\u003cspan class=\"hljs-title function_\"\u003etight_layout\u003c/span\u003e()\n\n# 플롯 보기\nplt.\u003cspan class=\"hljs-title function_\"\u003eshow\u003c/span\u003e()\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_45.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e이 그래프는 NVDA 및 AMD가 각각 상승 및 하락하는 단기 추세를 따르는 것을 보여줍니다. AMD 플롯을 보면 2024년 7월에 Tenkan Sen(파란색 선)과 Kijun Sen(빨간색 선)이 명확히 교차하는 것을 볼 수 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e1년 빅테크 주가 예측\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eFinanceToolkit이 1년 빅테크 주식을 예측할 수 있나요?\u003c/li\u003e\n\u003cli\u003e회사 티커로 Toolkit을 초기화하고 1년 주식 가격 시뮬레이션을 플로팅하기 [9]\u003c/li\u003e\n\u003c/ul\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# 회사 티커로 \u003cspan class=\"hljs-title class_\"\u003eToolkit\u003c/span\u003e을 초기화합니다\n회사 = \u003cspan class=\"hljs-title class_\"\u003eToolkit\u003c/span\u003e(\n    [\u003cspan class=\"hljs-string\"\u003e\"AAPL\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"MSFT\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"GOOGL\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"AMZN\"\u003c/span\u003e], api_key=\u003cspan class=\"hljs-variable constant_\"\u003eAPI_KEY\u003c/span\u003e, start_date=\u003cspan class=\"hljs-string\"\u003e\"2005-01-01\"\u003c/span\u003e\n)\n\n주가모의실험 = 회사.\u003cspan class=\"hljs-property\"\u003eoptions\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eget_stock_price_simulation\u003c/span\u003e(timesteps=\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e)\n\nfig, ax = plt.\u003cspan class=\"hljs-title function_\"\u003esubplots\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, figsize=(\u003cspan class=\"hljs-number\"\u003e15\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e))\n\n주가모의실험_전치 = 주가모의실험.\u003cspan class=\"hljs-property\"\u003eT\u003c/span\u003e\n주가모의실험_전치.\u003cspan class=\"hljs-property\"\u003eindex\u003c/span\u003e = (\n    주가모의실험_전치.\u003cspan class=\"hljs-property\"\u003eindex\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eastype\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"datetime64[ns]\"\u003c/span\u003e)\n)\n\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e i, 티커 \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eenumerate\u003c/span\u003e(회사.\u003cspan class=\"hljs-property\"\u003e_tickers\u003c/span\u003e):\n    ax[i \u003cspan class=\"hljs-comment\"\u003e// 2, i % 2].plot(주가모의실험_전치[티커])\u003c/span\u003e\n    ax[i \u003cspan class=\"hljs-comment\"\u003e// 2, i % 2].set_title(티커)\u003c/span\u003e\n    ax[i \u003cspan class=\"hljs-comment\"\u003e// 2, i % 2].xaxis.set_tick_params(rotation=20)\u003c/span\u003e\n    ax[i \u003cspan class=\"hljs-comment\"\u003e// 2, i % 2].yaxis.set_tick_params(labelsize=8)\u003c/span\u003e\n    ax[i \u003cspan class=\"hljs-comment\"\u003e// 2, i % 2].grid(linestyle=\"--\", alpha=0.5)\u003c/span\u003e\n\nfig.\u003cspan class=\"hljs-title function_\"\u003esuptitle\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"주가 모의실험\"\u003c/span\u003e, fontweight=\u003cspan class=\"hljs-string\"\u003e\"bold\"\u003c/span\u003e)\nfig.\u003cspan class=\"hljs-title function_\"\u003etight_layout\u003c/span\u003e()\nplt.\u003cspan class=\"hljs-title function_\"\u003eshow\u003c/span\u003e()\n\u003c/code\u003e\u003c/pre\u003e\n\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_46.png\"\u003e\n\u003cul\u003e\n\u003cli\u003e이러한 예측은 시간이 흐름에 따른 자본 가격의 이항 리턴 분포에 기반합니다. 이 모델에서는 각 반복마다 두 가지 가능한 결과가 있습니다 — 상승하거나 하락하며, 이는 이항 트리를 따릅니다.\u003c/li\u003e\n\u003cli\u003e시간에 따라 이 두 값을 그리는 것은 이항 트리를 만드는 것으로 알려져 있습니다. 이항 모델에 대한 자세한 내용은 Equity Derivatives의 가격 결정 및 분석(금융 Toolbox)을 참조하십시오.\u003c/li\u003e\n\u003cli\u003e이 모델은 직관적이며 잘 알려진 Black-Scholes 모델보다 실무에서 더 자주 사용됩니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eMETA 캔들스틱 \u0026#x26; 기술 분석 지표\u003c/h2\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003e마침내, 지난 729일 동안의 META TA 전략들을 탐색해 보겠습니다.\u003c/li\u003e\n\u003cli\u003e주식 데이터 읽기\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eticker=\u003cspan class=\"hljs-string\"\u003e\"META\"\u003c/span\u003e\ndfme = yf.\u003cspan class=\"hljs-title function_\"\u003edownload\u003c/span\u003e(ticker, start = \u003cspan class=\"hljs-string\"\u003e'2020-01-01'\u003c/span\u003e)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003eMETA 캔들스틱 차트 2020–2024 및 TA 지표 표시\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# 이동평균 추가\ndfme[\u003cspan class=\"hljs-string\"\u003e'EMA9'\u003c/span\u003e] = dfme[\u003cspan class=\"hljs-string\"\u003e'Adj Close'\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003eewm\u003c/span\u003e(span = \u003cspan class=\"hljs-number\"\u003e9\u003c/span\u003e, adjust = \u003cspan class=\"hljs-title class_\"\u003eFalse\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003emean\u003c/span\u003e() # 지수 이동평균 \u003cspan class=\"hljs-number\"\u003e9\u003c/span\u003e기간\ndfme[\u003cspan class=\"hljs-string\"\u003e'SMA20'\u003c/span\u003e] = dfme[\u003cspan class=\"hljs-string\"\u003e'Adj Close'\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003erolling\u003c/span\u003e(\u003cspan class=\"hljs-variable language_\"\u003ewindow\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e20\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003emean\u003c/span\u003e() # 단순 이동평균 \u003cspan class=\"hljs-number\"\u003e20\u003c/span\u003e기간\ndfme[\u003cspan class=\"hljs-string\"\u003e'SMA50'\u003c/span\u003e] = dfme[\u003cspan class=\"hljs-string\"\u003e'Adj Close'\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003erolling\u003c/span\u003e(\u003cspan class=\"hljs-variable language_\"\u003ewindow\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003emean\u003c/span\u003e() # 단순 이동평균 \u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e기간\ndfme[\u003cspan class=\"hljs-string\"\u003e'SMA100'\u003c/span\u003e] = dfme[\u003cspan class=\"hljs-string\"\u003e'Adj Close'\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003erolling\u003c/span\u003e(\u003cspan class=\"hljs-variable language_\"\u003ewindow\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003emean\u003c/span\u003e() # 단순 이동평균 \u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e기간\ndfme[\u003cspan class=\"hljs-string\"\u003e'SMA200'\u003c/span\u003e] = dfme[\u003cspan class=\"hljs-string\"\u003e'Adj Close'\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003erolling\u003c/span\u003e(\u003cspan class=\"hljs-variable language_\"\u003ewindow\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003emean\u003c/span\u003e() # 단순 이동평균 \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e기간\n\n# \u003cspan class=\"hljs-number\"\u003e14\u003c/span\u003e기간 \u003cspan class=\"hljs-variable constant_\"\u003eRSI\u003c/span\u003e 추가\ndelta = dfme[\u003cspan class=\"hljs-string\"\u003e'Adj Close'\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003ediff\u003c/span\u003e() # 델타 계산\ngain = delta.\u003cspan class=\"hljs-title function_\"\u003ewhere\u003c/span\u003e(delta \u003e \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) # 상승값 획득\nloss = -delta.\u003cspan class=\"hljs-title function_\"\u003ewhere\u003c/span\u003e(delta \u0026#x3C; \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) # 하락값 획득\navg_gain = gain.\u003cspan class=\"hljs-title function_\"\u003erolling\u003c/span\u003e(\u003cspan class=\"hljs-variable language_\"\u003ewindow\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e14\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003emean\u003c/span\u003e() # \u003cspan class=\"hljs-number\"\u003e14\u003c/span\u003e기간 평균 상승값 측정\navg_loss = loss.\u003cspan class=\"hljs-title function_\"\u003erolling\u003c/span\u003e(\u003cspan class=\"hljs-variable language_\"\u003ewindow\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e14\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003emean\u003c/span\u003e() # \u003cspan class=\"hljs-number\"\u003e14\u003c/span\u003e기간 평균 하락값 측정\nrs = avg_gain/avg_loss # \u003cspan class=\"hljs-variable constant_\"\u003eRS\u003c/span\u003e 계산\ndfme[\u003cspan class=\"hljs-string\"\u003e'RSI'\u003c/span\u003e] = \u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e - (\u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e / (\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e + rs)) # 데이터 프레임에 \u003cspan class=\"hljs-variable constant_\"\u003eRSI\u003c/span\u003e 열 생성\n\n# \u003cspan class=\"hljs-number\"\u003e20\u003c/span\u003e기간 볼린저 밴드 추가\ndfme[\u003cspan class=\"hljs-string\"\u003e'BB_UPPER'\u003c/span\u003e] = dfme[\u003cspan class=\"hljs-string\"\u003e'SMA20'\u003c/span\u003e] + \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e*dfme[\u003cspan class=\"hljs-string\"\u003e'Adj Close'\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003erolling\u003c/span\u003e(\u003cspan class=\"hljs-variable language_\"\u003ewindow\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e20\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003estd\u003c/span\u003e() # 상단 밴드\ndfme[\u003cspan class=\"hljs-string\"\u003e'BB_LOWER'\u003c/span\u003e] = dfme[\u003cspan class=\"hljs-string\"\u003e'SMA20'\u003c/span\u003e] - \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e*dfme[\u003cspan class=\"hljs-string\"\u003e'Adj Close'\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003erolling\u003c/span\u003e(\u003cspan class=\"hljs-variable language_\"\u003ewindow\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e20\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003estd\u003c/span\u003e() # 하단 밴드\n\n# \u003cspan class=\"hljs-number\"\u003e14\u003c/span\u003e기간 \u003cspan class=\"hljs-variable constant_\"\u003eATR\u003c/span\u003e 추가\ndfme[\u003cspan class=\"hljs-string\"\u003e'TR'\u003c/span\u003e] = pd.\u003cspan class=\"hljs-title class_\"\u003eDataFrame\u003c/span\u003e(np.\u003cspan class=\"hljs-title function_\"\u003emaximum\u003c/span\u003e(np.\u003cspan class=\"hljs-title function_\"\u003emaximum\u003c/span\u003e(dfme[\u003cspan class=\"hljs-string\"\u003e'High'\u003c/span\u003e] - dfme[\u003cspan class=\"hljs-string\"\u003e'Low'\u003c/span\u003e], \u003cspan class=\"hljs-title function_\"\u003eabs\u003c/span\u003e(dfme[\u003cspan class=\"hljs-string\"\u003e'High'\u003c/span\u003e] - dfme[\u003cspan class=\"hljs-string\"\u003e'Adj Close'\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003eshift\u003c/span\u003e())), \u003cspan class=\"hljs-title function_\"\u003eabs\u003c/span\u003e(dfme[\u003cspan class=\"hljs-string\"\u003e'Low'\u003c/span\u003e] - dfme[\u003cspan class=\"hljs-string\"\u003e'Adj Close'\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003eshift\u003c/span\u003e())), index = dfme.\u003cspan class=\"hljs-property\"\u003eindex\u003c/span\u003e)\ndfme[\u003cspan class=\"hljs-string\"\u003e'ATR'\u003c/span\u003e] = dfme[\u003cspan class=\"hljs-string\"\u003e'TR'\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003erolling\u003c/span\u003e(\u003cspan class=\"hljs-variable language_\"\u003ewindow\u003c/span\u003e = \u003cspan class=\"hljs-number\"\u003e14\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003emean\u003c/span\u003e() # 데이터 프레임에 \u003cspan class=\"hljs-variable constant_\"\u003eATR\u003c/span\u003e 열 생성\n\n# 지표와 함께 캔들스틱 차트 표시\nfig = \u003cspan class=\"hljs-title function_\"\u003emake_subplots\u003c/span\u003e(rows=\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e, cols=\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, shared_xaxes=\u003cspan class=\"hljs-title class_\"\u003eTrue\u003c/span\u003e, vertical_spacing=\u003cspan class=\"hljs-number\"\u003e0.05\u003c/span\u003e,row_heights=[\u003cspan class=\"hljs-number\"\u003e0.6\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0.10\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0.10\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0.20\u003c/span\u003e])\n\n# 캔들스틱\nfig.\u003cspan class=\"hljs-title function_\"\u003eadd_trace\u003c/span\u003e(go.\u003cspan class=\"hljs-title class_\"\u003eCandlestick\u003c/span\u003e(x=dfme.\u003cspan class=\"hljs-property\"\u003eindex\u003c/span\u003e,\n                             open=dfme[\u003cspan class=\"hljs-string\"\u003e'Open'\u003c/span\u003e],\n                             high=dfme[\u003cspan class=\"hljs-string\"\u003e'High'\u003c/span\u003e],\n                             low=dfme[\u003cspan class=\"hljs-string\"\u003e'Low'\u003c/span\u003e],\n                             close=dfme[\u003cspan class=\"hljs-string\"\u003e'Adj Close'\u003c/span\u003e],\n                             name=\u003cspan class=\"hljs-string\"\u003e'META'\u003c/span\u003e),\n              row=\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, col=\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)\n\n# 이동평균\nfig.\u003cspan class=\"hljs-title function_\"\u003eadd_trace\u003c/span\u003e(go.\u003cspan class=\"hljs-title class_\"\u003eScatter\u003c/span\u003e(x=dfme.\u003cspan class=\"hljs-property\"\u003eindex\u003c/span\u003e,\n                         y=dfme[\u003cspan class=\"hljs-string\"\u003e'EMA9'\u003c/span\u003e],\n                         mode=\u003cspan class=\"hljs-string\"\u003e'lines'\u003c/span\u003e,\n                         line=\u003cspan class=\"hljs-title function_\"\u003edict\u003c/span\u003e(color=\u003cspan class=\"hljs-string\"\u003e'#90EE90'\u003c/span\u003e),\n                         name=\u003cspan class=\"hljs-string\"\u003e'EMA9'\u003c/span\u003e),\n              row=\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, col=\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)\n\n# 이하 생략\n...\n\nfig.\u003cspan class=\"hljs-title function_\"\u003eshow\u003c/span\u003e()\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_47.png\"\u003e\n\u003ch2\u003eMETA RSI 대 MA 백테스팅\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e기술적 분석 백테스팅: 지난 729일 동안의 일별 META 데이터에서 RSI 및 MA 전략의 기대 수익 비교\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003eend_date = dt.datetime.now() \u003cspan class=\"hljs-comment\"\u003e# 3월 21일 날짜를 정의\u003c/span\u003e\nstart_date = end_date - dt.timedelta(days=\u003cspan class=\"hljs-number\"\u003e729\u003c/span\u003e) \u003cspan class=\"hljs-comment\"\u003e# 지난 729일 동안의 시간별 데이터 로딩\u003c/span\u003e\n\nhourly_eur_usd = yf.download(\u003cspan class=\"hljs-string\"\u003e'META'\u003c/span\u003e, start=start_date, end=end_date, interval=\u003cspan class=\"hljs-string\"\u003e'1d'\u003c/span\u003e)\nhourly_eur_usd \n\n           Open       High       Low        Close      Adj Close   Volume\nDate      \n\u003cspan class=\"hljs-number\"\u003e2022\u003c/span\u003e-07-\u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e164.800003\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e165.910004\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e162.100006\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e163.270004\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e162.935181\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e16639700\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e2022\u003c/span\u003e-07-\u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e160.160004\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e164.979996\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e159.610001\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e163.490005\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e163.154739\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e16555100\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e2022\u003c/span\u003e-07-\u003cspan class=\"hljs-number\"\u003e14\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e161.220001\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e162.589996\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e157.279999\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e158.050003\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e157.725891\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e23765200\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e2022\u003c/span\u003e-07-\u003cspan class=\"hljs-number\"\u003e15\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e160.539993\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e164.979996\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e159.820007\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e164.699997\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e164.362244\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e23342800\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e2022\u003c/span\u003e-07-\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e166.750000\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e171.690002\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e165.639999\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e167.229996\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e166.887054\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e23574300\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e... \u003c/span\u003e... ... ... ... ... ...\n\u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e-07-02 \u003cspan class=\"hljs-number\"\u003e500.760010\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e510.500000\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e499.450012\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e509.500000\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e509.500000\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e7739500\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e-07-03 \u003cspan class=\"hljs-number\"\u003e506.369995\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e511.279999\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e506.019989\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e509.959991\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e509.959991\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e6005600\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e-07-05 \u003cspan class=\"hljs-number\"\u003e511.600006\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e540.869995\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e511.600006\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e539.909973\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e539.909973\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e21354100\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e-07-08 \u003cspan class=\"hljs-number\"\u003e542.349976\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e542.809998\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e526.650024\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e529.320007\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e529.320007\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e14917500\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e-07-09 \u003cspan class=\"hljs-number\"\u003e533.750000\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e537.479980\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e528.190002\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e530.000000\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e530.000000\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e8753200\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e501\u003c/span\u003e rows × \u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e columns\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003eRSI 백테스팅 전략 구현하기\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# \u003cspan class=\"hljs-variable constant_\"\u003eTA\u003c/span\u003e 라이브러리를 사용하여 \u003cspan class=\"hljs-variable constant_\"\u003eRSI\u003c/span\u003e 계산하기\nhourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'rsi'\u003c/span\u003e] = ta.\u003cspan class=\"hljs-property\"\u003emomentum\u003c/span\u003e.\u003cspan class=\"hljs-title class_\"\u003eRSIIndicator\u003c/span\u003e(hourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'Adj Close'\u003c/span\u003e], \u003cspan class=\"hljs-variable language_\"\u003ewindow\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e14\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003ersi\u003c/span\u003e()\n\n# \u003cspan class=\"hljs-variable constant_\"\u003eRSI\u003c/span\u003e 전략의 매개변수 정의\nrsi_period = \u003cspan class=\"hljs-number\"\u003e14\u003c/span\u003e\noverbought = \u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e\noversold = \u003cspan class=\"hljs-number\"\u003e40\u003c/span\u003e\n\n# 신호를 저장할 새 열 생성\nhourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'signal'\u003c/span\u003e] = \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e # 포지션을 가지지 않을 때 \u003cspan class=\"hljs-string\"\u003e'signal'\u003c/span\u003e = \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n\n# 진입점 생성\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e i \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003erange\u003c/span\u003e(rsi_period, \u003cspan class=\"hljs-title function_\"\u003elen\u003c/span\u003e(hourly_eur_usd)):\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e hourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'rsi'\u003c/span\u003e][i] \u003e overbought and hourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'rsi'\u003c/span\u003e][i - \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e] \u0026#x3C;= \u003cspan class=\"hljs-attr\"\u003eoverbought\u003c/span\u003e:\n        hourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'signal'\u003c/span\u003e][i] = -\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e # \u003cspan class=\"hljs-string\"\u003e'signal'\u003c/span\u003e = -\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e 일 때 판매\n    elif hourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'rsi'\u003c/span\u003e][i] \u0026#x3C; oversold and hourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'rsi'\u003c/span\u003e][i - \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e] \u003e= \u003cspan class=\"hljs-attr\"\u003eoversold\u003c/span\u003e:\n        hourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'signal'\u003c/span\u003e][i] = \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e # \u003cspan class=\"hljs-string\"\u003e'signal'\u003c/span\u003e = \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e 일 때 구매\n        \n# 통화쌍의 일일 수익률 계산\nhourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'returns'\u003c/span\u003e] = hourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'Adj Close'\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003epct_change\u003c/span\u003e()\nhourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'cumulative_returns'\u003c/span\u003e] = (\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e + hourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'returns'\u003c/span\u003e]).\u003cspan class=\"hljs-title function_\"\u003ecumprod\u003c/span\u003e() - \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e # 기간의 총 수익률\n\n# 신호를 수익에 적용\nhourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'strategy_returns'\u003c/span\u003e] = hourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'signal'\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003eshift\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) * hourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'returns'\u003c/span\u003e]\n\n# 전략의 누적 수익 계산\nhourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'cumulative_strategy_returns'\u003c/span\u003e] = (\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e + hourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'strategy_returns'\u003c/span\u003e]).\u003cspan class=\"hljs-title function_\"\u003ecumprod\u003c/span\u003e() - \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\n\n# 초기 자본을 $100으로 설정\ninitial_capital = \u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e\n\n# 전체 포트폴리오 가치 계산\nhourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'portfolio_value'\u003c/span\u003e] = (\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e + hourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'strategy_returns'\u003c/span\u003e]).\u003cspan class=\"hljs-title function_\"\u003ecumprod\u003c/span\u003e() * initial_capital\n\n# 거래 수, 초기 자본, 최종 자본 출력\nnum_trades = hourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'signal'\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003eabs\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003esum\u003c/span\u003e()\nfinal_capital = hourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'portfolio_value'\u003c/span\u003e].\u003cspan class=\"hljs-property\"\u003eiloc\u003c/span\u003e[-\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e]\ntotal_return = (final_capital - initial_capital) / initial_capital * \u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e\n\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'\\n'\u003c/span\u003e)\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(f\u003cspan class=\"hljs-string\"\u003e\"거래 수: {num_trades}\"\u003c/span\u003e)\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(f\u003cspan class=\"hljs-string\"\u003e\"초기 자본: ${initial_capital}\"\u003c/span\u003e)\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(f\u003cspan class=\"hljs-string\"\u003e\"최종 자본: ${final_capital:.2f}\"\u003c/span\u003e)\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(f\u003cspan class=\"hljs-string\"\u003e\"총 수익률: {total_return:.2f}%\"\u003c/span\u003e)\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'\\n'\u003c/span\u003e)\n\n# 포트폴리오 총 가치 플로팅\nfig = go.\u003cspan class=\"hljs-title class_\"\u003eFigure\u003c/span\u003e()\n\nfig.\u003cspan class=\"hljs-title function_\"\u003eadd_trace\u003c/span\u003e(go.\u003cspan class=\"hljs-title class_\"\u003eScatter\u003c/span\u003e(x=hourly_eur_usd.\u003cspan class=\"hljs-property\"\u003eindex\u003c/span\u003e,\n                         y=hourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'portfolio_value'\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003eround\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e),\n                         mode=\u003cspan class=\"hljs-string\"\u003e'lines'\u003c/span\u003e,\n                         line=\u003cspan class=\"hljs-title function_\"\u003edict\u003c/span\u003e(color=\u003cspan class=\"hljs-string\"\u003e'#00BFFF'\u003c/span\u003e),\n                         name=\u003cspan class=\"hljs-string\"\u003e'포트폴리오 가치'\u003c/span\u003e))\n\nfig.\u003cspan class=\"hljs-title function_\"\u003eupdate_layout\u003c/span\u003e(title=\u003cspan class=\"hljs-string\"\u003e'예상 수익 RSI 전략 META 데이터'\u003c/span\u003e,\n                  xaxis_title=\u003cspan class=\"hljs-string\"\u003e'날짜'\u003c/span\u003e,\n                  yaxis_title=\u003cspan class=\"hljs-string\"\u003e'가치 ($)'\u003c/span\u003e,\n                  template=\u003cspan class=\"hljs-string\"\u003e'plotly_dark'\u003c/span\u003e,\n                  height=\u003cspan class=\"hljs-number\"\u003e600\u003c/span\u003e)\n\nfig.\u003cspan class=\"hljs-title function_\"\u003eshow\u003c/span\u003e()\n\n거래 수: \u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e\n초기 자본: $100\n최종 자본: $107\u003cspan class=\"hljs-number\"\u003e.97\u003c/span\u003e\n총 수익률: \u003cspan class=\"hljs-number\"\u003e7.97\u003c/span\u003e%\n\u003c/code\u003e\u003c/pre\u003e\n\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_48.png\"\u003e\n\u003cul\u003e\n\u003cli\u003eMA 백테스팅 전략 구현하기\u003c/li\u003e\n\u003c/ul\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# \u003cspan class=\"hljs-variable constant_\"\u003eTA\u003c/span\u003e 라이브러리를 사용하여 \u003cspan class=\"hljs-variable constant_\"\u003eEMA\u003c/span\u003e 생성\nws = \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e\nwl = \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e\nhourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'ema9'\u003c/span\u003e] = ta.\u003cspan class=\"hljs-property\"\u003etrend\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eema_indicator\u003c/span\u003e(hourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'Adj Close'\u003c/span\u003e], \u003cspan class=\"hljs-variable language_\"\u003ewindow\u003c/span\u003e=ws)\n\n# \u003cspan class=\"hljs-variable constant_\"\u003eTA\u003c/span\u003e 라이브러리를 사용하여 \u003cspan class=\"hljs-variable constant_\"\u003eSMA\u003c/span\u003e 생성\nhourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'sma20'\u003c/span\u003e] = ta.\u003cspan class=\"hljs-property\"\u003etrend\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003esma_indicator\u003c/span\u003e(hourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'Adj Close'\u003c/span\u003e], \u003cspan class=\"hljs-variable language_\"\u003ewindow\u003c/span\u003e=wl)\n\n# 이동평균 교차 전략 매개변수 정의\nshort_ma = \u003cspan class=\"hljs-string\"\u003e'ema9'\u003c/span\u003e\nlong_ma = \u003cspan class=\"hljs-string\"\u003e'sma20'\u003c/span\u003e\n\n# 신호를 저장할 새 열 생성\nhourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'signal'\u003c/span\u003e] = \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n\n# 진입 신호 생성\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e i \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003erange\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-title function_\"\u003elen\u003c/span\u003e(hourly_eur_usd)):\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e hourly_eur_usd[short_ma][i] \u003e hourly_eur_usd[long_ma][i] and hourly_eur_usd[short_ma][i - \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e] \u0026#x3C;= hourly_eur_usd[long_ma][i - \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e]:\n        hourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'signal'\u003c/span\u003e][i] = \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e  # 매수 신호\n    elif hourly_eur_usd[short_ma][i] \u0026#x3C; hourly_eur_usd[long_ma][i] and hourly_eur_usd[short_ma][i - \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e] \u003e= hourly_eur_usd[long_ma][i - \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e]:\n        hourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'signal'\u003c/span\u003e][i] = -\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e  # 매도 신호\n\n# 총 수익률 계산\nhourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'returns'\u003c/span\u003e] = hourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'Adj Close'\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003epct_change\u003c/span\u003e()\nhourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'cumulative_returns'\u003c/span\u003e] = (\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e + hourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'returns'\u003c/span\u003e]).\u003cspan class=\"hljs-title function_\"\u003ecumprod\u003c/span\u003e() - \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\n\n# 수익률에 신호 적용\nhourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'strategy_returns'\u003c/span\u003e] = hourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'signal'\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003eshift\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) * hourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'returns'\u003c/span\u003e]\n\n# 누적 수익률 계산\nhourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'cumulative_strategy_returns'\u003c/span\u003e] = (\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e + hourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'strategy_returns'\u003c/span\u003e]).\u003cspan class=\"hljs-title function_\"\u003ecumprod\u003c/span\u003e() - \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\n\n# 초기 자본 설정\ninitial_capital = \u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e\n\n# 포트폴리오 가치 총액 계산\nhourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'portfolio_value'\u003c/span\u003e] = (\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e + hourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'strategy_returns'\u003c/span\u003e]).\u003cspan class=\"hljs-title function_\"\u003ecumprod\u003c/span\u003e() * initial_capital\n\n# 거래 횟수, 초기 자본, 최종 자본 출력\nnum_trades = hourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'signal'\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003eabs\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003esum\u003c/span\u003e()\nfinal_capital = hourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'portfolio_value'\u003c/span\u003e].\u003cspan class=\"hljs-property\"\u003eiloc\u003c/span\u003e[-\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e]\ntotal_return = (final_capital - initial_capital) / initial_capital * \u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e\n\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'\\n'\u003c/span\u003e)\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(f\u003cspan class=\"hljs-string\"\u003e\"거래 횟수: {num_trades}\"\u003c/span\u003e)\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(f\u003cspan class=\"hljs-string\"\u003e\"초기 자본: ${initial_capital}\"\u003c/span\u003e)\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(f\u003cspan class=\"hljs-string\"\u003e\"최종 자본: ${final_capital:.2f}\"\u003c/span\u003e)\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(f\u003cspan class=\"hljs-string\"\u003e\"총 수익률: {total_return:.2f}%\"\u003c/span\u003e)\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'\\n'\u003c/span\u003e)\n\n# 전략 가치 그래픽화\nfig = go.\u003cspan class=\"hljs-title class_\"\u003eFigure\u003c/span\u003e()\n\nfig.\u003cspan class=\"hljs-title function_\"\u003eadd_trace\u003c/span\u003e(go.\u003cspan class=\"hljs-title class_\"\u003eScatter\u003c/span\u003e(x=hourly_eur_usd.\u003cspan class=\"hljs-property\"\u003eindex\u003c/span\u003e,\n                         y=hourly_eur_usd[\u003cspan class=\"hljs-string\"\u003e'portfolio_value'\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003eround\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e),\n                         mode=\u003cspan class=\"hljs-string\"\u003e'lines'\u003c/span\u003e,\n                         line=\u003cspan class=\"hljs-title function_\"\u003edict\u003c/span\u003e(color=\u003cspan class=\"hljs-string\"\u003e'#00BFFF'\u003c/span\u003e),\n                         name=\u003cspan class=\"hljs-string\"\u003e'포트폴리오 가치'\u003c/span\u003e))\n\nfig.\u003cspan class=\"hljs-title function_\"\u003eupdate_layout\u003c/span\u003e(title=\u003cspan class=\"hljs-string\"\u003e'META 데이터에 기대되는 결과 이동평균 교차 전략'\u003c/span\u003e,\n                  xaxis_title=\u003cspan class=\"hljs-string\"\u003e'날짜'\u003c/span\u003e,\n                  yaxis_title=\u003cspan class=\"hljs-string\"\u003e'가치 ($)'\u003c/span\u003e,\n                  template=\u003cspan class=\"hljs-string\"\u003e'plotly_dark'\u003c/span\u003e,\n                  height=\u003cspan class=\"hljs-number\"\u003e600\u003c/span\u003e)\n\nfig.\u003cspan class=\"hljs-title function_\"\u003eshow\u003c/span\u003e()\n\n거래 횟수: \u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e\n초기 자본: $100\n최종 자본: $108\u003cspan class=\"hljs-number\"\u003e.00\u003c/span\u003e\n총 수익률: \u003cspan class=\"hljs-number\"\u003e8.00\u003c/span\u003e%\n\u003c/code\u003e\u003c/pre\u003e\n\u003cimg src=\"/TIL/assets/img/2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit_49.png\"\u003e\n\u003cul\u003e\n\u003cli\u003eRSI 및 MA 전략은 모두 2022년부터 2024년까지 META 데이터에서 약 8%의 예상 수익을 산출함을 확인할 수 있습니다. 그러나 거래 횟수 측면에서 RSI 전략이 더 우수함을 알 수 있습니다. 즉, 11 (RSI) vs 50 (MA).\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003e결론\u003c/h1\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003e저희 사회의 디지털화가 급속히 증가함에 따라 미국 대형 기술 기업(Big Tech)들이 디지털 인프라와 플랫폼 소유를 통해 엄청난 부를 축적하고 영향력을 행사하게 되었습니다.\u003c/li\u003e\n\u003cli\u003e본 게시물에서는 기술적, 기본적 분석 도구와 최신 포트폴리오 최적화(PO) 알고리즘을 Python을 활용해 통합한 미국 Big Tech들의 양적 거래 분석을 제시했습니다.\u003c/li\u003e\n\u003cli\u003e우리는 기술적 분석 지표, 주식 기초 및 리스크 및 수익을 동시에 고려한 PO를 통합했습니다.\u003c/li\u003e\n\u003cli\u003e우리는 이번 연구 동안 Quantstats, TA, PyPortfolioOpt, Plotly, FinanceToolkit 라이브러리를 사용했습니다.\u003c/li\u003e\n\u003cli\u003e누적 수익, 첨도, 비대칭도, 상관 관계, 표준편차, 베타, 샤프 비율 등의 금융 지표를 분석했습니다.\u003c/li\u003e\n\u003cli\u003e2020년부터 2024년까지의 금융 성과인 등가 가중 포트폴리오와 최대 샤프 비율 포트폴리오와 S\u0026#x26;P 전략을 비교했습니다(Sortino, Sharpe, Calmar, Treynor 비율, 켈리 기준, MTD, 최대 하락 폭, 베타, 알파, 연평균 복리 증가율 등).\u003c/li\u003e\n\u003cli\u003e2019년부터 2024년까지 NVDA 대 AMD 손익 계산서와 수익성 비율을 분석했습니다. 그리스 감능성, Value-at-Risk(VaR) 대 대조군, Fama-French 5 요인과의 상관 관계를 시각화했습니다.\u003c/li\u003e\n\u003cli\u003e주식 가격 예측에 대한 1년치 Big Tech 주가 예측을 시간별로 이루어진 자산 가격의 이항 분포를 따르는 움직임 상승 또는 하락 두 가지 결과를 지닌 이진 트리를 따라 반복하여 모델을 사용했습니다.\u003c/li\u003e\n\u003cli\u003e기술 시장의 감성 및 가격 모멘텀을 파악하기 위해 TA Ichimoku 클라우드를 활용했습니다.\u003c/li\u003e\n\u003cli\u003e마지막 729일의 META TA 전략을 탐색하면서 RSI 대 MA 크로스오버 거래 신호(백테스팅)의 예상 수익을 비교했습니다.\u003c/li\u003e\n\u003cli\u003eTA 지표와 함께 2020년부터 2024년까지의 META 캔들스틱 차트는 주식 데이터 시각화에서 Plotly의 강력함을 보여 주었습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003e참고 문헌\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003eMarkowitz, H., 1952, PORTFOLIO SELECTION. The Journal of Finance.\u003c/li\u003e\n\u003cli\u003eMarkowitz meets technical analysis: Building optimal portfolios by exploiting information in trend-following signals\u003c/li\u003e\n\u003cli\u003eMastering Market Movements: Integrating Technical and Fundamental Analysis in Trading\u003c/li\u003e\n\u003cli\u003eFundamental vs. Technical Analysis: An Overview\u003c/li\u003e\n\u003cli\u003eThe Advantages and Disadvantages of Technical Analysis\u003c/li\u003e\n\u003cli\u003eThe pros and cons of fundamental analysis\u003c/li\u003e\n\u003cli\u003eFundamental Analysis: Advantages And Disadvantages\u003c/li\u003e\n\u003cli\u003ePortfolio Optimization: How to Find Your Investment Balance\u003c/li\u003e\n\u003cli\u003eFinancial Analysis with the Finance Toolkit in Python\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003e더 알아보기\u003c/h1\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003e주식 포트폴리오 위험/수익률 최적화\u003c/li\u003e\n\u003cli\u003e비트코인, 금, 원유 가격의 종합 분석\u003c/li\u003e\n\u003cli\u003eMax(수익률/위험) 거래를 향하여\u003c/li\u003e\n\u003cli\u003e75가지 간단한 FinTA 지표를 사용한 NVDA 기술 분석\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e연락처\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e웹사이트\u003c/li\u003e\n\u003cli\u003eGitHub\u003c/li\u003e\n\u003cli\u003eX/Twitter\u003c/li\u003e\n\u003cli\u003ePinterest\u003c/li\u003e\n\u003cli\u003eMastodon\u003c/li\u003e\n\u003cli\u003eTumblr\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e면책사항\u003c/h2\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003e다음의 면책 조항은이 기사에 제공 된 정보가 교육 용도로만 사용되며 재정 건전성 또는 투자 자문으로 간주되어서는 안 된다는 것을 명확히합니다.\u003c/li\u003e\n\u003cli\u003e제공된 정보는 귀하의 개별 재정 상황, 목표 또는 리스크 허용도를 고려하지 않습니다.\u003c/li\u003e\n\u003cli\u003e귀하가 하는 어떠한 투자 결정이나 조치도 귀하의 전적인 책임입니다.\u003c/li\u003e\n\u003cli\u003e귀하의 재정 목표, 리스크 허용도 및 투자 시간표에 근거하여 어떤 투자의 적합성을 독립적으로 평가해야합니다.\u003c/li\u003e\n\u003cli\u003e귀하는 귀하의 특정 요구에 맞게 맞춤 지도를 제공할 수있는 인증 된 재무 전문가의 조언을 구하는 것이 좋습니다.\u003c/li\u003e\n\u003cli\u003e제공되는 도구, 데이터, 콘텐츠 및 정보는 개인의 투자 요구를 충족시키기 위해 맞춤화되지 않았습니다. 따라서 도구, 데이터, 콘텐츠 및 정보는 정보 및 교육 목적으로만 제공됩니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-07-13-AnIntegratedQuantTradingAnalysisofUSBigTechsusingQuantstatsTAPyPortfolioOptandFinanceToolkit"},"buildId":"B2TETmJptwqhd4vJNGZoH","assetPrefix":"/TIL","isFallback":false,"gsp":true,"scriptLoader":[{"async":true,"src":"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4877378276818686","strategy":"lazyOnload","crossOrigin":"anonymous"}]}</script></body></html>