<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>Next.js 15에서 쿠키 쉽게 다루는 방법 | TIL</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://13akstjq.github.io/TIL//post/2025-04-22-cookies" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="Next.js 15에서 쿠키 쉽게 다루는 방법 | TIL" data-gatsby-head="true"/><meta property="og:title" content="Next.js 15에서 쿠키 쉽게 다루는 방법 | TIL" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/TIL/assets/img/nextjs.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://TIL.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://13akstjq.github.io/TIL//post/2025-04-22-cookies" data-gatsby-head="true"/><meta name="twitter:title" content="Next.js 15에서 쿠키 쉽게 다루는 방법 | TIL" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/TIL/assets/img/nextjs.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | TIL" data-gatsby-head="true"/><meta name="article:published_time" content="2025-04-22 03:00" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/TIL/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/TIL/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/TIL/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/TIL/favicons/favicon-96x96.png"/><link rel="icon" href="/TIL/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/TIL/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/TIL/favicons/browserconfig.xml"/><link rel="preload" href="/TIL/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/TIL/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/TIL/_next/static/css/0eef537492fed77a.css" as="style"/><link rel="stylesheet" href="/TIL/_next/static/css/0eef537492fed77a.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/TIL/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/TIL/_next/static/chunks/webpack-21ffe88bdca56cba.js" defer=""></script><script src="/TIL/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/TIL/_next/static/chunks/main-a5eeabb286676ce6.js" defer=""></script><script src="/TIL/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/TIL/_next/static/chunks/75fc9c18-4a646156c659a948.js" defer=""></script><script src="/TIL/_next/static/chunks/348-02483b66b493dd81.js" defer=""></script><script src="/TIL/_next/static/chunks/pages/post/%5Bslug%5D-8ded8b979ba73586.js" defer=""></script><script src="/TIL/_next/static/M7pU9hOcx8u_ZIFMf95sd/_buildManifest.js" defer=""></script><script src="/TIL/_next/static/M7pU9hOcx8u_ZIFMf95sd/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/TIL">TIL</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/TIL/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">Next.js 15에서 쿠키 쉽게 다루는 방법</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="Next.js 15에서 쿠키 쉽게 다루는 방법" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/TIL/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">TIL</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Apr 22, 2025</span><span class="posts_reading_time__f7YPP">20<!-- --> min read</span></span></div></div></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<h1>Cookies (쿠키)</h1>
<p><code>cookies</code>는 Server Components에서 들어오는 HTTP 요청의 쿠키를 읽고, Server Actions나 Route Handlers에서는 나가는 요청의 쿠키를 읽거나 쓸 수 있게 해주는 비동기 함수입니다.</p>
<p>간단히 말해서, 서버 측에서 쿠키를 다루고 싶을 때 아주 유용한 도구에요. 예를 들어, 사용자가 설정한 테마값을 쿠키로 저장하고, 페이지를 렌더링할 때 이 값을 가져와서 다르게 보여주고 싶을 때 사용할 수 있죠.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { cookies } <span class="hljs-keyword">from</span> <span class="hljs-string">"next/headers"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> cookieStore = <span class="hljs-keyword">await</span> <span class="hljs-title function_">cookies</span>(); <span class="hljs-comment">// 쿠키 저장소를 비동기적으로 가져옵니다.</span>
  <span class="hljs-keyword">const</span> theme = cookieStore.<span class="hljs-title function_">get</span>(<span class="hljs-string">"theme"</span>); <span class="hljs-comment">// 'theme'이라는 이름의 쿠키를 읽어옵니다.</span>
  <span class="hljs-keyword">return</span> <span class="hljs-string">"..."</span>;
}
</code></pre>
<p>위 예제에서 <code>cookieStore</code>는 실제 쿠키 데이터를 다룰 수 있는 객체를 반환해줘요. <code>get</code> 메서드를 통해 특정 쿠키 값을 읽을 수 있죠.</p>
<hr>
<h2>추가 팁 - 쿠키 다루기</h2>
<ul>
<li>
<p><strong>읽기 &#x26; 쓰기</strong>: Server Actions나 Route Handlers에서는 <code>cookieStore.set('name', 'value', options)</code>를 사용해 쿠키를 설정할 수 있어요. 예를 들어, 사용자 로그인 후 세션 정보를 쿠키로 저장하는 경우처럼요.</p>
</li>
<li>
<p><strong>옵션 설정</strong>: 쿠키 설정 시 <code>path</code>, <code>httpOnly</code>, <code>secure</code>, <code>maxAge</code> 등 다양한 옵션을 줄 수 있습니다. 이를 통해 보안이나 쿠키 유효 기간 등을 조절할 수 있죠.</p>
</li>
<li>
<p><strong>실제 활용 예시</strong>:</p>
</li>
</ul>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { cookies } <span class="hljs-keyword">from</span> <span class="hljs-string">"next/headers"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> cookieStore = <span class="hljs-title function_">cookies</span>();
  cookieStore.<span class="hljs-title function_">set</span>(<span class="hljs-string">"token"</span>, <span class="hljs-string">"abc123"</span>, { <span class="hljs-attr">httpOnly</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">maxAge</span>: <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">24</span> }); <span class="hljs-comment">// 1일 동안 유효한 쿠키</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<span class="hljs-string">"쿠키가 설정되었습니다."</span>);
}
</code></pre>
<hr>
<p><code>cookies</code> 함수는 Next.js 최신 버전에서 Server Components, Server Actions, Route Handlers 같은 서버 환경에서 쿠키를 안전하고 편리하게 다룰 수 있게 설계된 기능입니다. 클라이언트에서 document.cookie를 직접 만지는 것보다 훨씬 안전하고 깔끔하니, 서버에서 쿠키 작업이 필요할 때 적극 활용해 보세요!</p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h3>메서드 소개</h3>
<p>아래는 사용할 수 있는 메서드들입니다:</p>













































<table><thead><tr><th>메서드</th><th>반환 타입</th><th>설명</th></tr></thead><tbody><tr><td><code>get('name')</code></td><td>Object</td><td>쿠키 이름을 받아서 그 이름과 값이 담긴 객체를 반환해요.</td></tr><tr><td><code>getAll()</code></td><td>객체 배열</td><td>이름이 일치하는 모든 쿠키를 배열로 반환해줍니다.</td></tr><tr><td><code>has('name')</code></td><td>Boolean</td><td>쿠키 이름을 받아서 해당 쿠키가 존재하는지 true/false로 알려줘요.</td></tr><tr><td><code>set(name, value, options)</code></td><td>-</td><td>쿠키 이름, 값, 옵션을 받아서 요청하는 쿠키를 설정합니다.</td></tr><tr><td><code>delete(name)</code></td><td>-</td><td>쿠키 이름을 받아서 해당 쿠키를 삭제해줘요.</td></tr><tr><td><code>clear()</code></td><td>-</td><td>모든 쿠키를 한 번에 삭제합니다.</td></tr><tr><td><code>toString()</code></td><td>String</td><td>현재 쿠키들을 문자열 포맷으로 반환해줘요.</td></tr></tbody></table>
<hr>
<p>직접 개발하다 보면 쿠키를 다루는 일이 꽤 잦을텐데, 이런 메서드들이 있으면 정말 편리하겠죠? 예를 들어, <code>has('name')</code> 메서드로 쿠키가 있는지 딱 체크해서 조건문을 쓰기도 쉽고, <code>getAll()</code> 메서드로 같은 이름을 가진 여러 쿠키를 모두 가져올 수도 있으니까 상황에 맞게 유용하게 쓸 수 있답니다.</p>
<p>쿠키를 설정할 때는 <code>set()</code> 메서드에 옵션을 함께 넘겨주면, 유효 기간, 경로, 도메인 같은 세부 설정도 가능해서 제어가 한층 더 세밀해져요.</p>
<p>이렇게 메서드들을 잘 활용하면 쿠키 관리를 훨씬 깔끔하게 할 수 있으니 참고하세요!</p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>쿠키(cookie)를 설정할 때 옵션 객체에서 사용할 수 있는 속성들은 아래와 같아요:</p>






































































<table><thead><tr><th>옵션</th><th>타입</th><th>설명</th></tr></thead><tbody><tr><td><code>name</code></td><td>String</td><td>쿠키의 이름을 지정합니다.</td></tr><tr><td><code>value</code></td><td>String</td><td>쿠키에 저장할 값을 지정합니다.</td></tr><tr><td><code>expires</code></td><td>Date</td><td>쿠키 만료일을 정확하게 설정합니다.</td></tr><tr><td><code>maxAge</code></td><td>Number</td><td>쿠키의 수명(초 단위)을 설정합니다.</td></tr><tr><td><code>domain</code></td><td>String</td><td>쿠키가 유효한 도메인을 지정합니다.</td></tr><tr><td><code>path</code></td><td>String, 기본값: <code>'/'</code></td><td>쿠키의 유효 경로를 지정해 특정 경로 내에서만 쿠키가 사용되도록 제한할 수 있습니다.</td></tr><tr><td><code>secure</code></td><td>Boolean</td><td>HTTPS 연결에서만 쿠키가 전송되도록 하여 보안을 강화합니다.</td></tr><tr><td><code>httpOnly</code></td><td>Boolean</td><td>클라이언트 자바스크립트에서 쿠키 접근을 차단해 HTTP 요청에만 쿠키 사용을 제한합니다.</td></tr><tr><td><code>sameSite</code></td><td>Boolean, <code>'lax'</code>, <code>'strict'</code>, <code>'none'</code></td><td>크로스 사이트 요청에 대한 쿠키 동작 방식을 제어합니다.</td></tr><tr><td><code>priority</code></td><td>String (<code>"low"</code>, <code>"medium"</code>, <code>"high"</code>)</td><td>쿠키의 우선순위를 지정합니다.</td></tr><tr><td><code>encode('value')</code></td><td>Function</td><td>쿠키 값을 인코딩하는 데 사용할 함수를 지정할 수 있습니다.</td></tr><tr><td><code>partitioned</code></td><td>Boolean</td><td>쿠키가 <a href="https://github.com/privacycg/CHIPS" rel="nofollow" target="_blank">Partitioned Cookies</a>인지 여부를 나타냅니다.</td></tr></tbody></table>
<blockquote>
<p>여기서 <code>path</code> 옵션은 기본값이 <code>'/'</code>로 설정되어 있으니, 특정 경로에서만 쿠키가 유효하게 하려면 다른 값을 명시해줘야 해요.</p>
</blockquote>
<hr>
<h3>좀 더 알려드릴 게 있어요!</h3>
<ul>
<li>
<p><strong><code>secure</code> 옵션을 꼭 써야 하는 이유</strong><br>
쿠키가 HTTPS를 통해서만 전송될 수 있게 하는 <code>secure</code> 옵션은 민감한 정보 전송 시 보안을 크게 높여줍니다. 꼭 HTTPS 환경에서만 쿠키를 사용해야 할 경우 꼭 활성화해 주세요.</p>
</li>
<li>
<p><strong><code>httpOnly</code>가 왜 중요한가?</strong><br>
<code>httpOnly</code> 속성을 활성화하면, 클라이언트 측 자바스크립트가 쿠키에 접근하지 못해서 XSS 공격에 의한 쿠키 탈취 위험을 줄일 수 있어요.</p>
</li>
<li>
<p><strong><code>sameSite</code> 옵션으로 CSRF 방어하기</strong><br>
요즘은 크로스 사이트 요청 위조(CSRF) 공격 문제가 많기 때문에, <code>sameSite</code> 옵션을 <code>'lax'</code> 또는 <code>'strict'</code>로 설정하는 것이 보안에 도움이 됩니다.</p>
</li>
<li>
<p><strong>Partitioned Cookies</strong><br>
아직 상대적으로 최신 기술인 partitioned cookies는 브라우저별로 쿠키 저장소를 분리해서 사용자 간 추적을 어렵게 만드는 방향으로 연구되고 있습니다. 관심 있다면 GitHub 링크를 참고해 보세요!</p>
</li>
</ul>
<hr>
<p>쿠키 설정에 대해 더 자세한 내용은 <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies" rel="nofollow" target="_blank">MDN 웹 문서</a>에서 확인하실 수 있어요. 여기에 다양한 사례와 권장하는 보안 설정 방법도 소개되어 있으니 참고하면 큰 도움이 됩니다!</p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h2>알아두면 좋은 팁들</h2>
<ul>
<li>
<p><code>cookies</code> 함수는 비동기 함수이며, Promise를 반환해요. 그래서 <code>async/await</code>를 사용하거나 React의 <code>use</code> 함수를 활용해서 값을 받아와야 합니다.<br>
참고로 Next.js 14 버전 이전까지는 동기 함수였는데, Next.js 15 버전에서도 이전 버전 호환을 위해 동기 방식으로 사용하는 게 가능하지만, 앞으로 이 방식은 사라질 예정입니다.</p>
</li>
<li>
<p><code>cookies</code> 함수는 동적 API에 속해 있어요. 반환값을 미리 알 수 없기 때문에, 레이아웃(layout)이나 페이지에서 사용하게 되면 해당 라우트(route)가 동적 렌더링(dynamic rendering)으로 변환됩니다.</p>
</li>
<li>
<p><code>.delete</code> 메서드는 아래 조건에서만 사용할 수 있습니다:</p>
<ol>
<li>서버 액션(Server Action)이나 라우트 핸들러(Route Handler) 안에서 호출해야 합니다.</li>
<li><code>.set</code>을 호출한 같은 도메인이어야 합니다. 만약 와일드카드 도메인(wildcard domain)을 사용한다면, 세부 서브도메인이 정확히 일치해야 하며, 같은 프로토콜(HTTP 또는 HTTPS)에서 실행되어야 합니다.</li>
</ol>
</li>
<li>
<p>HTTP 프로토콜 특성상 스트리밍(streaming) 시작 이후에는 쿠키 설정이 불가능하므로, 쿠키를 설정할 때는 서버 액션이나 라우트 핸들러 내에서 <code>.set</code> 메서드를 호출해야 해요.</p>
</li>
</ul>
<hr>
<h2>서버 컴포넌트에서 쿠키 동작 이해하기</h2>
<p>서버 컴포넌트(Server Components)에서 쿠키를 다룰 때 기억해야 할 점은, 쿠키가 기본적으로 <strong>클라이언트 쪽 저장소</strong>라는 사실입니다. 즉, 쿠키는 브라우저에 저장되어서 HTTP 요청과 함께 서버에 전달되는 데이터인데, 서버 컴포넌트는 서버에서 렌더링되기 때문에 쿠키 정보를 정확히 반영하기 위해선 쿠키를 비동기적으로 불러와야 해요.</p>
<h3>여기서 조금 더!</h3>
<p>서버 컴포넌트에서는 쿠키 데이터에 접근할 때마다 클라이언트(브라우저)에서 전송된 쿠키를 읽는 느낌이라고 생각하면 편합니다. 그래서 쿠키가 바뀌면 서버 컴포넌트도 동적으로 다시 렌더링할 수밖에 없어요. 이 과정이 바로 Next.js가 동적 API로 취급하는 이유죠.</p>
<p>또한, 서버 컴포넌트 내에서 <code>cookies().get()</code> 같은 API를 편리하게 호출할 수 있게 됐지만, 이 과정이 비동기적 처리임을 잊지 마세요. 그래서 <code>async</code> 함수 안에서 쿠키를 다뤄야 하며, 그렇게 해서 받아온 값으로 컴포넌트를 렌더링해야 합니다.</p>
<hr>
<p>이런 점들을 잘 이해하고 사용하면, Next.js에서 쿠키 기반 인증이나 세션 관리 같은 기능을 더 안정적이고 자연스럽게 구현할 수 있습니다! 궁금한 점 있으면 언제든 물어보세요! 😊</p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>서버 컴포넌트(Server Components)에서 쿠키를 읽을 수 있는 이유는 클라이언트(브라우저)가 HTTP 요청 헤더에 쿠키 데이터를 함께 보내기 때문이에요. 즉, 서버 쪽에서 요청이 올 때 쿠키 정보를 받을 수 있는 거죠.</li>
<li>하지만 서버 컴포넌트에서 쿠키를 직접 설정(set)하는 건 불가능해요. 심지어 라우트 핸들러(Route Handler)나 서버 액션(Server Action)을 써도 마찬가지예요. 왜냐하면 쿠키는 실제로 서버가 아니라 클라이언트, 즉 브라우저가 저장하기 때문입니다.</li>
</ul>
<p>서버는 클라이언트(브라우저)에게 <code>Set-Cookie</code>라는 응답 헤더를 통해 "이 쿠키를 저장해 달라"는 명령만 보낼 수 있어요. 쿠키 저장 자체는 브라우저가 처리하죠. 그래서 쿠키 상태를 변경하는 작업(예: <code>.set</code>, <code>.delete</code>, <code>.clear</code>)은 반드시 라우트 핸들러나 서버 액션 내에서 해야 해요. 그래야 응답 헤더를 통해 적절한 쿠키 저장 명령을 포함시킬 수 있기 때문입니다.</p>
<hr>
<h2>예제들</h2>
<h3>쿠키 가져오기 (Getting a cookie)</h3>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> { cookies } <span class="hljs-keyword">from</span> <span class="hljs-string">"next/headers"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ServerComponent</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> cookieStore = <span class="hljs-title function_">cookies</span>();
  <span class="hljs-keyword">const</span> token = cookieStore.<span class="hljs-title function_">get</span>(<span class="hljs-string">"token"</span>)?.<span class="hljs-property">value</span>;

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">div</span>></span>{token ? `토큰 값: ${token}` : "토큰이 없습니다."}<span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span></span>;
}
</code></pre>
<p>위 예시는 서버 컴포넌트에서 쿠키를 읽는 간단한 방법을 보여줘요. 요청 헤더에서 쿠키 데이터를 받아서 <code>token</code>이라는 이름의 쿠키가 있으면 값을 보여주고, 없으면 '토큰이 없습니다'라는 메시지를 띄우는 식이죠.</p>
<hr>
<h3>쿠키 설정하기 (Setting a cookie) - 라우트 핸들러 예시</h3>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NextResponse</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"next/server"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> response = <span class="hljs-title class_">NextResponse</span>.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">"쿠키가 설정되었습니다!"</span> });
  response.<span class="hljs-property">cookies</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">"token"</span>, <span class="hljs-string">"abc123"</span>, { <span class="hljs-attr">httpOnly</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">maxAge</span>: <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">24</span> });

  <span class="hljs-keyword">return</span> response;
}
</code></pre>
<p>쿠키를 설정하고 싶을 땐 서버 컴포넌트가 아니라 이런 라우트 핸들러에서 응답 헤더에 <code>Set-Cookie</code>를 포함시켜서 브라우저에게 전달해야 해요. <code>httpOnly</code> 옵션을 쓰면 자바스크립트에서 쿠키가 조작되는걸 막아 보안성을 높일 수도 있어요.</p>
<hr>
<h3>팁: 쿠키 사용 시 주의사항</h3>
<ul>
<li>쿠키는 용량 제한(보통 4KB)이 있어 너무 많은 데이터를 넣으면 안 돼요.</li>
<li>인증용 토큰 같은 민감한 정보는 <code>httpOnly</code>와 <code>secure</code> 옵션을 설정해 보안을 강화하세요.</li>
<li>클라이언트에서 <code>document.cookie</code>로 접근 가능한 쿠키와 서버에서 읽는 쿠키가 다를 수 있으니 목적에 맞는 쿠키 설정이 필요합니다.</li>
</ul>
<hr>
<p>쿠키는 웹에서 사용자 상태와 인증 정보를 관리하는 데 정말 중요해요. 서버와 클라이언트가 함께 작동해야 하니까 이 점 꼭 기억하면서 코딩해 보세요!</p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>Next.js에서 쿠키를 다룰 때 <code>await cookies()</code> 메서드를 사용하면 편리하게 쿠키 값을 가져올 수 있어요.</p>
<p>예를 들어, 특정 이름을 가진 쿠키 하나만 가져오고 싶다면 아래처럼 하면 됩니다:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { cookies } <span class="hljs-keyword">from</span> <span class="hljs-string">"next/headers"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> cookieStore = <span class="hljs-keyword">await</span> <span class="hljs-title function_">cookies</span>();
  <span class="hljs-keyword">const</span> theme = cookieStore.<span class="hljs-title function_">get</span>(<span class="hljs-string">"theme"</span>); <span class="hljs-comment">// 'theme'이라는 이름의 쿠키 가져오기</span>
  <span class="hljs-keyword">return</span> <span class="hljs-string">"..."</span>;
}
</code></pre>
<p><code>cookieStore.get('name')</code>은 해당 이름을 가진 첫 번째 쿠키를 반환하고, 만약 쿠키가 없으면 <code>undefined</code>를 돌려주니 존재 여부를 꼭 체크해주는 게 좋아요.</p>
<hr>
<h3>여러 개 혹은 모든 쿠키 가져오기</h3>
<p>만약 특정 이름에 해당하는 쿠키가 여러 개 있거나, 아예 전부 다 가져오고 싶다면 <code>getAll()</code> 메서드를 사용하면 됩니다. 아래처럼 쓰면 되죠:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> allThemeCookies = cookieStore.<span class="hljs-title function_">getAll</span>(<span class="hljs-string">"theme"</span>); <span class="hljs-comment">// 'theme'이라는 이름의 모든 쿠키 가져오기</span>
<span class="hljs-keyword">const</span> allCookies = cookieStore.<span class="hljs-title function_">getAll</span>(); <span class="hljs-comment">// 이름 지정 없이 모든 쿠키 가져오기</span>
</code></pre>
<p><code>getAll()</code>은 배열을 반환해주기 때문에, 여러 개의 같은 이름 쿠키를 한 번에 다루거나 쿠키를 일괄 처리할 때 유용해요.</p>
<hr>
<h3>참고 팁!</h3>
<ul>
<li>서버 컴포넌트에서만 <code>next/headers</code> 모듈의 <code>cookies()</code>를 쓸 수 있습니다.</li>
<li>클라이언트 사이드에서 쿠키를 읽으려면 일반적인 JavaScript <code>document.cookie</code>를 써야 한다는 점도 기억하세요.</li>
<li>보안상 쿠키를 다룰 땐 HttpOnly, Secure 옵션들도 잘 설정하는 습관이 필요합니다.</li>
</ul>
<p>필요한 쿠키를 깔끔하게 가져와서 편리한 상태 관리나 유저 테마 설정 등에 활용해 보세요!</p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>자, Next.js 13에서 Cookies API를 사용하는 방법에 대해 이야기해볼게요. Server Component나 서버 관련 코드에서 쿠키를 쉽게 조회하고, 설정할 수 있는 예제인데요.</p>
<p>먼저, 쿠키를 읽어오는 코드입니다:</p>
<pre><code class="hljs language-jsx"><span class="hljs-keyword">import</span> { cookies } <span class="hljs-keyword">from</span> <span class="hljs-string">"next/headers"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"></span>) {
  <span class="hljs-comment">// 쿠키 스토어를 불러오고</span>
  <span class="hljs-keyword">const</span> cookieStore = <span class="hljs-keyword">await</span> <span class="hljs-title function_">cookies</span>();

  <span class="hljs-comment">// 모든 쿠키를 가져와서 JSX로 렌더링합니다</span>
  <span class="hljs-keyword">return</span> cookieStore.<span class="hljs-title function_">getAll</span>().<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">cookie</span>) =></span> (
    <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{cookie.name}</span>></span>
      <span class="hljs-tag">&#x3C;<span class="hljs-name">p</span>></span>Name: {cookie.name}<span class="hljs-tag">&#x3C;/<span class="hljs-name">p</span>></span>
      <span class="hljs-tag">&#x3C;<span class="hljs-name">p</span>></span>Value: {cookie.value}<span class="hljs-tag">&#x3C;/<span class="hljs-name">p</span>></span>
    <span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span></span>
  ));
}
</code></pre>
<p>여기서 <code>cookies()</code> 함수는 서버에서 현재 요청에 포함된 쿠키들을 읽어오는 API예요. <code>getAll()</code>을 호출하면 모든 쿠키가 배열로 반환되고, 각 쿠키는 이름과 값뿐만 아니라 추가 옵션들도 포함할 수 있어요. 이걸 React 컴포넌트에서 렌더링하는 거죠.</p>
<hr>
<h3>쿠키 설정하기</h3>
<p>이제 쿠키를 새로 설정하는 방법입니다. Next.js에서는 서버 액션이나 Route Handler 내부에서 <code>cookies().set()</code> 메서드를 사용해서 쿠키를 만들 수 있어요.</p>
<pre><code class="hljs language-js"><span class="hljs-string">"use server"</span>;

<span class="hljs-keyword">import</span> { cookies } <span class="hljs-keyword">from</span> <span class="hljs-string">"next/headers"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">create</span>(<span class="hljs-params">data</span>) {
  <span class="hljs-keyword">const</span> cookieStore = <span class="hljs-keyword">await</span> <span class="hljs-title function_">cookies</span>();

  <span class="hljs-comment">// 기본적으로 name이라는 이름과 'lee'라는 값으로 쿠키 설정</span>
  cookieStore.<span class="hljs-title function_">set</span>(<span class="hljs-string">"name"</span>, <span class="hljs-string">"lee"</span>);

  <span class="hljs-comment">// secure 옵션(HTTPS에서만 전송)</span>
  cookieStore.<span class="hljs-title function_">set</span>(<span class="hljs-string">"name"</span>, <span class="hljs-string">"lee"</span>, { <span class="hljs-attr">secure</span>: <span class="hljs-literal">true</span> });

  <span class="hljs-comment">// 좀 더 상세 옵션 지정 가능 (httpOnly, path 등)</span>
  cookieStore.<span class="hljs-title function_">set</span>({
    <span class="hljs-attr">name</span>: <span class="hljs-string">"name"</span>,
    <span class="hljs-attr">value</span>: <span class="hljs-string">"lee"</span>,
    <span class="hljs-attr">httpOnly</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">path</span>: <span class="hljs-string">"/"</span>,
  });
}
</code></pre>
<p>여기서 <code>httpOnly</code> 옵션은 클라이언트 JavaScript에서 쿠키에 접근하는 걸 막아서 보안에 도움이 되고, <code>secure</code> 옵션은 HTTPS 연결에서만 쿠키가 전송되도록 하는 거예요. 또, <code>path</code> 옵션을 지정하면 쿠키가 특정 경로에서만 유효하도록 할 수 있답니다.</p>
<hr>
<h3>알아두면 좋은 팁</h3>
<ul>
<li>이 API는 서버 측에서만 동작하기 때문에, 클라이언트 측에서 쿠키를 다루려면 <code>document.cookie</code>를 사용해야 해요.</li>
<li>쿠키는 보통 사용자 인증, 세션 관리, UI 상태 유지 등에 쓰이는데, 민감한 정보는 꼭 <code>httpOnly</code>나 <code>secure</code> 옵션을 함께 설정해서 노출되거나 탈취되지 않도록 주의하세요.</li>
<li>Next.js 13부터 도입된 이 <code>cookies</code> API는 사용하기 훨씬 편리해졌는데, 기존의 <code>set-cookie</code> 헤더 직접 조작보다 안정적이고 직관적이랍니다.</li>
</ul>
<hr>
<p>쿠키 다루기가 어려울 수 있는데, 이렇게 서버 컴포넌트 안에서 직관적으로 쓰니까 훨씬 편리해졌죠? 필요에 따라 쿠키를 갖고 놀아보세요! 혹시 더 궁금한 거 있으면 알려주세요.</p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h3>쿠키가 존재하는지 확인하기</h3>
<p>Next.js에서 쿠키가 있는지 확인하고 싶을 때는 <code>await cookies()</code> 메서드와 <code>has(name)</code> 메서드를 조합해서 사용하면 됩니다.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { cookies } <span class="hljs-keyword">from</span> <span class="hljs-string">"next/headers"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> cookieStore = <span class="hljs-keyword">await</span> <span class="hljs-title function_">cookies</span>();
  <span class="hljs-keyword">const</span> hasCookie = cookieStore.<span class="hljs-title function_">has</span>(<span class="hljs-string">"theme"</span>); <span class="hljs-comment">// 'theme' 쿠키가 있는지 확인</span>
  <span class="hljs-keyword">return</span> hasCookie ? <span class="hljs-string">"쿠키가 존재해요!"</span> : <span class="hljs-string">"쿠키가 없어요!"</span>;
}
</code></pre>
<p>위 코드처럼 간단하게 특정 이름의 쿠키가 있는지 true/false로 확인할 수 있어요. 서버 컴포넌트에서 쿠키를 읽거나 분기 처리를 해야 할 때 유용하죠.</p>
<hr>
<h3>쿠키 삭제하기</h3>
<p>쿠키를 삭제하려면 기본적으로는 만료일자를 과거로 설정해줘야 해요. 서버 측에서 쿠키를 삭제하는 방법을 살펴볼게요.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { cookies } <span class="hljs-keyword">from</span> <span class="hljs-string">"next/headers"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">DELETE</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> cookieStore = <span class="hljs-title function_">cookies</span>();
  cookieStore.<span class="hljs-title function_">delete</span>(<span class="hljs-string">"theme"</span>, { <span class="hljs-attr">path</span>: <span class="hljs-string">"/"</span> }); <span class="hljs-comment">// 'theme' 쿠키 삭제</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<span class="hljs-string">"쿠키 삭제됨"</span>, { <span class="hljs-attr">status</span>: <span class="hljs-number">200</span> });
}
</code></pre>
<ul>
<li><code>cookieStore.delete()</code> 메서드로 삭제할 쿠키 이름과 경로를 지정해주면 됩니다.</li>
<li>쿠키가 특정 경로나 도메인에 묶여 있다면, 삭제할 때도 그 경로나 도메인을 맞춰줘야 완전히 삭제가 돼요.</li>
<li>만약 클라이언트 쪽에서 쿠키를 삭제하고 싶다면, 자바스크립트의 <code>document.cookie = "name=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"</code> 같은 방법을 쓰면 됩니다.</li>
</ul>
<hr>
<h3>조금 더 알아두면 좋은 점</h3>
<ul>
<li>Next.js의 <code>cookies()</code>는 서버 컴포넌트나 API 라우트 등 서버 측에서만 사용할 수 있어요.</li>
<li>쿠키는 보안상 중요한 정보를 담기보다는 세션식별자나 사용자 선호 설정 정도로 사용하는 게 좋아요.</li>
<li><code>Secure</code>, <code>HttpOnly</code>, <code>SameSite</code> 같은 옵션도 꼭 설정해서 보안을 강화하는 습관을 들이면 좋답니다!</li>
</ul>
<p>다음에 쿠키 관련해서 직접 실습하면서 또 도움이 될 만한 팁을 공유할게요!</p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>쿠키를 삭제하는 방법에는 크게 세 가지가 있어요. 여기서는 그 중 두 가지를 소개해드릴게요.</p>
<h3>1. <code>delete()</code> 메서드 사용하기</h3>
<p>Next.js에서 제공하는 <code>cookies</code> 객체에 있는 <code>delete()</code> 메서드를 사용해서 간단하게 쿠키를 지울 수 있어요.</p>
<pre><code class="hljs language-js"><span class="hljs-string">"use server"</span>;

<span class="hljs-keyword">import</span> { cookies } <span class="hljs-keyword">from</span> <span class="hljs-string">"next/headers"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">deleteCookie</span>(<span class="hljs-params"></span>) {
  (<span class="hljs-keyword">await</span> <span class="hljs-title function_">cookies</span>()).<span class="hljs-title function_">delete</span>(<span class="hljs-string">"name"</span>); <span class="hljs-comment">// 'name'이라는 이름의 쿠키를 삭제해요.</span>
}
</code></pre>
<ul>
<li><code>await cookies()</code>를 호출해서 현재 쿠키 객체를 받아오고, 그 안에서 <code>delete('name')</code>을 호출해서 특정 쿠키를 삭제합니다.</li>
<li>서버 컴포넌트 또는 서버 함수 안에서만 쓸 수 있다는 점 참고하세요.</li>
</ul>
<h3>2. 같은 이름으로 빈 값 설정하기</h3>
<p>사실, 쿠키를 삭제하는 또 다른 방법은 같은 이름으로 빈 값을 설정하고 만료 시간을 과거로 설정하는 거예요. 이렇게 하면 브라우저가 해당 쿠키를 지우게 됩니다.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { cookies } <span class="hljs-keyword">from</span> <span class="hljs-string">"next/headers"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">deleteCookieBySetting</span>(<span class="hljs-params"></span>) {
  (<span class="hljs-keyword">await</span> <span class="hljs-title function_">cookies</span>()).<span class="hljs-title function_">set</span>({
    <span class="hljs-attr">name</span>: <span class="hljs-string">"name"</span>,
    <span class="hljs-attr">value</span>: <span class="hljs-string">""</span>, <span class="hljs-comment">// 빈 값으로 설정</span>
    <span class="hljs-attr">expires</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(<span class="hljs-number">0</span>), <span class="hljs-comment">// 만료 시간을 과거로 설정해서 즉시 만료</span>
    <span class="hljs-attr">path</span>: <span class="hljs-string">"/"</span>,
  });
}
</code></pre>
<ul>
<li><code>set()</code> 메서드를 이용해 만료 시점을 과거로 지정하면 쿠키가 삭제된 것과 같은 효과를 냅니다.</li>
<li>직접 쿠키 값을 칼같이 삭제하지 않아도 되니, 간단한 상황에 유용하죠.</li>
</ul>
<hr>
<h3>참고: 쿠키 삭제 시 주의할 점</h3>
<ul>
<li>쿠키는 도메인, 경로(path), 보안 설정(secure, httpOnly)에 따라 영향을 받습니다.</li>
<li>쿠키를 삭제할 때도 같은 도메인과 경로를 명시해줘야 확실히 삭제할 수 있어요.</li>
<li>만약 삭제가 제대로 안 된다면, 해당 쿠키의 <code>path</code>나 <code>domain</code> 설정을 다시 한 번 확인해 보세요.</li>
</ul>
<hr>
<p>쿠키를 다룰 때는 이렇게 여러 방법이 있으니, 상황에 맞게 골라 쓰시면 됩니다. 서버에서 직접 쿠키를 관리하는 경우라면 <code>delete()</code>를, 클라이언트 쪽에서는 빈 값과 만료 시간을 조정하는 방법이 인기가 많아요.</p>
<p>필요하면 다음에 세 번째 방법도 알려드릴게요!</p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p><code>Next.js</code>의 서버 컴포넌트에서 쿠키를 삭제하는 방법에 대해 알아볼게요. 보통 쿠키를 "삭제"하려면, 해당 쿠키의 만료 시간을 즉시 만료시키거나, 빈 값으로 덮어쓰는 두 가지 방법을 사용해요.</p>
<hr>
<h3>1. 쿠키를 빈 값으로 덮어쓰기</h3>
<p>아래 코드는 <code>cookies().set()</code> 메서드를 사용해서 쿠키 이름을 빈 문자열로 설정하는 예시입니다.
이렇게 하면 쿠키 값이 빈 문자열로 바뀌지만, 실제로 쿠키는 브라우저에 그대로 남아 있을 수 있어요.</p>
<pre><code class="hljs language-js"><span class="hljs-string">'use server'</span>

<span class="hljs-keyword">import</span> { cookies } <span class="hljs-keyword">from</span> <span class="hljs-string">'next/headers'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">delete</span>(<span class="hljs-params">data</span>) {
  (<span class="hljs-keyword">await</span> <span class="hljs-title function_">cookies</span>()).<span class="hljs-title function_">set</span>(<span class="hljs-string">'name'</span>, <span class="hljs-string">''</span>)
}
</code></pre>
<hr>
<h3>2. maxAge를 0으로 설정해 바로 만료시키기</h3>
<p>쿠키를 완전히 삭제하려면 <code>maxAge</code> 옵션을 0으로 설정해서 쿠키 만료 시간을 즉시 지난 값으로 설정하는 방법이 더 확실해요.</p>
<pre><code class="hljs language-js"><span class="hljs-string">'use server'</span>

<span class="hljs-keyword">import</span> { cookies } <span class="hljs-keyword">from</span> <span class="hljs-string">'next/headers'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">delete</span>(<span class="hljs-params">data</span>) {
  (<span class="hljs-keyword">await</span> <span class="hljs-title function_">cookies</span>()).<span class="hljs-title function_">set</span>(<span class="hljs-string">'name'</span>, <span class="hljs-string">'value'</span>, { <span class="hljs-attr">maxAge</span>: <span class="hljs-number">0</span> })
}
</code></pre>
<p><code>maxAge</code>는 초 단위로 시간을 받기 때문에 <code>0</code>을 주면 곧바로 만료 처리되는 거죠.</p>
<hr>
<h2>흔히 묻는 질문</h2>





















<table><thead><tr><th>질문</th><th>답변</th></tr></thead><tbody><tr><td><code>maxAge</code> 대신 <code>expires</code>를 써도 되나요?</td><td>네, 가능합니다. <code>expires</code>는 날짜 객체를 받아서 쿠키 만료 시간을 설정하는 방법이에요.</td></tr><tr><td>빈 문자열로 설정하면 쿠키가 삭제되나요?</td><td>사실상 값만 비워질 뿐 구버전 브라우저나 일부 환경에서는 쿠키가 살아 있을 수 있어요.</td></tr><tr><td><code>maxAge: 0</code> 와 <code>maxAge: -1</code> 차이는?</td><td>둘 다 쿠키를 즉시 만료시키지만, 보통 <code>0</code>을 사용해요. 음수는 브라우저에 따라 달라질 수 있어요.</td></tr></tbody></table>
<hr>
<h3>마무리</h3>
<p><code>Next.js</code> 13 서버 컴포넌트 기능에서 새로 제공하는 <code>cookies</code> API는 훨씬 간편하게 쿠키를 다룰 수 있도록 도와주지만, 조금만 주의하면 쿠키 삭제도 깔끔하게 할 수 있어요!</p>
<p>쿠키를 삭제할 땐 꼭 제대로 만료 시간을 설정해서, 원하지 않는 쿠키가 백그라운드에 남지 않도록 관리해주세요. 쿠키 조작에 대해 더 궁금한 점 있으면 언제든 물어봐주세요!</p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>아래는 <code>cookies</code> 관련 변경 사항을 정리한 표예요.</p>

















<table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td><code>v15.0.0-RC</code></td><td><code>cookies</code>가 이제 비동기(async) 함수로 변경되었어요. 업그레이드할 때 도움이 되는 <a href="/docs/app/guides/upgrading/codemods#150">codemod</a>도 제공됩니다.</td></tr><tr><td><code>v13.0.0</code></td><td><code>cookies</code> 기능이 처음 도입되었어요.</td></tr></tbody></table>
<p>참고로, <code>cookies</code>가 비동기 함수가 된 이유는 서버에서 쿠키를 처리할 때 비동기 작업이 필요한 경우가 많기 때문이에요. 예를 들어, 데이터베이스 조회나 외부 API 호출을 하면서 쿠키 값을 확인하거나 수정할 때 자연스럽게 비동기로 처리하는 게 더 효율적이죠.</p>
<p>이런 변경사항을 반영하지 않으면 기존에 동기 함수처럼 호출하던 코드에서 문제가 발생할 수 있으니, 꼭 공식 codemod를 활용해서 코드를 자동 변환해 보는 걸 추천드려요!</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Next.js 15에서 쿠키 쉽게 다루는 방법","description":"","date":"2025-04-22 03:00","slug":"2025-04-22-cookies","content":"\n# Cookies (쿠키)\n\n`cookies`는 Server Components에서 들어오는 HTTP 요청의 쿠키를 읽고, Server Actions나 Route Handlers에서는 나가는 요청의 쿠키를 읽거나 쓸 수 있게 해주는 비동기 함수입니다.\n\n간단히 말해서, 서버 측에서 쿠키를 다루고 싶을 때 아주 유용한 도구에요. 예를 들어, 사용자가 설정한 테마값을 쿠키로 저장하고, 페이지를 렌더링할 때 이 값을 가져와서 다르게 보여주고 싶을 때 사용할 수 있죠.\n\n```js\nimport { cookies } from \"next/headers\";\n\nexport default async function Page() {\n  const cookieStore = await cookies(); // 쿠키 저장소를 비동기적으로 가져옵니다.\n  const theme = cookieStore.get(\"theme\"); // 'theme'이라는 이름의 쿠키를 읽어옵니다.\n  return \"...\";\n}\n```\n\n위 예제에서 `cookieStore`는 실제 쿠키 데이터를 다룰 수 있는 객체를 반환해줘요. `get` 메서드를 통해 특정 쿠키 값을 읽을 수 있죠.\n\n---\n\n## 추가 팁 - 쿠키 다루기\n\n- **읽기 \u0026 쓰기**: Server Actions나 Route Handlers에서는 `cookieStore.set('name', 'value', options)`를 사용해 쿠키를 설정할 수 있어요. 예를 들어, 사용자 로그인 후 세션 정보를 쿠키로 저장하는 경우처럼요.\n- **옵션 설정**: 쿠키 설정 시 `path`, `httpOnly`, `secure`, `maxAge` 등 다양한 옵션을 줄 수 있습니다. 이를 통해 보안이나 쿠키 유효 기간 등을 조절할 수 있죠.\n\n- **실제 활용 예시**:\n\n```js\nimport { cookies } from \"next/headers\";\n\nexport async function POST() {\n  const cookieStore = cookies();\n  cookieStore.set(\"token\", \"abc123\", { httpOnly: true, maxAge: 60 * 60 * 24 }); // 1일 동안 유효한 쿠키\n  return new Response(\"쿠키가 설정되었습니다.\");\n}\n```\n\n---\n\n`cookies` 함수는 Next.js 최신 버전에서 Server Components, Server Actions, Route Handlers 같은 서버 환경에서 쿠키를 안전하고 편리하게 다룰 수 있게 설계된 기능입니다. 클라이언트에서 document.cookie를 직접 만지는 것보다 훨씬 안전하고 깔끔하니, 서버에서 쿠키 작업이 필요할 때 적극 활용해 보세요!\n\n\u003c!-- TIL 수평 --\u003e\n\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n### 메서드 소개\n\n아래는 사용할 수 있는 메서드들입니다:\n\n| 메서드                      | 반환 타입 | 설명                                                             |\n| --------------------------- | --------- | ---------------------------------------------------------------- |\n| `get('name')`               | Object    | 쿠키 이름을 받아서 그 이름과 값이 담긴 객체를 반환해요.          |\n| `getAll()`                  | 객체 배열 | 이름이 일치하는 모든 쿠키를 배열로 반환해줍니다.                 |\n| `has('name')`               | Boolean   | 쿠키 이름을 받아서 해당 쿠키가 존재하는지 true/false로 알려줘요. |\n| `set(name, value, options)` | -         | 쿠키 이름, 값, 옵션을 받아서 요청하는 쿠키를 설정합니다.         |\n| `delete(name)`              | -         | 쿠키 이름을 받아서 해당 쿠키를 삭제해줘요.                       |\n| `clear()`                   | -         | 모든 쿠키를 한 번에 삭제합니다.                                  |\n| `toString()`                | String    | 현재 쿠키들을 문자열 포맷으로 반환해줘요.                        |\n\n---\n\n직접 개발하다 보면 쿠키를 다루는 일이 꽤 잦을텐데, 이런 메서드들이 있으면 정말 편리하겠죠? 예를 들어, `has('name')` 메서드로 쿠키가 있는지 딱 체크해서 조건문을 쓰기도 쉽고, `getAll()` 메서드로 같은 이름을 가진 여러 쿠키를 모두 가져올 수도 있으니까 상황에 맞게 유용하게 쓸 수 있답니다.\n\n쿠키를 설정할 때는 `set()` 메서드에 옵션을 함께 넘겨주면, 유효 기간, 경로, 도메인 같은 세부 설정도 가능해서 제어가 한층 더 세밀해져요.\n\n이렇게 메서드들을 잘 활용하면 쿠키 관리를 훨씬 깔끔하게 할 수 있으니 참고하세요!\n\n\u003c!-- TIL 수평 --\u003e\n\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n쿠키(cookie)를 설정할 때 옵션 객체에서 사용할 수 있는 속성들은 아래와 같아요:\n\n| 옵션              | 타입                                   | 설명                                                                                    |\n| ----------------- | -------------------------------------- | --------------------------------------------------------------------------------------- |\n| `name`            | String                                 | 쿠키의 이름을 지정합니다.                                                               |\n| `value`           | String                                 | 쿠키에 저장할 값을 지정합니다.                                                          |\n| `expires`         | Date                                   | 쿠키 만료일을 정확하게 설정합니다.                                                      |\n| `maxAge`          | Number                                 | 쿠키의 수명(초 단위)을 설정합니다.                                                      |\n| `domain`          | String                                 | 쿠키가 유효한 도메인을 지정합니다.                                                      |\n| `path`            | String, 기본값: `'/'`                  | 쿠키의 유효 경로를 지정해 특정 경로 내에서만 쿠키가 사용되도록 제한할 수 있습니다.      |\n| `secure`          | Boolean                                | HTTPS 연결에서만 쿠키가 전송되도록 하여 보안을 강화합니다.                              |\n| `httpOnly`        | Boolean                                | 클라이언트 자바스크립트에서 쿠키 접근을 차단해 HTTP 요청에만 쿠키 사용을 제한합니다.    |\n| `sameSite`        | Boolean, `'lax'`, `'strict'`, `'none'` | 크로스 사이트 요청에 대한 쿠키 동작 방식을 제어합니다.                                  |\n| `priority`        | String (`\"low\"`, `\"medium\"`, `\"high\"`) | 쿠키의 우선순위를 지정합니다.                                                           |\n| `encode('value')` | Function                               | 쿠키 값을 인코딩하는 데 사용할 함수를 지정할 수 있습니다.                               |\n| `partitioned`     | Boolean                                | 쿠키가 [Partitioned Cookies](https://github.com/privacycg/CHIPS)인지 여부를 나타냅니다. |\n\n\u003e 여기서 `path` 옵션은 기본값이 `'/'`로 설정되어 있으니, 특정 경로에서만 쿠키가 유효하게 하려면 다른 값을 명시해줘야 해요.\n\n---\n\n### 좀 더 알려드릴 게 있어요!\n\n- **`secure` 옵션을 꼭 써야 하는 이유**  \n  쿠키가 HTTPS를 통해서만 전송될 수 있게 하는 `secure` 옵션은 민감한 정보 전송 시 보안을 크게 높여줍니다. 꼭 HTTPS 환경에서만 쿠키를 사용해야 할 경우 꼭 활성화해 주세요.\n\n- **`httpOnly`가 왜 중요한가?**  \n  `httpOnly` 속성을 활성화하면, 클라이언트 측 자바스크립트가 쿠키에 접근하지 못해서 XSS 공격에 의한 쿠키 탈취 위험을 줄일 수 있어요.\n\n- **`sameSite` 옵션으로 CSRF 방어하기**  \n  요즘은 크로스 사이트 요청 위조(CSRF) 공격 문제가 많기 때문에, `sameSite` 옵션을 `'lax'` 또는 `'strict'`로 설정하는 것이 보안에 도움이 됩니다.\n\n- **Partitioned Cookies**  \n  아직 상대적으로 최신 기술인 partitioned cookies는 브라우저별로 쿠키 저장소를 분리해서 사용자 간 추적을 어렵게 만드는 방향으로 연구되고 있습니다. 관심 있다면 GitHub 링크를 참고해 보세요!\n\n---\n\n쿠키 설정에 대해 더 자세한 내용은 [MDN 웹 문서](https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies)에서 확인하실 수 있어요. 여기에 다양한 사례와 권장하는 보안 설정 방법도 소개되어 있으니 참고하면 큰 도움이 됩니다!\n\n\u003c!-- TIL 수평 --\u003e\n\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n## 알아두면 좋은 팁들\n\n- `cookies` 함수는 비동기 함수이며, Promise를 반환해요. 그래서 `async/await`를 사용하거나 React의 `use` 함수를 활용해서 값을 받아와야 합니다.  \n  참고로 Next.js 14 버전 이전까지는 동기 함수였는데, Next.js 15 버전에서도 이전 버전 호환을 위해 동기 방식으로 사용하는 게 가능하지만, 앞으로 이 방식은 사라질 예정입니다.\n\n- `cookies` 함수는 동적 API에 속해 있어요. 반환값을 미리 알 수 없기 때문에, 레이아웃(layout)이나 페이지에서 사용하게 되면 해당 라우트(route)가 동적 렌더링(dynamic rendering)으로 변환됩니다.\n\n- `.delete` 메서드는 아래 조건에서만 사용할 수 있습니다:\n\n  1. 서버 액션(Server Action)이나 라우트 핸들러(Route Handler) 안에서 호출해야 합니다.\n  2. `.set`을 호출한 같은 도메인이어야 합니다. 만약 와일드카드 도메인(wildcard domain)을 사용한다면, 세부 서브도메인이 정확히 일치해야 하며, 같은 프로토콜(HTTP 또는 HTTPS)에서 실행되어야 합니다.\n\n- HTTP 프로토콜 특성상 스트리밍(streaming) 시작 이후에는 쿠키 설정이 불가능하므로, 쿠키를 설정할 때는 서버 액션이나 라우트 핸들러 내에서 `.set` 메서드를 호출해야 해요.\n\n---\n\n## 서버 컴포넌트에서 쿠키 동작 이해하기\n\n서버 컴포넌트(Server Components)에서 쿠키를 다룰 때 기억해야 할 점은, 쿠키가 기본적으로 **클라이언트 쪽 저장소**라는 사실입니다. 즉, 쿠키는 브라우저에 저장되어서 HTTP 요청과 함께 서버에 전달되는 데이터인데, 서버 컴포넌트는 서버에서 렌더링되기 때문에 쿠키 정보를 정확히 반영하기 위해선 쿠키를 비동기적으로 불러와야 해요.\n\n### 여기서 조금 더!\n\n서버 컴포넌트에서는 쿠키 데이터에 접근할 때마다 클라이언트(브라우저)에서 전송된 쿠키를 읽는 느낌이라고 생각하면 편합니다. 그래서 쿠키가 바뀌면 서버 컴포넌트도 동적으로 다시 렌더링할 수밖에 없어요. 이 과정이 바로 Next.js가 동적 API로 취급하는 이유죠.\n\n또한, 서버 컴포넌트 내에서 `cookies().get()` 같은 API를 편리하게 호출할 수 있게 됐지만, 이 과정이 비동기적 처리임을 잊지 마세요. 그래서 `async` 함수 안에서 쿠키를 다뤄야 하며, 그렇게 해서 받아온 값으로 컴포넌트를 렌더링해야 합니다.\n\n---\n\n이런 점들을 잘 이해하고 사용하면, Next.js에서 쿠키 기반 인증이나 세션 관리 같은 기능을 더 안정적이고 자연스럽게 구현할 수 있습니다! 궁금한 점 있으면 언제든 물어보세요! 😊\n\n\u003c!-- TIL 수평 --\u003e\n\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- 서버 컴포넌트(Server Components)에서 쿠키를 읽을 수 있는 이유는 클라이언트(브라우저)가 HTTP 요청 헤더에 쿠키 데이터를 함께 보내기 때문이에요. 즉, 서버 쪽에서 요청이 올 때 쿠키 정보를 받을 수 있는 거죠.\n- 하지만 서버 컴포넌트에서 쿠키를 직접 설정(set)하는 건 불가능해요. 심지어 라우트 핸들러(Route Handler)나 서버 액션(Server Action)을 써도 마찬가지예요. 왜냐하면 쿠키는 실제로 서버가 아니라 클라이언트, 즉 브라우저가 저장하기 때문입니다.\n\n서버는 클라이언트(브라우저)에게 `Set-Cookie`라는 응답 헤더를 통해 \"이 쿠키를 저장해 달라\"는 명령만 보낼 수 있어요. 쿠키 저장 자체는 브라우저가 처리하죠. 그래서 쿠키 상태를 변경하는 작업(예: `.set`, `.delete`, `.clear`)은 반드시 라우트 핸들러나 서버 액션 내에서 해야 해요. 그래야 응답 헤더를 통해 적절한 쿠키 저장 명령을 포함시킬 수 있기 때문입니다.\n\n---\n\n## 예제들\n\n### 쿠키 가져오기 (Getting a cookie)\n\n```tsx\nimport { cookies } from \"next/headers\";\n\nexport default function ServerComponent() {\n  const cookieStore = cookies();\n  const token = cookieStore.get(\"token\")?.value;\n\n  return \u003cdiv\u003e{token ? `토큰 값: ${token}` : \"토큰이 없습니다.\"}\u003c/div\u003e;\n}\n```\n\n위 예시는 서버 컴포넌트에서 쿠키를 읽는 간단한 방법을 보여줘요. 요청 헤더에서 쿠키 데이터를 받아서 `token`이라는 이름의 쿠키가 있으면 값을 보여주고, 없으면 '토큰이 없습니다'라는 메시지를 띄우는 식이죠.\n\n---\n\n### 쿠키 설정하기 (Setting a cookie) - 라우트 핸들러 예시\n\n```tsx\nimport { NextResponse } from \"next/server\";\n\nexport async function POST() {\n  const response = NextResponse.json({ message: \"쿠키가 설정되었습니다!\" });\n  response.cookies.set(\"token\", \"abc123\", { httpOnly: true, maxAge: 60 * 60 * 24 });\n\n  return response;\n}\n```\n\n쿠키를 설정하고 싶을 땐 서버 컴포넌트가 아니라 이런 라우트 핸들러에서 응답 헤더에 `Set-Cookie`를 포함시켜서 브라우저에게 전달해야 해요. `httpOnly` 옵션을 쓰면 자바스크립트에서 쿠키가 조작되는걸 막아 보안성을 높일 수도 있어요.\n\n---\n\n### 팁: 쿠키 사용 시 주의사항\n\n- 쿠키는 용량 제한(보통 4KB)이 있어 너무 많은 데이터를 넣으면 안 돼요.\n- 인증용 토큰 같은 민감한 정보는 `httpOnly`와 `secure` 옵션을 설정해 보안을 강화하세요.\n- 클라이언트에서 `document.cookie`로 접근 가능한 쿠키와 서버에서 읽는 쿠키가 다를 수 있으니 목적에 맞는 쿠키 설정이 필요합니다.\n\n---\n\n쿠키는 웹에서 사용자 상태와 인증 정보를 관리하는 데 정말 중요해요. 서버와 클라이언트가 함께 작동해야 하니까 이 점 꼭 기억하면서 코딩해 보세요!\n\n\u003c!-- TIL 수평 --\u003e\n\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nNext.js에서 쿠키를 다룰 때 `await cookies()` 메서드를 사용하면 편리하게 쿠키 값을 가져올 수 있어요.\n\n예를 들어, 특정 이름을 가진 쿠키 하나만 가져오고 싶다면 아래처럼 하면 됩니다:\n\n```js\nimport { cookies } from \"next/headers\";\n\nexport default async function Page() {\n  const cookieStore = await cookies();\n  const theme = cookieStore.get(\"theme\"); // 'theme'이라는 이름의 쿠키 가져오기\n  return \"...\";\n}\n```\n\n`cookieStore.get('name')`은 해당 이름을 가진 첫 번째 쿠키를 반환하고, 만약 쿠키가 없으면 `undefined`를 돌려주니 존재 여부를 꼭 체크해주는 게 좋아요.\n\n---\n\n### 여러 개 혹은 모든 쿠키 가져오기\n\n만약 특정 이름에 해당하는 쿠키가 여러 개 있거나, 아예 전부 다 가져오고 싶다면 `getAll()` 메서드를 사용하면 됩니다. 아래처럼 쓰면 되죠:\n\n```js\nconst allThemeCookies = cookieStore.getAll(\"theme\"); // 'theme'이라는 이름의 모든 쿠키 가져오기\nconst allCookies = cookieStore.getAll(); // 이름 지정 없이 모든 쿠키 가져오기\n```\n\n`getAll()`은 배열을 반환해주기 때문에, 여러 개의 같은 이름 쿠키를 한 번에 다루거나 쿠키를 일괄 처리할 때 유용해요.\n\n---\n\n### 참고 팁!\n\n- 서버 컴포넌트에서만 `next/headers` 모듈의 `cookies()`를 쓸 수 있습니다.\n- 클라이언트 사이드에서 쿠키를 읽으려면 일반적인 JavaScript `document.cookie`를 써야 한다는 점도 기억하세요.\n- 보안상 쿠키를 다룰 땐 HttpOnly, Secure 옵션들도 잘 설정하는 습관이 필요합니다.\n\n필요한 쿠키를 깔끔하게 가져와서 편리한 상태 관리나 유저 테마 설정 등에 활용해 보세요!\n\n\u003c!-- TIL 수평 --\u003e\n\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n자, Next.js 13에서 Cookies API를 사용하는 방법에 대해 이야기해볼게요. Server Component나 서버 관련 코드에서 쿠키를 쉽게 조회하고, 설정할 수 있는 예제인데요.\n\n먼저, 쿠키를 읽어오는 코드입니다:\n\n```jsx\nimport { cookies } from \"next/headers\";\n\nexport default async function Page() {\n  // 쿠키 스토어를 불러오고\n  const cookieStore = await cookies();\n\n  // 모든 쿠키를 가져와서 JSX로 렌더링합니다\n  return cookieStore.getAll().map((cookie) =\u003e (\n    \u003cdiv key={cookie.name}\u003e\n      \u003cp\u003eName: {cookie.name}\u003c/p\u003e\n      \u003cp\u003eValue: {cookie.value}\u003c/p\u003e\n    \u003c/div\u003e\n  ));\n}\n```\n\n여기서 `cookies()` 함수는 서버에서 현재 요청에 포함된 쿠키들을 읽어오는 API예요. `getAll()`을 호출하면 모든 쿠키가 배열로 반환되고, 각 쿠키는 이름과 값뿐만 아니라 추가 옵션들도 포함할 수 있어요. 이걸 React 컴포넌트에서 렌더링하는 거죠.\n\n---\n\n### 쿠키 설정하기\n\n이제 쿠키를 새로 설정하는 방법입니다. Next.js에서는 서버 액션이나 Route Handler 내부에서 `cookies().set()` 메서드를 사용해서 쿠키를 만들 수 있어요.\n\n```js\n\"use server\";\n\nimport { cookies } from \"next/headers\";\n\nexport async function create(data) {\n  const cookieStore = await cookies();\n\n  // 기본적으로 name이라는 이름과 'lee'라는 값으로 쿠키 설정\n  cookieStore.set(\"name\", \"lee\");\n\n  // secure 옵션(HTTPS에서만 전송)\n  cookieStore.set(\"name\", \"lee\", { secure: true });\n\n  // 좀 더 상세 옵션 지정 가능 (httpOnly, path 등)\n  cookieStore.set({\n    name: \"name\",\n    value: \"lee\",\n    httpOnly: true,\n    path: \"/\",\n  });\n}\n```\n\n여기서 `httpOnly` 옵션은 클라이언트 JavaScript에서 쿠키에 접근하는 걸 막아서 보안에 도움이 되고, `secure` 옵션은 HTTPS 연결에서만 쿠키가 전송되도록 하는 거예요. 또, `path` 옵션을 지정하면 쿠키가 특정 경로에서만 유효하도록 할 수 있답니다.\n\n---\n\n### 알아두면 좋은 팁\n\n- 이 API는 서버 측에서만 동작하기 때문에, 클라이언트 측에서 쿠키를 다루려면 `document.cookie`를 사용해야 해요.\n- 쿠키는 보통 사용자 인증, 세션 관리, UI 상태 유지 등에 쓰이는데, 민감한 정보는 꼭 `httpOnly`나 `secure` 옵션을 함께 설정해서 노출되거나 탈취되지 않도록 주의하세요.\n- Next.js 13부터 도입된 이 `cookies` API는 사용하기 훨씬 편리해졌는데, 기존의 `set-cookie` 헤더 직접 조작보다 안정적이고 직관적이랍니다.\n\n---\n\n쿠키 다루기가 어려울 수 있는데, 이렇게 서버 컴포넌트 안에서 직관적으로 쓰니까 훨씬 편리해졌죠? 필요에 따라 쿠키를 갖고 놀아보세요! 혹시 더 궁금한 거 있으면 알려주세요.\n\n\u003c!-- TIL 수평 --\u003e\n\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n### 쿠키가 존재하는지 확인하기\n\nNext.js에서 쿠키가 있는지 확인하고 싶을 때는 `await cookies()` 메서드와 `has(name)` 메서드를 조합해서 사용하면 됩니다.\n\n```js\nimport { cookies } from \"next/headers\";\n\nexport default async function Page() {\n  const cookieStore = await cookies();\n  const hasCookie = cookieStore.has(\"theme\"); // 'theme' 쿠키가 있는지 확인\n  return hasCookie ? \"쿠키가 존재해요!\" : \"쿠키가 없어요!\";\n}\n```\n\n위 코드처럼 간단하게 특정 이름의 쿠키가 있는지 true/false로 확인할 수 있어요. 서버 컴포넌트에서 쿠키를 읽거나 분기 처리를 해야 할 때 유용하죠.\n\n---\n\n### 쿠키 삭제하기\n\n쿠키를 삭제하려면 기본적으로는 만료일자를 과거로 설정해줘야 해요. 서버 측에서 쿠키를 삭제하는 방법을 살펴볼게요.\n\n```js\nimport { cookies } from \"next/headers\";\n\nexport async function DELETE() {\n  const cookieStore = cookies();\n  cookieStore.delete(\"theme\", { path: \"/\" }); // 'theme' 쿠키 삭제\n  return new Response(\"쿠키 삭제됨\", { status: 200 });\n}\n```\n\n- `cookieStore.delete()` 메서드로 삭제할 쿠키 이름과 경로를 지정해주면 됩니다.\n- 쿠키가 특정 경로나 도메인에 묶여 있다면, 삭제할 때도 그 경로나 도메인을 맞춰줘야 완전히 삭제가 돼요.\n- 만약 클라이언트 쪽에서 쿠키를 삭제하고 싶다면, 자바스크립트의 `document.cookie = \"name=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;\"` 같은 방법을 쓰면 됩니다.\n\n---\n\n### 조금 더 알아두면 좋은 점\n\n- Next.js의 `cookies()`는 서버 컴포넌트나 API 라우트 등 서버 측에서만 사용할 수 있어요.\n- 쿠키는 보안상 중요한 정보를 담기보다는 세션식별자나 사용자 선호 설정 정도로 사용하는 게 좋아요.\n- `Secure`, `HttpOnly`, `SameSite` 같은 옵션도 꼭 설정해서 보안을 강화하는 습관을 들이면 좋답니다!\n\n다음에 쿠키 관련해서 직접 실습하면서 또 도움이 될 만한 팁을 공유할게요!\n\n\u003c!-- TIL 수평 --\u003e\n\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n쿠키를 삭제하는 방법에는 크게 세 가지가 있어요. 여기서는 그 중 두 가지를 소개해드릴게요.\n\n### 1. `delete()` 메서드 사용하기\n\nNext.js에서 제공하는 `cookies` 객체에 있는 `delete()` 메서드를 사용해서 간단하게 쿠키를 지울 수 있어요.\n\n```js\n\"use server\";\n\nimport { cookies } from \"next/headers\";\n\nexport async function deleteCookie() {\n  (await cookies()).delete(\"name\"); // 'name'이라는 이름의 쿠키를 삭제해요.\n}\n```\n\n- `await cookies()`를 호출해서 현재 쿠키 객체를 받아오고, 그 안에서 `delete('name')`을 호출해서 특정 쿠키를 삭제합니다.\n- 서버 컴포넌트 또는 서버 함수 안에서만 쓸 수 있다는 점 참고하세요.\n\n### 2. 같은 이름으로 빈 값 설정하기\n\n사실, 쿠키를 삭제하는 또 다른 방법은 같은 이름으로 빈 값을 설정하고 만료 시간을 과거로 설정하는 거예요. 이렇게 하면 브라우저가 해당 쿠키를 지우게 됩니다.\n\n```js\nimport { cookies } from \"next/headers\";\n\nexport async function deleteCookieBySetting() {\n  (await cookies()).set({\n    name: \"name\",\n    value: \"\", // 빈 값으로 설정\n    expires: new Date(0), // 만료 시간을 과거로 설정해서 즉시 만료\n    path: \"/\",\n  });\n}\n```\n\n- `set()` 메서드를 이용해 만료 시점을 과거로 지정하면 쿠키가 삭제된 것과 같은 효과를 냅니다.\n- 직접 쿠키 값을 칼같이 삭제하지 않아도 되니, 간단한 상황에 유용하죠.\n\n---\n\n### 참고: 쿠키 삭제 시 주의할 점\n\n- 쿠키는 도메인, 경로(path), 보안 설정(secure, httpOnly)에 따라 영향을 받습니다.\n- 쿠키를 삭제할 때도 같은 도메인과 경로를 명시해줘야 확실히 삭제할 수 있어요.\n- 만약 삭제가 제대로 안 된다면, 해당 쿠키의 `path`나 `domain` 설정을 다시 한 번 확인해 보세요.\n\n---\n\n쿠키를 다룰 때는 이렇게 여러 방법이 있으니, 상황에 맞게 골라 쓰시면 됩니다. 서버에서 직접 쿠키를 관리하는 경우라면 `delete()`를, 클라이언트 쪽에서는 빈 값과 만료 시간을 조정하는 방법이 인기가 많아요.\n\n필요하면 다음에 세 번째 방법도 알려드릴게요!\n\n\u003c!-- TIL 수평 --\u003e\n\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n`Next.js`의 서버 컴포넌트에서 쿠키를 삭제하는 방법에 대해 알아볼게요. 보통 쿠키를 \"삭제\"하려면, 해당 쿠키의 만료 시간을 즉시 만료시키거나, 빈 값으로 덮어쓰는 두 가지 방법을 사용해요.\n\n---\n\n### 1. 쿠키를 빈 값으로 덮어쓰기\n\n아래 코드는 `cookies().set()` 메서드를 사용해서 쿠키 이름을 빈 문자열로 설정하는 예시입니다.\n이렇게 하면 쿠키 값이 빈 문자열로 바뀌지만, 실제로 쿠키는 브라우저에 그대로 남아 있을 수 있어요.\n\n```js\n'use server'\n\nimport { cookies } from 'next/headers'\n\nexport async function delete(data) {\n  (await cookies()).set('name', '')\n}\n```\n\n---\n\n### 2. maxAge를 0으로 설정해 바로 만료시키기\n\n쿠키를 완전히 삭제하려면 `maxAge` 옵션을 0으로 설정해서 쿠키 만료 시간을 즉시 지난 값으로 설정하는 방법이 더 확실해요.\n\n```js\n'use server'\n\nimport { cookies } from 'next/headers'\n\nexport async function delete(data) {\n  (await cookies()).set('name', 'value', { maxAge: 0 })\n}\n```\n\n`maxAge`는 초 단위로 시간을 받기 때문에 `0`을 주면 곧바로 만료 처리되는 거죠.\n\n---\n\n## 흔히 묻는 질문\n\n| 질문                                    | 답변                                                                                          |\n| --------------------------------------- | --------------------------------------------------------------------------------------------- |\n| `maxAge` 대신 `expires`를 써도 되나요?  | 네, 가능합니다. `expires`는 날짜 객체를 받아서 쿠키 만료 시간을 설정하는 방법이에요.          |\n| 빈 문자열로 설정하면 쿠키가 삭제되나요? | 사실상 값만 비워질 뿐 구버전 브라우저나 일부 환경에서는 쿠키가 살아 있을 수 있어요.           |\n| `maxAge: 0` 와 `maxAge: -1` 차이는?     | 둘 다 쿠키를 즉시 만료시키지만, 보통 `0`을 사용해요. 음수는 브라우저에 따라 달라질 수 있어요. |\n\n---\n\n### 마무리\n\n`Next.js` 13 서버 컴포넌트 기능에서 새로 제공하는 `cookies` API는 훨씬 간편하게 쿠키를 다룰 수 있도록 도와주지만, 조금만 주의하면 쿠키 삭제도 깔끔하게 할 수 있어요!\n\n쿠키를 삭제할 땐 꼭 제대로 만료 시간을 설정해서, 원하지 않는 쿠키가 백그라운드에 남지 않도록 관리해주세요. 쿠키 조작에 대해 더 궁금한 점 있으면 언제든 물어봐주세요!\n\n\u003c!-- TIL 수평 --\u003e\n\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n아래는 `cookies` 관련 변경 사항을 정리한 표예요.\n\n| Version      | Changes                                                                                                                                                     |\n| ------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| `v15.0.0-RC` | `cookies`가 이제 비동기(async) 함수로 변경되었어요. 업그레이드할 때 도움이 되는 \u003ca href=\"/docs/app/guides/upgrading/codemods#150\"\u003ecodemod\u003c/a\u003e도 제공됩니다. |\n| `v13.0.0`    | `cookies` 기능이 처음 도입되었어요.                                                                                                                         |\n\n참고로, `cookies`가 비동기 함수가 된 이유는 서버에서 쿠키를 처리할 때 비동기 작업이 필요한 경우가 많기 때문이에요. 예를 들어, 데이터베이스 조회나 외부 API 호출을 하면서 쿠키 값을 확인하거나 수정할 때 자연스럽게 비동기로 처리하는 게 더 효율적이죠.\n\n이런 변경사항을 반영하지 않으면 기존에 동기 함수처럼 호출하던 코드에서 문제가 발생할 수 있으니, 꼭 공식 codemod를 활용해서 코드를 자동 변환해 보는 걸 추천드려요!\n","ogImage":{"url":"/TIL/assets/img/nextjs.png"},"coverImage":"/TIL/assets/img/nextjs.png","tag":["Tech"],"readingTime":20},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003ch1\u003eCookies (쿠키)\u003c/h1\u003e\n\u003cp\u003e\u003ccode\u003ecookies\u003c/code\u003e는 Server Components에서 들어오는 HTTP 요청의 쿠키를 읽고, Server Actions나 Route Handlers에서는 나가는 요청의 쿠키를 읽거나 쓸 수 있게 해주는 비동기 함수입니다.\u003c/p\u003e\n\u003cp\u003e간단히 말해서, 서버 측에서 쿠키를 다루고 싶을 때 아주 유용한 도구에요. 예를 들어, 사용자가 설정한 테마값을 쿠키로 저장하고, 페이지를 렌더링할 때 이 값을 가져와서 다르게 보여주고 싶을 때 사용할 수 있죠.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { cookies } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"next/headers\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ePage\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e cookieStore = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ecookies\u003c/span\u003e(); \u003cspan class=\"hljs-comment\"\u003e// 쿠키 저장소를 비동기적으로 가져옵니다.\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e theme = cookieStore.\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"theme\"\u003c/span\u003e); \u003cspan class=\"hljs-comment\"\u003e// 'theme'이라는 이름의 쿠키를 읽어옵니다.\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"...\"\u003c/span\u003e;\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e위 예제에서 \u003ccode\u003ecookieStore\u003c/code\u003e는 실제 쿠키 데이터를 다룰 수 있는 객체를 반환해줘요. \u003ccode\u003eget\u003c/code\u003e 메서드를 통해 특정 쿠키 값을 읽을 수 있죠.\u003c/p\u003e\n\u003chr\u003e\n\u003ch2\u003e추가 팁 - 쿠키 다루기\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e읽기 \u0026#x26; 쓰기\u003c/strong\u003e: Server Actions나 Route Handlers에서는 \u003ccode\u003ecookieStore.set('name', 'value', options)\u003c/code\u003e를 사용해 쿠키를 설정할 수 있어요. 예를 들어, 사용자 로그인 후 세션 정보를 쿠키로 저장하는 경우처럼요.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e옵션 설정\u003c/strong\u003e: 쿠키 설정 시 \u003ccode\u003epath\u003c/code\u003e, \u003ccode\u003ehttpOnly\u003c/code\u003e, \u003ccode\u003esecure\u003c/code\u003e, \u003ccode\u003emaxAge\u003c/code\u003e 등 다양한 옵션을 줄 수 있습니다. 이를 통해 보안이나 쿠키 유효 기간 등을 조절할 수 있죠.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e실제 활용 예시\u003c/strong\u003e:\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { cookies } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"next/headers\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ePOST\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e cookieStore = \u003cspan class=\"hljs-title function_\"\u003ecookies\u003c/span\u003e();\n  cookieStore.\u003cspan class=\"hljs-title function_\"\u003eset\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"token\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"abc123\"\u003c/span\u003e, { \u003cspan class=\"hljs-attr\"\u003ehttpOnly\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003emaxAge\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e60\u003c/span\u003e * \u003cspan class=\"hljs-number\"\u003e60\u003c/span\u003e * \u003cspan class=\"hljs-number\"\u003e24\u003c/span\u003e }); \u003cspan class=\"hljs-comment\"\u003e// 1일 동안 유효한 쿠키\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eResponse\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"쿠키가 설정되었습니다.\"\u003c/span\u003e);\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003cp\u003e\u003ccode\u003ecookies\u003c/code\u003e 함수는 Next.js 최신 버전에서 Server Components, Server Actions, Route Handlers 같은 서버 환경에서 쿠키를 안전하고 편리하게 다룰 수 있게 설계된 기능입니다. 클라이언트에서 document.cookie를 직접 만지는 것보다 훨씬 안전하고 깔끔하니, 서버에서 쿠키 작업이 필요할 때 적극 활용해 보세요!\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch3\u003e메서드 소개\u003c/h3\u003e\n\u003cp\u003e아래는 사용할 수 있는 메서드들입니다:\u003c/p\u003e\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003ctable\u003e\u003cthead\u003e\u003ctr\u003e\u003cth\u003e메서드\u003c/th\u003e\u003cth\u003e반환 타입\u003c/th\u003e\u003cth\u003e설명\u003c/th\u003e\u003c/tr\u003e\u003c/thead\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd\u003e\u003ccode\u003eget('name')\u003c/code\u003e\u003c/td\u003e\u003ctd\u003eObject\u003c/td\u003e\u003ctd\u003e쿠키 이름을 받아서 그 이름과 값이 담긴 객체를 반환해요.\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003ccode\u003egetAll()\u003c/code\u003e\u003c/td\u003e\u003ctd\u003e객체 배열\u003c/td\u003e\u003ctd\u003e이름이 일치하는 모든 쿠키를 배열로 반환해줍니다.\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003ccode\u003ehas('name')\u003c/code\u003e\u003c/td\u003e\u003ctd\u003eBoolean\u003c/td\u003e\u003ctd\u003e쿠키 이름을 받아서 해당 쿠키가 존재하는지 true/false로 알려줘요.\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003ccode\u003eset(name, value, options)\u003c/code\u003e\u003c/td\u003e\u003ctd\u003e-\u003c/td\u003e\u003ctd\u003e쿠키 이름, 값, 옵션을 받아서 요청하는 쿠키를 설정합니다.\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003ccode\u003edelete(name)\u003c/code\u003e\u003c/td\u003e\u003ctd\u003e-\u003c/td\u003e\u003ctd\u003e쿠키 이름을 받아서 해당 쿠키를 삭제해줘요.\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003ccode\u003eclear()\u003c/code\u003e\u003c/td\u003e\u003ctd\u003e-\u003c/td\u003e\u003ctd\u003e모든 쿠키를 한 번에 삭제합니다.\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003ccode\u003etoString()\u003c/code\u003e\u003c/td\u003e\u003ctd\u003eString\u003c/td\u003e\u003ctd\u003e현재 쿠키들을 문자열 포맷으로 반환해줘요.\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\u003chr\u003e\n\u003cp\u003e직접 개발하다 보면 쿠키를 다루는 일이 꽤 잦을텐데, 이런 메서드들이 있으면 정말 편리하겠죠? 예를 들어, \u003ccode\u003ehas('name')\u003c/code\u003e 메서드로 쿠키가 있는지 딱 체크해서 조건문을 쓰기도 쉽고, \u003ccode\u003egetAll()\u003c/code\u003e 메서드로 같은 이름을 가진 여러 쿠키를 모두 가져올 수도 있으니까 상황에 맞게 유용하게 쓸 수 있답니다.\u003c/p\u003e\n\u003cp\u003e쿠키를 설정할 때는 \u003ccode\u003eset()\u003c/code\u003e 메서드에 옵션을 함께 넘겨주면, 유효 기간, 경로, 도메인 같은 세부 설정도 가능해서 제어가 한층 더 세밀해져요.\u003c/p\u003e\n\u003cp\u003e이렇게 메서드들을 잘 활용하면 쿠키 관리를 훨씬 깔끔하게 할 수 있으니 참고하세요!\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e쿠키(cookie)를 설정할 때 옵션 객체에서 사용할 수 있는 속성들은 아래와 같아요:\u003c/p\u003e\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003ctable\u003e\u003cthead\u003e\u003ctr\u003e\u003cth\u003e옵션\u003c/th\u003e\u003cth\u003e타입\u003c/th\u003e\u003cth\u003e설명\u003c/th\u003e\u003c/tr\u003e\u003c/thead\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd\u003e\u003ccode\u003ename\u003c/code\u003e\u003c/td\u003e\u003ctd\u003eString\u003c/td\u003e\u003ctd\u003e쿠키의 이름을 지정합니다.\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003ccode\u003evalue\u003c/code\u003e\u003c/td\u003e\u003ctd\u003eString\u003c/td\u003e\u003ctd\u003e쿠키에 저장할 값을 지정합니다.\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003ccode\u003eexpires\u003c/code\u003e\u003c/td\u003e\u003ctd\u003eDate\u003c/td\u003e\u003ctd\u003e쿠키 만료일을 정확하게 설정합니다.\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003ccode\u003emaxAge\u003c/code\u003e\u003c/td\u003e\u003ctd\u003eNumber\u003c/td\u003e\u003ctd\u003e쿠키의 수명(초 단위)을 설정합니다.\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003ccode\u003edomain\u003c/code\u003e\u003c/td\u003e\u003ctd\u003eString\u003c/td\u003e\u003ctd\u003e쿠키가 유효한 도메인을 지정합니다.\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003ccode\u003epath\u003c/code\u003e\u003c/td\u003e\u003ctd\u003eString, 기본값: \u003ccode\u003e'/'\u003c/code\u003e\u003c/td\u003e\u003ctd\u003e쿠키의 유효 경로를 지정해 특정 경로 내에서만 쿠키가 사용되도록 제한할 수 있습니다.\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003ccode\u003esecure\u003c/code\u003e\u003c/td\u003e\u003ctd\u003eBoolean\u003c/td\u003e\u003ctd\u003eHTTPS 연결에서만 쿠키가 전송되도록 하여 보안을 강화합니다.\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003ccode\u003ehttpOnly\u003c/code\u003e\u003c/td\u003e\u003ctd\u003eBoolean\u003c/td\u003e\u003ctd\u003e클라이언트 자바스크립트에서 쿠키 접근을 차단해 HTTP 요청에만 쿠키 사용을 제한합니다.\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003ccode\u003esameSite\u003c/code\u003e\u003c/td\u003e\u003ctd\u003eBoolean, \u003ccode\u003e'lax'\u003c/code\u003e, \u003ccode\u003e'strict'\u003c/code\u003e, \u003ccode\u003e'none'\u003c/code\u003e\u003c/td\u003e\u003ctd\u003e크로스 사이트 요청에 대한 쿠키 동작 방식을 제어합니다.\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003ccode\u003epriority\u003c/code\u003e\u003c/td\u003e\u003ctd\u003eString (\u003ccode\u003e\"low\"\u003c/code\u003e, \u003ccode\u003e\"medium\"\u003c/code\u003e, \u003ccode\u003e\"high\"\u003c/code\u003e)\u003c/td\u003e\u003ctd\u003e쿠키의 우선순위를 지정합니다.\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003ccode\u003eencode('value')\u003c/code\u003e\u003c/td\u003e\u003ctd\u003eFunction\u003c/td\u003e\u003ctd\u003e쿠키 값을 인코딩하는 데 사용할 함수를 지정할 수 있습니다.\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003ccode\u003epartitioned\u003c/code\u003e\u003c/td\u003e\u003ctd\u003eBoolean\u003c/td\u003e\u003ctd\u003e쿠키가 \u003ca href=\"https://github.com/privacycg/CHIPS\" rel=\"nofollow\" target=\"_blank\"\u003ePartitioned Cookies\u003c/a\u003e인지 여부를 나타냅니다.\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\u003cblockquote\u003e\n\u003cp\u003e여기서 \u003ccode\u003epath\u003c/code\u003e 옵션은 기본값이 \u003ccode\u003e'/'\u003c/code\u003e로 설정되어 있으니, 특정 경로에서만 쿠키가 유효하게 하려면 다른 값을 명시해줘야 해요.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003chr\u003e\n\u003ch3\u003e좀 더 알려드릴 게 있어요!\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e\u003ccode\u003esecure\u003c/code\u003e 옵션을 꼭 써야 하는 이유\u003c/strong\u003e\u003cbr\u003e\n쿠키가 HTTPS를 통해서만 전송될 수 있게 하는 \u003ccode\u003esecure\u003c/code\u003e 옵션은 민감한 정보 전송 시 보안을 크게 높여줍니다. 꼭 HTTPS 환경에서만 쿠키를 사용해야 할 경우 꼭 활성화해 주세요.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e\u003ccode\u003ehttpOnly\u003c/code\u003e가 왜 중요한가?\u003c/strong\u003e\u003cbr\u003e\n\u003ccode\u003ehttpOnly\u003c/code\u003e 속성을 활성화하면, 클라이언트 측 자바스크립트가 쿠키에 접근하지 못해서 XSS 공격에 의한 쿠키 탈취 위험을 줄일 수 있어요.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e\u003ccode\u003esameSite\u003c/code\u003e 옵션으로 CSRF 방어하기\u003c/strong\u003e\u003cbr\u003e\n요즘은 크로스 사이트 요청 위조(CSRF) 공격 문제가 많기 때문에, \u003ccode\u003esameSite\u003c/code\u003e 옵션을 \u003ccode\u003e'lax'\u003c/code\u003e 또는 \u003ccode\u003e'strict'\u003c/code\u003e로 설정하는 것이 보안에 도움이 됩니다.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003ePartitioned Cookies\u003c/strong\u003e\u003cbr\u003e\n아직 상대적으로 최신 기술인 partitioned cookies는 브라우저별로 쿠키 저장소를 분리해서 사용자 간 추적을 어렵게 만드는 방향으로 연구되고 있습니다. 관심 있다면 GitHub 링크를 참고해 보세요!\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003cp\u003e쿠키 설정에 대해 더 자세한 내용은 \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies\" rel=\"nofollow\" target=\"_blank\"\u003eMDN 웹 문서\u003c/a\u003e에서 확인하실 수 있어요. 여기에 다양한 사례와 권장하는 보안 설정 방법도 소개되어 있으니 참고하면 큰 도움이 됩니다!\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch2\u003e알아두면 좋은 팁들\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003ecookies\u003c/code\u003e 함수는 비동기 함수이며, Promise를 반환해요. 그래서 \u003ccode\u003easync/await\u003c/code\u003e를 사용하거나 React의 \u003ccode\u003euse\u003c/code\u003e 함수를 활용해서 값을 받아와야 합니다.\u003cbr\u003e\n참고로 Next.js 14 버전 이전까지는 동기 함수였는데, Next.js 15 버전에서도 이전 버전 호환을 위해 동기 방식으로 사용하는 게 가능하지만, 앞으로 이 방식은 사라질 예정입니다.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003ecookies\u003c/code\u003e 함수는 동적 API에 속해 있어요. 반환값을 미리 알 수 없기 때문에, 레이아웃(layout)이나 페이지에서 사용하게 되면 해당 라우트(route)가 동적 렌더링(dynamic rendering)으로 변환됩니다.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003e.delete\u003c/code\u003e 메서드는 아래 조건에서만 사용할 수 있습니다:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e서버 액션(Server Action)이나 라우트 핸들러(Route Handler) 안에서 호출해야 합니다.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e.set\u003c/code\u003e을 호출한 같은 도메인이어야 합니다. 만약 와일드카드 도메인(wildcard domain)을 사용한다면, 세부 서브도메인이 정확히 일치해야 하며, 같은 프로토콜(HTTP 또는 HTTPS)에서 실행되어야 합니다.\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eHTTP 프로토콜 특성상 스트리밍(streaming) 시작 이후에는 쿠키 설정이 불가능하므로, 쿠키를 설정할 때는 서버 액션이나 라우트 핸들러 내에서 \u003ccode\u003e.set\u003c/code\u003e 메서드를 호출해야 해요.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch2\u003e서버 컴포넌트에서 쿠키 동작 이해하기\u003c/h2\u003e\n\u003cp\u003e서버 컴포넌트(Server Components)에서 쿠키를 다룰 때 기억해야 할 점은, 쿠키가 기본적으로 \u003cstrong\u003e클라이언트 쪽 저장소\u003c/strong\u003e라는 사실입니다. 즉, 쿠키는 브라우저에 저장되어서 HTTP 요청과 함께 서버에 전달되는 데이터인데, 서버 컴포넌트는 서버에서 렌더링되기 때문에 쿠키 정보를 정확히 반영하기 위해선 쿠키를 비동기적으로 불러와야 해요.\u003c/p\u003e\n\u003ch3\u003e여기서 조금 더!\u003c/h3\u003e\n\u003cp\u003e서버 컴포넌트에서는 쿠키 데이터에 접근할 때마다 클라이언트(브라우저)에서 전송된 쿠키를 읽는 느낌이라고 생각하면 편합니다. 그래서 쿠키가 바뀌면 서버 컴포넌트도 동적으로 다시 렌더링할 수밖에 없어요. 이 과정이 바로 Next.js가 동적 API로 취급하는 이유죠.\u003c/p\u003e\n\u003cp\u003e또한, 서버 컴포넌트 내에서 \u003ccode\u003ecookies().get()\u003c/code\u003e 같은 API를 편리하게 호출할 수 있게 됐지만, 이 과정이 비동기적 처리임을 잊지 마세요. 그래서 \u003ccode\u003easync\u003c/code\u003e 함수 안에서 쿠키를 다뤄야 하며, 그렇게 해서 받아온 값으로 컴포넌트를 렌더링해야 합니다.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003e이런 점들을 잘 이해하고 사용하면, Next.js에서 쿠키 기반 인증이나 세션 관리 같은 기능을 더 안정적이고 자연스럽게 구현할 수 있습니다! 궁금한 점 있으면 언제든 물어보세요! 😊\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003e서버 컴포넌트(Server Components)에서 쿠키를 읽을 수 있는 이유는 클라이언트(브라우저)가 HTTP 요청 헤더에 쿠키 데이터를 함께 보내기 때문이에요. 즉, 서버 쪽에서 요청이 올 때 쿠키 정보를 받을 수 있는 거죠.\u003c/li\u003e\n\u003cli\u003e하지만 서버 컴포넌트에서 쿠키를 직접 설정(set)하는 건 불가능해요. 심지어 라우트 핸들러(Route Handler)나 서버 액션(Server Action)을 써도 마찬가지예요. 왜냐하면 쿠키는 실제로 서버가 아니라 클라이언트, 즉 브라우저가 저장하기 때문입니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e서버는 클라이언트(브라우저)에게 \u003ccode\u003eSet-Cookie\u003c/code\u003e라는 응답 헤더를 통해 \"이 쿠키를 저장해 달라\"는 명령만 보낼 수 있어요. 쿠키 저장 자체는 브라우저가 처리하죠. 그래서 쿠키 상태를 변경하는 작업(예: \u003ccode\u003e.set\u003c/code\u003e, \u003ccode\u003e.delete\u003c/code\u003e, \u003ccode\u003e.clear\u003c/code\u003e)은 반드시 라우트 핸들러나 서버 액션 내에서 해야 해요. 그래야 응답 헤더를 통해 적절한 쿠키 저장 명령을 포함시킬 수 있기 때문입니다.\u003c/p\u003e\n\u003chr\u003e\n\u003ch2\u003e예제들\u003c/h2\u003e\n\u003ch3\u003e쿠키 가져오기 (Getting a cookie)\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-tsx\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { cookies } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"next/headers\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eServerComponent\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e cookieStore = \u003cspan class=\"hljs-title function_\"\u003ecookies\u003c/span\u003e();\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e token = cookieStore.\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"token\"\u003c/span\u003e)?.\u003cspan class=\"hljs-property\"\u003evalue\u003c/span\u003e;\n\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003e{token ? `토큰 값: ${token}` : \"토큰이 없습니다.\"}\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003e\u003c/span\u003e;\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e위 예시는 서버 컴포넌트에서 쿠키를 읽는 간단한 방법을 보여줘요. 요청 헤더에서 쿠키 데이터를 받아서 \u003ccode\u003etoken\u003c/code\u003e이라는 이름의 쿠키가 있으면 값을 보여주고, 없으면 '토큰이 없습니다'라는 메시지를 띄우는 식이죠.\u003c/p\u003e\n\u003chr\u003e\n\u003ch3\u003e쿠키 설정하기 (Setting a cookie) - 라우트 핸들러 예시\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-tsx\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eNextResponse\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"next/server\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ePOST\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e response = \u003cspan class=\"hljs-title class_\"\u003eNextResponse\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003emessage\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"쿠키가 설정되었습니다!\"\u003c/span\u003e });\n  response.\u003cspan class=\"hljs-property\"\u003ecookies\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eset\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"token\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"abc123\"\u003c/span\u003e, { \u003cspan class=\"hljs-attr\"\u003ehttpOnly\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003emaxAge\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e60\u003c/span\u003e * \u003cspan class=\"hljs-number\"\u003e60\u003c/span\u003e * \u003cspan class=\"hljs-number\"\u003e24\u003c/span\u003e });\n\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e response;\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e쿠키를 설정하고 싶을 땐 서버 컴포넌트가 아니라 이런 라우트 핸들러에서 응답 헤더에 \u003ccode\u003eSet-Cookie\u003c/code\u003e를 포함시켜서 브라우저에게 전달해야 해요. \u003ccode\u003ehttpOnly\u003c/code\u003e 옵션을 쓰면 자바스크립트에서 쿠키가 조작되는걸 막아 보안성을 높일 수도 있어요.\u003c/p\u003e\n\u003chr\u003e\n\u003ch3\u003e팁: 쿠키 사용 시 주의사항\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e쿠키는 용량 제한(보통 4KB)이 있어 너무 많은 데이터를 넣으면 안 돼요.\u003c/li\u003e\n\u003cli\u003e인증용 토큰 같은 민감한 정보는 \u003ccode\u003ehttpOnly\u003c/code\u003e와 \u003ccode\u003esecure\u003c/code\u003e 옵션을 설정해 보안을 강화하세요.\u003c/li\u003e\n\u003cli\u003e클라이언트에서 \u003ccode\u003edocument.cookie\u003c/code\u003e로 접근 가능한 쿠키와 서버에서 읽는 쿠키가 다를 수 있으니 목적에 맞는 쿠키 설정이 필요합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003cp\u003e쿠키는 웹에서 사용자 상태와 인증 정보를 관리하는 데 정말 중요해요. 서버와 클라이언트가 함께 작동해야 하니까 이 점 꼭 기억하면서 코딩해 보세요!\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eNext.js에서 쿠키를 다룰 때 \u003ccode\u003eawait cookies()\u003c/code\u003e 메서드를 사용하면 편리하게 쿠키 값을 가져올 수 있어요.\u003c/p\u003e\n\u003cp\u003e예를 들어, 특정 이름을 가진 쿠키 하나만 가져오고 싶다면 아래처럼 하면 됩니다:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { cookies } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"next/headers\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ePage\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e cookieStore = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ecookies\u003c/span\u003e();\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e theme = cookieStore.\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"theme\"\u003c/span\u003e); \u003cspan class=\"hljs-comment\"\u003e// 'theme'이라는 이름의 쿠키 가져오기\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"...\"\u003c/span\u003e;\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003ecookieStore.get('name')\u003c/code\u003e은 해당 이름을 가진 첫 번째 쿠키를 반환하고, 만약 쿠키가 없으면 \u003ccode\u003eundefined\u003c/code\u003e를 돌려주니 존재 여부를 꼭 체크해주는 게 좋아요.\u003c/p\u003e\n\u003chr\u003e\n\u003ch3\u003e여러 개 혹은 모든 쿠키 가져오기\u003c/h3\u003e\n\u003cp\u003e만약 특정 이름에 해당하는 쿠키가 여러 개 있거나, 아예 전부 다 가져오고 싶다면 \u003ccode\u003egetAll()\u003c/code\u003e 메서드를 사용하면 됩니다. 아래처럼 쓰면 되죠:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e allThemeCookies = cookieStore.\u003cspan class=\"hljs-title function_\"\u003egetAll\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"theme\"\u003c/span\u003e); \u003cspan class=\"hljs-comment\"\u003e// 'theme'이라는 이름의 모든 쿠키 가져오기\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e allCookies = cookieStore.\u003cspan class=\"hljs-title function_\"\u003egetAll\u003c/span\u003e(); \u003cspan class=\"hljs-comment\"\u003e// 이름 지정 없이 모든 쿠키 가져오기\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003egetAll()\u003c/code\u003e은 배열을 반환해주기 때문에, 여러 개의 같은 이름 쿠키를 한 번에 다루거나 쿠키를 일괄 처리할 때 유용해요.\u003c/p\u003e\n\u003chr\u003e\n\u003ch3\u003e참고 팁!\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e서버 컴포넌트에서만 \u003ccode\u003enext/headers\u003c/code\u003e 모듈의 \u003ccode\u003ecookies()\u003c/code\u003e를 쓸 수 있습니다.\u003c/li\u003e\n\u003cli\u003e클라이언트 사이드에서 쿠키를 읽으려면 일반적인 JavaScript \u003ccode\u003edocument.cookie\u003c/code\u003e를 써야 한다는 점도 기억하세요.\u003c/li\u003e\n\u003cli\u003e보안상 쿠키를 다룰 땐 HttpOnly, Secure 옵션들도 잘 설정하는 습관이 필요합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e필요한 쿠키를 깔끔하게 가져와서 편리한 상태 관리나 유저 테마 설정 등에 활용해 보세요!\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e자, Next.js 13에서 Cookies API를 사용하는 방법에 대해 이야기해볼게요. Server Component나 서버 관련 코드에서 쿠키를 쉽게 조회하고, 설정할 수 있는 예제인데요.\u003c/p\u003e\n\u003cp\u003e먼저, 쿠키를 읽어오는 코드입니다:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-jsx\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { cookies } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"next/headers\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ePage\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-comment\"\u003e// 쿠키 스토어를 불러오고\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e cookieStore = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ecookies\u003c/span\u003e();\n\n  \u003cspan class=\"hljs-comment\"\u003e// 모든 쿠키를 가져와서 JSX로 렌더링합니다\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e cookieStore.\u003cspan class=\"hljs-title function_\"\u003egetAll\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003emap\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003ecookie\u003c/span\u003e) =\u003e\u003c/span\u003e (\n    \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ekey\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{cookie.name}\u003c/span\u003e\u003e\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ep\u003c/span\u003e\u003e\u003c/span\u003eName: {cookie.name}\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ep\u003c/span\u003e\u003e\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ep\u003c/span\u003e\u003e\u003c/span\u003eValue: {cookie.value}\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ep\u003c/span\u003e\u003e\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n  ));\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e여기서 \u003ccode\u003ecookies()\u003c/code\u003e 함수는 서버에서 현재 요청에 포함된 쿠키들을 읽어오는 API예요. \u003ccode\u003egetAll()\u003c/code\u003e을 호출하면 모든 쿠키가 배열로 반환되고, 각 쿠키는 이름과 값뿐만 아니라 추가 옵션들도 포함할 수 있어요. 이걸 React 컴포넌트에서 렌더링하는 거죠.\u003c/p\u003e\n\u003chr\u003e\n\u003ch3\u003e쿠키 설정하기\u003c/h3\u003e\n\u003cp\u003e이제 쿠키를 새로 설정하는 방법입니다. Next.js에서는 서버 액션이나 Route Handler 내부에서 \u003ccode\u003ecookies().set()\u003c/code\u003e 메서드를 사용해서 쿠키를 만들 수 있어요.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-string\"\u003e\"use server\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { cookies } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"next/headers\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ecreate\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003edata\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e cookieStore = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ecookies\u003c/span\u003e();\n\n  \u003cspan class=\"hljs-comment\"\u003e// 기본적으로 name이라는 이름과 'lee'라는 값으로 쿠키 설정\u003c/span\u003e\n  cookieStore.\u003cspan class=\"hljs-title function_\"\u003eset\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"name\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"lee\"\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-comment\"\u003e// secure 옵션(HTTPS에서만 전송)\u003c/span\u003e\n  cookieStore.\u003cspan class=\"hljs-title function_\"\u003eset\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"name\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"lee\"\u003c/span\u003e, { \u003cspan class=\"hljs-attr\"\u003esecure\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e });\n\n  \u003cspan class=\"hljs-comment\"\u003e// 좀 더 상세 옵션 지정 가능 (httpOnly, path 등)\u003c/span\u003e\n  cookieStore.\u003cspan class=\"hljs-title function_\"\u003eset\u003c/span\u003e({\n    \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"name\"\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"lee\"\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003ehttpOnly\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003epath\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"/\"\u003c/span\u003e,\n  });\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e여기서 \u003ccode\u003ehttpOnly\u003c/code\u003e 옵션은 클라이언트 JavaScript에서 쿠키에 접근하는 걸 막아서 보안에 도움이 되고, \u003ccode\u003esecure\u003c/code\u003e 옵션은 HTTPS 연결에서만 쿠키가 전송되도록 하는 거예요. 또, \u003ccode\u003epath\u003c/code\u003e 옵션을 지정하면 쿠키가 특정 경로에서만 유효하도록 할 수 있답니다.\u003c/p\u003e\n\u003chr\u003e\n\u003ch3\u003e알아두면 좋은 팁\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e이 API는 서버 측에서만 동작하기 때문에, 클라이언트 측에서 쿠키를 다루려면 \u003ccode\u003edocument.cookie\u003c/code\u003e를 사용해야 해요.\u003c/li\u003e\n\u003cli\u003e쿠키는 보통 사용자 인증, 세션 관리, UI 상태 유지 등에 쓰이는데, 민감한 정보는 꼭 \u003ccode\u003ehttpOnly\u003c/code\u003e나 \u003ccode\u003esecure\u003c/code\u003e 옵션을 함께 설정해서 노출되거나 탈취되지 않도록 주의하세요.\u003c/li\u003e\n\u003cli\u003eNext.js 13부터 도입된 이 \u003ccode\u003ecookies\u003c/code\u003e API는 사용하기 훨씬 편리해졌는데, 기존의 \u003ccode\u003eset-cookie\u003c/code\u003e 헤더 직접 조작보다 안정적이고 직관적이랍니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003cp\u003e쿠키 다루기가 어려울 수 있는데, 이렇게 서버 컴포넌트 안에서 직관적으로 쓰니까 훨씬 편리해졌죠? 필요에 따라 쿠키를 갖고 놀아보세요! 혹시 더 궁금한 거 있으면 알려주세요.\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch3\u003e쿠키가 존재하는지 확인하기\u003c/h3\u003e\n\u003cp\u003eNext.js에서 쿠키가 있는지 확인하고 싶을 때는 \u003ccode\u003eawait cookies()\u003c/code\u003e 메서드와 \u003ccode\u003ehas(name)\u003c/code\u003e 메서드를 조합해서 사용하면 됩니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { cookies } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"next/headers\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ePage\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e cookieStore = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ecookies\u003c/span\u003e();\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e hasCookie = cookieStore.\u003cspan class=\"hljs-title function_\"\u003ehas\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"theme\"\u003c/span\u003e); \u003cspan class=\"hljs-comment\"\u003e// 'theme' 쿠키가 있는지 확인\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e hasCookie ? \u003cspan class=\"hljs-string\"\u003e\"쿠키가 존재해요!\"\u003c/span\u003e : \u003cspan class=\"hljs-string\"\u003e\"쿠키가 없어요!\"\u003c/span\u003e;\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e위 코드처럼 간단하게 특정 이름의 쿠키가 있는지 true/false로 확인할 수 있어요. 서버 컴포넌트에서 쿠키를 읽거나 분기 처리를 해야 할 때 유용하죠.\u003c/p\u003e\n\u003chr\u003e\n\u003ch3\u003e쿠키 삭제하기\u003c/h3\u003e\n\u003cp\u003e쿠키를 삭제하려면 기본적으로는 만료일자를 과거로 설정해줘야 해요. 서버 측에서 쿠키를 삭제하는 방법을 살펴볼게요.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { cookies } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"next/headers\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eDELETE\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e cookieStore = \u003cspan class=\"hljs-title function_\"\u003ecookies\u003c/span\u003e();\n  cookieStore.\u003cspan class=\"hljs-title function_\"\u003edelete\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"theme\"\u003c/span\u003e, { \u003cspan class=\"hljs-attr\"\u003epath\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"/\"\u003c/span\u003e }); \u003cspan class=\"hljs-comment\"\u003e// 'theme' 쿠키 삭제\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eResponse\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"쿠키 삭제됨\"\u003c/span\u003e, { \u003cspan class=\"hljs-attr\"\u003estatus\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e });\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003ecookieStore.delete()\u003c/code\u003e 메서드로 삭제할 쿠키 이름과 경로를 지정해주면 됩니다.\u003c/li\u003e\n\u003cli\u003e쿠키가 특정 경로나 도메인에 묶여 있다면, 삭제할 때도 그 경로나 도메인을 맞춰줘야 완전히 삭제가 돼요.\u003c/li\u003e\n\u003cli\u003e만약 클라이언트 쪽에서 쿠키를 삭제하고 싶다면, 자바스크립트의 \u003ccode\u003edocument.cookie = \"name=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;\"\u003c/code\u003e 같은 방법을 쓰면 됩니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch3\u003e조금 더 알아두면 좋은 점\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eNext.js의 \u003ccode\u003ecookies()\u003c/code\u003e는 서버 컴포넌트나 API 라우트 등 서버 측에서만 사용할 수 있어요.\u003c/li\u003e\n\u003cli\u003e쿠키는 보안상 중요한 정보를 담기보다는 세션식별자나 사용자 선호 설정 정도로 사용하는 게 좋아요.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eSecure\u003c/code\u003e, \u003ccode\u003eHttpOnly\u003c/code\u003e, \u003ccode\u003eSameSite\u003c/code\u003e 같은 옵션도 꼭 설정해서 보안을 강화하는 습관을 들이면 좋답니다!\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e다음에 쿠키 관련해서 직접 실습하면서 또 도움이 될 만한 팁을 공유할게요!\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e쿠키를 삭제하는 방법에는 크게 세 가지가 있어요. 여기서는 그 중 두 가지를 소개해드릴게요.\u003c/p\u003e\n\u003ch3\u003e1. \u003ccode\u003edelete()\u003c/code\u003e 메서드 사용하기\u003c/h3\u003e\n\u003cp\u003eNext.js에서 제공하는 \u003ccode\u003ecookies\u003c/code\u003e 객체에 있는 \u003ccode\u003edelete()\u003c/code\u003e 메서드를 사용해서 간단하게 쿠키를 지울 수 있어요.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-string\"\u003e\"use server\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { cookies } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"next/headers\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003edeleteCookie\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n  (\u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ecookies\u003c/span\u003e()).\u003cspan class=\"hljs-title function_\"\u003edelete\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"name\"\u003c/span\u003e); \u003cspan class=\"hljs-comment\"\u003e// 'name'이라는 이름의 쿠키를 삭제해요.\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eawait cookies()\u003c/code\u003e를 호출해서 현재 쿠키 객체를 받아오고, 그 안에서 \u003ccode\u003edelete('name')\u003c/code\u003e을 호출해서 특정 쿠키를 삭제합니다.\u003c/li\u003e\n\u003cli\u003e서버 컴포넌트 또는 서버 함수 안에서만 쓸 수 있다는 점 참고하세요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e2. 같은 이름으로 빈 값 설정하기\u003c/h3\u003e\n\u003cp\u003e사실, 쿠키를 삭제하는 또 다른 방법은 같은 이름으로 빈 값을 설정하고 만료 시간을 과거로 설정하는 거예요. 이렇게 하면 브라우저가 해당 쿠키를 지우게 됩니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { cookies } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"next/headers\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003edeleteCookieBySetting\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n  (\u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ecookies\u003c/span\u003e()).\u003cspan class=\"hljs-title function_\"\u003eset\u003c/span\u003e({\n    \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"name\"\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// 빈 값으로 설정\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eexpires\u003c/span\u003e: \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eDate\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e), \u003cspan class=\"hljs-comment\"\u003e// 만료 시간을 과거로 설정해서 즉시 만료\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003epath\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"/\"\u003c/span\u003e,\n  });\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eset()\u003c/code\u003e 메서드를 이용해 만료 시점을 과거로 지정하면 쿠키가 삭제된 것과 같은 효과를 냅니다.\u003c/li\u003e\n\u003cli\u003e직접 쿠키 값을 칼같이 삭제하지 않아도 되니, 간단한 상황에 유용하죠.\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch3\u003e참고: 쿠키 삭제 시 주의할 점\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e쿠키는 도메인, 경로(path), 보안 설정(secure, httpOnly)에 따라 영향을 받습니다.\u003c/li\u003e\n\u003cli\u003e쿠키를 삭제할 때도 같은 도메인과 경로를 명시해줘야 확실히 삭제할 수 있어요.\u003c/li\u003e\n\u003cli\u003e만약 삭제가 제대로 안 된다면, 해당 쿠키의 \u003ccode\u003epath\u003c/code\u003e나 \u003ccode\u003edomain\u003c/code\u003e 설정을 다시 한 번 확인해 보세요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003cp\u003e쿠키를 다룰 때는 이렇게 여러 방법이 있으니, 상황에 맞게 골라 쓰시면 됩니다. 서버에서 직접 쿠키를 관리하는 경우라면 \u003ccode\u003edelete()\u003c/code\u003e를, 클라이언트 쪽에서는 빈 값과 만료 시간을 조정하는 방법이 인기가 많아요.\u003c/p\u003e\n\u003cp\u003e필요하면 다음에 세 번째 방법도 알려드릴게요!\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e\u003ccode\u003eNext.js\u003c/code\u003e의 서버 컴포넌트에서 쿠키를 삭제하는 방법에 대해 알아볼게요. 보통 쿠키를 \"삭제\"하려면, 해당 쿠키의 만료 시간을 즉시 만료시키거나, 빈 값으로 덮어쓰는 두 가지 방법을 사용해요.\u003c/p\u003e\n\u003chr\u003e\n\u003ch3\u003e1. 쿠키를 빈 값으로 덮어쓰기\u003c/h3\u003e\n\u003cp\u003e아래 코드는 \u003ccode\u003ecookies().set()\u003c/code\u003e 메서드를 사용해서 쿠키 이름을 빈 문자열로 설정하는 예시입니다.\n이렇게 하면 쿠키 값이 빈 문자열로 바뀌지만, 실제로 쿠키는 브라우저에 그대로 남아 있을 수 있어요.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-string\"\u003e'use server'\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { cookies } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'next/headers'\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003edelete\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003edata\u003c/span\u003e) {\n  (\u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ecookies\u003c/span\u003e()).\u003cspan class=\"hljs-title function_\"\u003eset\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'name'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e''\u003c/span\u003e)\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003ch3\u003e2. maxAge를 0으로 설정해 바로 만료시키기\u003c/h3\u003e\n\u003cp\u003e쿠키를 완전히 삭제하려면 \u003ccode\u003emaxAge\u003c/code\u003e 옵션을 0으로 설정해서 쿠키 만료 시간을 즉시 지난 값으로 설정하는 방법이 더 확실해요.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-string\"\u003e'use server'\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { cookies } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'next/headers'\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003edelete\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003edata\u003c/span\u003e) {\n  (\u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ecookies\u003c/span\u003e()).\u003cspan class=\"hljs-title function_\"\u003eset\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'name'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'value'\u003c/span\u003e, { \u003cspan class=\"hljs-attr\"\u003emaxAge\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e })\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003emaxAge\u003c/code\u003e는 초 단위로 시간을 받기 때문에 \u003ccode\u003e0\u003c/code\u003e을 주면 곧바로 만료 처리되는 거죠.\u003c/p\u003e\n\u003chr\u003e\n\u003ch2\u003e흔히 묻는 질문\u003c/h2\u003e\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003ctable\u003e\u003cthead\u003e\u003ctr\u003e\u003cth\u003e질문\u003c/th\u003e\u003cth\u003e답변\u003c/th\u003e\u003c/tr\u003e\u003c/thead\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd\u003e\u003ccode\u003emaxAge\u003c/code\u003e 대신 \u003ccode\u003eexpires\u003c/code\u003e를 써도 되나요?\u003c/td\u003e\u003ctd\u003e네, 가능합니다. \u003ccode\u003eexpires\u003c/code\u003e는 날짜 객체를 받아서 쿠키 만료 시간을 설정하는 방법이에요.\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e빈 문자열로 설정하면 쿠키가 삭제되나요?\u003c/td\u003e\u003ctd\u003e사실상 값만 비워질 뿐 구버전 브라우저나 일부 환경에서는 쿠키가 살아 있을 수 있어요.\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003ccode\u003emaxAge: 0\u003c/code\u003e 와 \u003ccode\u003emaxAge: -1\u003c/code\u003e 차이는?\u003c/td\u003e\u003ctd\u003e둘 다 쿠키를 즉시 만료시키지만, 보통 \u003ccode\u003e0\u003c/code\u003e을 사용해요. 음수는 브라우저에 따라 달라질 수 있어요.\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\u003chr\u003e\n\u003ch3\u003e마무리\u003c/h3\u003e\n\u003cp\u003e\u003ccode\u003eNext.js\u003c/code\u003e 13 서버 컴포넌트 기능에서 새로 제공하는 \u003ccode\u003ecookies\u003c/code\u003e API는 훨씬 간편하게 쿠키를 다룰 수 있도록 도와주지만, 조금만 주의하면 쿠키 삭제도 깔끔하게 할 수 있어요!\u003c/p\u003e\n\u003cp\u003e쿠키를 삭제할 땐 꼭 제대로 만료 시간을 설정해서, 원하지 않는 쿠키가 백그라운드에 남지 않도록 관리해주세요. 쿠키 조작에 대해 더 궁금한 점 있으면 언제든 물어봐주세요!\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e아래는 \u003ccode\u003ecookies\u003c/code\u003e 관련 변경 사항을 정리한 표예요.\u003c/p\u003e\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003ctable\u003e\u003cthead\u003e\u003ctr\u003e\u003cth\u003eVersion\u003c/th\u003e\u003cth\u003eChanges\u003c/th\u003e\u003c/tr\u003e\u003c/thead\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd\u003e\u003ccode\u003ev15.0.0-RC\u003c/code\u003e\u003c/td\u003e\u003ctd\u003e\u003ccode\u003ecookies\u003c/code\u003e가 이제 비동기(async) 함수로 변경되었어요. 업그레이드할 때 도움이 되는 \u003ca href=\"/docs/app/guides/upgrading/codemods#150\"\u003ecodemod\u003c/a\u003e도 제공됩니다.\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003ccode\u003ev13.0.0\u003c/code\u003e\u003c/td\u003e\u003ctd\u003e\u003ccode\u003ecookies\u003c/code\u003e 기능이 처음 도입되었어요.\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\u003cp\u003e참고로, \u003ccode\u003ecookies\u003c/code\u003e가 비동기 함수가 된 이유는 서버에서 쿠키를 처리할 때 비동기 작업이 필요한 경우가 많기 때문이에요. 예를 들어, 데이터베이스 조회나 외부 API 호출을 하면서 쿠키 값을 확인하거나 수정할 때 자연스럽게 비동기로 처리하는 게 더 효율적이죠.\u003c/p\u003e\n\u003cp\u003e이런 변경사항을 반영하지 않으면 기존에 동기 함수처럼 호출하던 코드에서 문제가 발생할 수 있으니, 꼭 공식 codemod를 활용해서 코드를 자동 변환해 보는 걸 추천드려요!\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2025-04-22-cookies"},"buildId":"M7pU9hOcx8u_ZIFMf95sd","assetPrefix":"/TIL","isFallback":false,"gsp":true,"scriptLoader":[{"async":true,"src":"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4877378276818686","strategy":"lazyOnload","crossOrigin":"anonymous"}]}</script></body></html>