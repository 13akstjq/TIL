<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>Python으로 나만의 트레이딩 인덱스 만드는 방법 | TIL</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://13akstjq.github.io/TIL//post/2024-07-09-BuildyourowntradingindexwithPython" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="Python으로 나만의 트레이딩 인덱스 만드는 방법 | TIL" data-gatsby-head="true"/><meta property="og:title" content="Python으로 나만의 트레이딩 인덱스 만드는 방법 | TIL" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-07-09-BuildyourowntradingindexwithPython_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://TIL.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://13akstjq.github.io/TIL//post/2024-07-09-BuildyourowntradingindexwithPython" data-gatsby-head="true"/><meta name="twitter:title" content="Python으로 나만의 트레이딩 인덱스 만드는 방법 | TIL" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-07-09-BuildyourowntradingindexwithPython_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | TIL" data-gatsby-head="true"/><meta name="article:published_time" content="2024-07-09 20:37" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/TIL/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/TIL/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/TIL/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/TIL/favicons/favicon-96x96.png"/><link rel="icon" href="/TIL/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/TIL/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/TIL/favicons/browserconfig.xml"/><link rel="preload" href="/TIL/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/TIL/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/TIL/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/TIL/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/TIL/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/TIL/_next/static/chunks/webpack-21ffe88bdca56cba.js" defer=""></script><script src="/TIL/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/TIL/_next/static/chunks/main-a5eeabb286676ce6.js" defer=""></script><script src="/TIL/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/TIL/_next/static/chunks/75fc9c18-4a646156c659a948.js" defer=""></script><script src="/TIL/_next/static/chunks/348-02483b66b493dd81.js" defer=""></script><script src="/TIL/_next/static/chunks/pages/post/%5Bslug%5D-8ded8b979ba73586.js" defer=""></script><script src="/TIL/_next/static/o6AmBAY_j9v9JmbaRA39X/_buildManifest.js" defer=""></script><script src="/TIL/_next/static/o6AmBAY_j9v9JmbaRA39X/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/TIL">TIL</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/TIL/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">Python으로 나만의 트레이딩 인덱스 만드는 방법</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="Python으로 나만의 트레이딩 인덱스 만드는 방법" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/TIL/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">TIL</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Jul 9, 2024</span><span class="posts_reading_time__f7YPP">8<!-- --> min read</span></span></div></div></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<h2>거래 결정 도구</h2>
<p><img src="/TIL/assets/img/2024-07-09-BuildyourowntradingindexwithPython_0.png" alt="Trading Index"></p>
<p>맞춤 지수는 자산 구성 및 가중치에 대한 유연성과 제어를 제공하여 전통적인 지수와 비교했을 때 투자 전략을 더 잘 반영할 수 있는 고유한 기준을 제공합니다. 이 기사에서는 Python을 사용하여 맞춤 지수를 작성하는 방법을 안내하겠습니다.</p>
<h2>왜 맞춤 지수를 사용해야 하나요?</h2>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>유연성: 특정 투자 또는 거래 전략에 맞게 지수를 맞춤 설정할 수 있습니다.</li>
<li>통제: 자산 포함 및 가중 기준을 사용자 정의할 수 있습니다.</li>
<li>혁신: 투자 및 거래 모두에서 경쟁 우위를 제공할 수 있는 독특한 지수 개발</li>
</ul>
<h2>미국 달러 지수를 계산하는 이유</h2>
<p>역사적 가격을 찾을 수 있는 모든 것에 대해 사용자 정의 지수를 만들 수 있지만, 이 글은 이미 존재하는 지수인 미국 달러 지수를 만들 것입니다.</p>
<p>제가 미국 달러(USD)를 선택한 이유는 우리가 사용자 정의 결과를 실제 지수와 비교하여 테스트할 수 있기 때문입니다.</p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>제 2로 가장 중요한 건 통화를 선택했습니다. 외환 거래에서 외환 페어를 거래할 때 한 통화가 다른 통화와 비교됨을 볼 수 있습니다. 실제로 페어가 길어지면, 예를 들어 EURUSD가 있습니다. EUR이 강해지고 있는지, USD가 약해지고 있는지 확신할 수 없습니다. 이것은 통화 지수로만 제공될 수 있는 답변입니다.</p>
<h2>사용자 정의 인덱스 생성 단계별 안내서</h2>
<p>통화 데이터 처리 및 금융 데이터 가져오기를 위해 pandas, numpy 및 yfinance와 같은 필수 라이브러리를 가져와 시작합니다.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> json
<span class="hljs-keyword">import</span> yfinance <span class="hljs-keyword">as</span> yf
<span class="hljs-keyword">import</span> mplfinance <span class="hljs-keyword">as</span> mpf
</code></pre>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>그럼 해당 쌍의 딕셔너리와 내가 관심 있는 통화의 딕셔너리를 불러오세요(기사 맨 끝에 링크가 있습니다).</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">with</span> <span class="hljs-title function_">open</span>(<span class="hljs-string">'currencies_weights.json'</span>) <span class="hljs-keyword">as</span> <span class="hljs-attr">f</span>:
    currencies = json.<span class="hljs-title function_">load</span>(f)

<span class="hljs-keyword">with</span> <span class="hljs-title function_">open</span>(<span class="hljs-string">'currencies_pairs.json'</span>) <span class="hljs-keyword">as</span> <span class="hljs-attr">f</span>:
    pairs = json.<span class="hljs-title function_">load</span>(f)
</code></pre>
<p>통화는 심볼(예: EUR)과 해당 국가의 GDP(십억 달러)를 가장 중요하게 가지고 있어야 합니다. GDP를 선택한 이유는 가장 현실적인 측정값으로 보였습니다(결국 옳은 것으로 판명되었죠…). 그냥 하나의 통화로 표시되어야 한다는 점만 주의하면 됩니다. 예를 들어, 유로존 GDP는 USD로 표시되어야 하며 EUR이 아니어야 합니다. 이것이 가장 쉬운 방법인 것을 발견했는데, 로컬 통화로 GDP를 가지고 있고 이후 변환해야 하는 방법보다 편리합니다.</p>
<p>아래 for 루프를 사용하면 모든 쌍에 대한 1시간 가격을 다운로드하고, 우리 사랑하는 <code>yfinance</code>의 도움으로 이를 딕셔너리에 추가할 수 있습니다.</p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js"><span class="hljs-keyword">for</span> pair <span class="hljs-keyword">in</span> <span class="hljs-attr">pairs</span>:
    pairs[pair][<span class="hljs-string">'df'</span>] = yf.<span class="hljs-title function_">download</span>(pairs[pair][<span class="hljs-string">'name'</span>] + <span class="hljs-string">'=X'</span>, start=<span class="hljs-string">'2023-01-01'</span>, end=<span class="hljs-string">'2023-12-31'</span>, interval=<span class="hljs-string">'1h'</span>)
</code></pre>
<p>가능한 가장 작은 시간 단위를 선택하여 데이터를 찾아야 큰 시간 단위(예: 4시간 또는 일일)의 캔들을 만들 수 있습니다. 그런 다음 야후 금융이 가끔 일부 날짜를 제공하지 않을 경우에도 데이터 프레임을 동기화합니다. API가 완전하고 적절한 데이터를 제공할 것이라고 확신하는 경우, 이 부분은 건너 뛰시기 바랍니다.</p>
<pre><code class="hljs language-js"># 최소 및 최대 날짜 찾기
<span class="hljs-keyword">for</span> pair <span class="hljs-keyword">in</span> <span class="hljs-attr">pairs</span>:
    mindate = <span class="hljs-title function_">min</span>(pairs[pair][<span class="hljs-string">'df'</span>].<span class="hljs-property">index</span>)
    maxdate = <span class="hljs-title function_">max</span>(pairs[pair][<span class="hljs-string">'df'</span>].<span class="hljs-property">index</span>)
# 공통되지 않은 날짜 제외
<span class="hljs-keyword">for</span> pair <span class="hljs-keyword">in</span> <span class="hljs-attr">pairs</span>:
    pairs[pair][<span class="hljs-string">'df'</span>] = pairs[pair][<span class="hljs-string">'df'</span>].<span class="hljs-property">loc</span>[<span class="hljs-attr">mindate</span>:maxdate]
<span class="hljs-title function_">print</span>(mindate, maxdate)
</code></pre>
<p>이제 계산할 통화의 지수와 이 통화를 포함하는 모든 통화에 대한 종가를 갖는 데이터 프레임을 생성하고 설정해야 합니다. 통화가 판매 쪽에 있다면 환율을 뒤집어서 모두 매수쪽으로 가져와야 합니다.</p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js">통화 = <span class="hljs-string">'USD'</span>

mydict = {}
# 해당 통화를 포함하는 쌍 필터링
<span class="hljs-keyword">for</span> pair <span class="hljs-keyword">in</span> <span class="hljs-attr">pairs</span>:
    <span class="hljs-keyword">if</span> 통화 <span class="hljs-keyword">in</span> pairs[pair][<span class="hljs-string">'buycur'</span>]:
        <span class="hljs-title function_">print</span>(<span class="hljs-string">"매수"</span>, pair)
        mydict[pairs[pair][<span class="hljs-string">'sellcur'</span>]] = pairs[pair][<span class="hljs-string">'df'</span>][<span class="hljs-string">'Close'</span>]
    elif 통화 <span class="hljs-keyword">in</span> pairs[pair][<span class="hljs-string">'sellcur'</span>]:
        <span class="hljs-title function_">print</span>(<span class="hljs-string">"매도"</span>, pair)
        mydict[pairs[pair][<span class="hljs-string">'buycur'</span>]] = <span class="hljs-number">1</span> / pairs[pair][<span class="hljs-string">'df'</span>][<span class="hljs-string">'Close'</span>]

df_currency = pd.<span class="hljs-title class_">DataFrame</span>(mydict)
</code></pre>
<p>위 데이터프레임의 각 열(통화)에 대해 GDP를 사용하여 가중치 목록을 생성합니다.</p>
<pre><code class="hljs language-js">weights = []
<span class="hljs-keyword">for</span> col <span class="hljs-keyword">in</span> df_currency.<span class="hljs-property">columns</span>:
    weights.<span class="hljs-title function_">append</span>(currencies[col][<span class="hljs-string">'GDP'</span>])

weights = [weight / <span class="hljs-title function_">sum</span>(weights) <span class="hljs-keyword">for</span> weight <span class="hljs-keyword">in</span> weights]
</code></pre>
<p>이제 가중 폐장 가격을 생성하고 선택한 데이터프레임으로 재샘플링하는 마법이 일어납니다(원본보다 더 높아야 함).</p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-js"># 데이터프레임 준비
df_index = df_currency.<span class="hljs-title function_">copy</span>()
df_index = df_index.<span class="hljs-title function_">pct_change</span>(fill_method=<span class="hljs-title class_">None</span>)
df_index.<span class="hljs-title function_">dropna</span>(inplace=<span class="hljs-title class_">True</span>)

# 가중 평균 종가 계산
weights_df = pd.<span class="hljs-title class_">DataFrame</span>(weights, index=df_index.<span class="hljs-property">columns</span>, columns=[<span class="hljs-string">'Weight'</span>])
df_index[currency] = df_index.<span class="hljs-title function_">dot</span>(weights_df[<span class="hljs-string">'Weight'</span>]).<span class="hljs-title function_">cumsum</span>(axis=<span class="hljs-number">0</span>)*<span class="hljs-number">1000</span>
df_index[currency] = df_index[currency].<span class="hljs-title function_">round</span>(<span class="hljs-number">6</span>)

# 인덱스를 일별로 다시 샘플링
df_index = df_index[currency].<span class="hljs-title function_">dropna</span>()
ohlc = df_index.<span class="hljs-title function_">resample</span>(<span class="hljs-string">'D'</span>).<span class="hljs-title function_">ohlc</span>()
ohlc.<span class="hljs-title function_">dropna</span>(inplace=<span class="hljs-title class_">True</span>)
</code></pre>
<p>여기까지입니다. ohlc 데이터프레임에는 일별 미국 달러 지수의 캔들 정보가 포함되어 있습니다.</p>
<p>과정을 확인하려면 실제 미국 달러 지수를 다운로드하여 비교해보겠습니다.</p>
<pre><code class="hljs language-js">usd_dollar_index = yf.<span class="hljs-title function_">download</span>(<span class="hljs-string">"DX-Y.NYB"</span>, (start = <span class="hljs-string">"2023-01-01"</span>), (end = <span class="hljs-string">"2023-12-31"</span>), (interval = <span class="hljs-string">"1d"</span>));
</code></pre>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>첫 번째 점검은 시각적으로 이루어질 것입니다. 그래서 우리가 만든 그래프와 공식 그래프를 겹쳐서 플로팅할 거에요. 멋져 보이죠?</p>
<pre><code class="hljs language-js">mpf.<span class="hljs-title function_">plot</span>(ohlc, (type = <span class="hljs-string">"candle"</span>), (figratio = (<span class="hljs-number">30</span>, <span class="hljs-number">10</span>)));
mpf.<span class="hljs-title function_">plot</span>(usd_dollar_index, (type = <span class="hljs-string">"candle"</span>), (figratio = (<span class="hljs-number">30</span>, <span class="hljs-number">10</span>)));
</code></pre>
<img src="/TIL/assets/img/2024-07-09-BuildyourowntradingindexwithPython_1.png">
<p>다른 방법은 종가의 상관 관계를 점검하는 것이에요.</p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-python"><span class="hljs-comment"># 먼저 상관 계수를 계산하기 전에 두 날짜 및 시간 인덱스를 시간대 정보 없이 만들어야 합니다</span>
ohlc.index = ohlc.index.tz_localize(<span class="hljs-literal">None</span>)
usd_dollar_index.index = usd_dollar_index.index.tz_localize(<span class="hljs-literal">None</span>)

combined_df = pd.DataFrame({
    <span class="hljs-string">'ohlc'</span>: ohlc[<span class="hljs-string">'close'</span>],
    <span class="hljs-string">'usd_dollar_index'</span>: usd_dollar_index[<span class="hljs-string">'Close'</span>]
})

correlation = combined_df.corr().iloc[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>]
</code></pre>
<p>이를 통해 우리는 놀라운 0.976의 상관 관계를 얻게 됩니다. 이를 통해 두 인덱스가 일치함을 알 수 있습니다...</p>
<p>하지만 미국 달러 지수는 6개 통화에 대한 고정 가중치로 계산되는 반면, 우리의 경우에는 14가 있었으므로 약간의 차이가 있습니다!</p>
<p>여기에서 Git Hub에서 코드와 통화 쌍에 대한 json 파일을 찾을 수 있습니다. 클릭하세요.</p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h2>다음 단계</h2>
<ul>
<li>실험: 다양한 가중 체계와 자산 선택을 시도해보세요.</li>
<li>향상: 보다 정교한 백테스팅 지표 추가.</li>
<li>최적화: 기계 학습 모델 통합하여 사용자 정의 지수를 최적화하세요.</li>
</ul>
<p>나의 데이터 주도 투자 여정을 함께 해보세요! 저를 Medium, Twitter (현재 X로 잘 알려진) 및 Github에서 팔로우해주세요. 저는 코딩, 글쓰기, 데이터 이해를 통한 성장을 추구합니다 ;)</p>
<p>면책 조항: 이 글에서 투자의 흥미로운 세계를 탐험하는 동안 교육 목적으로 제공되는 정보임을 꼭 상기해주세요. 저는 금융 자문가가 아니며 여기에 게시된 내용은 금융 조언으로 간주되지 않습니다. 언제나 연구를 하시고 투자 결정을 내리기 전에 전문가와 상의하는 것을 고려해주십시오.</p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h1>쉽고 간결한 영어 커뮤니티에 참여해 주셔서 감사합니다! 떠나시기 전에:</h1>
<ul>
<li>반드시 저자를 clapping 하고 팔로우 해주세요 ️👏️️</li>
<li>팔로우하기: X | LinkedIn | YouTube | Discord | 뉴스레터</li>
<li>다른 플랫폼 방문하기: CoFeed | Differ</li>
<li>PlainEnglish.io에서 더 많은 콘텐츠 확인하기</li>
</ul>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Python으로 나만의 트레이딩 인덱스 만드는 방법","description":"","date":"2024-07-09 20:37","slug":"2024-07-09-BuildyourowntradingindexwithPython","content":"\n## 거래 결정 도구\n\n![Trading Index](/TIL/assets/img/2024-07-09-BuildyourowntradingindexwithPython_0.png)\n\n맞춤 지수는 자산 구성 및 가중치에 대한 유연성과 제어를 제공하여 전통적인 지수와 비교했을 때 투자 전략을 더 잘 반영할 수 있는 고유한 기준을 제공합니다. 이 기사에서는 Python을 사용하여 맞춤 지수를 작성하는 방법을 안내하겠습니다.\n\n## 왜 맞춤 지수를 사용해야 하나요?\n\n\u003c!-- TIL 수평 --\u003e\n\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- 유연성: 특정 투자 또는 거래 전략에 맞게 지수를 맞춤 설정할 수 있습니다.\n- 통제: 자산 포함 및 가중 기준을 사용자 정의할 수 있습니다.\n- 혁신: 투자 및 거래 모두에서 경쟁 우위를 제공할 수 있는 독특한 지수 개발\n\n## 미국 달러 지수를 계산하는 이유\n\n역사적 가격을 찾을 수 있는 모든 것에 대해 사용자 정의 지수를 만들 수 있지만, 이 글은 이미 존재하는 지수인 미국 달러 지수를 만들 것입니다.\n\n제가 미국 달러(USD)를 선택한 이유는 우리가 사용자 정의 결과를 실제 지수와 비교하여 테스트할 수 있기 때문입니다.\n\n\u003c!-- TIL 수평 --\u003e\n\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n제 2로 가장 중요한 건 통화를 선택했습니다. 외환 거래에서 외환 페어를 거래할 때 한 통화가 다른 통화와 비교됨을 볼 수 있습니다. 실제로 페어가 길어지면, 예를 들어 EURUSD가 있습니다. EUR이 강해지고 있는지, USD가 약해지고 있는지 확신할 수 없습니다. 이것은 통화 지수로만 제공될 수 있는 답변입니다.\n\n## 사용자 정의 인덱스 생성 단계별 안내서\n\n통화 데이터 처리 및 금융 데이터 가져오기를 위해 pandas, numpy 및 yfinance와 같은 필수 라이브러리를 가져와 시작합니다.\n\n```js\nimport pandas as pd\nimport json\nimport yfinance as yf\nimport mplfinance as mpf\n```\n\n\u003c!-- TIL 수평 --\u003e\n\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n그럼 해당 쌍의 딕셔너리와 내가 관심 있는 통화의 딕셔너리를 불러오세요(기사 맨 끝에 링크가 있습니다).\n\n```js\nwith open('currencies_weights.json') as f:\n    currencies = json.load(f)\n\nwith open('currencies_pairs.json') as f:\n    pairs = json.load(f)\n```\n\n통화는 심볼(예: EUR)과 해당 국가의 GDP(십억 달러)를 가장 중요하게 가지고 있어야 합니다. GDP를 선택한 이유는 가장 현실적인 측정값으로 보였습니다(결국 옳은 것으로 판명되었죠…). 그냥 하나의 통화로 표시되어야 한다는 점만 주의하면 됩니다. 예를 들어, 유로존 GDP는 USD로 표시되어야 하며 EUR이 아니어야 합니다. 이것이 가장 쉬운 방법인 것을 발견했는데, 로컬 통화로 GDP를 가지고 있고 이후 변환해야 하는 방법보다 편리합니다.\n\n아래 for 루프를 사용하면 모든 쌍에 대한 1시간 가격을 다운로드하고, 우리 사랑하는 `yfinance`의 도움으로 이를 딕셔너리에 추가할 수 있습니다.\n\n\u003c!-- TIL 수평 --\u003e\n\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\nfor pair in pairs:\n    pairs[pair]['df'] = yf.download(pairs[pair]['name'] + '=X', start='2023-01-01', end='2023-12-31', interval='1h')\n```\n\n가능한 가장 작은 시간 단위를 선택하여 데이터를 찾아야 큰 시간 단위(예: 4시간 또는 일일)의 캔들을 만들 수 있습니다. 그런 다음 야후 금융이 가끔 일부 날짜를 제공하지 않을 경우에도 데이터 프레임을 동기화합니다. API가 완전하고 적절한 데이터를 제공할 것이라고 확신하는 경우, 이 부분은 건너 뛰시기 바랍니다.\n\n```js\n# 최소 및 최대 날짜 찾기\nfor pair in pairs:\n    mindate = min(pairs[pair]['df'].index)\n    maxdate = max(pairs[pair]['df'].index)\n# 공통되지 않은 날짜 제외\nfor pair in pairs:\n    pairs[pair]['df'] = pairs[pair]['df'].loc[mindate:maxdate]\nprint(mindate, maxdate)\n```\n\n이제 계산할 통화의 지수와 이 통화를 포함하는 모든 통화에 대한 종가를 갖는 데이터 프레임을 생성하고 설정해야 합니다. 통화가 판매 쪽에 있다면 환율을 뒤집어서 모두 매수쪽으로 가져와야 합니다.\n\n\u003c!-- TIL 수평 --\u003e\n\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\n통화 = 'USD'\n\nmydict = {}\n# 해당 통화를 포함하는 쌍 필터링\nfor pair in pairs:\n    if 통화 in pairs[pair]['buycur']:\n        print(\"매수\", pair)\n        mydict[pairs[pair]['sellcur']] = pairs[pair]['df']['Close']\n    elif 통화 in pairs[pair]['sellcur']:\n        print(\"매도\", pair)\n        mydict[pairs[pair]['buycur']] = 1 / pairs[pair]['df']['Close']\n\ndf_currency = pd.DataFrame(mydict)\n```\n\n위 데이터프레임의 각 열(통화)에 대해 GDP를 사용하여 가중치 목록을 생성합니다.\n\n```js\nweights = []\nfor col in df_currency.columns:\n    weights.append(currencies[col]['GDP'])\n\nweights = [weight / sum(weights) for weight in weights]\n```\n\n이제 가중 폐장 가격을 생성하고 선택한 데이터프레임으로 재샘플링하는 마법이 일어납니다(원본보다 더 높아야 함).\n\n\u003c!-- TIL 수평 --\u003e\n\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```js\n# 데이터프레임 준비\ndf_index = df_currency.copy()\ndf_index = df_index.pct_change(fill_method=None)\ndf_index.dropna(inplace=True)\n\n# 가중 평균 종가 계산\nweights_df = pd.DataFrame(weights, index=df_index.columns, columns=['Weight'])\ndf_index[currency] = df_index.dot(weights_df['Weight']).cumsum(axis=0)*1000\ndf_index[currency] = df_index[currency].round(6)\n\n# 인덱스를 일별로 다시 샘플링\ndf_index = df_index[currency].dropna()\nohlc = df_index.resample('D').ohlc()\nohlc.dropna(inplace=True)\n```\n\n여기까지입니다. ohlc 데이터프레임에는 일별 미국 달러 지수의 캔들 정보가 포함되어 있습니다.\n\n과정을 확인하려면 실제 미국 달러 지수를 다운로드하여 비교해보겠습니다.\n\n```js\nusd_dollar_index = yf.download(\"DX-Y.NYB\", (start = \"2023-01-01\"), (end = \"2023-12-31\"), (interval = \"1d\"));\n```\n\n\u003c!-- TIL 수평 --\u003e\n\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n첫 번째 점검은 시각적으로 이루어질 것입니다. 그래서 우리가 만든 그래프와 공식 그래프를 겹쳐서 플로팅할 거에요. 멋져 보이죠?\n\n```js\nmpf.plot(ohlc, (type = \"candle\"), (figratio = (30, 10)));\nmpf.plot(usd_dollar_index, (type = \"candle\"), (figratio = (30, 10)));\n```\n\n\u003cimg src=\"/TIL/assets/img/2024-07-09-BuildyourowntradingindexwithPython_1.png\" /\u003e\n\n다른 방법은 종가의 상관 관계를 점검하는 것이에요.\n\n\u003c!-- TIL 수평 --\u003e\n\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```python\n# 먼저 상관 계수를 계산하기 전에 두 날짜 및 시간 인덱스를 시간대 정보 없이 만들어야 합니다\nohlc.index = ohlc.index.tz_localize(None)\nusd_dollar_index.index = usd_dollar_index.index.tz_localize(None)\n\ncombined_df = pd.DataFrame({\n    'ohlc': ohlc['close'],\n    'usd_dollar_index': usd_dollar_index['Close']\n})\n\ncorrelation = combined_df.corr().iloc[0, 1]\n```\n\n이를 통해 우리는 놀라운 0.976의 상관 관계를 얻게 됩니다. 이를 통해 두 인덱스가 일치함을 알 수 있습니다...\n\n하지만 미국 달러 지수는 6개 통화에 대한 고정 가중치로 계산되는 반면, 우리의 경우에는 14가 있었으므로 약간의 차이가 있습니다!\n\n여기에서 Git Hub에서 코드와 통화 쌍에 대한 json 파일을 찾을 수 있습니다. 클릭하세요.\n\n\u003c!-- TIL 수평 --\u003e\n\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n## 다음 단계\n\n- 실험: 다양한 가중 체계와 자산 선택을 시도해보세요.\n- 향상: 보다 정교한 백테스팅 지표 추가.\n- 최적화: 기계 학습 모델 통합하여 사용자 정의 지수를 최적화하세요.\n\n나의 데이터 주도 투자 여정을 함께 해보세요! 저를 Medium, Twitter (현재 X로 잘 알려진) 및 Github에서 팔로우해주세요. 저는 코딩, 글쓰기, 데이터 이해를 통한 성장을 추구합니다 ;)\n\n면책 조항: 이 글에서 투자의 흥미로운 세계를 탐험하는 동안 교육 목적으로 제공되는 정보임을 꼭 상기해주세요. 저는 금융 자문가가 아니며 여기에 게시된 내용은 금융 조언으로 간주되지 않습니다. 언제나 연구를 하시고 투자 결정을 내리기 전에 전문가와 상의하는 것을 고려해주십시오.\n\n\u003c!-- TIL 수평 --\u003e\n\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n# 쉽고 간결한 영어 커뮤니티에 참여해 주셔서 감사합니다! 떠나시기 전에:\n\n- 반드시 저자를 clapping 하고 팔로우 해주세요 ️👏️️\n- 팔로우하기: X | LinkedIn | YouTube | Discord | 뉴스레터\n- 다른 플랫폼 방문하기: CoFeed | Differ\n- PlainEnglish.io에서 더 많은 콘텐츠 확인하기\n","ogImage":{"url":"/assets/img/2024-07-09-BuildyourowntradingindexwithPython_0.png"},"coverImage":"/TIL/assets/img/2024-07-09-BuildyourowntradingindexwithPython_0.png","tag":["Tech"],"readingTime":8},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003ch2\u003e거래 결정 도구\u003c/h2\u003e\n\u003cp\u003e\u003cimg src=\"/TIL/assets/img/2024-07-09-BuildyourowntradingindexwithPython_0.png\" alt=\"Trading Index\"\u003e\u003c/p\u003e\n\u003cp\u003e맞춤 지수는 자산 구성 및 가중치에 대한 유연성과 제어를 제공하여 전통적인 지수와 비교했을 때 투자 전략을 더 잘 반영할 수 있는 고유한 기준을 제공합니다. 이 기사에서는 Python을 사용하여 맞춤 지수를 작성하는 방법을 안내하겠습니다.\u003c/p\u003e\n\u003ch2\u003e왜 맞춤 지수를 사용해야 하나요?\u003c/h2\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003e유연성: 특정 투자 또는 거래 전략에 맞게 지수를 맞춤 설정할 수 있습니다.\u003c/li\u003e\n\u003cli\u003e통제: 자산 포함 및 가중 기준을 사용자 정의할 수 있습니다.\u003c/li\u003e\n\u003cli\u003e혁신: 투자 및 거래 모두에서 경쟁 우위를 제공할 수 있는 독특한 지수 개발\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e미국 달러 지수를 계산하는 이유\u003c/h2\u003e\n\u003cp\u003e역사적 가격을 찾을 수 있는 모든 것에 대해 사용자 정의 지수를 만들 수 있지만, 이 글은 이미 존재하는 지수인 미국 달러 지수를 만들 것입니다.\u003c/p\u003e\n\u003cp\u003e제가 미국 달러(USD)를 선택한 이유는 우리가 사용자 정의 결과를 실제 지수와 비교하여 테스트할 수 있기 때문입니다.\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e제 2로 가장 중요한 건 통화를 선택했습니다. 외환 거래에서 외환 페어를 거래할 때 한 통화가 다른 통화와 비교됨을 볼 수 있습니다. 실제로 페어가 길어지면, 예를 들어 EURUSD가 있습니다. EUR이 강해지고 있는지, USD가 약해지고 있는지 확신할 수 없습니다. 이것은 통화 지수로만 제공될 수 있는 답변입니다.\u003c/p\u003e\n\u003ch2\u003e사용자 정의 인덱스 생성 단계별 안내서\u003c/h2\u003e\n\u003cp\u003e통화 데이터 처리 및 금융 데이터 가져오기를 위해 pandas, numpy 및 yfinance와 같은 필수 라이브러리를 가져와 시작합니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e pandas \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e pd\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e json\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e yfinance \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e yf\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e mplfinance \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e mpf\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e그럼 해당 쌍의 딕셔너리와 내가 관심 있는 통화의 딕셔너리를 불러오세요(기사 맨 끝에 링크가 있습니다).\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003ewith\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eopen\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'currencies_weights.json'\u003c/span\u003e) \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ef\u003c/span\u003e:\n    currencies = json.\u003cspan class=\"hljs-title function_\"\u003eload\u003c/span\u003e(f)\n\n\u003cspan class=\"hljs-keyword\"\u003ewith\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eopen\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'currencies_pairs.json'\u003c/span\u003e) \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ef\u003c/span\u003e:\n    pairs = json.\u003cspan class=\"hljs-title function_\"\u003eload\u003c/span\u003e(f)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e통화는 심볼(예: EUR)과 해당 국가의 GDP(십억 달러)를 가장 중요하게 가지고 있어야 합니다. GDP를 선택한 이유는 가장 현실적인 측정값으로 보였습니다(결국 옳은 것으로 판명되었죠…). 그냥 하나의 통화로 표시되어야 한다는 점만 주의하면 됩니다. 예를 들어, 유로존 GDP는 USD로 표시되어야 하며 EUR이 아니어야 합니다. 이것이 가장 쉬운 방법인 것을 발견했는데, 로컬 통화로 GDP를 가지고 있고 이후 변환해야 하는 방법보다 편리합니다.\u003c/p\u003e\n\u003cp\u003e아래 for 루프를 사용하면 모든 쌍에 대한 1시간 가격을 다운로드하고, 우리 사랑하는 \u003ccode\u003eyfinance\u003c/code\u003e의 도움으로 이를 딕셔너리에 추가할 수 있습니다.\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e pair \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003epairs\u003c/span\u003e:\n    pairs[pair][\u003cspan class=\"hljs-string\"\u003e'df'\u003c/span\u003e] = yf.\u003cspan class=\"hljs-title function_\"\u003edownload\u003c/span\u003e(pairs[pair][\u003cspan class=\"hljs-string\"\u003e'name'\u003c/span\u003e] + \u003cspan class=\"hljs-string\"\u003e'=X'\u003c/span\u003e, start=\u003cspan class=\"hljs-string\"\u003e'2023-01-01'\u003c/span\u003e, end=\u003cspan class=\"hljs-string\"\u003e'2023-12-31'\u003c/span\u003e, interval=\u003cspan class=\"hljs-string\"\u003e'1h'\u003c/span\u003e)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e가능한 가장 작은 시간 단위를 선택하여 데이터를 찾아야 큰 시간 단위(예: 4시간 또는 일일)의 캔들을 만들 수 있습니다. 그런 다음 야후 금융이 가끔 일부 날짜를 제공하지 않을 경우에도 데이터 프레임을 동기화합니다. API가 완전하고 적절한 데이터를 제공할 것이라고 확신하는 경우, 이 부분은 건너 뛰시기 바랍니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# 최소 및 최대 날짜 찾기\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e pair \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003epairs\u003c/span\u003e:\n    mindate = \u003cspan class=\"hljs-title function_\"\u003emin\u003c/span\u003e(pairs[pair][\u003cspan class=\"hljs-string\"\u003e'df'\u003c/span\u003e].\u003cspan class=\"hljs-property\"\u003eindex\u003c/span\u003e)\n    maxdate = \u003cspan class=\"hljs-title function_\"\u003emax\u003c/span\u003e(pairs[pair][\u003cspan class=\"hljs-string\"\u003e'df'\u003c/span\u003e].\u003cspan class=\"hljs-property\"\u003eindex\u003c/span\u003e)\n# 공통되지 않은 날짜 제외\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e pair \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003epairs\u003c/span\u003e:\n    pairs[pair][\u003cspan class=\"hljs-string\"\u003e'df'\u003c/span\u003e] = pairs[pair][\u003cspan class=\"hljs-string\"\u003e'df'\u003c/span\u003e].\u003cspan class=\"hljs-property\"\u003eloc\u003c/span\u003e[\u003cspan class=\"hljs-attr\"\u003emindate\u003c/span\u003e:maxdate]\n\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(mindate, maxdate)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e이제 계산할 통화의 지수와 이 통화를 포함하는 모든 통화에 대한 종가를 갖는 데이터 프레임을 생성하고 설정해야 합니다. 통화가 판매 쪽에 있다면 환율을 뒤집어서 모두 매수쪽으로 가져와야 합니다.\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e통화 = \u003cspan class=\"hljs-string\"\u003e'USD'\u003c/span\u003e\n\nmydict = {}\n# 해당 통화를 포함하는 쌍 필터링\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e pair \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003epairs\u003c/span\u003e:\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e 통화 \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e pairs[pair][\u003cspan class=\"hljs-string\"\u003e'buycur'\u003c/span\u003e]:\n        \u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"매수\"\u003c/span\u003e, pair)\n        mydict[pairs[pair][\u003cspan class=\"hljs-string\"\u003e'sellcur'\u003c/span\u003e]] = pairs[pair][\u003cspan class=\"hljs-string\"\u003e'df'\u003c/span\u003e][\u003cspan class=\"hljs-string\"\u003e'Close'\u003c/span\u003e]\n    elif 통화 \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e pairs[pair][\u003cspan class=\"hljs-string\"\u003e'sellcur'\u003c/span\u003e]:\n        \u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"매도\"\u003c/span\u003e, pair)\n        mydict[pairs[pair][\u003cspan class=\"hljs-string\"\u003e'buycur'\u003c/span\u003e]] = \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e / pairs[pair][\u003cspan class=\"hljs-string\"\u003e'df'\u003c/span\u003e][\u003cspan class=\"hljs-string\"\u003e'Close'\u003c/span\u003e]\n\ndf_currency = pd.\u003cspan class=\"hljs-title class_\"\u003eDataFrame\u003c/span\u003e(mydict)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e위 데이터프레임의 각 열(통화)에 대해 GDP를 사용하여 가중치 목록을 생성합니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eweights = []\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e col \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e df_currency.\u003cspan class=\"hljs-property\"\u003ecolumns\u003c/span\u003e:\n    weights.\u003cspan class=\"hljs-title function_\"\u003eappend\u003c/span\u003e(currencies[col][\u003cspan class=\"hljs-string\"\u003e'GDP'\u003c/span\u003e])\n\nweights = [weight / \u003cspan class=\"hljs-title function_\"\u003esum\u003c/span\u003e(weights) \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e weight \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e weights]\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e이제 가중 폐장 가격을 생성하고 선택한 데이터프레임으로 재샘플링하는 마법이 일어납니다(원본보다 더 높아야 함).\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# 데이터프레임 준비\ndf_index = df_currency.\u003cspan class=\"hljs-title function_\"\u003ecopy\u003c/span\u003e()\ndf_index = df_index.\u003cspan class=\"hljs-title function_\"\u003epct_change\u003c/span\u003e(fill_method=\u003cspan class=\"hljs-title class_\"\u003eNone\u003c/span\u003e)\ndf_index.\u003cspan class=\"hljs-title function_\"\u003edropna\u003c/span\u003e(inplace=\u003cspan class=\"hljs-title class_\"\u003eTrue\u003c/span\u003e)\n\n# 가중 평균 종가 계산\nweights_df = pd.\u003cspan class=\"hljs-title class_\"\u003eDataFrame\u003c/span\u003e(weights, index=df_index.\u003cspan class=\"hljs-property\"\u003ecolumns\u003c/span\u003e, columns=[\u003cspan class=\"hljs-string\"\u003e'Weight'\u003c/span\u003e])\ndf_index[currency] = df_index.\u003cspan class=\"hljs-title function_\"\u003edot\u003c/span\u003e(weights_df[\u003cspan class=\"hljs-string\"\u003e'Weight'\u003c/span\u003e]).\u003cspan class=\"hljs-title function_\"\u003ecumsum\u003c/span\u003e(axis=\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e)*\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e\ndf_index[currency] = df_index[currency].\u003cspan class=\"hljs-title function_\"\u003eround\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e)\n\n# 인덱스를 일별로 다시 샘플링\ndf_index = df_index[currency].\u003cspan class=\"hljs-title function_\"\u003edropna\u003c/span\u003e()\nohlc = df_index.\u003cspan class=\"hljs-title function_\"\u003eresample\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'D'\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003eohlc\u003c/span\u003e()\nohlc.\u003cspan class=\"hljs-title function_\"\u003edropna\u003c/span\u003e(inplace=\u003cspan class=\"hljs-title class_\"\u003eTrue\u003c/span\u003e)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e여기까지입니다. ohlc 데이터프레임에는 일별 미국 달러 지수의 캔들 정보가 포함되어 있습니다.\u003c/p\u003e\n\u003cp\u003e과정을 확인하려면 실제 미국 달러 지수를 다운로드하여 비교해보겠습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eusd_dollar_index = yf.\u003cspan class=\"hljs-title function_\"\u003edownload\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"DX-Y.NYB\"\u003c/span\u003e, (start = \u003cspan class=\"hljs-string\"\u003e\"2023-01-01\"\u003c/span\u003e), (end = \u003cspan class=\"hljs-string\"\u003e\"2023-12-31\"\u003c/span\u003e), (interval = \u003cspan class=\"hljs-string\"\u003e\"1d\"\u003c/span\u003e));\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e첫 번째 점검은 시각적으로 이루어질 것입니다. 그래서 우리가 만든 그래프와 공식 그래프를 겹쳐서 플로팅할 거에요. 멋져 보이죠?\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003empf.\u003cspan class=\"hljs-title function_\"\u003eplot\u003c/span\u003e(ohlc, (type = \u003cspan class=\"hljs-string\"\u003e\"candle\"\u003c/span\u003e), (figratio = (\u003cspan class=\"hljs-number\"\u003e30\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e)));\nmpf.\u003cspan class=\"hljs-title function_\"\u003eplot\u003c/span\u003e(usd_dollar_index, (type = \u003cspan class=\"hljs-string\"\u003e\"candle\"\u003c/span\u003e), (figratio = (\u003cspan class=\"hljs-number\"\u003e30\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e)));\n\u003c/code\u003e\u003c/pre\u003e\n\u003cimg src=\"/TIL/assets/img/2024-07-09-BuildyourowntradingindexwithPython_1.png\"\u003e\n\u003cp\u003e다른 방법은 종가의 상관 관계를 점검하는 것이에요.\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-comment\"\u003e# 먼저 상관 계수를 계산하기 전에 두 날짜 및 시간 인덱스를 시간대 정보 없이 만들어야 합니다\u003c/span\u003e\nohlc.index = ohlc.index.tz_localize(\u003cspan class=\"hljs-literal\"\u003eNone\u003c/span\u003e)\nusd_dollar_index.index = usd_dollar_index.index.tz_localize(\u003cspan class=\"hljs-literal\"\u003eNone\u003c/span\u003e)\n\ncombined_df = pd.DataFrame({\n    \u003cspan class=\"hljs-string\"\u003e'ohlc'\u003c/span\u003e: ohlc[\u003cspan class=\"hljs-string\"\u003e'close'\u003c/span\u003e],\n    \u003cspan class=\"hljs-string\"\u003e'usd_dollar_index'\u003c/span\u003e: usd_dollar_index[\u003cspan class=\"hljs-string\"\u003e'Close'\u003c/span\u003e]\n})\n\ncorrelation = combined_df.corr().iloc[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e]\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e이를 통해 우리는 놀라운 0.976의 상관 관계를 얻게 됩니다. 이를 통해 두 인덱스가 일치함을 알 수 있습니다...\u003c/p\u003e\n\u003cp\u003e하지만 미국 달러 지수는 6개 통화에 대한 고정 가중치로 계산되는 반면, 우리의 경우에는 14가 있었으므로 약간의 차이가 있습니다!\u003c/p\u003e\n\u003cp\u003e여기에서 Git Hub에서 코드와 통화 쌍에 대한 json 파일을 찾을 수 있습니다. 클릭하세요.\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch2\u003e다음 단계\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e실험: 다양한 가중 체계와 자산 선택을 시도해보세요.\u003c/li\u003e\n\u003cli\u003e향상: 보다 정교한 백테스팅 지표 추가.\u003c/li\u003e\n\u003cli\u003e최적화: 기계 학습 모델 통합하여 사용자 정의 지수를 최적화하세요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e나의 데이터 주도 투자 여정을 함께 해보세요! 저를 Medium, Twitter (현재 X로 잘 알려진) 및 Github에서 팔로우해주세요. 저는 코딩, 글쓰기, 데이터 이해를 통한 성장을 추구합니다 ;)\u003c/p\u003e\n\u003cp\u003e면책 조항: 이 글에서 투자의 흥미로운 세계를 탐험하는 동안 교육 목적으로 제공되는 정보임을 꼭 상기해주세요. 저는 금융 자문가가 아니며 여기에 게시된 내용은 금융 조언으로 간주되지 않습니다. 언제나 연구를 하시고 투자 결정을 내리기 전에 전문가와 상의하는 것을 고려해주십시오.\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch1\u003e쉽고 간결한 영어 커뮤니티에 참여해 주셔서 감사합니다! 떠나시기 전에:\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e반드시 저자를 clapping 하고 팔로우 해주세요 ️👏️️\u003c/li\u003e\n\u003cli\u003e팔로우하기: X | LinkedIn | YouTube | Discord | 뉴스레터\u003c/li\u003e\n\u003cli\u003e다른 플랫폼 방문하기: CoFeed | Differ\u003c/li\u003e\n\u003cli\u003ePlainEnglish.io에서 더 많은 콘텐츠 확인하기\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-07-09-BuildyourowntradingindexwithPython"},"buildId":"o6AmBAY_j9v9JmbaRA39X","assetPrefix":"/TIL","isFallback":false,"gsp":true,"scriptLoader":[{"async":true,"src":"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4877378276818686","strategy":"lazyOnload","crossOrigin":"anonymous"}]}</script></body></html>