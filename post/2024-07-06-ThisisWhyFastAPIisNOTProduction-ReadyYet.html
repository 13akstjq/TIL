<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>ì•„ì§ FastAPIë¥¼ í”„ë¡œë•ì…˜ì— ì‚¬ìš©í•˜ë©´ ì•ˆ ë˜ëŠ” ì´ìœ  | TIL</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://13akstjq.github.io/TIL//post/2024-07-06-ThisisWhyFastAPIisNOTProduction-ReadyYet" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="ì•„ì§ FastAPIë¥¼ í”„ë¡œë•ì…˜ì— ì‚¬ìš©í•˜ë©´ ì•ˆ ë˜ëŠ” ì´ìœ  | TIL" data-gatsby-head="true"/><meta property="og:title" content="ì•„ì§ FastAPIë¥¼ í”„ë¡œë•ì…˜ì— ì‚¬ìš©í•˜ë©´ ì•ˆ ë˜ëŠ” ì´ìœ  | TIL" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-07-06-ThisisWhyFastAPIisNOTProduction-ReadyYet_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://TIL.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://13akstjq.github.io/TIL//post/2024-07-06-ThisisWhyFastAPIisNOTProduction-ReadyYet" data-gatsby-head="true"/><meta name="twitter:title" content="ì•„ì§ FastAPIë¥¼ í”„ë¡œë•ì…˜ì— ì‚¬ìš©í•˜ë©´ ì•ˆ ë˜ëŠ” ì´ìœ  | TIL" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-07-06-ThisisWhyFastAPIisNOTProduction-ReadyYet_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | TIL" data-gatsby-head="true"/><meta name="article:published_time" content="2024-07-06 10:24" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/TIL/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/TIL/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/TIL/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/TIL/favicons/favicon-96x96.png"/><link rel="icon" href="/TIL/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/TIL/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/TIL/favicons/browserconfig.xml"/><link rel="preload" href="/TIL/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/TIL/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/TIL/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/TIL/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/TIL/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/TIL/_next/static/chunks/webpack-21ffe88bdca56cba.js" defer=""></script><script src="/TIL/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/TIL/_next/static/chunks/main-a5eeabb286676ce6.js" defer=""></script><script src="/TIL/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/TIL/_next/static/chunks/75fc9c18-4a646156c659a948.js" defer=""></script><script src="/TIL/_next/static/chunks/348-02483b66b493dd81.js" defer=""></script><script src="/TIL/_next/static/chunks/pages/post/%5Bslug%5D-8ded8b979ba73586.js" defer=""></script><script src="/TIL/_next/static/X4OrKfmLtU3-3BijwfHe6/_buildManifest.js" defer=""></script><script src="/TIL/_next/static/X4OrKfmLtU3-3BijwfHe6/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/TIL">TIL</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/TIL/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">ì•„ì§ FastAPIë¥¼ í”„ë¡œë•ì…˜ì— ì‚¬ìš©í•˜ë©´ ì•ˆ ë˜ëŠ” ì´ìœ </h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="ì•„ì§ FastAPIë¥¼ í”„ë¡œë•ì…˜ì— ì‚¬ìš©í•˜ë©´ ì•ˆ ë˜ëŠ” ì´ìœ " loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/TIL/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">TIL</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Jul 6, 2024</span><span class="posts_reading_time__f7YPP">17<!-- --> min read</span></span></div></div></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<h1>ìš”ì•½</h1>
<p>í˜„ëŒ€ ì›¹ ê°œë°œì—ì„œ íš¨ìœ¨ì ìœ¼ë¡œ ì¢…ì† í•­ëª©ì„ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ í™•ì¥ ê°€ëŠ¥í•˜ê³  ìœ ì§€ ê´€ë¦¬ ê°€ëŠ¥í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“œëŠ” ë° ì¤‘ìš”í•©ë‹ˆë‹¤. ì˜ì¡´ì„± ì£¼ì…(Dependency Injection, DI) ë° ì œì–´ì˜ ì—­ì „(Inversion of Control, IoC)ì€ ì´ ìš”êµ¬ë¥¼ í•´ê²°í•˜ëŠ” ë‘ ê°€ì§€ ë””ìì¸ ì›ì¹™ì…ë‹ˆë‹¤. ë³¸ ë¬¸ì„œì—ì„œëŠ” DIì™€ IoCê°€ ë‘ ê°€ì§€ ì¸ê¸° ìˆëŠ” Python í”„ë ˆì„ì›Œí¬ì¸ FastAPI ë° PyNestì—ì„œ ì–´ë–»ê²Œ êµ¬í˜„ë˜ëŠ”ì§€ ì•Œì•„ë´…ë‹ˆë‹¤. ìš°ë¦¬ëŠ” ë‘ í”„ë ˆì„ì›Œí¬ë¥¼ ì†Œê°œí•˜ê³ , DIì— ëŒ€í•œ ì ‘ê·¼ ë°©ì‹ì„ ìì„¸íˆ ì‚´í´ë³´ë©°, ë‹¤ìŒ í”„ë¡œì íŠ¸ì— ìµœì ì¸ ì„ íƒì„ ë„ì™€ì¤„ ì¢…í•©ì ì¸ ë¹„êµë¥¼ ì œê³µí•  ê²ƒì…ë‹ˆë‹¤.</p>
<p>/assets/img/2024-07-06-ThisisWhyFastAPIisNOTProduction-ReadyYet_0.png</p>
<h1>FastAPI ì†Œê°œ</h1>
<!-- TIL ìˆ˜í‰ -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>FastAPIì€ í‘œì¤€ Python íƒ€ì… íŒíŠ¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ëŠ” Python 3.7+ìš© í˜„ëŒ€ì ì´ê³  ë¹ ë¥¸ ì›¹ í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤. OpenAPIì™€ JSON Schemaì˜ ìë™ ìƒì„± ê¸°ëŠ¥ì„ ì œê³µí•˜ì—¬ APIë¥¼ ë¹ ë¥´ê³  íš¨ìœ¨ì ìœ¼ë¡œ ë§Œë“œëŠ” ë° ë§¤ìš° í¸ë¦¬í•©ë‹ˆë‹¤. FastAPIì˜ DI(Dependency Injection) ì ‘ê·¼ ë°©ì‹ì€ ë‚´ì¥ë˜ì–´ ìˆìœ¼ë©°, Pythonì˜ íƒ€ì… íŒíŠ¸ë¥¼ í™œìš©í•˜ì—¬ ì˜ì¡´ì„±ì„ ì›í™œí•˜ê²Œ ì£¼ì…í•©ë‹ˆë‹¤.</p>
<h1>FastAPIì˜ DI(Dependency Injection) ì ‘ê·¼ ë°©ì‹</h1>
<p>FastAPIì—ì„œëŠ” ì˜ì¡´ì„± ì£¼ì…ì´ í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜ ë‚´ì˜ Depends í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì²˜ë¦¬ë©ë‹ˆë‹¤. ì´ëŠ” FastAPIì—ê²Œ ì˜ì¡´ì„± í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë„ë¡ ì§€ì‹œí•˜ê³  í•´ë‹¹ ë§¤ê°œë³€ìˆ˜ì˜ ì¸ìˆ˜ ê°’ìœ¼ë¡œ ê²°ê³¼ë¥¼ ì‚¬ìš©í•˜ë„ë¡ í•©ë‹ˆë‹¤.</p>
<h2>ì˜ˆì‹œ: FastAPI ì˜ì¡´ì„± ì£¼ì…</h2>
<!-- TIL ìˆ˜í‰ -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-python"><span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> Depends, FastAPI

app = FastAPI()

<span class="hljs-comment"># ì˜ì¡´ì„± í•¨ìˆ˜</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">common_parameters</span>(<span class="hljs-params">q: <span class="hljs-built_in">str</span> = <span class="hljs-literal">None</span>, skip: <span class="hljs-built_in">int</span> = <span class="hljs-number">0</span>, limit: <span class="hljs-built_in">int</span> = <span class="hljs-number">100</span></span>):
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"q"</span>: q, <span class="hljs-string">"skip"</span>: skip, <span class="hljs-string">"limit"</span>: limit}

<span class="hljs-comment"># í•´ë‹¹ ì˜ì¡´ì„±ì„ ì‚¬ìš©í•˜ëŠ” ë¼ìš°íŠ¸</span>
<span class="hljs-meta">@app.get(<span class="hljs-params"><span class="hljs-string">"/items/"</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">read_items</span>(<span class="hljs-params">commons: <span class="hljs-built_in">dict</span> = Depends(<span class="hljs-params">common_parameters</span>)</span>):
    <span class="hljs-keyword">return</span> commons
</code></pre>
<p>ì´ ì˜ˆì—ì„œ <code>common_parameters</code>ì€ <code>/items/</code> ë¼ìš°íŠ¸ì— ì ‘ê·¼í•  ë•Œë§ˆë‹¤ ì‹¤í–‰ë˜ëŠ” ì˜ì¡´ì„± í•¨ìˆ˜ì…ë‹ˆë‹¤.</p>
<h2>ì˜ì¡´ì„± ì£¼ì…ì—ì„œì˜ ì¤‘ë³µì„±</h2>
<p>FastAPIëŠ” ê° ë¼ìš°íŠ¸ì˜ í•¨ìˆ˜ ìˆ˜ì¤€ì—ì„œ ì˜ì¡´ì„±ì´ ì£¼ì…ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ì—¬ëŸ¬ ë¼ìš°íŠ¸ê°€ ë™ì¼í•œ ì˜ì¡´ì„±ì„ í•„ìš”ë¡œ í•˜ëŠ” ê²½ìš° ê° ë¼ìš°íŠ¸ í•¸ë“¤ëŸ¬ í•¨ìˆ˜ì— ë³„ë„ë¡œ ì£¼ì…í•´ì•¼ í•©ë‹ˆë‹¤. íŠ¹íˆ ë§ì€ ìˆ˜ì˜ ë¼ìš°íŠ¸ì™€ ê³µìœ  ì˜ì¡´ì„±ì´ ìˆëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ì—ì„œ ë°˜ë³µì ì´ê³  ì¥í™©í•œ ì½”ë“œë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<!-- TIL ìˆ˜í‰ -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h2>ì˜ˆì œ</h2>
<pre><code class="hljs language-js"><span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> <span class="hljs-title class_">Depends</span>, <span class="hljs-title class_">FastAPI</span>

app = <span class="hljs-title class_">FastAPI</span>()

# ì˜ì¡´ì„±
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Logger</span>:
    def <span class="hljs-title function_">__init__</span>(self):
        <span class="hljs-title function_">print</span>(<span class="hljs-string">"ë¡œê±° ì‹œì‘"</span>)
        time.<span class="hljs-title function_">sleep</span>(<span class="hljs-number">2</span>)
        <span class="hljs-title function_">print</span>(f<span class="hljs-string">"ë¡œê±° ì‹œì‘ë¨ - {self}"</span>)

    def <span class="hljs-title function_">log</span>(self, message):
        <span class="hljs-title function_">print</span>(f<span class="hljs-string">"ë¡œê¹… - {message}"</span>)


# ë™ì¼í•œ ì˜ì¡´ì„±ì„ ì£¼ì…í•˜ëŠ” ì—¬ëŸ¬ ë¼ìš°íŠ¸
@app.<span class="hljs-title function_">get</span>(<span class="hljs-string">"/items/"</span>)
<span class="hljs-keyword">async</span> def <span class="hljs-title function_">read_items</span>(<span class="hljs-attr">logger</span>: <span class="hljs-title class_">Annotated</span>[<span class="hljs-title class_">Logger</span>, <span class="hljs-title class_">Depends</span>(<span class="hljs-title class_">Logger</span>)]):
    logger.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ì•„ì´í…œ ëª©ë¡"</span>)
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"message"</span>: <span class="hljs-string">"ì•„ì´í…œ"</span>}

@app.<span class="hljs-title function_">post</span>(<span class="hljs-string">"/items/"</span>)
<span class="hljs-keyword">async</span> def <span class="hljs-title function_">create_item</span>(<span class="hljs-attr">logger</span>: <span class="hljs-title class_">Annotated</span>[<span class="hljs-title class_">Logger</span>, <span class="hljs-title class_">Depends</span>(<span class="hljs-title class_">Logger</span>)]):
    logger.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ì•„ì´í…œ ìƒì„± ì¤‘"</span>)
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"message"</span>: <span class="hljs-string">"ì•„ì´í…œ ìƒì„±ë¨"</span>}
</code></pre>
<p>ìƒˆë¡œìš´ DBê°€ í•„ìš”í•œ ëª¨ë“  ìƒˆë¡œìš´ ë¼ìš°íŠ¸ì—ì„œ ìš°ë¦¬ëŠ” DBë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì£¼ì…í•´ì•¼ í•©ë‹ˆë‹¤. ì•½ê°„ í¬ê²Œ í™•ì¥í•´ë³´ë©´ ëª¨ë“  ë¼ìš°íŠ¸ê°€ ê³µìœ ëœ ë¡œê±°, ê³µìœ ëœ ì„¤ì •, ê·¸ë¦¬ê³  DB ì—°ê²°ì„ ì£¼ì…í•´ì•¼ í•œë‹¤ê³  ìƒìƒí•´ë³´ë©´, ê°™ì€ ì½”ë“œë¥¼ ê³„ì† ë°˜ë³µí•´ì„œ ì‘ì„±í•´ì•¼ í•˜ëŠ” ìƒí™©ì´ ìƒê¸¸ ê²ƒì…ë‹ˆë‹¤.</p>
<h1>FastAPIì—ì„œ í´ë˜ìŠ¤ ì˜ì¡´ì„± ì£¼ì…í•˜ê¸°</h1>
<!-- TIL ìˆ˜í‰ -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>FastAPI ë£¨íŠ¸ì—ì„œ ë‹¨ì¼ ë° ì—¬ëŸ¬ ì¢…ì†ì„±ì„ ì£¼ì…í•˜ê³  ëª¨ë“  í˜¸ì¶œë§ˆë‹¤ ê°ì²´ë¥¼ ì¬ì„¤ì •í•˜ëŠ” ë¬¸ì œë¥¼ íƒìƒ‰í•´ ë³´ëŠ” ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì‚´í´ë´…ì‹œë‹¤.</p>
<p>ë‹¨ì¼ ì¢…ì†ì„± ì£¼ì… - ì´ ì˜ˆì‹œì—ì„œëŠ” API ë£¨íŠ¸ë¡œ ì£¼ì…ë  Logger ê°ì²´ë¥¼ ë§Œë“­ë‹ˆë‹¤.</p>
<pre><code class="hljs language-python"><span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> FastAPI, Depends
<span class="hljs-keyword">import</span> time

app = FastAPI()

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Logger</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"Logger Starting"</span>)
        time.sleep(<span class="hljs-number">2</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Logger Started at - <span class="hljs-subst">{self}</span>"</span>)
        self.params = {}

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">log</span>(<span class="hljs-params">self, message</span>):
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Logging - <span class="hljs-subst">{message}</span>"</span>)

<span class="hljs-meta">@app.get(<span class="hljs-params"><span class="hljs-string">"/"</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">logger: Logger = Depends(<span class="hljs-params">Logger</span>)</span>):
    logger.log(<span class="hljs-string">"Endpoint hit"</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Logger works"</span>

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    <span class="hljs-keyword">import</span> uvicorn
    uvicorn.run(app, host=<span class="hljs-string">"0.0.0.0"</span>, port=<span class="hljs-number">8000</span>)
</code></pre>
<p>ì¶œë ¥:</p>
<!-- TIL ìˆ˜í‰ -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ë¡œê·¸ ì¶œë ¥ ì‹œì‘
ë¡œê·¸ ì¶œë ¥ ì‹œì‘ ìœ„ì¹˜ - &#x3C;main.Logger object at 0x102f3ddf0>
ë¡œê·¸ - ì—”ë“œí¬ì¸íŠ¸ ìš”ì²­
ì •ë³´: 127.0.0.1:64670 - "GET / HTTP/1.1" 200 OK</p>
<p>ë¡œê·¸ ì¶œë ¥ ì‹œì‘
ë¡œê·¸ ì¶œë ¥ ì‹œì‘ ìœ„ì¹˜ - &#x3C;main.Logger object at 0x102f3dbe0>
ë¡œê·¸ - ì—”ë“œí¬ì¸íŠ¸ ìš”ì²­
ì •ë³´: 127.0.0.1:64670 - "GET / HTTP/1.1" 200 OK</p>
<p>ë¡œê·¸ ì¶œë ¥ ì‹œì‘
ë¡œê·¸ ì¶œë ¥ ì‹œì‘ ìœ„ì¹˜ - &#x3C;main.Logger object at 0x102f3dbb0>
ë¡œê·¸ - ì—”ë“œí¬ì¸íŠ¸ ìš”ì²­
ì •ë³´: 127.0.0.1:64670 - "GET / HTTP/1.1" 200 OK</p>
<p>ìœ„ì˜ ê²°ê³¼ë¥¼ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë£¨íŠ¸ ê²½ë¡œì— ì ‘ì†í•˜ë ¤ê³  í•  ë•Œ, ë¡œê±° ê°ì²´ê°€ ì´ˆê¸°í™”ë˜ê³  "0x102f3ddf0" ìœ„ì¹˜ë¡œ ì„¤ì •ë˜ì—ˆìŒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ ë‘ ë²ˆì§¸ë¡œ ë™ì¼í•œ ê²½ë¡œì— ì•¡ì„¸ìŠ¤í•˜ë©´ ë¡œê±° ê°ì²´ê°€ ë‹¤ì‹œ ì´ˆê¸°í™”ë©ë‹ˆë‹¤. ì´ ë•ŒëŠ” ë‹¤ë¥¸ ë©”ëª¨ë¦¬ ìœ„ì¹˜ì— ì„¤ì •ë©ë‹ˆë‹¤. ë£¨íŠ¸ ê²½ë¡œë¥¼ í˜¸ì¶œí•  ë•Œë§ˆë‹¤ ë¡œê±° ì´ˆê¸°í™”ì— 2ì´ˆì˜ ëŒ€ê¸° ì‹œê°„ì´ ì†Œìš”ë©ë‹ˆë‹¤.</p>
<p>ê·¸ë ‡ë‹¤ë©´ ë¡œê±°ì— ì˜ì¡´í•˜ëŠ” ì„œë¹„ìŠ¤ê°€ í•„ìš”í•œ ê²½ìš° ì–´ë–»ê²Œ ë ê¹Œìš”?</p>
<p>from fastapi import FastAPI, Depends
import time
import random</p>
<p>class Logger:
def <strong>init</strong>(self):
print("ë¡œê·¸ ì¶œë ¥ ì‹œì‘")
time.sleep(2)
print(f"ë¡œê·¸ ì¶œë ¥ ì‹œì‘ ìœ„ì¹˜ - {self}")</p>
<pre><code>def log(self, message):
    print(f"ë¡œê·¸ - {message}")
</code></pre>
<p>class Service:
def <strong>init</strong>(self, logger: Logger = Depends(Logger)):
self.logger = logger
print("ì„œë¹„ìŠ¤ ì‹œì‘")
time.sleep(1)
print(f"ì„œë¹„ìŠ¤ ì‹œì‘ ìœ„ì¹˜ - {self}")</p>
<pre><code>def ì‹¤í–‰(self):
    self.logger.log("ì–´ë–¤ ì‘ì—…ì„ ìˆ˜í–‰ ì¤‘")
    return f"ì‘ì—… ìˆ˜í–‰, {random.random()}"
</code></pre>
<p>app = FastAPI()</p>
<p>@app.get("/")
def get(service: Service = Depends(Service)):
return f"{service.ì‹¤í–‰()}"</p>
<p>if <strong>name</strong> == "<strong>main</strong>":
import uvicorn
uvicorn.run(app, host="0.0.0.0", port=8000)</p>
<!-- TIL ìˆ˜í‰ -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ë‹¹ì—°íˆìš”! FastAPI ë° IOC ì»¨í…Œì´ë„ˆì—ì„œì˜ ì§€ì› ë¶€ì¡±ì€ ì´ ì—”ë“œí¬ì¸íŠ¸ë¥¼ í˜¸ì¶œí•  ë•Œë§ˆë‹¤ ì´ë¯¸ ì´ˆê¸°í™”ëœ ê°ì²´ë“¤ì„ ì´ˆê¸°í™”í•˜ê¸° ìœ„í•´ 3ì´ˆì˜ ì§€ì—° ì‹œê°„ì„ ì§€ë¶ˆí•´ì•¼ í•œë‹¤ëŠ” ì£¼ëœ ì´ìœ ì…ë‹ˆë‹¤. ì´ íŒ¨í„´ì€ ì§„ì •í•œ ì•ˆí‹°-íŒ¨í„´ì´ë©°, FastAPIì˜ ì•½ì ì„ ë“œëŸ¬ë‚¼ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</p>
<p>ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ê³  ìˆ˜ì‹­ ì‹œê°„ì„ ë‚­ë¹„í•œ í›„, FastAPI ìì²´ê°€ ê·¸ëŸ¬í•œ ê¸°ëŠ¥ì„ ì œê³µí•˜ì§€ ëª»í•˜ë©°, ìƒˆë¡­ê³  ë” í†µí•©ì ì¸ ì ‘ê·¼ì´ í•„ìš”í•˜ë‹¤ëŠ” ê²ƒì„ ì´í•´í–ˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì €ëŠ” PyNestë¥¼ ë§Œë“¤ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” ì˜ì¡´ì„± ì£¼ì…ê³¼ ëª¨ë“ˆì„±ì— ì¤‘ì ì„ ë‘” Python ë©”íƒ€-í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤.</p>
<h1>PyNest: ëª¨ë“ˆì‹ DI ì ‘ê·¼ ë°©ì‹</h1>
<p>PyNestì˜ DI ì‹œìŠ¤í…œì€ ë°˜ë³µì ì¸ ì½”ë“œë¥¼ ì¤„ì´ê³  ëŒ€ê·œëª¨ ì• í”Œë¦¬ì¼€ì´ì…˜ì— íŠ¹íˆ ìœ ìš©í•œ ê°œë°œ í”„ë¡œì„¸ìŠ¤ë¥¼ ê°„ì†Œí™”í•˜ëŠ” ë°ì— ë””ìì¸ë˜ì—ˆìŠµë‹ˆë‹¤. PyNestëŠ” ì˜ì¡´ì„±ì´ í•œ ë²ˆì— í•œ ë²ˆì”© ì£¼ì…ë˜ëŠ” êµ¬ì¡°í™”ëœ DI ì‹œìŠ¤í…œì„ ì œê³µí•˜ë©°, ëŒ€ì²´ë¡œ ì»¨íŠ¸ë¡¤ëŸ¬ í´ë˜ìŠ¤ ìˆ˜ì¤€ì—ì„œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. ì´ êµ¬ì¡°ëŠ” í•œ ë²ˆ ì˜ì¡´ì„±ì´ ì»¨íŠ¸ë¡¤ëŸ¬ì— ì£¼ì…ë˜ë©´ ë” ì´ìƒ ì£¼ì…ì´ í•„ìš”í•˜ì§€ ì•Šê³  ì½”ë“œê°€ ì¬ì‚¬ìš©ë˜ë©° DRY ì›ì¹™ì„ ì¤€ìˆ˜í•  ìˆ˜ ìˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì´ êµ¬ì¡°ë¥¼ í†µí•´ í•œ ë²ˆ ì˜ì¡´ì„±ì´ ì»¨íŠ¸ë¡¤ëŸ¬ì— ì£¼ì…ë˜ë©´ ë” ì´ìƒì˜ ì£¼ì…ì´ í•„ìš” ì—†ì´ í•´ë‹¹ ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ëª¨ë“  ê²½ë¡œ ë©”ì„œë“œì—ì„œ ì‚¬ìš©ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì½”ë“œë² ì´ìŠ¤ë¥¼ ê°„ì†Œí™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<!-- TIL ìˆ˜í‰ -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>/assets/img/2024-07-06-ThisisWhyFastAPIisNOTProduction-ReadyYet_1.png</p>
<h1>í•œ ë²ˆ ì£¼ì…í•˜ê³  ì—¬ëŸ¬ ë²ˆ ì‚¬ìš©í•˜ê¸°</h1>
<p>PyNestì˜ ëª¨ë“ˆí™”ëœ ì•„í‚¤í…ì²˜ë¥¼ ì‚¬ìš©í•˜ë©´ ì»¨íŠ¸ë¡¤ëŸ¬ í´ë˜ìŠ¤ì˜ ìƒì„±ìì— ì¢…ì†ì„±ì„ ì£¼ì…í•  ìˆ˜ ìˆì–´ì„œ ë§¤ë²ˆ ëª¨ë“  ë¼ìš°íŠ¸ì— ì¢…ì†ì„±ì„ ë°˜ë³µí•´ì„œ ì£¼ì…í•  í•„ìš” ì—†ì´ ëª¨ë“  ë¼ìš°íŠ¸ì—ì„œ ì´ ì¢…ì†ì„±ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ì˜ˆì‹œ â€”</p>
<!-- TIL ìˆ˜í‰ -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<pre><code class="hljs language-python"><span class="hljs-keyword">from</span> nest.core <span class="hljs-keyword">import</span> Injectable, Controller, Get, Post

<span class="hljs-meta">@Injectable</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Logger</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"Logger Starting"</span>)
        time.sleep(<span class="hljs-number">2</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Logger Started at - <span class="hljs-subst">{self}</span>"</span>)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">log</span>(<span class="hljs-params">self, message</span>):
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Logging - <span class="hljs-subst">{message}</span>"</span>)


<span class="hljs-meta">@Controller(<span class="hljs-params"><span class="hljs-string">"items"</span></span>)</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ItemsController</span>:

  <span class="hljs-comment"># Inject Once</span>
  <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, logger: Logger</span>):
      self.logger = logger


  <span class="hljs-comment"># Use Many</span>
<span class="hljs-meta">  @Get(<span class="hljs-params"><span class="hljs-string">"/"</span></span>)</span>
  <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">read_items</span>(<span class="hljs-params">self</span>):
      self.logger.log(<span class="hljs-string">"list of items"</span>)
      <span class="hljs-keyword">return</span> {<span class="hljs-string">"message"</span>: <span class="hljs-string">"Items"</span>}

<span class="hljs-meta">  @Post(<span class="hljs-params"><span class="hljs-string">"/{item}"</span></span>)</span>
  <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">create_item</span>(<span class="hljs-params">self, item: <span class="hljs-built_in">str</span></span>):
      self.logger.log(<span class="hljs-string">"creating item"</span>)
      <span class="hljs-keyword">return</span> {<span class="hljs-string">"message"</span>: <span class="hljs-string">f"Item created - <span class="hljs-subst">{item}</span>"</span>}
</code></pre>
<p>ì´ ëª¨ë“ˆí™”ëœ ì ‘ê·¼ ë°©ì‹ì„ í†µí•´ ì»¨íŠ¸ë¡¤ëŸ¬ ìƒì„±ìì— í•„ìš”í•œ ë§Œí¼ì˜ ì˜ì¡´ì„±ì„ ì£¼ì…í•˜ê³  ì´ëŸ¬í•œ ì˜ì¡´ì„±ì„ í´ë˜ìŠ¤ ë©”ì„œë“œì—ì„œ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ê²°ê³¼ë¡œ ì½”ë“œê°€ í›¨ì”¬ ë” ê¹”ë”í•´ì§€ë©° ì½”ë“œë¥¼ ë‹¤ì‹œ ì‘ì„±í•˜ê±°ë‚˜ ë³µì¡í•˜ê²Œ ë§Œë“¤ í•„ìš”ê°€ ì—†ì–´ì§‘ë‹ˆë‹¤.</p>
<h1>ì‹±ê¸€í„´ íŒ¨í„´ì˜ í˜ì„ ë°›ì•„ë“¤ì´ì„¸ìš”</h1>
<p>ì´ì „ì— ë…¼ì˜í•œ ë°”ì™€ ê°™ì´, FastAPIì˜ DI ë§¤ì»¤ë‹ˆì¦˜ì˜ ê°€ì¥ í° ë‹¨ì ì€ ì¢…ì†ì„±ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ì‹±ê¸€í„´ íŒ¨í„´ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²ƒì…ë‹ˆë‹¤. ìš°ë¦¬ëŠ” ì¢…ì†ì„±ì´ ëª¨ë“  ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ë§ˆë‹¤ ì´ˆê¸°í™”ë˜ì–´ì•¼ í•œë‹¤ëŠ” ê²ƒì„ ê´€ì°°í–ˆìŠµë‹ˆë‹¤.</p>
<!-- TIL ìˆ˜í‰ -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>PyNestì—ì„œëŠ” í˜„ì—­ì—ì„œ "injector" ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©í•©ë‹ˆë‹¤. ì´ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” í˜„ëŒ€ì ì¸ Python ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì¢…ì†ì„±ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•œ íŒ¨í‚¤ì§€ì…ë‹ˆë‹¤. injectorì€ ì‹±ê¸€í†¤ íŒ¨í„´ê³¼ ë©€í‹° ë°”ì¸ë”©ì„ ì§€ì›í•©ë‹ˆë‹¤. í´ë˜ìŠ¤ê°€ Injectableë¡œ í‘œì‹œë˜ì–´ ì¢…ì†ì„±ìœ¼ë¡œ ë“±ë¡ë˜ë©´, injectorëŠ” í•´ë‹¹ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ê·¸ ì°¸ì¡°ë¥¼ ì €ì¥í•©ë‹ˆë‹¤. ì´ injectable ê°ì²´ì— ëŒ€í•œ ëª¨ë“  í˜¸ì¶œì€ injectorë¥¼ í†µí•´ ì´ë£¨ì–´ì§€ë©°, injectable ê°ì²´ì˜ ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.</p>
<h2>ì½”ë“œë¡œ ì‚´í´ë³´ê¸°</h2>
<p>ë¨¼ì €, PyNestì—ì„œ ëª¨ë“  ê´€ë ¨ importë¬¸ì„ ì •ë¦¬í•´ ë´…ì‹œë‹¤</p>
<pre><code class="hljs language-python"><span class="hljs-keyword">import</span> logging
<span class="hljs-keyword">import</span> os

<span class="hljs-keyword">from</span> nest.core <span class="hljs-keyword">import</span> (
    Controller,
    Delete,
    Get,
    Injectable,
    Module,
    Post,
    Put,
    PyNestFactory,
)
<span class="hljs-keyword">import</span> time
</code></pre>
<!-- TIL ìˆ˜í‰ -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ë‹¤ìŒìœ¼ë¡œ ì£¼ì…í•˜ë ¤ëŠ” ë‘ ê°œì˜ ì œê³µìì™€ ë¡œì§ ë ˆì´ì–´ë¥¼ í¬í•¨í•˜ëŠ” ì£¼ìš” ì„œë¹„ìŠ¤ë¥¼ ì„ ì–¸í•  ê²ƒì…ë‹ˆë‹¤.</p>
<pre><code class="hljs language-js"># êµ¬ì„± ì œê³µì
@<span class="hljs-title class_">Injectable</span>()
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ConfigService</span>:
    def <span class="hljs-title function_">__init__</span>(self):
        time.<span class="hljs-title function_">sleep</span>(<span class="hljs-number">2</span>)
        <span class="hljs-title function_">print</span>(f<span class="hljs-string">"ConfigService ì‹œì‘ - {self}"</span>)
        self.<span class="hljs-property">config</span> = os.<span class="hljs-property">environ</span>

    def <span class="hljs-title function_">get</span>(self, <span class="hljs-attr">key</span>: str):
        <span class="hljs-keyword">return</span> self.<span class="hljs-property">config</span>.<span class="hljs-title function_">get</span>(key)

# ë¡œê±° ì œê³µì
@<span class="hljs-title class_">Injectable</span>()
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Logger</span>:
    def <span class="hljs-title function_">__init__</span>(self, <span class="hljs-attr">config_service</span>: <span class="hljs-title class_">ConfigService</span>):
        time.<span class="hljs-title function_">sleep</span>(<span class="hljs-number">2</span>)
        <span class="hljs-title function_">print</span>(f<span class="hljs-string">"ë¡œê±° ì‹œì‘ - {self}"</span>)
        self.<span class="hljs-property">config_service</span> = config_service
        self.<span class="hljs-property">log</span> = logging.<span class="hljs-title function_">getLogger</span>(__name__)

# ì£¼ìš” ì„œë¹„ìŠ¤
@<span class="hljs-title class_">Injectable</span>()
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ItemService</span>:
    def <span class="hljs-title function_">__init__</span>(self, <span class="hljs-attr">logger</span>: <span class="hljs-title class_">Logger</span>):
        time.<span class="hljs-title function_">sleep</span>(<span class="hljs-number">2</span>)
        <span class="hljs-title function_">print</span>(f<span class="hljs-string">"ItemService ì‹œì‘ - {self}"</span>)
        self.<span class="hljs-property">logger</span> = logger
        self.<span class="hljs-property">items</span> = [{<span class="hljs-string">"item_name"</span>: <span class="hljs-string">"Foo"</span>}, {<span class="hljs-string">"item_name"</span>: <span class="hljs-string">"Bar"</span>}, {<span class="hljs-string">"item_name"</span>: <span class="hljs-string">"Baz"</span>}]

    def <span class="hljs-title function_">get</span>(self):
        self.<span class="hljs-property">logger</span>.<span class="hljs-property">log</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"ì—”ë“œí¬ì¸íŠ¸ í˜¸ì¶œë¨"</span>)
        <span class="hljs-keyword">return</span> self.<span class="hljs-property">items</span>

    def <span class="hljs-title function_">post</span>(self, <span class="hljs-attr">item</span>: dict):
        self.<span class="hljs-property">items</span>.<span class="hljs-title function_">append</span>(item)
        <span class="hljs-keyword">return</span> self.<span class="hljs-property">items</span>

    def <span class="hljs-title function_">put</span>(self, <span class="hljs-attr">item</span>: dict):
        self.<span class="hljs-property">items</span>.<span class="hljs-title function_">append</span>(item)
        <span class="hljs-keyword">return</span> self.<span class="hljs-property">items</span>

    def <span class="hljs-title function_">delete</span>(self, <span class="hljs-attr">item</span>: dict):
        self.<span class="hljs-property">items</span>.<span class="hljs-title function_">remove</span>(item)
        <span class="hljs-keyword">return</span> self.<span class="hljs-property">items</span>
</code></pre>
<p>ì´ì œ Controllerë¥¼ ìƒì„±í•˜ê³  ì„œë¹„ìŠ¤ì— ì£¼ì…í•©ë‹ˆë‹¤ â€”</p>
<pre><code class="hljs language-js">@<span class="hljs-title class_">Controller</span>(<span class="hljs-string">"items"</span>)
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ItemController</span>:
    def <span class="hljs-title function_">__init__</span>(self, <span class="hljs-attr">item_service</span>: <span class="hljs-title class_">ItemService</span>):
        <span class="hljs-title function_">print</span>(<span class="hljs-string">"ItemController ì‹œì‘ - {self}"</span>)
        self.<span class="hljs-property">item_service</span> = item_service

    @<span class="hljs-title class_">Get</span>(<span class="hljs-string">"/"</span>)
    def <span class="hljs-title function_">get</span>(self):
        <span class="hljs-keyword">return</span> self.<span class="hljs-property">item_service</span>.<span class="hljs-title function_">get</span>()

    @<span class="hljs-title class_">Post</span>(<span class="hljs-string">"/"</span>)
    def <span class="hljs-title function_">post</span>(self, <span class="hljs-attr">item</span>: dict):
        <span class="hljs-keyword">return</span> self.<span class="hljs-property">item_service</span>.<span class="hljs-title function_">post</span>(item)

    @<span class="hljs-title class_">Put</span>(<span class="hljs-string">"/"</span>)
    def <span class="hljs-title function_">put</span>(self, <span class="hljs-attr">item</span>: dict):
        <span class="hljs-keyword">return</span> self.<span class="hljs-property">item_service</span>.<span class="hljs-title function_">put</span>(item)

    @<span class="hljs-title class_">Delete</span>(<span class="hljs-string">"/"</span>)
    def <span class="hljs-title function_">delete</span>(self, <span class="hljs-attr">item</span>: dict):
        <span class="hljs-keyword">return</span> self.<span class="hljs-property">item_service</span>.<span class="hljs-title function_">delete</span>(item)
</code></pre>
<!-- TIL ìˆ˜í‰ -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ëŒ€ë‹¨í•´ìš”, ê±°ì˜ ë‹¤ ì™”ì–´ìš”. ì´ì œ ì•± ëª¨ë“ˆì„ ì •ì˜í•˜ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•´ ë´…ì‹œë‹¤ -</p>
<pre><code class="hljs language-js">@<span class="hljs-title class_">Module</span>(
    controllers=[<span class="hljs-title class_">ItemController</span>],
    providers=[<span class="hljs-title class_">Logger</span>],
)
<span class="hljs-keyword">class</span> <span class="hljs-title class_">AppModule</span>:
    pass


app = <span class="hljs-title class_">PyNestFactory</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">AppModule</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    <span class="hljs-keyword">import</span> uvicorn

    uvicorn.<span class="hljs-title function_">run</span>(app.<span class="hljs-property">http_server</span>, host=<span class="hljs-string">"0.0.0.0"</span>, port=<span class="hljs-number">8623</span>)
</code></pre>
<p>ê²°ê³¼ â€”</p>
<pre><code class="hljs language-js"><span class="hljs-title class_">ConfigService</span> starting - &#x3C;__main__.ConfigService object at 0x10444d580>
Logger Starting - &#x3C;__main__.Logger object at 0x10444daf0>
ItemService starting - &#x3C;__main__.ItemService object at 0x10444d190>

INFO:     Started server process [64770]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8623 (Press CTRL+C to quit)


INFO:     127.0.0.1:63810 - "GET /items/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:63824 - "PUT /items/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:63840 - "POST /items/ HTTP/1.1" 200 OK
</code></pre>
<!-- TIL ìˆ˜í‰ -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>ì™€ìš°! ì •ë§ ë©‹ì§€ë„¤ìš”. ìš°ë¦¬ëŠ” Injectables ê°ì²´ë¥¼ í•œ ë²ˆë§Œ ì´ˆê¸°í™”í•˜ê³ , ê·¸ ì´í›„ë¡œëŠ” ì»¨í…Œì´ë„ˆê°€ í•´ë‹¹ ê°ì²´ë“¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê´€ë¦¬í•œë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆì–´ìš”.</p>
<p>/assets/img/2024-07-06-ThisisWhyFastAPIisNOTProduction-ReadyYet_2.png</p>
<h1>PyNest DI ë§¤ë‹ˆí˜ìŠ¤íŠ¸</h1>
<h2>ì£¼ì… ê°€ëŠ¥í•œ ê°ì²´</h2>
<!-- TIL ìˆ˜í‰ -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>Injectable-to-Injectable Injection: Injectable ê°ì²´ëŠ” ë‹¤ë¥¸ Injectable ê°ì²´ë¥¼ ì£¼ì…í•  ìˆ˜ ìˆì–´ì„œ ì¼ê´€ì„± ìˆê³  í†µí•©ëœ ì¢…ì†ì„± ê³„ì¸µì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
</ul>
<h2>Controllers</h2>
<ul>
<li>Controller Injection: ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” Injectable ê°ì²´ë¥¼ ì£¼ì…í•  ìˆ˜ ìˆì–´ì„œ í•„ìš”ì— ë”°ë¼ ì„œë¹„ìŠ¤ì™€ ë¦¬í¬ì§€í† ë¦¬ì— ì±…ì„ì„ ìœ„ì„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
</ul>
<h2>Dependency Graph</h2>
<!-- TIL ìˆ˜í‰ -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>ë¹„ìˆœí™˜ ì˜ì¡´ì„± ê·¸ë˜í”„: ì˜ì¡´ì„±ì€ ìœ í–¥ ë¹„ìˆœí™˜ ê·¸ë˜í”„ (DAG)ë¥¼ í˜•ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ìˆœí™˜ ì˜ì¡´ì„±ì´ ì—†ì–´ì•¼ í•˜ë©°, ì´ë¥¼ í†µí•´ ì²˜ë¦¬ ê°€ëŠ¥í•œ ì˜ì¡´ì„± í•´ê²° ë° ëŸ°íƒ€ì„ ì˜¤ë¥˜ë‚˜ ë¬´í•œ ë£¨í”„ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
</ul>
<h2>ì˜ì¡´ì„± í•´ê²°ê³¼ ê´€ë¦¬</h2>
<ul>
<li>ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™” ê³¼ì •ì—ì„œ IoC ì»¨í…Œì´ë„ˆëŠ” ëª¨ë“  ì˜ì¡´ì„±ì„ í•´ê²°í•˜ê³ , ì•„ì§ ë“±ë¡ë˜ì§€ ì•Šì€ ê°œì²´ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ë©°, ì´ëŸ¬í•œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê´€ë¦¬í•˜ì—¬ ì£¼ì…í•˜ëŠ” ìœ„ì¹˜ì—ì„œ ì œê³µë  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.</li>
</ul>
<h2>ì œê³µì(Providers) ë‚´ë³´ë‚´ê¸°</h2>
<!-- TIL ìˆ˜í‰ -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>ëª¨ë“ˆì€ ì œê³µìë¥¼ ë‚´ë³´ë‚¼ ìˆ˜ ìˆìœ¼ë©°, ì´ëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ ë‚´ì˜ ë‹¤ë¥¸ ëª¨ë“ˆì—ì„œ ì‚¬ìš©ë˜ê±°ë‚˜ ì£¼ì…ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
</ul>
<h2>ëª¨ë“ˆ ê°„ ì œê³µì ì£¼ì…</h2>
<ul>
<li>ë‹¤ë¥¸ ëª¨ë“ˆì—ì„œ ì œê³µìë¥¼ ì£¼ì…í•˜ë ¤ë©´ í•´ë‹¹ ì›í•˜ëŠ” ì œê³µìë¥¼ í¬í•¨í•˜ëŠ” ëª¨ë“ˆì„ ëª…ì‹œì ìœ¼ë¡œ ê°€ì ¸ì™€ì•¼ í•©ë‹ˆë‹¤.</li>
</ul>
<h2>ì¸ìŠ¤í„´ìŠ¤ ì°¸ì¡° ë° ì¬ì‚¬ìš©</h2>
<!-- TIL ìˆ˜í‰ -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‚½ì…ëœ ê³µê¸‰ìë¥¼ í˜¸ì¶œí•˜ë©´ ì´ë¯¸ ì´ˆê¸°í™”ëœ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¸ì¡°í•˜ì—¬ ì¬ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•¨ìœ¼ë¡œì¨ í•„ìš” ì—†ëŠ” ê³µê¸‰ì ì¸ìŠ¤í„´ìŠ¤ì˜ ìƒì„±ì„ ë°©ì§€í•˜ê³  í•„ìš”í•  ë•Œ ì‹±ê¸€í†¤ê³¼ ê°™ì€ íŒ¨í„´ì„ ì¤€ìˆ˜í•©ë‹ˆë‹¤.</li>
</ul>
<h1>ê²°ë¡ : DIì— ìˆì–´ PyNestê°€ ì„ í˜¸ë˜ëŠ” ì´ìœ </h1>
<p>PyNestì˜ DI ì ‘ê·¼ ë°©ì‹ì€ ì½”ë“œ ì¡°ì§í™”ì™€ ìœ ì§€ ë³´ìˆ˜ ì¸¡ë©´ì—ì„œ ëª…í™•í•œ ì¥ì ì„ ì œê³µí•˜ë©°, íŠ¹íˆ ëª¨ë“ˆí™” ë° ë°˜ë³µì„ í”¼í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•œ ëŒ€ê·œëª¨ í”„ë¡œì íŠ¸ì— ì í•©í•©ë‹ˆë‹¤. ì‘ìš© í”„ë¡œê·¸ë¨ êµ¬ì¡° ë‚´ì—ì„œ ë” ë†’ì€ ìˆ˜ì¤€ì—ì„œ ì˜ì¡´ì„±ì„ ì£¼ì…í•  ìˆ˜ ìˆë„ë¡ í•¨ìœ¼ë¡œì¨, PyNestëŠ” ë³´ë‹¤ DRY(ë°˜ë³µí•˜ì§€ ë§ˆë¼) ì½”ë“œë² ì´ìŠ¤ë¥¼ ìš©ì´í•˜ê²Œ ë§Œë“¤ì–´ ì¤Œìœ¼ë¡œì¨ ì˜¤ë¥˜ ê°€ëŠ¥ì„±ì„ ì¤„ì´ê³  ë¦¬íŒ©í„°ë§ ë° í…ŒìŠ¤íŠ¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ê°„ì†Œí™”í•©ë‹ˆë‹¤.</p>
<p>ë°˜ë©´ì— FastAPIì˜ DI ì‹œìŠ¤í…œì€ ê°ìì˜ ê°•ì ì„ ê°–ê³  ìˆì§€ë§Œ, í•¨ìˆ˜ ìˆ˜ì¤€ì—ì„œì˜ ì£¼ì… ìš”êµ¬ëŠ” ë¶ˆí•„ìš”í•˜ê³  ì¤‘ë³µì ì¸ ìš”ì†Œë¥¼ ë„ì…í•  ìˆ˜ ìˆìœ¼ë©°, ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë³µì¡ì„±ì„ ë”í•´ê°ì— ë”°ë¼ ìœ ì§€ ë³´ìˆ˜ ë° í™•ì¥ì„±ì—ì„œ ì˜¤íˆë ¤ ì—­íš¨ê³¼ë¥¼ ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<!-- TIL ìˆ˜í‰ -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h1>ìì›</h1>
<ul>
<li>ë¹„ë™ê¸° ë§ˆë²•: PyNestì™€ SQLAlchemy 2.0ì´ íŒŒì´ì¬ ì•± ì„±ëŠ¥ì„ 25% í–¥ìƒì‹œí‚µë‹ˆë‹¤.</li>
<li>FastAPI ì´ìƒ: PyNestë¥¼ ì´ìš©í•œ 2024ë…„ íŒŒì´ì¬ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì˜ ì§„í™”</li>
<li>ì˜ì¡´ì„± ì£¼ì… 101 - PyNestë¥¼ ì´ìš©í•œ íŒŒì´ì¬ ì›¹ ì•±ì˜ ì˜ì¡´ì„± ì£¼ì… ë‹¨ìˆœí™”</li>
<li>PyNest PyPI: <a href="https://pypi.org/project/pynest-api" rel="nofollow" target="_blank">https://pypi.org/project/pynest-api</a></li>
<li>ê³µì‹ ë¬¸ì„œ: <a href="https://pythonnest.github.io/PyNest/" rel="nofollow" target="_blank">https://pythonnest.github.io/PyNest/</a></li>
<li>GitHub ì €ì¥ì†Œ: <a href="https://github.com/PythonNest/PyNest" rel="nofollow" target="_blank">https://github.com/PythonNest/PyNest</a></li>
</ul>
<h1>ê°„ë‹¨í•˜ê²Œ ì„¤ëª…í•˜ê¸° ğŸš€</h1>
<p>In Plain English ì»¤ë®¤ë‹ˆí‹°ì˜ ì¼ì›ì´ ë˜ì–´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ê³„ì†í•˜ì‹œê¸° ì „ì—:</p>
<!-- TIL ìˆ˜í‰ -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>ê¸€ì“´ì´ë¥¼ í´ë©í•˜ê³  íŒ”ë¡œìš°í•´ì£¼ì„¸ìš”! ğŸ‘ï¸ï¸</li>
<li>íŒ”ë¡œìš°í•˜ê¸°: X | LinkedIn | YouTube | Discord | ë‰´ìŠ¤ë ˆí„°</li>
<li>ë‹¤ë¥¸ í”Œë«í¼ ë°©ë¬¸í•˜ê¸°: CoFeed | Differ</li>
<li>ë” ë§ì€ ì½˜í…ì¸ : PlainEnglish.io</li>
</ul>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"ì•„ì§ FastAPIë¥¼ í”„ë¡œë•ì…˜ì— ì‚¬ìš©í•˜ë©´ ì•ˆ ë˜ëŠ” ì´ìœ ","description":"","date":"2024-07-06 10:24","slug":"2024-07-06-ThisisWhyFastAPIisNOTProduction-ReadyYet","content":"\n# ìš”ì•½\n\ní˜„ëŒ€ ì›¹ ê°œë°œì—ì„œ íš¨ìœ¨ì ìœ¼ë¡œ ì¢…ì† í•­ëª©ì„ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ í™•ì¥ ê°€ëŠ¥í•˜ê³  ìœ ì§€ ê´€ë¦¬ ê°€ëŠ¥í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“œëŠ” ë° ì¤‘ìš”í•©ë‹ˆë‹¤. ì˜ì¡´ì„± ì£¼ì…(Dependency Injection, DI) ë° ì œì–´ì˜ ì—­ì „(Inversion of Control, IoC)ì€ ì´ ìš”êµ¬ë¥¼ í•´ê²°í•˜ëŠ” ë‘ ê°€ì§€ ë””ìì¸ ì›ì¹™ì…ë‹ˆë‹¤. ë³¸ ë¬¸ì„œì—ì„œëŠ” DIì™€ IoCê°€ ë‘ ê°€ì§€ ì¸ê¸° ìˆëŠ” Python í”„ë ˆì„ì›Œí¬ì¸ FastAPI ë° PyNestì—ì„œ ì–´ë–»ê²Œ êµ¬í˜„ë˜ëŠ”ì§€ ì•Œì•„ë´…ë‹ˆë‹¤. ìš°ë¦¬ëŠ” ë‘ í”„ë ˆì„ì›Œí¬ë¥¼ ì†Œê°œí•˜ê³ , DIì— ëŒ€í•œ ì ‘ê·¼ ë°©ì‹ì„ ìì„¸íˆ ì‚´í´ë³´ë©°, ë‹¤ìŒ í”„ë¡œì íŠ¸ì— ìµœì ì¸ ì„ íƒì„ ë„ì™€ì¤„ ì¢…í•©ì ì¸ ë¹„êµë¥¼ ì œê³µí•  ê²ƒì…ë‹ˆë‹¤.\n\n/assets/img/2024-07-06-ThisisWhyFastAPIisNOTProduction-ReadyYet_0.png\n\n# FastAPI ì†Œê°œ\n\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nFastAPIì€ í‘œì¤€ Python íƒ€ì… íŒíŠ¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ëŠ” Python 3.7+ìš© í˜„ëŒ€ì ì´ê³  ë¹ ë¥¸ ì›¹ í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤. OpenAPIì™€ JSON Schemaì˜ ìë™ ìƒì„± ê¸°ëŠ¥ì„ ì œê³µí•˜ì—¬ APIë¥¼ ë¹ ë¥´ê³  íš¨ìœ¨ì ìœ¼ë¡œ ë§Œë“œëŠ” ë° ë§¤ìš° í¸ë¦¬í•©ë‹ˆë‹¤. FastAPIì˜ DI(Dependency Injection) ì ‘ê·¼ ë°©ì‹ì€ ë‚´ì¥ë˜ì–´ ìˆìœ¼ë©°, Pythonì˜ íƒ€ì… íŒíŠ¸ë¥¼ í™œìš©í•˜ì—¬ ì˜ì¡´ì„±ì„ ì›í™œí•˜ê²Œ ì£¼ì…í•©ë‹ˆë‹¤.\n\n# FastAPIì˜ DI(Dependency Injection) ì ‘ê·¼ ë°©ì‹\n\nFastAPIì—ì„œëŠ” ì˜ì¡´ì„± ì£¼ì…ì´ í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜ ë‚´ì˜ Depends í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì²˜ë¦¬ë©ë‹ˆë‹¤. ì´ëŠ” FastAPIì—ê²Œ ì˜ì¡´ì„± í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë„ë¡ ì§€ì‹œí•˜ê³  í•´ë‹¹ ë§¤ê°œë³€ìˆ˜ì˜ ì¸ìˆ˜ ê°’ìœ¼ë¡œ ê²°ê³¼ë¥¼ ì‚¬ìš©í•˜ë„ë¡ í•©ë‹ˆë‹¤.\n\n## ì˜ˆì‹œ: FastAPI ì˜ì¡´ì„± ì£¼ì…\n\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```python\nfrom fastapi import Depends, FastAPI\n\napp = FastAPI()\n\n# ì˜ì¡´ì„± í•¨ìˆ˜\nasync def common_parameters(q: str = None, skip: int = 0, limit: int = 100):\n    return {\"q\": q, \"skip\": skip, \"limit\": limit}\n\n# í•´ë‹¹ ì˜ì¡´ì„±ì„ ì‚¬ìš©í•˜ëŠ” ë¼ìš°íŠ¸\n@app.get(\"/items/\")\nasync def read_items(commons: dict = Depends(common_parameters)):\n    return commons\n```\n\nì´ ì˜ˆì—ì„œ `common_parameters`ì€ `/items/` ë¼ìš°íŠ¸ì— ì ‘ê·¼í•  ë•Œë§ˆë‹¤ ì‹¤í–‰ë˜ëŠ” ì˜ì¡´ì„± í•¨ìˆ˜ì…ë‹ˆë‹¤.\n\n## ì˜ì¡´ì„± ì£¼ì…ì—ì„œì˜ ì¤‘ë³µì„±\n\nFastAPIëŠ” ê° ë¼ìš°íŠ¸ì˜ í•¨ìˆ˜ ìˆ˜ì¤€ì—ì„œ ì˜ì¡´ì„±ì´ ì£¼ì…ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ì—¬ëŸ¬ ë¼ìš°íŠ¸ê°€ ë™ì¼í•œ ì˜ì¡´ì„±ì„ í•„ìš”ë¡œ í•˜ëŠ” ê²½ìš° ê° ë¼ìš°íŠ¸ í•¸ë“¤ëŸ¬ í•¨ìˆ˜ì— ë³„ë„ë¡œ ì£¼ì…í•´ì•¼ í•©ë‹ˆë‹¤. íŠ¹íˆ ë§ì€ ìˆ˜ì˜ ë¼ìš°íŠ¸ì™€ ê³µìœ  ì˜ì¡´ì„±ì´ ìˆëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ì—ì„œ ë°˜ë³µì ì´ê³  ì¥í™©í•œ ì½”ë“œë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n## ì˜ˆì œ\n\n```js\nfrom fastapi import Depends, FastAPI\n\napp = FastAPI()\n\n# ì˜ì¡´ì„±\nclass Logger:\n    def __init__(self):\n        print(\"ë¡œê±° ì‹œì‘\")\n        time.sleep(2)\n        print(f\"ë¡œê±° ì‹œì‘ë¨ - {self}\")\n\n    def log(self, message):\n        print(f\"ë¡œê¹… - {message}\")\n\n\n# ë™ì¼í•œ ì˜ì¡´ì„±ì„ ì£¼ì…í•˜ëŠ” ì—¬ëŸ¬ ë¼ìš°íŠ¸\n@app.get(\"/items/\")\nasync def read_items(logger: Annotated[Logger, Depends(Logger)]):\n    logger.log(\"ì•„ì´í…œ ëª©ë¡\")\n    return {\"message\": \"ì•„ì´í…œ\"}\n\n@app.post(\"/items/\")\nasync def create_item(logger: Annotated[Logger, Depends(Logger)]):\n    logger.log(\"ì•„ì´í…œ ìƒì„± ì¤‘\")\n    return {\"message\": \"ì•„ì´í…œ ìƒì„±ë¨\"}\n```\n\nìƒˆë¡œìš´ DBê°€ í•„ìš”í•œ ëª¨ë“  ìƒˆë¡œìš´ ë¼ìš°íŠ¸ì—ì„œ ìš°ë¦¬ëŠ” DBë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì£¼ì…í•´ì•¼ í•©ë‹ˆë‹¤. ì•½ê°„ í¬ê²Œ í™•ì¥í•´ë³´ë©´ ëª¨ë“  ë¼ìš°íŠ¸ê°€ ê³µìœ ëœ ë¡œê±°, ê³µìœ ëœ ì„¤ì •, ê·¸ë¦¬ê³  DB ì—°ê²°ì„ ì£¼ì…í•´ì•¼ í•œë‹¤ê³  ìƒìƒí•´ë³´ë©´, ê°™ì€ ì½”ë“œë¥¼ ê³„ì† ë°˜ë³µí•´ì„œ ì‘ì„±í•´ì•¼ í•˜ëŠ” ìƒí™©ì´ ìƒê¸¸ ê²ƒì…ë‹ˆë‹¤.\n\n# FastAPIì—ì„œ í´ë˜ìŠ¤ ì˜ì¡´ì„± ì£¼ì…í•˜ê¸°\n\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nFastAPI ë£¨íŠ¸ì—ì„œ ë‹¨ì¼ ë° ì—¬ëŸ¬ ì¢…ì†ì„±ì„ ì£¼ì…í•˜ê³  ëª¨ë“  í˜¸ì¶œë§ˆë‹¤ ê°ì²´ë¥¼ ì¬ì„¤ì •í•˜ëŠ” ë¬¸ì œë¥¼ íƒìƒ‰í•´ ë³´ëŠ” ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì‚´í´ë´…ì‹œë‹¤.\n\në‹¨ì¼ ì¢…ì†ì„± ì£¼ì… - ì´ ì˜ˆì‹œì—ì„œëŠ” API ë£¨íŠ¸ë¡œ ì£¼ì…ë  Logger ê°ì²´ë¥¼ ë§Œë“­ë‹ˆë‹¤.\n\n```python\nfrom fastapi import FastAPI, Depends\nimport time\n\napp = FastAPI()\n\nclass Logger:\n    def __init__(self):\n        print(\"Logger Starting\")\n        time.sleep(2)\n        print(f\"Logger Started at - {self}\")\n        self.params = {}\n\n    def log(self, message):\n        print(f\"Logging - {message}\")\n\n@app.get(\"/\")\ndef get(logger: Logger = Depends(Logger)):\n    logger.log(\"Endpoint hit\")\n    return \"Logger works\"\n\nif __name__ == \"__main__\":\n    import uvicorn\n    uvicorn.run(app, host=\"0.0.0.0\", port=8000)\n```\n\nì¶œë ¥:\n\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\në¡œê·¸ ì¶œë ¥ ì‹œì‘\në¡œê·¸ ì¶œë ¥ ì‹œì‘ ìœ„ì¹˜ - \u003cmain.Logger object at 0x102f3ddf0\u003e\në¡œê·¸ - ì—”ë“œí¬ì¸íŠ¸ ìš”ì²­\nì •ë³´: 127.0.0.1:64670 - \"GET / HTTP/1.1\" 200 OK\n\në¡œê·¸ ì¶œë ¥ ì‹œì‘\në¡œê·¸ ì¶œë ¥ ì‹œì‘ ìœ„ì¹˜ - \u003cmain.Logger object at 0x102f3dbe0\u003e\në¡œê·¸ - ì—”ë“œí¬ì¸íŠ¸ ìš”ì²­\nì •ë³´: 127.0.0.1:64670 - \"GET / HTTP/1.1\" 200 OK\n\në¡œê·¸ ì¶œë ¥ ì‹œì‘\në¡œê·¸ ì¶œë ¥ ì‹œì‘ ìœ„ì¹˜ - \u003cmain.Logger object at 0x102f3dbb0\u003e\në¡œê·¸ - ì—”ë“œí¬ì¸íŠ¸ ìš”ì²­\nì •ë³´: 127.0.0.1:64670 - \"GET / HTTP/1.1\" 200 OK\n\nìœ„ì˜ ê²°ê³¼ë¥¼ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë£¨íŠ¸ ê²½ë¡œì— ì ‘ì†í•˜ë ¤ê³  í•  ë•Œ, ë¡œê±° ê°ì²´ê°€ ì´ˆê¸°í™”ë˜ê³  \"0x102f3ddf0\" ìœ„ì¹˜ë¡œ ì„¤ì •ë˜ì—ˆìŒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ ë‘ ë²ˆì§¸ë¡œ ë™ì¼í•œ ê²½ë¡œì— ì•¡ì„¸ìŠ¤í•˜ë©´ ë¡œê±° ê°ì²´ê°€ ë‹¤ì‹œ ì´ˆê¸°í™”ë©ë‹ˆë‹¤. ì´ ë•ŒëŠ” ë‹¤ë¥¸ ë©”ëª¨ë¦¬ ìœ„ì¹˜ì— ì„¤ì •ë©ë‹ˆë‹¤. ë£¨íŠ¸ ê²½ë¡œë¥¼ í˜¸ì¶œí•  ë•Œë§ˆë‹¤ ë¡œê±° ì´ˆê¸°í™”ì— 2ì´ˆì˜ ëŒ€ê¸° ì‹œê°„ì´ ì†Œìš”ë©ë‹ˆë‹¤.\n\nê·¸ë ‡ë‹¤ë©´ ë¡œê±°ì— ì˜ì¡´í•˜ëŠ” ì„œë¹„ìŠ¤ê°€ í•„ìš”í•œ ê²½ìš° ì–´ë–»ê²Œ ë ê¹Œìš”?\n\nfrom fastapi import FastAPI, Depends\nimport time\nimport random\n\nclass Logger:\ndef **init**(self):\nprint(\"ë¡œê·¸ ì¶œë ¥ ì‹œì‘\")\ntime.sleep(2)\nprint(f\"ë¡œê·¸ ì¶œë ¥ ì‹œì‘ ìœ„ì¹˜ - {self}\")\n\n    def log(self, message):\n        print(f\"ë¡œê·¸ - {message}\")\n\nclass Service:\ndef **init**(self, logger: Logger = Depends(Logger)):\nself.logger = logger\nprint(\"ì„œë¹„ìŠ¤ ì‹œì‘\")\ntime.sleep(1)\nprint(f\"ì„œë¹„ìŠ¤ ì‹œì‘ ìœ„ì¹˜ - {self}\")\n\n    def ì‹¤í–‰(self):\n        self.logger.log(\"ì–´ë–¤ ì‘ì—…ì„ ìˆ˜í–‰ ì¤‘\")\n        return f\"ì‘ì—… ìˆ˜í–‰, {random.random()}\"\n\napp = FastAPI()\n\n@app.get(\"/\")\ndef get(service: Service = Depends(Service)):\nreturn f\"{service.ì‹¤í–‰()}\"\n\nif **name** == \"**main**\":\nimport uvicorn\nuvicorn.run(app, host=\"0.0.0.0\", port=8000)\n\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\në‹¹ì—°íˆìš”! FastAPI ë° IOC ì»¨í…Œì´ë„ˆì—ì„œì˜ ì§€ì› ë¶€ì¡±ì€ ì´ ì—”ë“œí¬ì¸íŠ¸ë¥¼ í˜¸ì¶œí•  ë•Œë§ˆë‹¤ ì´ë¯¸ ì´ˆê¸°í™”ëœ ê°ì²´ë“¤ì„ ì´ˆê¸°í™”í•˜ê¸° ìœ„í•´ 3ì´ˆì˜ ì§€ì—° ì‹œê°„ì„ ì§€ë¶ˆí•´ì•¼ í•œë‹¤ëŠ” ì£¼ëœ ì´ìœ ì…ë‹ˆë‹¤. ì´ íŒ¨í„´ì€ ì§„ì •í•œ ì•ˆí‹°-íŒ¨í„´ì´ë©°, FastAPIì˜ ì•½ì ì„ ë“œëŸ¬ë‚¼ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.\n\nì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ê³  ìˆ˜ì‹­ ì‹œê°„ì„ ë‚­ë¹„í•œ í›„, FastAPI ìì²´ê°€ ê·¸ëŸ¬í•œ ê¸°ëŠ¥ì„ ì œê³µí•˜ì§€ ëª»í•˜ë©°, ìƒˆë¡­ê³  ë” í†µí•©ì ì¸ ì ‘ê·¼ì´ í•„ìš”í•˜ë‹¤ëŠ” ê²ƒì„ ì´í•´í–ˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì €ëŠ” PyNestë¥¼ ë§Œë“¤ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” ì˜ì¡´ì„± ì£¼ì…ê³¼ ëª¨ë“ˆì„±ì— ì¤‘ì ì„ ë‘” Python ë©”íƒ€-í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤.\n\n# PyNest: ëª¨ë“ˆì‹ DI ì ‘ê·¼ ë°©ì‹\n\nPyNestì˜ DI ì‹œìŠ¤í…œì€ ë°˜ë³µì ì¸ ì½”ë“œë¥¼ ì¤„ì´ê³  ëŒ€ê·œëª¨ ì• í”Œë¦¬ì¼€ì´ì…˜ì— íŠ¹íˆ ìœ ìš©í•œ ê°œë°œ í”„ë¡œì„¸ìŠ¤ë¥¼ ê°„ì†Œí™”í•˜ëŠ” ë°ì— ë””ìì¸ë˜ì—ˆìŠµë‹ˆë‹¤. PyNestëŠ” ì˜ì¡´ì„±ì´ í•œ ë²ˆì— í•œ ë²ˆì”© ì£¼ì…ë˜ëŠ” êµ¬ì¡°í™”ëœ DI ì‹œìŠ¤í…œì„ ì œê³µí•˜ë©°, ëŒ€ì²´ë¡œ ì»¨íŠ¸ë¡¤ëŸ¬ í´ë˜ìŠ¤ ìˆ˜ì¤€ì—ì„œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. ì´ êµ¬ì¡°ëŠ” í•œ ë²ˆ ì˜ì¡´ì„±ì´ ì»¨íŠ¸ë¡¤ëŸ¬ì— ì£¼ì…ë˜ë©´ ë” ì´ìƒ ì£¼ì…ì´ í•„ìš”í•˜ì§€ ì•Šê³  ì½”ë“œê°€ ì¬ì‚¬ìš©ë˜ë©° DRY ì›ì¹™ì„ ì¤€ìˆ˜í•  ìˆ˜ ìˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì´ êµ¬ì¡°ë¥¼ í†µí•´ í•œ ë²ˆ ì˜ì¡´ì„±ì´ ì»¨íŠ¸ë¡¤ëŸ¬ì— ì£¼ì…ë˜ë©´ ë” ì´ìƒì˜ ì£¼ì…ì´ í•„ìš” ì—†ì´ í•´ë‹¹ ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ëª¨ë“  ê²½ë¡œ ë©”ì„œë“œì—ì„œ ì‚¬ìš©ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì½”ë“œë² ì´ìŠ¤ë¥¼ ê°„ì†Œí™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n/assets/img/2024-07-06-ThisisWhyFastAPIisNOTProduction-ReadyYet_1.png\n\n# í•œ ë²ˆ ì£¼ì…í•˜ê³  ì—¬ëŸ¬ ë²ˆ ì‚¬ìš©í•˜ê¸°\n\nPyNestì˜ ëª¨ë“ˆí™”ëœ ì•„í‚¤í…ì²˜ë¥¼ ì‚¬ìš©í•˜ë©´ ì»¨íŠ¸ë¡¤ëŸ¬ í´ë˜ìŠ¤ì˜ ìƒì„±ìì— ì¢…ì†ì„±ì„ ì£¼ì…í•  ìˆ˜ ìˆì–´ì„œ ë§¤ë²ˆ ëª¨ë“  ë¼ìš°íŠ¸ì— ì¢…ì†ì„±ì„ ë°˜ë³µí•´ì„œ ì£¼ì…í•  í•„ìš” ì—†ì´ ëª¨ë“  ë¼ìš°íŠ¸ì—ì„œ ì´ ì¢…ì†ì„±ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì˜ˆì‹œ â€”\n\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n```python\nfrom nest.core import Injectable, Controller, Get, Post\n\n@Injectable\nclass Logger:\n    def __init__(self):\n        print(\"Logger Starting\")\n        time.sleep(2)\n        print(f\"Logger Started at - {self}\")\n\n    def log(self, message):\n        print(f\"Logging - {message}\")\n\n\n@Controller(\"items\")\nclass ItemsController:\n\n  # Inject Once\n  def __init__(self, logger: Logger):\n      self.logger = logger\n\n\n  # Use Many\n  @Get(\"/\")\n  async def read_items(self):\n      self.logger.log(\"list of items\")\n      return {\"message\": \"Items\"}\n\n  @Post(\"/{item}\")\n  async def create_item(self, item: str):\n      self.logger.log(\"creating item\")\n      return {\"message\": f\"Item created - {item}\"}\n```\n\nì´ ëª¨ë“ˆí™”ëœ ì ‘ê·¼ ë°©ì‹ì„ í†µí•´ ì»¨íŠ¸ë¡¤ëŸ¬ ìƒì„±ìì— í•„ìš”í•œ ë§Œí¼ì˜ ì˜ì¡´ì„±ì„ ì£¼ì…í•˜ê³  ì´ëŸ¬í•œ ì˜ì¡´ì„±ì„ í´ë˜ìŠ¤ ë©”ì„œë“œì—ì„œ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ê²°ê³¼ë¡œ ì½”ë“œê°€ í›¨ì”¬ ë” ê¹”ë”í•´ì§€ë©° ì½”ë“œë¥¼ ë‹¤ì‹œ ì‘ì„±í•˜ê±°ë‚˜ ë³µì¡í•˜ê²Œ ë§Œë“¤ í•„ìš”ê°€ ì—†ì–´ì§‘ë‹ˆë‹¤.\n\n# ì‹±ê¸€í„´ íŒ¨í„´ì˜ í˜ì„ ë°›ì•„ë“¤ì´ì„¸ìš”\n\nì´ì „ì— ë…¼ì˜í•œ ë°”ì™€ ê°™ì´, FastAPIì˜ DI ë§¤ì»¤ë‹ˆì¦˜ì˜ ê°€ì¥ í° ë‹¨ì ì€ ì¢…ì†ì„±ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ì‹±ê¸€í„´ íŒ¨í„´ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²ƒì…ë‹ˆë‹¤. ìš°ë¦¬ëŠ” ì¢…ì†ì„±ì´ ëª¨ë“  ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ë§ˆë‹¤ ì´ˆê¸°í™”ë˜ì–´ì•¼ í•œë‹¤ëŠ” ê²ƒì„ ê´€ì°°í–ˆìŠµë‹ˆë‹¤.\n\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nPyNestì—ì„œëŠ” í˜„ì—­ì—ì„œ \"injector\" ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©í•©ë‹ˆë‹¤. ì´ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” í˜„ëŒ€ì ì¸ Python ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì¢…ì†ì„±ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•œ íŒ¨í‚¤ì§€ì…ë‹ˆë‹¤. injectorì€ ì‹±ê¸€í†¤ íŒ¨í„´ê³¼ ë©€í‹° ë°”ì¸ë”©ì„ ì§€ì›í•©ë‹ˆë‹¤. í´ë˜ìŠ¤ê°€ Injectableë¡œ í‘œì‹œë˜ì–´ ì¢…ì†ì„±ìœ¼ë¡œ ë“±ë¡ë˜ë©´, injectorëŠ” í•´ë‹¹ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ê·¸ ì°¸ì¡°ë¥¼ ì €ì¥í•©ë‹ˆë‹¤. ì´ injectable ê°ì²´ì— ëŒ€í•œ ëª¨ë“  í˜¸ì¶œì€ injectorë¥¼ í†µí•´ ì´ë£¨ì–´ì§€ë©°, injectable ê°ì²´ì˜ ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\n\n## ì½”ë“œë¡œ ì‚´í´ë³´ê¸°\n\në¨¼ì €, PyNestì—ì„œ ëª¨ë“  ê´€ë ¨ importë¬¸ì„ ì •ë¦¬í•´ ë´…ì‹œë‹¤\n\n```python\nimport logging\nimport os\n\nfrom nest.core import (\n    Controller,\n    Delete,\n    Get,\n    Injectable,\n    Module,\n    Post,\n    Put,\n    PyNestFactory,\n)\nimport time\n```\n\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\në‹¤ìŒìœ¼ë¡œ ì£¼ì…í•˜ë ¤ëŠ” ë‘ ê°œì˜ ì œê³µìì™€ ë¡œì§ ë ˆì´ì–´ë¥¼ í¬í•¨í•˜ëŠ” ì£¼ìš” ì„œë¹„ìŠ¤ë¥¼ ì„ ì–¸í•  ê²ƒì…ë‹ˆë‹¤.\n\n```js\n# êµ¬ì„± ì œê³µì\n@Injectable()\nclass ConfigService:\n    def __init__(self):\n        time.sleep(2)\n        print(f\"ConfigService ì‹œì‘ - {self}\")\n        self.config = os.environ\n\n    def get(self, key: str):\n        return self.config.get(key)\n\n# ë¡œê±° ì œê³µì\n@Injectable()\nclass Logger:\n    def __init__(self, config_service: ConfigService):\n        time.sleep(2)\n        print(f\"ë¡œê±° ì‹œì‘ - {self}\")\n        self.config_service = config_service\n        self.log = logging.getLogger(__name__)\n\n# ì£¼ìš” ì„œë¹„ìŠ¤\n@Injectable()\nclass ItemService:\n    def __init__(self, logger: Logger):\n        time.sleep(2)\n        print(f\"ItemService ì‹œì‘ - {self}\")\n        self.logger = logger\n        self.items = [{\"item_name\": \"Foo\"}, {\"item_name\": \"Bar\"}, {\"item_name\": \"Baz\"}]\n\n    def get(self):\n        self.logger.log.info(\"ì—”ë“œí¬ì¸íŠ¸ í˜¸ì¶œë¨\")\n        return self.items\n\n    def post(self, item: dict):\n        self.items.append(item)\n        return self.items\n\n    def put(self, item: dict):\n        self.items.append(item)\n        return self.items\n\n    def delete(self, item: dict):\n        self.items.remove(item)\n        return self.items\n```\n\nì´ì œ Controllerë¥¼ ìƒì„±í•˜ê³  ì„œë¹„ìŠ¤ì— ì£¼ì…í•©ë‹ˆë‹¤ â€”\n\n```js\n@Controller(\"items\")\nclass ItemController:\n    def __init__(self, item_service: ItemService):\n        print(\"ItemController ì‹œì‘ - {self}\")\n        self.item_service = item_service\n\n    @Get(\"/\")\n    def get(self):\n        return self.item_service.get()\n\n    @Post(\"/\")\n    def post(self, item: dict):\n        return self.item_service.post(item)\n\n    @Put(\"/\")\n    def put(self, item: dict):\n        return self.item_service.put(item)\n\n    @Delete(\"/\")\n    def delete(self, item: dict):\n        return self.item_service.delete(item)\n```\n\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nëŒ€ë‹¨í•´ìš”, ê±°ì˜ ë‹¤ ì™”ì–´ìš”. ì´ì œ ì•± ëª¨ë“ˆì„ ì •ì˜í•˜ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•´ ë´…ì‹œë‹¤ -\n\n```js\n@Module(\n    controllers=[ItemController],\n    providers=[Logger],\n)\nclass AppModule:\n    pass\n\n\napp = PyNestFactory.create(AppModule)\n\nif __name__ == \"__main__\":\n    import uvicorn\n\n    uvicorn.run(app.http_server, host=\"0.0.0.0\", port=8623)\n```\n\nê²°ê³¼ â€”\n\n```js\nConfigService starting - \u003c__main__.ConfigService object at 0x10444d580\u003e\nLogger Starting - \u003c__main__.Logger object at 0x10444daf0\u003e\nItemService starting - \u003c__main__.ItemService object at 0x10444d190\u003e\n\nINFO:     Started server process [64770]\nINFO:     Waiting for application startup.\nINFO:     Application startup complete.\nINFO:     Uvicorn running on http://0.0.0.0:8623 (Press CTRL+C to quit)\n\n\nINFO:     127.0.0.1:63810 - \"GET /items/ HTTP/1.1\" 200 OK\nINFO:     127.0.0.1:63824 - \"PUT /items/ HTTP/1.1\" 200 OK\nINFO:     127.0.0.1:63840 - \"POST /items/ HTTP/1.1\" 200 OK\n```\n\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nì™€ìš°! ì •ë§ ë©‹ì§€ë„¤ìš”. ìš°ë¦¬ëŠ” Injectables ê°ì²´ë¥¼ í•œ ë²ˆë§Œ ì´ˆê¸°í™”í•˜ê³ , ê·¸ ì´í›„ë¡œëŠ” ì»¨í…Œì´ë„ˆê°€ í•´ë‹¹ ê°ì²´ë“¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê´€ë¦¬í•œë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆì–´ìš”.\n\n/assets/img/2024-07-06-ThisisWhyFastAPIisNOTProduction-ReadyYet_2.png\n\n# PyNest DI ë§¤ë‹ˆí˜ìŠ¤íŠ¸\n\n## ì£¼ì… ê°€ëŠ¥í•œ ê°ì²´\n\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- Injectable-to-Injectable Injection: Injectable ê°ì²´ëŠ” ë‹¤ë¥¸ Injectable ê°ì²´ë¥¼ ì£¼ì…í•  ìˆ˜ ìˆì–´ì„œ ì¼ê´€ì„± ìˆê³  í†µí•©ëœ ì¢…ì†ì„± ê³„ì¸µì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n## Controllers\n\n- Controller Injection: ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” Injectable ê°ì²´ë¥¼ ì£¼ì…í•  ìˆ˜ ìˆì–´ì„œ í•„ìš”ì— ë”°ë¼ ì„œë¹„ìŠ¤ì™€ ë¦¬í¬ì§€í† ë¦¬ì— ì±…ì„ì„ ìœ„ì„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n## Dependency Graph\n\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- ë¹„ìˆœí™˜ ì˜ì¡´ì„± ê·¸ë˜í”„: ì˜ì¡´ì„±ì€ ìœ í–¥ ë¹„ìˆœí™˜ ê·¸ë˜í”„ (DAG)ë¥¼ í˜•ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ìˆœí™˜ ì˜ì¡´ì„±ì´ ì—†ì–´ì•¼ í•˜ë©°, ì´ë¥¼ í†µí•´ ì²˜ë¦¬ ê°€ëŠ¥í•œ ì˜ì¡´ì„± í•´ê²° ë° ëŸ°íƒ€ì„ ì˜¤ë¥˜ë‚˜ ë¬´í•œ ë£¨í”„ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n## ì˜ì¡´ì„± í•´ê²°ê³¼ ê´€ë¦¬\n\n- ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™” ê³¼ì •ì—ì„œ IoC ì»¨í…Œì´ë„ˆëŠ” ëª¨ë“  ì˜ì¡´ì„±ì„ í•´ê²°í•˜ê³ , ì•„ì§ ë“±ë¡ë˜ì§€ ì•Šì€ ê°œì²´ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ë©°, ì´ëŸ¬í•œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê´€ë¦¬í•˜ì—¬ ì£¼ì…í•˜ëŠ” ìœ„ì¹˜ì—ì„œ ì œê³µë  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.\n\n## ì œê³µì(Providers) ë‚´ë³´ë‚´ê¸°\n\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- ëª¨ë“ˆì€ ì œê³µìë¥¼ ë‚´ë³´ë‚¼ ìˆ˜ ìˆìœ¼ë©°, ì´ëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ ë‚´ì˜ ë‹¤ë¥¸ ëª¨ë“ˆì—ì„œ ì‚¬ìš©ë˜ê±°ë‚˜ ì£¼ì…ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n## ëª¨ë“ˆ ê°„ ì œê³µì ì£¼ì…\n\n- ë‹¤ë¥¸ ëª¨ë“ˆì—ì„œ ì œê³µìë¥¼ ì£¼ì…í•˜ë ¤ë©´ í•´ë‹¹ ì›í•˜ëŠ” ì œê³µìë¥¼ í¬í•¨í•˜ëŠ” ëª¨ë“ˆì„ ëª…ì‹œì ìœ¼ë¡œ ê°€ì ¸ì™€ì•¼ í•©ë‹ˆë‹¤.\n\n## ì¸ìŠ¤í„´ìŠ¤ ì°¸ì¡° ë° ì¬ì‚¬ìš©\n\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‚½ì…ëœ ê³µê¸‰ìë¥¼ í˜¸ì¶œí•˜ë©´ ì´ë¯¸ ì´ˆê¸°í™”ëœ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¸ì¡°í•˜ì—¬ ì¬ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•¨ìœ¼ë¡œì¨ í•„ìš” ì—†ëŠ” ê³µê¸‰ì ì¸ìŠ¤í„´ìŠ¤ì˜ ìƒì„±ì„ ë°©ì§€í•˜ê³  í•„ìš”í•  ë•Œ ì‹±ê¸€í†¤ê³¼ ê°™ì€ íŒ¨í„´ì„ ì¤€ìˆ˜í•©ë‹ˆë‹¤.\n\n# ê²°ë¡ : DIì— ìˆì–´ PyNestê°€ ì„ í˜¸ë˜ëŠ” ì´ìœ \n\nPyNestì˜ DI ì ‘ê·¼ ë°©ì‹ì€ ì½”ë“œ ì¡°ì§í™”ì™€ ìœ ì§€ ë³´ìˆ˜ ì¸¡ë©´ì—ì„œ ëª…í™•í•œ ì¥ì ì„ ì œê³µí•˜ë©°, íŠ¹íˆ ëª¨ë“ˆí™” ë° ë°˜ë³µì„ í”¼í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•œ ëŒ€ê·œëª¨ í”„ë¡œì íŠ¸ì— ì í•©í•©ë‹ˆë‹¤. ì‘ìš© í”„ë¡œê·¸ë¨ êµ¬ì¡° ë‚´ì—ì„œ ë” ë†’ì€ ìˆ˜ì¤€ì—ì„œ ì˜ì¡´ì„±ì„ ì£¼ì…í•  ìˆ˜ ìˆë„ë¡ í•¨ìœ¼ë¡œì¨, PyNestëŠ” ë³´ë‹¤ DRY(ë°˜ë³µí•˜ì§€ ë§ˆë¼) ì½”ë“œë² ì´ìŠ¤ë¥¼ ìš©ì´í•˜ê²Œ ë§Œë“¤ì–´ ì¤Œìœ¼ë¡œì¨ ì˜¤ë¥˜ ê°€ëŠ¥ì„±ì„ ì¤„ì´ê³  ë¦¬íŒ©í„°ë§ ë° í…ŒìŠ¤íŠ¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ê°„ì†Œí™”í•©ë‹ˆë‹¤.\n\në°˜ë©´ì— FastAPIì˜ DI ì‹œìŠ¤í…œì€ ê°ìì˜ ê°•ì ì„ ê°–ê³  ìˆì§€ë§Œ, í•¨ìˆ˜ ìˆ˜ì¤€ì—ì„œì˜ ì£¼ì… ìš”êµ¬ëŠ” ë¶ˆí•„ìš”í•˜ê³  ì¤‘ë³µì ì¸ ìš”ì†Œë¥¼ ë„ì…í•  ìˆ˜ ìˆìœ¼ë©°, ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë³µì¡ì„±ì„ ë”í•´ê°ì— ë”°ë¼ ìœ ì§€ ë³´ìˆ˜ ë° í™•ì¥ì„±ì—ì„œ ì˜¤íˆë ¤ ì—­íš¨ê³¼ë¥¼ ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n# ìì›\n\n- ë¹„ë™ê¸° ë§ˆë²•: PyNestì™€ SQLAlchemy 2.0ì´ íŒŒì´ì¬ ì•± ì„±ëŠ¥ì„ 25% í–¥ìƒì‹œí‚µë‹ˆë‹¤.\n- FastAPI ì´ìƒ: PyNestë¥¼ ì´ìš©í•œ 2024ë…„ íŒŒì´ì¬ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì˜ ì§„í™”\n- ì˜ì¡´ì„± ì£¼ì… 101 - PyNestë¥¼ ì´ìš©í•œ íŒŒì´ì¬ ì›¹ ì•±ì˜ ì˜ì¡´ì„± ì£¼ì… ë‹¨ìˆœí™”\n- PyNest PyPI: https://pypi.org/project/pynest-api\n- ê³µì‹ ë¬¸ì„œ: https://pythonnest.github.io/PyNest/\n- GitHub ì €ì¥ì†Œ: https://github.com/PythonNest/PyNest\n\n# ê°„ë‹¨í•˜ê²Œ ì„¤ëª…í•˜ê¸° ğŸš€\n\nIn Plain English ì»¤ë®¤ë‹ˆí‹°ì˜ ì¼ì›ì´ ë˜ì–´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ê³„ì†í•˜ì‹œê¸° ì „ì—:\n\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- ê¸€ì“´ì´ë¥¼ í´ë©í•˜ê³  íŒ”ë¡œìš°í•´ì£¼ì„¸ìš”! ğŸ‘ï¸ï¸\n- íŒ”ë¡œìš°í•˜ê¸°: X | LinkedIn | YouTube | Discord | ë‰´ìŠ¤ë ˆí„°\n- ë‹¤ë¥¸ í”Œë«í¼ ë°©ë¬¸í•˜ê¸°: CoFeed | Differ\n- ë” ë§ì€ ì½˜í…ì¸ : PlainEnglish.io\n","ogImage":{"url":"/assets/img/2024-07-06-ThisisWhyFastAPIisNOTProduction-ReadyYet_0.png"},"coverImage":"/TIL/assets/img/2024-07-06-ThisisWhyFastAPIisNOTProduction-ReadyYet_0.png","tag":["Tech"],"readingTime":17},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003ch1\u003eìš”ì•½\u003c/h1\u003e\n\u003cp\u003eí˜„ëŒ€ ì›¹ ê°œë°œì—ì„œ íš¨ìœ¨ì ìœ¼ë¡œ ì¢…ì† í•­ëª©ì„ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ í™•ì¥ ê°€ëŠ¥í•˜ê³  ìœ ì§€ ê´€ë¦¬ ê°€ëŠ¥í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“œëŠ” ë° ì¤‘ìš”í•©ë‹ˆë‹¤. ì˜ì¡´ì„± ì£¼ì…(Dependency Injection, DI) ë° ì œì–´ì˜ ì—­ì „(Inversion of Control, IoC)ì€ ì´ ìš”êµ¬ë¥¼ í•´ê²°í•˜ëŠ” ë‘ ê°€ì§€ ë””ìì¸ ì›ì¹™ì…ë‹ˆë‹¤. ë³¸ ë¬¸ì„œì—ì„œëŠ” DIì™€ IoCê°€ ë‘ ê°€ì§€ ì¸ê¸° ìˆëŠ” Python í”„ë ˆì„ì›Œí¬ì¸ FastAPI ë° PyNestì—ì„œ ì–´ë–»ê²Œ êµ¬í˜„ë˜ëŠ”ì§€ ì•Œì•„ë´…ë‹ˆë‹¤. ìš°ë¦¬ëŠ” ë‘ í”„ë ˆì„ì›Œí¬ë¥¼ ì†Œê°œí•˜ê³ , DIì— ëŒ€í•œ ì ‘ê·¼ ë°©ì‹ì„ ìì„¸íˆ ì‚´í´ë³´ë©°, ë‹¤ìŒ í”„ë¡œì íŠ¸ì— ìµœì ì¸ ì„ íƒì„ ë„ì™€ì¤„ ì¢…í•©ì ì¸ ë¹„êµë¥¼ ì œê³µí•  ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003e/assets/img/2024-07-06-ThisisWhyFastAPIisNOTProduction-ReadyYet_0.png\u003c/p\u003e\n\u003ch1\u003eFastAPI ì†Œê°œ\u003c/h1\u003e\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eFastAPIì€ í‘œì¤€ Python íƒ€ì… íŒíŠ¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ëŠ” Python 3.7+ìš© í˜„ëŒ€ì ì´ê³  ë¹ ë¥¸ ì›¹ í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤. OpenAPIì™€ JSON Schemaì˜ ìë™ ìƒì„± ê¸°ëŠ¥ì„ ì œê³µí•˜ì—¬ APIë¥¼ ë¹ ë¥´ê³  íš¨ìœ¨ì ìœ¼ë¡œ ë§Œë“œëŠ” ë° ë§¤ìš° í¸ë¦¬í•©ë‹ˆë‹¤. FastAPIì˜ DI(Dependency Injection) ì ‘ê·¼ ë°©ì‹ì€ ë‚´ì¥ë˜ì–´ ìˆìœ¼ë©°, Pythonì˜ íƒ€ì… íŒíŠ¸ë¥¼ í™œìš©í•˜ì—¬ ì˜ì¡´ì„±ì„ ì›í™œí•˜ê²Œ ì£¼ì…í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch1\u003eFastAPIì˜ DI(Dependency Injection) ì ‘ê·¼ ë°©ì‹\u003c/h1\u003e\n\u003cp\u003eFastAPIì—ì„œëŠ” ì˜ì¡´ì„± ì£¼ì…ì´ í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜ ë‚´ì˜ Depends í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì²˜ë¦¬ë©ë‹ˆë‹¤. ì´ëŠ” FastAPIì—ê²Œ ì˜ì¡´ì„± í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë„ë¡ ì§€ì‹œí•˜ê³  í•´ë‹¹ ë§¤ê°œë³€ìˆ˜ì˜ ì¸ìˆ˜ ê°’ìœ¼ë¡œ ê²°ê³¼ë¥¼ ì‚¬ìš©í•˜ë„ë¡ í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch2\u003eì˜ˆì‹œ: FastAPI ì˜ì¡´ì„± ì£¼ì…\u003c/h2\u003e\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e fastapi \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e Depends, FastAPI\n\napp = FastAPI()\n\n\u003cspan class=\"hljs-comment\"\u003e# ì˜ì¡´ì„± í•¨ìˆ˜\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ecommon_parameters\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eq: \u003cspan class=\"hljs-built_in\"\u003estr\u003c/span\u003e = \u003cspan class=\"hljs-literal\"\u003eNone\u003c/span\u003e, skip: \u003cspan class=\"hljs-built_in\"\u003eint\u003c/span\u003e = \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, limit: \u003cspan class=\"hljs-built_in\"\u003eint\u003c/span\u003e = \u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e\u003c/span\u003e):\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\u003cspan class=\"hljs-string\"\u003e\"q\"\u003c/span\u003e: q, \u003cspan class=\"hljs-string\"\u003e\"skip\"\u003c/span\u003e: skip, \u003cspan class=\"hljs-string\"\u003e\"limit\"\u003c/span\u003e: limit}\n\n\u003cspan class=\"hljs-comment\"\u003e# í•´ë‹¹ ì˜ì¡´ì„±ì„ ì‚¬ìš©í•˜ëŠ” ë¼ìš°íŠ¸\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e@app.get(\u003cspan class=\"hljs-params\"\u003e\u003cspan class=\"hljs-string\"\u003e\"/items/\"\u003c/span\u003e\u003c/span\u003e)\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eread_items\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ecommons: \u003cspan class=\"hljs-built_in\"\u003edict\u003c/span\u003e = Depends(\u003cspan class=\"hljs-params\"\u003ecommon_parameters\u003c/span\u003e)\u003c/span\u003e):\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e commons\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì´ ì˜ˆì—ì„œ \u003ccode\u003ecommon_parameters\u003c/code\u003eì€ \u003ccode\u003e/items/\u003c/code\u003e ë¼ìš°íŠ¸ì— ì ‘ê·¼í•  ë•Œë§ˆë‹¤ ì‹¤í–‰ë˜ëŠ” ì˜ì¡´ì„± í•¨ìˆ˜ì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch2\u003eì˜ì¡´ì„± ì£¼ì…ì—ì„œì˜ ì¤‘ë³µì„±\u003c/h2\u003e\n\u003cp\u003eFastAPIëŠ” ê° ë¼ìš°íŠ¸ì˜ í•¨ìˆ˜ ìˆ˜ì¤€ì—ì„œ ì˜ì¡´ì„±ì´ ì£¼ì…ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ì—¬ëŸ¬ ë¼ìš°íŠ¸ê°€ ë™ì¼í•œ ì˜ì¡´ì„±ì„ í•„ìš”ë¡œ í•˜ëŠ” ê²½ìš° ê° ë¼ìš°íŠ¸ í•¸ë“¤ëŸ¬ í•¨ìˆ˜ì— ë³„ë„ë¡œ ì£¼ì…í•´ì•¼ í•©ë‹ˆë‹¤. íŠ¹íˆ ë§ì€ ìˆ˜ì˜ ë¼ìš°íŠ¸ì™€ ê³µìœ  ì˜ì¡´ì„±ì´ ìˆëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ì—ì„œ ë°˜ë³µì ì´ê³  ì¥í™©í•œ ì½”ë“œë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch2\u003eì˜ˆì œ\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e fastapi \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eDepends\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eFastAPI\u003c/span\u003e\n\napp = \u003cspan class=\"hljs-title class_\"\u003eFastAPI\u003c/span\u003e()\n\n# ì˜ì¡´ì„±\n\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eLogger\u003c/span\u003e:\n    def \u003cspan class=\"hljs-title function_\"\u003e__init__\u003c/span\u003e(self):\n        \u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"ë¡œê±° ì‹œì‘\"\u003c/span\u003e)\n        time.\u003cspan class=\"hljs-title function_\"\u003esleep\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e)\n        \u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(f\u003cspan class=\"hljs-string\"\u003e\"ë¡œê±° ì‹œì‘ë¨ - {self}\"\u003c/span\u003e)\n\n    def \u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(self, message):\n        \u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(f\u003cspan class=\"hljs-string\"\u003e\"ë¡œê¹… - {message}\"\u003c/span\u003e)\n\n\n# ë™ì¼í•œ ì˜ì¡´ì„±ì„ ì£¼ì…í•˜ëŠ” ì—¬ëŸ¬ ë¼ìš°íŠ¸\n@app.\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"/items/\"\u003c/span\u003e)\n\u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e def \u003cspan class=\"hljs-title function_\"\u003eread_items\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003elogger\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eAnnotated\u003c/span\u003e[\u003cspan class=\"hljs-title class_\"\u003eLogger\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eDepends\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eLogger\u003c/span\u003e)]):\n    logger.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"ì•„ì´í…œ ëª©ë¡\"\u003c/span\u003e)\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\u003cspan class=\"hljs-string\"\u003e\"message\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"ì•„ì´í…œ\"\u003c/span\u003e}\n\n@app.\u003cspan class=\"hljs-title function_\"\u003epost\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"/items/\"\u003c/span\u003e)\n\u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e def \u003cspan class=\"hljs-title function_\"\u003ecreate_item\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003elogger\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eAnnotated\u003c/span\u003e[\u003cspan class=\"hljs-title class_\"\u003eLogger\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eDepends\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eLogger\u003c/span\u003e)]):\n    logger.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"ì•„ì´í…œ ìƒì„± ì¤‘\"\u003c/span\u003e)\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\u003cspan class=\"hljs-string\"\u003e\"message\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"ì•„ì´í…œ ìƒì„±ë¨\"\u003c/span\u003e}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eìƒˆë¡œìš´ DBê°€ í•„ìš”í•œ ëª¨ë“  ìƒˆë¡œìš´ ë¼ìš°íŠ¸ì—ì„œ ìš°ë¦¬ëŠ” DBë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì£¼ì…í•´ì•¼ í•©ë‹ˆë‹¤. ì•½ê°„ í¬ê²Œ í™•ì¥í•´ë³´ë©´ ëª¨ë“  ë¼ìš°íŠ¸ê°€ ê³µìœ ëœ ë¡œê±°, ê³µìœ ëœ ì„¤ì •, ê·¸ë¦¬ê³  DB ì—°ê²°ì„ ì£¼ì…í•´ì•¼ í•œë‹¤ê³  ìƒìƒí•´ë³´ë©´, ê°™ì€ ì½”ë“œë¥¼ ê³„ì† ë°˜ë³µí•´ì„œ ì‘ì„±í•´ì•¼ í•˜ëŠ” ìƒí™©ì´ ìƒê¸¸ ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch1\u003eFastAPIì—ì„œ í´ë˜ìŠ¤ ì˜ì¡´ì„± ì£¼ì…í•˜ê¸°\u003c/h1\u003e\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eFastAPI ë£¨íŠ¸ì—ì„œ ë‹¨ì¼ ë° ì—¬ëŸ¬ ì¢…ì†ì„±ì„ ì£¼ì…í•˜ê³  ëª¨ë“  í˜¸ì¶œë§ˆë‹¤ ê°ì²´ë¥¼ ì¬ì„¤ì •í•˜ëŠ” ë¬¸ì œë¥¼ íƒìƒ‰í•´ ë³´ëŠ” ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì‚´í´ë´…ì‹œë‹¤.\u003c/p\u003e\n\u003cp\u003eë‹¨ì¼ ì¢…ì†ì„± ì£¼ì… - ì´ ì˜ˆì‹œì—ì„œëŠ” API ë£¨íŠ¸ë¡œ ì£¼ì…ë  Logger ê°ì²´ë¥¼ ë§Œë“­ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e fastapi \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e FastAPI, Depends\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e time\n\napp = FastAPI()\n\n\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eLogger\u003c/span\u003e:\n    \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003e__init__\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eself\u003c/span\u003e):\n        \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"Logger Starting\"\u003c/span\u003e)\n        time.sleep(\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e)\n        \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003ef\"Logger Started at - \u003cspan class=\"hljs-subst\"\u003e{self}\u003c/span\u003e\"\u003c/span\u003e)\n        self.params = {}\n\n    \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eself, message\u003c/span\u003e):\n        \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003ef\"Logging - \u003cspan class=\"hljs-subst\"\u003e{message}\u003c/span\u003e\"\u003c/span\u003e)\n\n\u003cspan class=\"hljs-meta\"\u003e@app.get(\u003cspan class=\"hljs-params\"\u003e\u003cspan class=\"hljs-string\"\u003e\"/\"\u003c/span\u003e\u003c/span\u003e)\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003elogger: Logger = Depends(\u003cspan class=\"hljs-params\"\u003eLogger\u003c/span\u003e)\u003c/span\u003e):\n    logger.log(\u003cspan class=\"hljs-string\"\u003e\"Endpoint hit\"\u003c/span\u003e)\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"Logger works\"\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e __name__ == \u003cspan class=\"hljs-string\"\u003e\"__main__\"\u003c/span\u003e:\n    \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e uvicorn\n    uvicorn.run(app, host=\u003cspan class=\"hljs-string\"\u003e\"0.0.0.0\"\u003c/span\u003e, port=\u003cspan class=\"hljs-number\"\u003e8000\u003c/span\u003e)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì¶œë ¥:\u003c/p\u003e\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eë¡œê·¸ ì¶œë ¥ ì‹œì‘\në¡œê·¸ ì¶œë ¥ ì‹œì‘ ìœ„ì¹˜ - \u0026#x3C;main.Logger object at 0x102f3ddf0\u003e\në¡œê·¸ - ì—”ë“œí¬ì¸íŠ¸ ìš”ì²­\nì •ë³´: 127.0.0.1:64670 - \"GET / HTTP/1.1\" 200 OK\u003c/p\u003e\n\u003cp\u003eë¡œê·¸ ì¶œë ¥ ì‹œì‘\në¡œê·¸ ì¶œë ¥ ì‹œì‘ ìœ„ì¹˜ - \u0026#x3C;main.Logger object at 0x102f3dbe0\u003e\në¡œê·¸ - ì—”ë“œí¬ì¸íŠ¸ ìš”ì²­\nì •ë³´: 127.0.0.1:64670 - \"GET / HTTP/1.1\" 200 OK\u003c/p\u003e\n\u003cp\u003eë¡œê·¸ ì¶œë ¥ ì‹œì‘\në¡œê·¸ ì¶œë ¥ ì‹œì‘ ìœ„ì¹˜ - \u0026#x3C;main.Logger object at 0x102f3dbb0\u003e\në¡œê·¸ - ì—”ë“œí¬ì¸íŠ¸ ìš”ì²­\nì •ë³´: 127.0.0.1:64670 - \"GET / HTTP/1.1\" 200 OK\u003c/p\u003e\n\u003cp\u003eìœ„ì˜ ê²°ê³¼ë¥¼ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë£¨íŠ¸ ê²½ë¡œì— ì ‘ì†í•˜ë ¤ê³  í•  ë•Œ, ë¡œê±° ê°ì²´ê°€ ì´ˆê¸°í™”ë˜ê³  \"0x102f3ddf0\" ìœ„ì¹˜ë¡œ ì„¤ì •ë˜ì—ˆìŒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ ë‘ ë²ˆì§¸ë¡œ ë™ì¼í•œ ê²½ë¡œì— ì•¡ì„¸ìŠ¤í•˜ë©´ ë¡œê±° ê°ì²´ê°€ ë‹¤ì‹œ ì´ˆê¸°í™”ë©ë‹ˆë‹¤. ì´ ë•ŒëŠ” ë‹¤ë¥¸ ë©”ëª¨ë¦¬ ìœ„ì¹˜ì— ì„¤ì •ë©ë‹ˆë‹¤. ë£¨íŠ¸ ê²½ë¡œë¥¼ í˜¸ì¶œí•  ë•Œë§ˆë‹¤ ë¡œê±° ì´ˆê¸°í™”ì— 2ì´ˆì˜ ëŒ€ê¸° ì‹œê°„ì´ ì†Œìš”ë©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eê·¸ë ‡ë‹¤ë©´ ë¡œê±°ì— ì˜ì¡´í•˜ëŠ” ì„œë¹„ìŠ¤ê°€ í•„ìš”í•œ ê²½ìš° ì–´ë–»ê²Œ ë ê¹Œìš”?\u003c/p\u003e\n\u003cp\u003efrom fastapi import FastAPI, Depends\nimport time\nimport random\u003c/p\u003e\n\u003cp\u003eclass Logger:\ndef \u003cstrong\u003einit\u003c/strong\u003e(self):\nprint(\"ë¡œê·¸ ì¶œë ¥ ì‹œì‘\")\ntime.sleep(2)\nprint(f\"ë¡œê·¸ ì¶œë ¥ ì‹œì‘ ìœ„ì¹˜ - {self}\")\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003edef log(self, message):\n    print(f\"ë¡œê·¸ - {message}\")\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eclass Service:\ndef \u003cstrong\u003einit\u003c/strong\u003e(self, logger: Logger = Depends(Logger)):\nself.logger = logger\nprint(\"ì„œë¹„ìŠ¤ ì‹œì‘\")\ntime.sleep(1)\nprint(f\"ì„œë¹„ìŠ¤ ì‹œì‘ ìœ„ì¹˜ - {self}\")\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003edef ì‹¤í–‰(self):\n    self.logger.log(\"ì–´ë–¤ ì‘ì—…ì„ ìˆ˜í–‰ ì¤‘\")\n    return f\"ì‘ì—… ìˆ˜í–‰, {random.random()}\"\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eapp = FastAPI()\u003c/p\u003e\n\u003cp\u003e@app.get(\"/\")\ndef get(service: Service = Depends(Service)):\nreturn f\"{service.ì‹¤í–‰()}\"\u003c/p\u003e\n\u003cp\u003eif \u003cstrong\u003ename\u003c/strong\u003e == \"\u003cstrong\u003emain\u003c/strong\u003e\":\nimport uvicorn\nuvicorn.run(app, host=\"0.0.0.0\", port=8000)\u003c/p\u003e\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eë‹¹ì—°íˆìš”! FastAPI ë° IOC ì»¨í…Œì´ë„ˆì—ì„œì˜ ì§€ì› ë¶€ì¡±ì€ ì´ ì—”ë“œí¬ì¸íŠ¸ë¥¼ í˜¸ì¶œí•  ë•Œë§ˆë‹¤ ì´ë¯¸ ì´ˆê¸°í™”ëœ ê°ì²´ë“¤ì„ ì´ˆê¸°í™”í•˜ê¸° ìœ„í•´ 3ì´ˆì˜ ì§€ì—° ì‹œê°„ì„ ì§€ë¶ˆí•´ì•¼ í•œë‹¤ëŠ” ì£¼ëœ ì´ìœ ì…ë‹ˆë‹¤. ì´ íŒ¨í„´ì€ ì§„ì •í•œ ì•ˆí‹°-íŒ¨í„´ì´ë©°, FastAPIì˜ ì•½ì ì„ ë“œëŸ¬ë‚¼ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ê³  ìˆ˜ì‹­ ì‹œê°„ì„ ë‚­ë¹„í•œ í›„, FastAPI ìì²´ê°€ ê·¸ëŸ¬í•œ ê¸°ëŠ¥ì„ ì œê³µí•˜ì§€ ëª»í•˜ë©°, ìƒˆë¡­ê³  ë” í†µí•©ì ì¸ ì ‘ê·¼ì´ í•„ìš”í•˜ë‹¤ëŠ” ê²ƒì„ ì´í•´í–ˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì €ëŠ” PyNestë¥¼ ë§Œë“¤ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” ì˜ì¡´ì„± ì£¼ì…ê³¼ ëª¨ë“ˆì„±ì— ì¤‘ì ì„ ë‘” Python ë©”íƒ€-í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch1\u003ePyNest: ëª¨ë“ˆì‹ DI ì ‘ê·¼ ë°©ì‹\u003c/h1\u003e\n\u003cp\u003ePyNestì˜ DI ì‹œìŠ¤í…œì€ ë°˜ë³µì ì¸ ì½”ë“œë¥¼ ì¤„ì´ê³  ëŒ€ê·œëª¨ ì• í”Œë¦¬ì¼€ì´ì…˜ì— íŠ¹íˆ ìœ ìš©í•œ ê°œë°œ í”„ë¡œì„¸ìŠ¤ë¥¼ ê°„ì†Œí™”í•˜ëŠ” ë°ì— ë””ìì¸ë˜ì—ˆìŠµë‹ˆë‹¤. PyNestëŠ” ì˜ì¡´ì„±ì´ í•œ ë²ˆì— í•œ ë²ˆì”© ì£¼ì…ë˜ëŠ” êµ¬ì¡°í™”ëœ DI ì‹œìŠ¤í…œì„ ì œê³µí•˜ë©°, ëŒ€ì²´ë¡œ ì»¨íŠ¸ë¡¤ëŸ¬ í´ë˜ìŠ¤ ìˆ˜ì¤€ì—ì„œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. ì´ êµ¬ì¡°ëŠ” í•œ ë²ˆ ì˜ì¡´ì„±ì´ ì»¨íŠ¸ë¡¤ëŸ¬ì— ì£¼ì…ë˜ë©´ ë” ì´ìƒ ì£¼ì…ì´ í•„ìš”í•˜ì§€ ì•Šê³  ì½”ë“œê°€ ì¬ì‚¬ìš©ë˜ë©° DRY ì›ì¹™ì„ ì¤€ìˆ˜í•  ìˆ˜ ìˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì´ êµ¬ì¡°ë¥¼ í†µí•´ í•œ ë²ˆ ì˜ì¡´ì„±ì´ ì»¨íŠ¸ë¡¤ëŸ¬ì— ì£¼ì…ë˜ë©´ ë” ì´ìƒì˜ ì£¼ì…ì´ í•„ìš” ì—†ì´ í•´ë‹¹ ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ëª¨ë“  ê²½ë¡œ ë©”ì„œë“œì—ì„œ ì‚¬ìš©ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì½”ë“œë² ì´ìŠ¤ë¥¼ ê°„ì†Œí™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e/assets/img/2024-07-06-ThisisWhyFastAPIisNOTProduction-ReadyYet_1.png\u003c/p\u003e\n\u003ch1\u003eí•œ ë²ˆ ì£¼ì…í•˜ê³  ì—¬ëŸ¬ ë²ˆ ì‚¬ìš©í•˜ê¸°\u003c/h1\u003e\n\u003cp\u003ePyNestì˜ ëª¨ë“ˆí™”ëœ ì•„í‚¤í…ì²˜ë¥¼ ì‚¬ìš©í•˜ë©´ ì»¨íŠ¸ë¡¤ëŸ¬ í´ë˜ìŠ¤ì˜ ìƒì„±ìì— ì¢…ì†ì„±ì„ ì£¼ì…í•  ìˆ˜ ìˆì–´ì„œ ë§¤ë²ˆ ëª¨ë“  ë¼ìš°íŠ¸ì— ì¢…ì†ì„±ì„ ë°˜ë³µí•´ì„œ ì£¼ì…í•  í•„ìš” ì—†ì´ ëª¨ë“  ë¼ìš°íŠ¸ì—ì„œ ì´ ì¢…ì†ì„±ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì˜ˆì‹œ â€”\u003c/p\u003e\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e nest.core \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e Injectable, Controller, Get, Post\n\n\u003cspan class=\"hljs-meta\"\u003e@Injectable\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eLogger\u003c/span\u003e:\n    \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003e__init__\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eself\u003c/span\u003e):\n        \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"Logger Starting\"\u003c/span\u003e)\n        time.sleep(\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e)\n        \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003ef\"Logger Started at - \u003cspan class=\"hljs-subst\"\u003e{self}\u003c/span\u003e\"\u003c/span\u003e)\n\n    \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eself, message\u003c/span\u003e):\n        \u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003ef\"Logging - \u003cspan class=\"hljs-subst\"\u003e{message}\u003c/span\u003e\"\u003c/span\u003e)\n\n\n\u003cspan class=\"hljs-meta\"\u003e@Controller(\u003cspan class=\"hljs-params\"\u003e\u003cspan class=\"hljs-string\"\u003e\"items\"\u003c/span\u003e\u003c/span\u003e)\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eItemsController\u003c/span\u003e:\n\n  \u003cspan class=\"hljs-comment\"\u003e# Inject Once\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003e__init__\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eself, logger: Logger\u003c/span\u003e):\n      self.logger = logger\n\n\n  \u003cspan class=\"hljs-comment\"\u003e# Use Many\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e  @Get(\u003cspan class=\"hljs-params\"\u003e\u003cspan class=\"hljs-string\"\u003e\"/\"\u003c/span\u003e\u003c/span\u003e)\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eread_items\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eself\u003c/span\u003e):\n      self.logger.log(\u003cspan class=\"hljs-string\"\u003e\"list of items\"\u003c/span\u003e)\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\u003cspan class=\"hljs-string\"\u003e\"message\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"Items\"\u003c/span\u003e}\n\n\u003cspan class=\"hljs-meta\"\u003e  @Post(\u003cspan class=\"hljs-params\"\u003e\u003cspan class=\"hljs-string\"\u003e\"/{item}\"\u003c/span\u003e\u003c/span\u003e)\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ecreate_item\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eself, item: \u003cspan class=\"hljs-built_in\"\u003estr\u003c/span\u003e\u003c/span\u003e):\n      self.logger.log(\u003cspan class=\"hljs-string\"\u003e\"creating item\"\u003c/span\u003e)\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\u003cspan class=\"hljs-string\"\u003e\"message\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003ef\"Item created - \u003cspan class=\"hljs-subst\"\u003e{item}\u003c/span\u003e\"\u003c/span\u003e}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì´ ëª¨ë“ˆí™”ëœ ì ‘ê·¼ ë°©ì‹ì„ í†µí•´ ì»¨íŠ¸ë¡¤ëŸ¬ ìƒì„±ìì— í•„ìš”í•œ ë§Œí¼ì˜ ì˜ì¡´ì„±ì„ ì£¼ì…í•˜ê³  ì´ëŸ¬í•œ ì˜ì¡´ì„±ì„ í´ë˜ìŠ¤ ë©”ì„œë“œì—ì„œ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ê²°ê³¼ë¡œ ì½”ë“œê°€ í›¨ì”¬ ë” ê¹”ë”í•´ì§€ë©° ì½”ë“œë¥¼ ë‹¤ì‹œ ì‘ì„±í•˜ê±°ë‚˜ ë³µì¡í•˜ê²Œ ë§Œë“¤ í•„ìš”ê°€ ì—†ì–´ì§‘ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch1\u003eì‹±ê¸€í„´ íŒ¨í„´ì˜ í˜ì„ ë°›ì•„ë“¤ì´ì„¸ìš”\u003c/h1\u003e\n\u003cp\u003eì´ì „ì— ë…¼ì˜í•œ ë°”ì™€ ê°™ì´, FastAPIì˜ DI ë§¤ì»¤ë‹ˆì¦˜ì˜ ê°€ì¥ í° ë‹¨ì ì€ ì¢…ì†ì„±ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ì‹±ê¸€í„´ íŒ¨í„´ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²ƒì…ë‹ˆë‹¤. ìš°ë¦¬ëŠ” ì¢…ì†ì„±ì´ ëª¨ë“  ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ë§ˆë‹¤ ì´ˆê¸°í™”ë˜ì–´ì•¼ í•œë‹¤ëŠ” ê²ƒì„ ê´€ì°°í–ˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003ePyNestì—ì„œëŠ” í˜„ì—­ì—ì„œ \"injector\" ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©í•©ë‹ˆë‹¤. ì´ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” í˜„ëŒ€ì ì¸ Python ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì¢…ì†ì„±ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•œ íŒ¨í‚¤ì§€ì…ë‹ˆë‹¤. injectorì€ ì‹±ê¸€í†¤ íŒ¨í„´ê³¼ ë©€í‹° ë°”ì¸ë”©ì„ ì§€ì›í•©ë‹ˆë‹¤. í´ë˜ìŠ¤ê°€ Injectableë¡œ í‘œì‹œë˜ì–´ ì¢…ì†ì„±ìœ¼ë¡œ ë“±ë¡ë˜ë©´, injectorëŠ” í•´ë‹¹ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ê·¸ ì°¸ì¡°ë¥¼ ì €ì¥í•©ë‹ˆë‹¤. ì´ injectable ê°ì²´ì— ëŒ€í•œ ëª¨ë“  í˜¸ì¶œì€ injectorë¥¼ í†µí•´ ì´ë£¨ì–´ì§€ë©°, injectable ê°ì²´ì˜ ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch2\u003eì½”ë“œë¡œ ì‚´í´ë³´ê¸°\u003c/h2\u003e\n\u003cp\u003eë¨¼ì €, PyNestì—ì„œ ëª¨ë“  ê´€ë ¨ importë¬¸ì„ ì •ë¦¬í•´ ë´…ì‹œë‹¤\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e logging\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e os\n\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e nest.core \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e (\n    Controller,\n    Delete,\n    Get,\n    Injectable,\n    Module,\n    Post,\n    Put,\n    PyNestFactory,\n)\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e time\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eë‹¤ìŒìœ¼ë¡œ ì£¼ì…í•˜ë ¤ëŠ” ë‘ ê°œì˜ ì œê³µìì™€ ë¡œì§ ë ˆì´ì–´ë¥¼ í¬í•¨í•˜ëŠ” ì£¼ìš” ì„œë¹„ìŠ¤ë¥¼ ì„ ì–¸í•  ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# êµ¬ì„± ì œê³µì\n@\u003cspan class=\"hljs-title class_\"\u003eInjectable\u003c/span\u003e()\n\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eConfigService\u003c/span\u003e:\n    def \u003cspan class=\"hljs-title function_\"\u003e__init__\u003c/span\u003e(self):\n        time.\u003cspan class=\"hljs-title function_\"\u003esleep\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e)\n        \u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(f\u003cspan class=\"hljs-string\"\u003e\"ConfigService ì‹œì‘ - {self}\"\u003c/span\u003e)\n        self.\u003cspan class=\"hljs-property\"\u003econfig\u003c/span\u003e = os.\u003cspan class=\"hljs-property\"\u003eenviron\u003c/span\u003e\n\n    def \u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e(self, \u003cspan class=\"hljs-attr\"\u003ekey\u003c/span\u003e: str):\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e self.\u003cspan class=\"hljs-property\"\u003econfig\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e(key)\n\n# ë¡œê±° ì œê³µì\n@\u003cspan class=\"hljs-title class_\"\u003eInjectable\u003c/span\u003e()\n\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eLogger\u003c/span\u003e:\n    def \u003cspan class=\"hljs-title function_\"\u003e__init__\u003c/span\u003e(self, \u003cspan class=\"hljs-attr\"\u003econfig_service\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eConfigService\u003c/span\u003e):\n        time.\u003cspan class=\"hljs-title function_\"\u003esleep\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e)\n        \u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(f\u003cspan class=\"hljs-string\"\u003e\"ë¡œê±° ì‹œì‘ - {self}\"\u003c/span\u003e)\n        self.\u003cspan class=\"hljs-property\"\u003econfig_service\u003c/span\u003e = config_service\n        self.\u003cspan class=\"hljs-property\"\u003elog\u003c/span\u003e = logging.\u003cspan class=\"hljs-title function_\"\u003egetLogger\u003c/span\u003e(__name__)\n\n# ì£¼ìš” ì„œë¹„ìŠ¤\n@\u003cspan class=\"hljs-title class_\"\u003eInjectable\u003c/span\u003e()\n\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eItemService\u003c/span\u003e:\n    def \u003cspan class=\"hljs-title function_\"\u003e__init__\u003c/span\u003e(self, \u003cspan class=\"hljs-attr\"\u003elogger\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eLogger\u003c/span\u003e):\n        time.\u003cspan class=\"hljs-title function_\"\u003esleep\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e)\n        \u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(f\u003cspan class=\"hljs-string\"\u003e\"ItemService ì‹œì‘ - {self}\"\u003c/span\u003e)\n        self.\u003cspan class=\"hljs-property\"\u003elogger\u003c/span\u003e = logger\n        self.\u003cspan class=\"hljs-property\"\u003eitems\u003c/span\u003e = [{\u003cspan class=\"hljs-string\"\u003e\"item_name\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"Foo\"\u003c/span\u003e}, {\u003cspan class=\"hljs-string\"\u003e\"item_name\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"Bar\"\u003c/span\u003e}, {\u003cspan class=\"hljs-string\"\u003e\"item_name\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"Baz\"\u003c/span\u003e}]\n\n    def \u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e(self):\n        self.\u003cspan class=\"hljs-property\"\u003elogger\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003elog\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003einfo\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"ì—”ë“œí¬ì¸íŠ¸ í˜¸ì¶œë¨\"\u003c/span\u003e)\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e self.\u003cspan class=\"hljs-property\"\u003eitems\u003c/span\u003e\n\n    def \u003cspan class=\"hljs-title function_\"\u003epost\u003c/span\u003e(self, \u003cspan class=\"hljs-attr\"\u003eitem\u003c/span\u003e: dict):\n        self.\u003cspan class=\"hljs-property\"\u003eitems\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eappend\u003c/span\u003e(item)\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e self.\u003cspan class=\"hljs-property\"\u003eitems\u003c/span\u003e\n\n    def \u003cspan class=\"hljs-title function_\"\u003eput\u003c/span\u003e(self, \u003cspan class=\"hljs-attr\"\u003eitem\u003c/span\u003e: dict):\n        self.\u003cspan class=\"hljs-property\"\u003eitems\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eappend\u003c/span\u003e(item)\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e self.\u003cspan class=\"hljs-property\"\u003eitems\u003c/span\u003e\n\n    def \u003cspan class=\"hljs-title function_\"\u003edelete\u003c/span\u003e(self, \u003cspan class=\"hljs-attr\"\u003eitem\u003c/span\u003e: dict):\n        self.\u003cspan class=\"hljs-property\"\u003eitems\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eremove\u003c/span\u003e(item)\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e self.\u003cspan class=\"hljs-property\"\u003eitems\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì´ì œ Controllerë¥¼ ìƒì„±í•˜ê³  ì„œë¹„ìŠ¤ì— ì£¼ì…í•©ë‹ˆë‹¤ â€”\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e@\u003cspan class=\"hljs-title class_\"\u003eController\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"items\"\u003c/span\u003e)\n\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eItemController\u003c/span\u003e:\n    def \u003cspan class=\"hljs-title function_\"\u003e__init__\u003c/span\u003e(self, \u003cspan class=\"hljs-attr\"\u003eitem_service\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eItemService\u003c/span\u003e):\n        \u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"ItemController ì‹œì‘ - {self}\"\u003c/span\u003e)\n        self.\u003cspan class=\"hljs-property\"\u003eitem_service\u003c/span\u003e = item_service\n\n    @\u003cspan class=\"hljs-title class_\"\u003eGet\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"/\"\u003c/span\u003e)\n    def \u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e(self):\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e self.\u003cspan class=\"hljs-property\"\u003eitem_service\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e()\n\n    @\u003cspan class=\"hljs-title class_\"\u003ePost\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"/\"\u003c/span\u003e)\n    def \u003cspan class=\"hljs-title function_\"\u003epost\u003c/span\u003e(self, \u003cspan class=\"hljs-attr\"\u003eitem\u003c/span\u003e: dict):\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e self.\u003cspan class=\"hljs-property\"\u003eitem_service\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003epost\u003c/span\u003e(item)\n\n    @\u003cspan class=\"hljs-title class_\"\u003ePut\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"/\"\u003c/span\u003e)\n    def \u003cspan class=\"hljs-title function_\"\u003eput\u003c/span\u003e(self, \u003cspan class=\"hljs-attr\"\u003eitem\u003c/span\u003e: dict):\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e self.\u003cspan class=\"hljs-property\"\u003eitem_service\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eput\u003c/span\u003e(item)\n\n    @\u003cspan class=\"hljs-title class_\"\u003eDelete\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"/\"\u003c/span\u003e)\n    def \u003cspan class=\"hljs-title function_\"\u003edelete\u003c/span\u003e(self, \u003cspan class=\"hljs-attr\"\u003eitem\u003c/span\u003e: dict):\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e self.\u003cspan class=\"hljs-property\"\u003eitem_service\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003edelete\u003c/span\u003e(item)\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eëŒ€ë‹¨í•´ìš”, ê±°ì˜ ë‹¤ ì™”ì–´ìš”. ì´ì œ ì•± ëª¨ë“ˆì„ ì •ì˜í•˜ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•´ ë´…ì‹œë‹¤ -\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e@\u003cspan class=\"hljs-title class_\"\u003eModule\u003c/span\u003e(\n    controllers=[\u003cspan class=\"hljs-title class_\"\u003eItemController\u003c/span\u003e],\n    providers=[\u003cspan class=\"hljs-title class_\"\u003eLogger\u003c/span\u003e],\n)\n\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eAppModule\u003c/span\u003e:\n    pass\n\n\napp = \u003cspan class=\"hljs-title class_\"\u003ePyNestFactory\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ecreate\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eAppModule\u003c/span\u003e)\n\n\u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e __name__ == \u003cspan class=\"hljs-string\"\u003e\"__main__\"\u003c/span\u003e:\n    \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e uvicorn\n\n    uvicorn.\u003cspan class=\"hljs-title function_\"\u003erun\u003c/span\u003e(app.\u003cspan class=\"hljs-property\"\u003ehttp_server\u003c/span\u003e, host=\u003cspan class=\"hljs-string\"\u003e\"0.0.0.0\"\u003c/span\u003e, port=\u003cspan class=\"hljs-number\"\u003e8623\u003c/span\u003e)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eê²°ê³¼ â€”\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title class_\"\u003eConfigService\u003c/span\u003e starting - \u0026#x3C;__main__.ConfigService object at 0x10444d580\u003e\nLogger Starting - \u0026#x3C;__main__.Logger object at 0x10444daf0\u003e\nItemService starting - \u0026#x3C;__main__.ItemService object at 0x10444d190\u003e\n\nINFO:     Started server process [64770]\nINFO:     Waiting for application startup.\nINFO:     Application startup complete.\nINFO:     Uvicorn running on http://0.0.0.0:8623 (Press CTRL+C to quit)\n\n\nINFO:     127.0.0.1:63810 - \"GET /items/ HTTP/1.1\" 200 OK\nINFO:     127.0.0.1:63824 - \"PUT /items/ HTTP/1.1\" 200 OK\nINFO:     127.0.0.1:63840 - \"POST /items/ HTTP/1.1\" 200 OK\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eì™€ìš°! ì •ë§ ë©‹ì§€ë„¤ìš”. ìš°ë¦¬ëŠ” Injectables ê°ì²´ë¥¼ í•œ ë²ˆë§Œ ì´ˆê¸°í™”í•˜ê³ , ê·¸ ì´í›„ë¡œëŠ” ì»¨í…Œì´ë„ˆê°€ í•´ë‹¹ ê°ì²´ë“¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê´€ë¦¬í•œë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆì–´ìš”.\u003c/p\u003e\n\u003cp\u003e/assets/img/2024-07-06-ThisisWhyFastAPIisNOTProduction-ReadyYet_2.png\u003c/p\u003e\n\u003ch1\u003ePyNest DI ë§¤ë‹ˆí˜ìŠ¤íŠ¸\u003c/h1\u003e\n\u003ch2\u003eì£¼ì… ê°€ëŠ¥í•œ ê°ì²´\u003c/h2\u003e\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003eInjectable-to-Injectable Injection: Injectable ê°ì²´ëŠ” ë‹¤ë¥¸ Injectable ê°ì²´ë¥¼ ì£¼ì…í•  ìˆ˜ ìˆì–´ì„œ ì¼ê´€ì„± ìˆê³  í†µí•©ëœ ì¢…ì†ì„± ê³„ì¸µì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eControllers\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eController Injection: ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” Injectable ê°ì²´ë¥¼ ì£¼ì…í•  ìˆ˜ ìˆì–´ì„œ í•„ìš”ì— ë”°ë¼ ì„œë¹„ìŠ¤ì™€ ë¦¬í¬ì§€í† ë¦¬ì— ì±…ì„ì„ ìœ„ì„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eDependency Graph\u003c/h2\u003e\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003eë¹„ìˆœí™˜ ì˜ì¡´ì„± ê·¸ë˜í”„: ì˜ì¡´ì„±ì€ ìœ í–¥ ë¹„ìˆœí™˜ ê·¸ë˜í”„ (DAG)ë¥¼ í˜•ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ìˆœí™˜ ì˜ì¡´ì„±ì´ ì—†ì–´ì•¼ í•˜ë©°, ì´ë¥¼ í†µí•´ ì²˜ë¦¬ ê°€ëŠ¥í•œ ì˜ì¡´ì„± í•´ê²° ë° ëŸ°íƒ€ì„ ì˜¤ë¥˜ë‚˜ ë¬´í•œ ë£¨í”„ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eì˜ì¡´ì„± í•´ê²°ê³¼ ê´€ë¦¬\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™” ê³¼ì •ì—ì„œ IoC ì»¨í…Œì´ë„ˆëŠ” ëª¨ë“  ì˜ì¡´ì„±ì„ í•´ê²°í•˜ê³ , ì•„ì§ ë“±ë¡ë˜ì§€ ì•Šì€ ê°œì²´ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ë©°, ì´ëŸ¬í•œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê´€ë¦¬í•˜ì—¬ ì£¼ì…í•˜ëŠ” ìœ„ì¹˜ì—ì„œ ì œê³µë  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eì œê³µì(Providers) ë‚´ë³´ë‚´ê¸°\u003c/h2\u003e\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003eëª¨ë“ˆì€ ì œê³µìë¥¼ ë‚´ë³´ë‚¼ ìˆ˜ ìˆìœ¼ë©°, ì´ëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ ë‚´ì˜ ë‹¤ë¥¸ ëª¨ë“ˆì—ì„œ ì‚¬ìš©ë˜ê±°ë‚˜ ì£¼ì…ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eëª¨ë“ˆ ê°„ ì œê³µì ì£¼ì…\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eë‹¤ë¥¸ ëª¨ë“ˆì—ì„œ ì œê³µìë¥¼ ì£¼ì…í•˜ë ¤ë©´ í•´ë‹¹ ì›í•˜ëŠ” ì œê³µìë¥¼ í¬í•¨í•˜ëŠ” ëª¨ë“ˆì„ ëª…ì‹œì ìœ¼ë¡œ ê°€ì ¸ì™€ì•¼ í•©ë‹ˆë‹¤.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eì¸ìŠ¤í„´ìŠ¤ ì°¸ì¡° ë° ì¬ì‚¬ìš©\u003c/h2\u003e\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003eì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‚½ì…ëœ ê³µê¸‰ìë¥¼ í˜¸ì¶œí•˜ë©´ ì´ë¯¸ ì´ˆê¸°í™”ëœ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¸ì¡°í•˜ì—¬ ì¬ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•¨ìœ¼ë¡œì¨ í•„ìš” ì—†ëŠ” ê³µê¸‰ì ì¸ìŠ¤í„´ìŠ¤ì˜ ìƒì„±ì„ ë°©ì§€í•˜ê³  í•„ìš”í•  ë•Œ ì‹±ê¸€í†¤ê³¼ ê°™ì€ íŒ¨í„´ì„ ì¤€ìˆ˜í•©ë‹ˆë‹¤.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003eê²°ë¡ : DIì— ìˆì–´ PyNestê°€ ì„ í˜¸ë˜ëŠ” ì´ìœ \u003c/h1\u003e\n\u003cp\u003ePyNestì˜ DI ì ‘ê·¼ ë°©ì‹ì€ ì½”ë“œ ì¡°ì§í™”ì™€ ìœ ì§€ ë³´ìˆ˜ ì¸¡ë©´ì—ì„œ ëª…í™•í•œ ì¥ì ì„ ì œê³µí•˜ë©°, íŠ¹íˆ ëª¨ë“ˆí™” ë° ë°˜ë³µì„ í”¼í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•œ ëŒ€ê·œëª¨ í”„ë¡œì íŠ¸ì— ì í•©í•©ë‹ˆë‹¤. ì‘ìš© í”„ë¡œê·¸ë¨ êµ¬ì¡° ë‚´ì—ì„œ ë” ë†’ì€ ìˆ˜ì¤€ì—ì„œ ì˜ì¡´ì„±ì„ ì£¼ì…í•  ìˆ˜ ìˆë„ë¡ í•¨ìœ¼ë¡œì¨, PyNestëŠ” ë³´ë‹¤ DRY(ë°˜ë³µí•˜ì§€ ë§ˆë¼) ì½”ë“œë² ì´ìŠ¤ë¥¼ ìš©ì´í•˜ê²Œ ë§Œë“¤ì–´ ì¤Œìœ¼ë¡œì¨ ì˜¤ë¥˜ ê°€ëŠ¥ì„±ì„ ì¤„ì´ê³  ë¦¬íŒ©í„°ë§ ë° í…ŒìŠ¤íŠ¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ê°„ì†Œí™”í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eë°˜ë©´ì— FastAPIì˜ DI ì‹œìŠ¤í…œì€ ê°ìì˜ ê°•ì ì„ ê°–ê³  ìˆì§€ë§Œ, í•¨ìˆ˜ ìˆ˜ì¤€ì—ì„œì˜ ì£¼ì… ìš”êµ¬ëŠ” ë¶ˆí•„ìš”í•˜ê³  ì¤‘ë³µì ì¸ ìš”ì†Œë¥¼ ë„ì…í•  ìˆ˜ ìˆìœ¼ë©°, ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë³µì¡ì„±ì„ ë”í•´ê°ì— ë”°ë¼ ìœ ì§€ ë³´ìˆ˜ ë° í™•ì¥ì„±ì—ì„œ ì˜¤íˆë ¤ ì—­íš¨ê³¼ë¥¼ ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch1\u003eìì›\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003eë¹„ë™ê¸° ë§ˆë²•: PyNestì™€ SQLAlchemy 2.0ì´ íŒŒì´ì¬ ì•± ì„±ëŠ¥ì„ 25% í–¥ìƒì‹œí‚µë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003eFastAPI ì´ìƒ: PyNestë¥¼ ì´ìš©í•œ 2024ë…„ íŒŒì´ì¬ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì˜ ì§„í™”\u003c/li\u003e\n\u003cli\u003eì˜ì¡´ì„± ì£¼ì… 101 - PyNestë¥¼ ì´ìš©í•œ íŒŒì´ì¬ ì›¹ ì•±ì˜ ì˜ì¡´ì„± ì£¼ì… ë‹¨ìˆœí™”\u003c/li\u003e\n\u003cli\u003ePyNest PyPI: \u003ca href=\"https://pypi.org/project/pynest-api\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://pypi.org/project/pynest-api\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eê³µì‹ ë¬¸ì„œ: \u003ca href=\"https://pythonnest.github.io/PyNest/\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://pythonnest.github.io/PyNest/\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eGitHub ì €ì¥ì†Œ: \u003ca href=\"https://github.com/PythonNest/PyNest\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://github.com/PythonNest/PyNest\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003eê°„ë‹¨í•˜ê²Œ ì„¤ëª…í•˜ê¸° ğŸš€\u003c/h1\u003e\n\u003cp\u003eIn Plain English ì»¤ë®¤ë‹ˆí‹°ì˜ ì¼ì›ì´ ë˜ì–´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ê³„ì†í•˜ì‹œê¸° ì „ì—:\u003c/p\u003e\n\u003c!-- TIL ìˆ˜í‰ --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003eê¸€ì“´ì´ë¥¼ í´ë©í•˜ê³  íŒ”ë¡œìš°í•´ì£¼ì„¸ìš”! ğŸ‘ï¸ï¸\u003c/li\u003e\n\u003cli\u003eíŒ”ë¡œìš°í•˜ê¸°: X | LinkedIn | YouTube | Discord | ë‰´ìŠ¤ë ˆí„°\u003c/li\u003e\n\u003cli\u003eë‹¤ë¥¸ í”Œë«í¼ ë°©ë¬¸í•˜ê¸°: CoFeed | Differ\u003c/li\u003e\n\u003cli\u003eë” ë§ì€ ì½˜í…ì¸ : PlainEnglish.io\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-07-06-ThisisWhyFastAPIisNOTProduction-ReadyYet"},"buildId":"X4OrKfmLtU3-3BijwfHe6","assetPrefix":"/TIL","isFallback":false,"gsp":true,"scriptLoader":[{"async":true,"src":"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4877378276818686","strategy":"lazyOnload","crossOrigin":"anonymous"}]}</script></body></html>