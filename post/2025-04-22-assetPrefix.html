<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>Next.js 15에서 assetPrefix 설정하여 CDN 연동하는 방법 | TIL</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://13akstjq.github.io/TIL//post/2025-04-22-assetPrefix" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="Next.js 15에서 assetPrefix 설정하여 CDN 연동하는 방법 | TIL" data-gatsby-head="true"/><meta property="og:title" content="Next.js 15에서 assetPrefix 설정하여 CDN 연동하는 방법 | TIL" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/TIL/assets/img/nextjs.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://TIL.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://13akstjq.github.io/TIL//post/2025-04-22-assetPrefix" data-gatsby-head="true"/><meta name="twitter:title" content="Next.js 15에서 assetPrefix 설정하여 CDN 연동하는 방법 | TIL" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/TIL/assets/img/nextjs.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | TIL" data-gatsby-head="true"/><meta name="article:published_time" content="2025-04-22 13:01" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/TIL/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/TIL/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/TIL/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/TIL/favicons/favicon-96x96.png"/><link rel="icon" href="/TIL/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/TIL/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/TIL/favicons/browserconfig.xml"/><link rel="preload" href="/TIL/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/TIL/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/TIL/_next/static/css/0eef537492fed77a.css" as="style"/><link rel="stylesheet" href="/TIL/_next/static/css/0eef537492fed77a.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/TIL/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/TIL/_next/static/chunks/webpack-21ffe88bdca56cba.js" defer=""></script><script src="/TIL/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/TIL/_next/static/chunks/main-a5eeabb286676ce6.js" defer=""></script><script src="/TIL/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/TIL/_next/static/chunks/75fc9c18-4a646156c659a948.js" defer=""></script><script src="/TIL/_next/static/chunks/348-02483b66b493dd81.js" defer=""></script><script src="/TIL/_next/static/chunks/pages/post/%5Bslug%5D-8ded8b979ba73586.js" defer=""></script><script src="/TIL/_next/static/KUC9M_yIlA1Ugo01xmkHL/_buildManifest.js" defer=""></script><script src="/TIL/_next/static/KUC9M_yIlA1Ugo01xmkHL/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/TIL">TIL</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/TIL/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">Next.js 15에서 assetPrefix 설정하여 CDN 연동하는 방법</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="Next.js 15에서 assetPrefix 설정하여 CDN 연동하는 방법" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/TIL/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">TIL</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Apr 22, 2025</span><span class="posts_reading_time__f7YPP">6<!-- --> min read</span></span></div></div></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<h1>assetPrefix</h1>
<blockquote>
<p>주의: Vercel에 배포하면 Next.js 프로젝트에 전역 CDN이 자동으로 설정되기 때문에, Asset Prefix를 따로 수동으로 설정하지 않아도 됩니다.</p>
</blockquote>
<blockquote>
<p>참고로: Next.js 9.5 버전부터는 Base Path를 커스터마이징하는 기능이 추가됐어요. 이 기능을 이용하면 <code>/docs</code> 같은 서브 경로에 앱을 호스팅하기 적합해서, 이런 경우에는 Asset Prefix 대신 Base Path를 사용하는 걸 추천합니다.</p>
</blockquote>
<h2>CDN 설정하기</h2>
<p>자, 이제 직접 CDN 설정을 해보고 싶을 때 어떻게 하는지 살펴볼게요.</p>
<hr>
<h3>assetPrefix란?</h3>
<p><code>assetPrefix</code>는 Next.js에서 빌드된 정적 자산들(js, css, 이미지 등)이 로드되는 기본 URL 경로를 지정할 때 사용해요. 예를 들어, CDN 도메인을 지정해두면 사용자들은 CDN에서 자산들을 빠르게 받아볼 수 있죠.</p>
<p>예전에는 배포 환경마다 직접 CDN 주소를 설정해야 했는데, 요즘은 Vercel을 사용하면 자동으로 글로벌 CDN이 세팅되니 크게 신경 쓰지 않아도 됩니다!</p>
<hr>
<h3>직접 CDN을 연결해야 하는 경우</h3>
<p>만약 Vercel이 아닌 AWS S3, CloudFront, Netlify, 또는 다른 호스팅 환경을 사용한다면, 아래처럼 <code>next.config.js</code>에 <code>assetPrefix</code>를 설정하게 됩니다.</p>
<pre><code class="hljs language-js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">assetPrefix</span>: <span class="hljs-string">'https://cdn.mydomain.com'</span>,
};
</code></pre>
<p>이 설정을 하면, 정적 자산들의 경로가 <code>https://cdn.mydomain.com/_next/static/...</code>으로 변경되어 CDN에서 서빙됩니다.</p>
<hr>
<h3>주의할 점</h3>
<p>다만, 이렇게 <code>assetPrefix</code>를 설정하면 정적 파일뿐 아니라 내부 스크립트와 스타일도 모두 여기서 불러오기 때문에 CDN 도메인의 SSL이나 CORS 설정이 올바르게 되어 있어야 해요. 그렇지 않으면 자원이 제대로 로드 안 되는 문제가 발생할 수 있습니다.</p>
<hr>
<h3>Base Path 활용하기</h3>
<p>또 한 가지 중요한 기능! Next.js 9.5버전부터는 <code>basePath</code> 옵션도 사용할 수 있어요. <code>basePath</code>는 애플리케이션 URL의 기본 경로를 설정하는 건데, 보통 <code>/docs</code>나 <code>/blog</code> 같이 서브 디렉토리에 앱을 배포할 때 쓰입니다.</p>
<pre><code class="hljs language-js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">basePath</span>: <span class="hljs-string">'/docs'</span>,
};
</code></pre>
<p>이렇게 설정하면 페이지들이 모두 <code>/docs</code> 경로 하위에서 서비스되고, 라우팅 관리가 훨씬 수월해져요.</p>
<p>그리고 중요한 점! 이런 경우에는 굳이 <code>assetPrefix</code>를 쓰지 않고, <code>basePath</code> 만으로 충분하니 참고하세요.</p>
<hr>
<h2>정리하자면!</h2>





















<table><thead><tr><th>상황</th><th>권장 설정</th></tr></thead><tbody><tr><td>Vercel 배포</td><td>자동 CDN 설정, assetPrefix 불필요</td></tr><tr><td>서브 경로(예: <code>/docs</code>)로 앱 배포</td><td>basePath 활용</td></tr><tr><td>직접 CDN 도메인 연결 필요 (Vercel 외)</td><td>assetPrefix에 CDN 주소 설정</td></tr></tbody></table>
<hr>
<p>내가 개인적으로 추천하는 팁은 Vercel이나 요즘 메이저 플랫폼들은 대부분 CDN을 자동으로 설정해주니 복잡하게 assetPrefix 건드리지 않고, 필요하면 basePath만 적절히 활용하는 게 가장 깔끔하다는 거예요.</p>
<p>혹시 여러분도 서브 디렉토리로 앱을 배포하거나 직접 CDN 연결해야 하는 상황이 생기면, 위 내용을 참고해서 차근차근 설정해 보세요! 문제 생기면 댓글로 물어봐도 좋고요 :)</p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>CDN(Content Delivery Network)을 설정하는 방법에 대해 이야기해볼게요. 좋은 성능을 위해 정적 자산(이미지, JS, CSS 등)을 CDN으로 배포하면 사용자에게 훨씬 빠르게 콘텐츠를 전달할 수 있어요.</p>
<p>Next.js에서는 assetPrefix라는 설정을 이용해서 CDN 주소를 쉽게 지정할 수 있어요. 예를 들어, 여러분의 CDN 도메인이 <code>https://cdn.mydomain.com</code>이라면, 다음과 같이 <code>next.config.mjs</code> 파일에 설정할 수 있습니다.</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// @ts-check</span>
<span class="hljs-keyword">import</span> { <span class="hljs-variable constant_">PHASE_DEVELOPMENT_SERVER</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'next/constants'</span>
 
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> (phase) => {
  <span class="hljs-keyword">const</span> isDev = phase === <span class="hljs-variable constant_">PHASE_DEVELOPMENT_SERVER</span>
  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@type</span> {<span class="hljs-type">import('next').NextConfig</span>}
   */</span>
  <span class="hljs-keyword">const</span> nextConfig = {
    <span class="hljs-comment">// 개발 환경에서는 assetPrefix를 사용하지 않고, 배포 환경에서만 CDN 도메인을 붙임</span>
    <span class="hljs-attr">assetPrefix</span>: isDev ? <span class="hljs-literal">undefined</span> : <span class="hljs-string">'https://cdn.mydomain.com'</span>,
  }
  <span class="hljs-keyword">return</span> nextConfig
}
</code></pre>
<p>이렇게 설정하면 Next.js는 자동으로 자바스크립트나 CSS 같은 정적 파일을 <code>/next/static/</code> 폴더에서 불러올 때 CDN 주소를 붙여 요청해줍니다.</p>
<p>예를 들어, 원래라면 <code>/next/static/chunks/main.js</code>로 요청할 파일이</p>
<p><a href="https://cdn.mydomain.com/_next/static/chunks/main.js" rel="nofollow" target="_blank">https://cdn.mydomain.com/_next/static/chunks/main.js</a></p>
<p>이런 식으로 바뀌어서 CDN 서버에서 빠르게 제공되겠죠.</p>
<hr>
<h3>추가로 알아두면 좋은 점들</h3>
<ul>
<li><strong>환경별 분리</strong>: 개발 단계에선 로컬에서 바로 파일을 불러오는 게 편하니까 assetPrefix를 사용하지 않고, 실제 배포 때만 CDN 주소를 사용하도록 phase를 분리하는 게 일반적이에요.</li>
<li><strong>CDN 설정</strong>: Next.js 쪽에서 assetPrefix만 설정한다고 CDN이 완성되는 건 아니에요. CDN 제공 업체(Cloudflare, AWS CloudFront 등)에서 원본(origin)을 Next.js가 호스트 중인 도메인(예: 내 서버 도메인)으로 설정해야 합니다. 즉, CDN 주소로 들어온 요청을 실제 Next.js 서버로 전달해주는 역할이 필요해요.</li>
<li><strong>_next 폴더 주의</strong>: Next.js가 내부적으로 사용하는 <code>_next</code> 경로는 정적 파일 및 페이지 정보를 담고 있어서, assetPrefix 설정 시 해당 경로가 포함되니 CDN에서도 해당 경로들을 캐싱하도록 설정하는 게 좋아요.</li>
</ul>
<hr>
<p>CDN을 붙여놓으면 사용자의 로드 속도가 확실히 개선되니까 배포할 땐 꼭 한번 시도해보세요! 만약 추가로 리소스 압축이나 캐시 설정 등을 손보고 싶다면, CDN 설정 메뉴에서 조절하면 되고, Next.js에서도 <code>next.config.js</code>로 다양한 빌드 옵션을 더 줄 수 있습니다. 앞으로도 여러 팁 공유할게요!</p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p><code>table</code> 태그를 마크다운 형식으로 바꿔서 설명해볼게요.</p>
<p>먼저, CDN에 파일을 업로드할 때 중요한 건 <code>.next/static/</code> 폴더 안에 있는 내용만 올려야 한다는 점이에요. 이걸 올릴 때는 URL 경로와 맞춰서 <code>_next/static/</code> 형태로 업로드해야 하죠. 다른 <code>.next/</code> 폴더 전체를 올리면 서버 쪽 코드나 중요한 설정들이 공개될 수 있으니까 절대 업로드하지 마세요!</p>
<p>요약하자면, 이렇게 생각하면 편해요:</p>





















<table><thead><tr><th>할 일</th><th>설명</th></tr></thead><tbody><tr><td>업로드할 폴더</td><td><code>.next/static/</code> 폴더 안의 파일들만</td></tr><tr><td>업로드 경로</td><td>CDN 상에서 <code>_next/static/</code> 경로로 업로드</td></tr><tr><td>업로드하지 말아야 할 것</td><td><code>.next/</code> 폴더 전체 (서버 코드, 설정 등 민감한 내용 포함)</td></tr></tbody></table>
<p>이 부분은 Next.js 같은 프레임워크를 사용할 때 꼭 주의해야 하는 보안 포인트 중 하나예요. CDN에서 정적 파일만 안전하게 제공하고, 서버 쪽 코드는 절대 노출되지 않게 하는 거죠.</p>
<p>만약 CDN 설정이 처음이라면, 사용하는 CDN 서비스에 따라 조금씩 방법이 다르니 공식 문서나 가이드를 참고하는 게 좋아요. AWS S3, CloudFront, Netlify, Vercel 등 흔히 쓰이는 CDN 서비스들은 각각 업로드 방법과 경로 규칙을 제공하니까요.</p>
<p>추가로, <code>.next/static/</code> 폴더는 빌드 시 자동으로 생성되는 정적 자원들이 들어가기 때문에, 빌드(F5)를 할 때마다 최신 버전으로 갱신되는 게 포인트입니다. 따라서 CDN 캐싱 정책도 적절히 설정해줘야 오래된 파일이 서빙되는 걸 방지할 수 있어요!</p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>assetPrefix 설정은 _next/static 경로에 요청하는 파일들에는 적용되지만, 다음 경로들에는 영향을 주지 않아요:</p>
<ul>
<li>public 폴더 내의 파일들; 이 파일들을 CDN으로 제공하고 싶다면, assetPrefix를 사용하는 것만으로는 부족하고 직접 경로 앞에 CDN prefix를 붙여줘야 해요.</li>
</ul>
<p>조금 더 쉽게 말하자면, Next.js에서 assetPrefix를 설정하면 빌드 후 생성되는 정적 파일들(예: _next/static 안에 있는 JS, CSS 파일)에 대해 해당 prefix가 자동으로 적용돼요. 하지만 public 폴더 안에 넣은 이미지나 favicon 같은 파일들은 assetPrefix 설정과 상관없이 그냥 루트 경로(/)를 기준으로 접근해요. 그래서 public 폴더 자산을 CDN에서 직접 서비스하고 싶다면, 예를 들어 이미지 태그에 <code>${assetPrefix}/image.png</code>처럼 prefix를 직접 넣어줘야 한다는 점, 꼭 기억하세요!</p>
<p>이 과정에서 흔히 헷갈리기도 하는데, 실제 배포 환경에서 자주 실수하는 부분이라 꼭 확인하는걸 추천드려요! CDN으로 빠르게 자산을 제공하고 싶다면 public 폴더 자산도 prefix를 잘 적용해주는게 중요하답니다.</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Next.js 15에서 assetPrefix 설정하여 CDN 연동하는 방법","description":"","date":"2025-04-22 13:01","slug":"2025-04-22-assetPrefix","content":"\n\n# assetPrefix\n\n\u003e 주의: Vercel에 배포하면 Next.js 프로젝트에 전역 CDN이 자동으로 설정되기 때문에, Asset Prefix를 따로 수동으로 설정하지 않아도 됩니다.\n\n\u003e 참고로: Next.js 9.5 버전부터는 Base Path를 커스터마이징하는 기능이 추가됐어요. 이 기능을 이용하면 `/docs` 같은 서브 경로에 앱을 호스팅하기 적합해서, 이런 경우에는 Asset Prefix 대신 Base Path를 사용하는 걸 추천합니다.\n\n## CDN 설정하기\n\n자, 이제 직접 CDN 설정을 해보고 싶을 때 어떻게 하는지 살펴볼게요.\n\n---\n\n### assetPrefix란?\n\n`assetPrefix`는 Next.js에서 빌드된 정적 자산들(js, css, 이미지 등)이 로드되는 기본 URL 경로를 지정할 때 사용해요. 예를 들어, CDN 도메인을 지정해두면 사용자들은 CDN에서 자산들을 빠르게 받아볼 수 있죠.\n\n예전에는 배포 환경마다 직접 CDN 주소를 설정해야 했는데, 요즘은 Vercel을 사용하면 자동으로 글로벌 CDN이 세팅되니 크게 신경 쓰지 않아도 됩니다!\n\n---\n\n### 직접 CDN을 연결해야 하는 경우\n\n만약 Vercel이 아닌 AWS S3, CloudFront, Netlify, 또는 다른 호스팅 환경을 사용한다면, 아래처럼 `next.config.js`에 `assetPrefix`를 설정하게 됩니다.\n\n```js\nmodule.exports = {\n  assetPrefix: 'https://cdn.mydomain.com',\n};\n```\n\n이 설정을 하면, 정적 자산들의 경로가 `https://cdn.mydomain.com/_next/static/...`으로 변경되어 CDN에서 서빙됩니다.\n\n---\n\n### 주의할 점\n\n다만, 이렇게 `assetPrefix`를 설정하면 정적 파일뿐 아니라 내부 스크립트와 스타일도 모두 여기서 불러오기 때문에 CDN 도메인의 SSL이나 CORS 설정이 올바르게 되어 있어야 해요. 그렇지 않으면 자원이 제대로 로드 안 되는 문제가 발생할 수 있습니다.\n\n---\n\n### Base Path 활용하기\n\n또 한 가지 중요한 기능! Next.js 9.5버전부터는 `basePath` 옵션도 사용할 수 있어요. `basePath`는 애플리케이션 URL의 기본 경로를 설정하는 건데, 보통 `/docs`나 `/blog` 같이 서브 디렉토리에 앱을 배포할 때 쓰입니다.\n\n```js\nmodule.exports = {\n  basePath: '/docs',\n};\n```\n\n이렇게 설정하면 페이지들이 모두 `/docs` 경로 하위에서 서비스되고, 라우팅 관리가 훨씬 수월해져요.\n\n그리고 중요한 점! 이런 경우에는 굳이 `assetPrefix`를 쓰지 않고, `basePath` 만으로 충분하니 참고하세요.\n\n---\n\n## 정리하자면!\n\n| 상황                                 | 권장 설정                  |\n|----------------------------------|-------------------------|\n| Vercel 배포                         | 자동 CDN 설정, assetPrefix 불필요 |\n| 서브 경로(예: `/docs`)로 앱 배포           | basePath 활용              |\n| 직접 CDN 도메인 연결 필요 (Vercel 외)    | assetPrefix에 CDN 주소 설정    |\n\n---\n\n내가 개인적으로 추천하는 팁은 Vercel이나 요즘 메이저 플랫폼들은 대부분 CDN을 자동으로 설정해주니 복잡하게 assetPrefix 건드리지 않고, 필요하면 basePath만 적절히 활용하는 게 가장 깔끔하다는 거예요.\n\n혹시 여러분도 서브 디렉토리로 앱을 배포하거나 직접 CDN 연결해야 하는 상황이 생기면, 위 내용을 참고해서 차근차근 설정해 보세요! 문제 생기면 댓글로 물어봐도 좋고요 :)\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nCDN(Content Delivery Network)을 설정하는 방법에 대해 이야기해볼게요. 좋은 성능을 위해 정적 자산(이미지, JS, CSS 등)을 CDN으로 배포하면 사용자에게 훨씬 빠르게 콘텐츠를 전달할 수 있어요.\n\nNext.js에서는 assetPrefix라는 설정을 이용해서 CDN 주소를 쉽게 지정할 수 있어요. 예를 들어, 여러분의 CDN 도메인이 `https://cdn.mydomain.com`이라면, 다음과 같이 `next.config.mjs` 파일에 설정할 수 있습니다.\n\n```js\n// @ts-check\nimport { PHASE_DEVELOPMENT_SERVER } from 'next/constants'\n \nexport default (phase) =\u003e {\n  const isDev = phase === PHASE_DEVELOPMENT_SERVER\n  /**\n   * @type {import('next').NextConfig}\n   */\n  const nextConfig = {\n    // 개발 환경에서는 assetPrefix를 사용하지 않고, 배포 환경에서만 CDN 도메인을 붙임\n    assetPrefix: isDev ? undefined : 'https://cdn.mydomain.com',\n  }\n  return nextConfig\n}\n```\n\n이렇게 설정하면 Next.js는 자동으로 자바스크립트나 CSS 같은 정적 파일을 `/next/static/` 폴더에서 불러올 때 CDN 주소를 붙여 요청해줍니다.\n\n예를 들어, 원래라면 `/next/static/chunks/main.js`로 요청할 파일이\n\n\nhttps://cdn.mydomain.com/_next/static/chunks/main.js\n\n\n이런 식으로 바뀌어서 CDN 서버에서 빠르게 제공되겠죠.\n\n---\n\n### 추가로 알아두면 좋은 점들\n\n- **환경별 분리**: 개발 단계에선 로컬에서 바로 파일을 불러오는 게 편하니까 assetPrefix를 사용하지 않고, 실제 배포 때만 CDN 주소를 사용하도록 phase를 분리하는 게 일반적이에요.\n- **CDN 설정**: Next.js 쪽에서 assetPrefix만 설정한다고 CDN이 완성되는 건 아니에요. CDN 제공 업체(Cloudflare, AWS CloudFront 등)에서 원본(origin)을 Next.js가 호스트 중인 도메인(예: 내 서버 도메인)으로 설정해야 합니다. 즉, CDN 주소로 들어온 요청을 실제 Next.js 서버로 전달해주는 역할이 필요해요.\n- **_next 폴더 주의**: Next.js가 내부적으로 사용하는 `_next` 경로는 정적 파일 및 페이지 정보를 담고 있어서, assetPrefix 설정 시 해당 경로가 포함되니 CDN에서도 해당 경로들을 캐싱하도록 설정하는 게 좋아요.\n\n---\n\nCDN을 붙여놓으면 사용자의 로드 속도가 확실히 개선되니까 배포할 땐 꼭 한번 시도해보세요! 만약 추가로 리소스 압축이나 캐시 설정 등을 손보고 싶다면, CDN 설정 메뉴에서 조절하면 되고, Next.js에서도 `next.config.js`로 다양한 빌드 옵션을 더 줄 수 있습니다. 앞으로도 여러 팁 공유할게요!\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n`table` 태그를 마크다운 형식으로 바꿔서 설명해볼게요.\n\n먼저, CDN에 파일을 업로드할 때 중요한 건 `.next/static/` 폴더 안에 있는 내용만 올려야 한다는 점이에요. 이걸 올릴 때는 URL 경로와 맞춰서 `_next/static/` 형태로 업로드해야 하죠. 다른 `.next/` 폴더 전체를 올리면 서버 쪽 코드나 중요한 설정들이 공개될 수 있으니까 절대 업로드하지 마세요!\n\n요약하자면, 이렇게 생각하면 편해요:\n\n| 할 일                     | 설명                                    |\n|--------------------------|---------------------------------------|\n| 업로드할 폴더              | `.next/static/` 폴더 안의 파일들만            |\n| 업로드 경로               | CDN 상에서 `_next/static/` 경로로 업로드       |\n| 업로드하지 말아야 할 것     | `.next/` 폴더 전체 (서버 코드, 설정 등 민감한 내용 포함) |\n\n이 부분은 Next.js 같은 프레임워크를 사용할 때 꼭 주의해야 하는 보안 포인트 중 하나예요. CDN에서 정적 파일만 안전하게 제공하고, 서버 쪽 코드는 절대 노출되지 않게 하는 거죠.\n\n만약 CDN 설정이 처음이라면, 사용하는 CDN 서비스에 따라 조금씩 방법이 다르니 공식 문서나 가이드를 참고하는 게 좋아요. AWS S3, CloudFront, Netlify, Vercel 등 흔히 쓰이는 CDN 서비스들은 각각 업로드 방법과 경로 규칙을 제공하니까요.\n\n추가로, `.next/static/` 폴더는 빌드 시 자동으로 생성되는 정적 자원들이 들어가기 때문에, 빌드(F5)를 할 때마다 최신 버전으로 갱신되는 게 포인트입니다. 따라서 CDN 캐싱 정책도 적절히 설정해줘야 오래된 파일이 서빙되는 걸 방지할 수 있어요!\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\nassetPrefix 설정은 _next/static 경로에 요청하는 파일들에는 적용되지만, 다음 경로들에는 영향을 주지 않아요:\n\n- public 폴더 내의 파일들; 이 파일들을 CDN으로 제공하고 싶다면, assetPrefix를 사용하는 것만으로는 부족하고 직접 경로 앞에 CDN prefix를 붙여줘야 해요.\n\n조금 더 쉽게 말하자면, Next.js에서 assetPrefix를 설정하면 빌드 후 생성되는 정적 파일들(예: _next/static 안에 있는 JS, CSS 파일)에 대해 해당 prefix가 자동으로 적용돼요. 하지만 public 폴더 안에 넣은 이미지나 favicon 같은 파일들은 assetPrefix 설정과 상관없이 그냥 루트 경로(/)를 기준으로 접근해요. 그래서 public 폴더 자산을 CDN에서 직접 서비스하고 싶다면, 예를 들어 이미지 태그에 `${assetPrefix}/image.png`처럼 prefix를 직접 넣어줘야 한다는 점, 꼭 기억하세요!\n\n이 과정에서 흔히 헷갈리기도 하는데, 실제 배포 환경에서 자주 실수하는 부분이라 꼭 확인하는걸 추천드려요! CDN으로 빠르게 자산을 제공하고 싶다면 public 폴더 자산도 prefix를 잘 적용해주는게 중요하답니다.","ogImage":{"url":"/TIL/assets/img/nextjs.png"},"coverImage":"/TIL/assets/img/nextjs.png","tag":["Tech"],"readingTime":6},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003ch1\u003eassetPrefix\u003c/h1\u003e\n\u003cblockquote\u003e\n\u003cp\u003e주의: Vercel에 배포하면 Next.js 프로젝트에 전역 CDN이 자동으로 설정되기 때문에, Asset Prefix를 따로 수동으로 설정하지 않아도 됩니다.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cblockquote\u003e\n\u003cp\u003e참고로: Next.js 9.5 버전부터는 Base Path를 커스터마이징하는 기능이 추가됐어요. 이 기능을 이용하면 \u003ccode\u003e/docs\u003c/code\u003e 같은 서브 경로에 앱을 호스팅하기 적합해서, 이런 경우에는 Asset Prefix 대신 Base Path를 사용하는 걸 추천합니다.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2\u003eCDN 설정하기\u003c/h2\u003e\n\u003cp\u003e자, 이제 직접 CDN 설정을 해보고 싶을 때 어떻게 하는지 살펴볼게요.\u003c/p\u003e\n\u003chr\u003e\n\u003ch3\u003eassetPrefix란?\u003c/h3\u003e\n\u003cp\u003e\u003ccode\u003eassetPrefix\u003c/code\u003e는 Next.js에서 빌드된 정적 자산들(js, css, 이미지 등)이 로드되는 기본 URL 경로를 지정할 때 사용해요. 예를 들어, CDN 도메인을 지정해두면 사용자들은 CDN에서 자산들을 빠르게 받아볼 수 있죠.\u003c/p\u003e\n\u003cp\u003e예전에는 배포 환경마다 직접 CDN 주소를 설정해야 했는데, 요즘은 Vercel을 사용하면 자동으로 글로벌 CDN이 세팅되니 크게 신경 쓰지 않아도 됩니다!\u003c/p\u003e\n\u003chr\u003e\n\u003ch3\u003e직접 CDN을 연결해야 하는 경우\u003c/h3\u003e\n\u003cp\u003e만약 Vercel이 아닌 AWS S3, CloudFront, Netlify, 또는 다른 호스팅 환경을 사용한다면, 아래처럼 \u003ccode\u003enext.config.js\u003c/code\u003e에 \u003ccode\u003eassetPrefix\u003c/code\u003e를 설정하게 됩니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable language_\"\u003emodule\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eexports\u003c/span\u003e = {\n  \u003cspan class=\"hljs-attr\"\u003eassetPrefix\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'https://cdn.mydomain.com'\u003c/span\u003e,\n};\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e이 설정을 하면, 정적 자산들의 경로가 \u003ccode\u003ehttps://cdn.mydomain.com/_next/static/...\u003c/code\u003e으로 변경되어 CDN에서 서빙됩니다.\u003c/p\u003e\n\u003chr\u003e\n\u003ch3\u003e주의할 점\u003c/h3\u003e\n\u003cp\u003e다만, 이렇게 \u003ccode\u003eassetPrefix\u003c/code\u003e를 설정하면 정적 파일뿐 아니라 내부 스크립트와 스타일도 모두 여기서 불러오기 때문에 CDN 도메인의 SSL이나 CORS 설정이 올바르게 되어 있어야 해요. 그렇지 않으면 자원이 제대로 로드 안 되는 문제가 발생할 수 있습니다.\u003c/p\u003e\n\u003chr\u003e\n\u003ch3\u003eBase Path 활용하기\u003c/h3\u003e\n\u003cp\u003e또 한 가지 중요한 기능! Next.js 9.5버전부터는 \u003ccode\u003ebasePath\u003c/code\u003e 옵션도 사용할 수 있어요. \u003ccode\u003ebasePath\u003c/code\u003e는 애플리케이션 URL의 기본 경로를 설정하는 건데, 보통 \u003ccode\u003e/docs\u003c/code\u003e나 \u003ccode\u003e/blog\u003c/code\u003e 같이 서브 디렉토리에 앱을 배포할 때 쓰입니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable language_\"\u003emodule\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eexports\u003c/span\u003e = {\n  \u003cspan class=\"hljs-attr\"\u003ebasePath\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'/docs'\u003c/span\u003e,\n};\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e이렇게 설정하면 페이지들이 모두 \u003ccode\u003e/docs\u003c/code\u003e 경로 하위에서 서비스되고, 라우팅 관리가 훨씬 수월해져요.\u003c/p\u003e\n\u003cp\u003e그리고 중요한 점! 이런 경우에는 굳이 \u003ccode\u003eassetPrefix\u003c/code\u003e를 쓰지 않고, \u003ccode\u003ebasePath\u003c/code\u003e 만으로 충분하니 참고하세요.\u003c/p\u003e\n\u003chr\u003e\n\u003ch2\u003e정리하자면!\u003c/h2\u003e\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003ctable\u003e\u003cthead\u003e\u003ctr\u003e\u003cth\u003e상황\u003c/th\u003e\u003cth\u003e권장 설정\u003c/th\u003e\u003c/tr\u003e\u003c/thead\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd\u003eVercel 배포\u003c/td\u003e\u003ctd\u003e자동 CDN 설정, assetPrefix 불필요\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e서브 경로(예: \u003ccode\u003e/docs\u003c/code\u003e)로 앱 배포\u003c/td\u003e\u003ctd\u003ebasePath 활용\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e직접 CDN 도메인 연결 필요 (Vercel 외)\u003c/td\u003e\u003ctd\u003eassetPrefix에 CDN 주소 설정\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\u003chr\u003e\n\u003cp\u003e내가 개인적으로 추천하는 팁은 Vercel이나 요즘 메이저 플랫폼들은 대부분 CDN을 자동으로 설정해주니 복잡하게 assetPrefix 건드리지 않고, 필요하면 basePath만 적절히 활용하는 게 가장 깔끔하다는 거예요.\u003c/p\u003e\n\u003cp\u003e혹시 여러분도 서브 디렉토리로 앱을 배포하거나 직접 CDN 연결해야 하는 상황이 생기면, 위 내용을 참고해서 차근차근 설정해 보세요! 문제 생기면 댓글로 물어봐도 좋고요 :)\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eCDN(Content Delivery Network)을 설정하는 방법에 대해 이야기해볼게요. 좋은 성능을 위해 정적 자산(이미지, JS, CSS 등)을 CDN으로 배포하면 사용자에게 훨씬 빠르게 콘텐츠를 전달할 수 있어요.\u003c/p\u003e\n\u003cp\u003eNext.js에서는 assetPrefix라는 설정을 이용해서 CDN 주소를 쉽게 지정할 수 있어요. 예를 들어, 여러분의 CDN 도메인이 \u003ccode\u003ehttps://cdn.mydomain.com\u003c/code\u003e이라면, 다음과 같이 \u003ccode\u003enext.config.mjs\u003c/code\u003e 파일에 설정할 수 있습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// @ts-check\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-variable constant_\"\u003ePHASE_DEVELOPMENT_SERVER\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'next/constants'\u003c/span\u003e\n \n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e (phase) =\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e isDev = phase === \u003cspan class=\"hljs-variable constant_\"\u003ePHASE_DEVELOPMENT_SERVER\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e/**\n   * \u003cspan class=\"hljs-doctag\"\u003e@type\u003c/span\u003e {\u003cspan class=\"hljs-type\"\u003eimport('next').NextConfig\u003c/span\u003e}\n   */\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e nextConfig = {\n    \u003cspan class=\"hljs-comment\"\u003e// 개발 환경에서는 assetPrefix를 사용하지 않고, 배포 환경에서만 CDN 도메인을 붙임\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eassetPrefix\u003c/span\u003e: isDev ? \u003cspan class=\"hljs-literal\"\u003eundefined\u003c/span\u003e : \u003cspan class=\"hljs-string\"\u003e'https://cdn.mydomain.com'\u003c/span\u003e,\n  }\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e nextConfig\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e이렇게 설정하면 Next.js는 자동으로 자바스크립트나 CSS 같은 정적 파일을 \u003ccode\u003e/next/static/\u003c/code\u003e 폴더에서 불러올 때 CDN 주소를 붙여 요청해줍니다.\u003c/p\u003e\n\u003cp\u003e예를 들어, 원래라면 \u003ccode\u003e/next/static/chunks/main.js\u003c/code\u003e로 요청할 파일이\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://cdn.mydomain.com/_next/static/chunks/main.js\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://cdn.mydomain.com/_next/static/chunks/main.js\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e이런 식으로 바뀌어서 CDN 서버에서 빠르게 제공되겠죠.\u003c/p\u003e\n\u003chr\u003e\n\u003ch3\u003e추가로 알아두면 좋은 점들\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e환경별 분리\u003c/strong\u003e: 개발 단계에선 로컬에서 바로 파일을 불러오는 게 편하니까 assetPrefix를 사용하지 않고, 실제 배포 때만 CDN 주소를 사용하도록 phase를 분리하는 게 일반적이에요.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eCDN 설정\u003c/strong\u003e: Next.js 쪽에서 assetPrefix만 설정한다고 CDN이 완성되는 건 아니에요. CDN 제공 업체(Cloudflare, AWS CloudFront 등)에서 원본(origin)을 Next.js가 호스트 중인 도메인(예: 내 서버 도메인)으로 설정해야 합니다. 즉, CDN 주소로 들어온 요청을 실제 Next.js 서버로 전달해주는 역할이 필요해요.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e_next 폴더 주의\u003c/strong\u003e: Next.js가 내부적으로 사용하는 \u003ccode\u003e_next\u003c/code\u003e 경로는 정적 파일 및 페이지 정보를 담고 있어서, assetPrefix 설정 시 해당 경로가 포함되니 CDN에서도 해당 경로들을 캐싱하도록 설정하는 게 좋아요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003cp\u003eCDN을 붙여놓으면 사용자의 로드 속도가 확실히 개선되니까 배포할 땐 꼭 한번 시도해보세요! 만약 추가로 리소스 압축이나 캐시 설정 등을 손보고 싶다면, CDN 설정 메뉴에서 조절하면 되고, Next.js에서도 \u003ccode\u003enext.config.js\u003c/code\u003e로 다양한 빌드 옵션을 더 줄 수 있습니다. 앞으로도 여러 팁 공유할게요!\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e\u003ccode\u003etable\u003c/code\u003e 태그를 마크다운 형식으로 바꿔서 설명해볼게요.\u003c/p\u003e\n\u003cp\u003e먼저, CDN에 파일을 업로드할 때 중요한 건 \u003ccode\u003e.next/static/\u003c/code\u003e 폴더 안에 있는 내용만 올려야 한다는 점이에요. 이걸 올릴 때는 URL 경로와 맞춰서 \u003ccode\u003e_next/static/\u003c/code\u003e 형태로 업로드해야 하죠. 다른 \u003ccode\u003e.next/\u003c/code\u003e 폴더 전체를 올리면 서버 쪽 코드나 중요한 설정들이 공개될 수 있으니까 절대 업로드하지 마세요!\u003c/p\u003e\n\u003cp\u003e요약하자면, 이렇게 생각하면 편해요:\u003c/p\u003e\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003ctable\u003e\u003cthead\u003e\u003ctr\u003e\u003cth\u003e할 일\u003c/th\u003e\u003cth\u003e설명\u003c/th\u003e\u003c/tr\u003e\u003c/thead\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd\u003e업로드할 폴더\u003c/td\u003e\u003ctd\u003e\u003ccode\u003e.next/static/\u003c/code\u003e 폴더 안의 파일들만\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e업로드 경로\u003c/td\u003e\u003ctd\u003eCDN 상에서 \u003ccode\u003e_next/static/\u003c/code\u003e 경로로 업로드\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e업로드하지 말아야 할 것\u003c/td\u003e\u003ctd\u003e\u003ccode\u003e.next/\u003c/code\u003e 폴더 전체 (서버 코드, 설정 등 민감한 내용 포함)\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\u003cp\u003e이 부분은 Next.js 같은 프레임워크를 사용할 때 꼭 주의해야 하는 보안 포인트 중 하나예요. CDN에서 정적 파일만 안전하게 제공하고, 서버 쪽 코드는 절대 노출되지 않게 하는 거죠.\u003c/p\u003e\n\u003cp\u003e만약 CDN 설정이 처음이라면, 사용하는 CDN 서비스에 따라 조금씩 방법이 다르니 공식 문서나 가이드를 참고하는 게 좋아요. AWS S3, CloudFront, Netlify, Vercel 등 흔히 쓰이는 CDN 서비스들은 각각 업로드 방법과 경로 규칙을 제공하니까요.\u003c/p\u003e\n\u003cp\u003e추가로, \u003ccode\u003e.next/static/\u003c/code\u003e 폴더는 빌드 시 자동으로 생성되는 정적 자원들이 들어가기 때문에, 빌드(F5)를 할 때마다 최신 버전으로 갱신되는 게 포인트입니다. 따라서 CDN 캐싱 정책도 적절히 설정해줘야 오래된 파일이 서빙되는 걸 방지할 수 있어요!\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003eassetPrefix 설정은 _next/static 경로에 요청하는 파일들에는 적용되지만, 다음 경로들에는 영향을 주지 않아요:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003epublic 폴더 내의 파일들; 이 파일들을 CDN으로 제공하고 싶다면, assetPrefix를 사용하는 것만으로는 부족하고 직접 경로 앞에 CDN prefix를 붙여줘야 해요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e조금 더 쉽게 말하자면, Next.js에서 assetPrefix를 설정하면 빌드 후 생성되는 정적 파일들(예: _next/static 안에 있는 JS, CSS 파일)에 대해 해당 prefix가 자동으로 적용돼요. 하지만 public 폴더 안에 넣은 이미지나 favicon 같은 파일들은 assetPrefix 설정과 상관없이 그냥 루트 경로(/)를 기준으로 접근해요. 그래서 public 폴더 자산을 CDN에서 직접 서비스하고 싶다면, 예를 들어 이미지 태그에 \u003ccode\u003e${assetPrefix}/image.png\u003c/code\u003e처럼 prefix를 직접 넣어줘야 한다는 점, 꼭 기억하세요!\u003c/p\u003e\n\u003cp\u003e이 과정에서 흔히 헷갈리기도 하는데, 실제 배포 환경에서 자주 실수하는 부분이라 꼭 확인하는걸 추천드려요! CDN으로 빠르게 자산을 제공하고 싶다면 public 폴더 자산도 prefix를 잘 적용해주는게 중요하답니다.\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2025-04-22-assetPrefix"},"buildId":"KUC9M_yIlA1Ugo01xmkHL","assetPrefix":"/TIL","isFallback":false,"gsp":true,"scriptLoader":[{"async":true,"src":"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4877378276818686","strategy":"lazyOnload","crossOrigin":"anonymous"}]}</script></body></html>