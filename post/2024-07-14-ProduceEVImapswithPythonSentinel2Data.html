<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>Sentinel 2 데이터를 이용한 Python으로 EVI 지도 생성하는 방법 | TIL</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://13akstjq.github.io/TIL//post/2024-07-14-ProduceEVImapswithPythonSentinel2Data" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="Sentinel 2 데이터를 이용한 Python으로 EVI 지도 생성하는 방법 | TIL" data-gatsby-head="true"/><meta property="og:title" content="Sentinel 2 데이터를 이용한 Python으로 EVI 지도 생성하는 방법 | TIL" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/TIL/assets/img/2024-07-14-ProduceEVImapswithPythonSentinel2Data_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://TIL.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://13akstjq.github.io/TIL//post/2024-07-14-ProduceEVImapswithPythonSentinel2Data" data-gatsby-head="true"/><meta name="twitter:title" content="Sentinel 2 데이터를 이용한 Python으로 EVI 지도 생성하는 방법 | TIL" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/TIL/assets/img/2024-07-14-ProduceEVImapswithPythonSentinel2Data_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | TIL" data-gatsby-head="true"/><meta name="article:published_time" content="2024-07-14 23:46" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/TIL/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/TIL/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/TIL/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/TIL/favicons/favicon-96x96.png"/><link rel="icon" href="/TIL/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/TIL/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/TIL/favicons/browserconfig.xml"/><link rel="preload" href="/TIL/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/TIL/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/TIL/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/TIL/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/TIL/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/TIL/_next/static/chunks/webpack-21ffe88bdca56cba.js" defer=""></script><script src="/TIL/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/TIL/_next/static/chunks/main-a5eeabb286676ce6.js" defer=""></script><script src="/TIL/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/TIL/_next/static/chunks/75fc9c18-4a646156c659a948.js" defer=""></script><script src="/TIL/_next/static/chunks/348-02483b66b493dd81.js" defer=""></script><script src="/TIL/_next/static/chunks/pages/post/%5Bslug%5D-8ded8b979ba73586.js" defer=""></script><script src="/TIL/_next/static/o6AmBAY_j9v9JmbaRA39X/_buildManifest.js" defer=""></script><script src="/TIL/_next/static/o6AmBAY_j9v9JmbaRA39X/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/TIL">TIL</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/TIL/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">Sentinel 2 데이터를 이용한 Python으로 EVI 지도 생성하는 방법</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="Sentinel 2 데이터를 이용한 Python으로 EVI 지도 생성하는 방법" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/TIL/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">TIL</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Jul 14, 2024</span><span class="posts_reading_time__f7YPP">8<!-- --> min read</span></span></div></div></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<h1>TL;TR</h1>
<p>증강 식물 지수 (EVI)는 원격 감지에서 널리 사용되는 분광 지수로, 위성 영상을 통해 식물 건강 및 영역을 평가하는 데 사용됩니다. 일반화된 차이 식물 지수 (NDVI)를 개선하여 대기 영향을 최소화하고 수관 구조 변화 및 밀집 식물 지역에 대한 민감도를 향상시켰습니다.</p>
<h2>EVI의 주요 특징:</h2>
<ul>
<li>식물에 대한 민감도: EVI는 대기 영향을 최소화하고 수관 특성에 대한 민감도를 증가시킴으로써 특히 밀집 식물 지역에서 효과적으로 작동하도록 설계되었습니다.</li>
<li>공식: EVI 공식은 빨강, 근적외선 (NIR), 파랑 분광대를 포함하여 식물에 대한 민감도를 개선합니다.</li>
</ul>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<img src="/TIL/assets/img/2024-07-14-ProduceEVImapswithPythonSentinel2Data_0.png">
<p>여기서:</p>
<ul>
<li>NIR은 근적외선 대역의 반사율입니다.</li>
<li>Red는 빨간 대역의 반사율입니다.</li>
<li>Blue는 파란 대역의 반사율입니다.</li>
<li>G는 이득 요소입니다 (기본값: 2.5).</li>
<li>C1 및 C2는 대기의 영향을 최소화하기 위한 계수입니다 (기본값: 각각 6 및 7.5).</li>
<li>L은 수관 배경 조정 요소입니다 (기본값: 1).</li>
</ul>
<p>값의 범위: EVI 값은 일반적으로 -1에서 1 사이의 범위를 갖습니다.</p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>높은 값은 밀도가 높은 식물을 나타냅니다.</li>
<li>0 또는 음수에 가까운 값은 비식물 또는 희소식물이 자리 잡은 지역을 나타냅니다.</li>
</ul>
<h2>응용:</h2>
<ul>
<li>식물 모니터링: EVI는 식물 동태를 모니터링하는 데 널리 사용되며 성장 패턴, 건강 평가, 그리고 환경 요소 또는 인간 활동으로 인한 변화 감지에 도움이 됩니다.</li>
<li>토지 이용 및 토지 피복 매핑: 특히 식물로 지배되는 토지 이용 유형을 매핑하고 분류하는 데 도움이 됩니다.</li>
<li>생태학 연구: 식물 분포를 분석하는 데 유용하며, 생물 다양성 평가 및 서식지 매핑에 활용됩니다.</li>
</ul>
<h2>장점:</h2>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<ul>
<li>민감도 향상: NDVI와 비교하여 밀집 식물 지역의 변화에 대한 감도를 향상시켰습니다.</li>
<li>대기 보정: 대기 간섭을 줄이기 위한 계수를 포함하여 대기 보정을 통해 전 세계 및 지역 규모의 응용 프로그램에 더 견고하게 만들었습니다.</li>
</ul>
<h2>고려 사항:</h2>
<ul>
<li>데이터 요구 사항: 일반적으로 중고해상도 위성 플랫폼에서 널리 사용되는 빨강, NIR 및 파랑 밴드를 갖춘 다중 스펙트럼 위성 영상이 필요합니다.</li>
<li>매개변수 민감도: 계수 G, C1, C2 및 L의 선택에 민감하며 특정 환경 조건 및 연구 목표에 따라 조정이 필요할 수 있습니다.</li>
</ul>
<h2>선행 조건:</h2>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>이 여정에서는 다음을 설치해야 합니다:</p>
<ul>
<li>Python 3.10+</li>
<li>시각화를 위한 QGIS 3.X.X +</li>
</ul>
<p>또한 다음이 필요합니다:</p>
<ul>
<li>Copernicus 사이트에서 다운로드할 데이터 세트. 2024년 2월 27일 센티넬 2 2A 이미지로 작업할 예정입니다 (이미지 참조: T36QUL_20240227T082911).</li>
<li>Copernicus 플랫폼에서 다운로드할 수 있습니다; 데이터 다운로드에 대한 문서를 확인할 수 있습니다.</li>
</ul>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h1>Sentinel-2 데이터를 활용한 실제 적용:</h1>
<h2>1. 저장소 복제</h2>
<p>분류 스크립트 및 학습 샘플을 가져오세요:</p>
<pre><code class="hljs language-js">git clone <span class="hljs-attr">https</span>:<span class="hljs-comment">//github.com/kokatic/remote_sensing</span>
</code></pre>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>이렇게 작성하시면 됩니다 :</p>
<img src="/TIL/assets/img/2024-07-14-ProduceEVImapswithPythonSentinel2Data_1.png">
<p>내 레포지토리(/data/)에 데이터 폴더를 추가했습니다. 이 폴더에는 2024년 4월 30일 에르 우에드 지역의 Sentinel-2 데이터가 포함되어 있습니다. 기준 이미지는 T32SKC_20240430T102021이며, 밴드 4와 8을 포함하고 있습니다.</p>
<h2>2. 가상 환경 생성 및 필수 모듈 설치</h2>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>현재 작업 폴더 디렉토리에서 명령 줄 인터페이스를 엽니다:</p>
<pre><code class="hljs language-js">python -m venv venv
</code></pre>
<p>그런 다음 가상 환경을 활성화합니다:</p>
<p>Windows용 (CMD)에서:</p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>venv\Scripts\activate # Linux의 경우: source venv/bin/activate</p>
<p>필요한 패키지 설치 후:</p>
<p>pip install -r requirements.txt</p>
<h2>3. 스크립트 실행</h2>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>동일한 폴더에서 스크립트를 실행하려면 터미널 또는 명령 프롬프트를 열고 스크립트가 있는 폴더로 이동한 다음 다음 명령을 실행하세요:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> rasterio
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

def <span class="hljs-title function_">calculate_evi</span>(red_band_path, nir_band_path, blue_band_path, output_path):
    <span class="hljs-attr">try</span>:
        # rasterio 데이터셋으로 빨간색, <span class="hljs-variable constant_">NIR</span>, 파란색 밴드 열기
        <span class="hljs-keyword">with</span> rasterio.<span class="hljs-title function_">open</span>(red_band_path) <span class="hljs-keyword">as</span> red_dataset, \
             rasterio.<span class="hljs-title function_">open</span>(nir_band_path) <span class="hljs-keyword">as</span> nir_dataset, \
             rasterio.<span class="hljs-title function_">open</span>(blue_band_path) <span class="hljs-keyword">as</span> <span class="hljs-attr">blue_dataset</span>:

            # rasterio 데이터셋에서 데이터 읽기
            red = red_dataset.<span class="hljs-title function_">read</span>(<span class="hljs-number">1</span>, masked=<span class="hljs-title class_">True</span>).<span class="hljs-title function_">astype</span>(<span class="hljs-string">'float32'</span>)
            nir = nir_dataset.<span class="hljs-title function_">read</span>(<span class="hljs-number">1</span>, masked=<span class="hljs-title class_">True</span>).<span class="hljs-title function_">astype</span>(<span class="hljs-string">'float32'</span>)
            blue = blue_dataset.<span class="hljs-title function_">read</span>(<span class="hljs-number">1</span>, masked=<span class="hljs-title class_">True</span>).<span class="hljs-title function_">astype</span>(<span class="hljs-string">'float32'</span>)

            # <span class="hljs-variable constant_">EVI</span> 계산
            G = <span class="hljs-number">2.5</span>
            <span class="hljs-variable constant_">C1</span> = <span class="hljs-number">6</span>
            <span class="hljs-variable constant_">C2</span> = <span class="hljs-number">7.5</span>
            L = <span class="hljs-number">1</span>
            epsilon = <span class="hljs-number">1e-6</span>  # <span class="hljs-number">0</span>으로 나누기를 피하기 위한 작은 엡실론 값
            denominator = nir + <span class="hljs-variable constant_">C1</span> * red - <span class="hljs-variable constant_">C2</span> * blue + L
            evi = np.<span class="hljs-title function_">where</span>(denominator != <span class="hljs-number">0</span>, G * ((nir - red) / denominator), np.<span class="hljs-property">nan</span>)

            # <span class="hljs-variable constant_">EVI</span> 값을 [-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>] 범위로 클리핑
            evi = np.<span class="hljs-title function_">clip</span>(evi, -<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)

            # <span class="hljs-variable constant_">EVI</span> 출력을 위한 프로필 업데이트
            profile = red_dataset.<span class="hljs-property">profile</span>
            profile.<span class="hljs-title function_">update</span>(dtype=rasterio.<span class="hljs-property">float32</span>, count=<span class="hljs-number">1</span>, compress=<span class="hljs-string">'lzw'</span>)

            # 새 <span class="hljs-title class_">GeoTIFF</span> 파일에 <span class="hljs-variable constant_">EVI</span> 결과 작성
            <span class="hljs-keyword">with</span> rasterio.<span class="hljs-title function_">open</span>(output_path, <span class="hljs-string">'w'</span>, **profile) <span class="hljs-keyword">as</span> <span class="hljs-attr">dst</span>:
                dst.<span class="hljs-title function_">write</span>(evi.<span class="hljs-title function_">astype</span>(np.<span class="hljs-property">float32</span>), <span class="hljs-number">1</span>)

    except <span class="hljs-title class_">Exception</span> <span class="hljs-keyword">as</span> <span class="hljs-attr">e</span>:
        <span class="hljs-title function_">print</span>(f<span class="hljs-string">"오류가 발생했습니다: {e}"</span>)

# 예시 파일 경로
red_band_path = <span class="hljs-string">'data/Toshka/S2A_MSIL2A_20240227T082911/T36QUL_20240227T082911_B04_10m.jp2'</span>  # 빨간색 밴드
nir_band_path = <span class="hljs-string">'data/Toshka/S2A_MSIL2A_20240227T082911/T36QUL_20240227T082911_B08_10m.jp2'</span>  # 근적외선 밴드
blue_band_path = <span class="hljs-string">'data/Toshka/S2A_MSIL2A_20240227T082911/T36QUL_20240227T082911_B02_10m.jp2'</span>  # 파란색 밴드
output_path = <span class="hljs-string">'output/evi.tif'</span>  # <span class="hljs-variable constant_">EVI</span> 출력 파일

<span class="hljs-title function_">calculate_evi</span>(red_band_path, nir_band_path, blue_band_path, output_path)
</code></pre>
<p>스크립트를 실행한 후 output/ 폴더에 EVI 출력물을 찾을 수 있습니다:</p>
<p><img src="/TIL/assets/img/2024-07-14-ProduceEVImapswithPythonSentinel2Data_2.png" alt="EVI 출력물"></p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>3- 결과 확인: 시각화와 분석</p>
<ul>
<li>EVI 출력 파일 (evi.tif)을 QGIS에 로드합니다.</li>
<li>더 밀집한 식물 상층을 나타내는 더 높은 EVI 값의 시각화를 위해 적합한 컬러 팔레트를 적용합니다.</li>
<li>EVI 값에 기반하여 관심 영역을 강조하기 위해 시각화 설정을 조정하여 식물 건강 평가 및 토지 피복 맵핑을 지원합니다.</li>
</ul>
<p><img src="/TIL/assets/img/2024-07-14-ProduceEVImapswithPythonSentinel2Data_3.png" alt="이미지1"></p>
<p><img src="/TIL/assets/img/2024-07-14-ProduceEVImapswithPythonSentinel2Data_4.png" alt="이미지2"></p>
<!-- TIL 수평 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4877378276818686" data-ad-slot="1549334788" data-ad-format="auto" data-full-width-responsive="true"></ins></p>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h1>결론</h1>
<p>요약하자면, 향상된 식물지수(EVI)는 원격 감지 응용 프로그램에 강력한 도구로, 식물 역학 및 건강 평가에 대한 감도를 향상시켜줍니다. Sentinel-2 위성 이미지와 Python 및 QGIS와 같은 컴퓨터 도구를 활용하여 연구원 및 실무자는 효과적으로 식물 변화를 모니터링하고 토지 피복 유형을 분류하며 생태학 연구 및 환경 관리에 기여할 수 있습니다. 더 자세한 내용이나 문의 사항이 있으시면 언제든지 댓글을 남기거나 직접 연락해주세요.</p>
<h1>팔로우</h1>
<ul>
<li>내 랜딩 페이지</li>
<li>내 Youtube 채널</li>
<li>내 SaaS 서비스</li>
<li>내 GitHub</li>
</ul>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Sentinel 2 데이터를 이용한 Python으로 EVI 지도 생성하는 방법","description":"","date":"2024-07-14 23:46","slug":"2024-07-14-ProduceEVImapswithPythonSentinel2Data","content":"\n\n# TL;TR\n\n증강 식물 지수 (EVI)는 원격 감지에서 널리 사용되는 분광 지수로, 위성 영상을 통해 식물 건강 및 영역을 평가하는 데 사용됩니다. 일반화된 차이 식물 지수 (NDVI)를 개선하여 대기 영향을 최소화하고 수관 구조 변화 및 밀집 식물 지역에 대한 민감도를 향상시켰습니다.\n\n## EVI의 주요 특징:\n\n- 식물에 대한 민감도: EVI는 대기 영향을 최소화하고 수관 특성에 대한 민감도를 증가시킴으로써 특히 밀집 식물 지역에서 효과적으로 작동하도록 설계되었습니다.\n- 공식: EVI 공식은 빨강, 근적외선 (NIR), 파랑 분광대를 포함하여 식물에 대한 민감도를 개선합니다.\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n\u003cimg src=\"/TIL/assets/img/2024-07-14-ProduceEVImapswithPythonSentinel2Data_0.png\" /\u003e\n\n여기서:\n\n- NIR은 근적외선 대역의 반사율입니다.\n- Red는 빨간 대역의 반사율입니다.\n- Blue는 파란 대역의 반사율입니다.\n- G는 이득 요소입니다 (기본값: 2.5).\n- C1 및 C2는 대기의 영향을 최소화하기 위한 계수입니다 (기본값: 각각 6 및 7.5).\n- L은 수관 배경 조정 요소입니다 (기본값: 1).\n\n값의 범위: EVI 값은 일반적으로 -1에서 1 사이의 범위를 갖습니다.\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- 높은 값은 밀도가 높은 식물을 나타냅니다.\n- 0 또는 음수에 가까운 값은 비식물 또는 희소식물이 자리 잡은 지역을 나타냅니다.\n\n## 응용:\n\n- 식물 모니터링: EVI는 식물 동태를 모니터링하는 데 널리 사용되며 성장 패턴, 건강 평가, 그리고 환경 요소 또는 인간 활동으로 인한 변화 감지에 도움이 됩니다.\n- 토지 이용 및 토지 피복 매핑: 특히 식물로 지배되는 토지 이용 유형을 매핑하고 분류하는 데 도움이 됩니다.\n- 생태학 연구: 식물 분포를 분석하는 데 유용하며, 생물 다양성 평가 및 서식지 매핑에 활용됩니다.\n\n## 장점:\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n- 민감도 향상: NDVI와 비교하여 밀집 식물 지역의 변화에 대한 감도를 향상시켰습니다.\n- 대기 보정: 대기 간섭을 줄이기 위한 계수를 포함하여 대기 보정을 통해 전 세계 및 지역 규모의 응용 프로그램에 더 견고하게 만들었습니다.\n\n## 고려 사항:\n\n- 데이터 요구 사항: 일반적으로 중고해상도 위성 플랫폼에서 널리 사용되는 빨강, NIR 및 파랑 밴드를 갖춘 다중 스펙트럼 위성 영상이 필요합니다.\n- 매개변수 민감도: 계수 G, C1, C2 및 L의 선택에 민감하며 특정 환경 조건 및 연구 목표에 따라 조정이 필요할 수 있습니다.\n\n## 선행 조건:\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n이 여정에서는 다음을 설치해야 합니다:\n\n- Python 3.10+\n- 시각화를 위한 QGIS 3.X.X +\n\n또한 다음이 필요합니다:\n\n- Copernicus 사이트에서 다운로드할 데이터 세트. 2024년 2월 27일 센티넬 2 2A 이미지로 작업할 예정입니다 (이미지 참조: T36QUL_20240227T082911).\n- Copernicus 플랫폼에서 다운로드할 수 있습니다; 데이터 다운로드에 대한 문서를 확인할 수 있습니다.\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n# Sentinel-2 데이터를 활용한 실제 적용:\n\n## 1. 저장소 복제\n\n분류 스크립트 및 학습 샘플을 가져오세요:\n\n```js\ngit clone https://github.com/kokatic/remote_sensing\n```\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n이렇게 작성하시면 됩니다 :\n\n\n\u003cimg src=\"/TIL/assets/img/2024-07-14-ProduceEVImapswithPythonSentinel2Data_1.png\" /\u003e\n\n내 레포지토리(/data/)에 데이터 폴더를 추가했습니다. 이 폴더에는 2024년 4월 30일 에르 우에드 지역의 Sentinel-2 데이터가 포함되어 있습니다. 기준 이미지는 T32SKC_20240430T102021이며, 밴드 4와 8을 포함하고 있습니다.\n\n## 2. 가상 환경 생성 및 필수 모듈 설치\n\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n현재 작업 폴더 디렉토리에서 명령 줄 인터페이스를 엽니다:\n\n```js\npython -m venv venv\n```\n\n그런 다음 가상 환경을 활성화합니다:\n\nWindows용 (CMD)에서:\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n\nvenv\\Scripts\\activate # Linux의 경우: source venv/bin/activate\n\n\n필요한 패키지 설치 후:\n\n\npip install -r requirements.txt\n\n\n## 3. 스크립트 실행\n\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n동일한 폴더에서 스크립트를 실행하려면 터미널 또는 명령 프롬프트를 열고 스크립트가 있는 폴더로 이동한 다음 다음 명령을 실행하세요:\n\n```js\nimport rasterio\nimport numpy as np\n\ndef calculate_evi(red_band_path, nir_band_path, blue_band_path, output_path):\n    try:\n        # rasterio 데이터셋으로 빨간색, NIR, 파란색 밴드 열기\n        with rasterio.open(red_band_path) as red_dataset, \\\n             rasterio.open(nir_band_path) as nir_dataset, \\\n             rasterio.open(blue_band_path) as blue_dataset:\n\n            # rasterio 데이터셋에서 데이터 읽기\n            red = red_dataset.read(1, masked=True).astype('float32')\n            nir = nir_dataset.read(1, masked=True).astype('float32')\n            blue = blue_dataset.read(1, masked=True).astype('float32')\n\n            # EVI 계산\n            G = 2.5\n            C1 = 6\n            C2 = 7.5\n            L = 1\n            epsilon = 1e-6  # 0으로 나누기를 피하기 위한 작은 엡실론 값\n            denominator = nir + C1 * red - C2 * blue + L\n            evi = np.where(denominator != 0, G * ((nir - red) / denominator), np.nan)\n\n            # EVI 값을 [-1, 1] 범위로 클리핑\n            evi = np.clip(evi, -1, 1)\n\n            # EVI 출력을 위한 프로필 업데이트\n            profile = red_dataset.profile\n            profile.update(dtype=rasterio.float32, count=1, compress='lzw')\n\n            # 새 GeoTIFF 파일에 EVI 결과 작성\n            with rasterio.open(output_path, 'w', **profile) as dst:\n                dst.write(evi.astype(np.float32), 1)\n\n    except Exception as e:\n        print(f\"오류가 발생했습니다: {e}\")\n\n# 예시 파일 경로\nred_band_path = 'data/Toshka/S2A_MSIL2A_20240227T082911/T36QUL_20240227T082911_B04_10m.jp2'  # 빨간색 밴드\nnir_band_path = 'data/Toshka/S2A_MSIL2A_20240227T082911/T36QUL_20240227T082911_B08_10m.jp2'  # 근적외선 밴드\nblue_band_path = 'data/Toshka/S2A_MSIL2A_20240227T082911/T36QUL_20240227T082911_B02_10m.jp2'  # 파란색 밴드\noutput_path = 'output/evi.tif'  # EVI 출력 파일\n\ncalculate_evi(red_band_path, nir_band_path, blue_band_path, output_path)\n```\n\n스크립트를 실행한 후 output/ 폴더에 EVI 출력물을 찾을 수 있습니다:\n\n![EVI 출력물](/TIL/assets/img/2024-07-14-ProduceEVImapswithPythonSentinel2Data_2.png)\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n3- 결과 확인: 시각화와 분석\n\n- EVI 출력 파일 (evi.tif)을 QGIS에 로드합니다.\n- 더 밀집한 식물 상층을 나타내는 더 높은 EVI 값의 시각화를 위해 적합한 컬러 팔레트를 적용합니다.\n- EVI 값에 기반하여 관심 영역을 강조하기 위해 시각화 설정을 조정하여 식물 건강 평가 및 토지 피복 맵핑을 지원합니다.\n\n![이미지1](/TIL/assets/img/2024-07-14-ProduceEVImapswithPythonSentinel2Data_3.png)\n\n![이미지2](/TIL/assets/img/2024-07-14-ProduceEVImapswithPythonSentinel2Data_4.png)\n\n\u003c!-- TIL 수평 --\u003e\n\u003cins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n# 결론\n\n요약하자면, 향상된 식물지수(EVI)는 원격 감지 응용 프로그램에 강력한 도구로, 식물 역학 및 건강 평가에 대한 감도를 향상시켜줍니다. Sentinel-2 위성 이미지와 Python 및 QGIS와 같은 컴퓨터 도구를 활용하여 연구원 및 실무자는 효과적으로 식물 변화를 모니터링하고 토지 피복 유형을 분류하며 생태학 연구 및 환경 관리에 기여할 수 있습니다. 더 자세한 내용이나 문의 사항이 있으시면 언제든지 댓글을 남기거나 직접 연락해주세요.\n\n# 팔로우\n\n- 내 랜딩 페이지\n- 내 Youtube 채널\n- 내 SaaS 서비스\n- 내 GitHub","ogImage":{"url":"/TIL/assets/img/2024-07-14-ProduceEVImapswithPythonSentinel2Data_0.png"},"coverImage":"/TIL/assets/img/2024-07-14-ProduceEVImapswithPythonSentinel2Data_0.png","tag":["Tech"],"readingTime":8},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003ch1\u003eTL;TR\u003c/h1\u003e\n\u003cp\u003e증강 식물 지수 (EVI)는 원격 감지에서 널리 사용되는 분광 지수로, 위성 영상을 통해 식물 건강 및 영역을 평가하는 데 사용됩니다. 일반화된 차이 식물 지수 (NDVI)를 개선하여 대기 영향을 최소화하고 수관 구조 변화 및 밀집 식물 지역에 대한 민감도를 향상시켰습니다.\u003c/p\u003e\n\u003ch2\u003eEVI의 주요 특징:\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e식물에 대한 민감도: EVI는 대기 영향을 최소화하고 수관 특성에 대한 민감도를 증가시킴으로써 특히 밀집 식물 지역에서 효과적으로 작동하도록 설계되었습니다.\u003c/li\u003e\n\u003cli\u003e공식: EVI 공식은 빨강, 근적외선 (NIR), 파랑 분광대를 포함하여 식물에 대한 민감도를 개선합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cimg src=\"/TIL/assets/img/2024-07-14-ProduceEVImapswithPythonSentinel2Data_0.png\"\u003e\n\u003cp\u003e여기서:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eNIR은 근적외선 대역의 반사율입니다.\u003c/li\u003e\n\u003cli\u003eRed는 빨간 대역의 반사율입니다.\u003c/li\u003e\n\u003cli\u003eBlue는 파란 대역의 반사율입니다.\u003c/li\u003e\n\u003cli\u003eG는 이득 요소입니다 (기본값: 2.5).\u003c/li\u003e\n\u003cli\u003eC1 및 C2는 대기의 영향을 최소화하기 위한 계수입니다 (기본값: 각각 6 및 7.5).\u003c/li\u003e\n\u003cli\u003eL은 수관 배경 조정 요소입니다 (기본값: 1).\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e값의 범위: EVI 값은 일반적으로 -1에서 1 사이의 범위를 갖습니다.\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003e높은 값은 밀도가 높은 식물을 나타냅니다.\u003c/li\u003e\n\u003cli\u003e0 또는 음수에 가까운 값은 비식물 또는 희소식물이 자리 잡은 지역을 나타냅니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e응용:\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e식물 모니터링: EVI는 식물 동태를 모니터링하는 데 널리 사용되며 성장 패턴, 건강 평가, 그리고 환경 요소 또는 인간 활동으로 인한 변화 감지에 도움이 됩니다.\u003c/li\u003e\n\u003cli\u003e토지 이용 및 토지 피복 매핑: 특히 식물로 지배되는 토지 이용 유형을 매핑하고 분류하는 데 도움이 됩니다.\u003c/li\u003e\n\u003cli\u003e생태학 연구: 식물 분포를 분석하는 데 유용하며, 생물 다양성 평가 및 서식지 매핑에 활용됩니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e장점:\u003c/h2\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cul\u003e\n\u003cli\u003e민감도 향상: NDVI와 비교하여 밀집 식물 지역의 변화에 대한 감도를 향상시켰습니다.\u003c/li\u003e\n\u003cli\u003e대기 보정: 대기 간섭을 줄이기 위한 계수를 포함하여 대기 보정을 통해 전 세계 및 지역 규모의 응용 프로그램에 더 견고하게 만들었습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e고려 사항:\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e데이터 요구 사항: 일반적으로 중고해상도 위성 플랫폼에서 널리 사용되는 빨강, NIR 및 파랑 밴드를 갖춘 다중 스펙트럼 위성 영상이 필요합니다.\u003c/li\u003e\n\u003cli\u003e매개변수 민감도: 계수 G, C1, C2 및 L의 선택에 민감하며 특정 환경 조건 및 연구 목표에 따라 조정이 필요할 수 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e선행 조건:\u003c/h2\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e이 여정에서는 다음을 설치해야 합니다:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ePython 3.10+\u003c/li\u003e\n\u003cli\u003e시각화를 위한 QGIS 3.X.X +\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e또한 다음이 필요합니다:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eCopernicus 사이트에서 다운로드할 데이터 세트. 2024년 2월 27일 센티넬 2 2A 이미지로 작업할 예정입니다 (이미지 참조: T36QUL_20240227T082911).\u003c/li\u003e\n\u003cli\u003eCopernicus 플랫폼에서 다운로드할 수 있습니다; 데이터 다운로드에 대한 문서를 확인할 수 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch1\u003eSentinel-2 데이터를 활용한 실제 적용:\u003c/h1\u003e\n\u003ch2\u003e1. 저장소 복제\u003c/h2\u003e\n\u003cp\u003e분류 스크립트 및 학습 샘플을 가져오세요:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003egit clone \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//github.com/kokatic/remote_sensing\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e이렇게 작성하시면 됩니다 :\u003c/p\u003e\n\u003cimg src=\"/TIL/assets/img/2024-07-14-ProduceEVImapswithPythonSentinel2Data_1.png\"\u003e\n\u003cp\u003e내 레포지토리(/data/)에 데이터 폴더를 추가했습니다. 이 폴더에는 2024년 4월 30일 에르 우에드 지역의 Sentinel-2 데이터가 포함되어 있습니다. 기준 이미지는 T32SKC_20240430T102021이며, 밴드 4와 8을 포함하고 있습니다.\u003c/p\u003e\n\u003ch2\u003e2. 가상 환경 생성 및 필수 모듈 설치\u003c/h2\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e현재 작업 폴더 디렉토리에서 명령 줄 인터페이스를 엽니다:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003epython -m venv venv\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e그런 다음 가상 환경을 활성화합니다:\u003c/p\u003e\n\u003cp\u003eWindows용 (CMD)에서:\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003evenv\\Scripts\\activate # Linux의 경우: source venv/bin/activate\u003c/p\u003e\n\u003cp\u003e필요한 패키지 설치 후:\u003c/p\u003e\n\u003cp\u003epip install -r requirements.txt\u003c/p\u003e\n\u003ch2\u003e3. 스크립트 실행\u003c/h2\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e동일한 폴더에서 스크립트를 실행하려면 터미널 또는 명령 프롬프트를 열고 스크립트가 있는 폴더로 이동한 다음 다음 명령을 실행하세요:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e rasterio\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e numpy \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e np\n\ndef \u003cspan class=\"hljs-title function_\"\u003ecalculate_evi\u003c/span\u003e(red_band_path, nir_band_path, blue_band_path, output_path):\n    \u003cspan class=\"hljs-attr\"\u003etry\u003c/span\u003e:\n        # rasterio 데이터셋으로 빨간색, \u003cspan class=\"hljs-variable constant_\"\u003eNIR\u003c/span\u003e, 파란색 밴드 열기\n        \u003cspan class=\"hljs-keyword\"\u003ewith\u003c/span\u003e rasterio.\u003cspan class=\"hljs-title function_\"\u003eopen\u003c/span\u003e(red_band_path) \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e red_dataset, \\\n             rasterio.\u003cspan class=\"hljs-title function_\"\u003eopen\u003c/span\u003e(nir_band_path) \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e nir_dataset, \\\n             rasterio.\u003cspan class=\"hljs-title function_\"\u003eopen\u003c/span\u003e(blue_band_path) \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eblue_dataset\u003c/span\u003e:\n\n            # rasterio 데이터셋에서 데이터 읽기\n            red = red_dataset.\u003cspan class=\"hljs-title function_\"\u003eread\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, masked=\u003cspan class=\"hljs-title class_\"\u003eTrue\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003eastype\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'float32'\u003c/span\u003e)\n            nir = nir_dataset.\u003cspan class=\"hljs-title function_\"\u003eread\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, masked=\u003cspan class=\"hljs-title class_\"\u003eTrue\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003eastype\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'float32'\u003c/span\u003e)\n            blue = blue_dataset.\u003cspan class=\"hljs-title function_\"\u003eread\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, masked=\u003cspan class=\"hljs-title class_\"\u003eTrue\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003eastype\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'float32'\u003c/span\u003e)\n\n            # \u003cspan class=\"hljs-variable constant_\"\u003eEVI\u003c/span\u003e 계산\n            G = \u003cspan class=\"hljs-number\"\u003e2.5\u003c/span\u003e\n            \u003cspan class=\"hljs-variable constant_\"\u003eC1\u003c/span\u003e = \u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e\n            \u003cspan class=\"hljs-variable constant_\"\u003eC2\u003c/span\u003e = \u003cspan class=\"hljs-number\"\u003e7.5\u003c/span\u003e\n            L = \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\n            epsilon = \u003cspan class=\"hljs-number\"\u003e1e-6\u003c/span\u003e  # \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e으로 나누기를 피하기 위한 작은 엡실론 값\n            denominator = nir + \u003cspan class=\"hljs-variable constant_\"\u003eC1\u003c/span\u003e * red - \u003cspan class=\"hljs-variable constant_\"\u003eC2\u003c/span\u003e * blue + L\n            evi = np.\u003cspan class=\"hljs-title function_\"\u003ewhere\u003c/span\u003e(denominator != \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, G * ((nir - red) / denominator), np.\u003cspan class=\"hljs-property\"\u003enan\u003c/span\u003e)\n\n            # \u003cspan class=\"hljs-variable constant_\"\u003eEVI\u003c/span\u003e 값을 [-\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e] 범위로 클리핑\n            evi = np.\u003cspan class=\"hljs-title function_\"\u003eclip\u003c/span\u003e(evi, -\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)\n\n            # \u003cspan class=\"hljs-variable constant_\"\u003eEVI\u003c/span\u003e 출력을 위한 프로필 업데이트\n            profile = red_dataset.\u003cspan class=\"hljs-property\"\u003eprofile\u003c/span\u003e\n            profile.\u003cspan class=\"hljs-title function_\"\u003eupdate\u003c/span\u003e(dtype=rasterio.\u003cspan class=\"hljs-property\"\u003efloat32\u003c/span\u003e, count=\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, compress=\u003cspan class=\"hljs-string\"\u003e'lzw'\u003c/span\u003e)\n\n            # 새 \u003cspan class=\"hljs-title class_\"\u003eGeoTIFF\u003c/span\u003e 파일에 \u003cspan class=\"hljs-variable constant_\"\u003eEVI\u003c/span\u003e 결과 작성\n            \u003cspan class=\"hljs-keyword\"\u003ewith\u003c/span\u003e rasterio.\u003cspan class=\"hljs-title function_\"\u003eopen\u003c/span\u003e(output_path, \u003cspan class=\"hljs-string\"\u003e'w'\u003c/span\u003e, **profile) \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003edst\u003c/span\u003e:\n                dst.\u003cspan class=\"hljs-title function_\"\u003ewrite\u003c/span\u003e(evi.\u003cspan class=\"hljs-title function_\"\u003eastype\u003c/span\u003e(np.\u003cspan class=\"hljs-property\"\u003efloat32\u003c/span\u003e), \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)\n\n    except \u003cspan class=\"hljs-title class_\"\u003eException\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ee\u003c/span\u003e:\n        \u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(f\u003cspan class=\"hljs-string\"\u003e\"오류가 발생했습니다: {e}\"\u003c/span\u003e)\n\n# 예시 파일 경로\nred_band_path = \u003cspan class=\"hljs-string\"\u003e'data/Toshka/S2A_MSIL2A_20240227T082911/T36QUL_20240227T082911_B04_10m.jp2'\u003c/span\u003e  # 빨간색 밴드\nnir_band_path = \u003cspan class=\"hljs-string\"\u003e'data/Toshka/S2A_MSIL2A_20240227T082911/T36QUL_20240227T082911_B08_10m.jp2'\u003c/span\u003e  # 근적외선 밴드\nblue_band_path = \u003cspan class=\"hljs-string\"\u003e'data/Toshka/S2A_MSIL2A_20240227T082911/T36QUL_20240227T082911_B02_10m.jp2'\u003c/span\u003e  # 파란색 밴드\noutput_path = \u003cspan class=\"hljs-string\"\u003e'output/evi.tif'\u003c/span\u003e  # \u003cspan class=\"hljs-variable constant_\"\u003eEVI\u003c/span\u003e 출력 파일\n\n\u003cspan class=\"hljs-title function_\"\u003ecalculate_evi\u003c/span\u003e(red_band_path, nir_band_path, blue_band_path, output_path)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e스크립트를 실행한 후 output/ 폴더에 EVI 출력물을 찾을 수 있습니다:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/TIL/assets/img/2024-07-14-ProduceEVImapswithPythonSentinel2Data_2.png\" alt=\"EVI 출력물\"\u003e\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003cp\u003e3- 결과 확인: 시각화와 분석\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eEVI 출력 파일 (evi.tif)을 QGIS에 로드합니다.\u003c/li\u003e\n\u003cli\u003e더 밀집한 식물 상층을 나타내는 더 높은 EVI 값의 시각화를 위해 적합한 컬러 팔레트를 적용합니다.\u003c/li\u003e\n\u003cli\u003eEVI 값에 기반하여 관심 영역을 강조하기 위해 시각화 설정을 조정하여 식물 건강 평가 및 토지 피복 맵핑을 지원합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"/TIL/assets/img/2024-07-14-ProduceEVImapswithPythonSentinel2Data_3.png\" alt=\"이미지1\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/TIL/assets/img/2024-07-14-ProduceEVImapswithPythonSentinel2Data_4.png\" alt=\"이미지2\"\u003e\u003c/p\u003e\n\u003c!-- TIL 수평 --\u003e\n\u003cp\u003e\u003cins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"\u003e\u003c/ins\u003e\u003c/p\u003e\n\u003cscript\u003e\n(adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\u003ch1\u003e결론\u003c/h1\u003e\n\u003cp\u003e요약하자면, 향상된 식물지수(EVI)는 원격 감지 응용 프로그램에 강력한 도구로, 식물 역학 및 건강 평가에 대한 감도를 향상시켜줍니다. Sentinel-2 위성 이미지와 Python 및 QGIS와 같은 컴퓨터 도구를 활용하여 연구원 및 실무자는 효과적으로 식물 변화를 모니터링하고 토지 피복 유형을 분류하며 생태학 연구 및 환경 관리에 기여할 수 있습니다. 더 자세한 내용이나 문의 사항이 있으시면 언제든지 댓글을 남기거나 직접 연락해주세요.\u003c/p\u003e\n\u003ch1\u003e팔로우\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e내 랜딩 페이지\u003c/li\u003e\n\u003cli\u003e내 Youtube 채널\u003c/li\u003e\n\u003cli\u003e내 SaaS 서비스\u003c/li\u003e\n\u003cli\u003e내 GitHub\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-07-14-ProduceEVImapswithPythonSentinel2Data"},"buildId":"o6AmBAY_j9v9JmbaRA39X","assetPrefix":"/TIL","isFallback":false,"gsp":true,"scriptLoader":[{"async":true,"src":"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4877378276818686","strategy":"lazyOnload","crossOrigin":"anonymous"}]}</script></body></html>