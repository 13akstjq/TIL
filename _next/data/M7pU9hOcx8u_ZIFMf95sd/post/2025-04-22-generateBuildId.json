{"pageProps":{"post":{"title":"Next.js 15에서 generateBuildId로 빌드 ID 커스텀하는 방법 완벽 가이드","description":"","date":"2025-04-22 13:08","slug":"2025-04-22-generateBuildId","content":"\n\n# generateBuildId\n\nNext.js는 `next build`를 할 때 앱 버전을 구분하기 위해 고유한 빌드 ID(build ID)를 자동으로 생성해요. 이 빌드 ID는 여러 컨테이너가 같은 버전의 앱을 실행하도록 보장하는 역할을 하죠.\n\n근데 환경마다(예: 개발, 스테이징, 프로덕션) 빌드를 다시 할 때마다 빌드 ID가 달라지면, 여러 컨테이너에서 같은 버전을 쓰는 게 어렵습니다. 그래서 이럴 땐 `generateBuildId` 함수를 사용해서 의도적으로 **일관된 빌드 ID**를 만들어주면 좋아요.\n\n`next.config.js`에 다음처럼 작성하면, 환경 변수에 담긴 최신 Git 커밋 해시(GIT_HASH)를 빌드 ID로 사용할 수 있어요:\n\n```js\nmodule.exports = {\n  generateBuildId: async () => {\n    // 최신 git 커밋 해시를 빌드 ID로 사용\n    return process.env.GIT_HASH\n  },\n}\n```\n\n### 추가 팁\n- Git 해시 말고도 환경 변수, 날짜, 혹은 커스텀한 문자열을 조합해서 빌드 ID를 만들어도 좋아요.\n- 이렇게 빌드 ID를 고정하면 CI/CD 파이프라인에서 배포 자동화할 때 같은 버전을 안전하게 여러 서버에 배포 가능하답니다.\n- `generateBuildId` 함수는 비동기 함수로도 작성할 수 있어서, 필요하면 API 호출을 해서 받아오는 빌드 ID도 활용할 수 있어요.\n\nNext.js 앱을 여러 환경에 안정적으로 배포할 때 꼭 기억해두세요!","ogImage":{"url":"/TIL/assets/img/nextjs.png"},"coverImage":"/TIL/assets/img/nextjs.png","tag":["Tech"],"readingTime":1},"content":"<!doctype html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<meta content=\"width=device-width, initial-scale=1\" name=\"viewport\">\n</head>\n<body>\n<h1>generateBuildId</h1>\n<p>Next.js는 <code>next build</code>를 할 때 앱 버전을 구분하기 위해 고유한 빌드 ID(build ID)를 자동으로 생성해요. 이 빌드 ID는 여러 컨테이너가 같은 버전의 앱을 실행하도록 보장하는 역할을 하죠.</p>\n<p>근데 환경마다(예: 개발, 스테이징, 프로덕션) 빌드를 다시 할 때마다 빌드 ID가 달라지면, 여러 컨테이너에서 같은 버전을 쓰는 게 어렵습니다. 그래서 이럴 땐 <code>generateBuildId</code> 함수를 사용해서 의도적으로 <strong>일관된 빌드 ID</strong>를 만들어주면 좋아요.</p>\n<p><code>next.config.js</code>에 다음처럼 작성하면, 환경 변수에 담긴 최신 Git 커밋 해시(GIT_HASH)를 빌드 ID로 사용할 수 있어요:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-variable language_\">module</span>.<span class=\"hljs-property\">exports</span> = {\n  <span class=\"hljs-attr\">generateBuildId</span>: <span class=\"hljs-keyword\">async</span> () => {\n    <span class=\"hljs-comment\">// 최신 git 커밋 해시를 빌드 ID로 사용</span>\n    <span class=\"hljs-keyword\">return</span> process.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">GIT_HASH</span>\n  },\n}\n</code></pre>\n<h3>추가 팁</h3>\n<ul>\n<li>Git 해시 말고도 환경 변수, 날짜, 혹은 커스텀한 문자열을 조합해서 빌드 ID를 만들어도 좋아요.</li>\n<li>이렇게 빌드 ID를 고정하면 CI/CD 파이프라인에서 배포 자동화할 때 같은 버전을 안전하게 여러 서버에 배포 가능하답니다.</li>\n<li><code>generateBuildId</code> 함수는 비동기 함수로도 작성할 수 있어서, 필요하면 API 호출을 해서 받아오는 빌드 ID도 활용할 수 있어요.</li>\n</ul>\n<p>Next.js 앱을 여러 환경에 안정적으로 배포할 때 꼭 기억해두세요!</p>\n</body>\n</html>\n"},"__N_SSG":true}