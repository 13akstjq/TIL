{"pageProps":{"post":{"title":"FastAPI μ• ν”λ¦¬μΌ€μ΄μ…μ—μ„ Server-Sent EventSSE μ‚¬μ© λ°©λ²•","description":"","date":"2024-07-09 09:22","slug":"2024-07-09-Server-SentEventSSEinFastAPIApplications","content":"\n\nμ„λ²„ μ „μ†΅ μ΄λ²¤νΈ(Server-Sent Events, SSE)λ” μ„λ²„κ°€ μ‹±κΈ€ HTTP μ—°κ²°μ„ ν†µν•΄ μ›Ή ν΄λΌμ΄μ–ΈνΈμ— μ‹¤μ‹κ°„ μ—…λ°μ΄νΈλ¥Ό ν‘Έμ‹ν•  μ μλ” μ„λ²„ ν‘Έμ‹ κΈ°μ μ…λ‹λ‹¤. λ€μ‹λ³΄λ“, μ•λ¦Ό λλ” μ‹¤μ‹κ°„ λ¶„μ„κ³Ό κ°™μ΄ μ‹¤μ‹κ°„ μ—…λ°μ΄νΈκ°€ ν•„μ”ν• μ• ν”λ¦¬μΌ€μ΄μ…μ— νΉν μ μ©ν•©λ‹λ‹¤.\n\n![SSE](/assets/img/2024-07-09-Server-SentEventSSEinFastAPIApplications_0.png)\n\n## SSE μ†κ°\n\n- SSEλ” μ„λ²„κ°€ μ΄κΈ° ν΄λΌμ΄μ–ΈνΈ μ—°κ²°μ„ μ„¤μ •ν•μλ§μ λΈλΌμ°μ € ν΄λΌμ΄μ–ΈνΈλ΅ λ°μ΄ν„° μ „μ†΅μ„ μ‹μ‘ν•  μ μλ” ν‘μ¤€μ…λ‹λ‹¤.\n- μ›Ήμ†μΌ“κ³Ό λ‹¬λ¦¬ SSEλ” μ–‘λ°©ν–¥ ν†µμ‹ μ΄ μ•„λ‹ λ‹¨λ°©ν–¥μ΄λ©°, μ„λ²„μ—μ„ ν΄λΌμ΄μ–ΈνΈλ΅ λ°μ΄ν„°κ°€ νλ¦…λ‹λ‹¤.\n- μ΄λ΅μ¨ SSEλ” μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈλ΅ μ—…λ°μ΄νΈλ¥Ό ν‘Έμ‹ν•΄μ•Ό ν•λ” κ²½μ°μ— λ” κ°„λ‹¨ν• λ€μ•μ΄ λ©λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## μ™ SSEλ¥Ό μ‚¬μ©ν•΄μ•Ό ν•λ‚μ”?\n\nSSEλ” λ‹¤μκ³Ό κ°™μ€ μ‹λ‚λ¦¬μ¤μ—μ„ μ μ©ν•©λ‹λ‹¤:\n\n- μ‹¤μ‹κ°„ μ—…λ°μ΄νΈ: μ‹¤μ‹κ°„ μ—…λ°μ΄νΈλ¥Ό ν΄λΌμ΄μ–ΈνΈμ— ν‘Έμ‹ν•΄μ•Ό ν•λ” μ• ν”λ¦¬μΌ€μ΄μ…λ“¤, μλ¥Ό λ“¤μ–΄ μ‹¤μ‹κ°„ μ¤ν¬μΈ  μ μ, μ£Όμ‹ μ‹μ¥ μ—…λ°μ΄νΈ, λλ” μ±„ν… μ• ν”λ¦¬μΌ€μ΄μ… λ“±.\n- μ„λ²„ λ¨λ‹ν„°λ§ λ° λ€μ‹λ³΄λ“: μ‹¤μ‹κ°„ λ¨λ‹ν„°λ§ λ€μ‹λ³΄λ“λ” SSEλ¥Ό ν™μ©ν•μ—¬ ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„λ¥Ό κ³„μ† ν΄λ§ν•  ν•„μ” μ—†μ΄ λ©”νΈλ¦­ λ° μƒνƒλ¥Ό μ—…λ°μ΄νΈν•  μ μμµλ‹λ‹¤.\n- μ•λ¦Ό: μ„λ²„μ—μ„ λ³΄λ‚΄λ” μ•λ¦Όμ„ SSEλ΅ ν¨μ¨μ μΌλ΅ κ΄€λ¦¬ν•  μ μμ–΄μ„, ν΄λΌμ΄μ–ΈνΈ μΈ΅μ—μ„ μ§€μ†μ μΌλ΅ ν΄λ§ν•  ν•„μ”κ°€ μ¤„μ–΄λ“­λ‹λ‹¤.\n- μ¤νΈλ¦¬λ° λ°μ΄ν„°: λ€μ©λ‰ λ°μ΄ν„° μ„ΈνΈλ‚ λ΅κ·Έλ¥Ό μ‹¤μ‹κ°„μΌλ΅ μ¤νΈλ¦¬λ°ν•λ” κ²ƒμ„ SSEλ΅ κ°„λ‹¨ν•κ² κµ¬ν„ν•  μ μμµλ‹λ‹¤.\n\n# FastAPIμ—μ„ SSE κµ¬ν„ν•κΈ°\n\n<!-- TIL μν‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nFastAPIμ€ μ†λ„μ™€ μ‚¬μ© νΈμμ„±μΌλ΅ μ λ…ν•λ©°, sse-starlette λΌμ΄λΈλ¬λ¦¬μ™€ ν†µν•©ν•μ—¬ SSEλ¥Ό κµ¬ν„ν•λ” λ° μ μ‘λ™ν•©λ‹λ‹¤. λ‹¤μμ€ μ„¤μ • λ°©λ²•μ…λ‹λ‹¤.\n\n# μμ  κµ¬ν„\n\n## λ‹¨κ³„ 1: ν•„μ”ν• λΌμ΄λΈλ¬λ¦¬ μ„¤μΉ\n\nλ¨Όμ €, FastAPIμ™€ sse-starletteλ¥Ό μ„¤μΉν•μ„Έμ”:\n\n<!-- TIL μν‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\r\npip install fastapi sse-starlette\r\n```\n\n## Step 2: FastAPI μ• ν”λ¦¬μΌ€μ΄μ… μƒμ„±\n\n```js\r\nfrom fastapi import FastAPI\nfrom sse_starlette.sse import EventSourceResponse\nimport asyncio\n\napp = FastAPI()\nasync def event_generator():\n    while True:\n        await asyncio.sleep(1)\n        yield {\"data\": \"This is a server-sent event!\"}\n@app.get(\"/events\")\nasync def sse_endpoint():\n    return EventSourceResponse(event_generator())\r\n```\n\nμ΄ μμ‹μ—μ„ event_generatorλ” λ§¤ μ΄λ§λ‹¤ μƒ μ΄λ²¤νΈλ¥Ό μƒμ„±ν•λ” λΉ„λ™κΈ° μƒμ„±μμ…λ‹λ‹¤. sse_endpoint μ—”λ“ν¬μΈνΈλ” EventSourceResponseλ¥Ό μ‚¬μ©ν•μ—¬ SSE μ—°κ²°μ„ μ²λ¦¬ν•©λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## FastAPIμ—μ„ SSE μ‚¬μ© μ‚¬λ΅€\n\n- λ€μ‹λ³΄λ“μ© μ‹¤μ‹κ°„ μ—…λ°μ΄νΈ:\n\n  - SSEλ” λ¨λ‹ν„°λ§ μ‹μ¤ν…μ΄λ‚ μ‹¤μ‹κ°„ λ¶„μ„ λ€μ‹λ³΄λ“μ™€ κ°™μ€ μ‹¤μ‹κ°„ λ©”νΈλ¦­μ„ ν‘μ‹ν•λ” μ• ν”λ¦¬μΌ€μ΄μ…μ— λ³µμ΅ν• WebSocket κ΄€λ¦¬ μ—†μ΄ μ—…λ°μ΄νΈλ¥Ό ν‘Έμ‹ν•λ” κ°„λ‹¨ν• λ°©λ²•μ„ μ κ³µν•©λ‹λ‹¤.\n\n- μ‹¤μ‹κ°„ μ•λ¦Ό:\n\n<!-- TIL μν‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- μ‚¬μ©μμ—κ² μ΄λ²¤νΈ μ•λ¦Όμ΄ ν•„μ”ν• μ• ν”λ¦¬μΌ€μ΄μ…(λ©”μ‹ μ € μ•±μ΄λ‚ μ•λ¦Ό μ‹μ¤ν…κ³Ό κ°™μ€)μ€ SSEλ¥Ό μ‚¬μ©ν•μ—¬ μ΄λ¬ν• μ—…λ°μ΄νΈλ¥Ό μ‹ μ†ν•κ² μ „λ‹¬ν•  μ μμµλ‹λ‹¤.\n\n- μ¤νΈλ¦¬λ° λ΅κ·Έ:\n\n- SSEλ” μ‹¤μ‹κ°„ λ΅κ·Έλ‚ κΈ°νƒ€ μ¤νΈλ¦¬λ° λ°μ΄ν„°λ¥Ό ν‘μ‹ν•΄μ•Ό ν•λ” μ• ν”λ¦¬μΌ€μ΄μ…μ— μ λ§λ” κ°€λ²Όμ΄ μ†”λ£¨μ…μ…λ‹λ‹¤.\n\n## SSEμ μ¥μ :\n\n<!-- TIL μν‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- κ°„νΈν•¨: SSEλ” μ›Ήμ†μΌ“μ— λΉ„ν•΄ κµ¬ν„κ³Ό κ΄€λ¦¬κ°€ κ°„λ‹¨ν•©λ‹λ‹¤.\n- μλ™ μ¬μ—°κ²°: λΈλΌμ°μ €κ°€ μλ™μΌλ΅ μ¬μ—°κ²°μ„ μ²λ¦¬ν•μ—¬ SSEκ°€ μ‹¤μ‹κ°„ μ—…λ°μ΄νΈμ— κ°•λ ¥ν•©λ‹λ‹¤.\n- HTTP νΈν™μ„±: SSEλ” ν‘μ¤€ HTTP/2 μ—°κ²°μ„ ν†µν•΄ μ‘λ™ν•λ―€λ΅ κΈ°μ΅΄ μΈν”„λΌμ™€ μ‘μ—…ν•κΈ° μ‰½μµλ‹λ‹¤.\n\n## SSE λ€μ•:\n\n- μ›Ήμ†μΌ“:\n\n- μ–‘λ°©ν–¥ ν†µμ‹ : μ–‘λ°©ν–¥ ν†µμ‹ μ΄ ν•„μ”ν• κ²½μ° μ›Ήμ†μΌ“μ„ μ„ νΈν•©λ‹λ‹¤.\n- λ‚®μ€ μ§€μ—° μ‹κ°„: μ›Ήμ†μΌ“μ€ SSEλ³΄λ‹¤ λ‚®μ€ μ§€μ—° μ‹κ°„μ„ μ κ³µν•μ—¬ μ¨λΌμΈ κ²μ„κ³Ό κ°™μ΄ λ§¤μ° μƒνΈμ‘μ©μ μΈ μ• ν”λ¦¬μΌ€μ΄μ…μ— μ ν•©ν•©λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- Long Polling:\n\n- νΈν™μ„±: Long pollingμ€ μ¤λλ λΈλΌμ°μ €μ™€ νΈν™λλ©° WebSocketsμ΄λ‚ SSEλ¥Ό μ§€μ›ν•μ§€ μ•λ” κ²½μ°μ— μ‚¬μ©ν•  μ μμµλ‹λ‹¤.\n- μ¤λ²„ν—¤λ“: λ°λ³µλ μ”μ²­μΌλ΅ μΈν•΄ SSEλ‚ WebSocketsμ— λΉ„ν•΄ λ” λ§μ€ μ¤λ²„ν—¤λ“λ¥Ό λ„μ…ν•©λ‹λ‹¤.\n\n# SSEμ ν„μ‹¤ μ„Έκ³„μ—μ„μ μ‚¬μ© μ‚¬λ΅€\n\nμ„λ²„-μ „μ†΅ μ΄λ²¤νΈ (SSE)λ” μ‹¤μ‹κ°„ μ—…λ°μ΄νΈλ¥Ό ν•„μ”λ΅ν•λ” ν„μ‹¤ μ„Έκ³„ μ• ν”λ¦¬μΌ€μ΄μ…μ—μ„ λ„λ¦¬ μ‚¬μ©λκ³  μμµλ‹λ‹¤. μ—¬κΈ°μ— λ‡ κ°€μ§€ μ£Όλ©ν•  λ§ν• μμ‹κ°€ μμµλ‹λ‹¤:\n\n<!-- TIL μν‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- λΌμ΄λΈ μ¤ν¬μΈ  μ¤μ½”μ–΄\n- μ£Όμ‹ μ‹μ¥ λ° κΈμµ λ°μ΄ν„°\n- μ†μ… λ―Έλ””μ–΄ ν”λ«νΌ λ“±λ“±..\n\nμ°λ¦¬λ” ESPNμ΄λ‚ BBC Sportsμ™€ κ°™μ΄ μ κ³µλλ” λΌμ΄λΈ μ¤ν¬μΈ  μ¤μ½”μ–΄ μ—…λ°μ΄νΈ μ• ν”λ¦¬μΌ€μ΄μ…μ μμ‹λ¥Ό λ” μμ„Έν μ‚΄ν΄λ³΄κ² μµλ‹λ‹¤.\n\nμ§„ν–‰ μ¤‘μΈ μ¶•κµ¬ κ²½κΈ°μ— λ€ν• μ‹¤μ‹κ°„ μ—…λ°μ΄νΈλ¥Ό μ κ³µν•λ” λΌμ΄λΈ μ¤ν¬μΈ  μ¤μ½”μ–΄ μ• ν”λ¦¬μΌ€μ΄μ…μ„ μƒμƒν•΄λ³΄μ„Έμ”. μ΄ μ• ν”λ¦¬μΌ€μ΄μ…μ€ κ³¨ λ“μ  λ° κ²½κΈ° ν†µκ³„μ™€ κ°™μ€ μ—…λ°μ΄νΈλ¥Ό μ κ³µν•΄μ•Ό ν•©λ‹λ‹¤. μ΄κ³³μ΄ [GitHub λ§ν¬](GitHub Link). \n\n## SSE κµ¬ν„\n\n<!-- TIL μν‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- μ„λ²„ μΈ΅ κµ¬ν„:\n\nμ•„λ νμΌμ€ κ²½κΈ° κ°μ”λ¥Ό ν¬ν•¨ν•κ³  μμµλ‹λ‹¤.\n\n```js\n// scores.py\n\n[\n    {\n        \"time\": \"00:01\",\n        \"scores\":\"1:0\",\n        \"event\": \"Goal! Team A scores!\"\n    },\n    {\n        \"time\": \"00:05\",\n        \"scores\":\"1:1\",\n        \"event\": \"Goal! Team B scores!\"\n    },\n    {\n        \"time\": \"00:10\",\n        \"scores\":\"2:1\",\n        \"event\": \"Goal! Team A scores again!\"\n    }\n]\n```\n\n- μ„λ²„λ” κ²½κΈ° λ°μ΄ν„°μ μ‹¤μ‹κ°„ ν”Όλ“λ¥Ό μ μ§€ν•λ©° SSEλ¥Ό μ‚¬μ©ν•μ—¬ μ—°κ²°λ ν΄λΌμ΄μ–ΈνΈμ—κ² μ „μ†΅ν•©λ‹λ‹¤.\n- μ–΄λ–¤ μ΄λ²¤νΈ(κ³¨, κµμ²΄ λ“±)κ°€ λ°μƒν•  λ•λ§λ‹¤, μ„λ²„λ” μ΄ μ—…λ°μ΄νΈλ¥Ό λ¨λ“  μ—°κ²°λ ν΄λΌμ΄μ–ΈνΈμ—κ² ν‘Έμ‹ν•©λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n\n# main.py\n\nfrom fastapi import FastAPI\nfrom sse_starlette.sse import EventSourceResponse\nimport asyncio\nimport json\n\napp = FastAPI()\n\nasync def event_generator():\n    with open(\"scores.json\", \"r\") as file:\n        scores = json.load(file)\n    for score in scores:\n        await asyncio.sleep(5)  \n        yield f\"Match Summary: {json.dumps(score)}\\n\\n\"\n\n@app.get(\"/live-scores\")\nasync def live_scores_endpoint():\n    return EventSourceResponse(event_generator())\n\n# Adding CORS middleware\nfrom fastapi.middleware.cors import CORSMiddleware\n\napp.add_middleware(\n    CORSMiddleware,\n    allow_origins=[\"*\"],\n    allow_credentials=True,\n    allow_methods=[\"*\"],\n    allow_headers=[\"*\"],\n)\n\n\nClient-Side Implementation:\n\n- μ›Ή μ‘μ© ν”„λ΅κ·Έλ¨μΈ ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ™€ SSE μ—°κ²°μ„ μ„¤μ •ν•κ³  μ—…λ°μ΄νΈλ¥Ό μμ‹ ν•©λ‹λ‹¤.\n\n```html\n<!-- index.html -->\n\n<!DOCTYPE html>\n<html>\n<head>\n    <title>Live Sports Scores</title>\n</head>\n<body>\n    <h1>Live Football Scores</h1>\n    <div id=\"score-updates\"></div>\n\n    <script>\n        const eventSource = new EventSource(\"http://127.0.0.1:8000/live-scores\");\n\n        eventSource.onmessage = function(event) {\n            const newElement = document.createElement(\"div\");\n            newElement.innerHTML = event.data;\n            document.getElementById(\"score-updates\").appendChild(newElement);\n        };\n\n        eventSource.onerror = function(event) {\n            console.error(\"EventSource failed:\", event);\n            eventSource.close();\n        };\n    </script>\n</body>\n</html>\n``` \n\n\n<!-- TIL μν‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## μ°Έκ³ \n\n- https://fastapi.tiangolo.com/\n- https://pypi.org/project/sse-starlette/\n\n# κ²°λ΅ \n\nsse-starletteλ¥Ό μ‚¬μ©ν•λ©΄ FastAPI μ• ν”λ¦¬μΌ€μ΄μ…μ— SSEλ¥Ό ν†µν•©ν•λ” κ²ƒμ΄ κ°„νΈν•κ³  ν¨μ¨μ μ…λ‹λ‹¤. μ‹¤μ‹κ°„ λ€μ‹λ³΄λ“, μ•λ¦Ό μ‹μ¤ν… λλ” λ°μ΄ν„° μ¤νΈλ¦¬λ° μ• ν”λ¦¬μΌ€μ΄μ…μ„ κ°λ° μ¤‘μ΄λ“ , SSEλ” κ²¬κ³ ν•κ³  κ°„νΈν• ν•΄κ²°μ±…μ„ μ κ³µν•©λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nμ½μ–΄ μ£Όμ…”μ„ κ°μ‚¬ν•©λ‹λ‹¤! λ§μΌ μ–΄λ– ν• μ¤λ¥λ¥Ό λ°κ²¬ν•μ‹κ±°λ‚ κ°μ„  μ μ•μ΄ μμΌμ‹λ‹¤λ©΄ μ•„λ λ“κΈ€μ— κ³µμ ν•΄ μ£Όμ„Έμ”.\n\nμ΄ κΈ€μ΄ λ§μμ— λ“¤μ—λ‹¤λ©΄ π‘ λ²„νΌμ„ λλ¬ λ‹¤λ¥Έ μ‚¬λλ“¤μ΄ λ°κ²¬ν•  μ μλ„λ΅ λ„μ™€μ£Όμ„Έμ”. GitHubμ—μ„ μ  ν”„λ΅ν•„μ„ ν”λ΅μ°ν•κ³  LinkedInμ—μ„ μ €μ™€ μ—°κ²°ν•΄λ„ κ΄μ°®μ•„μ”.","ogImage":{"url":"/assets/img/2024-07-09-Server-SentEventSSEinFastAPIApplications_0.png"},"coverImage":"/assets/img/2024-07-09-Server-SentEventSSEinFastAPIApplications_0.png","tag":["Tech"],"readingTime":9},"content":"<!doctype html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<meta content=\"width=device-width, initial-scale=1\" name=\"viewport\">\n</head>\n<body>\n<p>μ„λ²„ μ „μ†΅ μ΄λ²¤νΈ(Server-Sent Events, SSE)λ” μ„λ²„κ°€ μ‹±κΈ€ HTTP μ—°κ²°μ„ ν†µν•΄ μ›Ή ν΄λΌμ΄μ–ΈνΈμ— μ‹¤μ‹κ°„ μ—…λ°μ΄νΈλ¥Ό ν‘Έμ‹ν•  μ μλ” μ„λ²„ ν‘Έμ‹ κΈ°μ μ…λ‹λ‹¤. λ€μ‹λ³΄λ“, μ•λ¦Ό λλ” μ‹¤μ‹κ°„ λ¶„μ„κ³Ό κ°™μ΄ μ‹¤μ‹κ°„ μ—…λ°μ΄νΈκ°€ ν•„μ”ν• μ• ν”λ¦¬μΌ€μ΄μ…μ— νΉν μ μ©ν•©λ‹λ‹¤.</p>\n<p><img src=\"/assets/img/2024-07-09-Server-SentEventSSEinFastAPIApplications_0.png\" alt=\"SSE\"></p>\n<h2>SSE μ†κ°</h2>\n<ul>\n<li>SSEλ” μ„λ²„κ°€ μ΄κΈ° ν΄λΌμ΄μ–ΈνΈ μ—°κ²°μ„ μ„¤μ •ν•μλ§μ λΈλΌμ°μ € ν΄λΌμ΄μ–ΈνΈλ΅ λ°μ΄ν„° μ „μ†΅μ„ μ‹μ‘ν•  μ μλ” ν‘μ¤€μ…λ‹λ‹¤.</li>\n<li>μ›Ήμ†μΌ“κ³Ό λ‹¬λ¦¬ SSEλ” μ–‘λ°©ν–¥ ν†µμ‹ μ΄ μ•„λ‹ λ‹¨λ°©ν–¥μ΄λ©°, μ„λ²„μ—μ„ ν΄λΌμ΄μ–ΈνΈλ΅ λ°μ΄ν„°κ°€ νλ¦…λ‹λ‹¤.</li>\n<li>μ΄λ΅μ¨ SSEλ” μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈλ΅ μ—…λ°μ΄νΈλ¥Ό ν‘Έμ‹ν•΄μ•Ό ν•λ” κ²½μ°μ— λ” κ°„λ‹¨ν• λ€μ•μ΄ λ©λ‹λ‹¤.</li>\n</ul>\n<!-- TIL μν‰ -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<h2>μ™ SSEλ¥Ό μ‚¬μ©ν•΄μ•Ό ν•λ‚μ”?</h2>\n<p>SSEλ” λ‹¤μκ³Ό κ°™μ€ μ‹λ‚λ¦¬μ¤μ—μ„ μ μ©ν•©λ‹λ‹¤:</p>\n<ul>\n<li>μ‹¤μ‹κ°„ μ—…λ°μ΄νΈ: μ‹¤μ‹κ°„ μ—…λ°μ΄νΈλ¥Ό ν΄λΌμ΄μ–ΈνΈμ— ν‘Έμ‹ν•΄μ•Ό ν•λ” μ• ν”λ¦¬μΌ€μ΄μ…λ“¤, μλ¥Ό λ“¤μ–΄ μ‹¤μ‹κ°„ μ¤ν¬μΈ  μ μ, μ£Όμ‹ μ‹μ¥ μ—…λ°μ΄νΈ, λλ” μ±„ν… μ• ν”λ¦¬μΌ€μ΄μ… λ“±.</li>\n<li>μ„λ²„ λ¨λ‹ν„°λ§ λ° λ€μ‹λ³΄λ“: μ‹¤μ‹κ°„ λ¨λ‹ν„°λ§ λ€μ‹λ³΄λ“λ” SSEλ¥Ό ν™μ©ν•μ—¬ ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„λ¥Ό κ³„μ† ν΄λ§ν•  ν•„μ” μ—†μ΄ λ©”νΈλ¦­ λ° μƒνƒλ¥Ό μ—…λ°μ΄νΈν•  μ μμµλ‹λ‹¤.</li>\n<li>μ•λ¦Ό: μ„λ²„μ—μ„ λ³΄λ‚΄λ” μ•λ¦Όμ„ SSEλ΅ ν¨μ¨μ μΌλ΅ κ΄€λ¦¬ν•  μ μμ–΄μ„, ν΄λΌμ΄μ–ΈνΈ μΈ΅μ—μ„ μ§€μ†μ μΌλ΅ ν΄λ§ν•  ν•„μ”κ°€ μ¤„μ–΄λ“­λ‹λ‹¤.</li>\n<li>μ¤νΈλ¦¬λ° λ°μ΄ν„°: λ€μ©λ‰ λ°μ΄ν„° μ„ΈνΈλ‚ λ΅κ·Έλ¥Ό μ‹¤μ‹κ°„μΌλ΅ μ¤νΈλ¦¬λ°ν•λ” κ²ƒμ„ SSEλ΅ κ°„λ‹¨ν•κ² κµ¬ν„ν•  μ μμµλ‹λ‹¤.</li>\n</ul>\n<h1>FastAPIμ—μ„ SSE κµ¬ν„ν•κΈ°</h1>\n<!-- TIL μν‰ -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>FastAPIμ€ μ†λ„μ™€ μ‚¬μ© νΈμμ„±μΌλ΅ μ λ…ν•λ©°, sse-starlette λΌμ΄λΈλ¬λ¦¬μ™€ ν†µν•©ν•μ—¬ SSEλ¥Ό κµ¬ν„ν•λ” λ° μ μ‘λ™ν•©λ‹λ‹¤. λ‹¤μμ€ μ„¤μ • λ°©λ²•μ…λ‹λ‹¤.</p>\n<h1>μμ  κµ¬ν„</h1>\n<h2>λ‹¨κ³„ 1: ν•„μ”ν• λΌμ΄λΈλ¬λ¦¬ μ„¤μΉ</h2>\n<p>λ¨Όμ €, FastAPIμ™€ sse-starletteλ¥Ό μ„¤μΉν•μ„Έμ”:</p>\n<!-- TIL μν‰ -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<pre><code class=\"hljs language-js\">pip install fastapi sse-starlette\n</code></pre>\n<h2>Step 2: FastAPI μ• ν”λ¦¬μΌ€μ΄μ… μƒμ„±</h2>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">from</span> fastapi <span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">FastAPI</span>\n<span class=\"hljs-keyword\">from</span> sse_starlette.<span class=\"hljs-property\">sse</span> <span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">EventSourceResponse</span>\n<span class=\"hljs-keyword\">import</span> asyncio\n\napp = <span class=\"hljs-title class_\">FastAPI</span>()\n<span class=\"hljs-keyword\">async</span> def <span class=\"hljs-title function_\">event_generator</span>():\n    <span class=\"hljs-keyword\">while</span> <span class=\"hljs-title class_\">True</span>:\n        <span class=\"hljs-keyword\">await</span> asyncio.<span class=\"hljs-title function_\">sleep</span>(<span class=\"hljs-number\">1</span>)\n        <span class=\"hljs-keyword\">yield</span> {<span class=\"hljs-string\">\"data\"</span>: <span class=\"hljs-string\">\"This is a server-sent event!\"</span>}\n@app.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">\"/events\"</span>)\n<span class=\"hljs-keyword\">async</span> def <span class=\"hljs-title function_\">sse_endpoint</span>():\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">EventSourceResponse</span>(<span class=\"hljs-title function_\">event_generator</span>())\n</code></pre>\n<p>μ΄ μμ‹μ—μ„ event_generatorλ” λ§¤ μ΄λ§λ‹¤ μƒ μ΄λ²¤νΈλ¥Ό μƒμ„±ν•λ” λΉ„λ™κΈ° μƒμ„±μμ…λ‹λ‹¤. sse_endpoint μ—”λ“ν¬μΈνΈλ” EventSourceResponseλ¥Ό μ‚¬μ©ν•μ—¬ SSE μ—°κ²°μ„ μ²λ¦¬ν•©λ‹λ‹¤.</p>\n<!-- TIL μν‰ -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<h2>FastAPIμ—μ„ SSE μ‚¬μ© μ‚¬λ΅€</h2>\n<ul>\n<li>\n<p>λ€μ‹λ³΄λ“μ© μ‹¤μ‹κ°„ μ—…λ°μ΄νΈ:</p>\n<ul>\n<li>SSEλ” λ¨λ‹ν„°λ§ μ‹μ¤ν…μ΄λ‚ μ‹¤μ‹κ°„ λ¶„μ„ λ€μ‹λ³΄λ“μ™€ κ°™μ€ μ‹¤μ‹κ°„ λ©”νΈλ¦­μ„ ν‘μ‹ν•λ” μ• ν”λ¦¬μΌ€μ΄μ…μ— λ³µμ΅ν• WebSocket κ΄€λ¦¬ μ—†μ΄ μ—…λ°μ΄νΈλ¥Ό ν‘Έμ‹ν•λ” κ°„λ‹¨ν• λ°©λ²•μ„ μ κ³µν•©λ‹λ‹¤.</li>\n</ul>\n</li>\n<li>\n<p>μ‹¤μ‹κ°„ μ•λ¦Ό:</p>\n</li>\n</ul>\n<!-- TIL μν‰ -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<ul>\n<li>\n<p>μ‚¬μ©μμ—κ² μ΄λ²¤νΈ μ•λ¦Όμ΄ ν•„μ”ν• μ• ν”λ¦¬μΌ€μ΄μ…(λ©”μ‹ μ € μ•±μ΄λ‚ μ•λ¦Ό μ‹μ¤ν…κ³Ό κ°™μ€)μ€ SSEλ¥Ό μ‚¬μ©ν•μ—¬ μ΄λ¬ν• μ—…λ°μ΄νΈλ¥Ό μ‹ μ†ν•κ² μ „λ‹¬ν•  μ μμµλ‹λ‹¤.</p>\n</li>\n<li>\n<p>μ¤νΈλ¦¬λ° λ΅κ·Έ:</p>\n</li>\n<li>\n<p>SSEλ” μ‹¤μ‹κ°„ λ΅κ·Έλ‚ κΈ°νƒ€ μ¤νΈλ¦¬λ° λ°μ΄ν„°λ¥Ό ν‘μ‹ν•΄μ•Ό ν•λ” μ• ν”λ¦¬μΌ€μ΄μ…μ— μ λ§λ” κ°€λ²Όμ΄ μ†”λ£¨μ…μ…λ‹λ‹¤.</p>\n</li>\n</ul>\n<h2>SSEμ μ¥μ :</h2>\n<!-- TIL μν‰ -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<ul>\n<li>κ°„νΈν•¨: SSEλ” μ›Ήμ†μΌ“μ— λΉ„ν•΄ κµ¬ν„κ³Ό κ΄€λ¦¬κ°€ κ°„λ‹¨ν•©λ‹λ‹¤.</li>\n<li>μλ™ μ¬μ—°κ²°: λΈλΌμ°μ €κ°€ μλ™μΌλ΅ μ¬μ—°κ²°μ„ μ²λ¦¬ν•μ—¬ SSEκ°€ μ‹¤μ‹κ°„ μ—…λ°μ΄νΈμ— κ°•λ ¥ν•©λ‹λ‹¤.</li>\n<li>HTTP νΈν™μ„±: SSEλ” ν‘μ¤€ HTTP/2 μ—°κ²°μ„ ν†µν•΄ μ‘λ™ν•λ―€λ΅ κΈ°μ΅΄ μΈν”„λΌμ™€ μ‘μ—…ν•κΈ° μ‰½μµλ‹λ‹¤.</li>\n</ul>\n<h2>SSE λ€μ•:</h2>\n<ul>\n<li>\n<p>μ›Ήμ†μΌ“:</p>\n</li>\n<li>\n<p>μ–‘λ°©ν–¥ ν†µμ‹ : μ–‘λ°©ν–¥ ν†µμ‹ μ΄ ν•„μ”ν• κ²½μ° μ›Ήμ†μΌ“μ„ μ„ νΈν•©λ‹λ‹¤.</p>\n</li>\n<li>\n<p>λ‚®μ€ μ§€μ—° μ‹κ°„: μ›Ήμ†μΌ“μ€ SSEλ³΄λ‹¤ λ‚®μ€ μ§€μ—° μ‹κ°„μ„ μ κ³µν•μ—¬ μ¨λΌμΈ κ²μ„κ³Ό κ°™μ΄ λ§¤μ° μƒνΈμ‘μ©μ μΈ μ• ν”λ¦¬μΌ€μ΄μ…μ— μ ν•©ν•©λ‹λ‹¤.</p>\n</li>\n</ul>\n<!-- TIL μν‰ -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<ul>\n<li>\n<p>Long Polling:</p>\n</li>\n<li>\n<p>νΈν™μ„±: Long pollingμ€ μ¤λλ λΈλΌμ°μ €μ™€ νΈν™λλ©° WebSocketsμ΄λ‚ SSEλ¥Ό μ§€μ›ν•μ§€ μ•λ” κ²½μ°μ— μ‚¬μ©ν•  μ μμµλ‹λ‹¤.</p>\n</li>\n<li>\n<p>μ¤λ²„ν—¤λ“: λ°λ³µλ μ”μ²­μΌλ΅ μΈν•΄ SSEλ‚ WebSocketsμ— λΉ„ν•΄ λ” λ§μ€ μ¤λ²„ν—¤λ“λ¥Ό λ„μ…ν•©λ‹λ‹¤.</p>\n</li>\n</ul>\n<h1>SSEμ ν„μ‹¤ μ„Έκ³„μ—μ„μ μ‚¬μ© μ‚¬λ΅€</h1>\n<p>μ„λ²„-μ „μ†΅ μ΄λ²¤νΈ (SSE)λ” μ‹¤μ‹κ°„ μ—…λ°μ΄νΈλ¥Ό ν•„μ”λ΅ν•λ” ν„μ‹¤ μ„Έκ³„ μ• ν”λ¦¬μΌ€μ΄μ…μ—μ„ λ„λ¦¬ μ‚¬μ©λκ³  μμµλ‹λ‹¤. μ—¬κΈ°μ— λ‡ κ°€μ§€ μ£Όλ©ν•  λ§ν• μμ‹κ°€ μμµλ‹λ‹¤:</p>\n<!-- TIL μν‰ -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<ul>\n<li>λΌμ΄λΈ μ¤ν¬μΈ  μ¤μ½”μ–΄</li>\n<li>μ£Όμ‹ μ‹μ¥ λ° κΈμµ λ°μ΄ν„°</li>\n<li>μ†μ… λ―Έλ””μ–΄ ν”λ«νΌ λ“±λ“±..</li>\n</ul>\n<p>μ°λ¦¬λ” ESPNμ΄λ‚ BBC Sportsμ™€ κ°™μ΄ μ κ³µλλ” λΌμ΄λΈ μ¤ν¬μΈ  μ¤μ½”μ–΄ μ—…λ°μ΄νΈ μ• ν”λ¦¬μΌ€μ΄μ…μ μμ‹λ¥Ό λ” μμ„Έν μ‚΄ν΄λ³΄κ² μµλ‹λ‹¤.</p>\n<p>μ§„ν–‰ μ¤‘μΈ μ¶•κµ¬ κ²½κΈ°μ— λ€ν• μ‹¤μ‹κ°„ μ—…λ°μ΄νΈλ¥Ό μ κ³µν•λ” λΌμ΄λΈ μ¤ν¬μΈ  μ¤μ½”μ–΄ μ• ν”λ¦¬μΌ€μ΄μ…μ„ μƒμƒν•΄λ³΄μ„Έμ”. μ΄ μ• ν”λ¦¬μΌ€μ΄μ…μ€ κ³¨ λ“μ  λ° κ²½κΈ° ν†µκ³„μ™€ κ°™μ€ μ—…λ°μ΄νΈλ¥Ό μ κ³µν•΄μ•Ό ν•©λ‹λ‹¤. μ΄κ³³μ΄ [GitHub λ§ν¬](GitHub Link).</p>\n<h2>SSE κµ¬ν„</h2>\n<!-- TIL μν‰ -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<ul>\n<li>μ„λ²„ μΈ΅ κµ¬ν„:</li>\n</ul>\n<p>μ•„λ νμΌμ€ κ²½κΈ° κ°μ”λ¥Ό ν¬ν•¨ν•κ³  μμµλ‹λ‹¤.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// scores.py</span>\n\n[\n    {\n        <span class=\"hljs-string\">\"time\"</span>: <span class=\"hljs-string\">\"00:01\"</span>,\n        <span class=\"hljs-string\">\"scores\"</span>:<span class=\"hljs-string\">\"1:0\"</span>,\n        <span class=\"hljs-string\">\"event\"</span>: <span class=\"hljs-string\">\"Goal! Team A scores!\"</span>\n    },\n    {\n        <span class=\"hljs-string\">\"time\"</span>: <span class=\"hljs-string\">\"00:05\"</span>,\n        <span class=\"hljs-string\">\"scores\"</span>:<span class=\"hljs-string\">\"1:1\"</span>,\n        <span class=\"hljs-string\">\"event\"</span>: <span class=\"hljs-string\">\"Goal! Team B scores!\"</span>\n    },\n    {\n        <span class=\"hljs-string\">\"time\"</span>: <span class=\"hljs-string\">\"00:10\"</span>,\n        <span class=\"hljs-string\">\"scores\"</span>:<span class=\"hljs-string\">\"2:1\"</span>,\n        <span class=\"hljs-string\">\"event\"</span>: <span class=\"hljs-string\">\"Goal! Team A scores again!\"</span>\n    }\n]\n</code></pre>\n<ul>\n<li>μ„λ²„λ” κ²½κΈ° λ°μ΄ν„°μ μ‹¤μ‹κ°„ ν”Όλ“λ¥Ό μ μ§€ν•λ©° SSEλ¥Ό μ‚¬μ©ν•μ—¬ μ—°κ²°λ ν΄λΌμ΄μ–ΈνΈμ—κ² μ „μ†΅ν•©λ‹λ‹¤.</li>\n<li>μ–΄λ–¤ μ΄λ²¤νΈ(κ³¨, κµμ²΄ λ“±)κ°€ λ°μƒν•  λ•λ§λ‹¤, μ„λ²„λ” μ΄ μ—…λ°μ΄νΈλ¥Ό λ¨λ“  μ—°κ²°λ ν΄λΌμ΄μ–ΈνΈμ—κ² ν‘Έμ‹ν•©λ‹λ‹¤.</li>\n</ul>\n<!-- TIL μν‰ -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<h1>main.py</h1>\n<p>from fastapi import FastAPI\nfrom sse_starlette.sse import EventSourceResponse\nimport asyncio\nimport json</p>\n<p>app = FastAPI()</p>\n<p>async def event_generator():\nwith open(\"scores.json\", \"r\") as file:\nscores = json.load(file)\nfor score in scores:\nawait asyncio.sleep(5)<br>\nyield f\"Match Summary: {json.dumps(score)}\\n\\n\"</p>\n<p>@app.get(\"/live-scores\")\nasync def live_scores_endpoint():\nreturn EventSourceResponse(event_generator())</p>\n<h1>Adding CORS middleware</h1>\n<p>from fastapi.middleware.cors import CORSMiddleware</p>\n<p>app.add_middleware(\nCORSMiddleware,\nallow_origins=[\"<em>\"],\nallow_credentials=True,\nallow_methods=[\"</em>\"],\nallow_headers=[\"*\"],\n)</p>\n<p>Client-Side Implementation:</p>\n<ul>\n<li>μ›Ή μ‘μ© ν”„λ΅κ·Έλ¨μΈ ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ™€ SSE μ—°κ²°μ„ μ„¤μ •ν•κ³  μ—…λ°μ΄νΈλ¥Ό μμ‹ ν•©λ‹λ‹¤.</li>\n</ul>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-comment\">&#x3C;!-- index.html --></span>\n\n<span class=\"hljs-meta\">&#x3C;!DOCTYPE <span class=\"hljs-keyword\">html</span>></span>\n<span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">html</span>></span>\n<span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">head</span>></span>\n    <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">title</span>></span>Live Sports Scores<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">title</span>></span>\n<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">head</span>></span>\n<span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">body</span>></span>\n    <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">h1</span>></span>Live Football Scores<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">h1</span>></span>\n    <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">\"score-updates\"</span>></span><span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">div</span>></span>\n\n    <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">script</span>></span><span class=\"javascript\">\n        <span class=\"hljs-keyword\">const</span> eventSource = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">EventSource</span>(<span class=\"hljs-string\">\"http://127.0.0.1:8000/live-scores\"</span>);\n\n        eventSource.<span class=\"hljs-property\">onmessage</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">event</span>) {\n            <span class=\"hljs-keyword\">const</span> newElement = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">createElement</span>(<span class=\"hljs-string\">\"div\"</span>);\n            newElement.<span class=\"hljs-property\">innerHTML</span> = event.<span class=\"hljs-property\">data</span>;\n            <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">\"score-updates\"</span>).<span class=\"hljs-title function_\">appendChild</span>(newElement);\n        };\n\n        eventSource.<span class=\"hljs-property\">onerror</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">event</span>) {\n            <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">error</span>(<span class=\"hljs-string\">\"EventSource failed:\"</span>, event);\n            eventSource.<span class=\"hljs-title function_\">close</span>();\n        };\n    </span><span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">script</span>></span>\n<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">body</span>></span>\n<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">html</span>></span>\n</code></pre>\n<!-- TIL μν‰ -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<h2>μ°Έκ³ </h2>\n<ul>\n<li><a href=\"https://fastapi.tiangolo.com/\" rel=\"nofollow\" target=\"_blank\">https://fastapi.tiangolo.com/</a></li>\n<li><a href=\"https://pypi.org/project/sse-starlette/\" rel=\"nofollow\" target=\"_blank\">https://pypi.org/project/sse-starlette/</a></li>\n</ul>\n<h1>κ²°λ΅ </h1>\n<p>sse-starletteλ¥Ό μ‚¬μ©ν•λ©΄ FastAPI μ• ν”λ¦¬μΌ€μ΄μ…μ— SSEλ¥Ό ν†µν•©ν•λ” κ²ƒμ΄ κ°„νΈν•κ³  ν¨μ¨μ μ…λ‹λ‹¤. μ‹¤μ‹κ°„ λ€μ‹λ³΄λ“, μ•λ¦Ό μ‹μ¤ν… λλ” λ°μ΄ν„° μ¤νΈλ¦¬λ° μ• ν”λ¦¬μΌ€μ΄μ…μ„ κ°λ° μ¤‘μ΄λ“ , SSEλ” κ²¬κ³ ν•κ³  κ°„νΈν• ν•΄κ²°μ±…μ„ μ κ³µν•©λ‹λ‹¤.</p>\n<!-- TIL μν‰ -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>μ½μ–΄ μ£Όμ…”μ„ κ°μ‚¬ν•©λ‹λ‹¤! λ§μΌ μ–΄λ– ν• μ¤λ¥λ¥Ό λ°κ²¬ν•μ‹κ±°λ‚ κ°μ„  μ μ•μ΄ μμΌμ‹λ‹¤λ©΄ μ•„λ λ“κΈ€μ— κ³µμ ν•΄ μ£Όμ„Έμ”.</p>\n<p>μ΄ κΈ€μ΄ λ§μμ— λ“¤μ—λ‹¤λ©΄ π‘ λ²„νΌμ„ λλ¬ λ‹¤λ¥Έ μ‚¬λλ“¤μ΄ λ°κ²¬ν•  μ μλ„λ΅ λ„μ™€μ£Όμ„Έμ”. GitHubμ—μ„ μ  ν”„λ΅ν•„μ„ ν”λ΅μ°ν•κ³  LinkedInμ—μ„ μ €μ™€ μ—°κ²°ν•΄λ„ κ΄μ°®μ•„μ”.</p>\n</body>\n</html>\n"},"__N_SSG":true}