{"pageProps":{"post":{"title":"Next.js 15에서 Edge Runtime 사용하는 방법","description":"","date":"2025-04-22 13:41","slug":"2025-04-22-EdgeRuntime","content":"\n\n# Next.js Edge Runtime API 소개\n\nNext.js의 Edge Runtime은 Middleware 용으로 사용되며, 다양한 네트워크 관련 API를 지원합니다. 이걸 잘 활용하면 훨씬 가볍고 빠른 엣지 환경에서 코드를 실행할 수 있어요!\n\n아래는 Edge Runtime에서 지원하는 주요 네트워크 API들입니다.\n\n| API | 설명 |\n| --- | --- |\n| [Blob](https://developer.mozilla.org/docs/Web/API/Blob) | 바이너리 데이터 덩어리를 나타내는 객체입니다. 파일이나 네트워크 데이터를 다룰 때 유용해요. |\n| [fetch](https://developer.mozilla.org/docs/Web/API/Fetch_API) | 네트워크 리소스를 비동기로 요청하는 함수입니다. API 호출이나 데이터 가져올 때 많이 쓰죠. |\n| [FetchEvent](https://developer.mozilla.org/docs/Web/API/FetchEvent) | fetch 요청 이벤트를 나타냅니다. 미들웨어에서 요청을 가로채거나 처리할 때 사용됩니다. |\n| [File](https://developer.mozilla.org/docs/Web/API/File) | 사용자가 업로드한 파일 정보를 나타내는 객체입니다. |\n| [FormData](https://developer.mozilla.org/docs/Web/API/FormData) | 폼 데이터를 쉽게 다루기 위한 객체입니다. 파일 업로드와 함께 많이 사용돼요. |\n| [Headers](https://developer.mozilla.org/docs/Web/API/Headers) | HTTP 요청 및 응답의 헤더를 다루는 객체입니다. 요청을 커스터마이징할 때 필수! |\n| [Request](https://developer.mozilla.org/docs/Web/API/Request) | HTTP 요청 자체를 나타내는 객체로, fetch 호출 시 사용합니다. |\n| [Response](https://developer.mozilla.org/docs/Web/API/Response) | HTTP 응답을 나타내는 객체입니다. 미들웨어에서 응답을 조작하고 싶을 때 씁니다. |\n| [URLSearchParams](https://developer.mozilla.org/docs/Web/API/URLSearchParams) | URL 쿼리 스트링 파라미터를 손쉽게 읽고 조작할 수 있습니다. |\n| [WebSocket](https://developer.mozilla.org/docs/Web/API/WebSocket) | 실시간 양방향 통신이 가능한 웹소켓 연결을 나타냅니다. |\n\n---\n\n**추가 팁!**  \nEdge Runtime 환경은 서버리스 함수처럼 동작하면서도 훨씬 더 빠른 응답성을 제공합니다. 대신 브라우저 환경이 아닌 만큼, 기존 Node.js API 전체를 사용하는 것보다 지원하는 API가 제한되어 있다는 점 꼭 기억하세요.\n\n이 중 `fetch` API는 기본 제공되니 서버사이드에서 외부 API 호출할 때 별도의 라이브러리 없이 그냥 사용 가능하답니다! 그 외에도 HTTP 요청과 응답을 직접 만지면서 미들웨어를 만들어보면 Next.js의 내부 동작 원리에 대해 훨씬 쉽게 이해할 수 있습니다.\n\n한번 써보시고, 엣지 컴퓨팅의 빠른 속도를 체험해보시길 추천드려요!\n\n<!-- TIL 수평 -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## 인코딩 API들\n\n| API | 설명 |\n| --- | --- |\n| [atob](https://developer.mozilla.org/en-US/docs/Web/API/atob) | base-64로 인코딩된 문자열을 디코딩해줍니다. |\n| [btoa](https://developer.mozilla.org/en-US/docs/Web/API/btoa) | 문자열을 base-64로 인코딩해줍니다. |\n| [TextDecoder](https://developer.mozilla.org/docs/Web/API/TextDecoder) | Uint8Array 형태의 바이트 데이터를 문자열로 디코딩합니다. |\n| [TextDecoderStream](https://developer.mozilla.org/docs/Web/API/TextDecoderStream) | 스트림을 순차적으로 디코딩할 수 있는 체이닝 가능한 디코더입니다. |\n| [TextEncoder](https://developer.mozilla.org/docs/Web/API/TextEncoder) | 문자열을 Uint8Array 형태의 바이트 배열로 인코딩합니다. |\n| [TextEncoderStream](https://developer.mozilla.org/docs/Web/API/TextEncoderStream) | 스트림 데이터를 순차적으로 인코딩할 수 있는 체이닝 가능한 인코더입니다. |\n\n---\n\n### 조금 더 이야기해볼게요!\n\n- **atob/btoa**는 간단하게 텍스트와 base64 변환을 할 때 유용해요. 다만 유니코드 문자열을 제대로 처리하지 못하는 단점이 있어요. 유니코드 문자열 인코딩이 필요하다면 `TextEncoder`/`TextDecoder`를 추천합니다.\n- `TextEncoder`와 `TextDecoder`는 UTF-8 인코딩을 기본으로 하고 있어서, 국제 문자도 안전하게 다룰 수 있답니다!\n- 그리고 스트림 관련 인코더/디코더인 `TextEncoderStream`과 `TextDecoderStream`은 대용량 데이터를 실시간 처리하거나 네트워크 통신 시에 아주 편리해요.\n\n---\n\n## 스트림 API들\n\n| API | 설명 |\n| --- | --- |\n| [ReadableStream](https://developer.mozilla.org/docs/Web/API/ReadableStream) | 읽을 수 있는 스트림을 나타냅니다. |\n| [ReadableStreamBYOBReader](https://developer.mozilla.org/docs/Web/API/ReadableStreamBYOBReader) | ReadableStream의 데이터를 직접 읽는 리더입니다. (BYOB: Bring Your Own Buffer) |\n| [ReadableStreamDefaultReader](https://developer.mozilla.org/docs/Web/API/ReadableStreamDefaultReader) | ReadableStream의 기본적인 리더로, 자동 버퍼 관리를 지원합니다. |\n| [TransformStream](https://developer.mozilla.org/docs/Web/API/TransformStream) | 입력된 데이터를 즉시 변환하여 출력하는 변환용 스트림입니다. |\n| [WritableStream](https://developer.mozilla.org/docs/Web/API/WritableStream) | 쓸 수 있는 스트림을 나타냅니다. |\n| [WritableStreamDefaultWriter](https://developer.mozilla.org/docs/Web/API/WritableStreamDefaultWriter) | WritableStream에 데이터를 쓸 수 있게 해주는 기본 작성자입니다. |\n\n---\n\n### 스트림 API는 왜 꼭 알아야 할까?\n\n웹에서는 단순히 한 번에 모든 데이터를 처리하는 것보다, **실시간으로 데이터를 조금씩 주고받거나 변환하는 작업**이 훨씬 많아졌어요. 특히 네트워크 스트리밍, 미디어 처리, 대용량 파일 처리 등에서 매우 중요하죠.\n\n- `ReadableStream`은 '읽을 수 있는' 데이터 흐름,  \n- `WritableStream`은 '쓸 수 있는' 데이터 흐름,  \n- `TransformStream`은 '읽기와 쓰기를 동시에 하면서 중간에 가공하는' 역할을 합니다.\n\n예를 들어, 사용자의 음성 데이터를 받아서 텍스트로 변환하고, 다시 텍스트를 서버로 전송하는 복잡한 작업도 이 스트림 API를 이용해 효율적으로 처리할 수 있어요!\n\n---\n\n이처럼 자바스크립트의 인코딩 및 스트림 API는 데이터 처리에 있어 아주 강력한 도구입니다. 직접 써보면서 익히면, 어떠한 데이터도 자유자재로 다룰 수 있게 될 거예요! 필요하면 간단한 예제도 공유할게요~\n\n<!-- TIL 수평 -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## Crypto APIs\n\n| API | Description |\n| ---- | ----------- |\n| [`crypto`](https://developer.mozilla.org/docs/Web/API/Window/crypto) | 플랫폼의 암호화 기능에 접근할 수 있게 해줘요. |\n| [`CryptoKey`](https://developer.mozilla.org/docs/Web/API/CryptoKey) | 암호화 키를 나타내는 객체에요. |\n| [`SubtleCrypto`](https://developer.mozilla.org/docs/Web/API/SubtleCrypto) | 해싱, 서명, 암호화, 복호화 같은 일반적인 암호화 작업을 할 수 있게 해줘요. |\n\n> 암호화 관련 API는 보안에 민감한 작업을 할 때 꼭 알아둬야 해요. 예를 들어, 비밀번호를 처리하거나 데이터를 안전하게 전송할 때 활용할 수 있답니다.\n\n---\n\n## Web Standard APIs\n\n| API | Description |\n| ---- | ----------- |\n| [`AbortController`](https://developer.mozilla.org/docs/Web/API/AbortController) | 여러 개의 DOM 요청을 원할 때 중단할 수 있게 도와줘요. 예를 들어, API 호출을 취소할 때 유용하죠. |\n| [`Array`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array) | 값들의 배열을 표현해요. 자바스크립트의 기본이죠! |\n| [`ArrayBuffer`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer) | 고정 길이의 원시 바이너리 데이터를 저장하는 버퍼예요. |\n| [`Atomics`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Atomics) | 멀티스레딩 환경에서 안전한 원자적 연산을 제공하는 정적 메서드들이에요. |\n| [`BigInt`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/BigInt) | 아주 큰 정수를 표현할 때 쓰이는 타입으로, 숫자 한계가 걱정 없어요. |\n| [`BigInt64Array`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/BigInt64Array) | 64비트 부호있는 정수들의 타입드 배열이에요. |\n| [`BigUint64Array`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/BigUint64Array) | 64비트 부호없는 정수들의 타입드 배열이에요. |\n| [`Boolean`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean) | 참(`true`) 또는 거짓(`false`)을 나타내는 논리 타입이에요. |\n| [`clearInterval`](https://developer.mozilla.org/docs/Web/API/WindowOrWorkerGlobalScope/clearInterval) | `setInterval()`로 예약되어 있는 반복 작업을 취소해요. |\n| [`clearTimeout`](https://developer.mozilla.org/docs/Web/API/WindowOrWorkerGlobalScope/clearTimeout) | `setTimeout()`으로 예약된 작업을 취소해요. |\n| [`console`](https://developer.mozilla.org/docs/Web/API/Console) | 브라우저 디버깅 콘솔에 접근할 수 있게 해요. 디버깅 시 자주 사용하죠. |\n| [`DataView`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/DataView) | `ArrayBuffer`의 다양한 데이터 뷰를 제공해요. |\n| [`Date`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Date) | 플랫폼 독립적인 시간 정보를 표현해요. 시간 관련 작업에 필수! |\n| [`decodeURI`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/decodeURI) | `encodeURI`로 인코딩된 URI를 디코딩해요. |\n| [`decodeURIComponent`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/decodeURIComponent) | `encodeURIComponent`로 인코딩된 URI 컴포넌트를 디코딩해요. |\n| [`DOMException`](https://developer.mozilla.org/docs/Web/API/DOMException) | DOM 관련 에러를 나타내는 객체예요. |\n| [`encodeURI`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/encodeURI) | URI 내 일부 문자를 이스케이프 시퀀스로 변환해요. |\n| [`encodeURIComponent`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent) | URI 컴포넌트의 특수 문자를 이스케이프해요. |\n| [`Error`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Error) | 실행 중 발생한 일반적인 에러를 나타내요. |\n| [`EvalError`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/EvalError) | `eval()` 함수와 관련된 에러를 나타내요. 근데 요즘은 거의 안 써요. |\n| [`Float32Array`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Float32Array) | 32비트 부동소수점 숫자들의 타입드 배열이에요. |\n| [`Float64Array`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Float64Array) | 64비트 부동소수점 숫자들의 타입드 배열이에요. |\n| [`Function`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Function) | 자바스크립트 함수 자체를 나타내는 객체에요. |\n| [`Infinity`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Infinity) | 수학적 무한대를 나타내는 값이에요. |\n| [`Int8Array`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Int8Array) | 8비트 부호있는 정수 배열이에요. |\n| [`Int16Array`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Int16Array) | 16비트 부호있는 정수 배열이에요. |\n| [`Int32Array`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Int32Array) | 32비트 부호있는 정수 배열이에요. |\n| [`Intl`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Intl) | 국제화(internationalization)와 로컬라이제이션 기능을 제공해요. |\n| [`isFinite`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/isFinite) | 숫자가 유한한 값인지 검사해요. |\n| [`isNaN`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/isNaN) | 값이 `NaN`인지 검사해요. |\n| [`JSON`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/JSON) | 자바스크립트 값과 JSON 포맷 간 변환 기능을 제공해요. |\n| [`Map`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Map) | 키-값 쌍을 저장하는 컬렉션으로, 키의 중복을 허용하지 않아요. |\n| [`Math`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Math) | 수학 관련 함수와 상수를 제공해요. |\n| [`Number`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number) | 숫자형 데이터를 나타내는 객체에요. |\n| [`Object`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object) | 자바스크립트 객체의 기본이 되는 객체에요. |\n| [`parseFloat`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/parseFloat) | 문자열을 부동소수점 숫자로 파싱해요. |\n| [`parseInt`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/parseInt) | 문자열을 지정한 진수(radix)의 정수로 파싱해요. |\n| [`Promise`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise) | 비동기 작업의 완료 또는 실패와 그 결과를 나타내요. |\n| [`Proxy`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Proxy) | 기본 객체 동작을 가로채고 커스텀 동작을 가능하게 해주는 객체에요. |\n| [`queueMicrotask`](https://developer.mozilla.org/docs/Web/API/queueMicrotask) | 마이크로태스크를 큐에 넣어 실행하도록 예약해요. |\n| [`RangeError`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/RangeError) | 값이 허용된 범위 밖일 때 발생하는 에러예요. |\n| [`ReferenceError`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/ReferenceError) | 존재하지 않는 변수에 접근할 때 발생해요. |\n| [`Reflect`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Reflect) | 메타프로그래밍(메서드 가로채기 등)을\n\n<!-- TIL 수평 -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## Next.js에서 알아두면 좋은 폴리필(Polyfills)\n\n- **AsyncLocalStorage**  \n  Next.js 환경에서 AsyncLocalStorage를 사용할 때, 기본적으로 브라우저에는 지원되지 않으니까 서버 사이드에서만 동작하도록 신경 써야 해요. 만약 브라우저에서도 비슷한 기능이 필요하면, 직접 폴리필을 적용하거나 대체 라이브러리를 찾아보는 게 좋아요.\n\n> 참고로 AsyncLocalStorage는 비동기 컨텍스트를 관리하는 데 유용한데, 특히 요청별 데이터를 격리할 때 자주 쓰입니다. Next.js로 SSR 작업할 때 이런 기능을 활용하면 상태 관리가 좀 더 깔끔해지니까, 필요하면 꼭 공부해보길 추천해요!\n\n---\n\n## 환경 변수(Environment Variables) 다루기\n\nNext.js에서는 환경 변수를 다룰 때 `process.env`를 통해 값을 가져올 수 있어요. `next dev`나 `next build` 할 때도 똑같이 접근할 수 있어서 편리하답니다.\n\n예를 들어, `.env.local` 파일에 다음과 같이 환경 변수를 정의했다고 치면,\n\n```js\nNEXT_PUBLIC_API_URL=https://api.example.com\nSECRET_API_KEY=abcdef123456\n```\n\n- 클라이언트에서 접근하고 싶으면 반드시 `NEXT_PUBLIC_`로 시작하는 변수여야 해요.  \n- 서버 사이드 코드(예: API 라우트, getServerSideProps)에서는 `process.env.SECRET_API_KEY`처럼 바로 사용 가능하고요.\n\n```javascript\n// 클라이언트 코드 예시 (React 컴포넌트 내부)\nconst apiUrl = process.env.NEXT_PUBLIC_API_URL;\n\n// 서버 코드 예시 (API 라우트)\nexport default function handler(req, res) {\n  const secret = process.env.SECRET_API_KEY;\n  res.end(`Your secret key is ${secret}`);\n}\n```\n\n> 주의할 점! 환경 변수의 값은 빌드 시점에 정적으로 주입되기 때문에, 변경사항이 생기면 반드시 `next dev` 혹은 `next build`를 다시 실행해줘야 합니다.\n\n---\n\nNext.js에서 환경 변수를 활용하는 방법은 기본적이지만, 프로젝트 설정과 배포 환경에서 아주 중요한 역할을 해요. 진짜 중요한 정보(비밀번호, API 키 등)는 클라이언트에 노출되지 않도록 환경 변수 이름에 `NEXT_PUBLIC_`을 붙이지 말고 서버 사이드에서만 다뤄야 한다는 것도 꼭 기억하세요!\n\n<!-- TIL 수평 -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## 지원되지 않는 API들\n\nEdge Runtime을 사용할 때는 몇 가지 제약사항이 있어요. \n\n- Native Node.js API는 지원되지 않아요. 예를 들어, 파일 시스템을 읽거나 쓰는 작업은 불가능해요.\n- node_modules는 사용 가능하지만, 꼭 ES Modules 형식이어야 하고, Native Node.js API를 사용하지 않는 패키지여야 해요.\n- 직접 `require`를 호출하는 것도 안 돼요. 대신 ES Modules 방식을 사용해야 합니다.\n\n그리고 아래의 JavaScript 언어 기능들은 비활성화되어 있어서 사용할 수 없어요: \n\n| 제한된 기능 목록 |\n|------------------|\n| (여기에 구체적인 기능 목록을 적어주세요, 원본 내용에 따라 추가) |\n\n---\n\n### 조금 더 알아보기!\n\nEdge Runtime은 서버리스 환경 같은 경량화된 실행 환경에서 동작하도록 설계되었기 때문에, 기존 Node.js 환경에서 가능했던 기능들이 제한되는 경우가 많아요. 특히 파일 시스템 접근, 네이티브 바인딩 등은 보안 문제나 실행 환경 특성상 막혀있죠.\n\n그래서 여러분이 외부 라이브러리를 사용할 때에는 꼭 ES Module 형식을 지원하는지, 그리고 네이티브 API를 호출하지는 않는지 꼼꼼히 체크하는 게 중요해요. 만약 기존에 `require`로 불러오던 라이브러리가 있다면, `import` 구문으로 대체해야 해요.\n\n이러한 제한을 감안하고 코드를 작성하면, Edge Runtime에서 훨씬 더 안정적으로 실행할 수 있어요!\n\n<!-- TIL 수평 -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n이번 글에서는 JavaScript에서 동적 코드 평가(dynamic code evaluation) 관련 API들과, Next.js에서 특정 파일에서 동적 코드를 허용하는 방법에 대해 알아볼게요.\n\n### 자바스크립트에서 동적 코드 평가 API들\n\n| API | 설명 |\n| --- | --- |\n| [`eval`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/eval) | 문자열로 표현된 JavaScript 코드를 실행해요. 정말 강력하지만, 보안과 성능 면에서 조심해야 해요. |\n| [`new Function(evalString)`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Function) | 새 함수를 생성하는데, 함수 본문을 문자열로 받아요. eval과 비슷하지만, 실행 컨텍스트가 다르답니다. |\n| [`WebAssembly.compile`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/WebAssembly/compile) | WebAssembly 모듈을 버퍼 형태의 소스에서 컴파일해요. 빠른 성능이 필요한 작업에 유용하죠. |\n| [`WebAssembly.instantiate`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/WebAssembly/instantiate) | WebAssembly 모듈을 컴파일하고 바로 인스턴스화해요. |\n\n이 API들은 주로 동적으로 코드를 생성하거나 실행할 때 사용하지만, 이렇게 동적으로 코드를 평가하는 부분은 트리쉐이킹(Tree-shaking) 과정에서 걸러지지 않는 경우가 있어서 문제가 될 수 있어요. 트리쉐이킹은 불필요한 코드를 제거해주는 최적화 기술인데, 동적 코드는 정적으로 분석하기 어려워서 걸러지지 않는 거죠.\n\n---\n\n### Next.js 미들웨어에서 동적 코드 평가 허용하기\n\n가끔 프로젝트에 포함된 코드 중에 동적 코드 평가가 사용되는데, 그 부분이 실제로는 런타임 시에 호출되지 않아서 제거하기 힘들 때가 있어요. 이럴 때는 Next.js의 미들웨어 설정에서 특정 파일만 동적 코드를 허용하도록 설정해주는 방법이 있어요.\n\n```js\nexport const config = {\n  unstable_allowDynamic: [\n    // 단일 파일 허용 예시\n    '/lib/utilities.js',\n    // 3rd party 모듈 내 특정 폴더 전체 허용 (glob 패턴)\n    '**/node_modules/function-bind/**',\n  ],\n}\n```\n\n- `unstable_allowDynamic` 옵션은 glob 패턴을 사용해서 특정 파일이나 폴더 내 동적 코드 평가를 무시하게 해줘요.\n- glob 패턴은 애플리케이션 루트 폴더를 기준으로 작성해주시면 됩니다.\n- 이렇게 지정된 파일들은 동적 코드 평가가 포함되어 있더라도 Next.js가 문제 삼지 않고 넘어가게 돼요.\n\n---\n\n### 마치며\n\n동적 코드 평가 자체는 매우 유용한 기능이지만, 보안, 성능, 그리고 번들 최적화 측면에서 복잡한 문제를 일으킬 수 있답니다. 그러니까 특별한 필요가 없다면 사용을 최소화하는 게 좋아요.\n\n만약 외부 라이브러리를 쓸 때 동적 코드 평가가 포함되어 있어서 어쩔 수 없이 사용해야 한다면, 위 `unstable_allowDynamic` 옵션을 활용해 Next.js 빌드 시스템을 적절히 조정해보세요.\n\n참고로, WebAssembly는 요즘 성능이 중요한 웹 애플리케이션에서 자주 쓰이니 한번 공부해보시는 것도 추천드려요. 다음에 WebAssembly에 대해서도 자세히 다뤄볼게요!\n\n<!-- TIL 수평 -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n경고! 만약 이 문장들이 Microsoft Edge 브라우저에서 실행된다면, 에러가 발생하면서 프로그램이 중단될 수 있어요.\n\n특히 Edge는 다른 브라우저에 비해 지원하는 자바스크립트 기능이나 API 호환성이 다를 때가 많아서 이런 문제들이 종종 발생합니다. 그래서 크로스 브라우저 호환성을 신경 쓸 때는 항상 Edge 같은 브라우저에서도 테스트를 하는 게 중요해요.\n\n만약 Edge에서 문제가 발생한다면, 다음과 같은 방법들을 시도해볼 수 있어요:\n\n- **폴리필(Polyfill) 사용**: Edge에서 지원하지 않는 기능을 다른 코드로 보완할 수 있어요.\n- **조건문으로 브라우저 판별**: 실행 전에 현재 브라우저가 Edge인지 확인하고, 별도의 처리를 해줄 수 있어요.\n- **최신 버전 업데이트 권장**: Edge도 점점 개선되고 있으니 최신 버전에서는 문제 없이 동작할 수도 있어요.\n\n항상 코드 작성할 때는 주요 브라우저 모두에서 정상 동작하는지 확인하는 습관을 들이는 게 좋아요!","ogImage":{"url":"/TIL/assets/img/nextjs.png"},"coverImage":"/TIL/assets/img/nextjs.png","tag":["Tech"],"readingTime":17},"content":"<!doctype html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<meta content=\"width=device-width, initial-scale=1\" name=\"viewport\">\n</head>\n<body>\n<h1>Next.js Edge Runtime API 소개</h1>\n<p>Next.js의 Edge Runtime은 Middleware 용으로 사용되며, 다양한 네트워크 관련 API를 지원합니다. 이걸 잘 활용하면 훨씬 가볍고 빠른 엣지 환경에서 코드를 실행할 수 있어요!</p>\n<p>아래는 Edge Runtime에서 지원하는 주요 네트워크 API들입니다.</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>API</th><th>설명</th></tr></thead><tbody><tr><td><a href=\"https://developer.mozilla.org/docs/Web/API/Blob\" rel=\"nofollow\" target=\"_blank\">Blob</a></td><td>바이너리 데이터 덩어리를 나타내는 객체입니다. 파일이나 네트워크 데이터를 다룰 때 유용해요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/API/Fetch_API\" rel=\"nofollow\" target=\"_blank\">fetch</a></td><td>네트워크 리소스를 비동기로 요청하는 함수입니다. API 호출이나 데이터 가져올 때 많이 쓰죠.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/API/FetchEvent\" rel=\"nofollow\" target=\"_blank\">FetchEvent</a></td><td>fetch 요청 이벤트를 나타냅니다. 미들웨어에서 요청을 가로채거나 처리할 때 사용됩니다.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/API/File\" rel=\"nofollow\" target=\"_blank\">File</a></td><td>사용자가 업로드한 파일 정보를 나타내는 객체입니다.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/API/FormData\" rel=\"nofollow\" target=\"_blank\">FormData</a></td><td>폼 데이터를 쉽게 다루기 위한 객체입니다. 파일 업로드와 함께 많이 사용돼요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/API/Headers\" rel=\"nofollow\" target=\"_blank\">Headers</a></td><td>HTTP 요청 및 응답의 헤더를 다루는 객체입니다. 요청을 커스터마이징할 때 필수!</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/API/Request\" rel=\"nofollow\" target=\"_blank\">Request</a></td><td>HTTP 요청 자체를 나타내는 객체로, fetch 호출 시 사용합니다.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/API/Response\" rel=\"nofollow\" target=\"_blank\">Response</a></td><td>HTTP 응답을 나타내는 객체입니다. 미들웨어에서 응답을 조작하고 싶을 때 씁니다.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/API/URLSearchParams\" rel=\"nofollow\" target=\"_blank\">URLSearchParams</a></td><td>URL 쿼리 스트링 파라미터를 손쉽게 읽고 조작할 수 있습니다.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/API/WebSocket\" rel=\"nofollow\" target=\"_blank\">WebSocket</a></td><td>실시간 양방향 통신이 가능한 웹소켓 연결을 나타냅니다.</td></tr></tbody></table>\n<hr>\n<p><strong>추가 팁!</strong><br>\nEdge Runtime 환경은 서버리스 함수처럼 동작하면서도 훨씬 더 빠른 응답성을 제공합니다. 대신 브라우저 환경이 아닌 만큼, 기존 Node.js API 전체를 사용하는 것보다 지원하는 API가 제한되어 있다는 점 꼭 기억하세요.</p>\n<p>이 중 <code>fetch</code> API는 기본 제공되니 서버사이드에서 외부 API 호출할 때 별도의 라이브러리 없이 그냥 사용 가능하답니다! 그 외에도 HTTP 요청과 응답을 직접 만지면서 미들웨어를 만들어보면 Next.js의 내부 동작 원리에 대해 훨씬 쉽게 이해할 수 있습니다.</p>\n<p>한번 써보시고, 엣지 컴퓨팅의 빠른 속도를 체험해보시길 추천드려요!</p>\n<!-- TIL 수평 -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<h2>인코딩 API들</h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>API</th><th>설명</th></tr></thead><tbody><tr><td><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/atob\" rel=\"nofollow\" target=\"_blank\">atob</a></td><td>base-64로 인코딩된 문자열을 디코딩해줍니다.</td></tr><tr><td><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/btoa\" rel=\"nofollow\" target=\"_blank\">btoa</a></td><td>문자열을 base-64로 인코딩해줍니다.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/API/TextDecoder\" rel=\"nofollow\" target=\"_blank\">TextDecoder</a></td><td>Uint8Array 형태의 바이트 데이터를 문자열로 디코딩합니다.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/API/TextDecoderStream\" rel=\"nofollow\" target=\"_blank\">TextDecoderStream</a></td><td>스트림을 순차적으로 디코딩할 수 있는 체이닝 가능한 디코더입니다.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/API/TextEncoder\" rel=\"nofollow\" target=\"_blank\">TextEncoder</a></td><td>문자열을 Uint8Array 형태의 바이트 배열로 인코딩합니다.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/API/TextEncoderStream\" rel=\"nofollow\" target=\"_blank\">TextEncoderStream</a></td><td>스트림 데이터를 순차적으로 인코딩할 수 있는 체이닝 가능한 인코더입니다.</td></tr></tbody></table>\n<hr>\n<h3>조금 더 이야기해볼게요!</h3>\n<ul>\n<li><strong>atob/btoa</strong>는 간단하게 텍스트와 base64 변환을 할 때 유용해요. 다만 유니코드 문자열을 제대로 처리하지 못하는 단점이 있어요. 유니코드 문자열 인코딩이 필요하다면 <code>TextEncoder</code>/<code>TextDecoder</code>를 추천합니다.</li>\n<li><code>TextEncoder</code>와 <code>TextDecoder</code>는 UTF-8 인코딩을 기본으로 하고 있어서, 국제 문자도 안전하게 다룰 수 있답니다!</li>\n<li>그리고 스트림 관련 인코더/디코더인 <code>TextEncoderStream</code>과 <code>TextDecoderStream</code>은 대용량 데이터를 실시간 처리하거나 네트워크 통신 시에 아주 편리해요.</li>\n</ul>\n<hr>\n<h2>스트림 API들</h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>API</th><th>설명</th></tr></thead><tbody><tr><td><a href=\"https://developer.mozilla.org/docs/Web/API/ReadableStream\" rel=\"nofollow\" target=\"_blank\">ReadableStream</a></td><td>읽을 수 있는 스트림을 나타냅니다.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/API/ReadableStreamBYOBReader\" rel=\"nofollow\" target=\"_blank\">ReadableStreamBYOBReader</a></td><td>ReadableStream의 데이터를 직접 읽는 리더입니다. (BYOB: Bring Your Own Buffer)</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/API/ReadableStreamDefaultReader\" rel=\"nofollow\" target=\"_blank\">ReadableStreamDefaultReader</a></td><td>ReadableStream의 기본적인 리더로, 자동 버퍼 관리를 지원합니다.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/API/TransformStream\" rel=\"nofollow\" target=\"_blank\">TransformStream</a></td><td>입력된 데이터를 즉시 변환하여 출력하는 변환용 스트림입니다.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/API/WritableStream\" rel=\"nofollow\" target=\"_blank\">WritableStream</a></td><td>쓸 수 있는 스트림을 나타냅니다.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/API/WritableStreamDefaultWriter\" rel=\"nofollow\" target=\"_blank\">WritableStreamDefaultWriter</a></td><td>WritableStream에 데이터를 쓸 수 있게 해주는 기본 작성자입니다.</td></tr></tbody></table>\n<hr>\n<h3>스트림 API는 왜 꼭 알아야 할까?</h3>\n<p>웹에서는 단순히 한 번에 모든 데이터를 처리하는 것보다, <strong>실시간으로 데이터를 조금씩 주고받거나 변환하는 작업</strong>이 훨씬 많아졌어요. 특히 네트워크 스트리밍, 미디어 처리, 대용량 파일 처리 등에서 매우 중요하죠.</p>\n<ul>\n<li><code>ReadableStream</code>은 '읽을 수 있는' 데이터 흐름,</li>\n<li><code>WritableStream</code>은 '쓸 수 있는' 데이터 흐름,</li>\n<li><code>TransformStream</code>은 '읽기와 쓰기를 동시에 하면서 중간에 가공하는' 역할을 합니다.</li>\n</ul>\n<p>예를 들어, 사용자의 음성 데이터를 받아서 텍스트로 변환하고, 다시 텍스트를 서버로 전송하는 복잡한 작업도 이 스트림 API를 이용해 효율적으로 처리할 수 있어요!</p>\n<hr>\n<p>이처럼 자바스크립트의 인코딩 및 스트림 API는 데이터 처리에 있어 아주 강력한 도구입니다. 직접 써보면서 익히면, 어떠한 데이터도 자유자재로 다룰 수 있게 될 거예요! 필요하면 간단한 예제도 공유할게요~</p>\n<!-- TIL 수평 -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<h2>Crypto APIs</h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>API</th><th>Description</th></tr></thead><tbody><tr><td><a href=\"https://developer.mozilla.org/docs/Web/API/Window/crypto\" rel=\"nofollow\" target=\"_blank\"><code>crypto</code></a></td><td>플랫폼의 암호화 기능에 접근할 수 있게 해줘요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/API/CryptoKey\" rel=\"nofollow\" target=\"_blank\"><code>CryptoKey</code></a></td><td>암호화 키를 나타내는 객체에요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/API/SubtleCrypto\" rel=\"nofollow\" target=\"_blank\"><code>SubtleCrypto</code></a></td><td>해싱, 서명, 암호화, 복호화 같은 일반적인 암호화 작업을 할 수 있게 해줘요.</td></tr></tbody></table>\n<blockquote>\n<p>암호화 관련 API는 보안에 민감한 작업을 할 때 꼭 알아둬야 해요. 예를 들어, 비밀번호를 처리하거나 데이터를 안전하게 전송할 때 활용할 수 있답니다.</p>\n</blockquote>\n<hr>\n<h2>Web Standard APIs</h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>API</th><th>Description</th></tr></thead><tbody><tr><td><a href=\"https://developer.mozilla.org/docs/Web/API/AbortController\" rel=\"nofollow\" target=\"_blank\"><code>AbortController</code></a></td><td>여러 개의 DOM 요청을 원할 때 중단할 수 있게 도와줘요. 예를 들어, API 호출을 취소할 때 유용하죠.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array\" rel=\"nofollow\" target=\"_blank\"><code>Array</code></a></td><td>값들의 배열을 표현해요. 자바스크립트의 기본이죠!</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer\" rel=\"nofollow\" target=\"_blank\"><code>ArrayBuffer</code></a></td><td>고정 길이의 원시 바이너리 데이터를 저장하는 버퍼예요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Atomics\" rel=\"nofollow\" target=\"_blank\"><code>Atomics</code></a></td><td>멀티스레딩 환경에서 안전한 원자적 연산을 제공하는 정적 메서드들이에요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/BigInt\" rel=\"nofollow\" target=\"_blank\"><code>BigInt</code></a></td><td>아주 큰 정수를 표현할 때 쓰이는 타입으로, 숫자 한계가 걱정 없어요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/BigInt64Array\" rel=\"nofollow\" target=\"_blank\"><code>BigInt64Array</code></a></td><td>64비트 부호있는 정수들의 타입드 배열이에요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/BigUint64Array\" rel=\"nofollow\" target=\"_blank\"><code>BigUint64Array</code></a></td><td>64비트 부호없는 정수들의 타입드 배열이에요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean\" rel=\"nofollow\" target=\"_blank\"><code>Boolean</code></a></td><td>참(<code>true</code>) 또는 거짓(<code>false</code>)을 나타내는 논리 타입이에요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/API/WindowOrWorkerGlobalScope/clearInterval\" rel=\"nofollow\" target=\"_blank\"><code>clearInterval</code></a></td><td><code>setInterval()</code>로 예약되어 있는 반복 작업을 취소해요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/API/WindowOrWorkerGlobalScope/clearTimeout\" rel=\"nofollow\" target=\"_blank\"><code>clearTimeout</code></a></td><td><code>setTimeout()</code>으로 예약된 작업을 취소해요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/API/Console\" rel=\"nofollow\" target=\"_blank\"><code>console</code></a></td><td>브라우저 디버깅 콘솔에 접근할 수 있게 해요. 디버깅 시 자주 사용하죠.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/DataView\" rel=\"nofollow\" target=\"_blank\"><code>DataView</code></a></td><td><code>ArrayBuffer</code>의 다양한 데이터 뷰를 제공해요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Date\" rel=\"nofollow\" target=\"_blank\"><code>Date</code></a></td><td>플랫폼 독립적인 시간 정보를 표현해요. 시간 관련 작업에 필수!</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/decodeURI\" rel=\"nofollow\" target=\"_blank\"><code>decodeURI</code></a></td><td><code>encodeURI</code>로 인코딩된 URI를 디코딩해요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/decodeURIComponent\" rel=\"nofollow\" target=\"_blank\"><code>decodeURIComponent</code></a></td><td><code>encodeURIComponent</code>로 인코딩된 URI 컴포넌트를 디코딩해요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/API/DOMException\" rel=\"nofollow\" target=\"_blank\"><code>DOMException</code></a></td><td>DOM 관련 에러를 나타내는 객체예요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/encodeURI\" rel=\"nofollow\" target=\"_blank\"><code>encodeURI</code></a></td><td>URI 내 일부 문자를 이스케이프 시퀀스로 변환해요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent\" rel=\"nofollow\" target=\"_blank\"><code>encodeURIComponent</code></a></td><td>URI 컴포넌트의 특수 문자를 이스케이프해요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Error\" rel=\"nofollow\" target=\"_blank\"><code>Error</code></a></td><td>실행 중 발생한 일반적인 에러를 나타내요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/EvalError\" rel=\"nofollow\" target=\"_blank\"><code>EvalError</code></a></td><td><code>eval()</code> 함수와 관련된 에러를 나타내요. 근데 요즘은 거의 안 써요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Float32Array\" rel=\"nofollow\" target=\"_blank\"><code>Float32Array</code></a></td><td>32비트 부동소수점 숫자들의 타입드 배열이에요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Float64Array\" rel=\"nofollow\" target=\"_blank\"><code>Float64Array</code></a></td><td>64비트 부동소수점 숫자들의 타입드 배열이에요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Function\" rel=\"nofollow\" target=\"_blank\"><code>Function</code></a></td><td>자바스크립트 함수 자체를 나타내는 객체에요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Infinity\" rel=\"nofollow\" target=\"_blank\"><code>Infinity</code></a></td><td>수학적 무한대를 나타내는 값이에요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Int8Array\" rel=\"nofollow\" target=\"_blank\"><code>Int8Array</code></a></td><td>8비트 부호있는 정수 배열이에요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Int16Array\" rel=\"nofollow\" target=\"_blank\"><code>Int16Array</code></a></td><td>16비트 부호있는 정수 배열이에요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Int32Array\" rel=\"nofollow\" target=\"_blank\"><code>Int32Array</code></a></td><td>32비트 부호있는 정수 배열이에요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Intl\" rel=\"nofollow\" target=\"_blank\"><code>Intl</code></a></td><td>국제화(internationalization)와 로컬라이제이션 기능을 제공해요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/isFinite\" rel=\"nofollow\" target=\"_blank\"><code>isFinite</code></a></td><td>숫자가 유한한 값인지 검사해요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/isNaN\" rel=\"nofollow\" target=\"_blank\"><code>isNaN</code></a></td><td>값이 <code>NaN</code>인지 검사해요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/JSON\" rel=\"nofollow\" target=\"_blank\"><code>JSON</code></a></td><td>자바스크립트 값과 JSON 포맷 간 변환 기능을 제공해요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Map\" rel=\"nofollow\" target=\"_blank\"><code>Map</code></a></td><td>키-값 쌍을 저장하는 컬렉션으로, 키의 중복을 허용하지 않아요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Math\" rel=\"nofollow\" target=\"_blank\"><code>Math</code></a></td><td>수학 관련 함수와 상수를 제공해요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number\" rel=\"nofollow\" target=\"_blank\"><code>Number</code></a></td><td>숫자형 데이터를 나타내는 객체에요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object\" rel=\"nofollow\" target=\"_blank\"><code>Object</code></a></td><td>자바스크립트 객체의 기본이 되는 객체에요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/parseFloat\" rel=\"nofollow\" target=\"_blank\"><code>parseFloat</code></a></td><td>문자열을 부동소수점 숫자로 파싱해요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/parseInt\" rel=\"nofollow\" target=\"_blank\"><code>parseInt</code></a></td><td>문자열을 지정한 진수(radix)의 정수로 파싱해요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise\" rel=\"nofollow\" target=\"_blank\"><code>Promise</code></a></td><td>비동기 작업의 완료 또는 실패와 그 결과를 나타내요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Proxy\" rel=\"nofollow\" target=\"_blank\"><code>Proxy</code></a></td><td>기본 객체 동작을 가로채고 커스텀 동작을 가능하게 해주는 객체에요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/API/queueMicrotask\" rel=\"nofollow\" target=\"_blank\"><code>queueMicrotask</code></a></td><td>마이크로태스크를 큐에 넣어 실행하도록 예약해요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/RangeError\" rel=\"nofollow\" target=\"_blank\"><code>RangeError</code></a></td><td>값이 허용된 범위 밖일 때 발생하는 에러예요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/ReferenceError\" rel=\"nofollow\" target=\"_blank\"><code>ReferenceError</code></a></td><td>존재하지 않는 변수에 접근할 때 발생해요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Reflect\" rel=\"nofollow\" target=\"_blank\"><code>Reflect</code></a></td><td>메타프로그래밍(메서드 가로채기 등)을</td></tr></tbody></table>\n<!-- TIL 수평 -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<h2>Next.js에서 알아두면 좋은 폴리필(Polyfills)</h2>\n<ul>\n<li><strong>AsyncLocalStorage</strong><br>\nNext.js 환경에서 AsyncLocalStorage를 사용할 때, 기본적으로 브라우저에는 지원되지 않으니까 서버 사이드에서만 동작하도록 신경 써야 해요. 만약 브라우저에서도 비슷한 기능이 필요하면, 직접 폴리필을 적용하거나 대체 라이브러리를 찾아보는 게 좋아요.</li>\n</ul>\n<blockquote>\n<p>참고로 AsyncLocalStorage는 비동기 컨텍스트를 관리하는 데 유용한데, 특히 요청별 데이터를 격리할 때 자주 쓰입니다. Next.js로 SSR 작업할 때 이런 기능을 활용하면 상태 관리가 좀 더 깔끔해지니까, 필요하면 꼭 공부해보길 추천해요!</p>\n</blockquote>\n<hr>\n<h2>환경 변수(Environment Variables) 다루기</h2>\n<p>Next.js에서는 환경 변수를 다룰 때 <code>process.env</code>를 통해 값을 가져올 수 있어요. <code>next dev</code>나 <code>next build</code> 할 때도 똑같이 접근할 수 있어서 편리하답니다.</p>\n<p>예를 들어, <code>.env.local</code> 파일에 다음과 같이 환경 변수를 정의했다고 치면,</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-variable constant_\">NEXT_PUBLIC_API_URL</span>=<span class=\"hljs-attr\">https</span>:<span class=\"hljs-comment\">//api.example.com</span>\n<span class=\"hljs-variable constant_\">SECRET_API_KEY</span>=abcdef123456\n</code></pre>\n<ul>\n<li>클라이언트에서 접근하고 싶으면 반드시 <code>NEXT_PUBLIC_</code>로 시작하는 변수여야 해요.</li>\n<li>서버 사이드 코드(예: API 라우트, getServerSideProps)에서는 <code>process.env.SECRET_API_KEY</code>처럼 바로 사용 가능하고요.</li>\n</ul>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// 클라이언트 코드 예시 (React 컴포넌트 내부)</span>\n<span class=\"hljs-keyword\">const</span> apiUrl = process.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">NEXT_PUBLIC_API_URL</span>;\n\n<span class=\"hljs-comment\">// 서버 코드 예시 (API 라우트)</span>\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">handler</span>(<span class=\"hljs-params\">req, res</span>) {\n  <span class=\"hljs-keyword\">const</span> secret = process.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">SECRET_API_KEY</span>;\n  res.<span class=\"hljs-title function_\">end</span>(<span class=\"hljs-string\">`Your secret key is <span class=\"hljs-subst\">${secret}</span>`</span>);\n}\n</code></pre>\n<blockquote>\n<p>주의할 점! 환경 변수의 값은 빌드 시점에 정적으로 주입되기 때문에, 변경사항이 생기면 반드시 <code>next dev</code> 혹은 <code>next build</code>를 다시 실행해줘야 합니다.</p>\n</blockquote>\n<hr>\n<p>Next.js에서 환경 변수를 활용하는 방법은 기본적이지만, 프로젝트 설정과 배포 환경에서 아주 중요한 역할을 해요. 진짜 중요한 정보(비밀번호, API 키 등)는 클라이언트에 노출되지 않도록 환경 변수 이름에 <code>NEXT_PUBLIC_</code>을 붙이지 말고 서버 사이드에서만 다뤄야 한다는 것도 꼭 기억하세요!</p>\n<!-- TIL 수평 -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<h2>지원되지 않는 API들</h2>\n<p>Edge Runtime을 사용할 때는 몇 가지 제약사항이 있어요.</p>\n<ul>\n<li>Native Node.js API는 지원되지 않아요. 예를 들어, 파일 시스템을 읽거나 쓰는 작업은 불가능해요.</li>\n<li>node_modules는 사용 가능하지만, 꼭 ES Modules 형식이어야 하고, Native Node.js API를 사용하지 않는 패키지여야 해요.</li>\n<li>직접 <code>require</code>를 호출하는 것도 안 돼요. 대신 ES Modules 방식을 사용해야 합니다.</li>\n</ul>\n<p>그리고 아래의 JavaScript 언어 기능들은 비활성화되어 있어서 사용할 수 없어요:</p>\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>제한된 기능 목록</th></tr></thead><tbody><tr><td>(여기에 구체적인 기능 목록을 적어주세요, 원본 내용에 따라 추가)</td></tr></tbody></table>\n<hr>\n<h3>조금 더 알아보기!</h3>\n<p>Edge Runtime은 서버리스 환경 같은 경량화된 실행 환경에서 동작하도록 설계되었기 때문에, 기존 Node.js 환경에서 가능했던 기능들이 제한되는 경우가 많아요. 특히 파일 시스템 접근, 네이티브 바인딩 등은 보안 문제나 실행 환경 특성상 막혀있죠.</p>\n<p>그래서 여러분이 외부 라이브러리를 사용할 때에는 꼭 ES Module 형식을 지원하는지, 그리고 네이티브 API를 호출하지는 않는지 꼼꼼히 체크하는 게 중요해요. 만약 기존에 <code>require</code>로 불러오던 라이브러리가 있다면, <code>import</code> 구문으로 대체해야 해요.</p>\n<p>이러한 제한을 감안하고 코드를 작성하면, Edge Runtime에서 훨씬 더 안정적으로 실행할 수 있어요!</p>\n<!-- TIL 수평 -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>이번 글에서는 JavaScript에서 동적 코드 평가(dynamic code evaluation) 관련 API들과, Next.js에서 특정 파일에서 동적 코드를 허용하는 방법에 대해 알아볼게요.</p>\n<h3>자바스크립트에서 동적 코드 평가 API들</h3>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>API</th><th>설명</th></tr></thead><tbody><tr><td><a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/eval\" rel=\"nofollow\" target=\"_blank\"><code>eval</code></a></td><td>문자열로 표현된 JavaScript 코드를 실행해요. 정말 강력하지만, 보안과 성능 면에서 조심해야 해요.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Function\" rel=\"nofollow\" target=\"_blank\"><code>new Function(evalString)</code></a></td><td>새 함수를 생성하는데, 함수 본문을 문자열로 받아요. eval과 비슷하지만, 실행 컨텍스트가 다르답니다.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/WebAssembly/compile\" rel=\"nofollow\" target=\"_blank\"><code>WebAssembly.compile</code></a></td><td>WebAssembly 모듈을 버퍼 형태의 소스에서 컴파일해요. 빠른 성능이 필요한 작업에 유용하죠.</td></tr><tr><td><a href=\"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/WebAssembly/instantiate\" rel=\"nofollow\" target=\"_blank\"><code>WebAssembly.instantiate</code></a></td><td>WebAssembly 모듈을 컴파일하고 바로 인스턴스화해요.</td></tr></tbody></table>\n<p>이 API들은 주로 동적으로 코드를 생성하거나 실행할 때 사용하지만, 이렇게 동적으로 코드를 평가하는 부분은 트리쉐이킹(Tree-shaking) 과정에서 걸러지지 않는 경우가 있어서 문제가 될 수 있어요. 트리쉐이킹은 불필요한 코드를 제거해주는 최적화 기술인데, 동적 코드는 정적으로 분석하기 어려워서 걸러지지 않는 거죠.</p>\n<hr>\n<h3>Next.js 미들웨어에서 동적 코드 평가 허용하기</h3>\n<p>가끔 프로젝트에 포함된 코드 중에 동적 코드 평가가 사용되는데, 그 부분이 실제로는 런타임 시에 호출되지 않아서 제거하기 힘들 때가 있어요. 이럴 때는 Next.js의 미들웨어 설정에서 특정 파일만 동적 코드를 허용하도록 설정해주는 방법이 있어요.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">const</span> config = {\n  <span class=\"hljs-attr\">unstable_allowDynamic</span>: [\n    <span class=\"hljs-comment\">// 단일 파일 허용 예시</span>\n    <span class=\"hljs-string\">'/lib/utilities.js'</span>,\n    <span class=\"hljs-comment\">// 3rd party 모듈 내 특정 폴더 전체 허용 (glob 패턴)</span>\n    <span class=\"hljs-string\">'**/node_modules/function-bind/**'</span>,\n  ],\n}\n</code></pre>\n<ul>\n<li><code>unstable_allowDynamic</code> 옵션은 glob 패턴을 사용해서 특정 파일이나 폴더 내 동적 코드 평가를 무시하게 해줘요.</li>\n<li>glob 패턴은 애플리케이션 루트 폴더를 기준으로 작성해주시면 됩니다.</li>\n<li>이렇게 지정된 파일들은 동적 코드 평가가 포함되어 있더라도 Next.js가 문제 삼지 않고 넘어가게 돼요.</li>\n</ul>\n<hr>\n<h3>마치며</h3>\n<p>동적 코드 평가 자체는 매우 유용한 기능이지만, 보안, 성능, 그리고 번들 최적화 측면에서 복잡한 문제를 일으킬 수 있답니다. 그러니까 특별한 필요가 없다면 사용을 최소화하는 게 좋아요.</p>\n<p>만약 외부 라이브러리를 쓸 때 동적 코드 평가가 포함되어 있어서 어쩔 수 없이 사용해야 한다면, 위 <code>unstable_allowDynamic</code> 옵션을 활용해 Next.js 빌드 시스템을 적절히 조정해보세요.</p>\n<p>참고로, WebAssembly는 요즘 성능이 중요한 웹 애플리케이션에서 자주 쓰이니 한번 공부해보시는 것도 추천드려요. 다음에 WebAssembly에 대해서도 자세히 다뤄볼게요!</p>\n<!-- TIL 수평 -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>경고! 만약 이 문장들이 Microsoft Edge 브라우저에서 실행된다면, 에러가 발생하면서 프로그램이 중단될 수 있어요.</p>\n<p>특히 Edge는 다른 브라우저에 비해 지원하는 자바스크립트 기능이나 API 호환성이 다를 때가 많아서 이런 문제들이 종종 발생합니다. 그래서 크로스 브라우저 호환성을 신경 쓸 때는 항상 Edge 같은 브라우저에서도 테스트를 하는 게 중요해요.</p>\n<p>만약 Edge에서 문제가 발생한다면, 다음과 같은 방법들을 시도해볼 수 있어요:</p>\n<ul>\n<li><strong>폴리필(Polyfill) 사용</strong>: Edge에서 지원하지 않는 기능을 다른 코드로 보완할 수 있어요.</li>\n<li><strong>조건문으로 브라우저 판별</strong>: 실행 전에 현재 브라우저가 Edge인지 확인하고, 별도의 처리를 해줄 수 있어요.</li>\n<li><strong>최신 버전 업데이트 권장</strong>: Edge도 점점 개선되고 있으니 최신 버전에서는 문제 없이 동작할 수도 있어요.</li>\n</ul>\n<p>항상 코드 작성할 때는 주요 브라우저 모두에서 정상 동작하는지 확인하는 습관을 들이는 게 좋아요!</p>\n</body>\n</html>\n"},"__N_SSG":true}