{"pageProps":{"post":{"title":"ì•„ì§ FastAPIë¥¼ í”„ë¡œë•ì…˜ì— ì‚¬ìš©í•˜ë©´ ì•ˆ ë˜ëŠ” ì´ìœ ","description":"","date":"2024-07-06 10:24","slug":"2024-07-06-ThisisWhyFastAPIisNOTProduction-ReadyYet","content":"\n\n# ìš”ì•½\n\ní˜„ëŒ€ ì›¹ ê°œë°œì—ì„œ íš¨ìœ¨ì ìœ¼ë¡œ ì¢…ì† í•­ëª©ì„ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ í™•ì¥ ê°€ëŠ¥í•˜ê³  ìœ ì§€ ê´€ë¦¬ ê°€ëŠ¥í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“œëŠ” ë° ì¤‘ìš”í•©ë‹ˆë‹¤. ì˜ì¡´ì„± ì£¼ì…(Dependency Injection, DI) ë° ì œì–´ì˜ ì—­ì „(Inversion of Control, IoC)ì€ ì´ ìš”êµ¬ë¥¼ í•´ê²°í•˜ëŠ” ë‘ ê°€ì§€ ë””ìì¸ ì›ì¹™ì…ë‹ˆë‹¤. ë³¸ ë¬¸ì„œì—ì„œëŠ” DIì™€ IoCê°€ ë‘ ê°€ì§€ ì¸ê¸° ìˆëŠ” Python í”„ë ˆì„ì›Œí¬ì¸ FastAPI ë° PyNestì—ì„œ ì–´ë–»ê²Œ êµ¬í˜„ë˜ëŠ”ì§€ ì•Œì•„ë´…ë‹ˆë‹¤. ìš°ë¦¬ëŠ” ë‘ í”„ë ˆì„ì›Œí¬ë¥¼ ì†Œê°œí•˜ê³ , DIì— ëŒ€í•œ ì ‘ê·¼ ë°©ì‹ì„ ìì„¸íˆ ì‚´í´ë³´ë©°, ë‹¤ìŒ í”„ë¡œì íŠ¸ì— ìµœì ì¸ ì„ íƒì„ ë„ì™€ì¤„ ì¢…í•©ì ì¸ ë¹„êµë¥¼ ì œê³µí•  ê²ƒì…ë‹ˆë‹¤.\n\n/assets/img/2024-07-06-ThisisWhyFastAPIisNOTProduction-ReadyYet_0.png\n\n# FastAPI ì†Œê°œ\n\n<!-- TIL ìˆ˜í‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nFastAPIì€ í‘œì¤€ Python íƒ€ì… íŒíŠ¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ëŠ” Python 3.7+ìš© í˜„ëŒ€ì ì´ê³  ë¹ ë¥¸ ì›¹ í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤. OpenAPIì™€ JSON Schemaì˜ ìë™ ìƒì„± ê¸°ëŠ¥ì„ ì œê³µí•˜ì—¬ APIë¥¼ ë¹ ë¥´ê³  íš¨ìœ¨ì ìœ¼ë¡œ ë§Œë“œëŠ” ë° ë§¤ìš° í¸ë¦¬í•©ë‹ˆë‹¤. FastAPIì˜ DI(Dependency Injection) ì ‘ê·¼ ë°©ì‹ì€ ë‚´ì¥ë˜ì–´ ìˆìœ¼ë©°, Pythonì˜ íƒ€ì… íŒíŠ¸ë¥¼ í™œìš©í•˜ì—¬ ì˜ì¡´ì„±ì„ ì›í™œí•˜ê²Œ ì£¼ì…í•©ë‹ˆë‹¤.\n\n# FastAPIì˜ DI(Dependency Injection) ì ‘ê·¼ ë°©ì‹\n\nFastAPIì—ì„œëŠ” ì˜ì¡´ì„± ì£¼ì…ì´ í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜ ë‚´ì˜ Depends í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì²˜ë¦¬ë©ë‹ˆë‹¤. ì´ëŠ” FastAPIì—ê²Œ ì˜ì¡´ì„± í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë„ë¡ ì§€ì‹œí•˜ê³  í•´ë‹¹ ë§¤ê°œë³€ìˆ˜ì˜ ì¸ìˆ˜ ê°’ìœ¼ë¡œ ê²°ê³¼ë¥¼ ì‚¬ìš©í•˜ë„ë¡ í•©ë‹ˆë‹¤.\n\n## ì˜ˆì‹œ: FastAPI ì˜ì¡´ì„± ì£¼ì…\n\n<!-- TIL ìˆ˜í‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```python\nfrom fastapi import Depends, FastAPI\n\napp = FastAPI()\n\n# ì˜ì¡´ì„± í•¨ìˆ˜\nasync def common_parameters(q: str = None, skip: int = 0, limit: int = 100):\n    return {\"q\": q, \"skip\": skip, \"limit\": limit}\n\n# í•´ë‹¹ ì˜ì¡´ì„±ì„ ì‚¬ìš©í•˜ëŠ” ë¼ìš°íŠ¸\n@app.get(\"/items/\")\nasync def read_items(commons: dict = Depends(common_parameters)):\n    return commons\n```\n\nì´ ì˜ˆì—ì„œ `common_parameters`ì€ `/items/` ë¼ìš°íŠ¸ì— ì ‘ê·¼í•  ë•Œë§ˆë‹¤ ì‹¤í–‰ë˜ëŠ” ì˜ì¡´ì„± í•¨ìˆ˜ì…ë‹ˆë‹¤.\n\n## ì˜ì¡´ì„± ì£¼ì…ì—ì„œì˜ ì¤‘ë³µì„±\n\nFastAPIëŠ” ê° ë¼ìš°íŠ¸ì˜ í•¨ìˆ˜ ìˆ˜ì¤€ì—ì„œ ì˜ì¡´ì„±ì´ ì£¼ì…ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ì—¬ëŸ¬ ë¼ìš°íŠ¸ê°€ ë™ì¼í•œ ì˜ì¡´ì„±ì„ í•„ìš”ë¡œ í•˜ëŠ” ê²½ìš° ê° ë¼ìš°íŠ¸ í•¸ë“¤ëŸ¬ í•¨ìˆ˜ì— ë³„ë„ë¡œ ì£¼ì…í•´ì•¼ í•©ë‹ˆë‹¤. íŠ¹íˆ ë§ì€ ìˆ˜ì˜ ë¼ìš°íŠ¸ì™€ ê³µìœ  ì˜ì¡´ì„±ì´ ìˆëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ì—ì„œ ë°˜ë³µì ì´ê³  ì¥í™©í•œ ì½”ë“œë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n<!-- TIL ìˆ˜í‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## ì˜ˆì œ\n\n```js\nfrom fastapi import Depends, FastAPI\n\napp = FastAPI()\n\n# ì˜ì¡´ì„±\nclass Logger:\n    def __init__(self):\n        print(\"ë¡œê±° ì‹œì‘\")\n        time.sleep(2)\n        print(f\"ë¡œê±° ì‹œì‘ë¨ - {self}\")\n\n    def log(self, message):\n        print(f\"ë¡œê¹… - {message}\")\n\n\n# ë™ì¼í•œ ì˜ì¡´ì„±ì„ ì£¼ì…í•˜ëŠ” ì—¬ëŸ¬ ë¼ìš°íŠ¸\n@app.get(\"/items/\")\nasync def read_items(logger: Annotated[Logger, Depends(Logger)]):\n    logger.log(\"ì•„ì´í…œ ëª©ë¡\")\n    return {\"message\": \"ì•„ì´í…œ\"}\n\n@app.post(\"/items/\")\nasync def create_item(logger: Annotated[Logger, Depends(Logger)]):\n    logger.log(\"ì•„ì´í…œ ìƒì„± ì¤‘\")\n    return {\"message\": \"ì•„ì´í…œ ìƒì„±ë¨\"}\n```\n\nìƒˆë¡œìš´ DBê°€ í•„ìš”í•œ ëª¨ë“  ìƒˆë¡œìš´ ë¼ìš°íŠ¸ì—ì„œ ìš°ë¦¬ëŠ” DBë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì£¼ì…í•´ì•¼ í•©ë‹ˆë‹¤. ì•½ê°„ í¬ê²Œ í™•ì¥í•´ë³´ë©´ ëª¨ë“  ë¼ìš°íŠ¸ê°€ ê³µìœ ëœ ë¡œê±°, ê³µìœ ëœ ì„¤ì •, ê·¸ë¦¬ê³  DB ì—°ê²°ì„ ì£¼ì…í•´ì•¼ í•œë‹¤ê³  ìƒìƒí•´ë³´ë©´, ê°™ì€ ì½”ë“œë¥¼ ê³„ì† ë°˜ë³µí•´ì„œ ì‘ì„±í•´ì•¼ í•˜ëŠ” ìƒí™©ì´ ìƒê¸¸ ê²ƒì…ë‹ˆë‹¤.\n\n# FastAPIì—ì„œ í´ë˜ìŠ¤ ì˜ì¡´ì„± ì£¼ì…í•˜ê¸°\n\n<!-- TIL ìˆ˜í‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nFastAPI ë£¨íŠ¸ì—ì„œ ë‹¨ì¼ ë° ì—¬ëŸ¬ ì¢…ì†ì„±ì„ ì£¼ì…í•˜ê³  ëª¨ë“  í˜¸ì¶œë§ˆë‹¤ ê°ì²´ë¥¼ ì¬ì„¤ì •í•˜ëŠ” ë¬¸ì œë¥¼ íƒìƒ‰í•´ ë³´ëŠ” ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì‚´í´ë´…ì‹œë‹¤.\n\në‹¨ì¼ ì¢…ì†ì„± ì£¼ì… - ì´ ì˜ˆì‹œì—ì„œëŠ” API ë£¨íŠ¸ë¡œ ì£¼ì…ë  Logger ê°ì²´ë¥¼ ë§Œë“­ë‹ˆë‹¤.\n\n```python\nfrom fastapi import FastAPI, Depends\nimport time\n\napp = FastAPI()\n\nclass Logger:\n    def __init__(self):\n        print(\"Logger Starting\")\n        time.sleep(2)\n        print(f\"Logger Started at - {self}\")\n        self.params = {}\n\n    def log(self, message):\n        print(f\"Logging - {message}\")\n\n@app.get(\"/\")\ndef get(logger: Logger = Depends(Logger)):\n    logger.log(\"Endpoint hit\")\n    return \"Logger works\"\n\nif __name__ == \"__main__\":\n    import uvicorn\n    uvicorn.run(app, host=\"0.0.0.0\", port=8000)\n```\n\nì¶œë ¥:\n\n<!-- TIL ìˆ˜í‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n\në¡œê·¸ ì¶œë ¥ ì‹œì‘\në¡œê·¸ ì¶œë ¥ ì‹œì‘ ìœ„ì¹˜ - <main.Logger object at 0x102f3ddf0>\në¡œê·¸ - ì—”ë“œí¬ì¸íŠ¸ ìš”ì²­\nì •ë³´: 127.0.0.1:64670 - \"GET / HTTP/1.1\" 200 OK\n\në¡œê·¸ ì¶œë ¥ ì‹œì‘\në¡œê·¸ ì¶œë ¥ ì‹œì‘ ìœ„ì¹˜ - <main.Logger object at 0x102f3dbe0>\në¡œê·¸ - ì—”ë“œí¬ì¸íŠ¸ ìš”ì²­\nì •ë³´: 127.0.0.1:64670 - \"GET / HTTP/1.1\" 200 OK\n\në¡œê·¸ ì¶œë ¥ ì‹œì‘\në¡œê·¸ ì¶œë ¥ ì‹œì‘ ìœ„ì¹˜ - <main.Logger object at 0x102f3dbb0>\në¡œê·¸ - ì—”ë“œí¬ì¸íŠ¸ ìš”ì²­\nì •ë³´: 127.0.0.1:64670 - \"GET / HTTP/1.1\" 200 OK\n\n\nìœ„ì˜ ê²°ê³¼ë¥¼ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë£¨íŠ¸ ê²½ë¡œì— ì ‘ì†í•˜ë ¤ê³  í•  ë•Œ, ë¡œê±° ê°ì²´ê°€ ì´ˆê¸°í™”ë˜ê³  \"0x102f3ddf0\" ìœ„ì¹˜ë¡œ ì„¤ì •ë˜ì—ˆìŒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ ë‘ ë²ˆì§¸ë¡œ ë™ì¼í•œ ê²½ë¡œì— ì•¡ì„¸ìŠ¤í•˜ë©´ ë¡œê±° ê°ì²´ê°€ ë‹¤ì‹œ ì´ˆê¸°í™”ë©ë‹ˆë‹¤. ì´ ë•ŒëŠ” ë‹¤ë¥¸ ë©”ëª¨ë¦¬ ìœ„ì¹˜ì— ì„¤ì •ë©ë‹ˆë‹¤. ë£¨íŠ¸ ê²½ë¡œë¥¼ í˜¸ì¶œí•  ë•Œë§ˆë‹¤ ë¡œê±° ì´ˆê¸°í™”ì— 2ì´ˆì˜ ëŒ€ê¸° ì‹œê°„ì´ ì†Œìš”ë©ë‹ˆë‹¤.\n\nê·¸ë ‡ë‹¤ë©´ ë¡œê±°ì— ì˜ì¡´í•˜ëŠ” ì„œë¹„ìŠ¤ê°€ í•„ìš”í•œ ê²½ìš° ì–´ë–»ê²Œ ë ê¹Œìš”?\n\nfrom fastapi import FastAPI, Depends\nimport time\nimport random\n\nclass Logger:\n    def __init__(self):\n        print(\"ë¡œê·¸ ì¶œë ¥ ì‹œì‘\")\n        time.sleep(2)\n        print(f\"ë¡œê·¸ ì¶œë ¥ ì‹œì‘ ìœ„ì¹˜ - {self}\")\n\n    def log(self, message):\n        print(f\"ë¡œê·¸ - {message}\")\n\nclass Service:\n    def __init__(self, logger: Logger = Depends(Logger)):\n        self.logger = logger\n        print(\"ì„œë¹„ìŠ¤ ì‹œì‘\")\n        time.sleep(1)\n        print(f\"ì„œë¹„ìŠ¤ ì‹œì‘ ìœ„ì¹˜ - {self}\")\n\n    def ì‹¤í–‰(self):\n        self.logger.log(\"ì–´ë–¤ ì‘ì—…ì„ ìˆ˜í–‰ ì¤‘\")\n        return f\"ì‘ì—… ìˆ˜í–‰, {random.random()}\"\n\napp = FastAPI()\n\n@app.get(\"/\")\ndef get(service: Service = Depends(Service)):\n    return f\"{service.ì‹¤í–‰()}\"\n\nif __name__ == \"__main__\":\n    import uvicorn\n    uvicorn.run(app, host=\"0.0.0.0\", port=8000)\n\n\n\n<!-- TIL ìˆ˜í‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\në‹¹ì—°íˆìš”! FastAPI ë° IOC ì»¨í…Œì´ë„ˆì—ì„œì˜ ì§€ì› ë¶€ì¡±ì€ ì´ ì—”ë“œí¬ì¸íŠ¸ë¥¼ í˜¸ì¶œí•  ë•Œë§ˆë‹¤ ì´ë¯¸ ì´ˆê¸°í™”ëœ ê°ì²´ë“¤ì„ ì´ˆê¸°í™”í•˜ê¸° ìœ„í•´ 3ì´ˆì˜ ì§€ì—° ì‹œê°„ì„ ì§€ë¶ˆí•´ì•¼ í•œë‹¤ëŠ” ì£¼ëœ ì´ìœ ì…ë‹ˆë‹¤. ì´ íŒ¨í„´ì€ ì§„ì •í•œ ì•ˆí‹°-íŒ¨í„´ì´ë©°, FastAPIì˜ ì•½ì ì„ ë“œëŸ¬ë‚¼ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.\n\nì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ê³  ìˆ˜ì‹­ ì‹œê°„ì„ ë‚­ë¹„í•œ í›„, FastAPI ìì²´ê°€ ê·¸ëŸ¬í•œ ê¸°ëŠ¥ì„ ì œê³µí•˜ì§€ ëª»í•˜ë©°, ìƒˆë¡­ê³  ë” í†µí•©ì ì¸ ì ‘ê·¼ì´ í•„ìš”í•˜ë‹¤ëŠ” ê²ƒì„ ì´í•´í–ˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì €ëŠ” PyNestë¥¼ ë§Œë“¤ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” ì˜ì¡´ì„± ì£¼ì…ê³¼ ëª¨ë“ˆì„±ì— ì¤‘ì ì„ ë‘” Python ë©”íƒ€-í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤.\n\n# PyNest: ëª¨ë“ˆì‹ DI ì ‘ê·¼ ë°©ì‹\n\nPyNestì˜ DI ì‹œìŠ¤í…œì€ ë°˜ë³µì ì¸ ì½”ë“œë¥¼ ì¤„ì´ê³  ëŒ€ê·œëª¨ ì• í”Œë¦¬ì¼€ì´ì…˜ì— íŠ¹íˆ ìœ ìš©í•œ ê°œë°œ í”„ë¡œì„¸ìŠ¤ë¥¼ ê°„ì†Œí™”í•˜ëŠ” ë°ì— ë””ìì¸ë˜ì—ˆìŠµë‹ˆë‹¤. PyNestëŠ” ì˜ì¡´ì„±ì´ í•œ ë²ˆì— í•œ ë²ˆì”© ì£¼ì…ë˜ëŠ” êµ¬ì¡°í™”ëœ DI ì‹œìŠ¤í…œì„ ì œê³µí•˜ë©°, ëŒ€ì²´ë¡œ ì»¨íŠ¸ë¡¤ëŸ¬ í´ë˜ìŠ¤ ìˆ˜ì¤€ì—ì„œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. ì´ êµ¬ì¡°ëŠ” í•œ ë²ˆ ì˜ì¡´ì„±ì´ ì»¨íŠ¸ë¡¤ëŸ¬ì— ì£¼ì…ë˜ë©´ ë” ì´ìƒ ì£¼ì…ì´ í•„ìš”í•˜ì§€ ì•Šê³  ì½”ë“œê°€ ì¬ì‚¬ìš©ë˜ë©° DRY ì›ì¹™ì„ ì¤€ìˆ˜í•  ìˆ˜ ìˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì´ êµ¬ì¡°ë¥¼ í†µí•´ í•œ ë²ˆ ì˜ì¡´ì„±ì´ ì»¨íŠ¸ë¡¤ëŸ¬ì— ì£¼ì…ë˜ë©´ ë” ì´ìƒì˜ ì£¼ì…ì´ í•„ìš” ì—†ì´ í•´ë‹¹ ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ëª¨ë“  ê²½ë¡œ ë©”ì„œë“œì—ì„œ ì‚¬ìš©ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì½”ë“œë² ì´ìŠ¤ë¥¼ ê°„ì†Œí™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n<!-- TIL ìˆ˜í‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n/assets/img/2024-07-06-ThisisWhyFastAPIisNOTProduction-ReadyYet_1.png\n\n# í•œ ë²ˆ ì£¼ì…í•˜ê³  ì—¬ëŸ¬ ë²ˆ ì‚¬ìš©í•˜ê¸°\n\nPyNestì˜ ëª¨ë“ˆí™”ëœ ì•„í‚¤í…ì²˜ë¥¼ ì‚¬ìš©í•˜ë©´ ì»¨íŠ¸ë¡¤ëŸ¬ í´ë˜ìŠ¤ì˜ ìƒì„±ìì— ì¢…ì†ì„±ì„ ì£¼ì…í•  ìˆ˜ ìˆì–´ì„œ ë§¤ë²ˆ ëª¨ë“  ë¼ìš°íŠ¸ì— ì¢…ì†ì„±ì„ ë°˜ë³µí•´ì„œ ì£¼ì…í•  í•„ìš” ì—†ì´ ëª¨ë“  ë¼ìš°íŠ¸ì—ì„œ ì´ ì¢…ì†ì„±ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì˜ˆì‹œ â€”\n\n<!-- TIL ìˆ˜í‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```python\nfrom nest.core import Injectable, Controller, Get, Post\n\n@Injectable\nclass Logger:\n    def __init__(self):\n        print(\"Logger Starting\")\n        time.sleep(2)\n        print(f\"Logger Started at - {self}\")\n\n    def log(self, message):\n        print(f\"Logging - {message}\")\n\n\n@Controller(\"items\")\nclass ItemsController:\n\n  # Inject Once\n  def __init__(self, logger: Logger):\n      self.logger = logger\n\n\n  # Use Many\n  @Get(\"/\")\n  async def read_items(self):\n      self.logger.log(\"list of items\")\n      return {\"message\": \"Items\"}\n\n  @Post(\"/{item}\")\n  async def create_item(self, item: str):\n      self.logger.log(\"creating item\")\n      return {\"message\": f\"Item created - {item}\"}\r\n```\n\nì´ ëª¨ë“ˆí™”ëœ ì ‘ê·¼ ë°©ì‹ì„ í†µí•´ ì»¨íŠ¸ë¡¤ëŸ¬ ìƒì„±ìì— í•„ìš”í•œ ë§Œí¼ì˜ ì˜ì¡´ì„±ì„ ì£¼ì…í•˜ê³  ì´ëŸ¬í•œ ì˜ì¡´ì„±ì„ í´ë˜ìŠ¤ ë©”ì„œë“œì—ì„œ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ê²°ê³¼ë¡œ ì½”ë“œê°€ í›¨ì”¬ ë” ê¹”ë”í•´ì§€ë©° ì½”ë“œë¥¼ ë‹¤ì‹œ ì‘ì„±í•˜ê±°ë‚˜ ë³µì¡í•˜ê²Œ ë§Œë“¤ í•„ìš”ê°€ ì—†ì–´ì§‘ë‹ˆë‹¤.\n\n# ì‹±ê¸€í„´ íŒ¨í„´ì˜ í˜ì„ ë°›ì•„ë“¤ì´ì„¸ìš”\n\nì´ì „ì— ë…¼ì˜í•œ ë°”ì™€ ê°™ì´, FastAPIì˜ DI ë§¤ì»¤ë‹ˆì¦˜ì˜ ê°€ì¥ í° ë‹¨ì ì€ ì¢…ì†ì„±ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ì‹±ê¸€í„´ íŒ¨í„´ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²ƒì…ë‹ˆë‹¤. ìš°ë¦¬ëŠ” ì¢…ì†ì„±ì´ ëª¨ë“  ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ë§ˆë‹¤ ì´ˆê¸°í™”ë˜ì–´ì•¼ í•œë‹¤ëŠ” ê²ƒì„ ê´€ì°°í–ˆìŠµë‹ˆë‹¤.\n\n\n<!-- TIL ìˆ˜í‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nPyNestì—ì„œëŠ” í˜„ì—­ì—ì„œ \"injector\" ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©í•©ë‹ˆë‹¤. ì´ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” í˜„ëŒ€ì ì¸ Python ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì¢…ì†ì„±ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•œ íŒ¨í‚¤ì§€ì…ë‹ˆë‹¤. injectorì€ ì‹±ê¸€í†¤ íŒ¨í„´ê³¼ ë©€í‹° ë°”ì¸ë”©ì„ ì§€ì›í•©ë‹ˆë‹¤. í´ë˜ìŠ¤ê°€ Injectableë¡œ í‘œì‹œë˜ì–´ ì¢…ì†ì„±ìœ¼ë¡œ ë“±ë¡ë˜ë©´, injectorëŠ” í•´ë‹¹ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ê·¸ ì°¸ì¡°ë¥¼ ì €ì¥í•©ë‹ˆë‹¤. ì´ injectable ê°ì²´ì— ëŒ€í•œ ëª¨ë“  í˜¸ì¶œì€ injectorë¥¼ í†µí•´ ì´ë£¨ì–´ì§€ë©°, injectable ê°ì²´ì˜ ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\n\n## ì½”ë“œë¡œ ì‚´í´ë³´ê¸°\n\në¨¼ì €, PyNestì—ì„œ ëª¨ë“  ê´€ë ¨ importë¬¸ì„ ì •ë¦¬í•´ ë´…ì‹œë‹¤\n\n```python\nimport logging\nimport os\n\nfrom nest.core import (\n    Controller,\n    Delete,\n    Get,\n    Injectable,\n    Module,\n    Post,\n    Put,\n    PyNestFactory,\n)\nimport time\n```\n\n<!-- TIL ìˆ˜í‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\në‹¤ìŒìœ¼ë¡œ ì£¼ì…í•˜ë ¤ëŠ” ë‘ ê°œì˜ ì œê³µìì™€ ë¡œì§ ë ˆì´ì–´ë¥¼ í¬í•¨í•˜ëŠ” ì£¼ìš” ì„œë¹„ìŠ¤ë¥¼ ì„ ì–¸í•  ê²ƒì…ë‹ˆë‹¤.\n\n```js\n# êµ¬ì„± ì œê³µì\n@Injectable()\nclass ConfigService:\n    def __init__(self):\n        time.sleep(2)\n        print(f\"ConfigService ì‹œì‘ - {self}\")\n        self.config = os.environ\n\n    def get(self, key: str):\n        return self.config.get(key)\n\n# ë¡œê±° ì œê³µì\n@Injectable()\nclass Logger:\n    def __init__(self, config_service: ConfigService):\n        time.sleep(2)\n        print(f\"ë¡œê±° ì‹œì‘ - {self}\")\n        self.config_service = config_service\n        self.log = logging.getLogger(__name__)\n\n# ì£¼ìš” ì„œë¹„ìŠ¤\n@Injectable()\nclass ItemService:\n    def __init__(self, logger: Logger):\n        time.sleep(2)\n        print(f\"ItemService ì‹œì‘ - {self}\")\n        self.logger = logger\n        self.items = [{\"item_name\": \"Foo\"}, {\"item_name\": \"Bar\"}, {\"item_name\": \"Baz\"}]\n\n    def get(self):\n        self.logger.log.info(\"ì—”ë“œí¬ì¸íŠ¸ í˜¸ì¶œë¨\")\n        return self.items\n\n    def post(self, item: dict):\n        self.items.append(item)\n        return self.items\n\n    def put(self, item: dict):\n        self.items.append(item)\n        return self.items\n\n    def delete(self, item: dict):\n        self.items.remove(item)\n        return self.items\n```\n\nì´ì œ Controllerë¥¼ ìƒì„±í•˜ê³  ì„œë¹„ìŠ¤ì— ì£¼ì…í•©ë‹ˆë‹¤ â€”\n\n```js\n@Controller(\"items\")\nclass ItemController:\n    def __init__(self, item_service: ItemService):\n        print(\"ItemController ì‹œì‘ - {self}\")\n        self.item_service = item_service\n\n    @Get(\"/\")\n    def get(self):\n        return self.item_service.get()\n\n    @Post(\"/\")\n    def post(self, item: dict):\n        return self.item_service.post(item)\n\n    @Put(\"/\")\n    def put(self, item: dict):\n        return self.item_service.put(item)\n\n    @Delete(\"/\")\n    def delete(self, item: dict):\n        return self.item_service.delete(item)\n```\n\n<!-- TIL ìˆ˜í‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nëŒ€ë‹¨í•´ìš”, ê±°ì˜ ë‹¤ ì™”ì–´ìš”. ì´ì œ ì•± ëª¨ë“ˆì„ ì •ì˜í•˜ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•´ ë´…ì‹œë‹¤ -\n\n```js\n@Module(\n    controllers=[ItemController],\n    providers=[Logger],\n)\nclass AppModule:\n    pass\n\n\napp = PyNestFactory.create(AppModule)\n\nif __name__ == \"__main__\":\n    import uvicorn\n\n    uvicorn.run(app.http_server, host=\"0.0.0.0\", port=8623)\n```\n\nê²°ê³¼ â€”\n\n```js\nConfigService starting - <__main__.ConfigService object at 0x10444d580>\nLogger Starting - <__main__.Logger object at 0x10444daf0>\nItemService starting - <__main__.ItemService object at 0x10444d190>\n\nINFO:     Started server process [64770]\nINFO:     Waiting for application startup.\nINFO:     Application startup complete.\nINFO:     Uvicorn running on http://0.0.0.0:8623 (Press CTRL+C to quit)\n\n\nINFO:     127.0.0.1:63810 - \"GET /items/ HTTP/1.1\" 200 OK\nINFO:     127.0.0.1:63824 - \"PUT /items/ HTTP/1.1\" 200 OK\nINFO:     127.0.0.1:63840 - \"POST /items/ HTTP/1.1\" 200 OK\n```\n\n<!-- TIL ìˆ˜í‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nì™€ìš°! ì •ë§ ë©‹ì§€ë„¤ìš”. ìš°ë¦¬ëŠ” Injectables ê°ì²´ë¥¼ í•œ ë²ˆë§Œ ì´ˆê¸°í™”í•˜ê³ , ê·¸ ì´í›„ë¡œëŠ” ì»¨í…Œì´ë„ˆê°€ í•´ë‹¹ ê°ì²´ë“¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê´€ë¦¬í•œë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆì–´ìš”.\n\n/assets/img/2024-07-06-ThisisWhyFastAPIisNOTProduction-ReadyYet_2.png\n\n# PyNest DI ë§¤ë‹ˆí˜ìŠ¤íŠ¸\n\n## ì£¼ì… ê°€ëŠ¥í•œ ê°ì²´\n\n<!-- TIL ìˆ˜í‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- Injectable-to-Injectable Injection: Injectable ê°ì²´ëŠ” ë‹¤ë¥¸ Injectable ê°ì²´ë¥¼ ì£¼ì…í•  ìˆ˜ ìˆì–´ì„œ ì¼ê´€ì„± ìˆê³  í†µí•©ëœ ì¢…ì†ì„± ê³„ì¸µì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n## Controllers\n\n- Controller Injection: ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” Injectable ê°ì²´ë¥¼ ì£¼ì…í•  ìˆ˜ ìˆì–´ì„œ í•„ìš”ì— ë”°ë¼ ì„œë¹„ìŠ¤ì™€ ë¦¬í¬ì§€í† ë¦¬ì— ì±…ì„ì„ ìœ„ì„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n## Dependency Graph\n\n<!-- TIL ìˆ˜í‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- ë¹„ìˆœí™˜ ì˜ì¡´ì„± ê·¸ë˜í”„: ì˜ì¡´ì„±ì€ ìœ í–¥ ë¹„ìˆœí™˜ ê·¸ë˜í”„ (DAG)ë¥¼ í˜•ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ìˆœí™˜ ì˜ì¡´ì„±ì´ ì—†ì–´ì•¼ í•˜ë©°, ì´ë¥¼ í†µí•´ ì²˜ë¦¬ ê°€ëŠ¥í•œ ì˜ì¡´ì„± í•´ê²° ë° ëŸ°íƒ€ì„ ì˜¤ë¥˜ë‚˜ ë¬´í•œ ë£¨í”„ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n## ì˜ì¡´ì„± í•´ê²°ê³¼ ê´€ë¦¬\n\n- ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™” ê³¼ì •ì—ì„œ IoC ì»¨í…Œì´ë„ˆëŠ” ëª¨ë“  ì˜ì¡´ì„±ì„ í•´ê²°í•˜ê³ , ì•„ì§ ë“±ë¡ë˜ì§€ ì•Šì€ ê°œì²´ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ë©°, ì´ëŸ¬í•œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê´€ë¦¬í•˜ì—¬ ì£¼ì…í•˜ëŠ” ìœ„ì¹˜ì—ì„œ ì œê³µë  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.\n\n## ì œê³µì(Providers) ë‚´ë³´ë‚´ê¸°\n\n<!-- TIL ìˆ˜í‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- ëª¨ë“ˆì€ ì œê³µìë¥¼ ë‚´ë³´ë‚¼ ìˆ˜ ìˆìœ¼ë©°, ì´ëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ ë‚´ì˜ ë‹¤ë¥¸ ëª¨ë“ˆì—ì„œ ì‚¬ìš©ë˜ê±°ë‚˜ ì£¼ì…ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n## ëª¨ë“ˆ ê°„ ì œê³µì ì£¼ì…\n\n- ë‹¤ë¥¸ ëª¨ë“ˆì—ì„œ ì œê³µìë¥¼ ì£¼ì…í•˜ë ¤ë©´ í•´ë‹¹ ì›í•˜ëŠ” ì œê³µìë¥¼ í¬í•¨í•˜ëŠ” ëª¨ë“ˆì„ ëª…ì‹œì ìœ¼ë¡œ ê°€ì ¸ì™€ì•¼ í•©ë‹ˆë‹¤.\n\n## ì¸ìŠ¤í„´ìŠ¤ ì°¸ì¡° ë° ì¬ì‚¬ìš©\n\n<!-- TIL ìˆ˜í‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‚½ì…ëœ ê³µê¸‰ìë¥¼ í˜¸ì¶œí•˜ë©´ ì´ë¯¸ ì´ˆê¸°í™”ëœ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¸ì¡°í•˜ì—¬ ì¬ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•¨ìœ¼ë¡œì¨ í•„ìš” ì—†ëŠ” ê³µê¸‰ì ì¸ìŠ¤í„´ìŠ¤ì˜ ìƒì„±ì„ ë°©ì§€í•˜ê³  í•„ìš”í•  ë•Œ ì‹±ê¸€í†¤ê³¼ ê°™ì€ íŒ¨í„´ì„ ì¤€ìˆ˜í•©ë‹ˆë‹¤.\n\n# ê²°ë¡ : DIì— ìˆì–´ PyNestê°€ ì„ í˜¸ë˜ëŠ” ì´ìœ \n\nPyNestì˜ DI ì ‘ê·¼ ë°©ì‹ì€ ì½”ë“œ ì¡°ì§í™”ì™€ ìœ ì§€ ë³´ìˆ˜ ì¸¡ë©´ì—ì„œ ëª…í™•í•œ ì¥ì ì„ ì œê³µí•˜ë©°, íŠ¹íˆ ëª¨ë“ˆí™” ë° ë°˜ë³µì„ í”¼í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•œ ëŒ€ê·œëª¨ í”„ë¡œì íŠ¸ì— ì í•©í•©ë‹ˆë‹¤. ì‘ìš© í”„ë¡œê·¸ë¨ êµ¬ì¡° ë‚´ì—ì„œ ë” ë†’ì€ ìˆ˜ì¤€ì—ì„œ ì˜ì¡´ì„±ì„ ì£¼ì…í•  ìˆ˜ ìˆë„ë¡ í•¨ìœ¼ë¡œì¨, PyNestëŠ” ë³´ë‹¤ DRY(ë°˜ë³µí•˜ì§€ ë§ˆë¼) ì½”ë“œë² ì´ìŠ¤ë¥¼ ìš©ì´í•˜ê²Œ ë§Œë“¤ì–´ ì¤Œìœ¼ë¡œì¨ ì˜¤ë¥˜ ê°€ëŠ¥ì„±ì„ ì¤„ì´ê³  ë¦¬íŒ©í„°ë§ ë° í…ŒìŠ¤íŠ¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ê°„ì†Œí™”í•©ë‹ˆë‹¤.\n\në°˜ë©´ì— FastAPIì˜ DI ì‹œìŠ¤í…œì€ ê°ìì˜ ê°•ì ì„ ê°–ê³  ìˆì§€ë§Œ, í•¨ìˆ˜ ìˆ˜ì¤€ì—ì„œì˜ ì£¼ì… ìš”êµ¬ëŠ” ë¶ˆí•„ìš”í•˜ê³  ì¤‘ë³µì ì¸ ìš”ì†Œë¥¼ ë„ì…í•  ìˆ˜ ìˆìœ¼ë©°, ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë³µì¡ì„±ì„ ë”í•´ê°ì— ë”°ë¼ ìœ ì§€ ë³´ìˆ˜ ë° í™•ì¥ì„±ì—ì„œ ì˜¤íˆë ¤ ì—­íš¨ê³¼ë¥¼ ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n<!-- TIL ìˆ˜í‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n# ìì›\n\n- ë¹„ë™ê¸° ë§ˆë²•: PyNestì™€ SQLAlchemy 2.0ì´ íŒŒì´ì¬ ì•± ì„±ëŠ¥ì„ 25% í–¥ìƒì‹œí‚µë‹ˆë‹¤.\n- FastAPI ì´ìƒ: PyNestë¥¼ ì´ìš©í•œ 2024ë…„ íŒŒì´ì¬ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì˜ ì§„í™”\n- ì˜ì¡´ì„± ì£¼ì… 101 - PyNestë¥¼ ì´ìš©í•œ íŒŒì´ì¬ ì›¹ ì•±ì˜ ì˜ì¡´ì„± ì£¼ì… ë‹¨ìˆœí™”\n- PyNest PyPI: https://pypi.org/project/pynest-api\n- ê³µì‹ ë¬¸ì„œ: https://pythonnest.github.io/PyNest/\n- GitHub ì €ì¥ì†Œ: https://github.com/PythonNest/PyNest\n\n# ê°„ë‹¨í•˜ê²Œ ì„¤ëª…í•˜ê¸° ğŸš€\n\nIn Plain English ì»¤ë®¤ë‹ˆí‹°ì˜ ì¼ì›ì´ ë˜ì–´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ê³„ì†í•˜ì‹œê¸° ì „ì—:\n\n<!-- TIL ìˆ˜í‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- ê¸€ì“´ì´ë¥¼ í´ë©í•˜ê³  íŒ”ë¡œìš°í•´ì£¼ì„¸ìš”! ğŸ‘ï¸ï¸\n- íŒ”ë¡œìš°í•˜ê¸°: X | LinkedIn | YouTube | Discord | ë‰´ìŠ¤ë ˆí„°\n- ë‹¤ë¥¸ í”Œë«í¼ ë°©ë¬¸í•˜ê¸°: CoFeed | Differ\n- ë” ë§ì€ ì½˜í…ì¸ : PlainEnglish.io","ogImage":{"url":"/assets/img/2024-07-06-ThisisWhyFastAPIisNOTProduction-ReadyYet_0.png"},"coverImage":"/assets/img/2024-07-06-ThisisWhyFastAPIisNOTProduction-ReadyYet_0.png","tag":["Tech"],"readingTime":17},"content":"<!doctype html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<meta content=\"width=device-width, initial-scale=1\" name=\"viewport\">\n</head>\n<body>\n<h1>ìš”ì•½</h1>\n<p>í˜„ëŒ€ ì›¹ ê°œë°œì—ì„œ íš¨ìœ¨ì ìœ¼ë¡œ ì¢…ì† í•­ëª©ì„ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ í™•ì¥ ê°€ëŠ¥í•˜ê³  ìœ ì§€ ê´€ë¦¬ ê°€ëŠ¥í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“œëŠ” ë° ì¤‘ìš”í•©ë‹ˆë‹¤. ì˜ì¡´ì„± ì£¼ì…(Dependency Injection, DI) ë° ì œì–´ì˜ ì—­ì „(Inversion of Control, IoC)ì€ ì´ ìš”êµ¬ë¥¼ í•´ê²°í•˜ëŠ” ë‘ ê°€ì§€ ë””ìì¸ ì›ì¹™ì…ë‹ˆë‹¤. ë³¸ ë¬¸ì„œì—ì„œëŠ” DIì™€ IoCê°€ ë‘ ê°€ì§€ ì¸ê¸° ìˆëŠ” Python í”„ë ˆì„ì›Œí¬ì¸ FastAPI ë° PyNestì—ì„œ ì–´ë–»ê²Œ êµ¬í˜„ë˜ëŠ”ì§€ ì•Œì•„ë´…ë‹ˆë‹¤. ìš°ë¦¬ëŠ” ë‘ í”„ë ˆì„ì›Œí¬ë¥¼ ì†Œê°œí•˜ê³ , DIì— ëŒ€í•œ ì ‘ê·¼ ë°©ì‹ì„ ìì„¸íˆ ì‚´í´ë³´ë©°, ë‹¤ìŒ í”„ë¡œì íŠ¸ì— ìµœì ì¸ ì„ íƒì„ ë„ì™€ì¤„ ì¢…í•©ì ì¸ ë¹„êµë¥¼ ì œê³µí•  ê²ƒì…ë‹ˆë‹¤.</p>\n<p>/assets/img/2024-07-06-ThisisWhyFastAPIisNOTProduction-ReadyYet_0.png</p>\n<h1>FastAPI ì†Œê°œ</h1>\n<!-- TIL ìˆ˜í‰ -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>FastAPIì€ í‘œì¤€ Python íƒ€ì… íŒíŠ¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ëŠ” Python 3.7+ìš© í˜„ëŒ€ì ì´ê³  ë¹ ë¥¸ ì›¹ í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤. OpenAPIì™€ JSON Schemaì˜ ìë™ ìƒì„± ê¸°ëŠ¥ì„ ì œê³µí•˜ì—¬ APIë¥¼ ë¹ ë¥´ê³  íš¨ìœ¨ì ìœ¼ë¡œ ë§Œë“œëŠ” ë° ë§¤ìš° í¸ë¦¬í•©ë‹ˆë‹¤. FastAPIì˜ DI(Dependency Injection) ì ‘ê·¼ ë°©ì‹ì€ ë‚´ì¥ë˜ì–´ ìˆìœ¼ë©°, Pythonì˜ íƒ€ì… íŒíŠ¸ë¥¼ í™œìš©í•˜ì—¬ ì˜ì¡´ì„±ì„ ì›í™œí•˜ê²Œ ì£¼ì…í•©ë‹ˆë‹¤.</p>\n<h1>FastAPIì˜ DI(Dependency Injection) ì ‘ê·¼ ë°©ì‹</h1>\n<p>FastAPIì—ì„œëŠ” ì˜ì¡´ì„± ì£¼ì…ì´ í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜ ë‚´ì˜ Depends í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì²˜ë¦¬ë©ë‹ˆë‹¤. ì´ëŠ” FastAPIì—ê²Œ ì˜ì¡´ì„± í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë„ë¡ ì§€ì‹œí•˜ê³  í•´ë‹¹ ë§¤ê°œë³€ìˆ˜ì˜ ì¸ìˆ˜ ê°’ìœ¼ë¡œ ê²°ê³¼ë¥¼ ì‚¬ìš©í•˜ë„ë¡ í•©ë‹ˆë‹¤.</p>\n<h2>ì˜ˆì‹œ: FastAPI ì˜ì¡´ì„± ì£¼ì…</h2>\n<!-- TIL ìˆ˜í‰ -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">from</span> fastapi <span class=\"hljs-keyword\">import</span> Depends, FastAPI\n\napp = FastAPI()\n\n<span class=\"hljs-comment\"># ì˜ì¡´ì„± í•¨ìˆ˜</span>\n<span class=\"hljs-keyword\">async</span> <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">common_parameters</span>(<span class=\"hljs-params\">q: <span class=\"hljs-built_in\">str</span> = <span class=\"hljs-literal\">None</span>, skip: <span class=\"hljs-built_in\">int</span> = <span class=\"hljs-number\">0</span>, limit: <span class=\"hljs-built_in\">int</span> = <span class=\"hljs-number\">100</span></span>):\n    <span class=\"hljs-keyword\">return</span> {<span class=\"hljs-string\">\"q\"</span>: q, <span class=\"hljs-string\">\"skip\"</span>: skip, <span class=\"hljs-string\">\"limit\"</span>: limit}\n\n<span class=\"hljs-comment\"># í•´ë‹¹ ì˜ì¡´ì„±ì„ ì‚¬ìš©í•˜ëŠ” ë¼ìš°íŠ¸</span>\n<span class=\"hljs-meta\">@app.get(<span class=\"hljs-params\"><span class=\"hljs-string\">\"/items/\"</span></span>)</span>\n<span class=\"hljs-keyword\">async</span> <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">read_items</span>(<span class=\"hljs-params\">commons: <span class=\"hljs-built_in\">dict</span> = Depends(<span class=\"hljs-params\">common_parameters</span>)</span>):\n    <span class=\"hljs-keyword\">return</span> commons\n</code></pre>\n<p>ì´ ì˜ˆì—ì„œ <code>common_parameters</code>ì€ <code>/items/</code> ë¼ìš°íŠ¸ì— ì ‘ê·¼í•  ë•Œë§ˆë‹¤ ì‹¤í–‰ë˜ëŠ” ì˜ì¡´ì„± í•¨ìˆ˜ì…ë‹ˆë‹¤.</p>\n<h2>ì˜ì¡´ì„± ì£¼ì…ì—ì„œì˜ ì¤‘ë³µì„±</h2>\n<p>FastAPIëŠ” ê° ë¼ìš°íŠ¸ì˜ í•¨ìˆ˜ ìˆ˜ì¤€ì—ì„œ ì˜ì¡´ì„±ì´ ì£¼ì…ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ì—¬ëŸ¬ ë¼ìš°íŠ¸ê°€ ë™ì¼í•œ ì˜ì¡´ì„±ì„ í•„ìš”ë¡œ í•˜ëŠ” ê²½ìš° ê° ë¼ìš°íŠ¸ í•¸ë“¤ëŸ¬ í•¨ìˆ˜ì— ë³„ë„ë¡œ ì£¼ì…í•´ì•¼ í•©ë‹ˆë‹¤. íŠ¹íˆ ë§ì€ ìˆ˜ì˜ ë¼ìš°íŠ¸ì™€ ê³µìœ  ì˜ì¡´ì„±ì´ ìˆëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ì—ì„œ ë°˜ë³µì ì´ê³  ì¥í™©í•œ ì½”ë“œë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<!-- TIL ìˆ˜í‰ -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<h2>ì˜ˆì œ</h2>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">from</span> fastapi <span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">Depends</span>, <span class=\"hljs-title class_\">FastAPI</span>\n\napp = <span class=\"hljs-title class_\">FastAPI</span>()\n\n# ì˜ì¡´ì„±\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Logger</span>:\n    def <span class=\"hljs-title function_\">__init__</span>(self):\n        <span class=\"hljs-title function_\">print</span>(<span class=\"hljs-string\">\"ë¡œê±° ì‹œì‘\"</span>)\n        time.<span class=\"hljs-title function_\">sleep</span>(<span class=\"hljs-number\">2</span>)\n        <span class=\"hljs-title function_\">print</span>(f<span class=\"hljs-string\">\"ë¡œê±° ì‹œì‘ë¨ - {self}\"</span>)\n\n    def <span class=\"hljs-title function_\">log</span>(self, message):\n        <span class=\"hljs-title function_\">print</span>(f<span class=\"hljs-string\">\"ë¡œê¹… - {message}\"</span>)\n\n\n# ë™ì¼í•œ ì˜ì¡´ì„±ì„ ì£¼ì…í•˜ëŠ” ì—¬ëŸ¬ ë¼ìš°íŠ¸\n@app.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">\"/items/\"</span>)\n<span class=\"hljs-keyword\">async</span> def <span class=\"hljs-title function_\">read_items</span>(<span class=\"hljs-attr\">logger</span>: <span class=\"hljs-title class_\">Annotated</span>[<span class=\"hljs-title class_\">Logger</span>, <span class=\"hljs-title class_\">Depends</span>(<span class=\"hljs-title class_\">Logger</span>)]):\n    logger.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">\"ì•„ì´í…œ ëª©ë¡\"</span>)\n    <span class=\"hljs-keyword\">return</span> {<span class=\"hljs-string\">\"message\"</span>: <span class=\"hljs-string\">\"ì•„ì´í…œ\"</span>}\n\n@app.<span class=\"hljs-title function_\">post</span>(<span class=\"hljs-string\">\"/items/\"</span>)\n<span class=\"hljs-keyword\">async</span> def <span class=\"hljs-title function_\">create_item</span>(<span class=\"hljs-attr\">logger</span>: <span class=\"hljs-title class_\">Annotated</span>[<span class=\"hljs-title class_\">Logger</span>, <span class=\"hljs-title class_\">Depends</span>(<span class=\"hljs-title class_\">Logger</span>)]):\n    logger.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">\"ì•„ì´í…œ ìƒì„± ì¤‘\"</span>)\n    <span class=\"hljs-keyword\">return</span> {<span class=\"hljs-string\">\"message\"</span>: <span class=\"hljs-string\">\"ì•„ì´í…œ ìƒì„±ë¨\"</span>}\n</code></pre>\n<p>ìƒˆë¡œìš´ DBê°€ í•„ìš”í•œ ëª¨ë“  ìƒˆë¡œìš´ ë¼ìš°íŠ¸ì—ì„œ ìš°ë¦¬ëŠ” DBë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì£¼ì…í•´ì•¼ í•©ë‹ˆë‹¤. ì•½ê°„ í¬ê²Œ í™•ì¥í•´ë³´ë©´ ëª¨ë“  ë¼ìš°íŠ¸ê°€ ê³µìœ ëœ ë¡œê±°, ê³µìœ ëœ ì„¤ì •, ê·¸ë¦¬ê³  DB ì—°ê²°ì„ ì£¼ì…í•´ì•¼ í•œë‹¤ê³  ìƒìƒí•´ë³´ë©´, ê°™ì€ ì½”ë“œë¥¼ ê³„ì† ë°˜ë³µí•´ì„œ ì‘ì„±í•´ì•¼ í•˜ëŠ” ìƒí™©ì´ ìƒê¸¸ ê²ƒì…ë‹ˆë‹¤.</p>\n<h1>FastAPIì—ì„œ í´ë˜ìŠ¤ ì˜ì¡´ì„± ì£¼ì…í•˜ê¸°</h1>\n<!-- TIL ìˆ˜í‰ -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>FastAPI ë£¨íŠ¸ì—ì„œ ë‹¨ì¼ ë° ì—¬ëŸ¬ ì¢…ì†ì„±ì„ ì£¼ì…í•˜ê³  ëª¨ë“  í˜¸ì¶œë§ˆë‹¤ ê°ì²´ë¥¼ ì¬ì„¤ì •í•˜ëŠ” ë¬¸ì œë¥¼ íƒìƒ‰í•´ ë³´ëŠ” ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì‚´í´ë´…ì‹œë‹¤.</p>\n<p>ë‹¨ì¼ ì¢…ì†ì„± ì£¼ì… - ì´ ì˜ˆì‹œì—ì„œëŠ” API ë£¨íŠ¸ë¡œ ì£¼ì…ë  Logger ê°ì²´ë¥¼ ë§Œë“­ë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">from</span> fastapi <span class=\"hljs-keyword\">import</span> FastAPI, Depends\n<span class=\"hljs-keyword\">import</span> time\n\napp = FastAPI()\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Logger</span>:\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__init__</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">\"Logger Starting\"</span>)\n        time.sleep(<span class=\"hljs-number\">2</span>)\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f\"Logger Started at - <span class=\"hljs-subst\">{self}</span>\"</span>)\n        self.params = {}\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">log</span>(<span class=\"hljs-params\">self, message</span>):\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f\"Logging - <span class=\"hljs-subst\">{message}</span>\"</span>)\n\n<span class=\"hljs-meta\">@app.get(<span class=\"hljs-params\"><span class=\"hljs-string\">\"/\"</span></span>)</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">get</span>(<span class=\"hljs-params\">logger: Logger = Depends(<span class=\"hljs-params\">Logger</span>)</span>):\n    logger.log(<span class=\"hljs-string\">\"Endpoint hit\"</span>)\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">\"Logger works\"</span>\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">\"__main__\"</span>:\n    <span class=\"hljs-keyword\">import</span> uvicorn\n    uvicorn.run(app, host=<span class=\"hljs-string\">\"0.0.0.0\"</span>, port=<span class=\"hljs-number\">8000</span>)\n</code></pre>\n<p>ì¶œë ¥:</p>\n<!-- TIL ìˆ˜í‰ -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>ë¡œê·¸ ì¶œë ¥ ì‹œì‘\në¡œê·¸ ì¶œë ¥ ì‹œì‘ ìœ„ì¹˜ - &#x3C;main.Logger object at 0x102f3ddf0>\në¡œê·¸ - ì—”ë“œí¬ì¸íŠ¸ ìš”ì²­\nì •ë³´: 127.0.0.1:64670 - \"GET / HTTP/1.1\" 200 OK</p>\n<p>ë¡œê·¸ ì¶œë ¥ ì‹œì‘\në¡œê·¸ ì¶œë ¥ ì‹œì‘ ìœ„ì¹˜ - &#x3C;main.Logger object at 0x102f3dbe0>\në¡œê·¸ - ì—”ë“œí¬ì¸íŠ¸ ìš”ì²­\nì •ë³´: 127.0.0.1:64670 - \"GET / HTTP/1.1\" 200 OK</p>\n<p>ë¡œê·¸ ì¶œë ¥ ì‹œì‘\në¡œê·¸ ì¶œë ¥ ì‹œì‘ ìœ„ì¹˜ - &#x3C;main.Logger object at 0x102f3dbb0>\në¡œê·¸ - ì—”ë“œí¬ì¸íŠ¸ ìš”ì²­\nì •ë³´: 127.0.0.1:64670 - \"GET / HTTP/1.1\" 200 OK</p>\n<p>ìœ„ì˜ ê²°ê³¼ë¥¼ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë£¨íŠ¸ ê²½ë¡œì— ì ‘ì†í•˜ë ¤ê³  í•  ë•Œ, ë¡œê±° ê°ì²´ê°€ ì´ˆê¸°í™”ë˜ê³  \"0x102f3ddf0\" ìœ„ì¹˜ë¡œ ì„¤ì •ë˜ì—ˆìŒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ ë‘ ë²ˆì§¸ë¡œ ë™ì¼í•œ ê²½ë¡œì— ì•¡ì„¸ìŠ¤í•˜ë©´ ë¡œê±° ê°ì²´ê°€ ë‹¤ì‹œ ì´ˆê¸°í™”ë©ë‹ˆë‹¤. ì´ ë•ŒëŠ” ë‹¤ë¥¸ ë©”ëª¨ë¦¬ ìœ„ì¹˜ì— ì„¤ì •ë©ë‹ˆë‹¤. ë£¨íŠ¸ ê²½ë¡œë¥¼ í˜¸ì¶œí•  ë•Œë§ˆë‹¤ ë¡œê±° ì´ˆê¸°í™”ì— 2ì´ˆì˜ ëŒ€ê¸° ì‹œê°„ì´ ì†Œìš”ë©ë‹ˆë‹¤.</p>\n<p>ê·¸ë ‡ë‹¤ë©´ ë¡œê±°ì— ì˜ì¡´í•˜ëŠ” ì„œë¹„ìŠ¤ê°€ í•„ìš”í•œ ê²½ìš° ì–´ë–»ê²Œ ë ê¹Œìš”?</p>\n<p>from fastapi import FastAPI, Depends\nimport time\nimport random</p>\n<p>class Logger:\ndef <strong>init</strong>(self):\nprint(\"ë¡œê·¸ ì¶œë ¥ ì‹œì‘\")\ntime.sleep(2)\nprint(f\"ë¡œê·¸ ì¶œë ¥ ì‹œì‘ ìœ„ì¹˜ - {self}\")</p>\n<pre><code>def log(self, message):\n    print(f\"ë¡œê·¸ - {message}\")\n</code></pre>\n<p>class Service:\ndef <strong>init</strong>(self, logger: Logger = Depends(Logger)):\nself.logger = logger\nprint(\"ì„œë¹„ìŠ¤ ì‹œì‘\")\ntime.sleep(1)\nprint(f\"ì„œë¹„ìŠ¤ ì‹œì‘ ìœ„ì¹˜ - {self}\")</p>\n<pre><code>def ì‹¤í–‰(self):\n    self.logger.log(\"ì–´ë–¤ ì‘ì—…ì„ ìˆ˜í–‰ ì¤‘\")\n    return f\"ì‘ì—… ìˆ˜í–‰, {random.random()}\"\n</code></pre>\n<p>app = FastAPI()</p>\n<p>@app.get(\"/\")\ndef get(service: Service = Depends(Service)):\nreturn f\"{service.ì‹¤í–‰()}\"</p>\n<p>if <strong>name</strong> == \"<strong>main</strong>\":\nimport uvicorn\nuvicorn.run(app, host=\"0.0.0.0\", port=8000)</p>\n<!-- TIL ìˆ˜í‰ -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>ë‹¹ì—°íˆìš”! FastAPI ë° IOC ì»¨í…Œì´ë„ˆì—ì„œì˜ ì§€ì› ë¶€ì¡±ì€ ì´ ì—”ë“œí¬ì¸íŠ¸ë¥¼ í˜¸ì¶œí•  ë•Œë§ˆë‹¤ ì´ë¯¸ ì´ˆê¸°í™”ëœ ê°ì²´ë“¤ì„ ì´ˆê¸°í™”í•˜ê¸° ìœ„í•´ 3ì´ˆì˜ ì§€ì—° ì‹œê°„ì„ ì§€ë¶ˆí•´ì•¼ í•œë‹¤ëŠ” ì£¼ëœ ì´ìœ ì…ë‹ˆë‹¤. ì´ íŒ¨í„´ì€ ì§„ì •í•œ ì•ˆí‹°-íŒ¨í„´ì´ë©°, FastAPIì˜ ì•½ì ì„ ë“œëŸ¬ë‚¼ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ê³  ìˆ˜ì‹­ ì‹œê°„ì„ ë‚­ë¹„í•œ í›„, FastAPI ìì²´ê°€ ê·¸ëŸ¬í•œ ê¸°ëŠ¥ì„ ì œê³µí•˜ì§€ ëª»í•˜ë©°, ìƒˆë¡­ê³  ë” í†µí•©ì ì¸ ì ‘ê·¼ì´ í•„ìš”í•˜ë‹¤ëŠ” ê²ƒì„ ì´í•´í–ˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì €ëŠ” PyNestë¥¼ ë§Œë“¤ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” ì˜ì¡´ì„± ì£¼ì…ê³¼ ëª¨ë“ˆì„±ì— ì¤‘ì ì„ ë‘” Python ë©”íƒ€-í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤.</p>\n<h1>PyNest: ëª¨ë“ˆì‹ DI ì ‘ê·¼ ë°©ì‹</h1>\n<p>PyNestì˜ DI ì‹œìŠ¤í…œì€ ë°˜ë³µì ì¸ ì½”ë“œë¥¼ ì¤„ì´ê³  ëŒ€ê·œëª¨ ì• í”Œë¦¬ì¼€ì´ì…˜ì— íŠ¹íˆ ìœ ìš©í•œ ê°œë°œ í”„ë¡œì„¸ìŠ¤ë¥¼ ê°„ì†Œí™”í•˜ëŠ” ë°ì— ë””ìì¸ë˜ì—ˆìŠµë‹ˆë‹¤. PyNestëŠ” ì˜ì¡´ì„±ì´ í•œ ë²ˆì— í•œ ë²ˆì”© ì£¼ì…ë˜ëŠ” êµ¬ì¡°í™”ëœ DI ì‹œìŠ¤í…œì„ ì œê³µí•˜ë©°, ëŒ€ì²´ë¡œ ì»¨íŠ¸ë¡¤ëŸ¬ í´ë˜ìŠ¤ ìˆ˜ì¤€ì—ì„œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. ì´ êµ¬ì¡°ëŠ” í•œ ë²ˆ ì˜ì¡´ì„±ì´ ì»¨íŠ¸ë¡¤ëŸ¬ì— ì£¼ì…ë˜ë©´ ë” ì´ìƒ ì£¼ì…ì´ í•„ìš”í•˜ì§€ ì•Šê³  ì½”ë“œê°€ ì¬ì‚¬ìš©ë˜ë©° DRY ì›ì¹™ì„ ì¤€ìˆ˜í•  ìˆ˜ ìˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì´ êµ¬ì¡°ë¥¼ í†µí•´ í•œ ë²ˆ ì˜ì¡´ì„±ì´ ì»¨íŠ¸ë¡¤ëŸ¬ì— ì£¼ì…ë˜ë©´ ë” ì´ìƒì˜ ì£¼ì…ì´ í•„ìš” ì—†ì´ í•´ë‹¹ ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ëª¨ë“  ê²½ë¡œ ë©”ì„œë“œì—ì„œ ì‚¬ìš©ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì½”ë“œë² ì´ìŠ¤ë¥¼ ê°„ì†Œí™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<!-- TIL ìˆ˜í‰ -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>/assets/img/2024-07-06-ThisisWhyFastAPIisNOTProduction-ReadyYet_1.png</p>\n<h1>í•œ ë²ˆ ì£¼ì…í•˜ê³  ì—¬ëŸ¬ ë²ˆ ì‚¬ìš©í•˜ê¸°</h1>\n<p>PyNestì˜ ëª¨ë“ˆí™”ëœ ì•„í‚¤í…ì²˜ë¥¼ ì‚¬ìš©í•˜ë©´ ì»¨íŠ¸ë¡¤ëŸ¬ í´ë˜ìŠ¤ì˜ ìƒì„±ìì— ì¢…ì†ì„±ì„ ì£¼ì…í•  ìˆ˜ ìˆì–´ì„œ ë§¤ë²ˆ ëª¨ë“  ë¼ìš°íŠ¸ì— ì¢…ì†ì„±ì„ ë°˜ë³µí•´ì„œ ì£¼ì…í•  í•„ìš” ì—†ì´ ëª¨ë“  ë¼ìš°íŠ¸ì—ì„œ ì´ ì¢…ì†ì„±ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ì˜ˆì‹œ â€”</p>\n<!-- TIL ìˆ˜í‰ -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">from</span> nest.core <span class=\"hljs-keyword\">import</span> Injectable, Controller, Get, Post\n\n<span class=\"hljs-meta\">@Injectable</span>\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Logger</span>:\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__init__</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">\"Logger Starting\"</span>)\n        time.sleep(<span class=\"hljs-number\">2</span>)\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f\"Logger Started at - <span class=\"hljs-subst\">{self}</span>\"</span>)\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">log</span>(<span class=\"hljs-params\">self, message</span>):\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f\"Logging - <span class=\"hljs-subst\">{message}</span>\"</span>)\n\n\n<span class=\"hljs-meta\">@Controller(<span class=\"hljs-params\"><span class=\"hljs-string\">\"items\"</span></span>)</span>\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">ItemsController</span>:\n\n  <span class=\"hljs-comment\"># Inject Once</span>\n  <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__init__</span>(<span class=\"hljs-params\">self, logger: Logger</span>):\n      self.logger = logger\n\n\n  <span class=\"hljs-comment\"># Use Many</span>\n<span class=\"hljs-meta\">  @Get(<span class=\"hljs-params\"><span class=\"hljs-string\">\"/\"</span></span>)</span>\n  <span class=\"hljs-keyword\">async</span> <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">read_items</span>(<span class=\"hljs-params\">self</span>):\n      self.logger.log(<span class=\"hljs-string\">\"list of items\"</span>)\n      <span class=\"hljs-keyword\">return</span> {<span class=\"hljs-string\">\"message\"</span>: <span class=\"hljs-string\">\"Items\"</span>}\n\n<span class=\"hljs-meta\">  @Post(<span class=\"hljs-params\"><span class=\"hljs-string\">\"/{item}\"</span></span>)</span>\n  <span class=\"hljs-keyword\">async</span> <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">create_item</span>(<span class=\"hljs-params\">self, item: <span class=\"hljs-built_in\">str</span></span>):\n      self.logger.log(<span class=\"hljs-string\">\"creating item\"</span>)\n      <span class=\"hljs-keyword\">return</span> {<span class=\"hljs-string\">\"message\"</span>: <span class=\"hljs-string\">f\"Item created - <span class=\"hljs-subst\">{item}</span>\"</span>}\n</code></pre>\n<p>ì´ ëª¨ë“ˆí™”ëœ ì ‘ê·¼ ë°©ì‹ì„ í†µí•´ ì»¨íŠ¸ë¡¤ëŸ¬ ìƒì„±ìì— í•„ìš”í•œ ë§Œí¼ì˜ ì˜ì¡´ì„±ì„ ì£¼ì…í•˜ê³  ì´ëŸ¬í•œ ì˜ì¡´ì„±ì„ í´ë˜ìŠ¤ ë©”ì„œë“œì—ì„œ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ê²°ê³¼ë¡œ ì½”ë“œê°€ í›¨ì”¬ ë” ê¹”ë”í•´ì§€ë©° ì½”ë“œë¥¼ ë‹¤ì‹œ ì‘ì„±í•˜ê±°ë‚˜ ë³µì¡í•˜ê²Œ ë§Œë“¤ í•„ìš”ê°€ ì—†ì–´ì§‘ë‹ˆë‹¤.</p>\n<h1>ì‹±ê¸€í„´ íŒ¨í„´ì˜ í˜ì„ ë°›ì•„ë“¤ì´ì„¸ìš”</h1>\n<p>ì´ì „ì— ë…¼ì˜í•œ ë°”ì™€ ê°™ì´, FastAPIì˜ DI ë§¤ì»¤ë‹ˆì¦˜ì˜ ê°€ì¥ í° ë‹¨ì ì€ ì¢…ì†ì„±ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ì‹±ê¸€í„´ íŒ¨í„´ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²ƒì…ë‹ˆë‹¤. ìš°ë¦¬ëŠ” ì¢…ì†ì„±ì´ ëª¨ë“  ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ë§ˆë‹¤ ì´ˆê¸°í™”ë˜ì–´ì•¼ í•œë‹¤ëŠ” ê²ƒì„ ê´€ì°°í–ˆìŠµë‹ˆë‹¤.</p>\n<!-- TIL ìˆ˜í‰ -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>PyNestì—ì„œëŠ” í˜„ì—­ì—ì„œ \"injector\" ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©í•©ë‹ˆë‹¤. ì´ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” í˜„ëŒ€ì ì¸ Python ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì¢…ì†ì„±ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•œ íŒ¨í‚¤ì§€ì…ë‹ˆë‹¤. injectorì€ ì‹±ê¸€í†¤ íŒ¨í„´ê³¼ ë©€í‹° ë°”ì¸ë”©ì„ ì§€ì›í•©ë‹ˆë‹¤. í´ë˜ìŠ¤ê°€ Injectableë¡œ í‘œì‹œë˜ì–´ ì¢…ì†ì„±ìœ¼ë¡œ ë“±ë¡ë˜ë©´, injectorëŠ” í•´ë‹¹ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ê·¸ ì°¸ì¡°ë¥¼ ì €ì¥í•©ë‹ˆë‹¤. ì´ injectable ê°ì²´ì— ëŒ€í•œ ëª¨ë“  í˜¸ì¶œì€ injectorë¥¼ í†µí•´ ì´ë£¨ì–´ì§€ë©°, injectable ê°ì²´ì˜ ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.</p>\n<h2>ì½”ë“œë¡œ ì‚´í´ë³´ê¸°</h2>\n<p>ë¨¼ì €, PyNestì—ì„œ ëª¨ë“  ê´€ë ¨ importë¬¸ì„ ì •ë¦¬í•´ ë´…ì‹œë‹¤</p>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">import</span> logging\n<span class=\"hljs-keyword\">import</span> os\n\n<span class=\"hljs-keyword\">from</span> nest.core <span class=\"hljs-keyword\">import</span> (\n    Controller,\n    Delete,\n    Get,\n    Injectable,\n    Module,\n    Post,\n    Put,\n    PyNestFactory,\n)\n<span class=\"hljs-keyword\">import</span> time\n</code></pre>\n<!-- TIL ìˆ˜í‰ -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>ë‹¤ìŒìœ¼ë¡œ ì£¼ì…í•˜ë ¤ëŠ” ë‘ ê°œì˜ ì œê³µìì™€ ë¡œì§ ë ˆì´ì–´ë¥¼ í¬í•¨í•˜ëŠ” ì£¼ìš” ì„œë¹„ìŠ¤ë¥¼ ì„ ì–¸í•  ê²ƒì…ë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-js\"># êµ¬ì„± ì œê³µì\n@<span class=\"hljs-title class_\">Injectable</span>()\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">ConfigService</span>:\n    def <span class=\"hljs-title function_\">__init__</span>(self):\n        time.<span class=\"hljs-title function_\">sleep</span>(<span class=\"hljs-number\">2</span>)\n        <span class=\"hljs-title function_\">print</span>(f<span class=\"hljs-string\">\"ConfigService ì‹œì‘ - {self}\"</span>)\n        self.<span class=\"hljs-property\">config</span> = os.<span class=\"hljs-property\">environ</span>\n\n    def <span class=\"hljs-title function_\">get</span>(self, <span class=\"hljs-attr\">key</span>: str):\n        <span class=\"hljs-keyword\">return</span> self.<span class=\"hljs-property\">config</span>.<span class=\"hljs-title function_\">get</span>(key)\n\n# ë¡œê±° ì œê³µì\n@<span class=\"hljs-title class_\">Injectable</span>()\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Logger</span>:\n    def <span class=\"hljs-title function_\">__init__</span>(self, <span class=\"hljs-attr\">config_service</span>: <span class=\"hljs-title class_\">ConfigService</span>):\n        time.<span class=\"hljs-title function_\">sleep</span>(<span class=\"hljs-number\">2</span>)\n        <span class=\"hljs-title function_\">print</span>(f<span class=\"hljs-string\">\"ë¡œê±° ì‹œì‘ - {self}\"</span>)\n        self.<span class=\"hljs-property\">config_service</span> = config_service\n        self.<span class=\"hljs-property\">log</span> = logging.<span class=\"hljs-title function_\">getLogger</span>(__name__)\n\n# ì£¼ìš” ì„œë¹„ìŠ¤\n@<span class=\"hljs-title class_\">Injectable</span>()\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">ItemService</span>:\n    def <span class=\"hljs-title function_\">__init__</span>(self, <span class=\"hljs-attr\">logger</span>: <span class=\"hljs-title class_\">Logger</span>):\n        time.<span class=\"hljs-title function_\">sleep</span>(<span class=\"hljs-number\">2</span>)\n        <span class=\"hljs-title function_\">print</span>(f<span class=\"hljs-string\">\"ItemService ì‹œì‘ - {self}\"</span>)\n        self.<span class=\"hljs-property\">logger</span> = logger\n        self.<span class=\"hljs-property\">items</span> = [{<span class=\"hljs-string\">\"item_name\"</span>: <span class=\"hljs-string\">\"Foo\"</span>}, {<span class=\"hljs-string\">\"item_name\"</span>: <span class=\"hljs-string\">\"Bar\"</span>}, {<span class=\"hljs-string\">\"item_name\"</span>: <span class=\"hljs-string\">\"Baz\"</span>}]\n\n    def <span class=\"hljs-title function_\">get</span>(self):\n        self.<span class=\"hljs-property\">logger</span>.<span class=\"hljs-property\">log</span>.<span class=\"hljs-title function_\">info</span>(<span class=\"hljs-string\">\"ì—”ë“œí¬ì¸íŠ¸ í˜¸ì¶œë¨\"</span>)\n        <span class=\"hljs-keyword\">return</span> self.<span class=\"hljs-property\">items</span>\n\n    def <span class=\"hljs-title function_\">post</span>(self, <span class=\"hljs-attr\">item</span>: dict):\n        self.<span class=\"hljs-property\">items</span>.<span class=\"hljs-title function_\">append</span>(item)\n        <span class=\"hljs-keyword\">return</span> self.<span class=\"hljs-property\">items</span>\n\n    def <span class=\"hljs-title function_\">put</span>(self, <span class=\"hljs-attr\">item</span>: dict):\n        self.<span class=\"hljs-property\">items</span>.<span class=\"hljs-title function_\">append</span>(item)\n        <span class=\"hljs-keyword\">return</span> self.<span class=\"hljs-property\">items</span>\n\n    def <span class=\"hljs-title function_\">delete</span>(self, <span class=\"hljs-attr\">item</span>: dict):\n        self.<span class=\"hljs-property\">items</span>.<span class=\"hljs-title function_\">remove</span>(item)\n        <span class=\"hljs-keyword\">return</span> self.<span class=\"hljs-property\">items</span>\n</code></pre>\n<p>ì´ì œ Controllerë¥¼ ìƒì„±í•˜ê³  ì„œë¹„ìŠ¤ì— ì£¼ì…í•©ë‹ˆë‹¤ â€”</p>\n<pre><code class=\"hljs language-js\">@<span class=\"hljs-title class_\">Controller</span>(<span class=\"hljs-string\">\"items\"</span>)\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">ItemController</span>:\n    def <span class=\"hljs-title function_\">__init__</span>(self, <span class=\"hljs-attr\">item_service</span>: <span class=\"hljs-title class_\">ItemService</span>):\n        <span class=\"hljs-title function_\">print</span>(<span class=\"hljs-string\">\"ItemController ì‹œì‘ - {self}\"</span>)\n        self.<span class=\"hljs-property\">item_service</span> = item_service\n\n    @<span class=\"hljs-title class_\">Get</span>(<span class=\"hljs-string\">\"/\"</span>)\n    def <span class=\"hljs-title function_\">get</span>(self):\n        <span class=\"hljs-keyword\">return</span> self.<span class=\"hljs-property\">item_service</span>.<span class=\"hljs-title function_\">get</span>()\n\n    @<span class=\"hljs-title class_\">Post</span>(<span class=\"hljs-string\">\"/\"</span>)\n    def <span class=\"hljs-title function_\">post</span>(self, <span class=\"hljs-attr\">item</span>: dict):\n        <span class=\"hljs-keyword\">return</span> self.<span class=\"hljs-property\">item_service</span>.<span class=\"hljs-title function_\">post</span>(item)\n\n    @<span class=\"hljs-title class_\">Put</span>(<span class=\"hljs-string\">\"/\"</span>)\n    def <span class=\"hljs-title function_\">put</span>(self, <span class=\"hljs-attr\">item</span>: dict):\n        <span class=\"hljs-keyword\">return</span> self.<span class=\"hljs-property\">item_service</span>.<span class=\"hljs-title function_\">put</span>(item)\n\n    @<span class=\"hljs-title class_\">Delete</span>(<span class=\"hljs-string\">\"/\"</span>)\n    def <span class=\"hljs-title function_\">delete</span>(self, <span class=\"hljs-attr\">item</span>: dict):\n        <span class=\"hljs-keyword\">return</span> self.<span class=\"hljs-property\">item_service</span>.<span class=\"hljs-title function_\">delete</span>(item)\n</code></pre>\n<!-- TIL ìˆ˜í‰ -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>ëŒ€ë‹¨í•´ìš”, ê±°ì˜ ë‹¤ ì™”ì–´ìš”. ì´ì œ ì•± ëª¨ë“ˆì„ ì •ì˜í•˜ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•´ ë´…ì‹œë‹¤ -</p>\n<pre><code class=\"hljs language-js\">@<span class=\"hljs-title class_\">Module</span>(\n    controllers=[<span class=\"hljs-title class_\">ItemController</span>],\n    providers=[<span class=\"hljs-title class_\">Logger</span>],\n)\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">AppModule</span>:\n    pass\n\n\napp = <span class=\"hljs-title class_\">PyNestFactory</span>.<span class=\"hljs-title function_\">create</span>(<span class=\"hljs-title class_\">AppModule</span>)\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">\"__main__\"</span>:\n    <span class=\"hljs-keyword\">import</span> uvicorn\n\n    uvicorn.<span class=\"hljs-title function_\">run</span>(app.<span class=\"hljs-property\">http_server</span>, host=<span class=\"hljs-string\">\"0.0.0.0\"</span>, port=<span class=\"hljs-number\">8623</span>)\n</code></pre>\n<p>ê²°ê³¼ â€”</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-title class_\">ConfigService</span> starting - &#x3C;__main__.ConfigService object at 0x10444d580>\nLogger Starting - &#x3C;__main__.Logger object at 0x10444daf0>\nItemService starting - &#x3C;__main__.ItemService object at 0x10444d190>\n\nINFO:     Started server process [64770]\nINFO:     Waiting for application startup.\nINFO:     Application startup complete.\nINFO:     Uvicorn running on http://0.0.0.0:8623 (Press CTRL+C to quit)\n\n\nINFO:     127.0.0.1:63810 - \"GET /items/ HTTP/1.1\" 200 OK\nINFO:     127.0.0.1:63824 - \"PUT /items/ HTTP/1.1\" 200 OK\nINFO:     127.0.0.1:63840 - \"POST /items/ HTTP/1.1\" 200 OK\n</code></pre>\n<!-- TIL ìˆ˜í‰ -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<p>ì™€ìš°! ì •ë§ ë©‹ì§€ë„¤ìš”. ìš°ë¦¬ëŠ” Injectables ê°ì²´ë¥¼ í•œ ë²ˆë§Œ ì´ˆê¸°í™”í•˜ê³ , ê·¸ ì´í›„ë¡œëŠ” ì»¨í…Œì´ë„ˆê°€ í•´ë‹¹ ê°ì²´ë“¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê´€ë¦¬í•œë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆì–´ìš”.</p>\n<p>/assets/img/2024-07-06-ThisisWhyFastAPIisNOTProduction-ReadyYet_2.png</p>\n<h1>PyNest DI ë§¤ë‹ˆí˜ìŠ¤íŠ¸</h1>\n<h2>ì£¼ì… ê°€ëŠ¥í•œ ê°ì²´</h2>\n<!-- TIL ìˆ˜í‰ -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<ul>\n<li>Injectable-to-Injectable Injection: Injectable ê°ì²´ëŠ” ë‹¤ë¥¸ Injectable ê°ì²´ë¥¼ ì£¼ì…í•  ìˆ˜ ìˆì–´ì„œ ì¼ê´€ì„± ìˆê³  í†µí•©ëœ ì¢…ì†ì„± ê³„ì¸µì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>\n</ul>\n<h2>Controllers</h2>\n<ul>\n<li>Controller Injection: ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” Injectable ê°ì²´ë¥¼ ì£¼ì…í•  ìˆ˜ ìˆì–´ì„œ í•„ìš”ì— ë”°ë¼ ì„œë¹„ìŠ¤ì™€ ë¦¬í¬ì§€í† ë¦¬ì— ì±…ì„ì„ ìœ„ì„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>\n</ul>\n<h2>Dependency Graph</h2>\n<!-- TIL ìˆ˜í‰ -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<ul>\n<li>ë¹„ìˆœí™˜ ì˜ì¡´ì„± ê·¸ë˜í”„: ì˜ì¡´ì„±ì€ ìœ í–¥ ë¹„ìˆœí™˜ ê·¸ë˜í”„ (DAG)ë¥¼ í˜•ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ìˆœí™˜ ì˜ì¡´ì„±ì´ ì—†ì–´ì•¼ í•˜ë©°, ì´ë¥¼ í†µí•´ ì²˜ë¦¬ ê°€ëŠ¥í•œ ì˜ì¡´ì„± í•´ê²° ë° ëŸ°íƒ€ì„ ì˜¤ë¥˜ë‚˜ ë¬´í•œ ë£¨í”„ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>\n</ul>\n<h2>ì˜ì¡´ì„± í•´ê²°ê³¼ ê´€ë¦¬</h2>\n<ul>\n<li>ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™” ê³¼ì •ì—ì„œ IoC ì»¨í…Œì´ë„ˆëŠ” ëª¨ë“  ì˜ì¡´ì„±ì„ í•´ê²°í•˜ê³ , ì•„ì§ ë“±ë¡ë˜ì§€ ì•Šì€ ê°œì²´ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ë©°, ì´ëŸ¬í•œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê´€ë¦¬í•˜ì—¬ ì£¼ì…í•˜ëŠ” ìœ„ì¹˜ì—ì„œ ì œê³µë  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.</li>\n</ul>\n<h2>ì œê³µì(Providers) ë‚´ë³´ë‚´ê¸°</h2>\n<!-- TIL ìˆ˜í‰ -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<ul>\n<li>ëª¨ë“ˆì€ ì œê³µìë¥¼ ë‚´ë³´ë‚¼ ìˆ˜ ìˆìœ¼ë©°, ì´ëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ ë‚´ì˜ ë‹¤ë¥¸ ëª¨ë“ˆì—ì„œ ì‚¬ìš©ë˜ê±°ë‚˜ ì£¼ì…ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>\n</ul>\n<h2>ëª¨ë“ˆ ê°„ ì œê³µì ì£¼ì…</h2>\n<ul>\n<li>ë‹¤ë¥¸ ëª¨ë“ˆì—ì„œ ì œê³µìë¥¼ ì£¼ì…í•˜ë ¤ë©´ í•´ë‹¹ ì›í•˜ëŠ” ì œê³µìë¥¼ í¬í•¨í•˜ëŠ” ëª¨ë“ˆì„ ëª…ì‹œì ìœ¼ë¡œ ê°€ì ¸ì™€ì•¼ í•©ë‹ˆë‹¤.</li>\n</ul>\n<h2>ì¸ìŠ¤í„´ìŠ¤ ì°¸ì¡° ë° ì¬ì‚¬ìš©</h2>\n<!-- TIL ìˆ˜í‰ -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<ul>\n<li>ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‚½ì…ëœ ê³µê¸‰ìë¥¼ í˜¸ì¶œí•˜ë©´ ì´ë¯¸ ì´ˆê¸°í™”ëœ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¸ì¡°í•˜ì—¬ ì¬ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•¨ìœ¼ë¡œì¨ í•„ìš” ì—†ëŠ” ê³µê¸‰ì ì¸ìŠ¤í„´ìŠ¤ì˜ ìƒì„±ì„ ë°©ì§€í•˜ê³  í•„ìš”í•  ë•Œ ì‹±ê¸€í†¤ê³¼ ê°™ì€ íŒ¨í„´ì„ ì¤€ìˆ˜í•©ë‹ˆë‹¤.</li>\n</ul>\n<h1>ê²°ë¡ : DIì— ìˆì–´ PyNestê°€ ì„ í˜¸ë˜ëŠ” ì´ìœ </h1>\n<p>PyNestì˜ DI ì ‘ê·¼ ë°©ì‹ì€ ì½”ë“œ ì¡°ì§í™”ì™€ ìœ ì§€ ë³´ìˆ˜ ì¸¡ë©´ì—ì„œ ëª…í™•í•œ ì¥ì ì„ ì œê³µí•˜ë©°, íŠ¹íˆ ëª¨ë“ˆí™” ë° ë°˜ë³µì„ í”¼í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•œ ëŒ€ê·œëª¨ í”„ë¡œì íŠ¸ì— ì í•©í•©ë‹ˆë‹¤. ì‘ìš© í”„ë¡œê·¸ë¨ êµ¬ì¡° ë‚´ì—ì„œ ë” ë†’ì€ ìˆ˜ì¤€ì—ì„œ ì˜ì¡´ì„±ì„ ì£¼ì…í•  ìˆ˜ ìˆë„ë¡ í•¨ìœ¼ë¡œì¨, PyNestëŠ” ë³´ë‹¤ DRY(ë°˜ë³µí•˜ì§€ ë§ˆë¼) ì½”ë“œë² ì´ìŠ¤ë¥¼ ìš©ì´í•˜ê²Œ ë§Œë“¤ì–´ ì¤Œìœ¼ë¡œì¨ ì˜¤ë¥˜ ê°€ëŠ¥ì„±ì„ ì¤„ì´ê³  ë¦¬íŒ©í„°ë§ ë° í…ŒìŠ¤íŠ¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ê°„ì†Œí™”í•©ë‹ˆë‹¤.</p>\n<p>ë°˜ë©´ì— FastAPIì˜ DI ì‹œìŠ¤í…œì€ ê°ìì˜ ê°•ì ì„ ê°–ê³  ìˆì§€ë§Œ, í•¨ìˆ˜ ìˆ˜ì¤€ì—ì„œì˜ ì£¼ì… ìš”êµ¬ëŠ” ë¶ˆí•„ìš”í•˜ê³  ì¤‘ë³µì ì¸ ìš”ì†Œë¥¼ ë„ì…í•  ìˆ˜ ìˆìœ¼ë©°, ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë³µì¡ì„±ì„ ë”í•´ê°ì— ë”°ë¼ ìœ ì§€ ë³´ìˆ˜ ë° í™•ì¥ì„±ì—ì„œ ì˜¤íˆë ¤ ì—­íš¨ê³¼ë¥¼ ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<!-- TIL ìˆ˜í‰ -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<h1>ìì›</h1>\n<ul>\n<li>ë¹„ë™ê¸° ë§ˆë²•: PyNestì™€ SQLAlchemy 2.0ì´ íŒŒì´ì¬ ì•± ì„±ëŠ¥ì„ 25% í–¥ìƒì‹œí‚µë‹ˆë‹¤.</li>\n<li>FastAPI ì´ìƒ: PyNestë¥¼ ì´ìš©í•œ 2024ë…„ íŒŒì´ì¬ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì˜ ì§„í™”</li>\n<li>ì˜ì¡´ì„± ì£¼ì… 101 - PyNestë¥¼ ì´ìš©í•œ íŒŒì´ì¬ ì›¹ ì•±ì˜ ì˜ì¡´ì„± ì£¼ì… ë‹¨ìˆœí™”</li>\n<li>PyNest PyPI: <a href=\"https://pypi.org/project/pynest-api\" rel=\"nofollow\" target=\"_blank\">https://pypi.org/project/pynest-api</a></li>\n<li>ê³µì‹ ë¬¸ì„œ: <a href=\"https://pythonnest.github.io/PyNest/\" rel=\"nofollow\" target=\"_blank\">https://pythonnest.github.io/PyNest/</a></li>\n<li>GitHub ì €ì¥ì†Œ: <a href=\"https://github.com/PythonNest/PyNest\" rel=\"nofollow\" target=\"_blank\">https://github.com/PythonNest/PyNest</a></li>\n</ul>\n<h1>ê°„ë‹¨í•˜ê²Œ ì„¤ëª…í•˜ê¸° ğŸš€</h1>\n<p>In Plain English ì»¤ë®¤ë‹ˆí‹°ì˜ ì¼ì›ì´ ë˜ì–´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ê³„ì†í•˜ì‹œê¸° ì „ì—:</p>\n<!-- TIL ìˆ˜í‰ -->\n<p><ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-4877378276818686\" data-ad-slot=\"1549334788\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins></p>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<ul>\n<li>ê¸€ì“´ì´ë¥¼ í´ë©í•˜ê³  íŒ”ë¡œìš°í•´ì£¼ì„¸ìš”! ğŸ‘ï¸ï¸</li>\n<li>íŒ”ë¡œìš°í•˜ê¸°: X | LinkedIn | YouTube | Discord | ë‰´ìŠ¤ë ˆí„°</li>\n<li>ë‹¤ë¥¸ í”Œë«í¼ ë°©ë¬¸í•˜ê¸°: CoFeed | Differ</li>\n<li>ë” ë§ì€ ì½˜í…ì¸ : PlainEnglish.io</li>\n</ul>\n</body>\n</html>\n"},"__N_SSG":true}