{"pageProps":{"posts":[{"title":"PythonμΌλ΅ λ‚λ§μ νΈλ μ΄λ”© μΈλ±μ¤ λ§λ“λ” λ°©λ²•","description":"","date":"2024-07-09 20:37","slug":"2024-07-09-BuildyourowntradingindexwithPython","content":"\n## κ±°λ κ²°μ • λ„κµ¬\n\n![Trading Index](/TIL/assets/img/2024-07-09-BuildyourowntradingindexwithPython_0.png)\n\nλ§μ¶¤ μ§€μλ” μμ‚° κµ¬μ„± λ° κ°€μ¤‘μΉμ— λ€ν• μ μ—°μ„±κ³Ό μ μ–΄λ¥Ό μ κ³µν•μ—¬ μ „ν†µμ μΈ μ§€μμ™€ λΉ„κµν–μ„ λ• ν¬μ μ „λµμ„ λ” μ λ°μν•  μ μλ” κ³ μ ν• κΈ°μ¤€μ„ μ κ³µν•©λ‹λ‹¤. μ΄ κΈ°μ‚¬μ—μ„λ” Pythonμ„ μ‚¬μ©ν•μ—¬ λ§μ¶¤ μ§€μλ¥Ό μ‘μ„±ν•λ” λ°©λ²•μ„ μ•λ‚΄ν•κ² μµλ‹λ‹¤.\n\n## μ™ λ§μ¶¤ μ§€μλ¥Ό μ‚¬μ©ν•΄μ•Ό ν•λ‚μ”?\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- μ μ—°μ„±: νΉμ • ν¬μ λλ” κ±°λ μ „λµμ— λ§κ² μ§€μλ¥Ό λ§μ¶¤ μ„¤μ •ν•  μ μμµλ‹λ‹¤.\n- ν†µμ : μμ‚° ν¬ν•¨ λ° κ°€μ¤‘ κΈ°μ¤€μ„ μ‚¬μ©μ μ •μν•  μ μμµλ‹λ‹¤.\n- νμ‹ : ν¬μ λ° κ±°λ λ¨λ‘μ—μ„ κ²½μ μ°μ„λ¥Ό μ κ³µν•  μ μλ” λ…νΉν• μ§€μ κ°λ°\n\n## λ―Έκµ­ λ‹¬λ¬ μ§€μλ¥Ό κ³„μ‚°ν•λ” μ΄μ \n\nμ—­μ‚¬μ  κ°€κ²©μ„ μ°Ύμ„ μ μλ” λ¨λ“  κ²ƒμ— λ€ν•΄ μ‚¬μ©μ μ •μ μ§€μλ¥Ό λ§λ“¤ μ μμ§€λ§, μ΄ κΈ€μ€ μ΄λ―Έ μ΅΄μ¬ν•λ” μ§€μμΈ λ―Έκµ­ λ‹¬λ¬ μ§€μλ¥Ό λ§λ“¤ κ²ƒμ…λ‹λ‹¤.\n\nμ κ°€ λ―Έκµ­ λ‹¬λ¬(USD)λ¥Ό μ„ νƒν• μ΄μ λ” μ°λ¦¬κ°€ μ‚¬μ©μ μ •μ κ²°κ³Όλ¥Ό μ‹¤μ  μ§€μμ™€ λΉ„κµν•μ—¬ ν…μ¤νΈν•  μ μκΈ° λ•λ¬Έμ…λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nμ  2λ΅ κ°€μ¥ μ¤‘μ”ν• κ±΄ ν†µν™”λ¥Ό μ„ νƒν–μµλ‹λ‹¤. μ™Έν™ κ±°λμ—μ„ μ™Έν™ νμ–΄λ¥Ό κ±°λν•  λ• ν• ν†µν™”κ°€ λ‹¤λ¥Έ ν†µν™”μ™€ λΉ„κµλ¨μ„ λ³Ό μ μμµλ‹λ‹¤. μ‹¤μ λ΅ νμ–΄κ°€ κΈΈμ–΄μ§€λ©΄, μλ¥Ό λ“¤μ–΄ EURUSDκ°€ μμµλ‹λ‹¤. EURμ΄ κ°•ν•΄μ§€κ³  μλ”μ§€, USDκ°€ μ•½ν•΄μ§€κ³  μλ”μ§€ ν™•μ‹ ν•  μ μ—†μµλ‹λ‹¤. μ΄κ²ƒμ€ ν†µν™” μ§€μλ΅λ§ μ κ³µλ  μ μλ” λ‹µλ³€μ…λ‹λ‹¤.\n\n## μ‚¬μ©μ μ •μ μΈλ±μ¤ μƒμ„± λ‹¨κ³„λ³„ μ•λ‚΄μ„\n\nν†µν™” λ°μ΄ν„° μ²λ¦¬ λ° κΈμµ λ°μ΄ν„° κ°€μ Έμ¤κΈ°λ¥Ό μ„ν•΄ pandas, numpy λ° yfinanceμ™€ κ°™μ€ ν•„μ λΌμ΄λΈλ¬λ¦¬λ¥Ό κ°€μ Έμ™€ μ‹μ‘ν•©λ‹λ‹¤.\n\n```js\nimport pandas as pd\nimport json\nimport yfinance as yf\nimport mplfinance as mpf\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nκ·ΈλΌ ν•΄λ‹Ή μμ λ”•μ…”λ„λ¦¬μ™€ λ‚΄κ°€ κ΄€μ‹¬ μλ” ν†µν™”μ λ”•μ…”λ„λ¦¬λ¥Ό λ¶λ¬μ¤μ„Έμ”(κΈ°μ‚¬ λ§¨ λμ— λ§ν¬κ°€ μμµλ‹λ‹¤).\n\n```js\nwith open('currencies_weights.json') as f:\n    currencies = json.load(f)\n\nwith open('currencies_pairs.json') as f:\n    pairs = json.load(f)\n```\n\nν†µν™”λ” μ‹¬λ³Ό(μ: EUR)κ³Ό ν•΄λ‹Ή κµ­κ°€μ GDP(μ‹­μ–µ λ‹¬λ¬)λ¥Ό κ°€μ¥ μ¤‘μ”ν•κ² κ°€μ§€κ³  μμ–΄μ•Ό ν•©λ‹λ‹¤. GDPλ¥Ό μ„ νƒν• μ΄μ λ” κ°€μ¥ ν„μ‹¤μ μΈ μΈ΅μ •κ°’μΌλ΅ λ³΄μ€μµλ‹λ‹¤(κ²°κµ­ μ³μ€ κ²ƒμΌλ΅ νλ…λμ—μ£ β€¦). κ·Έλƒ¥ ν•λ‚μ ν†µν™”λ΅ ν‘μ‹λμ–΄μ•Ό ν•λ‹¤λ” μ λ§ μ£Όμν•λ©΄ λ©λ‹λ‹¤. μλ¥Ό λ“¤μ–΄, μ λ΅μ΅΄ GDPλ” USDλ΅ ν‘μ‹λμ–΄μ•Ό ν•λ©° EURμ΄ μ•„λ‹μ–΄μ•Ό ν•©λ‹λ‹¤. μ΄κ²ƒμ΄ κ°€μ¥ μ‰¬μ΄ λ°©λ²•μΈ κ²ƒμ„ λ°κ²¬ν–λ”λ°, λ΅μ»¬ ν†µν™”λ΅ GDPλ¥Ό κ°€μ§€κ³  μκ³  μ΄ν›„ λ³€ν™ν•΄μ•Ό ν•λ” λ°©λ²•λ³΄λ‹¤ νΈλ¦¬ν•©λ‹λ‹¤.\n\nμ•„λ for λ£¨ν”„λ¥Ό μ‚¬μ©ν•λ©΄ λ¨λ“  μμ— λ€ν• 1μ‹κ°„ κ°€κ²©μ„ λ‹¤μ΄λ΅λ“ν•κ³ , μ°λ¦¬ μ‚¬λ‘ν•λ” `yfinance`μ λ„μ›€μΌλ΅ μ΄λ¥Ό λ”•μ…”λ„λ¦¬μ— μ¶”κ°€ν•  μ μμµλ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\nfor pair in pairs:\n    pairs[pair]['df'] = yf.download(pairs[pair]['name'] + '=X', start='2023-01-01', end='2023-12-31', interval='1h')\n```\n\nκ°€λ¥ν• κ°€μ¥ μ‘μ€ μ‹κ°„ λ‹¨μ„λ¥Ό μ„ νƒν•μ—¬ λ°μ΄ν„°λ¥Ό μ°Ύμ•„μ•Ό ν° μ‹κ°„ λ‹¨μ„(μ: 4μ‹κ°„ λλ” μΌμΌ)μ μΊ”λ“¤μ„ λ§λ“¤ μ μμµλ‹λ‹¤. κ·Έλ° λ‹¤μ μ•Όν›„ κΈμµμ΄ κ°€λ” μΌλ¶€ λ‚ μ§λ¥Ό μ κ³µν•μ§€ μ•μ„ κ²½μ°μ—λ„ λ°μ΄ν„° ν”„λ μ„μ„ λ™κΈ°ν™”ν•©λ‹λ‹¤. APIκ°€ μ™„μ „ν•κ³  μ μ ν• λ°μ΄ν„°λ¥Ό μ κ³µν•  κ²ƒμ΄λΌκ³  ν™•μ‹ ν•λ” κ²½μ°, μ΄ λ¶€λ¶„μ€ κ±΄λ„ λ›°μ‹κΈ° λ°”λλ‹λ‹¤.\n\n```js\n# μµμ† λ° μµλ€ λ‚ μ§ μ°ΎκΈ°\nfor pair in pairs:\n    mindate = min(pairs[pair]['df'].index)\n    maxdate = max(pairs[pair]['df'].index)\n# κ³µν†µλμ§€ μ•μ€ λ‚ μ§ μ μ™Έ\nfor pair in pairs:\n    pairs[pair]['df'] = pairs[pair]['df'].loc[mindate:maxdate]\nprint(mindate, maxdate)\n```\n\nμ΄μ  κ³„μ‚°ν•  ν†µν™”μ μ§€μμ™€ μ΄ ν†µν™”λ¥Ό ν¬ν•¨ν•λ” λ¨λ“  ν†µν™”μ— λ€ν• μΆ…κ°€λ¥Ό κ°–λ” λ°μ΄ν„° ν”„λ μ„μ„ μƒμ„±ν•κ³  μ„¤μ •ν•΄μ•Ό ν•©λ‹λ‹¤. ν†µν™”κ°€ νλ§¤ μ½μ— μλ‹¤λ©΄ ν™μ¨μ„ λ’¤μ§‘μ–΄μ„ λ¨λ‘ λ§¤μμ½μΌλ΅ κ°€μ Έμ™€μ•Ό ν•©λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\nν†µν™” = 'USD'\n\nmydict = {}\n# ν•΄λ‹Ή ν†µν™”λ¥Ό ν¬ν•¨ν•λ” μ ν•„ν„°λ§\nfor pair in pairs:\n    if ν†µν™” in pairs[pair]['buycur']:\n        print(\"λ§¤μ\", pair)\n        mydict[pairs[pair]['sellcur']] = pairs[pair]['df']['Close']\n    elif ν†µν™” in pairs[pair]['sellcur']:\n        print(\"λ§¤λ„\", pair)\n        mydict[pairs[pair]['buycur']] = 1 / pairs[pair]['df']['Close']\n\ndf_currency = pd.DataFrame(mydict)\n```\n\nμ„ λ°μ΄ν„°ν”„λ μ„μ κ° μ—΄(ν†µν™”)μ— λ€ν•΄ GDPλ¥Ό μ‚¬μ©ν•μ—¬ κ°€μ¤‘μΉ λ©λ΅μ„ μƒμ„±ν•©λ‹λ‹¤.\n\n```js\nweights = []\nfor col in df_currency.columns:\n    weights.append(currencies[col]['GDP'])\n\nweights = [weight / sum(weights) for weight in weights]\n```\n\nμ΄μ  κ°€μ¤‘ νμ¥ κ°€κ²©μ„ μƒμ„±ν•κ³  μ„ νƒν• λ°μ΄ν„°ν”„λ μ„μΌλ΅ μ¬μƒν”λ§ν•λ” λ§λ²•μ΄ μΌμ–΄λ‚©λ‹λ‹¤(μ›λ³Έλ³΄λ‹¤ λ” λ†’μ•„μ•Ό ν•¨).\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\n# λ°μ΄ν„°ν”„λ μ„ μ¤€λΉ„\ndf_index = df_currency.copy()\ndf_index = df_index.pct_change(fill_method=None)\ndf_index.dropna(inplace=True)\n\n# κ°€μ¤‘ ν‰κ·  μΆ…κ°€ κ³„μ‚°\nweights_df = pd.DataFrame(weights, index=df_index.columns, columns=['Weight'])\ndf_index[currency] = df_index.dot(weights_df['Weight']).cumsum(axis=0)*1000\ndf_index[currency] = df_index[currency].round(6)\n\n# μΈλ±μ¤λ¥Ό μΌλ³„λ΅ λ‹¤μ‹ μƒν”λ§\ndf_index = df_index[currency].dropna()\nohlc = df_index.resample('D').ohlc()\nohlc.dropna(inplace=True)\n```\n\nμ—¬κΈ°κΉμ§€μ…λ‹λ‹¤. ohlc λ°μ΄ν„°ν”„λ μ„μ—λ” μΌλ³„ λ―Έκµ­ λ‹¬λ¬ μ§€μμ μΊ”λ“¤ μ •λ³΄κ°€ ν¬ν•¨λμ–΄ μμµλ‹λ‹¤.\n\nκ³Όμ •μ„ ν™•μΈν•λ ¤λ©΄ μ‹¤μ  λ―Έκµ­ λ‹¬λ¬ μ§€μλ¥Ό λ‹¤μ΄λ΅λ“ν•μ—¬ λΉ„κµν•΄λ³΄κ² μµλ‹λ‹¤.\n\n```js\nusd_dollar_index = yf.download(\"DX-Y.NYB\", (start = \"2023-01-01\"), (end = \"2023-12-31\"), (interval = \"1d\"));\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nμ²« λ²μ§Έ μ κ²€μ€ μ‹κ°μ μΌλ΅ μ΄λ£¨μ–΄μ§ κ²ƒμ…λ‹λ‹¤. κ·Έλμ„ μ°λ¦¬κ°€ λ§λ“  κ·Έλν”„μ™€ κ³µμ‹ κ·Έλν”„λ¥Ό κ²Ήμ³μ„ ν”λ΅ν…ν•  κ±°μ—μ”. λ©‹μ Έ λ³΄μ΄μ£ ?\n\n```js\nmpf.plot(ohlc, (type = \"candle\"), (figratio = (30, 10)));\nmpf.plot(usd_dollar_index, (type = \"candle\"), (figratio = (30, 10)));\n```\n\n<img src=\"/TIL/assets/img/2024-07-09-BuildyourowntradingindexwithPython_1.png\" />\n\nλ‹¤λ¥Έ λ°©λ²•μ€ μΆ…κ°€μ μƒκ΄€ κ΄€κ³„λ¥Ό μ κ²€ν•λ” κ²ƒμ΄μ—μ”.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```python\n# λ¨Όμ € μƒκ΄€ κ³„μλ¥Ό κ³„μ‚°ν•κΈ° μ „μ— λ‘ λ‚ μ§ λ° μ‹κ°„ μΈλ±μ¤λ¥Ό μ‹κ°„λ€ μ •λ³΄ μ—†μ΄ λ§λ“¤μ–΄μ•Ό ν•©λ‹λ‹¤\nohlc.index = ohlc.index.tz_localize(None)\nusd_dollar_index.index = usd_dollar_index.index.tz_localize(None)\n\ncombined_df = pd.DataFrame({\n    'ohlc': ohlc['close'],\n    'usd_dollar_index': usd_dollar_index['Close']\n})\n\ncorrelation = combined_df.corr().iloc[0, 1]\n```\n\nμ΄λ¥Ό ν†µν•΄ μ°λ¦¬λ” λ†€λΌμ΄ 0.976μ μƒκ΄€ κ΄€κ³„λ¥Ό μ–»κ² λ©λ‹λ‹¤. μ΄λ¥Ό ν†µν•΄ λ‘ μΈλ±μ¤κ°€ μΌμΉν•¨μ„ μ• μ μμµλ‹λ‹¤...\n\nν•μ§€λ§ λ―Έκµ­ λ‹¬λ¬ μ§€μλ” 6κ° ν†µν™”μ— λ€ν• κ³ μ • κ°€μ¤‘μΉλ΅ κ³„μ‚°λλ” λ°λ©΄, μ°λ¦¬μ κ²½μ°μ—λ” 14κ°€ μμ—μΌλ―€λ΅ μ•½κ°„μ μ°¨μ΄κ°€ μμµλ‹λ‹¤!\n\nμ—¬κΈ°μ—μ„ Git Hubμ—μ„ μ½”λ“μ™€ ν†µν™” μμ— λ€ν• json νμΌμ„ μ°Ύμ„ μ μμµλ‹λ‹¤. ν΄λ¦­ν•μ„Έμ”.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## λ‹¤μ λ‹¨κ³„\n\n- μ‹¤ν—: λ‹¤μ–‘ν• κ°€μ¤‘ μ²΄κ³„μ™€ μμ‚° μ„ νƒμ„ μ‹λ„ν•΄λ³΄μ„Έμ”.\n- ν–¥μƒ: λ³΄λ‹¤ μ •κµν• λ°±ν…μ¤ν… μ§€ν‘ μ¶”κ°€.\n- μµμ ν™”: κΈ°κ³„ ν•™μµ λ¨λΈ ν†µν•©ν•μ—¬ μ‚¬μ©μ μ •μ μ§€μλ¥Ό μµμ ν™”ν•μ„Έμ”.\n\nλ‚μ λ°μ΄ν„° μ£Όλ„ ν¬μ μ—¬μ •μ„ ν•¨κ» ν•΄λ³΄μ„Έμ”! μ €λ¥Ό Medium, Twitter (ν„μ¬ Xλ΅ μ μ•λ ¤μ§„) λ° Githubμ—μ„ ν”λ΅μ°ν•΄μ£Όμ„Έμ”. μ €λ” μ½”λ”©, κΈ€μ“°κΈ°, λ°μ΄ν„° μ΄ν•΄λ¥Ό ν†µν• μ„±μ¥μ„ μ¶”κµ¬ν•©λ‹λ‹¤ ;)\n\nλ©΄μ±… μ΅°ν•­: μ΄ κΈ€μ—μ„ ν¬μμ ν¥λ―Έλ΅μ΄ μ„Έκ³„λ¥Ό νƒν—ν•λ” λ™μ• κµμ΅ λ©μ μΌλ΅ μ κ³µλλ” μ •λ³΄μ„μ„ κΌ­ μƒκΈ°ν•΄μ£Όμ„Έμ”. μ €λ” κΈμµ μλ¬Έκ°€κ°€ μ•„λ‹λ©° μ—¬κΈ°μ— κ²μ‹λ λ‚΄μ©μ€ κΈμµ μ΅°μ–ΈμΌλ΅ κ°„μ£Όλμ§€ μ•μµλ‹λ‹¤. μ–Έμ λ‚ μ—°κµ¬λ¥Ό ν•μ‹κ³  ν¬μ κ²°μ •μ„ λ‚΄λ¦¬κΈ° μ „μ— μ „λ¬Έκ°€μ™€ μƒμν•λ” κ²ƒμ„ κ³ λ ¤ν•΄μ£Όμ‹­μ‹μ¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n# μ‰½κ³  κ°„κ²°ν• μμ–΄ μ»¤λ®¤λ‹ν‹°μ— μ°Έμ—¬ν•΄ μ£Όμ…”μ„ κ°μ‚¬ν•©λ‹λ‹¤! λ– λ‚μ‹κΈ° μ „μ—:\n\n- λ°λ“μ‹ μ €μλ¥Ό clapping ν•κ³  ν”λ΅μ° ν•΄μ£Όμ„Έμ” οΈπ‘οΈοΈ\n- ν”λ΅μ°ν•κΈ°: X | LinkedIn | YouTube | Discord | λ‰΄μ¤λ ν„°\n- λ‹¤λ¥Έ ν”λ«νΌ λ°©λ¬Έν•κΈ°: CoFeed | Differ\n- PlainEnglish.ioμ—μ„ λ” λ§μ€ μ½ν…μΈ  ν™•μΈν•κΈ°\n","ogImage":{"url":"/assets/img/2024-07-09-BuildyourowntradingindexwithPython_0.png"},"coverImage":"/TIL/assets/img/2024-07-09-BuildyourowntradingindexwithPython_0.png","tag":["Tech"],"readingTime":8},{"title":"νμ΄μ¬μ—μ„ ν•¨μ μΈν„°νμ΄μ¤ μ‚¬μ©ν•λ” λ°©λ²•","description":"","date":"2024-07-09 20:34","slug":"2024-07-09-FunctionInterfacesinPython","content":"\n## νμ΄μ¬ ν”„λ΅κ·Έλλ°\n\n<img src=\"/TIL/assets/img/2024-07-09-FunctionInterfacesinPython_0.png\" />\n\nνμ΄μ¬μ€ λ‹¤λ¥Έ ν”„λ΅κ·Έλλ° μ–Έμ–΄μ—μ„ ν”ν μ•λ ¤μ§„ μλ―Έμ—μ„μ μΈν„°νμ΄μ¤λ¥Ό μ κ³µν•μ§€λ” μ•μ§€λ§, λΉ„μ·ν• κΈ°λ¥μ„ μ κ³µν•©λ‹λ‹¤. μ „ν†µμ μΈ κ²ƒλ“¤μ€ μ¶”μƒ λ² μ΄μ¤ ν΄λμ¤(ABC)λ΅, abc λ¨λ“μ„ ν†µν•΄ μ΄μ©ν•  μ μμµλ‹λ‹¤. λ‚μ¤‘μ—λ” νƒ€μ… ννΈμ™€ νƒ€μ… ν”„λ΅ν† μ½(typing.Protocol)μ΄ μ¶”κ°€λμ—μµλ‹λ‹¤.\n\nμ¶”μƒ λ² μ΄μ¤ ν΄λμ¤(ABC)μ™€ νƒ€μ… ν”„λ΅ν† μ½μ€ λ‹¤λ¥Έ ν”„λ΅κ·Έλλ° μ–Έμ–΄μ—μ„μ μΈν„°νμ΄μ¤μ™€ λΉ„μ·ν• ν΄λμ¤μ κµ¬μ΅° λ° ν–‰λ™μ„ μ •μν•λ” νμ΄μ¬μ λ©”μ»¤λ‹μ¦μΌλ΅ μ‘μ©ν•©λ‹λ‹¤. νμ΄μ¬ μμ²΄λ” μ΄ κΈ°λ¥μ„ μ„¤λ…ν•κΈ° μ„ν•΄ κ³µμ‹μ μΌλ΅ \"μΈν„°νμ΄μ¤\"λΌλ” μ©μ–΄λ¥Ό μ‚¬μ©ν•μ§€λ” μ•μ§€λ§, νμ΄μ¬μ \"ν”„λ΅ν† μ½\"μ΄ μ κ³µν•λ” λ‚΄μ©κ³Ό λ°€μ ‘ν• κ°λ…μ…λ‹λ‹¤. μ‚¬μ‹¤, typing λ¨λ“μ— typing.Protocolμ΄ μ¶”κ°€λκΈ° μ „μ— νμ΄μ¬μ—μ„ \"ν”„λ΅ν† μ½\"μ΄λΌλ” μ©μ–΄κ°€ μΈν„°νμ΄μ¤λ¥Ό μ„¤λ…ν•λ” λ° μ‚¬μ©λμ—μµλ‹λ‹¤. λ”°λΌμ„ νμ΄μ¬μ λ™μ  νΉμ„±μ€ λ™μ  μΈν„°νμ΄μ¤μ μƒμ„±μ„ ν—μ©ν•κ³ , νƒ€μ… ννΈμ™€ νƒ€μ… ν”„λ΅ν† μ½μ€ μ •μ  ν™•μΈ κ΄€μ μ—μ„ μΈν„°νμ΄μ¤μ λ…μ„Έλ¥Ό μ©μ΄ν•κ² ν•©λ‹λ‹¤. μ΄μ— λ€ν•΄ μ΄ κΈ°μ‚¬μ—μ„ λ…Όμν•κ² μµλ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nμ¶”μƒ κΈ°λ³Έ ν΄λμ¤μ™€ νƒ€μ΄ν•‘ ν”„λ΅ν† μ½μ€ μ£Όλ΅ μ‚¬μ©μ μ •μ ν΄λμ¤λ¥Ό λ§λ“¤ λ• κ³ λ ¤λ©λ‹λ‹¤: μ‚¬μ©μκ°€ νΉμ • κµ¬μ΅°μ™€ λ™μ‘μ„ κ°–λ” ν΄λμ¤λ¥Ό κµ¬ν„ν•΄μ•Ό ν•  λ• μ¶”μƒ κΈ°λ³Έ ν΄λμ¤λ‚ ν”„λ΅ν† μ½μ„ λ§λ“¤ μ μμµλ‹λ‹¤. ABC(μ¶”μƒ κΈ°λ³Έ ν΄λμ¤)λ” ν΄λμ¤μ™€ ν•¨κ» μ‘λ™ν•μ§€λ§ νƒ€μ΄ν•‘ ν”„λ΅ν† μ½μ€ ABCκ°€ μ κ³µν•μ§€ μ•λ” κΈ°λ¥ μΈν„°νμ΄μ¤λ¥Ό μ κ³µν•©λ‹λ‹¤.\n\nνμ΄μ¬μ€ μ›λ ν•¨μ μΈν„°νμ΄μ¤λ¥Ό λ§λ“λ” λ° μ „μ© λ„κµ¬λ¥Ό μ κ³µν•μ§€ μ•μ•μµλ‹λ‹¤. μ΄λ” νƒ€μ… ννΈμ μ¶”κ°€λ΅ λ³€κ²½λμ—κ³  μ΄μ  νƒ€μ… ννΈμ™€ νƒ€μ΄ν•‘ ν”„λ΅ν† μ½μ„ μ‚¬μ©ν•΄ λ‘ κ°€μ§€ λ°©λ²•μΌλ΅ ν•¨μ μΈν„°νμ΄μ¤λ¥Ό λ§λ“¤ μ μμµλ‹λ‹¤.\n\nνμ΄μ¬ νƒ€μ… ννΈλ¥Ό μ‚¬μ©ν•λ©΄ ν•¨μ λ§¤κ°λ³€μμ™€ λ°ν™ κ°’μ μμƒ νƒ€μ…μ„ μ§€μ •ν•  μ μμµλ‹λ‹¤. κ·Έλ ‡λ‹¤λ©΄ ν•¨μ μΈν„°νμ΄μ¤λ” λ¬΄μ—‡μ„ μ§€μ •ν• κΉμ”? ν•¨μ μΈν„°νμ΄μ¤λ” ν•¨μ λ§¤κ°λ³€μμ™€ λ°ν™ κ°’μ μμƒ νƒ€μ…μ„ μ§€μ •ν•μ§€ μ•μ„κΉμ”? μ΄κ²ƒμ΄ νƒ€μ… ννΈκ°€ μλ” ν•¨μμ μ„λ…μ€ ν•¨μ μΈν„°νμ΄μ¤μ ν• ν•νƒλ΅ κ°„μ£Όλ  μ μλ” μ΄μ μ…λ‹λ‹¤.\n\nνμ΄μ¬ νƒ€μ… ννΈλ” ν΄λμ¤μ— λ€ν• μΈν„°νμ΄μ¤ μ‚¬μ–‘μ— λ€ν• μ§μ ‘μ μΈ μ§€μ›μ€ μ κ³µν•μ§€ μ•μµλ‹λ‹¤. κ·Έλ¬λ―€λ΅ ν•¨μμ— λ€ν• ν΄λμ¤μ™€ ν•¨μμ— λ€ν•΄ λ™μΌν• λ°©μ‹μΌλ΅ μ‘λ™ν•μ§€ μ•μµλ‹λ‹¤. λ”°λΌμ„ νμ΄μ¬μ—μ„ ν•¨μ μΈν„°νμ΄μ¤λ¥Ό μ΄ν•΄ν•κΈ° μ„ν•΄μ„λ” ν΄λμ¤ μΈν„°νμ΄μ¤μ™€ λ‹¤λ¥΄κ² μ·¨κΈ‰ν•  κ²ƒμ„ κΈ°μ–µν•΄μ•Ό ν•©λ‹λ‹¤. μ΄ κµ¬λ¶„μ μ¤‘μ”ν• κ²°κ³Όλ” νμ΄μ¬μ—μ„ ν΄λμ¤ μΈν„°νμ΄μ¤λ¥Ό μ •μν•λ” μ£Όμ” λ„κµ¬μΈ μ¶”μƒ κΈ°λ³Έ ν΄λμ¤κ°€ ν•¨μ μΈν„°νμ΄μ¤λ¥Ό μ •μν•λ” λ° μ§μ ‘μ μΌλ΅ μ μ©λμ§€ μ•λ”λ‹¤λ” κ²ƒμ…λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nμ΄ κΈ€μ€ ν•¨μ μΈν„°νμ΄μ¤μ— λ€ν•΄ λ…Όμν•κ³  μμ–΄μ”. Pythonμ—μ„λ” ν•¨μμ™€ νΈμ¶ κ°€λ¥ν•(callable) κ°μ²΄ κ°„μ— λ…ν™•ν• κµ¬λ¶„μ΄ μ—†λ‹¤λ” κ²ƒμ— μ£Όλ©ν•΄μ£Όμ„Έμ”. νΈμ¶ κ°€λ¥ν• κ°μ²΄μ— λ€ν•΄ λ” μ•κ³  μ‹¶λ‹¤λ©΄ μ—¬κΈ°λ¥Ό μ°Έκ³ ν•΄λ³΄μ„Έμ”:\n\nκ·Έλ¬λ‚ ν•¨μ μΈν„°νμ΄μ¤μ κ²½μ°, λ‹¤μ–‘ν• νΈμ¶ κ°€λ¥ν• κ°μ²΄κ°€ λ‹¤λ¥΄κ² μ‘λ™ν•  μ μμ–΄μ”. μ΄μ— λ€ν•΄ μ΄ κΈ€μ—μ„ λ…Όμν•  κ±°μμ”.\n\nλ¨Όμ €, ν•¨μ μΈν„°νμ΄μ¤κ°€ λ¬΄μ—‡μΈμ§€ μ •μν•κ³  ν•¨μκ°€ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ‹¤λ” κ²ƒμ΄ λ¬΄μ¨ μλ―ΈμΈμ§€ μ•μ•„λ³Ό κ±°μ—μ”. κ·Έ λ‹¤μμΌλ΅, νƒ€μ… ννΈμ™€ typing ν”„λ΅ν† μ½μ„ μ‚¬μ©ν•μ—¬ ν•¨μ μΈν„°νμ΄μ¤λ¥Ό μƒμ„±ν•λ” λ°©λ²•κ³Ό μ΄ κ³Όμ •μ—μ„ λ§μ£ΌμΉ  μ μλ” μΌλ°μ μΈ μ–΄λ ¤μ›€μ„ μ‚΄ν΄λ³Ό κ±°μ—μ”. λν• ν•¨μ μΈν„°νμ΄μ¤μ κ°„μ ‘μ μΈ κµ¬ν„μ— λ€ν•΄ μ΄μ•ΌκΈ°ν•  κ±°μμ”. μ΄ κ³Όμ •μ—μ„, ν•¨μ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•κ±°λ‚ κ·Έλ ‡μ§€ λ»ν•  λ•μ μ „ν•μ μΈ μ‹λ‚λ¦¬μ¤λ¥Ό μ•λ‚΄ν•  κ±°μ—μ”. λ§μ§€λ§‰μΌλ΅, μ£Όμ” ν¬μΈνΈλ¥Ό μ”μ•½ν• κ²°λ΅ μ„ λ‚΄λ¦¬κ² μ–΄μ”.\n\n# ν•¨μ μΈν„°νμ΄μ¤λ€ λ¬΄μ—‡μΈκ°€μ”?\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nν•¨μ μΈν„°νμ΄μ¤λ” ν•¨μμ κΈ°λ€ μ„λ…μ„ μ •μν•©λ‹λ‹¤: μ…λ ¥(μΈμ λ° μ ν•) λ° μ¶λ ¥(λ°ν™ μ ν•).\n\nν•¨μ μΈν„°νμ΄μ¤λ¥Ό λ§λ“¤κΈ° μ„ν•΄μ„λ” ν”„λ΅κ·Έλλ° μ–Έμ–΄κ°€ ν•„μ”ν•μ§€ μ•μµλ‹λ‹¤. μ‚¬μ‹¤, Pythonμ΄λ‚ λ‹¤λ¥Έ μ–Έμ–΄λ¥Ό μ‚¬μ©ν•΄ μ™”λ‹¤λ©΄, μ‹¬μ§€μ–΄ μ΄λ¥Ό μΈμ§€ν•μ§€ λ»ν–λ”λΌλ„ λ§μ€ ν•¨μ μΈν„°νμ΄μ¤λ¥Ό μƒμ„±ν•΄ μ™”μ„ κ°€λ¥μ„±μ΄ λ†’μµλ‹λ‹¤. λ¨λ“  ν•¨μλ¥Ό μ •μν•λ©΄ λ€μ‘ν•λ” μΈν„°νμ΄μ¤λ„ μ •μν•λ‹¤λ” μ΄μ  λ•λ¬Έμ…λ‹λ‹¤. λ™μΌν• μ„λ…μ„ κ°€μ§„ λ‘ ν•¨μλ” λ™μΌν• μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•©λ‹λ‹¤. ν¥λ―Έλ΅μ΄ μ μ€ ν•¨μκ°€ ν•΄μ•Ό ν•λ” μ‘μ—…μ„ μ„¤λ…ν•  λ• μ°λ¦¬κ°€ μΆ…μΆ… μμ—°μ–΄λ΅ ν•¨μ μΈν„°νμ΄μ¤λ¥Ό λ§λ“ λ‹¤λ” κ²ƒμ…λ‹λ‹¤.\n\nμλ¥Ό λ“¤μ–΄, μμ–΄λ΅ μ •μλ ν•¨μ μΈν„°νμ΄μ¤λ¥Ό κ³ λ ¤ν•΄ λ³΄κ² μµλ‹λ‹¤: λ‘ κ°μ μ‹¤μ μΈμλ¥Ό μ‚¬μ©ν•κ³  μ‹¤μλ¥Ό λ°ν™ν•λ” ν•¨μ. μ΄ μ„¤λ…μ€ ν•΄λ‹Ή ν•¨μμ μΈν„°νμ΄μ¤λ¥Ό ν¨κ³Όμ μΌλ΅ μμ–΄λ΅ μ „λ‹¬ν•©λ‹λ‹¤.\n\nλ¬Όλ΅ , μ΄ μ„¤λ…μ€ Pythonμ—μ„ μ ν¨ν• ν•¨μ μΈν„°νμ΄μ¤μ— ν•„μ”ν• κµ¬λ¬Έμ„ μ‚¬μ©ν•μ§€λ” μ•μµλ‹λ‹¤. μ΄ κΈ°μ‚¬μ—μ„λ” μ΄λ¬ν• κ°λ…μ  ν•¨μ μΈν„°νμ΄μ¤λ¥Ό ν•μ‹μ μΈ Python ν•¨μ μΈν„°νμ΄μ¤λ΅ λ²μ—­ν•λ” λ°©λ²•μ„ λ³΄μ—¬λ“λ¦¬κ² μµλ‹λ‹¤. λ°”λ΅ νƒ€μ… ννΈμ™€ νƒ€μ… ν”„λ΅ν† μ½μ„ μ‚¬μ©ν•λ” κ²ƒμ…λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n# νμ΄μ¬μ—μ„ ν•¨μ μΈν„°νμ΄μ¤λ” μ–΄λ–»κ² μ‚¬μ©λλ‚μ”?\n\nκ·Έκ²ƒμ€ λ§¤μ° νƒ€λ‹Ήν• μ§λ¬ΈμΈλ°, λ€λ‹µμ€ λ§¤μ° κ°„λ‹¨ν•©λ‹λ‹¤. νμ΄μ¬μ—μ„ ν•¨μ μΈν„°νμ΄μ¤λ” νƒ€μ… ννΈλ΅ μ‚¬μ©λ©λ‹λ‹¤.\n\nμ΄λ¬ν• νƒ€μ… ννΈ β€” ν•¨μ μΈν„°νμ΄μ¤ β€” λ” νΉμ • μ„μΉμ—μ„ μ‚¬μ©ν•  μ μλ” ν•¨μμ μΆ…λ¥μ— λ€ν• μ •λ³΄ μ†μ¤λ΅ μ‘μ©ν•λ©°, μ»¤μ¤ν…€ ν•¨μμΈ κ²½μ°μ—λ” μ΄ ν•¨μλ¥Ό μ–΄λ–»κ² κµ¬ν„ν•΄μ•Ό ν•λ”μ§€μ— λ€ν• μ •λ³΄λ¥Ό μ κ³µν•©λ‹λ‹¤.\n\nν•¨μ μΈν„°νμ΄μ¤μ μΌλ°μ μΈ μ‚¬μ©λ²•μ„ λ‹¤μκ³Ό κ°™μ€ μ£Όμ” μΈ΅λ©΄μΌλ΅ λ¶„ν•΄ν•  μ μμµλ‹λ‹¤:\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- λ¬Έμ„ν™”. κΈ°λ¥ μΈν„°νμ΄μ¤λ” ν•¨μλ¥Ό μ„¤λ…ν•λ” κ°€λ…μ„± μΆ‹μ€ λ°©λ²•μ„ μ κ³µν•μ—¬ λ¬Έμ„μ ν’μ§μ„ ν–¥μƒμ‹ν‚µλ‹λ‹¤. ν•¨μμ κΈ°λ€λλ” μ…λ ¥ μ ν•κ³Ό λ°ν™ μ ν•μ„ λ…ν™•ν•κ² ν‘μ‹ν•μ—¬ μ½”λ“μ μμƒ λ™μ‘μ„ μ΄ν•΄ν•λ” λ° λ„μ›€μ΄ λ©λ‹λ‹¤. μ¦‰, κµ¬ν„ μ„Έλ¶€ μ‚¬ν•­μ„ λ¶„μ„ν•μ§€ μ•κ³ λ„ κ°λ°μκ°€ μ½”λ“μ μμƒ λ™μ‘μ„ μ΄ν•΄ν•λ” λ° λ„μ›€μ΄ λ©λ‹λ‹¤.\n- μ½”λ“ κ°€λ…μ„±. λ™μΌν• μ΄μ λ΅, ν•¨μ μΈν„°νμ΄μ¤λ” ν•¨μμ— κ΄€ν• μ •λ³΄μ λ…ν™•μ„± λ•λ¶„μ— μ½”λ“μ κ°€λ…μ„±μ„ λ†’μ…λ‹λ‹¤.\n- μ •μ  μ ν• κ²€μ‚¬. ν•¨μ μΈν„°νμ΄μ¤λ” μ ν• ννΈμ΄λ©°, νμ΄μ¬μ μ ν• ννΈμ κ°€μ¥ μ¤‘μ”ν• λ©μ μ€ μ •μ  μ ν• κ²€μ‚¬λ¥Ό μ©μ΄ν•κ² ν•λ” κ²ƒμ…λ‹λ‹¤. μλ¥Ό λ“¤μ–΄, mypyμ™€ κ°™μ€ λ„κµ¬λ¥Ό μ‚¬μ©ν•μ—¬ μ ν•κ³Ό κ΄€λ ¨λ μ¤λ¥λ¥Ό λ°νƒ€μ„ μ΄μ „μ— κ°μ§€ν•  μ μμΌλ©°, μ΄λ” μ½”λ“ μ‹ λΆ°μ„±μ„ ν–¥μƒμ‹ν‚¤κ³  λ²„κ·Έλ¥Ό μ¤„μ…λ‹λ‹¤.\n- κ°„μ ‘ λ°νƒ€μ„ μ΄μ . μ΄ μΈ΅λ©΄μ€ μ§μ ‘μ μΌλ΅ μ•μ„  μΈ΅λ©΄κ³Ό κ΄€λ ¨μ΄ μμµλ‹λ‹¤. ν•¨μ μΈν„°νμ΄μ¤λ” μ ν• ννΈμ™€ μ μ‚¬ν•κ² μ½”λ“ μ‹¤ν–‰ μ „μ— μ ν• κ΄€λ ¨ μ¤λ¥λ¥Ό μ‹λ³„ν•λ” λ° λ„μ›€μ΄ λ©λ‹λ‹¤. λ―Έλ¦¬ μ‹λ³„ν•μ§€ μ•μΌλ©΄ μ΄λ¬ν• μ¤λ¥κ°€ λ°νƒ€μ„ μ¤‘ λ°μƒν•  μ μμµλ‹λ‹¤. λ”°λΌμ„ ν•¨μ μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•λ©΄ κ°„μ ‘μ μΈ λ°νƒ€μ„ μ΄λ“μ„ μ–»μ„ μ μμµλ‹λ‹¤. μ΄λ¬ν• μ΄μµμ€ μ •μ  μ ν• μ¤λ¥κ°€ μ½”λ“μ— μ—†λ” κ²½μ°μ—λ§ λ°μƒν•λ©°, μ ν• ννΈκ°€ λ°νƒ€μ„ μ„±λ¥μ— μ•„λ¬΄λ° μν–¥μ„ λ―ΈμΉμ§€ μ•μ„ λ• κ°„μ ‘μ μ΄λΌκ³  ν•  μ μμµλ‹λ‹¤.\n- μ„¤κ³„ λ° μ•„ν‚¤ν…μ². λ…ν™•ν•κ³  κ°€λ…μ„± μΆ‹μ€ ν•¨μ μΈν„°νμ΄μ¤λ” μ½”λ“μ μ΅°μ§μ„ κ°„λ‹¨ν•κ³  λ” μ½κΈ° μ‰½κ² λ§λ“¤μ–΄ μ†ν”„νΈμ›¨μ–΄ μ‹μ¤ν…μ μ„¤κ³„μ™€ μ•„ν‚¤ν…μ²λ¥Ό ν–¥μƒμ‹ν‚¤λ” λ° λ„μ›€μ΄ λ©λ‹λ‹¤.\n\n# ν•¨μ μΈν„°νμ΄μ¤ κµ¬ν„μ ν•„μ μ”μ†\n\nν•¨μ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ‹¤λ” κ²ƒμ€ λ¬΄μ—‡μ„ μλ―Έν• κΉμ”? κ°„λ‹¨ν λ§ν•΄μ„, ν•¨μ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ” Python ν•¨μλ” μΈν„°νμ΄μ¤κ°€ μ •μν• μ‹κ·Έλ‹μ²λ¥Ό κ°€μ Έμ•Ό ν•©λ‹λ‹¤. μλ¥Ό λ“¤μ–΄, μ•μ—μ„ μ„¤λ…ν• μΈν„°νμ΄μ¤λ¥Ό κ³ λ ¤ν•΄λ³΄κ² μµλ‹λ‹¤. μ΄ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ ¤λ©΄, ν•¨μλ” λ‘ κ°μ μΈμλ¥Ό μ •ν™•ν β€” κ·Έλ¦¬κ³  μ¤μ§ λ‘ κ°μ μΈμλ§ β€” κ°€μ Έμ•Ό ν•λ©°, μ΄ μΈμλ“¤μ€ λ‘ λ‹¤ λ¶€λ™ μ†μμ μμ—¬μ•„ ν•κ³  λ¶€λ™ μ†μμ μλ¥Ό λ°ν™ν•΄μ•Ό ν•©λ‹λ‹¤. μ΄λ¬ν• ν•¨μλ§μ΄ μ΄ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•©λ‹λ‹¤. λ”°λΌμ„ μ„Έ κ°μ λ¶€λ™ μ†μμ μλ¥Ό μΈμλ΅ λ°›λ” ν•¨μκ°€ μλ‹¤λ©΄ μ΄ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•μ§€ μ•μµλ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nμ΄ κΈ€μ—μ„λ” ν•¨μ μΈν„°νμ΄μ¤ μ©μ–΄λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤. κ·Έλ¬λ‚ μ΄λ―Έ μ–ΈκΈ‰ν–λ“―μ΄ Pythonμ€ μ‹¤μ μ μΈ κ΄€μ μ—μ„ μ½λ¬λΈ”(callables)κ³Ό ν•¨μλ¥Ό κµ¬λ³„ν•μ§€ μ•μµλ‹λ‹¤. κΈ°μ μ μΌλ΅ ν΄λμ¤ΒΉ, νΈμ¶ κ°€λ¥ ν΄λμ¤, ν•¨μ, λ¶€λ¶„ ν•¨μ λ° μµλ… ν•¨μμ™€ κ°™μ€ λ‹¤μ–‘ν• μ ν•μ μ½λ¬λΈ”μ„ λ§λ‚  μ μμµλ‹λ‹¤. κ·Έλ¬λ‚ μ΄ μ¤‘ μ–΄λ κ²ƒμ„ νΈμ¶ν•λ”λΌλ„ μ°¨μ΄λ¥Ό μ• μ μ—†μ„ κ²ƒμ…λ‹λ‹¤: λ¨λ‘ λ™μΌν• λ°©μ‹μΌλ΅ νΈμ¶λ©λ‹λ‹¤.\n\nκ·Έλ¬λ‚ μ΄λ“¤μ—λ” μ°¨μ΄κ°€ μμµλ‹λ‹¤. νΈμ¶ κ°€λ¥ ν΄λμ¤μ™€ ν•¨μλ” μ ν• ννΈ(type hints)λ¥Ό μ‚¬μ©ν•μ—¬ μ •μν•  μ μμ§€λ§, λ¶€λ¶„ ν•¨μ λ° μµλ…(lambda) ν•¨μλ” κ·Έλ ‡κ² ν•  μ μ—†μµλ‹λ‹¤. μ΄λ¬ν• νƒ€μ΄ν•‘λμ§€ μ•μ€ μ½λ¬λΈ”μ΄ μ‹¤μ λ΅ μ–΄λ–¤ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•  μ μμ„κΉμ”? μ κ°€ λ³΄μ—¬λ“λ¦΄ κ²ƒμ²λΌ, κ°€λ¥ν•©λ‹λ‹¤ β€” κ·Έλ¬λ‚ μ™„μ „ν νƒ€μ…ν™”λ ν•¨μμ™€ λ‹¬λ¦¬ μ΄λ“¤μ€ κ°„μ ‘μ μΌλ΅λ§ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•  μ μμµλ‹λ‹¤.\n\nλ”°λΌμ„, μ½λ¬λΈ”, ν•¨μ, λ¶€λ¶„ ν•¨μ λ° μΌλ¶€ κ²½μ°μ—λ” λλ‹¤ ν•¨μλ¥Ό μ‚¬μ©ν•μ—¬ λ™μΌν• κΈ°λ¥μ„ κµ¬ν„ν•  μ μμµλ‹λ‹¤. κ·Έλ¬λ‚ μΈν„°νμ΄μ¤μ— λ€ν•΄ μ΄μ•ΌκΈ°ν•  λ•, μΌλ¶€ μ½λ¬λΈ”μ΄ λ‹¤λ¥Έ μ½λ¬λΈ”λ³΄λ‹¤ λ” λ‚μ€ κ²°κ³Όλ¥Ό κ°€μ Έμ¤κ±°λ‚ μ μ–΄λ„ λ‹¤λ¥΄κ² μ‘λ™ν•  μ μμµλ‹λ‹¤. μ΄μ— λ€ν•΄ λ” μμ„Έν μ•μ•„λ³΄κ² μµλ‹λ‹¤.\n\n# νƒ€μ… ννΈλ¥Ό μ‚¬μ©ν• ν•¨μ μΈν„°νμ΄μ¤\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nν•¨μ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ” κ°€μ¥ κ°„λ‹¨ν•κ³  κΈ°λ³Έμ μΈ λ°©λ²•μ€ νƒ€μ… ννΈλ¥Ό μ‚¬μ©ν•λ” κ²ƒμ…λ‹λ‹¤. κ·Έλ¬λ―€λ΅ μ§μ ‘ νƒ€μ… ννΈλ¥Ό μ‚¬μ©ν•κ±°λ‚ ν•„μ”ν• μΈν„°νμ΄μ¤λ¥Ό λ‚νƒ€λ‚΄λ” νƒ€μ… λ³„μΉ­μ„ μƒμ„±ν•  μ μμµλ‹λ‹¤. νƒ€μ… λ³„μΉ­μ€ κ°€λ…μ„±μ„ λ†’μΌ μ μμΌλ©°, λ³„μΉ­μ„ ν†µν•΄ μΈν„°νμ΄μ¤μ— μ΄λ¦„μ„ λ¶€μ—¬ν•  μ μμµλ‹λ‹¤.\n\nμ°λ¦¬μ ν•¨μ μΈν„°νμ΄μ¤μ— ν•΄λ‹Ήν•λ” νƒ€μ… λ³„μΉ­μ€ λ‹¤μκ³Ό κ°™μµλ‹λ‹¤:\n\n```js\nfrom typing import Callable\n\nThreeFloatCallable = Callable[[float, float], float]\n```\n\nμ΄ νƒ€μ… ννΈλ¥Ό ν•΄μ„ν•΄λ΄…μ‹λ‹¤: ThreeFloatCallableμ€ 2κ°μ λ¶€λ™μ†μμ  μ«μλ¥Ό μ…λ ¥μΌλ΅ λ°›μ•„ λ¶€λ™μ†μμ  μ«μλ¥Ό λ°ν™ν•λ” callableμ…λ‹λ‹¤. μ΄κ²ƒμ΄ λ°”λ΅ μ°λ¦¬κ°€ μ •μν•κ³ μ ν–λ μΈν„°νμ΄μ¤μ…λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nν•΄λ‹Ή μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•λ” λ°©λ²•μ€ μ–΄λ–¤κ°€μ”? μλ¥Ό λ“¤μ–΄, μ΄ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ” ν•¨μλ¥Ό μ…λ ¥μΌλ΅ λ°›λ” λ‹¤λ¥Έ ν•¨μλ¥Ό κµ¬ν„ν•  μ μμµλ‹λ‹¤:\n\n```js\ndef call_threefloats(\n    x: float,\n    y: float,\n    func: ThreeFloatCallable\n) -> float:\n    return func(x, y)\n```\n\nμ°λ¦¬λ” ThreeFloatCallable νƒ€μ… λ³„μΉ­μ„ μΈν„°νμ΄μ¤λ΅ μƒμ„±ν–μΌλ‚, μ΄μ™€ κ°™μ€ νƒ€μ… λ³„μΉ­ μ—†μ΄λ„ call_threefloats() ν•¨μλ¥Ό μ •μν•  μ μμµλ‹λ‹¤:\n\n```js\ndef call_threefloats(\n    x: float,\n    y: float,\n    func: Callable[[float, float], float]\n) -> float:\n    return func(x, y)\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nμ„ λ‘ μ •μλ” ν•¨μ(κΈ°μ μ μΌλ΅λ” νΈμ¶λ  μ μλ” ν•¨μ)λ¥Ό μμƒν•λ©°, λ‹¤μ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ” ν•¨μλ¥Ό μ”κµ¬ν•©λ‹λ‹¤: Callable[[float, float], float].\n\nμΈν„°νμ΄μ¤κ°€ μ–΄λ–»κ² μ‘λ™ν•λ”μ§€ μ‚΄ν΄λ΄…μ‹λ‹¤:\n\n```js\nfrom typing import Callable\n\nThreeFloatCallable = Callable[[float, float], float]\n\ndef call_threefloats(\n    x: float,\n    y: float,\n    func: ThreeFloatCallable\n) -> float:\n    return func(x, y)\n\ndef add(x: float, y: float) -> float:\n    return x + y\n\ncall_threefloats(1., 1.5, add)\n```\n\nν•¨μ addλ” ThreeFloatCallable μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ―€λ΅ mypyλ” μ΄ μ½”λ“μ—μ„ λ¬Έμ λ¥Ό λ°κ²¬ν•μ§€ μ•μ„ κ²ƒμ…λ‹λ‹¤. κ·Έλ¬λ‚ add() ν•¨μλ¥Ό λ‹¤μκ³Ό κ°™μ΄ λ³€κ²½ν•μ„Έμ”:\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\ndef add(x: int, y: float) -> float:\n    return x + y\n\ncall_threefloats(1, 1.5, add)\n```\n\nκ·Έλ¦¬κ³  mypyλ” λ‹¤μκ³Ό κ°™μ€ μ¤λ¥λ¥Ό λ°μƒμ‹ν‚µλ‹λ‹¤:\n\n```js\n error: Argument 3 to \"call_threefloats\" has incompatible\n        type \"Callable[[int, float], float]\";\n        expected \"Callable[[float, float], float]\"  [arg-type]\n```\n\nλ³΄μ‹λ” λ°”μ™€ κ°™μ΄, mypyλ” μ°λ¦¬κ°€ μ •μν• ν•μ‹ λ³„μΉ­(ThreeFloatCallable)μ„ μ‚¬μ©ν•μ§€ μ•κ³  μ „μ²΄ μ ν•μ„ μ κ³µν•©λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nλ™μΌν• ν•¨μ μΈν„°νμ΄μ¤λ¥Ό νΈμ¶ κ°€λ¥ν• ν΄λμ¤λ¥Ό μ‚¬μ©ν•μ—¬ κµ¬ν„ν•΄ λ΄…μ‹λ‹¤:\n\n```js\nclass Adder:\n    def __call__(self, x: float, y: float) -> float:\n        return x + y\n\ncall_threefloats(1, 1.5, Adder())\n```\n\nλ‹¤μ‹ ν• λ², mypyλ” μ΄ μ½”λ“μ—μ„ λ¬Έμ κ°€ μ—†λ‹¤κ³  νλ‹¨ν•  κ²ƒμ…λ‹λ‹¤. κ·Έλ¬λ‚ μ£Όμν•  μ μ€ μ΄ Adder ν΄λμ¤κ°€ ThreeFloatCallable μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•κ³  call_threefloats()μ—μ„ μ‚¬μ©λλ” κ²ƒμ΄ μ•„λ‹λΌ, ν΄λμ¤μ μΈμ¤ν„΄μ¤(μ—¬κΈ°μ„λ” Adder())μ„μ„ μ•μ•„λ‘μ–΄μ•Ό ν•©λ‹λ‹¤. μ΄ ν΄λμ¤λ¥Ό μ‚¬μ©ν•λ” κ²½μ°:\n\n```js\ncall_threefloats(1, 1.5, Adder);\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nλ‹¤μκ³Ό κ°™μ€ μ •μ  μ¤λ¥κ°€ λ°μƒν•©λ‹λ‹¤:\n\n```js\nμ—λ¬: \"call_threefloats\"μ μ„Έ λ²μ§Έ μΈμλ” νΈν™λμ§€ μ•λ” νƒ€μ… \"type[Adder]\"μ…λ‹λ‹¤\n       μμƒλλ” νƒ€μ…μ€ \"Callable[[float, float], float]\"μ…λ‹λ‹¤\n       [arg-type]\n```\n\nAdder ν΄λμ¤μ λ©”μ„λ“ μ¤‘ ν•λ‚μΈ **call**()λ§ κµ¬ν„ν–μ§€λ§, ν•„μ”ν• λ‹¤λ¥Έ λ©”μ„λ“λ“¤μ„ κµ¬ν„ν•  μ μμΌλ©° Adderμ μΈμ¤ν„΄μ¤λ” μ—¬μ „ν ThreeFloatCallable μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•  κ²ƒμ…λ‹λ‹¤.\n\n## typing.Callableμ ν•κ³„\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\ntyping.Callable κµ¬λ¬Έμ€ κ·Έ ν•κ³„κ°€ μμµλ‹λ‹¤. μλ¥Ό λ“¤μ–΄, λ‘ κ°μ μ‹¤μ μΈμμ™€ μ¶”κ°€ μ„ νƒμ  μ„μΉ λ° ν‚¤μ›λ“ μΈμλ¥Ό μ‚¬μ©ν•μ—¬ floatλ¥Ό λ°ν™ν•λ” ν•¨μλ¥Ό κµ¬ν„ν•΄μ•Ό ν•  λ• μ–΄λ–»κ² ν•΄μ•Ό ν• μ§€ μ–΄λ ¤μ›€μ΄ μμµλ‹λ‹¤.\n\ntyping.Callable κµ¬λ¬Έμ€ μ΄λ¥Ό μμ—°μ¤λ½κ² μ²λ¦¬ν•  μ μλ” λ°©λ²•μ„ μ κ³µν•μ§€ μ•μµλ‹λ‹¤. λ‡ κ°€μ§€ νΈλ¦­μ„ μ‹λ„ν•΄ λ³Ό μλ” μμ§€λ§, λ€μ‹  λ‹¤μ μ„Ήμ…μ—μ„ μ„¤λ…ν•λ” typing ν”„λ΅ν† μ½λ΅ λ„μ–΄κ°€ λ³΄κ² μµλ‹λ‹¤.\n\n# typing ν”„λ΅ν† μ½μ„ μ‚¬μ©ν• ν•¨μ μΈν„°νμ΄μ¤\n\ntyping.Protocolμ„ μ‚¬μ©ν•μ—¬ λ‘ κ°μ ν•¨μ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•΄ λ΄…μ‹λ‹¤. λ¨Όμ €, μ„ νƒμ  μΈμ μ—†μ΄ ν• κ²½μ°λ¶€ν„° μ‹μ‘ν•©λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nfrom typing import Protocol\n\nclass ThreeFloatCallable(Protocol):\ndef **call**(self, x: float, y: float) -> float:\n...\n\nμ΄μ  μ„ νƒμ  μΈμλ¥Ό μ‚¬μ©ν•λ” μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•΄ λ΄…μ‹λ‹¤:\n\nclass ThreeFloatCallableWithArgsKwargs(Protocol):\ndef **call**(\nself,\nx: float,\ny: float,\nargs: Any,\nkwargs: Any\n) -> float:\n...\n\nμ΄κ²ƒλ“¤μ€ μ„ νƒμ  μΈμμ…λ‹λ‹¤. κ·Έλ¬λ‚ μ΄ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ” ν•¨μλ” μ΄λ¬ν• μ„ νƒμ  μΈμλ¥Ό λ°λ“μ‹ κ°€μ Έμ•Ό ν•©λ‹λ‹¤. λ”°λΌμ„ μ΄ ν•¨μλ” μ΄ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•©λ‹λ‹¤:\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\ndef implements(\n    x: float, y: float, *args: Any, **kwargs: Any\n) -> float:\n    ...\n```\n\nν•μ§€λ§ μ΄κ²ƒλ“¤μ€ κ·Έλ ‡μ§€ μ•μµλ‹λ‹¤:\n\n```js\ndef implements_not(x: float, y: float) -> float:\n    ...\n\ndef implements_not_only_args(\n    x: float,\n    y: float,\n    *args: Any\n) -> float:\n    ...\n\ndef implements_not_only_kwargs(\n    x: float,\n    y: float,\n    *kwargs: Any\n) -> float:\n    ...\n```\n\nλ³΄λ” λ°”μ™€ κ°™μ΄ μΈν„°νμ΄μ¤κ°€ μ •μν• κ²ƒκ³Ό μ •ν™•ν λ™μΌν• μ„λ…μ„ μ‚¬μ©ν•΄μ•Ό ν•©λ‹λ‹¤: λ™μΌν• μμ μΈμ, λ™μΌν• μ ν•μ μΈμ λ° λ™μΌν• λ°ν™ κ°’ μ ν•μ„ κ°€μ Έμ•Ό ν•©λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nμΈμ μ΄λ¦„μ€ μ¤‘μ”ν•μ§€ μ•μµλ‹λ‹¤. μ¤‘μ”ν• κ²ƒμ€ μ ν•μ…λ‹λ‹¤. λ”°λΌμ„, λ‹¤μ λ‘ ν•¨μ λ¨λ‘ ThreeFloatCallable μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•©λ‹λ‹¤. μ²« λ²μ§Έ ν•¨μλ§ μΈν„°νμ΄μ¤μ™€ λ™μΌν• μΈμ μ΄λ¦„μ„ μ‚¬μ©ν•μ§€λ§ λ‹¤μ ν•¨μλ„ κ·Έκ²ƒμ„ κµ¬ν„ν•©λ‹λ‹¤:\n\n```js\ndef add(x: float, y: float) -> float:\n    return x + y\n\ndef add_too(a: float, b: float) -> float:\n    return a + b\n```\n\nThreeFloatCallable μΈν„°νμ΄μ¤μ— μ„μΉ λ° ν‚¤μ›λ“ μΈμκ°€ λ¨λ‘ ν¬ν•¨λλ‹¤λ©΄, μ΄λ¦„μλ”(ν‚¤μ›λ“) μΈμλ§ ν—μ©ν•λ” ν•¨μλ” μ΄ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•μ§€ μ•μµλ‹λ‹¤. κ·Έλ¬λ―€λ΅ mypyλ” λ‹¤μ ν•¨μλ¥Ό ν—μ©ν•μ§€ μ•μµλ‹λ‹¤:\n\n```js\ndef add_named(*, x: float, y: float) -> float:\n    return x + y\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nλ‹¤μκ³Ό κ°™μ€ μ¤λ¥ λ©”μ‹μ§€κ°€ ν‘μ‹λ©λ‹λ‹¤:\n\n```js\nerror: \"call_threefloats\" ν•¨μμ 3λ²μ§Έ μΈμκ°€ νΈν™λμ§€ μ•λ”\n       νƒ€μ… \"Callable[[NamedArg(float, 'a'), NamedArg(float, 'b')], float]\"μ…λ‹λ‹¤;\n       μμƒλλ” νƒ€μ…μ€ \"Callable[[float, float], float]\"μ…λ‹λ‹¤  [arg-type]\n```\n\nκ·Έλ¬λ‚ ν•¨μμ— μ„μΉ-μ „μ© μΈμκ°€ ν¬ν•¨λ κ²½μ°, mypyμ—μ„ μ¤λ¥κ°€ ν‘μ‹λμ§€ μ•μµλ‹λ‹¤:\n\n```js\ndef add_a_positional(a: float, /, b: float) -> float:\n    return a + b\n\ncall_threefloats(1, 1.5, add_a_positional)\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n`add_a_positional()` ν•¨μλ” ThreeFloatCallable μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•©λ‹λ‹¤. μ΄ ν•¨μμ—μ„ aλ” μ„μΉ μ „μ© μΈμμ΄μ§€λ§ bλ” μ„μΉ μ§€μ • λλ” μ΄λ¦„ μ§€μ • λ¨λ‘ κ°€λ¥ν•©λ‹λ‹¤.\n\nνƒ€μ΄ν•‘ ν”„λ΅ν† μ½μ€ νƒ€μ… ννΈμ—λ” μ—†λ” μ¥μ μ΄ μμµλ‹λ‹¤: docstringμΌλ΅ μƒμ„±ν•  μ μλ‹¤λ” κ²ƒμ…λ‹λ‹¤. μ΄κ²ƒμ€ μΈν„°νμ΄μ¤μ— λ€ν•΄ λ” κΈ΄ μ„¤λ…μ΄ ν•„μ”ν•  λ• μ¤‘μ”ν•  μ μμµλ‹λ‹¤. μ΄λ° κ²½μ°μ—λ” μΈν„°νμ΄μ¤κ°€ λΉ„κµμ  κ°„λ‹¨ν• κ²½μ°λΌλ„ νƒ€μ΄ν•‘ ν”„λ΅ν† μ½μ„ μ •μν•κΈ°λ΅ κ²°μ •ν•©λ‹λ‹¤.\n\n## Pylint μ¤λ¥\n\ntyping.Protocolμ„ μ‚¬μ©ν•μ—¬ ν•¨μ μΈν„°νμ΄μ¤λ¥Ό μƒμ„±ν•κ³  pylintμ„ μ‚¬μ©ν•λ” κ²½μ°, μΌλ°μ μΌλ΅ R0903 κ²½κ³ κ°€ λ°μƒν•  μ μμµλ‹λ‹¤: Too few public methods (x/y), μ—¬κΈ°μ„ x/yμ xμ™€ yλ” κ°κ° μ‹¤μ  λ° μμƒν•λ” κ³µκ° λ©”μ„λ“ μλ¥Ό λ‚νƒ€λƒ…λ‹λ‹¤. μ΄ κ²½κ³ λ” ν΄λμ¤κ°€ μ μ ν•κ² μ„¤κ³„λμ§€ μ•μ•μ„ κ°€λ¥μ„±μ„ μ μ•ν•©λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nκ·Έλ¬λ‚, μ΄ κ¶μ¥ μ‚¬ν•­μ€ ν•­μƒ typing.Protocolμ μ‚¬μ© μ‚¬λ΅€μ™€ μΌμΉν•μ§€λ” μ•μµλ‹λ‹¤. ν•¨μ μΈν„°νμ΄μ¤λ” μ—¬κΈ°μ— ν•΄λ‹Ήν•λ” μμ‹μ…λ‹λ‹¤: λ€λ¶€λ¶„μ κ²½μ°μ—λ” **call**μ΄λΌλ” λ‹¨μΌ λ©”μ†λ“λ¥Ό μ •μν•κ³  λ‹¤λ¥Έ κ²ƒμ€ ν•„μ”ν•μ§€ μ•μµλ‹λ‹¤.\n\nλ§μ•½ pylintμ„ μ‚¬μ©ν•λ‹¤λ©΄, μ΄ κ²½κ³ μ— λ€ν•΄ λ€μ‘ν•λ” κ²ƒμ΄ μΆ‹μµλ‹λ‹¤. μ„Έ κ°€μ§€ κ°€μ¥ ν”ν• μ‹λ‚λ¦¬μ¤λ¥Ό κ³ λ ¤ν•΄ λ΄…μ‹λ‹¤:\n\n- μ΄ κ²½κ³ λ¥Ό μ§€μ—­μ μΌλ΅ λ¬΄μ‹ν•  μλ„ μμµλ‹λ‹¤. μ—¬κΈ°μ— ν”„λ΅ν† μ½μ„ μ •μν•λ” μ½”λ“μ—μ„ μ²« λ²μ§Έ μ¤„μ— # pylint: disable=too-few-public-methods μ£Όμ„μ„ μ¶”κ°€ν•μ—¬ μ΄λ¥Ό μν–‰ν•  μ μμµλ‹λ‹¤. μ΄ λ°©λ²•μ€ μ½”λ“λ² μ΄μ¤μ λ‹¤λ¥Έ λ¶€λ¶„μ—μ„ κ²½κ³ λ¥Ό μ μ§€ν•λ©΄μ„ μ΄ νΉμ • ν”„λ΅ν† μ½ μ •μμ—μ„λ” κ²½κ³ λ¥Ό μ¨κΉλ‹λ‹¤:\n\n```python\nfrom typing import Protocol\n\n# pylint: disable=too-few-public-methods\n\nclass FloatFloatFloat(Protocol):\n    def __call__(self, x: float, y: float) -> float:\n        ...\n\nclass StrFloatFloat(Protocol):\n    def __call__(self, x: str, y: float) -> float:\n        ...\n\nclass StrFloatStr(Protocol):\n    def __call__(self, x: str, y: float) -> str:\n        ...\n\n# pylint: enable=too-few-public-methods\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- μ½”λ“μ νΉμ • λ¶€λ¶„μ—μ„μ΄ κ²½κ³ λ¥Ό μ–µμ  ν•  μ μμµλ‹λ‹¤. μλ¥Ό λ“¤μ–΄ typing.Protocolμ„ μ‚¬μ©ν•μ—¬ μ—¬λ¬ ν•¨μ μΈν„°νμ΄μ¤λ¥Ό μ •μν•λ” κ³³μ—μ„μ΄λ¥Ό ν•  μ μμµλ‹λ‹¤.\n\n```python\nfrom typing import Protocol\n\n# pylint: disable=R0903\nclass Function(Protocol):\n    def __call__(self, x: float, y: float) -> float:\n        ...\n```\n\n- μ „μ²΄ ν”„λ΅μ νΈμ—μ„μ΄ κ²½κ³ λ¥Ό μ–µμ  ν•  μλ„ μμµλ‹λ‹¤. pyproject.toml νμΌμ—μ„μ΄λ¥Ό μν–‰ν•λ” λ°©λ²•μ„ λ³΄μ—¬ λ“λ¦¬κ² μµλ‹λ‹¤. νμΌμ— λ‹¤μ λΈ”λ΅μ„ μ¶”κ°€ν•κΈ°λ§ ν•λ©΄ λ©λ‹λ‹¤.\n\n```python\n[tool.pylint.\"MESSAGES CONTROL\"]\ndisable = [\n    \"too-few-public-methods\"\n]\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- λ§μ§€λ§‰μΌλ΅, κ²½κ³  λ©”μ‹μ§€λ¥Ό μ „μ—­μ μΌλ΅ λ¬΄μ‹ν•  μ μμµλ‹λ‹¤. μ΄κ²ƒμ€ μμ£Ό typing.Protocolμ„ μ‚¬μ©ν•μ—¬ ν•¨μ μΈν„°νμ΄μ¤λ¥Ό μ •μν•  λ• μ μ©ν•  μ μμ§€λ§, μ£Όμν•μ‹­μ‹μ¤. λ§μ•½ ν•¨μ μΈν„°νμ΄μ¤ μ™Έμ λ‹¤λ¥Έ μ ν•μ μΈν„°νμ΄μ¤λ¥Ό μ •μν•  λ•μ—λ„ typing.Protocolμ„ μ‚¬μ©ν•λ‹¤λ©΄, λ¨λ“  μΈν„°νμ΄μ¤μ— λ€ν•΄ κ²½κ³ κ°€ λ¬΄μ‹λ  κ²ƒμ…λ‹λ‹¤. .pylintrc κµ¬μ„± νμΌμ—μ„ [MESSAGES CONTROL] μ„Ήμ… μ•„λμ disable λ©λ΅μ— too-few-public-methodsλ¥Ό μ¶”κ°€ν•μ—¬ μ΄λ¥Ό μν–‰ν•  μ μμµλ‹λ‹¤:\n\n```js\n[MESSAGES CONTROL]\ndisable=too-few-public-methods,\n```\n\nμ„ μμ  λ¨λ‘μ—μ„ too-few-public-methodsλ¥Ό ν•΄λ‹Ή μ½”λ“λ΅ λ€μ²΄ν•  μ μμµλ‹λ‹¤. μ¦‰, R0903μ…λ‹λ‹¤. κ·Έλ¬λ‚ μ΄λ¦„μ„ μ‚¬μ©ν•λ” κ²ƒμ΄ μ½”λ“λ¥Ό λ” μ½κΈ° μ‰½κ² λ§λ“­λ‹λ‹¤.\n\n# μΈν„°νμ΄μ¤μ κ°„μ ‘ κµ¬ν„\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nν• λ² μ΄μƒ λ‹¤μκ³Ό κ°™μ€ λ¬Έμ λ¥Ό λ§μ£Όμ³¤μµλ‹λ‹¤. νΉμ • μΈν„°νμ΄μ¤λ¥Ό μΈμμ™€ ν‚¤μ›λ“ μΈμ μ—†μ΄ ν•¨μμ— μ κ³µν•΄μ•Ό ν•λ”λ°, μ‚¬μ©ν•λ ¤λ” ν•¨μλ” μΈμμ™€ ν‚¤μ›λ“ μΈμλ¥Ό μ‚¬μ©ν•©λ‹λ‹¤. μ–΄λ–»κ² ν•΄μ•Ό ν• κΉμ”?\n\nκ°„λ‹¨ν• ν•΄κ²°μ±…μ΄ μμµλ‹λ‹¤. μ„μ μμ λ¥Ό κΈ°λ°μΌλ΅ λ‹¤μ μ‹λ‚λ¦¬μ¤κ°€ μλ‹¤κ³  κ°€μ •ν•΄ λ΄…μ‹λ‹¤.\n\n```js\nfrom typing import Callable\n\nThreeFloatCallable = Callable[[float, float], float]\n\ndef func_of_squares(\n    x: float,\n    y: float,\n    func: ThreeFloatCallable\n) -> float:\n    x2 = x*x\n    y2 = y*y\n    return func(x2, y2)\n```\n\nκ·Έλ¬λ‚ ThreeFloatCallableλ΅ μ‚¬μ©ν•΄μ•Ό ν•λ” ν•¨μμ μ‹κ·Έλ‹μ²κ°€ νΈν™λμ§€ μ•μµλ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\ndef model(\n    x: float,\n    y: float,\n    alpha: float,\n    beta: float,\n    gamma: float\n) -> float:\n    x = x/alpha\n    y = y/beta\n    z = (x + y)**gamma\n    return z\n```\n\nmodel() ν•¨μλ¥Ό func_of_squares() ν•¨μμ func μΈμλ΅ μ§μ ‘ μ‚¬μ©ν•  μ μ—†μµλ‹λ‹¤. μ™λƒν•λ©΄ funcλ” ThreeFloatCallables μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ” νΈμ¶ κ°€λ¥ν• κ°μ²΄λ¥Ό μ”κµ¬ν•λ” λ°λ©΄ model() ν•¨μλ” κ·Έλ ‡μ§€ μ•κΈ° λ•λ¬Έμ…λ‹λ‹¤.\n\nκ·Έλ¬λ©΄ model() ν•¨μλ¥Ό μ§μ ‘ μ‚¬μ©ν•  μ μ—†λ‹¤λ©΄ κ°„μ ‘μ μΌλ΅ μ‚¬μ©ν•  μλ” μμ„κΉμ”? κ·Έλ ‡λ‹¤λ©΄ μ£Όμ–΄μ§„ alpha, beta λ° gamma κ°’μ— λ€ν•΄ μν–‰ν•΄μ•Ό ν•©λ‹λ‹¤. μλ¥Ό λ“¤μ–΄, μ΄λ“¤μ„ λ¨λ‘ 1.0μΌλ΅ μ„¤μ •ν•λ©΄ ν•¨μλ” xμ™€ yμ λ‹¨μν• ν•©μ„ λ°ν™ν•©λ‹λ‹¤. μ΄ μ„Έ κ°€μ§€ μΈμλ¥Ό κ³ μ •ν•λ©΄ μ‚¬μ‹¤μƒ λ‘ κ°μ μΈμ, μ¦‰ xμ™€ y(float λ° floatλ΅ λ” λ…ν™•ν•κ²)λ¥Ό λ°›λ” μμ •λ model() ν•¨μλ¥Ό μ–»κ² λ©λ‹λ‹¤.\n\nμ΄κ²ƒμ΄ μ°λ¦¬κ°€ λ”°λ¥Ό λ°©ν–¥μ…λ‹λ‹¤. μΌλ¶€ μΈμμ κ°’μ΄ κ³ μ •λ ν•¨μλ¥Ό λ¶€λ¶„ ν•¨μ(partial functions)λΌκ³  ν•©λ‹λ‹¤. μ¤λμ€ μ΄ μ£Όμ λ¥Ό μμ„Έν λ‹¤λ£¨μ§€ μ•κ² μµλ‹λ‹¤. λ³„λ„μ κΈ°μ‚¬κ°€ ν•„μ”ν• λ§νΌ μ°λ¦¬μ μ‘μ—…μ— μ§‘μ¤‘ν•©μ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nThreeFloatCallable νƒ€μ…μ„ λ”°λ¥΄λ” λ¶€λ¶„ ν•¨μλ¥Ό λ§λ“¤μ–΄μ•Ό ν•©λ‹λ‹¤. μ΄λ¥Ό μ—¬λ¬ κ°€μ§€ λ°©λ²•μΌλ΅ ν•  μ μμµλ‹λ‹¤. μλ¥Ό λ“¤μ–΄, λ‹¤μκ³Ό κ°™μ΄ λνΌ ν•¨μλ¥Ό μ •μν•  μ μμµλ‹λ‹¤:\n\n```js\ndef modelwrapper_raw(x: float, y: float) -> float:\n    return model(x, y, 1, 1, 1)\n```\n\n(μ΄λ¦„μ— \\_rawλ¥Ό μ¶”κ°€ν• μ΄μ λ” μ΄κ²ƒμ΄ μ‹¤μ λ΅ Python κµ¬λ¬Έ μ„¤νƒ•μ΄ μ—†λ” μΌμΆ…μ μ²μ λ²„μ „μ΄κΈ° λ•λ¬Έμ…λ‹λ‹¤.)\n\nmodelwrapper_raw() ν•¨μκ°€ ThreeFloatCallable μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ‹¤λ” κ²ƒμ— μ μν•μ„Έμ”! λ”°λΌμ„ μ΄ λ¶€λ¶„ ν•¨μλ¥Ό func_of_squares()μ—μ„ μ‚¬μ©ν•  μ μμµλ‹λ‹¤. μ΄ κ³³μ—μ„ mypyλ” μ¤λ¥λ¥Ό μ£Όμ¥ν•μ§€ μ•μµλ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\nfunc_of_squares((x = 1.5), (y = 2.34), (func = modelwrapper_raw()));\n```\n\nmodelwrapper_raw() ν•¨μλ” ThreeFloatCallable μΈν„°νμ΄μ¤λ¥Ό μ§μ ‘ κµ¬ν„ν•¨μΌλ΅μ¨ model() ν•¨μκ°€ κ°„μ ‘μ μΌλ΅ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•  μ μλ„λ΅ λ„μ™€μ¤λ‹λ‹¤.\n\nμ„μ—μ„λ” μμ²΄ λνΌ(wrapper) ν•¨μλ¥Ό μ •μν–μ§€λ§, Pythonμ€ λ¶€λ¶„ ν•¨μλ¥Ό μƒμ„±ν•κΈ° μ„ν• λ„¤μ΄ν‹°λΈ λ„κµ¬λ¥Ό μ κ³µν•©λ‹λ‹¤: functiontools.partial. μ‚¬μ©ν•΄ λ΄…μ‹λ‹¤:\n\n```js\nfrom functools import partial\n\nmodelwrapper_partial = partial(\n    model,\n    alpha=1,\n    beta=1,\n    gamma=1\n)\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n`modelwrapper_partial()`μ€ ThreeFloatCallable νƒ€μ…μ λ¶€λ¶„ ν•¨μμ΄λ―€λ΅ `func_of_squares()`μ—μ„ funcλ΅ μ‚¬μ©ν•  μ μμµλ‹λ‹¤. λ‹¤μ‹ λ§ν•μ§€λ§, mypyλ” λ¶ν‰ν•μ§€ μ•μ„ κ²λ‹λ‹¤:\n\n```js\nfunc_of_squares((x = 1.5), (y = 2.34), (func = modelwrapper_partial));\n```\n\nλ¶€λ¶„ ν•¨μ(partial function)λ” ν•¨μλ¥Ό λ°ν™ν•λ” ν•¨μμ…λ‹λ‹¤. `functools.partial`μ„ μ‚¬μ©ν•  λ•, λ³΄λ‹¤ μ •ν™•νλ” λ¶€λ¶„ ν•¨μκ°€ λ°ν™λ©λ‹λ‹¤:\n\n```js\n>>> type(model)\n<class 'function'>\n>>> type(modelwrapper_raw)\n<class 'function'>\n>>> type(modelwrapper_partial)\n<class 'functools.partial'>\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nλ™μΌν• λ°©μ‹μΌλ΅ mypyκ°€ λλ‹¤ λ¬Έμ„ μ‚¬μ©ν•μ—¬ μƒμ„±λ λ‹¤μ ν•¨μμ— λ€ν•΄ λ¶ν‰ν•μ§€ μ•μ„ κ²ƒμ…λ‹λ‹¤:\n\n```js\nmodelwrapper_lambda = lambda x, y: model(x, y, 1, 1, 1)\n```\n\nμ΄κ²ƒμ€ λ¶€λ¶„ ν•¨μλ¥Ό λ§λ“λ” λ λ‹¤λ¥Έ μμ…λ‹λ‹¤. κ·Έλ¬λ‚ μ΄ μ½”λ“λ” lambda ν•¨μκ°€ μµλ… ν•¨μμ΄κΈ° λ•λ¬Έμ— μ΄λ¦„μ„ μ‚¬μ©ν•λ” κ²ƒμ΄ μΆ‹μ§€ μ•λ‹¤λ” μ΄μ λ΅ μΆ‹μ€ μ½”λ“κ°€ μ•„λ‹™λ‹λ‹¤. μ΄κ²ƒμ€ λ¶„λ…ν νμ΄μ¬μ¤λ¬μ΄ μ½”λ“κ°€ μ•„λ‹™λ‹λ‹¤. λ‹¤μ‹ λ§ν•΄ μ΄λ””μ¤λ§¤ν‹±ν•μ§€ μ•μ€ μ½”λ“μ…λ‹λ‹¤.\n\nμ¬λ―Έμκ²λ„ functools.partialμ΄λ‚ μµλ… (λλ‹¤) ν•¨μλ¥Ό μ‚¬μ©ν•μ—¬ λ§λ“  λ¶€λ¶„ ν•¨μλ” νƒ€μ… ννΈλ¥Ό κ°€μ§€μ§€ μ•μµλ‹λ‹¤. νΉν λ¶€λ¶„ ν•¨μλ” μ£Όμ„μ„ μƒμ†ν•μ§€ μ•μΌλ©°, λ”°λΌμ„ λ³Έλ λ¶€λ¶„ν™”ν•  ν•¨μμΈ fooμ— μ£Όμ„μ΄ λ‹¬λ¦° κ²½μ°μ—λ„ **annotations** μ†μ„±μ΄ λΉ„μ–΄ μμµλ‹λ‹¤. ν•μ§€λ§ functools.partial(foo, ...)λ” **annotations** μ†μ„±μ„ μ „ν€ κ°–μ§€ μ•μ„ κ²ƒμ…λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nκ·Έλμ„ μ •μ  μ²΄μ»¤λ” μ™ μ—λ¬λ¥Ό λ°μƒμ‹ν‚¤μ§€ μ•μ„κΉμ”? μ™ λ¶€λ¶„ ν•¨μκ°€ μ–΄λ…Έν…μ΄μ…μ΄ μ—†μ–΄λ„ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•  μ μμ„κΉμ”?\n\nμ΄μ™€ κ°™μ€ μƒν™©μ—μ„ μ •μ  λ¶„μ„ μ¤‘μ—, mypyμ™€ κ°™μ€ νƒ€μ… μ²΄μ»¤λ” functools.partial ν•¨μκ°€ μ›λ³Έ ν•¨μλ¥Ό μ–΄λ–»κ² λ³€κ²½ν•λ”μ§€ λ¶„μ„ν•μ—¬ νƒ€μ…μ„ μ¶”λ΅ ν•©λ‹λ‹¤. μ΄λ¬ν• μ¶”λ΅ μ„ ν†µν•΄ mypyλ” **annotations** μ†μ„±μ΄ μ—†μ–΄λ„λ„ λ¶€λ¶„ κ°μ²΄μ— μ›λ³Έ ν•¨μμ νƒ€μ… ννΈλ¥Ό μ μ©ν•  μ μμµλ‹λ‹¤.\n\nmodelwrapper_lambda()μ—μ„λ„ λΉ„μ·ν• μƒν™©μ„ λ³Ό μ μμµλ‹λ‹¤: **annotations** μ†μ„±μ΄ μμ§€λ§ λΉ„μ–΄ μμµλ‹λ‹¤:\n\n```js\n>>> modelwrapper_lambda = lambda x, y: model(x, y, 1, 1, 1)\n>>> type(modelwrapper_lambda)\n<class 'function'>\n>>> modelwrapper_lambda.__annotations__\n{}\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nν•μ§€λ§ μ—¬λ¬λ¶„λ“¤μ΄ μ›ν•λ” λ°©μ‹μΌλ΅ μ‚¬μ©ν•΄μ•Ό ν•λ” ν•¨μκ°€ ν•„μ”ν• μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•μ§€ μ•μ„ λ• μ μ©ν• ν•΄κ²°μ±…μ„ μ΄ μ„Ήμ…μ—μ„ μ μ‹ν•κ³  μμµλ‹λ‹¤. μ΄ ν•΄κ²°μ±…μ€ κ°„λ‹¨ν•λ©° μ΄λ° μ‹λ‚λ¦¬μ¤μ—μ„ λ€λ¶€λ¶„μ κ²½μ°μ— μ¶©λ¶„ν•©λ‹λ‹¤.\n\n# λ™μ  ν•¨μ μΈν„°νμ΄μ¤\n\nνƒ€μ… ννΈλ” Python 3.5μ—μ„ PEP 484μ μΌλ¶€λ΅ μ†κ°λμ—μµλ‹λ‹¤. κ·Έ μ΄ν›„λ΅ Python νƒ€μ… ννΈ μ‹μ¤ν…μ€ ν¬κ² κ°μ„ λμ—μΌλ©°, κ° μƒλ΅μ΄ Python λ²„μ „μ—μ„ νƒ€μ… ννΈμ— μ¤‘μ”ν• λ³€ν™”κ°€ λ„μ…λκ³  μμµλ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nν•μ§€λ§ λ§¨ μ²μλ¶€ν„° Pythonμ΄ λ™μ  ν”„λ΅κ·Έλλ° μ–Έμ–΄λ΅ κ°λ°λ κ²ƒμ„ μμ–΄μ„λ” μ• λ©λ‹λ‹¤.\n\nμ‚¬μ‹¤, Pythonμ λ™μ  νΉμ„±μ€ λ™μ  μΈν„°νμ΄μ¤μ™€ μ μ–΄μΈλ¦½λ‹λ‹¤. μ΄λ” ν•¨μκ°€ λ™μ μΌλ΅ μΈν„°νμ΄μ¤λ¥Ό λ§μ΅±μ‹ν‚¤λ©΄ ν•΄λ‹Ή μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ‹¤λ” κ²ƒμ„ μλ―Έν•©λ‹λ‹¤. μ΄λ¥Ό μ‘λ™ν•κ² ν•κΈ° μ„ν•΄ νƒ€μ… ννΈκ°€ ν•„μ”ν•μ§€ μ•μµλ‹λ‹¤:\n\n```python\ndef call_threefloats(x, y, func):\n    return func(x, y)\n\ndef add(x, y):\n    return x + y\n\ncall_threefloats(1.1, 1.4, add)\n```\n\nλ™μ μΌλ΅ μ΄ μ½”λ“λ” μ™„λ²½ν•κ² μ‘λ™ν•  κ²ƒμ…λ‹λ‹¤. μ™λƒν•λ©΄ add() ν•¨μκ°€ func μΈμμ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•κΈ° λ•λ¬Έμ…λ‹λ‹¤. κ·Έλ¬λ‚ μ•„λ μ½”λ“ λν• λ™μ μΌλ΅ μ‘λ™ν•  κ²ƒμ…λ‹λ‹¤:\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```python\ndef add_and_do_sth(x, y, *args, **kwargs):\n    # *args μ™€ **kwargsλ¥Ό μ‚¬μ©ν•μ—¬ μ‘μ—… μν–‰\n    return x + y\n\ncall_threefloats(1.1, 1.4, add_and_do_sth)\n```\n\nμ΄ λ™μ‘μ€ call_threefloats()κ°€ argsμ™€ kwargsλ¥Ό μ κ³µν•μ§€ μ•κ³  add_and_do_sth()λ¥Ό νΈμ¶ν•κΈ° λ•λ¬Έμ— μ‘λ™ν•©λ‹λ‹¤. κ·Έλμ„ add_and_do_sth()λ” λ™μ μΌλ΅ funcμ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ‹¤κ³  λ§ν•  μ μμµλ‹λ‹¤. λ‹¤λ§ argsμ™€ kwargsλ” μ κ³µλμ§€ μ•μ„ λ•μ—λ§ ν•΄λ‹Ήλ©λ‹λ‹¤. μ΄λ” μ΄μ „μ— λ¶€λ¶„ ν•¨μλ¥Ό λ‹¤λ£° λ• λ‹¤λ£¬ μƒν™©κ³Ό λ§¤μ° μ μ‚¬ν•©λ‹λ‹¤. κ·Έλ•μ™€ λ§μ°¬κ°€μ§€λ΅ argsμ™€ kwargsλ¥Ό κ³ μ •ν•μ§€λ§ κ·Έλ“¤μ κ°’μ„ μ κ³µν•μ§€λ” μ•μµλ‹λ‹¤. μ¦‰, κ·Έλ“¤μ„ μ•„λ¬΄ κ°’λ„ κ³ μ •ν•λ‹¤κ³  λ³Ό μ μμµλ‹λ‹¤.\n\nκ°„λ‹¨ν λ§ν•΄μ„, Pythonμ€ μ£Όμ„ μ—†μ΄λ„ ν•¨μ μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤. μ΄ κΈ€μ€ νμ΄μ¬μ λ™μ  μ„±κ²©μ— λ€ν• λ…Όμλ¥Ό λ©μ μΌλ΅ ν•μ§€λ” μ•μµλ‹λ‹¤. κ·Έλ¬λ‚ μ΄ μ£Όμ μ— κ΄€μ‹¬μ΄ μλ‹¤λ©΄ β€” λ¨λ“  Pythonistaκ°€ κ·Έλ ‡κΈ° λ•λ¬Έμ— β€” μλ¥Ό λ“¤μ–΄, μ„μ—μ„ μΈμ©ν• κΈ€μ„ μ°Έμ΅°ν•΄λ³΄μ„Έμ”.\n\n# κ²°λ΅ \n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nν•¨μ μΈν„°νμ΄μ¤λ” ν•¨μλ¥Ό μΌκΈ‰ μ‹λ―ΌμΌλ΅ λ‹¤λ£° λ• νΉν μ μ©ν•©λ‹λ‹¤. κ·Έλμ„ λ§¤κ°λ³€μλ΅ μ „λ‹¬ν•κ±°λ‚ ν•¨μμ™€ λ©”μ„λ“μ—μ„ λ°ν™λκ³ , μ‹¬μ§€μ–΄ μμ •λκ±°λ‚ μ‚­μ λ  μ μλ” λ‹¤λ¥Έ κ°μ²΄λ“¤μ²λΌ μ‚¬μ©λ©λ‹λ‹¤. κ·Έλ¬λ‚ ν•¨μ μΈν„°νμ΄μ¤λ” μ½”λ“ κ°λ°μμ™€ μ½”λ“ μ‚¬μ©μ λ¨λ‘μ—κ² λ„μ›€μ΄ λλ” λ” λ„“μ€ μ£Όμ λΌλ” κ²ƒμ„ μ΄ν•΄ν•μ…¨μ£ .\n\nμ°λ¦¬λ” ν•¨μ μΈν„°νμ΄μ¤λ¥Ό μƒμ„±ν•λ” λ‘ κ°€μ§€ λ°©λ²•μ„ λ‹¤λ£¨μ—μµλ‹λ‹¤:\n\n- νƒ€μ… ννΈ\n- νƒ€μ… ν”„λ΅ν† μ½\n\nμ΄λ“¤μ΄ μ–΄λ–»κ² μ‘λ™ν•λ”μ§€ λ³΄μ—¬μ£Όλ” κ²ƒ μ™Έμ—λ„, μ°λ¦¬λ” λ‹¤μ μ§λ¬Έμ— λ€ν• λ‹µλ³€μ„ μ›ν–μµλ‹λ‹¤: Pythonμ—μ„ ν•¨μ μΈν„°νμ΄μ¤λ¥Ό μ •μν•κΈ° μ„ν•΄ νƒ€μ… ννΈλ¥Ό μ‚¬μ©ν•΄μ•Ό ν• κΉμ”, μ•„λ‹λ©΄ νƒ€μ… ν”„λ΅ν† μ½μ„ μ‚¬μ©ν•΄μ•Ό ν• κΉμ”?\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nμ£„μ†΅ν•μ§€λ§ λ‹¨ ν•λ‚μ μ •λ‹µλ§ μ κ³µν•  μλ” μ—†μµλ‹λ‹¤. μ„ νƒν•  λ©”μ†λ“λ” λ‘ κ°€μ§€μ— λ‹¬λ ¤μμ–΄μ”: λ§λ“¤μ–΄μ•Ό ν•λ” μΈν„°νμ΄μ¤μ κ°„λ‹¨ν•¨κ³Ό λ‹Ήμ‹ μ μ„ νΈλ„μ— λ”°λΌ λ‹¬λΌμ Έμ”.\n\nκ°„λ‹¨ν• μ‹λ‚λ¦¬μ¤μ—μ„λ” νƒ€μ… ννΈλ¥Ό μ„ νΈν•΄μ”. νΉν, νƒ€μ… ννΈλ¥Ό νƒ€μ… λ³„μΉ­ μ•„λμ— μ μ§€ν•λ©΄ μ½”λ“κ°€ λ§¤μ° κ°€λ…μ„± μκ² λ  μ μμ–΄μ”, μ¤λ μ‚¬μ©ν• μμ μ²λΌμ”:\n\n```js\nfrom typing import Callable\n\nThreeFloatCallable = Callable[[float, float], float]\n```\n\nμ΄ μ½”λ“λ” λ…ν™•ν•΄μ”. ν•μ§€λ§ λ³µμ΅ν• μΈν„°νμ΄μ¤λ” κ°€λ…μ„±μ΄ λ–¨μ–΄μ§ μ μμ–΄μ”. Python λ¬Έμ„μ—μ„ κ°€μ Έμ¨ λ‹¤μ μμ λ¥Ό μ‚΄ν΄λ΄…μ‹λ‹¤:\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n![Function Interfaces in Python](/TIL/assets/img/2024-07-09-FunctionInterfacesinPython_1.png)\n\n'broadcast_message()' ν•¨μμ μ‹κ·Έλ‹μ²λ¥Ό λ§λ“¤μ–΄λ΄…μ‹λ‹¤. μ΄ μ‹κ·Έλ‹μ²λ” broadcast_message()λ€μ‹  μ‚¬μ©λ  ν•¨μλ“¤μ μΈν„°νμ΄μ¤ μ—­ν• μ„ ν•  μ μμµλ‹λ‹¤:\n\n```python\nfrom collections.abc import Sequence\nfrom typing import Callable\n\nConnectionOptions = dict[str, str]\nAddress = tuple[str, int]\nServer = tuple[Address, ConnectionOptions]\n\nBroadCastFunction = Callable[[str, Sequence[Server]], None]\n```\n\nλλ”, νƒ€μ… λ³„μΉ­μ„ μ‚¬μ©ν•μ§€ μ•λ” κ²½μ°:\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nBroadCastFunction = Callable[\n[str,\nSequence[tuple[tuple[str, int],\ndict[str, str]]]],\nNone]\n]\n\nLetβ€™s see what it would look like when using typing.Protocol:\n\nfrom typing import Protocol, Sequence\n\nConnectionOptions = dict[str, str]\nAddress = tuple[str, int]\nServer = tuple[Address, ConnectionOptions]\n\nclass BroadcastMessage(Protocol):\ndef **call**(\nself,\nmessage: str,\nservers: Sequence[Server]\n) -> None:\n...\n\nor\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\nfrom typing import Protocol, Sequence\n\nclass BroadcastMessage(Protocol):\n    def __call__(\n        self,\n        message: str,\n        servers: Sequence[\n                     tuple[tuple[str, int],\n                     dict[str, str]]\n                 ]\n    ) -> None:\n        ...\n```\n\nμ†”μ§ν λ§ν•μλ©΄, μ΄λ ‡κ² λ³µμ΅ν• μ ν•μ κ²½μ°μ—λ„ νƒ€μ… ννΈλ” λ€μ‘ν•λ” typing ν”„λ΅ν† μ½λ³΄λ‹¤λ” λ” κ°„λ‹¨ν• μΈν„°νμ΄μ¤λΌκ³  μƒκ°ν•΄μ”. κ·Έλ¬λ‚ μ–‘μ½ λ¨λ‘ νƒ€μ… λ³„μΉ­μ„ μ‚¬μ©ν•λ” κ²ƒμ΄ μ°¨μ΄λ¥Ό λ§λ“¤μ–΄ λƒ…λ‹λ‹¤.\n\nν•μ§€λ§ νƒ€μ… ννΈλ§μΌλ΅λ” μ¶©λ¶„ν•μ§€ μ•μ€ μƒν™©λ„ μμ„ μ μμ–΄μ”. κ·Έλ΄ κ²½μ° νƒ€μ΄ν•‘ ν”„λ΅ν† μ½μ„ μ‚¬μ©ν•  μλ°–μ— μ—†μ–΄μ”. μ΄λ ‡κ² λλ” κ°€μ¥ μΌλ°μ μΈ μ‹λ‚λ¦¬μ¤λ” νƒ€μ… ννΈμ— κ°€λ³€ μ„μΉ λ° ν‚¤μ›λ“ μΈμ (\\*args λ° \\*\\*kwargs)λ¥Ό ν¬ν•¨ν•΄μ•Ό ν•λ” κ²½μ°μ—μ”. μ΄λ• typing.Protocolμ„ μ‚¬μ©ν•΄μ•Ό ν•©λ‹λ‹¤. μ™λƒν•λ©΄ ν›„μλ” μ΄λ¬ν• μ„ νƒμ  μΈμλ¥Ό μ§μ ‘ μ§€μ •ν•  μ μ—†κΈ° λ•λ¬Έμ΄μ—μ”.\n\nμ΄κ²ƒμ€ λΉ„κµμ  μμ£Ό λ°μƒν•λ” μ‹λ‚λ¦¬μ¤μ΄μ§€λ§, νƒ€μ… ννΈλ¥Ό μ‚¬μ©ν•  μ μ—†κ±°λ‚ (λ…ν™•μ„±μ„ μ„ν•΄μ„λ“ μ§€) μ‚¬μ©ν•κ³  μ‹¶μ§€ μ•μ€ μƒν™©μ΄ λ” λ§μ„ μ μμ–΄μ”. μ΄λ¬ν• μƒν™©μ μμ‹λ” μ•„λμ™€ κ°™μ•„μ”:\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- μ…λ ¥ μ ν•μ— λ”°λΌ λ°ν™ μ ν• μ§€μ •\n- μΈν„°νμ΄μ¤μ— μ¶”κ°€ ν•¨μ μ†μ„± ν¬ν•¨\n- μ—¬λ¬ μΈν„°νμ΄μ¤λ¥Ό ν•λ‚μ ν•¨μ μΈν„°νμ΄μ¤ λ‚΄μ—μ„ κ²°ν•©\n- μ…λ ¥ μ ν•μ— λ”°λΌ ν•¨μμ λ°ν™ κ°’ μ ν• λ³€κ²½\n\nλν• μ°λ¦¬κ°€ λ…Όμν–λ λ€λ΅, μΈν„°νμ΄μ¤λ¥Ό μ„¤λ…ν•  λ• typing.Protocolμ„ μ‚¬μ©ν•λ©΄ λ…μ¤νΈλ§μ„ μ‚¬μ©ν•  μ μλ” ν° μ¥μ μ΄ μμµλ‹λ‹¤.\n\nμ΄ κΈ€μ„ μ“Έ λ•μ μ£Όμ” λ©ν‘λ” ν•¨μ μΈν„°νμ΄μ¤μ— λ€ν•΄ Pythonμ—μ„ μƒκ°ν•κ³  μμ‹μ μΌλ΅ μ‚¬μ©ν•  κ°€μΉκ°€ μλ‹¤λ” κ²ƒμ„ μ„¤λ“ν•λ” κ²ƒμ΄μ—μµλ‹λ‹¤. μ΄κ²ƒμ€ ν”„λ΅κ·Έλλ° μ¤‘μ—λΏλ§ μ•„λ‹λΌ λ¬Έμ λ¥Ό κ°λ…ν™”ν•λ” λ™μ•μ—λ„ λ§¤μ° μ μ©ν• λ„κµ¬μ…λ‹λ‹¤. ν•¨μλ¥Ό μ •μν•λ©΄μ„ μΈν„°νμ΄μ¤λ¥Ό μƒμ„±ν•κ² λλ”λ°, ν•¨μμ μ‹κ·Έλ‹μ²λ΅ μ‘μ©ν•λ” μ΄ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ” ν•¨μλ¥Ό λ§λ“­λ‹λ‹¤.\n\nPythonμ—μ„ ν•¨μ μΈν„°νμ΄μ¤λ” ν•¨μλ¥Ό μΌκΈ‰ μ‹λ―ΌμΌλ΅ λ‹¤λ£¨κΈ° μ‹μ‘ν•  λ• νΉν μ¤‘μ”ν•΄μ§‘λ‹λ‹¤. μΌλ°μ μΌλ΅ ν•¨μλ¥Ό μΈμλ΅ μ „λ‹¬ν•κ±°λ‚ λ‹¤λ¥Έ ν•¨μμ—μ„ λ°ν™ν•  λ• μ΄λ ‡κ² ν•©λ‹λ‹¤. λ°μ½”λ μ΄ν„° λ° λ‹¤λ¥Έ ν΄λ΅μ €λ¥Ό ν¬ν•¨ν• μκ°€ μμµλ‹λ‹¤. κ·Έλ° λ‹¤μ ν•¨μ μΈν„°νμ΄μ¤κ°€ μ¤‘μ”ν•΄μ§€λ”λ°, μ΄λ¥Ό ν†µν•΄ ν•¨μμ μ…λ ¥ λ° μ¶λ ¥ κ°’μ„ μ •ν™•ν μ •μν•  μ μμµλ‹λ‹¤. μ†”μ§ν λ§ν•΄μ„, μ΄λ¬ν• μΈν„°νμ΄μ¤λ” ν•¨μμ λ™μ‘μ„ μ •μν•μ§€ μ•κ³ , κ·Έλ ‡κ² ν•μ§€ μ•μ•„μ•Ό ν•©λ‹λ‹¤. κ·Έλ¬λ‚ μ΄λ¬ν• ν•¨μλ¥Ό νΈμ¶ν•λ” λ°©λ²• λ° λ°ν™ κ°’ μ²λ¦¬ λ°©λ²•μ„ λ…μ‹ν•λ―€λ΅ ν•¨μ μΈν„°νμ΄μ¤κ°€ μ •ν™•ν μ§€μ •ν•΄μ•Ό ν•λ” λ‚΄μ©μ…λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nMarkdown ν•μ‹μΌλ΅ ν…μ΄λΈ” νƒκ·Έλ¥Ό λ³€κ²½ν•©λ‹λ‹¤.\n\nThe typing.Callable syntax is much richer than weβ€™ve discussed today. Itβ€™s such a rich topic that weβ€™ll cover it some other day, in a dedicated article. This article aimed to explain the meaning of function interfaces and their basic use cases.\n\n# Footnotes\n\nΒΉ κΈ°μ μ μΌλ΅ λ¨λ“  ν΄λμ¤λ” νΈμ¶ κ°€λ¥ν• κ²ƒμ΄κΈ° λ•λ¬Έμ— ν΄λμ¤λ¥Ό νΈμ¶ν•μ—¬ μΈμ¤ν„΄μ¤λ¥Ό μƒμ„±ν•©λ‹λ‹¤. κ·Έλ¬λ‚ νμ΄μ¬ ν΄λμ¤κ°€ νΈμ¶ κ°€λ¥ν•λ‹¤κ³  λ§ν•  λ•λ” λ³΄ν†µ ν΄λμ¤κ°€ νΈμ¶ κ°€λ¥ν• μΈμ¤ν„΄μ¤λ¥Ό κ°€μ§€κ³  μλ‹¤λ” κ²ƒμ„ μλ―Έν•©λ‹λ‹¤. μ΄ μ°¨μ΄λ” λ€λ¶€λ¶„μ νμ΄μ¬ μ΄λ³΄μμ™€ λ§μ€ μ¤‘κΈ‰ μ‚¬μ©μμ—κ²λ” λ„λ¦¬ μΈμ‹λμ§€ μ•μµλ‹λ‹¤. λ³΄λ‹¤ κΉμ€ μ΄ν•΄λ¥Ό μ„ν•΄ μ΄ κΈ°μ‚¬λ¥Ό μ½μ–΄λ³΄μ‹κΈ° λ°”λλ‹λ‹¤.\n","ogImage":{"url":"/assets/img/2024-07-09-FunctionInterfacesinPython_0.png"},"coverImage":"/TIL/assets/img/2024-07-09-FunctionInterfacesinPython_0.png","tag":["Tech"],"readingTime":31},{"title":"Scikit-learn 2024 μ‹κ°ν™” κ°€μ΄λ“ λ¨λΈμ„ μ΄ν•΄ν•κΈ° μ‰½κ² λ§λ“λ” λ°©λ²•","description":"","date":"2024-07-09 20:32","slug":"2024-07-09-Scikit-learnVisualizationGuideMakingModelsSpeak","content":"\nμ•„λλ” μ κ°€ μ”μ²­ν•μ‹  ν…μ΄λΈ”μ„ Markdown ν•μ‹μΌλ΅ λ³€κ²½ν• κ²ƒμ…λ‹λ‹¤.\n\n| Header One  | Header Two  |\n| ----------- | ----------- |\n| Content One | Content Two |\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n![Scikit-learn Visualization Guide Making Models Speak](/TIL/assets/img/2024-07-09-Scikit-learnVisualizationGuideMakingModelsSpeak_1.png)\n\nμ΄ κ·Έλν”„λ¥Ό λ³΄λ©΄ λ™μΌν• λ°μ΄ν„° μ„ΈνΈμ—μ„ μ¤λ¥Έμ½ λ¨λΈμ΄ λ” μΌλ°ν™”ν•λ” λ° λ” μΆ‹λ‹¤λ” κ²ƒμ„ μ• μ μμµλ‹λ‹¤.\n\nλ€λ¶€λ¶„μ λ¨Έμ‹ λ¬λ‹ μ„μ μ€ μ‹κ°ν™”μ— λ€ν•΄ matplotlib μ½”λ“λ¥Ό μ‚¬μ©ν•κΈ°λ¥Ό μ„ νΈν•©λ‹λ‹¤. μ΄λ” λ‹¤μκ³Ό κ°™μ€ λ¬Έμ λ¥Ό μ•ΌκΈ°ν•©λ‹λ‹¤:\n\n- Matplotlibλ΅ κ·Έλ¦¬κΈ°μ— λ€ν•΄ λ§μ€ λ‚΄μ©μ„ λ°°μ›μ•Ό ν•©λ‹λ‹¤.\n- ν”λ΅ν… μ½”λ“κ°€ λ…ΈνΈλ¶μ„ κ°€λ“ μ±„μ°λ―€λ΅ μ½κΈ° μ–΄λ ¤μ›μ§‘λ‹λ‹¤.\n- λ•λ΅λ” λΉ„μ¦λ‹μ¤ ν™κ²½μ—μ„ μ΄μƒμ μ΄μ§€ μ•μ€ νƒ€μ‚¬ λΌμ΄λΈλ¬λ¦¬κ°€ ν•„μ”ν•  μ μμµλ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nμΆ‹μ€ μ†μ‹μ΄μ—μ”! Scikit-learnμ€ μ΄μ  Display ν΄λμ¤λ¥Ό μ κ³µν•λ©° from_estimator λ° from_predictionsκ³Ό κ°™μ€ λ©”μ†λ“λ¥Ό μ‚¬μ©ν•μ—¬ λ‹¤μ–‘ν• μƒν™©μ—μ„ κ·Έλν”„λ¥Ό κ·Έλ¦¬κΈ°κ°€ ν›¨μ”¬ μ‰¬μ›μ΅μ–΄μ”.\n\nκ¶κΈν•μ‹ κ°€μ”? μ΄ λ©‹μ§„ APIλ¥Ό λ³΄μ—¬λ“λ¦΄κ²μ”.\n\n# Scikit-learn Display API μ†κ°\n\n## μ‚¬μ© κ°€λ¥ν• APIλ¥Ό μ°ΎμΌλ ¤λ©΄ utils.discovery.all_displaysλ¥Ό μ‚¬μ©ν•μ„Έμ”\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nScikit-learn (sklearn)μ€ ν•­μƒ μƒ λ¦΄λ¦¬μ¤μ—μ„ Display APIλ¥Ό μ¶”κ°€ν•κΈ° λ•λ¬Έμ— λ‹Ήμ‹ μ λ²„μ „μ—μ„ λ¬΄μ—‡μ„ μ‚¬μ©ν•  μ μλ”μ§€ μ•μ•„λ‘λ” κ²ƒμ΄ μ¤‘μ”ν•©λ‹λ‹¤.\n\nSklearnμ utils.discovery.all_displaysλ¥Ό μ‚¬μ©ν•λ©΄ μ‚¬μ©ν•  μ μλ” ν΄λμ¤λ“¤μ„ λ³Ό μ μμµλ‹λ‹¤.\n\n```python\nfrom sklearn.utils.discovery import all_displays\n\ndisplays = all_displays()\ndisplays\n```\n\nμλ¥Ό λ“¤μ–΄, λ‚΄ Scikit-learn 1.4.0μ—μ„ μ΄λ¬ν• ν΄λμ¤λ“¤μ„ μ‚¬μ©ν•  μ μμµλ‹λ‹¤:\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\n[\n  (\"CalibrationDisplay\", sklearn.calibration.CalibrationDisplay),\n  (\"ConfusionMatrixDisplay\", sklearn.metrics._plot.confusion_matrix.ConfusionMatrixDisplay),\n  (\"DecisionBoundaryDisplay\", sklearn.inspection._plot.decision_boundary.DecisionBoundaryDisplay),\n  (\"DetCurveDisplay\", sklearn.metrics._plot.det_curve.DetCurveDisplay),\n  (\"LearningCurveDisplay\", sklearn.model_selection._plot.LearningCurveDisplay),\n  (\"PartialDependenceDisplay\", sklearn.inspection._plot.partial_dependence.PartialDependenceDisplay),\n  (\"PrecisionRecallDisplay\", sklearn.metrics._plot.precision_recall_curve.PrecisionRecallDisplay),\n  (\"PredictionErrorDisplay\", sklearn.metrics._plot.regression.PredictionErrorDisplay),\n  (\"RocCurveDisplay\", sklearn.metrics._plot.roc_curve.RocCurveDisplay),\n  (\"ValidationCurveDisplay\", sklearn.model_selection._plot.ValidationCurveDisplay),\n];\n```\n\n## decision_boundariesλ¥Ό μ„ν•΄ inspection.DecisionBoundaryDisplay μ‚¬μ©ν•κΈ°\n\ndecision boundariesλ΅ μ‹μ‘ν•΄λ³΄μ£ .\n\nmatplotlibλ¥Ό μ‚¬μ©ν•μ—¬ draw ν•λ” κ²½μ°, λ²κ±°λ΅­μµλ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- np.linspaceμ„ μ‚¬μ©ν•μ—¬ μΆν‘ λ²”μ„ μ„¤μ •;\n- plt.meshgridλ¥Ό μ‚¬μ©ν•μ—¬ κ·Έλ¦¬λ“ κ³„μ‚°;\n- plt.contourfλ¥Ό μ‚¬μ©ν•μ—¬ κ²°μ • κ²½κ³„λ¥Ό μ±„μ°κΈ°;\n- κ·Έλ° λ‹¤μ plt.scatterλ¥Ό μ‚¬μ©ν•μ—¬ λ°μ΄ν„° ν¬μΈνΈλ¥Ό ν”λ΅ν…ν•©λ‹λ‹¤.\n\nμ΄μ  inspection.DecisionBoundaryDisplayλ¥Ό μ‚¬μ©ν•μ—¬μ΄ ν”„λ΅μ„Έμ¤λ¥Ό κ°„μ†ν™” ν•  μ μμµλ‹λ‹¤:\n\n```js\nfrom sklearn.inspection import DecisionBoundaryDisplay\nfrom sklearn.datasets import load_iris\nfrom sklearn.svm import SVC\nfrom sklearn.pipeline import make_pipeline\nfrom sklearn.preprocessing import StandardScaler\nimport matplotlib.pyplot as plt\n\niris = load_iris(as_frame=True)\nX = iris.data[['petal length (cm)', 'petal width (cm)']]\ny = iris.target\n\n\nsvc_clf = make_pipeline(StandardScaler(),\n                        SVC(kernel='linear', C=1))\nsvc_clf.fit(X, y)\n\ndisplay = DecisionBoundaryDisplay.from_estimator(svc_clf, X,\n                                                 grid_resolution=1000,\n                                                 xlabel=\"Petal length (cm)\",\n                                                 ylabel=\"Petal width (cm)\")\nplt.scatter(X.iloc[:, 0], X.iloc[:, 1], c=y, edgecolors='w')\nplt.title(\"Decision Boundary\")\nplt.show()\n```\n\nμ΄ κ·Έλ¦Όμ—μ„ μµμΆ… ν¨κ³Όλ¥Ό ν™•μΈν•μ‹­μ‹μ¤:\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n<img src=\"/TIL/assets/img/2024-07-09-Scikit-learnVisualizationGuideMakingModelsSpeak_2.png\" />\n\nκΈ°μ–µν•΄ μ£Όμ„Έμ”. Display κΈ°λ¥μ€ 2Dλ§ κ·Έλ¦΄ μ μμΌλ―€λ΅ λ°μ΄ν„°κ°€ λ‘ κ°μ νΉμ„± λλ” μ¶•μ†λ μ°¨μ›λ§ κ°€μ§€κ³  μλ”μ§€ ν™•μΈν•μ„Έμ”.\n\n## ν™•λ¥  λ³΄μ •μ„ μ„ν•΄ calibration.CalibrationDisplay μ‚¬μ©\n\nλ¶„λ¥ λ¨λΈμ„ λΉ„κµν•κΈ° μ„ν•΄ ν™•λ¥  λ³΄μ • κ³΅μ„ μ€ λ¨λΈμ΄ μμΈ΅μ— μμ‹ κ°μ„ κ°€μ§€κ³  μλ”μ§€λ¥Ό λ³΄μ—¬μ¤λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nCalibrationDisplayλ” λ¨λΈμ predict_probaλ¥Ό μ‚¬μ©ν•©λ‹λ‹¤. Support Vector Machineμ„ μ‚¬μ©ν•λ” κ²½μ° ν™•λ¥ μ„ Trueλ΅ μ„¤μ •ν•΄μ£Όμ„Έμ”:\n\n```js\nfrom sklearn.calibration import CalibrationDisplay\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.datasets import make_classification\nfrom sklearn.ensemble import HistGradientBoostingClassifier\n\nX, y = make_classification(n_samples=1000,\n                           n_classes=2, n_features=5,\n                           random_state=42)\nX_train, X_test, y_train, y_test = train_test_split(X, y,\n                                            test_size=0.3, random_state=42)\nproba_clf = make_pipeline(StandardScaler(),\n                          SVC(kernel=\"rbf\", gamma=\"auto\",\n                              C=10, probability=True))\nproba_clf.fit(X_train, y_train)\n\nCalibrationDisplay.from_estimator(proba_clf,\n                                            X_test, y_test)\n\nhist_clf = HistGradientBoostingClassifier()\nhist_clf.fit(X_train, y_train)\n\nax = plt.gca()\nCalibrationDisplay.from_estimator(hist_clf,\n                                  X_test, y_test,\n                                  ax=ax)\nplt.show()\n```\n\n<img src=\"/TIL/assets/img/2024-07-09-Scikit-learnVisualizationGuideMakingModelsSpeak_3.png\" />\n\n## νΌλ™ ν–‰λ ¬μ— λ€ν• metrics.ConfusionMatrixDisplay μ‚¬μ©ν•κΈ°\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nλ¶„λ¥ λ¨λΈμ„ ν‰κ°€ν•κ³  λ¶κ· ν• λ°μ΄ν„°λ¥Ό λ‹¤λ£° λ•, μ°λ¦¬λ” μ •λ°€λ„μ™€ μ¬ν„μ¨μ„ μ‚΄ν΄λ΄…λ‹λ‹¤.\n\nμ΄λ“¤μ€ TP, FP, TN, FNμΌλ΅ λ‚λ‰λ©°, νΌλ™ ν–‰λ ¬μ„ κµ¬μ„±ν•©λ‹λ‹¤.\n\nνΌλ™ ν–‰λ ¬μ„ κ·Έλ¦¬λ ¤λ©΄ metrics.ConfusionMatrixDisplayλ¥Ό μ‚¬μ©ν•μ„Έμ”. μ΄λ ‡κ² κ·Έλ¦Όμ„ κ·Έλ¦΄ μ μκ³ μ”, μ΄λ―Έ μ μ•λ ¤μ Έ μμ–΄μ„ μμ„Έν•κ² μ„¤λ…μ€ μƒλµν• κ²μ”.\n\n```js\nfrom sklearn.datasets import fetch_openml\nfrom sklearn.ensemble import RandomForestClassifier\nfrom sklearn.metrics import ConfusionMatrixDisplay\n\ndigits = fetch_openml('mnist_784', version=1)\nX, y = digits.data, digits.target\nrf_clf = RandomForestClassifier(max_depth=5, random_state=42)\nrf_clf.fit(X, y)\n\nConfusionMatrixDisplay.from_estimator(rf_clf, X, y)\nplt.show()\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nμ•„λλ” μ΄λ―Έμ§€ λ§ν¬μ…λ‹λ‹¤:\n\n![Scikit-learn Visualization Guide](/TIL/assets/img/2024-07-09-Scikit-learnVisualizationGuideMakingModelsSpeak_4.png)\n\n## metrics.RocCurveDisplay λ° metrics.DetCurveDisplay\n\nμ΄ λ‘ κ°€μ§€κ°€ ν•¨κ» μ†κ°λλ” μ΄μ λ” μΆ…μΆ… μΈ΅μ •ν•  λ• ν•¨κ» μ‚¬μ©ν•κΈ° λ•λ¬Έμ…λ‹λ‹¤.\n\nRocCurveDisplayλ” λ¨λΈμ TPR λ° FPRμ„ λΉ„κµν•©λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nμ΄μ§„ λ¶„λ¥μ κ²½μ°, λ‚®μ€ FPRκ³Ό λ†’μ€ TPRμ„ μ›ν•κΈ° λ•λ¬Έμ— μΆμƒλ‹¨μ΄ κ°€μ¥ μΆ‹μµλ‹λ‹¤. Roc κ³΅μ„ μ€ μ΄ μ½μΌλ΅ νμ–΄μ§‘λ‹λ‹¤.\n\nRoc κ³΅μ„ μ΄ μΆμƒλ‹¨μ— κ·Όμ ‘ν•μ—¬ μ μ§€λκΈ° λ•λ¬Έμ— μ°ν•λ‹¨μ΄ λΉ„μ–΄ μλ”λ°, μ΄λ” λ¨λΈ κ°„ μ°¨μ΄λ¥Ό νμ•…ν•κΈ° μ–΄λ µκ² λ§λ“­λ‹λ‹¤.\n\nκ·Έλμ„ μ°λ¦¬λ” λν• FNRκ³Ό FPRλ΅ Det κ³΅μ„ μ„ κ·Έλ¦¬λ” DetCurveDisplayλ¥Ό μ‚¬μ©ν•©λ‹λ‹¤. μ΄λ” Roc κ³΅μ„ λ³΄λ‹¤ λ…ν™•ν•κ² λ§λ“¤μ–΄μ£Όλ” λ° λ” λ§μ€ κ³µκ°„μ„ μ‚¬μ©ν•©λ‹λ‹¤.\n\nDet κ³΅μ„ μ μ™„λ²½ν• μ§€μ μ€ μΆν•λ‹¨μ…λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\nfrom sklearn.metrics import RocCurveDisplay\nfrom sklearn.metrics import DetCurveDisplay\n\nX, y = make_classification(n_samples=10_000, n_features=5,\n                           n_classes=2, n_informative=2)\nX_train, X_test, y_train, y_test = train_test_split(X, y,\n                                             test_size=0.3, random_state=42,\n                                                   stratify=y)\n\n\nclassifiers = {\n    \"SVC\": make_pipeline(StandardScaler(),\n                        SVC(kernel=\"linear\", C=0.1, random_state=42)),\n    \"Random Forest\": RandomForestClassifier(max_depth=5, random_state=42)\n}\n\nfig, [ax_roc, ax_det] = plt.subplots(1, 2, figsize=(10, 4))\nfor name, clf in classifiers.items():\n    clf.fit(X_train, y_train)\n\n    RocCurveDisplay.from_estimator(clf, X_test, y_test, ax=ax_roc, name=name)\n    DetCurveDisplay.from_estimator(clf, X_test, y_test, ax=ax_det, name=name)\n```\n\n<img src=\"/TIL/assets/img/2024-07-09-Scikit-learnVisualizationGuideMakingModelsSpeak_5.png\" />\n\n## Using metrics.PrecisionRecallDisplay to adjust thresholds\n\nWith imbalanced data, you might want to shift recall and precision.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- μ΄λ©”μΌ μ‚¬κΈ°λ¥Ό λ°©μ§€ν•λ ¤λ©΄ κ³ μ •λ„κ°€ ν•„μ”ν•©λ‹λ‹¤.\n- μ§λ³‘ μ„ λ³„μ„ μ„ν•΄μ„λ” λ” λ§μ€ μ‚¬λ΅€λ¥Ό ν¬μ°©ν•κΈ° μ„ν•΄ κ³ νμκ°€ ν•„μ”ν•©λ‹λ‹¤.\n\nμ„κ³„κ°’μ„ μ΅°μ •ν•  μ μμ§€λ§, μ μ ν• μ–‘μ΄ λ¬΄μ—‡μΈμ§€ κ¶κΈν•μ‹ κ°€μ”?\n\nμ—¬κΈ°μ„ metrics.PrecisionRecallDisplayκ°€ λ„μ›€μ΄ λ  μ μμµλ‹λ‹¤.\n\n```js\nfrom xgboost import XGBClassifier\nfrom sklearn.datasets import load_wine\nfrom sklearn.metrics import PrecisionRecallDisplay\n\nwine = load_wine()\nX, y = wine.data[wine.target<=1], wine.target[wine.target<=1]\nX_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.3, stratify=y, random_state=42)\n\nxgb_clf = XGBClassifier()\nxgb_clf.fit(X_train, y_train)\n\nPrecisionRecallDisplay.from_estimator(xgb_clf, X_test, y_test)\nplt.show()\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n<img src=\"/TIL/assets/img/2024-07-09-Scikit-learnVisualizationGuideMakingModelsSpeak_6.png\" />\n\nScikit-learnμ λ””μμΈμ„ λ”°λ¥΄λ” λ¨λΈμ€ μ—¬κΈ°μ²λΌ κ·Έλ¦΄ μ μμµλ‹λ‹¤. νΈλ¦¬ν•μ£ ?\n\n## νκ·€ λ¨λΈμ— metrics.PredictionErrorDisplay μ‚¬μ©ν•κΈ°\n\nμ°λ¦¬λ” λ¶„λ¥μ— λ€ν•΄ μ΄μ•ΌκΈ°ν–μ—λ”λ°, μ΄μ  νκ·€μ— λ€ν•΄ μ΄μ•ΌκΈ°ν•΄λ³Όκ²μ”.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nμ‚¬μ΄ν‚·λ°μ metrics.PredictionErrorDisplayλ” νκ·€ λ¨λΈμ„ ν‰κ°€ν•λ” λ° λ„μ›€μ΄ λ©λ‹λ‹¤.\n\n```python\nfrom sklearn.svm import SVR\nfrom sklearn.metrics import PredictionErrorDisplay\n\nrng = np.random.default_rng(42)\nX = rng.random(size=(200, 2)) * 10\ny = X[:, 0]**2 + 5 * X[:, 1] + 10 + rng.normal(loc=0.0, scale=0.1, size=(200,))\n\nreg = make_pipeline(StandardScaler(), SVR(kernel='linear', C=10))\nreg.fit(X, y)\n\nfig, axes = plt.subplots(1, 2, figsize=(8, 4))\nPredictionErrorDisplay.from_estimator(reg, X, y, ax=axes[0], kind=\"actual_vs_predicted\")\nPredictionErrorDisplay.from_estimator(reg, X, y, ax=axes[1], kind=\"residual_vs_predicted\")\nplt.show()\n```\n\n![Image](/TIL/assets/img/2024-07-09-Scikit-learnVisualizationGuideMakingModelsSpeak_7.png)\n\nκ·Έλ¦Όμ—μ„μ™€ κ°™μ΄ λ‘ μΆ…λ¥μ κ·Έλν”„λ¥Ό κ·Έλ¦΄ μ μμµλ‹λ‹¤. μ™Όμ½ κ·Έλν”„λ” μμΈ΅ λ€ μ‹¤μ  κ°’ λΉ„κµλ¥Ό λ³΄μ—¬μ£Όλ©°, μ„ ν• νκ·€ λ¶„μ„μ— μ ν•©ν•©λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nν•μ§€λ§ λ¨λ“  λ°μ΄ν„°κ°€ μ™„λ²½ν•κ² μ„ ν•μ μ΄μ§€λ” μ•μµλ‹λ‹¤. κ·Έλ΄ λ•λ” μ μ ν• κ·Έλν”„λ¥Ό μ‚¬μ©ν•μ„Έμ”.\n\nμ‹¤μ  λ€ μμΈ΅ μ°¨μ΄μΈ μ”μ°¨ λ„ν‘λ¥Ό κ·Έλ ¤λ³΄μ„Έμ”.\n\nμ΄ λ„ν‘μ λ°”λ‚λ‚ λ¨μ–‘μ€ λ°μ΄ν„°κ°€ μ„ ν• νκ·€μ— λ§μ§€ μ•μ„ μ μλ‹¤λ” κ²ƒμ„ μ‹μ‚¬ν•©λ‹λ‹¤.\n\nμ„ ν•μ—μ„ rbf μ»¤λ„λ΅ μ „ν™ν•λ” κ²ƒμ΄ λ„μ›€μ΄ λ  μ μμµλ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\nreg = make_pipeline(StandardScaler(), SVR((kernel = \"rbf\"), (C = 10)));\n```\n\n![Image](/TIL/assets/img/2024-07-09-Scikit-learnVisualizationGuideMakingModelsSpeak_8.png)\n\nμ΄λ ‡κ² rbfλ¥Ό μ‚¬μ©ν•λ©΄ μ”μ°¨ ν”λ΅―μ΄ λ” λ‚μ•„ λ³΄μ—¬μ”.\n\n## ν•™μµ κ³΅μ„ μ— model_selection.LearningCurveDisplay μ‚¬μ©ν•κΈ°\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nμ„±λ¥μ„ ν‰κ°€ν• ν›„ LearningCurveDisplayλ¥Ό μ‚¬μ©ν•μ—¬ μµμ ν™”λ¥Ό μ‚΄ν΄λ΄…μ‹λ‹¤.\n\nμ²« λ²μ§Έλ΅, ν•™μµ κ³΅μ„ μ„ ν™•μΈν•΄λ΄…μ‹λ‹¤. μ΄ λ¨λΈμ΄ λ‹¤μ–‘ν• ν•™μµ λ° ν…μ¤νΈ λ°μ΄ν„°λ΅ μ–Όλ§λ‚ μΌλ°ν™”λλ©°, κ³Όμ ν•© λλ” νΈν–¥ λ¬Έμ κ°€ μλ”μ§€ μ‚΄ν΄λ΄…λ‹λ‹¤.\n\nμ•„λμ—μ„λ” DecisionTreeClassifierμ™€ GradientBoostingClassifierλ¥Ό λΉ„κµν•μ—¬ ν•™μµ λ°μ΄ν„°κ°€ λ³€ν•  λ• μ–΄λ–»κ² μ‘λ™ν•λ”μ§€ μ‚΄ν΄λ΄…λ‹λ‹¤.\n\n```python\nfrom sklearn.tree import DecisionTreeClassifier\nfrom sklearn.ensemble import GradientBoostingClassifier\nfrom sklearn.model_selection import LearningCurveDisplay\n\nX, y = make_classification(n_samples=1000, n_classes=2, n_features=10,\n                           n_informative=2, n_redundant=0, n_repeated=0)\n\ntree_clf = DecisionTreeClassifier(max_depth=3, random_state=42)\ngb_clf = GradientBoostingClassifier(n_estimators=50, max_depth=3, tol=1e-3)\n\ntrain_sizes = np.linspace(0.4, 1.0, 10)\nfig, axes = plt.subplots(1, 2, figsize=(10, 4))\nLearningCurveDisplay.from_estimator(tree_clf, X, y,\n                                    train_sizes=train_sizes,\n                                    ax=axes[0],\n                                    scoring='accuracy')\naxes[0].set_title('DecisionTreeClassifier')\nLearningCurveDisplay.from_estimator(gb_clf, X, y,\n                                    train_sizes=train_sizes,\n                                    ax=axes[1],\n                                    scoring='accuracy')\naxes[1].set_title('GradientBoostingClassifier')\nplt.show()\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n<img src=\"/TIL/assets/img/2024-07-09-Scikit-learnVisualizationGuideMakingModelsSpeak_9.png\" />\n\nν•΄λ‹Ή κ·Έλν”„λ” νΈλ¦¬ κΈ°λ° GradientBoostingClassifierκ°€ ν›λ ¨ λ°μ΄ν„°μ—μ„ λ†’μ€ μ •ν™•λ„λ¥Ό μ μ§€ν•λ”λΌλ„, ν…μ¤νΈ λ°μ΄ν„°μ—μ„λ” DecisionTreeClassifierμ™€ λΉ„κµν•μ—¬ μƒλ‹Ήν• μ¥μ μ΄ μ—†λ‹¤λ” κ²ƒμ„ λ³΄μ—¬μ¤λ‹λ‹¤.\n\n## λ§¤κ°λ³€μ νλ‹ μ‹ μ‹κ°ν™”λ¥Ό μ„ν•΄ model_selection.ValidationCurveDisplay μ‚¬μ©\n\nκ·Έλ¬λ―€λ΅, λ‹¤λ¥Έ λ¶€λ¶„μ— λ€ν•΄ μΌλ°ν™”λμ§€ μ•λ” λ¨λΈμ κ²½μ°, λ¨λΈμ μ •κ·ν™” λ§¤κ°λ³€μλ¥Ό μ΅°μ •ν•μ—¬ μ„±λ¥μ„ λ―Έμ„Έ μ΅°μ •ν•΄ λ³Ό μ μμµλ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nμ „ν†µμ μΈ λ°©λ²•μ€ GridSearchCV λλ” Optunaμ™€ κ°™μ€ λ„κµ¬λ¥Ό μ‚¬μ©ν•μ—¬ λ¨λΈμ„ μ΅°μ •ν•λ” κ²ƒμ΄μ—μ§€λ§, μ΄λ¬ν• λ°©λ²•μ€ μ „λ°μ μΌλ΅ μ„±λ¥μ΄ κ°€μ¥ μΆ‹μ€ λ¨λΈλ§ μ κ³µν•λ©° μ΅°μ • κ³Όμ •μ΄ κ·Έλ‹¤μ§€ μ§κ΄€μ μ΄μ§€ μ•μµλ‹λ‹¤.\n\nνΉμ • λ§¤κ°λ³€μλ¥Ό μ΅°μ •ν•μ—¬ λ¨λΈμ μν–¥μ„ ν…μ¤νΈν•κ³  μ‹¶μ€ μ‹λ‚λ¦¬μ¤μ κ²½μ°, model_selection.ValidationCurveDisplayλ¥Ό μ‚¬μ©ν•μ—¬ λ§¤κ°λ³€μκ°€ λ³€κ²½λ¨μ— λ”°λΌ λ¨λΈμ΄ μ–΄λ–»κ² μν–‰λλ”μ§€ μ‹κ°ν™”ν•λ” κ²ƒμ„ κ¶μ¥ν•©λ‹λ‹¤.\n\n```js\nfrom sklearn.model_selection import ValidationCurveDisplay\nfrom sklearn.linear_model import LogisticRegression\n\nparam_name, param_range = \"C\", np.logspace(-8, 3, 10)\nlr_clf = LogisticRegression()\n\nValidationCurveDisplay.from_estimator(lr_clf, X, y,\n                                      param_name=param_name,\n                                      param_range=param_range,\n                                      scoring='f1_weighted',\n                                      cv=5, n_jobs=-1)\nplt.show()\n```\n\n<img src=\"/TIL/assets/img/2024-07-09-Scikit-learnVisualizationGuideMakingModelsSpeak_10.png\" />\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n# μ•„μ‰¬μ΄ μ \n\nμ΄λ¬ν• ν‘μ‹λ¬Όμ„ λ¨λ‘ μ‹λ„ν•΄λ³Έ ν›„ λ‡ κ°€μ§€ μ•„μ‰¬μ΄ μ μ„ μΈμ •ν•΄μ•Ό ν•©λ‹λ‹¤:\n\n- κ°€μ¥ ν° μ•„μ‰¬μ›€μ€ μ΄λ¬ν• APIμ λ€λ¶€λ¶„μ΄ μμ„Έν• νν† λ¦¬μ–Όμ„ μ κ³µν•μ§€ μ•λ”λ‹¤λ” κ²ƒμ…λ‹λ‹¤. μ΄κ²ƒμ΄ Scikit-learnμ μ² μ €ν• λ¬Έμ„μ™€ λΉ„κµλμ–΄ μ μ•λ ¤μ§€μ§€ μ•μ€ μ΄μ μΌ κ²ƒμ…λ‹λ‹¤.\n- μ΄λ¬ν• APIλ” λ‹¤μ–‘ν• ν¨ν‚¤μ§€μ— ν©μ–΄μ Έ μμ–΄ ν• κ³³μ—μ„ μ°Έμ΅°ν•κΈ° μ–΄λ µμµλ‹λ‹¤.\n- μ½”λ“λ” μ—¬μ „ν λ§¤μ° κΈ°λ³Έμ μ…λ‹λ‹¤. μΆ…μΆ… Matplotlibμ APIμ™€ ν•¨κ» μ‚¬μ©ν•μ—¬ μ‘μ—…μ„ μ™„λ£ν•΄μ•Ό ν•©λ‹λ‹¤. μ „ν•μ μΈ μλ” DecisionBoundaryDisplayμΈλ°, κ²°μ • κ²½κ³„λ¥Ό ν”λ΅ν…ν• ν›„μ—λ„ λ°μ΄ν„° λ¶„ν¬λ¥Ό ν”λ΅ν…ν•κΈ° μ„ν•΄ Matplotlibμ΄ ν•„μ”ν•©λ‹λ‹¤.\n- ν™•μ¥ν•κΈ° μ–΄λ µμµλ‹λ‹¤. λ‡ κ°€μ§€ λ§¤κ°λ³€μλ¥Ό ν™•μΈν•λ” λ©”μ„λ“ μ™Έμ— λ„κµ¬λ‚ λ°©λ²•μΌλ΅ λ‚΄ λ¨λΈ μ‹κ°ν™” κ³Όμ •μ„ κ°„λ‹¨ν•κ² ν•λ” κ²ƒμ€ νλ“­λ‹λ‹¤. λ§μ€ λ¶€λ¶„μ„ λ‹¤μ‹ μ‘μ„±ν•΄μ•Ό ν•©λ‹λ‹¤.\n\nμ΄λ¬ν• APIλ“¤μ΄ λ” λ§μ€ κ΄€μ‹¬μ„ λ°›κ³ , λ²„μ „μ΄ μ—…κ·Έλ μ΄λ“λλ” κ³Όμ •μ—μ„ μ‹κ°ν™” APIλ¥Ό μ‚¬μ©ν•κΈ°κ°€ λ”μ± μ‰¬μ›μ§€κΈ°λ¥Ό ν¬λ§ν•©λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n# κ²°λ΅ \n\nλ¨Έμ‹  λ¬λ‹ μ—¬μ •μ—μ„ λ¨λΈμ„ μ‹κ°ν™”λ΅ μ„¤λ…ν•λ” κ²ƒμ€ κ·Έλ“¤μ„ ν›λ ¨μ‹ν‚¤λ” κ²ƒλ§νΌ μ¤‘μ”ν•©λ‹λ‹¤.\n\nλ³Έλ¬Έμ—μ„λ” ν„μ¬ λ²„μ „μ scikit-learnμ—μ„ λ‹¤μ–‘ν• ν”λ΅ν… APIλ¥Ό μ†κ°ν–μµλ‹λ‹¤.\n\nμ΄λ¬ν• APIλ¥Ό μ‚¬μ©ν•λ©΄ Matplotlib μ½”λ“λ¥Ό κ°„μ†ν™”ν•κ³  ν•™μµ κ³΅μ„ μ„ μ™„ν™”μ‹ν‚¤λ©° λ¨λΈ ν‰κ°€ ν”„λ΅μ„Έμ¤λ¥Ό κ°„μ†ν™”ν•  μ μμµλ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nAPIμ— λ€ν•΄ μƒμ„Έν λ‹¤λ£¨μ§€ μ•μ•„μ„ μ£„μ†΅ν•©λ‹λ‹¤. μμ„Έν• λ‚΄μ©μ„ μ›ν•μ‹λ©΄ κ΄€λ ¨ κ³µμ‹ λ¬Έμ„λ¥Ό ν™•μΈν•΄λ³΄μ„Έμ”.\n\nμ΄μ  λ‹Ήμ‹  μ°¨λ΅€μ…λ‹λ‹¤. κΈ°κ³„ ν•™μµ λ°©λ²•μ„ μ‹κ°ν™”ν•λ” λ° κΈ°λ€ν•λ” μ μ΄ λ¬΄μ—‡μΈκ°€μ”? μκ²¬μ„ μμ λ΅­κ² λ‚¨κ²¨ μ£Όμ„Έμ”.\n\nμ΄ κΈ€μ„ μ¦κ²Όλ‹¤λ©΄, λ” λ§μ€ μ²¨λ‹¨ λ°μ΄ν„° κ³Όν•™ νμ„ λ°›κ³  μ‹¶λ‹¤λ©΄ μ§€κΈ κµ¬λ…ν•μ„Έμ”! ν”Όλ“λ°±κ³Ό μ§λ¬Έμ€ μ–Έμ λ‚ ν™μν•©λ‹λ‹¤. μ•„λ λ“κΈ€μ—μ„ ν† λ΅ ν•΄μ”!\n\nμ΄ κΈ°μ‚¬λ” μ›λ¬Έμ΄ Data Leads Futureμ— κ²μ¬λμ—μµλ‹λ‹¤.\n","ogImage":{"url":"/assets/img/2024-07-09-Scikit-learnVisualizationGuideMakingModelsSpeak_0.png"},"coverImage":"/TIL/assets/img/2024-07-09-Scikit-learnVisualizationGuideMakingModelsSpeak_0.png","tag":["Tech"],"readingTime":19},{"title":"GraphQL APIμ—μ„ μΈμ¦ λ° κ¶ν• κ΄€λ¦¬ν•λ” λ°©λ²•","description":"","date":"2024-07-09 20:30","slug":"2024-07-09-HowtohandleauthenticationandauthorizationinGraphQLAPI","content":"\nμ•„λλ” μ‘μ„±ν• ν‘μ λ‚΄μ©μ΄μ—μ”.\n\n| μ λ©                             | λ§ν¬                                                                                           |\n| -------------------------------- | ---------------------------------------------------------------------------------------------- |\n| Authentication and authorization | [μ—¬κΈ°](/TIL/assets/img/2024-07-09-HowtohandleauthenticationandauthorizationinGraphQLAPI_0.png) |\n\nμΈμ¦(Authentication)κ³Ό κ¶ν• λ¶€μ—¬(authorization)λ” μΆ…μΆ… νΌλ™λμ§€λ§, μ΄λ¬ν• κ°λ…λ“¤μ€ μ„λ΅ λ‹¤λ¥Έ ν”„λ΅μ„Έμ¤λ¥Ό λ‹΄λ‹Ήν•κ³  μμ–΄μ”. 'μΈμ¦'μ€ μ‚¬μ©μ μ‹λ³„μ„ κ²°μ •ν•λ©°(μ‚¬μ©μκ°€ μ‹μ¤ν…μ— λ΅κ·ΈμΈλμ–΄ μλ”μ§€ μ—¬λ¶€), 'κ¶ν• λ¶€μ—¬'λ” μΈμ¦λ μ‚¬μ©μκ°€ νΉμ • λ¦¬μ†μ¤μ— μ•΅μ„Έμ¤ν•  μ μλ”μ§€ μ—¬λ¶€λ¥Ό λ‚νƒ€λƒ…λ‹λ‹¤. κ·Έλμ„ λ³΄ν†µ μΈμ¦ λ‹¨κ³„κ°€ κ¶ν• λ¶€μ—¬ λ‹¨κ³„λ¥Ό μ„ ν–‰ν•΄μ”. GraphQLμ—μ„ μΈμ¦κ³Ό κ¶ν• λ¶€μ—¬λ” λ„μ „μ μΌ μ μλ”λ° μ΄λ” ν•λ‚μ λ…Έμ¶λ HTTP μ—”λ“ν¬μΈνΈ (μ: /graphql)λ§ μκΈ° λ•λ¬Έμ΄μ—μ”. μ΄ μ—”λ“ν¬μΈνΈ μ§„μ…μ μ—μ„ μ‚¬μ©μλ¥Ό μΈμ¦ν•  μλ” μμ§€λ§, κ·Έ κµ¬ν„μ—μ„ μΌλ¶€ λ¦¬μ†μ¤μ— λ€ν• κ³µκ° μ ‘κ·Ό μµμ…μ„ ν¬κΈ°ν•΄μ•Ό ν•  μ μμ–΄μ”. μ΄ μ μΌν• μ—”λ“ν¬μΈνΈ μ§„μ…μ—μ„ κ¶ν•μ„ λ¶€μ—¬ν•λ” κ²ƒμ€ λ¶κ°€λ¥ν•΄μ”. μ™λƒν•λ©΄ μ–΄λ–¤ λ¦¬μ†μ¤κ°€ μΏΌλ¦¬λ  μ§€ λ¨λ¥΄κΈ° λ•λ¬Έμ΄μ—μ”.\n\nμ΄ κ²μ‹λ¬Όμ μκ°μ€ ν•΄λ‹Ή μ£Όμ μ— λ€ν• λ‹µλ³€μ„ μ°Ύλ” μ¤νƒμ¤λ²„ν”λ΅μ° μ§λ¬Έμ—μ„ μ–»μ€ κ±°μμ”. # μ• ν”λ¦¬μΌ€μ΄μ… μ„¤μ •\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nμ €μ ν…μ¤νΈλ” Pythonμ—μ„ GraphQLμ™€ RESTμ μμ  κµ¬ν„μ„ λΉ„κµν• λ‚΄μ©μ— λ€ν• ν›„μ† κ²μ‹λ¬Όμ…λ‹λ‹¤. λ”°λΌμ„ μ• ν”λ¦¬μΌ€μ΄μ…μ„ μ„¤μ •ν•λ” λ° ν•„μ”ν• μ”κµ¬ μ‚¬ν•­μ„ μ°Ύμ„ μ μμµλ‹λ‹¤.\n\n# νμ› κ°€μ… / λ΅κ·ΈμΈ\n\nμ°μ„  μ΄λ©”μΌ λ° ν•΄μ‹±λ ν¨μ¤μ›λ“ μ†μ„±μ„ κ°€μ§„ κ°„λ‹¨ν• μ‚¬μ©μ λ¨λΈ(User)λ¶€ν„° μ‹μ‘ν•©λ‹λ‹¤.\n\n```js\nfrom sqlalchemy import Column, Integer, String\nfrom sqlalchemy.orm import relationship\nfrom db import Base\n\nclass User(Base):\n    __tablename__ = \"user\"\n\n    id = Column(Integer, primary_key=True, autoincrement=True)\n    email = Column(String, unique=True)\n    password = Column(String)\n    table_bookings = relationship(\"TableBooking\")\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nμ‚¬μ©μ λ“±λ΅μ€ μ΄λ©”μΌκ³Ό λΉ„λ°€λ²νΈ λ§¤κ°λ³€μλ¥Ό λ°›μ•„λ“¤μ΄κ³  λ°μ΄ν„°λ² μ΄μ¤μ— μ‚¬μ©μ λ μ½”λ“λ¥Ό μƒμ„±ν•λ” SignUp λ®¤ν…μ΄μ…μ„ ν†µν•΄ μ κ³µλ©λ‹λ‹¤.\n\n```js\n# api/graphql.py\nimport graphene\nfrom service import sign_up\n\nclass SignUp(graphene.Mutation):\n    class Arguments:\n        email = graphene.String(required=True)\n        password = graphene.String(required=True)\n\n   user = graphene.Field(UserNode)\n\n   def mutate(self, info, email: str, password: str):\n        session = info.context[\"session\"]\n        user = sign_up(session, email, password)\n        return SignUp(user=user)\n\nclass Mutation(graphene.ObjectType):\n    sign_up = SignUp.Field()\n\n# service.py\nfrom auth import generate_password_hash\n\nclass UserAlreadyExist(Exception):\n    pass\n\ndef sign_up(session: Session, email: str, password) -> User:\n    if session.query(User).filter_by(email=email).first():\n        raise UserAlreadyExist()\n    user = User(email=email, password=generate_password_hash(password))\n    session.add(user)\n    session.commit()\n    return user\n\n# auth.py\nimport hashlib\n\nSALT = \"STRONg@Salt\"\n\ndef generate_password_hash(password: str) -> str:\n    h = hashlib.md5(f\"{password}{SALT}\".encode())\n    return h.hexdigest()\n```\n\nλ®¤ν…μ΄μ…μ€ /graphql μ—”λ“ν¬μΈνΈμ—μ„ POST μ”μ²­μ„ ν†µν•΄ μ‹¤ν–‰λ©λ‹λ‹¤. GraphQLμ— λ€ν• μ΄μ „ κ²μ‹λ¬Όκ³Ό κ°™μ΄ insomniaλ¥Ό μ‚¬μ©ν•μ—¬ HTTP μ”μ²­μ„ μν–‰ν•©λ‹λ‹¤.\n\n![μ΄λ―Έμ§€](/TIL/assets/img/2024-07-09-HowtohandleauthenticationandauthorizationinGraphQLAPI_1.png)\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nμ‚¬μ©μ μΈμ¤ν„΄μ¤κ°€ μƒμ„±λλ©΄ μ¬λ°”λ¥Έ μκ²© μ¦λ…μ΄ μ „λ‹¬λλ©΄ μ‚¬μ©μ μΈμ¦ JWT ν† ν°μ„ μƒμ„±ν•λ” SignIn λ®¤ν…μ΄μ…μ΄ ν•„μ”ν•©λ‹λ‹¤.\n\n```js\n# api/graphql.py\nimport graphene\nfrom service import sign_in\n\nclass SignIn(graphene.Mutation):\n    class Arguments:\n        email = graphene.String(required=True)\n        password = graphene.String(required=True)\n\n   token = graphene.String()\n\n   def mutate(self, info, email: str, password: str):\n        session = info.context[\"session\"]\n        token = sign_in(session, email, password)\n        return SignIn(token=token)\n\n   class Mutation(graphene.ObjectType):\n        sign_in = SignIn.Field()\n\n# service.py\nfrom sqlalchemy.orm import Session\nfrom auth import generate_token, verify_password\nfrom models import User\n\nclass UserAuthenticationError(Exception):\n    pass\n\ndef sign_in(session: Session, email: str, password) -> str:\n    user = session.query(User).filter_by(email=email).first()\n    if not user:\n        raise UserAuthenticationError()\n    if not verify_password(user, password):\n        raise UserAuthenticationError()\n    return generate_token(user)\n\n# auth.py\nimport hashlib\nfrom itsdangerous import TimedJSONWebSignatureSerializer as Serializer\nfrom models import User\n\nSALT = \"STRONg@Salt\"\nSECRET_KEY = \"!SECRET!\"\nTOKEN_EXPIRES_IN = 3600 * 24 * 30\n\ndef generate_password_hash(password: str) -> str:\n    h = hashlib.md5(f\"{password}{SALT}\".encode())\n    return h.hexdigest()\n\ndef verify_password(user: User, password: str) -> bool:\n    return user.password == generate_password_hash(password)\n\ndef generate_token(user: User) -> str:\n    serializer = Serializer(SECRET_KEY, expires_in=TOKEN_EXPIRES_IN)\n    return serializer.dumps({\"user_id\": user.id}).decode(\"utf-8\")\n```\n\nSignIn λ®¤ν…μ΄μ…μ„ μ„ν•΄ μ΄λ©”μΌκ³Ό λΉ„λ°€λ²νΈλ¥Ό μ „λ‹¬ν•κ³  μΈμ¦μ΄ ν•„μ”ν• μ”μ²­μ—μ„ μ‚¬μ©ν•  μ μλ” ν† ν°μ„ νμ΄λ΅λ“λ΅ λ°›μµλ‹λ‹¤.\n\n![μ΄λ―Έμ§€](/TIL/assets/img/2024-07-09-HowtohandleauthenticationandauthorizationinGraphQLAPI_2.png)\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n# μΈμ¦\n\nSignIn λ‹¨κ³„μ—μ„ μƒμ„±λ ν† ν°μ΄ μμΌλ―€λ΅ \"Bearer Authentication\" ν”„λ΅μ„Έμ¤μ—μ„ μ‚¬μ©ν•  μ μμµλ‹λ‹¤. μ΄λ¬ν• μ ν•μ μΈμ¦μ—μ„λ” μ ν¨ν• ν† ν°(λ² μ–΄λ¬)μ„ κ°€μ§„ λ¨λ“  μ‚¬μ©μκ°€ ν•΄λ‹Ή ν† ν°μ— ν•΄λ‹Ήν•λ” μ‚¬μ©μλ΅ μΈμ‹λ  μ μμµλ‹λ‹¤. κ° GraphQL ν•„λ“ λ¦¬μ΅Έλ²„μ— μ‚¬μ©ν•  μ μλ” sign_in_required λ°μ½”λ μ΄ν„°λ¥Ό μ •μν•©λ‹λ‹¤. μ΄ λ°μ½”λ μ΄ν„°λ” \"Authorization\" μ”μ²­ ν—¤λ”μ—μ„ ν† ν°μ„ κ°€μ Έμ™€ ν•΄λ…ν•μ—¬ user_idλ¥Ό μ–»μ€ λ‹¤μ, user_idμ— ν•΄λ‹Ήν•λ” Userκ°€ μλ”μ§€ ν™•μΈν•©λ‹λ‹¤. μ„±κ³µμ μΌλ΅ μ™„λ£λλ©΄ μΈμ¦λ Userκ°€ λ©λ‹λ‹¤.\n\n```js\n# api/graphql.py\n\nimport graphene\nfrom api.auth import sign_in_required\n\nclass Query(graphene.ObjectType):\n    up = graphene.Boolean()\n    restaurants = graphene.relay.ConnectionField(\n        RestaurantConnection, q=graphene.String()\n    )\n    me = graphene.Field(UserNode)\n\n    def resolve_up(root, info, **kwargs):\n        return True\n\n    @sign_in_required()\n    def resolve_restaurants(root, info, **kwargs):\n        query = get_restaurants(\n            info.context[\"session\"], search=kwargs.get(\"q\"), limit=kwargs.get(\"first\")\n        )\n        return [RestaurantNode(id=r.id, name=r.name) for r in query]\n\n    @sign_in_required()\n    def resolve_me(root, info, **kwargs):\n        return kwargs[\"current_user\"]\n\n# api/auth.py\nfrom functools import wraps\nfrom auth import get_user_by_token\nfrom models import User\n\nclass UnauthenticatedUser(Exception):\n    pass\n\ndef sign_in_required():\n    def decorator(func):\n        @wraps(func)\n        def wrapper(root, info, *args, **kwargs):\n            kwargs[\"current_user\"] = get_current_user(info.context)\n            return func(root, info, *args, **kwargs)\n        return wrapper\n    return decorator\n\ndef get_current_user(context) -> User:\n    try:\n        token = get_token_from_request(context[\"request\"])\n        user = get_user_by_token(context[\"session\"], token)\n        if not user:\n            raise UnauthenticatedUser(\"UnauthenticatedUser\")\n        return user\n    except KeyError:\n        raise UnauthenticatedUser(\"UnauthenticatedUser\")\n\ndef get_token_from_request(request) -> str:\n    header = request.headers[\"Authorization\"]\n    token = header.replace(\"Bearer \", \"\", 1)\n    return token\n\n# auth.py\nimport hashlib\nfrom typing import Optional\nfrom itsdangerous import TimedJSONWebSignatureSerializer as Serializer\nfrom sqlalchemy.orm import Session\nfrom models import User\n\nSECRET_KEY = \"!SECRET!\"\nTOKEN_EXPIRES_IN = 3600 * 24 * 30\n\ndef get_user_by_token(session: Session, token: str) -> Optional[User]:\n    serializer = Serializer(SECRET_KEY, expires_in=TOKEN_EXPIRES_IN)\n    data = serializer.loads(token)\n    return session.query(User).get(data[\"user_id\"])\n```\n\nup ν•„λ“λ” κ³µκ° μ•΅μ„Έμ¤μ΄λ―€λ΅ μΏΌλ¦¬λ¥Ό μ„ν•΄ μκ²© μ¦λ…μ„ μ „λ‹¬ν•  ν•„μ”κ°€ μ—†μµλ‹λ‹¤. ν•νΈ, me ν•„λ“λ” sign_in_requiredλ΅ λ°μ½”λ μ΄νΈλμ—μΌλ―€λ΅ μ μ ν• ν† ν°μ„ μ „λ‹¬ν•΄μ•Ό ν•΄κ²°ν•  μ μμµλ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n![μ΄λ―Έμ§€](/TIL/assets/img/2024-07-09-HowtohandleauthenticationandauthorizationinGraphQLAPI_3.png)\n\n![μ΄λ―Έμ§€](/TIL/assets/img/2024-07-09-HowtohandleauthenticationandauthorizationinGraphQLAPI_4.png)\n\n\"Authorization\" ν—¤λ”μ— ν† ν°μ„ μ „λ‹¬ν•μ§€ μ•κ³  sign_in_requiredλ΅ ν‘μ‹λ ν•„λ“μ— μ ‘κ·Όν•λ©΄ UnauthenticatedUser μμ™Έκ°€ λ°μƒν•©λ‹λ‹¤.\n\n![μ΄λ―Έμ§€](/TIL/assets/img/2024-07-09-HowtohandleauthenticationandauthorizationinGraphQLAPI_5.png)\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n# μΈκ°€\n\nμΏΌλ¦¬λ¥Ό μΈμ¦ν•μ—¬ λ΅κ·ΈμΈν• μ‚¬μ©μλ§ μ•΅μ„Έμ¤ν•  μ μλ„λ΅ μ ν•ν•λ” λ°©λ²•μ„ μ‚΄ν΄λ³΄μ•μµλ‹λ‹¤. κ·Έλ¬λ‚ μ‚¬μ©μκ°€ λ΅κ·ΈμΈν–μ§€λ§ μν–‰ν•λ” μ‘μ—…μ΄ ν—μ©λμ§€ μ•λ” κ²½μ°λ” μ–΄λ–»κ² ν• κΉμ”? μλ¥Ό λ“¤μ–΄, μμ•½ν• λ μ¤ν† λ‘ ν…μ΄λΈ”μ΄ μμΌλ©° μ‚¬μ©μκ°€ μΈμ¦λμ—μ„ λ• ν—μ©λμ–΄μ•Ό ν•λ” κ²½μ°μ™€ ν…μ΄λΈ” μμ•½μ„ μ·¨μ†ν•΄μ•Ό ν•λ” κ²½μ°μ™€ κ°™μ΄ μ‚¬μ©μκ°€ μ΄μ „μ— μƒμ„±ν• μμ•½λ§ μ·¨μ†ν•  μ μλ” κ²½μ°κ°€ μμµλ‹λ‹¤.\n\nμ°λ¦¬λ” λ‘ κ°€μ§€ μ‘μ—…μ„ κµ¬ν„ν–μµλ‹λ‹¤:\n\n- μ‚¬μ©μκ°€ μΈμ¦λμ—μ„ λ• ν—μ©λμ–΄μ•Ό ν•λ” BookRestaurantTable λ®¤ν…μ΄μ…,\n- μ·¨μ†λμ–΄μ•Ό ν•λ” TableBookingμ„ μ·¨μ†ν•λ” CancelTableBooking λ®¤ν…μ΄μ….\n\nμ΄λ¥Ό μ„ν•΄ BookRestaurantTableμ€ sign_in_requiredλ΅ λ°μ½”λ μ΄νΈλ mutate λ©”μ„λ“λ¥Ό μ‚¬μ©ν•κ³ , CancelTableBookingμ€ authorize_requiredλ΅ λ°μ½”λ μ΄νΈλ μƒλ΅μ΄ λ©”μ„λ“λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤. μ΄ λ°μ½”λ μ΄ν„°λ” μ‚¬μ©μκ°€ μΈμ¦λμ—λ”μ§€ ν™•μΈν•κ³ , table_booking_gid(μΈμ¤ν„΄μ¤μ μ „μ—­ IDλ¥Ό λ‚νƒ€λ‚΄λ” κ°’)κ°€ μΈμ¦λ μ‚¬μ©μμ— μν•΄ μƒμ„±λ TableBooking μΈμ¤ν„΄μ¤μ™€ μΌμΉν•λ”μ§€ ν™•μΈν•©λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\nclass BookRestaurantTable(graphene.Mutation):\n    class Arguments:\n        restaurant_gid = graphene.ID(required=True)\n        persons = graphene.Int(required=True)\n\n    table_booking = graphene.Field(TableBookingNode)\n\n    @sign_in_required()\n    def mutate(self, info, restaurant_gid: str, persons: int, **kwargs):\n        session = info.context[\"session\"]\n        current_user = kwargs[\"current_user\"]\n        _, restaurant_id = from_global_id(restaurant_gid)\n        table_booking = book_restaurant_table(\n            session, restaurant_id, current_user.email, persons\n        )\n        return BookRestaurantTable(\n            table_booking=TableBookingNode(\n                id=table_booking.id,\n                is_active=table_booking.is_active,\n            )\n        )\n\nclass CancelTableBooking(graphene.Mutation):\n    class Arguments:\n        table_booking_gid = graphene.ID(required=True)\n\n    table_booking = graphene.Field(TableBookingNode)\n\n    @authorize_required(TableBooking)\n    def mutate(self, info, table_booking_gid: str, **kwargs):\n        session = info.context[\"session\"]\n        table_booking = kwargs[\"instance\"]\n        cancel_table_booking(session, table_booking)\n        return CancelTableBooking(\n            table_booking=TableBookingNode(\n                id=table_booking.id,\n                is_active=table_booking.is_active,\n            )\n        )\n\nclass Mutation(graphene.ObjectType):\n    book_restaurant_table = BookRestaurantTable.Field()\n    cancel_table_booking = CancelTableBooking.Field()\n\n# api/auth.py\nimport re\nfrom functools import wraps\nfrom graphene.relay.node import from_global_id\nfrom auth import authorize\nfrom models import User\n\ndef camel_to_snake(name: str) -> str:\n    \"\"\"CamelCase -> camel_case\"\"\"\n    return re.sub(r\"(?<!^)(?=[A-Z])\", \"_\", name).lower()\n\nclass UnauthorizedAccess(Exception):\n    pass\n\nclass InstanceNotExist(Exception):\n    pass\n\ndef authorize_required(model):\n    \"\"\"\n    We assume that the global id field name of a resource\n    follow convention like:\n    model_name: `TableBooking`\n    global id field name: `table_booking_gid`\n    \"\"\"\n    def decorator(func):\n        @wraps(func)\n        def wrapper(root, info, *args, **kwargs):\n            kwargs[\"current_user\"] = get_current_user(info.context)\n            model_name = model.__name__\n            gid_field_name = f\"{camel_to_snake(model_name)}_gid\"\n            instance_gid = kwargs[gid_field_name]\n            instance_model_name, instance_id = from_global_id(instance_gid)\n            if instance_model_name != f\"{model_name}Node\":\n                raise UnauthorizedAccess(\"UnauthorizedAccess\")\n            instance = info.context[\"session\"].query(model).get(instance_id)\n            if not instance:\n                InstanceNotExist()\n            kwargs[\"instance\"] = instance\n            if not authorize(instance, kwargs[\"current_user\"]):\n                raise UnauthorizedAccess(\"UnauthorizedAccess\")\n            return func(root, info, *args, **kwargs)\n        return wrapper\n    return decorator\n\n# auth.py\nfrom functools import singledispatch\nfrom models import TableBooking, User\n\n@singledispatch\ndef authorize(instance, current_user: User) -> bool:\n    raise NotImplementedError\n\n@authorize.register(TableBooking)\ndef _authorize(instance: TableBooking, current_user: User) -> bool:\n    return instance.user_id == current_user.id\n```\n\nBookRestaurantTableμ„ μ‹¤ν–‰ν•κΈ° μ„ν•΄ restaurant_gid λ° personsλΌλ” λ‘ κ°€μ§€ ν•„μ μΈμλ¥Ό μ „λ‹¬ν•΄μ•Ό ν•©λ‹λ‹¤. \"Authorization\" ν—¤λ”μ— ν† ν°μ„ μ¶”κ°€ν•΄μ•Ό ν•©λ‹λ‹¤. Mutation μ‘λ‹µμ—μ„λ” TableBooking.idλ¥Ό μ–»μµλ‹λ‹¤.\n\nμ΄λ―Έμ§€κ°€ ν¬ν•¨λ νμΌκ²½λ΅: `/assets/img/2024-07-09-HowtohandleauthenticationandauthorizationinGraphQLAPI_6.png`\n\nCancelTableBookingμ€ BookRestaurantTable νμ΄λ΅λ“(TableBooking.id)μ—μ„ κ°€μ Έμ¬ μ μλ” table_booking_gidλ§ ν•„μ”ν•©λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n<img src=\"/TIL/assets/img/2024-07-09-HowtohandleauthenticationandauthorizationinGraphQLAPI_7.png\" />\n\nλ§μ•½ ν† ν°μ΄ μ£Όμ–΄μ§„ ν…μ΄λΈ” μμ•½μ μ†μ μμ™€ μΌμΉν•μ§€ μ•λ” κ²½μ°, λ™μ‘μ„ μν–‰ν•  μ μ—†μΌλ©°, κ¶ν•μ΄ μ—†μ μμ™Έκ°€ λ°μƒν•©λ‹λ‹¤.\n\n<img src=\"/TIL/assets/img/2024-07-09-HowtohandleauthenticationandauthorizationinGraphQLAPI_8.png\" />\n\n# κ²°λ΅ \n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nμΈμ¦ λ° κ¶ν• λ¶€μ—¬ λ‹¨κ³„λ¥Ό μΏΌλ¦¬μ™€ λ®¤ν…μ΄μ… λ¨λ‘ μ„ν• λ°©λ²•μ„ μ†κ°ν–μ–΄μ”. μ΄ κµ¬ν„μ€ λ§¤μ° λ²”μ©μ μ΄λ©° μ–΄λ–¤ Python GraphQL ν”„λ΅μ νΈμ—λ„ μ‰½κ² ν†µν•©ν•  μ μμ–΄μ”. μ „μ²΄ μ†μ¤ μ½”λ“λ” μ—¬κΈ°μ—μ„ ν™•μΈν•  μ μμ–΄μ”: https://github.com/jorzel/service-layer/tree/auth.\n","ogImage":{"url":"/assets/img/2024-07-09-HowtohandleauthenticationandauthorizationinGraphQLAPI_0.png"},"coverImage":"/TIL/assets/img/2024-07-09-HowtohandleauthenticationandauthorizationinGraphQLAPI_0.png","tag":["Tech"],"readingTime":15},{"title":"λ¨λ“  κ°λ°μκ°€ μ•μ•„μ•Ό ν•  Top 10 Python μΈν„°λ·° μ§λ¬Έ","description":"","date":"2024-07-09 20:28","slug":"2024-07-09-Top10PythonInterviewQuestionsEveryDeveloperMustKnow","content":"\n\n## νμ΄μ¬ μΈν„°λ·° μ§λ¬Έ\n\nμ „ μ„Έκ³„μ—λ” 800λ§ λ… μ΄μƒμ νμ΄μ¬ κ°λ°μκ°€ μμµλ‹λ‹¤. λ§¤μΌ μμ² λ…μ μƒλ΅μ΄ ν•™μµμκ°€ νμ΄μ¬ μ»¤λ®¤λ‹ν‹°μ— κ°€μ…ν•©λ‹λ‹¤. νΉλ…ν• μ§„μ‹¤μ€, κ·Έ μ¤‘μ—μ„λ„ λ‹¨ 10~20%λ§μ΄ μΆ‹μ€ κ°λ°μκ°€ λμ–΄ μΆ‹μ€ μ§μ¥μ„ μ°Ύμ„ μ μμµλ‹λ‹¤. μ΄μ λ” κ³ κΈ‰ μΈν„°λ·° μ§λ¬Έμ„ ν•΄κ²°ν•μ§€ λ»ν•κΈ° λ•λ¬Έμ…λ‹λ‹¤. μ΄μ  10κ°€μ§€ μ¤‘μ”ν•κ³  ν”ν• νμ΄μ¬ μΈν„°λ·° μ§λ¬Έμ„ κ³µμ ν•κ² μµλ‹λ‹¤.\n\n# `.py` νμΌκ³Ό `.pyc` νμΌμ μ°¨μ΄λ” λ¬΄μ—‡μΈκ°€μ”?\n\n`.py` νμΌμ€ ν”„λ΅κ·Έλ¨μ μ†μ¤ μ½”λ“μ…λ‹λ‹¤. `.pyc` νμΌμ€ μ»΄νμΌλ λ°”μ΄νΈ μ½”λ“μ…λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nνμ΄μ¬μ€ `.py` νμΌμ„ μ»΄νμΌν•μ—¬ `.pyc` νμΌλ΅ μ €μ¥ν•κ³ , μ΄ νμΌμ€ νμ΄μ¬ κ°€μƒ λ¨Έμ‹ μ—μ„ μ‹¤ν–‰λ©λ‹λ‹¤.\n\nμ£Ό μ†μ¤ μ½”λ“λ¥Ό μ‹¤ν–‰ν•κΈ° μ „μ— νμ΄μ¬μ€ μ»΄νμΌλ λ²„μ „μΈ `.pyc` νμΌμ„ μ°Ύμµλ‹λ‹¤. μ°Ύμ•λ‹¤λ©΄ ν•΄λ‹Ή νμΌμ„ κ°€μƒ λ¨Έμ‹ μΌλ΅ μ‹¤ν–‰ν•©λ‹λ‹¤. μ°Ύμ§€ λ»ν–λ‹¤λ©΄ `.py` νμΌμ„ μ»΄νμΌν•κ³  μ‹¤ν–‰ν•©λ‹λ‹¤. μ”μ»¨λ€, `.pyc` νμΌμ€ μ΄λ―Έ μ»΄νμΌλ μ½”λ“λ¥Ό μ¬μ‚¬μ©ν•μ—¬ μ»΄νμΌ μ‹κ°„μ„ λ‹¨μ¶•ν•΄μ¤λ‹λ‹¤.\n\n# μ¶”μƒν™”λ€ λ¬΄μ—‡μΈκ°€μ”? νμ΄μ¬μ—μ„λ” μ–΄λ–»κ² μ¶”μƒν™”λ¥Ό κµ¬ν„ν•  μ μλ‚μ”?\n\nμ¶”μƒν™”λ” λ‚΄λ¶€ ν•¨μλ¥Ό μ‚¬μ©μλ΅λ¶€ν„° μ¨κΈ°λ” κ²ƒμ„ λ§ν•©λ‹λ‹¤. μ‚¬μ©μλ” κ²°κ³Όκ°€ μ–΄λ–»κ² μƒμ„±λμ—λ”μ§€ μ•μ§€ λ»ν• μ±„ ν•¨μμ™€ μƒνΈ μ‘μ©ν•©λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nκ°„λ‹¨ν λ§ν•λ©΄, μ¶”μƒν™”λ” ν”„λ΅κ·Έλ¨ λ³µμ΅μ„±μ„ μ¤„μ΄κΈ° μ„ν•΄ κ΄€λ ¨ μ—†λ” λ°μ΄ν„°λ¥Ό μ¨κΈ°λ” κ²ƒμ„ μλ―Έν•©λ‹λ‹¤. νμ΄μ¬μ—μ„λ” μ¶”μƒν™”λ¥Ό λ‹¬μ„±ν•κΈ° μ„ν•΄ ABC λ¨λ“μ„ μ‚¬μ©ν•©λ‹λ‹¤.\n\nμ¶”μƒ ν΄λμ¤λ” λ‹¤λ¥Έ ν΄λμ¤μ κΈ°λ°μΌλ΅ μ‚¬μ©ν•  μ μμµλ‹λ‹¤. μ¶”μƒ ν΄λμ¤μ κ°μ²΄λ” μƒμ„±ν•  μ μ—†μΌλ―€λ΅ μ”μ†μ— μ•΅μ„Έμ¤ν•λ” μ μΌν• λ°©λ²•μ€ μƒμ†μ„ ν†µν•΄μ„μ…λ‹λ‹¤.\n\n```python\nfrom abc import ABC, abstractmethod\n```\n\n```python\nclass Parent(ABC):\n    @abstractmethod\n    def show(self):\n        pass\n  \nclass child(Parent):\n    def show(self):\n        print(\"Child Class\")\nobj = child() # μ¶”μƒ ν΄λμ¤λ” μΈμ¤ν„΄μ¤ν™” ν•  μ μ—†μµλ‹λ‹¤\nobj.show() # Child Class\n```\n\n<!-- TIL μν‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n# FrozenSetμ΄λ€ λ¬΄μ—‡μΈκ°€μ”? μμ‹μ™€ ν•¨κ» μ¤‘μ”μ„±μ„ μ„¤λ…ν•΄μ£Όμ„Έμ”.\n\nFrozenSetsλ” setκ³Ό λΉ„μ·ν•μ§€λ§ λ³€κ²½ν•  μ μ—†μµλ‹λ‹¤.\n\n`set` μ”μ†λ¥Ό μ–Έμ λ“ μ§€ μμ •ν•  μ μμ§€λ§, μƒμ„±λ ν›„μ—λ” `frozenset`μ„ λ³€κ²½ν•  μ μ—†μµλ‹λ‹¤.\n\nμƒμ„± ν›„μ—λ” μ”μ†λ¥Ό μ¶”κ°€, μ‚­μ  λλ” μ—…λ°μ΄νΈν•  μ μ—†μµλ‹λ‹¤. `frozenset`μ€ λ°λ³µ κ°€λ¥ν• ν•­λ©μ„ μ…λ ¥μΌλ΅ λ°›μ•„λ“¤μ΄κ³  λ³€κ²½ν•  μ μ—†κ² λ§λ“­λ‹λ‹¤. λ³€κ²½ν•  μ μ—†κΈ° λ•λ¬Έμ— λ”•μ…”λ„λ¦¬μ ν‚¤λ΅ μ‚¬μ©ν•  μ μμµλ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\ndata = {\"Name\": \"Roger\", \"Pin\": 3056, \"ActNo\":9892345112234565}\nfSet = frozenset(data)\nprint(fSet) # frozenset({'Name', 'Pin', 'ActNo'})\n```\n\n**μ–•μ€ λ³µμ‚¬μ™€ κΉμ€ λ³µμ‚¬μ μ°¨μ΄λ¥Ό μ„¤λ…ν•΄λ³΄κ² μµλ‹λ‹¤.**\n\n`μ–•μ€ λ³µμ‚¬`λ” κ°μ²΄μ— λ€ν• μ°Έμ΅°λ¥Ό μƒλ΅μ΄ λ©”λ¨λ¦¬ μ„μΉμ— μ €μ¥ν•©λ‹λ‹¤. μƒλ΅μ΄ μ„μΉμ—μ„μ λ³€κ²½ μ‚¬ν•­μ€ μ΄μ „ μ„μΉμ— λ°μλ©λ‹λ‹¤. κΉμ€ λ³µμ‚¬λ³΄λ‹¤ λ” λΉ λ¦…λ‹λ‹¤.\n\n`κΉμ€ λ³µμ‚¬`λ” κ°μ²΄μ κ°’μ„ μƒλ΅μ΄ μ„μΉμ— μ €μ¥ν•©λ‹λ‹¤. μƒ μ„μΉμ—μ„μ λ³€κ²½ μ‚¬ν•­μ΄ μ΄μ „ μ„μΉμ— μν–¥μ„ λ―ΈμΉμ§€ μ•μµλ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n`id` λ” κ°μ²΄μ λ©”λ¨λ¦¬ μ£Όμ†λ¥Ό λ³΄λ” λ° μ‚¬μ©λ©λ‹λ‹¤. μμ‹μ—μ„μ μ£Όμ†λ” μ—¬λ¬λ¶„μ μ»΄ν“¨ν„°μ—μ„ λ‹¤λ¥Ό μ μμµλ‹λ‹¤.\n\n```js\n## μ–•μ€ λ³µμ‚¬\ndata = [1, 2, 3, 4, 5]\nupdated_data = data\nupdated_data.append(6)\nprint(updated_data) # [1, 2, 3, 4, 5, 6]\nprint(data) # [1, 2, 3, 4, 5, 6]\nprint(id(data)) # 16777216\nprint(id(updated_data)) # 16777216\n```\n\n```js\n## κΉμ€ λ³µμ‚¬\nimport copy\ndata = [1, 2, 3, 4, 5]\nupdated_data = copy.deepcopy(data)\nupdated_data.append(6)\nprint(updated_data) # [1, 2, 3, 4, 5, 6]\nprint(data) # [1, 2, 3, 4, 5]\nprint(id(updated_data)) # 16777216\nprint(id(data)) # 14020317\n```\n\n# pickleμ„ μ‚¬μ©ν•λ” λ°©λ²•μ€μ”?\n\n<!-- TIL μν‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n`ν”Όν΄λ§(Pickling)`μ€ Python κ°μ²΄λ¥Ό λ°”μ΄νΈ μ¤νΈλ¦ΌμΌλ΅ λ³€ν™ν•μ—¬ μ§λ ¬ν™”ν•λ” κ²ƒμ„ λ§ν•©λ‹λ‹¤.\n\n`μ–Έν”Όν΄λ§(Unpickling)`μ€ κ·Έ λ°λ€λ΅, λ°”μ΄νΈ μ¤νΈλ¦Όμ„ λ‹¤μ‹ Python κ°μ²΄λ΅ λ³€ν™ν•μ—¬ μ—­μ§λ ¬ν™”ν•λ” κ²ƒμ„ μλ―Έν•©λ‹λ‹¤.\n\nPythonμ—μ„λ” μ§λ ¬ν™”μ™€ μ—­μ§λ ¬ν™”λ¥Ό μ„ν•΄ `pickle.dump`μ™€ `pickle.load`λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.\n\n```python\n## Pickling\nimport pickle\ndata =  {\n    'Names': [\"Karl\",\"Robin\",\"Lary\"],\n    'Id': ('G770531','G770532','G770533'),\n    'Salary':[55600,88900,76000]\n    }\noutput = open('./data.pkl', 'wb')\npickle.dump(data, output)\noutput.close()\n```\n\n<!-- TIL μν‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\n## ν”Όν΄λ§\nimport pickle\nstream = open('./data.pkl', 'rb')\ndata = pickle.load(stream)\nprint(data) # {'Names': ['Karl', 'Robin', 'Lary'], 'Id': ('G770531', 'G770532', 'G770533'), 'Salary': [55600, 88900, 76000]}\nstream.close()\n```\n\n# *argsμ™€ **kwargsκ°€ λ¬΄μ—‡μΈκ°€μ”?\n\n*argsμ™€ **kwargsλ” ν•¨μμ— κ°€λ³€ κ°μμ μΈμλ¥Ό μ „λ‹¬ν•λ” κ²ƒμ„ κ°€λ¥ν•κ² ν•©λ‹λ‹¤. μ „λ‹¬λλ” μΈμκ°€ λ‡ κ°μΈμ§€ ν™•μ‹ μ΄ μ—†μ„ λ• μ‚¬μ©ν•©λ‹λ‹¤.\n\n*argsλ” ν•¨μμ— κ°€λ³€ κ°μμ μΈμλ¥Ό μ „λ‹¬ν•λ” κ²ƒμ„ κ°€λ¥ν•κ² ν•©λ‹λ‹¤.\n\n\n<!-- TIL μν‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```python\ndef addNumbers(*numbers):\n    sum = 0\n    for number in numbers:\n        sum = sum + number\n    print(\"Sum: \", sum)\naddNumbers(3,5) # Sum: 8\naddNumbers(5,6,7) # Sum: 18\n```\n\n**kwargsλ” ν•¨μμ— λ³€μ μμ ν‚¤μ›λ“ μΈμλ¥Ό μ „λ‹¬ν•λ” λ° μ‚¬μ©λ©λ‹λ‹¤.\n\n```python\ndef addNumbers(**data):\n    sum = 0\n    for key, value in data.items():\n        sum = sum + value\n    print(\"Sum: \", sum)\n    \naddNumbers(a=5, b=6) # Sum: 11\naddNumbers(a=5, b=8, c=10) # Sum: 23\n```\n\n# νμ΄μ¬μ—μ„ μ»¨ν…μ¤νΈ λ§¤λ‹μ €λ€ λ¬΄μ—‡μΈκ°€μ”?\n\n<!-- TIL μν‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nμ»¨ν…μ¤νΈ κ΄€λ¦¬μλ” λ¦¬μ†μ¤λ¥Ό κ΄€λ¦¬ν•©λ‹λ‹¤. ν•„μ”μ— λ”°λΌ λ¦¬μ†μ¤λ¥Ό ν• λ‹Ήν•κ³  ν•΄μ ν•  μ μκ² ν•΄μ¤λ‹λ‹¤.\n\nκ°€μ¥ μΌλ°μ μΈ μμ‹λ” `with` λ¬Έμ…λ‹λ‹¤.\n\nμ£Όλ΅ νμΌμ„ μ—΄κ³  λ‹«λ” λ° μ‚¬μ©λ©λ‹λ‹¤.\n\n`with`λ¥Ό μ‚¬μ©ν•λ©΄ μ½”λ“ ν• μ¤„μ—μ„ λ¬Έμ κ°€ λ°μƒν•΄λ„ νμΌμ΄ μ¬λ°”λ¥΄κ² λ‹«ν™λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```python\nwith open('./data.txt', 'w') as f:\n    f.write(\"Hello\")\n```\n\n# νμ΄μ¬μ—μ„ μΈμ¤ν„΄μ¤ λ©”μ†λ“, ν΄λμ¤ λ©”μ†λ“ λ° μ •μ  λ©”μ†λ“λ€ λ¬΄μ—‡μΈκ°€μ”?\n\nνμ΄μ¬μ—μ„λ” μ„Έ κ°€μ§€ μΆ…λ¥μ λ©”μ†λ“κ°€ μμµλ‹λ‹¤: μΈμ¤ν„΄μ¤ λ©”μ†λ“, ν΄λμ¤ λ©”μ†λ“ λ° μ •μ  λ©”μ†λ“.\n\n- μΈμ¤ν„΄μ¤ λ©”μ†λ“: ν΄λμ¤ λ‚΄μ— λ§λ“λ” μΌλ°μ μΈ λ©”μ†λ“λ΅, κ°μ²΄μ™€ κ΄€λ ¨μ΄ μμµλ‹λ‹¤. μΈμ¤ν„΄μ¤λ¥Ό κ°€λ¦¬ν‚¤κΈ° μ„ν•΄ `self`λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.\n- ν΄λμ¤ λ©”μ†λ“: κ°μ²΄κ°€ μ•„λ‹ ν΄λμ¤μ— λ°”μ΄λ“λ λ©”μ†λ“λ΅, ν΄λμ¤ μμ¤€μ μ‘μ—…μ„ μν–‰ν•λ©° ν΄λμ¤ μƒνƒλ¥Ό λ³€κ²½ν•  μ μμµλ‹λ‹¤. `@classmethod` λ°μ½”λ μ΄ν„°λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.\n- μ •μ  λ©”μ†λ“: ν΄λμ¤ λ‚΄μ— μ •μλμ–΄ μμ§€λ§ ν΄λμ¤ μμ²΄μ™€ κ΄€λ ¨μ΄ μ—†λ” λ…Όλ¦¬λ¥Ό λ…ν™•ν•κ² ν•κΈ° μ„ν•΄ μ‚¬μ©ν•©λ‹λ‹¤. `@staticmethod` λ°μ½”λ μ΄ν„°λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n# nonlocalκ³Ό global λ³€μλ€ λ¬΄μ—‡μΈκ°€μ”?\n\nμ΄λ“¤μ€ λ³€μμ λ²”μ„λ¥Ό μ •μν•©λ‹λ‹¤. Global λ³€μλ” ν•¨μ μ™Έλ¶€μ—μ„ μ •μλ©λ‹λ‹¤.\n\n```js\npi = 3.14  ## Global λ³€μ\ndef circle(radius):\n    area_of_circle = pi * (radius) ** 2\n    print(\"μ›μ λ©΄μ μ€: \", area_of_circle)\ncircle(7) # μ›μ λ©΄μ μ€: 153.86\n```\n\nμ΄λ“¤μ κ°’μ€ μ½”λ“ μ „μ²΄μ—μ„ λ™μΌν•λ©° ν”„λ΅κ·Έλ¨μ μ–΄λ””μ—μ„λ“  μ‚¬μ©ν•  μ μμµλ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nμ¤‘μ²© ν•¨μμ—μ„ μ •μλ λ΅μ»¬ μ¤μ½”ν”„ μ—†μ΄ λΉ„λ΅μ»¬ λ³€μκ°€ μ‚¬μ©λ©λ‹λ‹¤. λΉ„λ΅μ»¬ λ³€μμ κ°’μ„ λ³€κ²½ν•λ©΄ λ΅μ»¬ λ³€μμ κ°’λ„ λ³€κ²½λ©λ‹λ‹¤.\n\n```js\ndef outer_function():\n    x = \"λ΅μ»¬ λ³€μ\"\n    def inner_function():\n        nonlocal x\n        x = \"λΉ„λ΅μ»¬ λ³€μ\"\n        print(\"λ‚΄λ¶€ ν•¨μ:\", x)\n    inner_function()\n    print(\"μ™Έλ¶€ ν•¨μ:\", x)\nouter_function()\n# λ‚΄λ¶€ ν•¨μ: λΉ„λ΅μ»¬ λ³€μ\n# μ™Έλ¶€ ν•¨μ: λΉ„λ΅μ»¬ λ³€μ\n```\n\n# μμ μ™€ ν•¨κ» μ λ„λ μ΄ν„°μ— λ€ν•΄ μ„¤λ…ν•΄μ£Όμ„Έμ”.\n\nμ λ„λ μ΄ν„°(generator)λ” μν κ°€λ¥ν• κ°μ²΄(iterable objects)λ¥Ό λ°ν™ν•λ” ν•¨μμ…λ‹λ‹¤. ν•λ‚ μ΄μƒμ `yield` λ¬Έμ„ ν¬ν•¨ν•΄μ•Ό ν•©λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n`yield`μ€ ν•¨μμ ν„μ¬ μƒνƒλ‚ λ΅μ»¬ λ³€μ μ°Έμ΅°λ¥Ό μƒμ§€ μ•κ³  κ°’μ„ λ°ν™ν•λ” ν‚¤μ›λ“μ…λ‹λ‹¤. `yield`κ°€ ν¬ν•¨λ ν•¨μλ¥Ό μ λ„λ μ΄ν„°λΌκ³  λ¶€λ¦…λ‹λ‹¤.\n\nμ λ„λ μ΄ν„°λ” ν•„μ”ν•  λ•λ§ ν•­λ©μ„ μƒμ„±ν•μ—¬ λ©”λ¨λ¦¬λ¥Ό ν¨μ¨μ μΌλ΅ μ‚¬μ©ν•©λ‹λ‹¤.\n\nμ΄λ³΄μλ“¤μ—κ² `yield`λ¥Ό ν•¨μλ¥Ό μ¤‘μ§€ν•μ§€ μ•κ³  κ°’μ„ λ°ν™ν•λ” `return`μΌλ΅ μƒκ°ν•΄λ³΄μ„Έμ”.\n\n```js\ndef fibon(limit):\n    a,b = 0,1\n    while a < limit:\n        yield a\n        a, b = b, a + b\n        \nfor x in fibon(10):\n    print(x) # 1 2 3 5 8 13 21 34 55 89\n```\n\n<!-- TIL μν‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n# κ²°λ΅ \n\nμ €λ” 10κ°€μ§€ ν”ν• Python λ©΄μ ‘ μ§λ¬Έμ„ κ³µμ ν–μµλ‹λ‹¤. μ΄ μ§λ¬Έλ“¤μ΄ μ§μ¥μ„ λ°”κΎΈκ±°λ‚ μ§μ¥μ„ μ°Ύμ„ λ• λ„μ›€μ΄ λκΈΈ λ°”λΌμ”!\n\nμ €λ” β€Mediumμ—μ„ λΉ λ¥΄κ² ν”λ΅μ›λ¥Ό μ–»λ” λ°©λ²•β€μ— λ€ν• eBookμ„ μ“°κ³  μμ–΄μ”. μ™λƒν•λ©΄ μ €λ” μµκ³ μ μ¦κ±°μ΄κΈ° λ•λ¬Έμ΄μ£  β€” λ”± ν• λ‹¬ λ§μ— 5,000λ… μ΄μƒμ ν”λ΅μ›λ¥Ό μ–»μ—μ–΄μ”. κΈ°λ€ν•΄μ£Όμ„Έμ”!\n\nμ €λ” Substackμ—μ„ \"GPT μ†κ°\" μ‹λ¦¬μ¦λ¥Ό μ“°κ³  μμ–΄μ”. κ΄€μ‹¬ μμΌμ‹λ©΄ ν”λ΅μ° ν•΄μ£Όμ„Έμ”!\n\n<!-- TIL μν‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n10κ°μ κΈ€ μ¤‘ 10λ²μ§Έκ°€ μ΄λ―Έ μ™„λ£λμ—μµλ‹λ‹¤!\n\nμ½μ–΄μ£Όμ…”μ„ κ°μ‚¬ν•©λ‹λ‹¤π“–, κ°•μ΅°ν•΄μ£Όμ…”μ„ κ°μ‚¬ν•©λ‹λ‹¤π–οΈ, λ°•μλ¥Ό λ³΄λ‚΄μ£Όμ…”μ„ κ°μ‚¬ν•©λ‹λ‹¤π‘, λ“κΈ€μ„ λ‹¬μ•„μ£Όμ…”μ„ κ°μ‚¬ν•©λ‹λ‹¤π’¬, κ·Έλ¦¬κ³  κ³µμ ν•΄μ£Όμ…”μ„ κ°μ‚¬ν•©λ‹λ‹¤π—£οΈ. \"λ―Έλ””μ›€μ μΉκµ¬\"λ΅μ¨, μ €λ” λ§¤μΌ λ™λ£ μ‘κ°€λ“¤μ—κ² μ  κ²μ‹λ¬Όμ„ λ΄μ£Όλ©° λ³΄λ‹µν•λ ¤ λ…Έλ ¥ν•©λ‹λ‹¤.\n\nμµμ‹  AI μ΄μ•ΌκΈ°μ— λ€ν• μ†μ‹μ„ λ°›μΌλ ¤λ©΄ Substackμ—μ„ μ €ν¬μ™€ μ—°λ½μ„ μ μ§€ν•μ„Έμ”. ν•¨κ» AIμ λ―Έλλ¥Ό ν•¨κ» λ§λ“¤μ–΄ λ΄…μ‹λ‹¤!","ogImage":{"url":"/TIL/assets/no-image.jpg"},"coverImage":"/TIL/assets/no-image.jpg","tag":["Tech"],"readingTime":10},{"title":"νƒν—μ„ μ„ν• μµκ³ μ μ†ν”„νΈμ›¨μ–΄ 10κ°€μ§€","description":"","date":"2024-07-09 20:26","slug":"2024-07-09-Softwareforexploration","content":"\n## μ—°κµ¬ μ†ν”„νΈμ›¨μ–΄μ—μ„ λΉ λ¥Έ κΈΈμ„ μ„ νƒν•΄μ•Ό ν•λ” λ•\n\n![2024-07-09-Softwareforexploration_0](/TIL/assets/img/2024-07-09-Softwareforexploration_0.png)\n\nλ‚΄ μΈμƒ λ™μ• μ—°κµ¬μ— μΆ…μ‚¬ν•΄μ™”κΈ° λ•λ¬Έμ— μ—°κµ¬μλ“¤μ΄ λ»μƒκΈ΄ μ½”λ“λ¥Ό μ‘μ„±ν•λ‹¤λ” νΈκ²¬μ„ μ•κ³  μμ–΄μ” (μ: μ—¬κΈ°, μ—¬κΈ°, λλ” μ—¬κΈ°λ¥Ό μ°Έκ³ ν•μ„Έμ”). ν•μ§€λ§, μ΄λ¥Ό ν•΄κ²°ν•  μ μλ‹¤κ³  μƒκ°ν–μ–΄μ”. κ·Έλμ„ μ—¬λ¬ λ² λ©‹μ§„ μ—°κµ¬ ν”„λ μ„μ›ν¬λ¥Ό λ””μμΈν•λ ¤κ³  λ…Έλ ¥ν–μ–΄μ”. μΆ‹μ•„ν•λ” μ†ν”„νΈμ›¨μ–΄ μ—”μ§€λ‹μ–΄λ§ μ±…κ³Ό λΈ”λ΅κ·Έλ¥Ό μ°Έκ³ ν•μ—¬ μΈν„°νμ΄μ¤λ¥Ό λ„μ…ν•κ³  μΆ‹μ€ μ¶”μƒν™”λ¥Ό λ§λ“¤λ ¤κ³  λ…Έλ ¥ν–μ£ .\n\nκ·Έλ¬λ‚ κ·Έ λ¨λ“  λ…Έλ ¥μ΄ λ¬Όκ±°ν’μΌλ΅ λμ•„κ°”μ–΄μ”. λ‚΄κ°€ μ‘μ—…ν• λ€λ¶€λ¶„μ μ—°κµ¬ μ†ν”„νΈμ›¨μ–΄κ°€ μ‹¤μ  μ΄μμ— μ μ©λμ§€ μ•μ•κ±°λ“ μ” (μΌλ¶€λ” μ μ©λκΈ°λ” ν–μ§€λ§). λ‹¨μν• μ§„μ‹¤μ„ μ•λ ¤μ¤€ μ‚¬λμ΄ μμ—λ‹¤λ©΄, λ‚΄ μ •μ‹ κ±΄κ°•μ—λ” μ°Έ μΆ‹μ•μ„ ν…λ°μ”: μ£½μ–΄κ°€λ” μ—°κµ¬ μ½”λ“λ” μ‹¤μ λ΅ μΌμ–΄λ‚μ•Ό ν•λ” μΌμ΄μ—μ”. μ—°κµ¬μλ“¤μ€ μ²μλ¶€ν„° κ·Έκ²ƒμ„ μ—”μ§€λ‹μ–΄λ§ν•λ” λ° λ§μ€ μ‹κ°„μ„ λ“¤μ΄μ§€ μ•μ•„λ„ λμ”.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nμ „λ¬Έ μ†ν”„νΈμ›¨μ–΄ μ—”μ§€λ‹μ–΄λ“¤μ€ ν•­μƒ κ°€μ¥ μΆ‹μ€ μ†ν”„νΈμ›¨μ–΄ κ΄€ν–‰μ„ μ‚¬μ©ν•μ§€ μ•λ” μ—°κµ¬μλ“¤μ„ λ¬΄μ‹ν•λ” κ²½ν–¥μ΄ μμµλ‹λ‹¤. μ—°κµ¬ μ½”λ“μ μμ¤€μ„ λ†’μ΄λ ¤λ” λ…Έλ ¥μ΄ μ—¬λ¬ κ° μμµλ‹λ‹¤ (μ: μ΄ ν›λ¥­ν• κ²μ‹λ¬Ό λ° μ—°κµ¬ μ½”λ“ ν•Έλ“λ¶). κ·Έλ¬λ‚ μ΄ κ²μ‹λ¬Όμ€ λ‹¤λ¥Έ λ°©ν–¥μΌλ΅ λ‚μ•„κ°€μ„ μµκ³ μ μ†ν”„νΈμ›¨μ–΄ κ΄€ν–‰μ„ μ§€λ‚μΉκ² μ μ©ν•μ§€ μ•λ” λ°©λ²•μ„ μ£Όμ¥ν•λ©° λΉ λ¥Έ νƒκµ¬μ—λ§ μ£Όλ ¥ν•λ” κ²ƒμ΄ μ¤‘μ”ν•λ‹¤κ³  μ£Όμ¥ν•©λ‹λ‹¤. μ΄λ” λΉ λ¥΄κ² μ—¬λ¬ μ•„μ΄λ””μ–΄λ¥Ό μ‹λ„ν•΄λ³΄λ” κ²ƒμ΄ λ©ν‘μΈ μ—°κµ¬ μ§€ν–¥μ  κΈ°μ—…μ„ λ€μƒμΌλ΅ ν•©λ‹λ‹¤.\n\n# 1. λ‡λ‡ μ „λµμ  κΈ°μ  λ¶€μ±„λ¥Ό λ§΅μ•„λ³΄μ„Έμ”\n\nνμ‚¬μ μ„±κ³µμ μΈ μ—°κµ¬ ν”„λ΅μ νΈμ—λ” λ‘ κ°€μ§€ λ‹¨κ³„κ°€ μμµλ‹λ‹¤: νƒμƒ‰κ³Ό ν™μ©. \"νƒμƒ‰\" λ‹¨κ³„μ—μ„λ” κ°€λ¥ν• λ‹¤μ–‘ν• κ²½λ΅λ¥Ό μ‹λ„ν•΄λ³΄λ ¤κ³  ν•©λ‹λ‹¤. \"ν™μ©\" λ‹¨κ³„μ—μ„λ” κ°€μ¥ μΆ‹μ€ ν•΄κ²°μ±…μ„ κ²¬κ³ ν•κ² λ§λ“¤μ–΄ μ μ©ν• μ ν’μΌλ΅ μ „ν™ν•λ ¤κ³  ν•©λ‹λ‹¤.\n\n![Software for exploration](/TIL/assets/img/2024-07-09-Softwareforexploration_1.png)\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nλ‘ κ°€μ§€ μ‚¬μ΄μ—μ„ μµμ μ μ†ν”„νΈμ›¨μ–΄ κ΄€ν–‰μ€ κ½¤ λ‹¤λ¦…λ‹λ‹¤. κ·Έλμ„ νμ‚¬λ“¤μ€ μΆ…μΆ… λ³„λ„μ μ—°κµ¬ λ° μ ν’ λ¶€μ„λ¥Ό κ°–κ³  μμµλ‹λ‹¤. μ†ν”„νΈμ›¨μ–΄ λ””μμΈμ— κ΄€ν• μΌλ°μ μΌλ΅ μ½μ„ μ μλ” λ¨λ“  μ±…λ“¤μ€ μ£Όλ΅ λ‘ λ²μ§Έ \"ν™μ©\" λ‹¨κ³„μ— λ€ν•΄ μ„¤λ…ν•κ³  μμµλ‹λ‹¤. μ΄ λ‹¨κ³„μ—μ„λ” ν™•μ¥ κ°€λ¥ν• μ ν’μ„ μ„ν• κΈ°λ°μ„ κµ¬μ¶•ν•©λ‹λ‹¤. μ—¬κΈ°μ„ λ¨λ“  λ””μμΈ ν¨ν„΄μ΄ λ‚νƒ€λ‚©λ‹λ‹¤: μΆ‹μ€ API, λ΅κΉ…, μ¤λ¥ μ²λ¦¬ λ“±μ΄ μμµλ‹λ‹¤.\n\nκ·Έλ¬λ‚ μ²« λ²μ§Έ \"νƒμƒ‰\" λ‹¨κ³„μ—μ„λ” μμ›ν μ΅΄μ†ν•  κΈ°λ°μ΄ μ•„λ‹™λ‹λ‹¤. μ‹¤μ λ΅ λ€λ¶€λ¶„μ λ…Έλ ¥μ΄ λ‚¨μ•„ μλ‹¤λ©΄, κ·Έκ²ƒμ€ λ‹¤μ–‘μ„±μ„ νƒμƒ‰ν•μ§€ μ•μ•λ‹¤λ” λ»μ…λ‹λ‹¤.\n\nμ΄ κΈ€μ—μ„ μ†κ°ν• λ§μ€ κ΄€ν–‰μ€ μΌλ°μ μΌλ΅ \"κΈ°μ μ  λ¶€μ±„\"κ°€ λλ” μμ‹μ…λ‹λ‹¤. κΉ¨λ—ν•κ³  μ¬μ‚¬μ© κ°€λ¥ν•λ©° μ μ¶”μƒν™”λ μ½”λ“λ¥Ό μ‘μ„±ν•μ§€ μ•μ•„μ„ μƒκΈ°λ” κ²°κ³Όμ…λ‹λ‹¤. λ¶€μ±„λ” ν•­μƒ λ‚μ κ²ƒμΌκΉμ”? λ€μ¶μ΄λ‚ λ¨κΈ°μ§€λ¥Ό λ°›μ§€ μ•λ” κ²ƒμ΄ μΆ‹κ² μ§€λ§, λμ„ λΉλ¦¬λ” κ²ƒμ€ μΆ…μΆ… μΈμƒμ—μ„ μΆ‹μ€ μ „λµμ…λ‹λ‹¤. λΉ λ¥΄κ² μ›€μ§μ΄κ³  ν›„μ— μμµμ„ μ–»κΈ° μ„ν•΄ λ¶€μ±„λ¥Ό λ¶λ¬λ“¤μ΄λ” κ²ƒμ€ κ΄μ°®μµλ‹λ‹¤.\n\n![μ΄λ―Έμ§€](/TIL/assets/img/2024-07-09-Softwareforexploration_2.png)\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nλΉ„μ·ν•κ², κΈ°μ μ  λ¶€μ±„λ¥Ό κ°λ‹Ήν•μ§€ μ•μΌλ©΄ μ—°κµ¬ μ†λ„κ°€ λλ ¤μ§ μ μμµλ‹λ‹¤. μΆ‹μ€ μ†μ‹μ€ λ€λ¶€λ¶„μ κ²½μ°μ—λ” λ‹¤μ‹ μƒν™ν•  ν•„μ”κ°€ μ—†λ‹¤λ” κ²ƒμ…λ‹λ‹¤. λ€λ¶€λ¶„μ μ—°κµ¬ μ½”λ“λ” κ²°κµ­ μ‚¬λΌμ§ κ²ƒμ΄κΈ° λ•λ¬Έμ— ν‰κ· μ μΌλ΅ κ°€μ Έκ°„ μ „μ²΄ κΈ°μ μ  λ¶€μ±„λ΅ μΈν•΄ κ³ ν†µλ°›μ§€ μ•μ„ κ²ƒμ…λ‹λ‹¤.\n\n## μ½”λ“ μ¬μ‚¬μ©μ— λ°λ€ν•λ” μ‚¬λ΅€\n\nλ§μ€ μ†ν”„νΈμ›¨μ–΄ μ•„ν‚¤ν…μ² λ° λ¦¬ν©ν† λ§ κΈ°μ μ€ μ½”λ“μ μ¬μ‚¬μ©μ„±μ„ ν–¥μƒμ‹ν‚¤κΈ° μ„ν•΄ νΉλ³„ν μ„¤κ³„λμ—μµλ‹λ‹¤. μ½”λ“ μ¬μ‚¬μ©μ—λ” μΌλ°μ μΈ λ¶€μ‘μ©μ΄ μμµλ‹λ‹¤. κ·Έλ¬λ‚ μ‹¤μ  μ΄μμ—μ„λ” μ΄λ―Έ μ μ•λ ¤μ§„ ννƒλ“¤μ΄ κ·Έκ²ƒμ„ μƒμ‡„μ‹ν‚µλ‹λ‹¤ (μλ¥Ό λ“¤μ–΄, μ΄λ¬ν• μ „ν•μ μΈ κΈ€μ„ μ°Έμ΅°ν•μ„Έμ”). μ—°κµ¬ ν”„λ΅μ νΈμ—μ„ λ€λ¶€λ¶„μ μ½”λ“λ” λ¬΄μ‹λ  μ΄λ…μ…λ‹λ‹¤. μ½”λ“ μ¬μ‚¬μ©μ„ μ¶”κµ¬ν•λ” κ²ƒμ΄ μ‹¤μ λ΅ μ—°κµ¬ μ†λ„λ¥Ό λ¦μ¶ μ μμµλ‹λ‹¤.\n\nμ½”λ“ μ¬μ‚¬μ©μ„ μ ν•ν•λ” κ²ƒμ€ μ—°κµ¬μ—μ„ λ°›μ•„λ“¤μ΄λ” μΆ…λ¥μ κΈ°μ μ  λ¶€μ±„μ…λ‹λ‹¤. μ¶”κ°€μ μΈ λ¶ν•„μ”ν• μΆ…μ†μ„± μ¶”κ°€, μ½”λ“ λ³µμ‚¬ λ¶™μ—¬λ„£κΈ°, ν° μ–‘μ κ³µμ  μ—°κµ¬ μ½”λ“ μ μ§€, μ΅°κΈ° μ„¤κ³„ ν¬μ λ“± μ—¬λ¬ κ°€μ§€ μ½”λ“ μ¬μ‚¬μ© ν¨ν„΄μ— λ€ν•΄ λ…Όμν•κ³  μ‹¶μµλ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## μƒλ΅μ΄ κ²ƒμ„ κ°€μ Έμ¤κΈ° μ „μ— ν• λ² λ” μƒκ°ν•΄λ³΄μ„Έμ”\n\nμ„±λ¥μ„ ν–¥μƒμ‹μΌ μ¤„ μ μ μ§€λλ” λ²„μ „ κ΄€λ¦¬λ λΌμ΄λΈλ¬λ¦¬κ°€ μλ‹¤λ©΄ μ±„νƒν•΄ λ³΄μ„Έμ”! ν•μ§€λ§ μƒλ΅μ΄ μμ΅΄μ„±μ„ μ¶”κ°€ν•κΈ° μ „μ— κ·Έκ²ƒμ΄ κ·Έλ§ν• κ°€μΉκ°€ μλ”μ§€ νλ‹¨ν•΄ λ³΄μ„Έμ”. μ¶”κ°€λλ” κ°κ°μ μμ΅΄μ„±μ€ μμ΅΄μ„± μ§€μ¥μ— λ” κ°€κΉμ›μ§€κ² ν•©λ‹λ‹¤. ν•™μµκ³Ό λ¬Έμ  ν•΄κ²°μ— μ‹κ°„ ν¬μν•κ² λ§λ“­λ‹λ‹¤. μ΄ κ°„κ²°ν• ν¬μ¤νΈμ—μ„ μμ΅΄μ„±μ ν•¨μ •μ„ λ” μμ„Έν μ‚΄ν΄λ³΄μ„Έμ”.\n\nμ•„λ§λ„ λ‹¤μκ³Ό κ°™μ€ κ²½μ°μ—λ” μ•μ‹¬ν•  μ μμ„ κ²ƒμ…λ‹λ‹¤:\n\n- μ΄λ―Έ μ‚¬μ©ν•κ³  μκ³ , λ°°μΈ κ²ƒμ΄ λ§μ§€ μ•κ³ , ν° μ»¤λ®¤λ‹ν‹°μ™€ μΆ‹μ€ λ¬Έμ„ λ° ν…μ¤νΈκ°€ μλ” κ²½μ°\n- λ²„μ „μ΄ λ…μ‹λμ–΄ μκ³ , μ‰½κ² μ„¤μΉν•  μ μλ” κ²½μ°\n- λ§μ§€λ§‰μΌλ΅, μ§μ ‘ κµ¬ν„ν•  μ μλ” λ°©λ²•μ΄ μ—†λ” κ²½μ°.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nν•μ§€λ§ λ§μ•½μ— μ΄λ¬ν• μƒν™©μ— μμ‹¬μ¤λ¬μ΄ μμ΅΄μ„±μ΄ μλ‹¤λ©΄:\n\n- μ–΄λ–»κ² λΉ λ¥΄κ² μ‚¬μ©ν•΄μ•Ό ν•λ”μ§€ μ• μ μ—†κ±°λ‚ λ§¤μ° μƒλ΅μ΄ κ²ƒ (λλ” λ§¤μ° μ¤λλ κ²ƒ) μ΄κ±°λ‚ μ•„λ¬΄λ„ μ•μ§€ λ»ν•λ” κ²½μ°; λ¬Έμ„λ‚ ν…μ¤νΈκ°€ μ—†λ” κ²½μ°\n- λ¨λ…Έ λ ν¬μ—μ„ λ‹¤λ¥Έ ν€λ“¤μ— μν•΄ κ³„μ† λ°”λ€κ³  μλ” κ²½μ°\n- λ§μ€ λ‹¤λ¥Έ μμ΅΄μ„±κ³Ό λ„κµ¬λ“¤μ„ κ°€μ Έμ¤κ±°λ‚ μ„¤μΉν•κΈ° μ–΄λ ¤μ΄ κ²½μ°\n- λ§μ§€λ§‰μΌλ΅, μ—¬λ¬λ¶„μ΄ (λλ” λ‡λ‡ LLMμ΄) λ‡ μ‹κ°„ μ•μ— μ΄ μ½”λ“λ¥Ό μ§¤ μ μλ‹¤κ³  λλ‚€λ‹¤λ©΄\n\nλ…μ‹μ μΈ μμ΅΄μ„± λ€μ‹ , μΆ‹μ€ Go μ†λ‹΄μ„ λ”°λ¥Ό μλ„ μμµλ‹λ‹¤: β€μΆ€ μΉ΄ν”Όν•λ” κ²ƒμ€ μΆ€ μμ΅΄ν•λ” κ²ƒλ³΄λ‹¤ λ‚«λ‹¤β€, μ΄κ²ƒμ΄ μ°λ¦¬μ λ‹¤μ μ£Όμ μ…λ‹λ‹¤.\n\n## λ³µμ‚¬ λ¶™μ—¬λ„£κΈ°λ” μ‹¤ν—μ μμ λ¥Ό μ¤λ‹λ‹¤\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n![Software Exploration](/TIL/assets/img/2024-07-09-Softwareforexploration_3.png)\n\n\"λ³µμ‚¬ λ¶™μ—¬ λ„£κΈ°λ” λ¶λ²•μ΄μ–΄μ•Ό ν•λ‹¤\"λ” μ‚¬λλ“¤μ΄ μλ‹¤κ³  ν•΄μ”. ν•μ§€λ§ μ  λ†€λμ€ μμ£Ό κ·Έκ²ƒμ„ μΉνΈν•λ” λ° μ£Όμ¥μ„ ν•κ² λλ‹¤λ” κ²ƒμ΄μ—μ–΄μ”. νƒμƒ‰ λ‹¨κ³„μ—μ„ λ³µμ‚¬ λ¶™μ—¬ λ„£κΈ°κ°€ μµμ μ μ„ νƒμΌ μλ„ μμ–΄μ”.\n\nμ½”λ“λ² μ΄μ¤ λ‹¤λ¥Έ λ¶€λ¶„μ—μ„ ν¬κ² μ‚¬μ©λλ” ν•¨μμ— μμ΅΄ν•λ‹¤λ©΄ μ‰½κ² λ³€κ²½ν•  μ μ—†μ„ κ±°μμ”. λ„κµ°κ°€λ¥Ό μ„ν•΄ λ¬΄μ–Έκ°€λ¥Ό λ§κ°€λ¨λ¦΄ κ°€λ¥μ„±μ΄ λ†’κ³  μ†μ¤‘ν• μ‹κ°„μ„ μ½”λ“ κ²€ν† μ™€ μμ •μ— μ†λΉ„ν•΄μ•Ό ν•  μλ„ μμ–΄μ”. κ·Έλ¬λ‚ ν•„μ”ν• μ½”λ“λ¥Ό ν΄λ”μ— λ³µμ‚¬ λ¶™μ—¬ λ„£κΈ°ν•λ©΄ μμ λ΅­κ² μ›ν•λ” λ€λ΅ ν•  μ μμ–΄μ”. μ΄λ” μ‹¤ν—μ΄ κ·μΉ™μ΄ μ•„λ‹ μμ™ΈμΌ λ• μ—°κµ¬ ν”„λ΅μ νΈμ—μ„ μ¤‘μ”ν• μΌμ΄μ—μ”. νΉν λ¨λ“  μ‚¬λμ—κ² μ μ©ν• μ§€ ν™•μ‹¤ν•μ§€ μ•μ„ λ•μ”.\n\nμ €λ” λ”¥λ¬λ‹ μ½”λ“λ² μ΄μ¤κ°€ λ€λ¶€λ¶„ λ³µμ‚¬ λ¶™μ—¬ λ„£κΈ°μ— μ ν•©ν•λ‹¤κ³  μƒκ°ν•΄μ”. μΌλ°μ μΌλ΅ λ¨λΈκ³Ό κ·Έ ν•™μµμ„ μ„¤λ…ν•λ” λ° ν•„μ”ν• μ½”λ“ μ–‘μ΄ ν¬μ§€ μ•μ„ μλ„ μμ–΄μ”. κ·Έλ¬λ‚ λ™μ‹μ— λ§¤μ° λ―Έλ¬ν•κ³  μΌλ°ν™”ν•κΈ° μ–΄λ ¤μΈ μλ„ μμ–΄μ”. κ³µμ  κ°€λ¥ν• ν•™μµ μ¤ν¬λ¦½νΈλ” κ΄€λ¦¬ν•κΈ° νλ“  ν¬κΈ°λ΅ μ»¤μ§€κ³¤ ν•΄μ”: μλ¥Ό λ“¤μ–΄ Hugging Face transformers Trainerλ” 4μ² μ¤„μ„ λ„μ—μ–΄μ”. μ¬λ―Έμλ” μ‚¬μ‹¤μ€ transformersκ°€ λ¨λΈ μμ¤€μ—μ„ λ³µμ‚¬ λ¶™μ—¬ λ„£κΈ°λ¥Ό μ„ νƒν–λ‹¤λ” κ²ƒμ΄μ—μ”. κ·Έλ“¤μ \"λ‹¨μΌ νμΌ λ¨λΈ\" μ •μ±… λ’¤μ— μ΄μ μ— λ€ν• ν¬μ¤νΈλ¥Ό ν™•μΈν•΄μ£Όμ„Έμ”.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nλ€μ•μΌλ΅ λ³µμ‚¬ λ° λ¶™μ—¬λ„£κΈ° λ€μ‹  λΈλμΉλ¥Ό μ μ§€ν•λ” κ²ƒμ΄ μμµλ‹λ‹¤. ν•μ§€λ§ ν€μ›λ“¤κ³Ό ν‘μ—…μ— λ„λ¬΄ λ§μ€ λ¶€λ‹΄μ„ μ£Όλ” κ²ƒ κ°™μ•„μ”. κ²λ‹¤κ°€, λ³µμ‚¬ λ¶™μ—¬λ„£κΈ°μ λ§¤λ ¥μ— κ΄€ν• λ‡ κ°€μ§€ κ²μ‹λ¬Όμ„ λ” λ°κ²¬ν–μ–΄μ”. \"μλ£\"μ—μ„ ν™•μΈν•΄λ³΄μ„Έμ”.\n\n## κ³µμ λ μ—°κµ¬ μ½”λ“ μ μ§€ κ΄€λ¦¬λ” μ–΄λ ¤μ›μ”\n\nλ§μ΄ μ‚¬μ©λλ” κ³µμ  μ½”λ“λ¥Ό μ μ§€λ³΄μν•λ” κ²ƒμ€ λ§μ€ μ‘μ—…μ΄ ν•„μ”ν•΄μ”. torch.nn.Moduleμ νμΌ λΌμΈ μλ¥Ό Pytorch λ²„μ „μ— λ€ν•΄ κ·Έλν”„λ΅ λ‚νƒ€λ‚Έ κ²ƒμ„ μ‚΄ν΄λ΄μ”. μ‹¬μ§€μ–΄ κ°€μ¥ μ„ λ¬Όλ μ—°κµ¬ ν€λ„ λ³µμ΅μ„±μ„ μ μ§€ν•κΈ° μ–΄λ µλ‹¤λ” κ²ƒμ„ μ• μ μμ–΄μ”.\n\n![Softwareforexploration_4](/TIL/assets/img/2024-07-09-Softwareforexploration_4.png)\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nν° κ³µλ™ μ—°κµ¬ μ½”λ“λ¥Ό μ μ§€ν•λ” λ° ν•„μ”ν• μ‹κ°„κ³Ό λ¦¬μ†μ¤λ¥Ό κ³Όμ†ν‰κ°€ν•μ§€ λ§μ„Έμ”. μ—°κµ¬ λΌμ΄λΈλ¬λ¦¬κ°€ λ” λ§μ΄ μ‚¬μ©λ μλ΅ λ” λ³µμ΅ν•΄μ§‘λ‹λ‹¤. μΌλ° λΌμ΄λΈλ¬λ¦¬λ³΄λ‹¤ λΉ λ¥΄κ² λ°μƒν•λ” μ΄μ λ” κ° μ—°κµ¬ λ°©ν–¥μ΄ μ•½κ°„ λ‹¤λ¥Έ μ‚¬μ© μ‚¬λ΅€λ¥Ό κ°–κ³  μκΈ° λ•λ¬Έμ…λ‹λ‹¤. κΈ°μ—¬ν•  μ μλ” λ‚΄μ©μ— λ€ν• λ§¤μ° μ—„κ²©ν• κ·μΉ™μ„ μ •λ¦½ν•μ„Έμ”. κ·Έλ ‡μ§€ μ•μΌλ©΄ κ³µλ™ μ½”λ“λ” μ·¨μ•½ν•΄μ§€κ³  μµμ…μ„ κ°€λ“ μ±„μ°κ³  λ²„κ·Έκ°€ λ§μ€ μµμ ν™”μ™€ μμ™Έ μ‚¬ν•­μΌλ΅ λ„μΉκ² λ©λ‹λ‹¤. λ€λ¶€λ¶„μ μ—°κµ¬ μ½”λ“κ°€ μ‚¬λΌμ§€κΈ° λ•λ¬Έμ— μ΄ λ¨λ“  μ¶”κ°€ λ³µμ΅μ„±μ€ λ‹¤μ‹ μ‚¬μ©λμ§€ μ•μ„ κ²ƒμ…λ‹λ‹¤. μΌλ¶€ κ³µλ™ μ½”λ“λ¥Ό μ κ±°ν•λ©΄ μ‹¤μ  μ—°κµ¬λ¥Ό μ§„ν–‰ν•  μ‹κ°„μ„ ν™•λ³΄ν•  μ μμµλ‹λ‹¤.\n\n## νƒν—μ„ μ„ν•΄ μ„¤κ³„ν•κ³  μ½”λ“ μ¬μ‚¬μ©μ„ μ„ν•΄ μ„¤κ³„ν•μ§€ λ§μ„Έμ”\n\nμ½”λ“λ¥Ό λ„λ¬΄ λ§μ΄ λ―Έλμ§€ν–¥μ μΌλ΅ λ§λ“¤κ³  μ‹¶μ§€ μ•μ€ κ²ƒλ„ μ•½κ°„ μ‚¬μ‹¤μ…λ‹λ‹¤. μ”κµ¬ μ‚¬ν•­μ„ μ¶©μ΅±ν•λ” κ°€μ¥ κ°„λ‹¨ν• μ†”λ£¨μ…μ„ κµ¬ν„ν•λ ¤ λ…Έλ ¥ν•μ„Έμ”. κ·Έλ¬λ‚ ν”„λ΅λ•μ… μ½”λ“μ—λ” ν•­μƒ μ μ§€ κ΄€λ¦¬ κ°€λ¥μ„±μ„ κ³ λ ¤ν•΄μ•Ό ν•©λ‹λ‹¤. μλ¥Ό λ“¤μ–΄, μ¤λ¥ μ²λ¦¬, μ†λ„, λ΅κΉ…, λ¨λ“ν™”λ” μΌλ°μ μΌλ΅ κ³ λ ¤ν•΄μ•Ό ν•  μ‚¬ν•­μ…λ‹λ‹¤.\n\nμ—°κµ¬ μ½”λ“μ—λ” κ·Έλ° κ²ƒμ΄ μ¤‘μ”ν•μ§€ μ•μµλ‹λ‹¤. λ‹¨μ§€ μ•„μ΄λ””μ–΄κ°€ μΆ‹μ€μ§€ λ‚μμ§€λ¥Ό μµλ€ν• λΉ λ¥΄κ² μ¦λ…ν•κ³  λ„μ–΄κ°€λ ¤ ν•©λ‹λ‹¤. λ”°λΌμ„ λ¨λ“μ΄λ‚ API μ—†μ΄ ν•΄λ‹Ή λ©μ μ„ λ‹¬μ„±ν•λ” λ”λ¬μ΄ λ‹¨μμ„±μ€ μ „ν€ λ¬Έμ κ°€ λμ§€ μ•μµλ‹λ‹¤!\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nκ°€μΉ μλ” μ‹κ°„μ„ λ‚­λΉ„ν•μ§€ λ§μ„Έμ”. μ΄λ¥Έ μ‹μ μ— μ†ν”„νΈμ›¨μ–΄ ν¬μλ¥Ό ν•μ§€ λ§μ‹­μ‹μ¤:\n\n- ν”„λ΅μ νΈ μ΄λ°μ— μ»΄ν¬λ„νΈ μΈν„°νμ΄μ¤λ¥Ό μƒμ„±ν•λ” κ²ƒ. μμ²΄ μ μ‘ν• μΈμ„μ μΈ μ μ•½ μ΅°κ±΄μ— λ§μ¶”λλΌ λ„λ¬΄ λ§μ€ μ‹κ°„μ„ μ†λΉ„ν•κ² λ©λ‹λ‹¤.\n- λ”¥ λ¬λ‹ μ†”λ£¨μ…μ„ ν™•μ •ν•κΈ° μ „μ— λ”¥ λ¬λ‹ ν›λ ¨ μΈν”„λΌλ¥Ό μµμ ν™”ν•λ” κ²ƒ.\n- ν”„λ΅ν† νƒ€μ΄ν•‘ μ¤‘μ—λ” ν”„λ΅λ•μ… κµ¬μ„±/ν©ν† λ¦¬/μ§λ ¬ν™” μ‹μ¤ν…μ΄λ‚ λ² μ΄μ¤ ν΄λμ¤λ¥Ό μ‚¬μ©ν•μ§€ μ•λ” κ²ƒ. μΆ…μΆ… μ΄ κΈ°λ¥μ΄ ν•„μ”ν•μ§€ μ•μ„ μ μμµλ‹λ‹¤.\n- μ§€λ‚μΉκ² μ—„κ²©ν• λ¦°ν… λ° νƒ€μ… μ²΄ν¬ μ‹μ¤ν…. λΉ λ¥΄κ² λ³€ν™”ν•λ” μΌνμ© μ—°κµ¬ μ½”λ“λ¥Ό λ¦μ¶”λ” μ΄μ κ°€ μ—†μµλ‹λ‹¤.\n\n# 2. λΉ λ¥Έ νƒμƒ‰μ— ν¬μν•κΈ°\n\nμ—°κµ¬ ν”„λ΅μ νΈμ λ©ν‘λ” νμ‹ μ μΈ μ†”λ£¨μ…μ„ μ°Ύλ” κ²ƒμ…λ‹λ‹¤. μ•„λ¬΄λ„ (μ •μμƒ) κ·Έ λ¨μµμ„ λ¨λ¦…λ‹λ‹¤. μ ν•λ μ •λ³΄κ°€ μλ” λ³µμ΅ν• μ—°κµ¬ ν™κ²½μ—μ„ μµμ ν™” ν”„λ΅μ„Έμ¤μ™€ μ μ‚¬ν•©λ‹λ‹¤. μΆ‹μ€ μµμ†κ°’μ„ μ°ΎκΈ° μ„ν•΄ λ§μ€ κ²½λ΅λ¥Ό μ‹λ„ν•κ³ , μΆ‹μ€ κ²½λ΅μ™€ λ‚μ κ²½λ΅λ¥Ό μΈμ‹ν•κ³  κµ­μ† μµμ†κ°’μ— κ°‡νμ§€ μ•μ•„μ•Ό ν•©λ‹λ‹¤. λ¨λ“  κ²ƒμ„ λΉ λ¥΄κ² μν–‰ν•λ ¤λ©΄ κΈ°μ μ  λ¶€μ±„λ¥Ό κ°λ” λ€μ‹  μ†ν”„νΈμ›¨μ–΄ ν¬μλ¥Ό ν•  ν•„μ”κ°€ μμ„ μ μμµλ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## κ³µν†µ κ²½λ΅ κ°€μ†ν™”\n\n![Screenshot](/TIL/assets/img/2024-07-09-Softwareforexploration_5.png)\n\nμ‹λ„ν•κ³  μ‹¶μ€ μ—¬λ¬ κ°€μ§€ μ—°κµ¬ κ²½λ΅κ°€ μμµλ‹λ‹¤. λ€λ¶€λ¶„μ κ²½λ΅μ—μ„ μ‹κ°„μ„ λ‹¨μ¶•μ‹ν‚¬ μ μλ” λ””μμΈ, λΌμ΄λΈλ¬λ¦¬ λλ” μµμ ν™”κ°€ μμµλ‹κΉ? μ‹λ„ν•  μ•„μ΄λ””μ–΄λ¥Ό ν•­μƒ μ• μ μ—†μΌλ―€λ΅ λ„λ¬΄ λ§μ€ κ²ƒμ„ κ³Όλ„ν•κ² μ„¤κ³„ν•μ§€λ” λ§μ‹­μ‹μ¤. μ΄λ” κ° ν”„λ΅μ νΈλ§λ‹¤ λ§μ¶¤μ μ΄μ§€λ§, μ—¬κΈ°μ— μΌλ¶€ μμ‹κ°€ μμµλ‹λ‹¤:\n\n- λ”¥ λ„¤νΈμ›ν¬λ¥Ό ν•™μµν•λ‹¤λ©΄, ν•™μµ μΈν”„λΌμ— ν¬μν•μ‹­μ‹μ¤. ν•™μµ μ¤‘ λΉ λ¥΄κ³  μ‹ λΆ°μ„± μκ² μλ ΄ν•  μ μλ” ν•μ΄νΌνλΌλ―Έν„°λ¥Ό μ°ΎμΌμ„Έμ”.\n- λ¨λ“  μ‹¤ν—μ΄ κ°κΈ° λ‹¤λ¥Έ λ¨λΈμ„ μ‚¬μ©ν•΄μ•Ό ν•λ‹¤λ©΄, μ–΄λ–»κ² λΉ λ¥΄κ² κµμ²΄ν•  μ μλ”μ§€ νμ•…ν•μ„Έμ” (μ: λ‹¨μν• ν©ν† λ¦¬ μ‹μ¤ν… λλ” λ‹¨μ λ³µμ‚¬ λ¶™μ—¬λ„£κΈ°).\n- λ¨λ“  μ‹¤ν—μ΄ λ§¤κ°λ³€μκ°€ λ„λ¬΄ λ§μ•„ κ΄€λ¦¬κ°€ μ–΄λ µλ‹¤λ©΄, μΆ‹μ€ κµ¬μ„± λΌμ΄λΈλ¬λ¦¬μ— ν¬μν•μ‹­μ‹μ¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## λΉ λ¥΄κ² λ¶„κΈ° λ‚΄λ¦¬κΈ°\n\n![image](/TIL/assets/img/2024-07-09-Softwareforexploration_6.png)\n\nμ—°κµ¬μλ“¤μ€ λΉ λ¥΄κ² μƒλ΅μ΄ λ‹¤μ–‘ν• μ•„μ΄λ””μ–΄λ¥Ό μ‹μ‘ν•  μ μμ–΄μ•Ό ν•©λ‹λ‹¤. ν”„λ΅μ νΈ μ΄λ°μ—λ” μ‰¬μ› λ³΄μ΄μ§€λ§, μ‚¬λλ“¤μ΄ μμ‹ μ΄ μ„ νΈν•λ” μ—°κµ¬ κ²½λ΅μ— λΉ μ§€λ©΄μ„ μ μ°¨ λ” μ–΄λ ¤μ›μ§€λ” κ²½ν–¥μ΄ μμµλ‹λ‹¤. μ΄λ¥Ό ν•΄κ²°ν•κΈ° μ„ν•΄ λ¬Έν™”μ μΈ λ³€ν™”μ™€ μ΅°μ§μ μΈ λ³€ν™”κ°€ ν•„μ”ν•©λ‹λ‹¤. λΉ„μλ¦¬μ μΈ μ—°κµ¬κ°€ λ„λ¬΄ λ§μ€ λΉ„μ©κ³Ό κ°μ •μ„ λ“¤μ΄κΈ° μ „μ— μ¤‘λ‹¨μ‹ν‚¬ μ μλ” ν”„λ΅μ„Έμ¤κ°€ μμ–΄μ•Ό ν•©λ‹λ‹¤. μ •κΈ°μ μΈ λ°λ¨ λ°μ΄μ™€ κΈ°μ  λ™λ£ κ²€ν† λ” μ΄λ¥Ό μ„ν• ν¨κ³Όμ μΈ μ „λµμΌλ΅ κΈ°λ¥ν•  μ μμµλ‹λ‹¤. λν• μƒλ΅­κ³  λ°μ§κ±°λ¦¬λ” μ•„μ΄λ””μ–΄μ— λ›°μ–΄λ“λ” μ‚¬λλ“¤κ³Ό ν„μ¬ ν”„λ΅μ νΈλ¥Ό μ μ ν•κ² λ§λ¬΄λ¦¬ν•λ” μ‚¬λλ“¤ μ‚¬μ΄μ κ· ν•μ„ μ°Ύλ” κ²ƒμ΄ μ¤‘μ”ν•©λ‹λ‹¤.\n\nκ·Έλ¬λ‚ μ΄κ²ƒμ€ μ†ν”„νΈμ›¨μ–΄ κ²μ‹λ¬Όμ΄λ―€λ΅ μƒλ΅μ΄ ν”„λ΅μ νΈλ¥Ό λ¶„κΈ° λ‚΄λ¦¬κΈ° μ‰½κ² ν•λ” λ‡ κ°€μ§€ μ‹¤μ² λ°©λ²•μ„ μ†κ°ν•©λ‹λ‹¤:\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- μ•κ³ λ¦¬μ¦μ—μ„ ν‰κ°€ μ½”λ“λ¥Ό λ¶„λ¦¬ν•μ—¬ μ μ§€ν•μ„Έμ”. ν‰κ°€λ” μΌλ°μ μΌλ΅ μ—°κµ¬ λ°©ν–¥λ³΄λ‹¤ μ•μ •μ μ…λ‹λ‹¤.\n- μƒλ΅μ΄ ν”„λ΅μ νΈλ¥Ό λΉ ν™”λ©΄μ—μ„ μ‹μ‘ν•λ” κ²ƒμ„ ν™μν•μ§€λ§, μ¬μ‚¬μ©λλ” κµ¬μ„± μ”μ†μ— μ£Όμν•μ„Έμ”. λ¨λ“ν™”ν•κ³  μ •λ¦¬ν•λ” κ²ƒμ΄ μΆ‹μ€ ν¬μμ…λ‹λ‹¤.\n- μƒλ΅μ΄ μ—°κµ¬ ν”„λ΅μ νΈμ—μ„ κ°€μ¥ νμ‹ μ μ΄κ³  μ„ν—ν• κµ¬μ„± μ”μ†λ¥Ό λ¨Όμ € κµ¬ν„ν•μ„Έμ”. μ΄λ ‡κ² ν•¨μΌλ΅μ¨ λ€λ¶€λ¶„μ λ³‘λ© ν„μƒμ„ ν™•μΈν•κ³  λ―Έλ μ†ν”„νΈμ›¨μ–΄ λ””μμΈμ„ μ•λ‚΄ν•  μ μμµλ‹λ‹¤.\n\n## μ‹ νΈ λ€ μ΅μ λΉ„μ¨ μ¦κ°€\n\n![](/TIL/assets/img/2024-07-09-Softwareforexploration_7.png)\n\nμ΅μμ΄ λ§κ³  λ²„κ·Έκ°€ μλ” μ½”λ“λ” κ²°κ³Όλ¥Ό λ„λ¬΄ λ¨νΈν•κ³  κ²°λ΅ μ΄ λ‚μ§€ μ•κ² λ§λ“¤μ–΄ μ „μ²΄ ν”„λ΅μ νΈκ°€ μ‹κ°„ λ‚­λΉ„κ°€ λ  μ μμµλ‹λ‹¤. μ—¬λ¬λ¶„μ΄ κ³Όλ„ν•κ² μ—”μ§€λ‹μ–΄λ§μ„ ν•μ§€ μ•μ•„λ„ λμ§€λ§, μ½”λ“λ¥Ό μ§€μ €λ¶„ν•κ² λ§λ“¤μ§€ μ•μΌλ ¤λ©΄ λ‹¤μκ³Ό κ°™μ€ κ°„λ‹¨ν• μ§€μΉ¨μ„ μ‰½κ² λ”°λ¥Ό μ μμµλ‹λ‹¤:\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- λ¶€μ‘μ©μ΄ μλ” μ½”λ“λ¥Ό ν”Όν•μ„Έμ”.\n- ν΄λμ¤λ³΄λ‹¤λ” ν•¨μλ¥Ό κΈ°λ³ΈμΌλ΅ μ‚¬μ©ν•κ³ , ν΄λμ¤λ¥Ό μ‚¬μ©ν•  λ•μ—λ” μƒμ† λ€μ‹  μΊ΅μν™”λ¥Ό μ„ νΈν•μ„Έμ”.\n- ν•¨μ/ν΄λμ¤/λ¨λ“μ κΈΈμ΄λ¥Ό μµμ†ν™”ν•κ³ , if λ¬Έμ κ°μλ¥Ό μµμ†ν™”ν•μ„Έμ”.\n- νμ΄μ¬μ„ μ μ•μ§€λ§ κ°„λ‹¨ν• κΈ°μ μ„ μ‚¬μ©ν•μ„Έμ”. λ©”νƒ€ν΄λμ¤, λ°μ½”λ μ΄ν„°, ν•¨μν• ν”„λ΅κ·Έλλ°μ λ³µμ΅ν• λ¶€λ¶„μ— λΉ μ§€μ§€ λ§μ•„μ£Όμ„Έμ”.\n\nμ„λ΅ λ‹¤λ¥Έ μ‹¤ν–‰μ—μ„ λ‹¤λ¥Έ κ²°κ³Όλ¥Ό λ‚΄λ” μ†ν”„νΈμ›¨μ–΄λ” μ‘μ—…ν•κΈ° κΉλ‹¤λ΅μΈ μ μμµλ‹λ‹¤. λ¶μ΄ν• μ‹λ“λ¥Ό κΈ°λ°μΌλ΅ ν• μ¤‘μ”ν•μ§€λ§ μλ»λ κ²°μ •μ„ λ‚΄λ Έμ„ κ²½μ°, λ§μ€ μ‹κ°„μ„ μ†λΉ„ν•κ² λ  μλ„ μμµλ‹λ‹¤. λΉ„κ²°μ •μ  μ†ν”„νΈμ›¨μ–΄λ¥Ό λ‹¤λ£° λ• λ‡ κ°€μ§€ νμ„ μ•λ‚΄λ“λ¦½λ‹λ‹¤:\n\n- μ•κ³ λ¦¬μ¦μ—μ„ λ‚μ¤λ” λ…Έμ΄μ¦μ™€ ν•΄λ‹Ή ν‰κ°€μ—μ„ λ‚μ¤λ” λ…Έμ΄μ¦λ¥Ό κµ¬λ¶„ν•μ„Έμ”. λ…Έμ΄μ¦ μ›μ²λ“¤μ΄ μ“μ΄λ©° μ™„μ „ν κ²°μ •λ΅ μ μΈ ν‰κ°€λ¥Ό μ§€ν–¥ν•΄μ•Ό ν•©λ‹λ‹¤.\n- λ¨λ“  λλ¤ μ‹λ“λ¥Ό μ°Ύμ„ λ•κΉμ§€ λ¬΄μ‘μ„μ„± μ›μ²μ„ μ°Ύμ§€ λ§μ„Έμ”. λ¨λ“  λ¬΄μ‘μ„ μ‹λ“λ¥Ό μ°Ύμ€ ν›„μ—λ„ λ…Έμ΄μ¦λ” λ°μ΄ν„°λ‚ λ¶€μ‘μ©μ΄ μλ” μΌλ° ν•¨μμ—μ„ λ‚μ¬ μ μμµλ‹λ‹¤.\n- μ‹λ“λ¥Ό λ³€κ²½ν•κ³  κ²°κ³Όμ κΈ°λ³Έ λ¶„μ‚°μ„ κ²°μ •ν•μ„Έμ”. ν†µκ³„μ μΌλ΅ μ μλ―Έν•μ§€ μ•μ€ κ²°κ³Όμ— κΈ°λ°ν• κ²°μ •μ„ λ‚΄λ¦¬μ§€ λ§μ„Έμ”.\n\n# κ²°λ΅ \n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nμ„ ν…μ¤νΈλ¥Ό μΉκ·Όν• ν†¤μΌλ΅ ν•κµ­μ–΄λ΅ λ²μ—­ν•΄λ“λ¦΄κ²μ”:\n\nμ—°κµ¬ μ½”λ“μ— κ΄€ν• μ΄ κ²μ‹λ¬Όμ—μ„ μ΄ μ λ¨Έκ°€ λ‚μ™”μ–΄μ”:\n\nν›λ¥­ν• μ½”λ”© κΈ°μ΄κ°€ μ¤‘μ”ν• κ²ƒμ€ μ‚¬μ‹¤μ΄μ§€λ§, κ²°κµ­ μ¤‘μ”ν• κ²ƒμ€ νƒκµ¬μ™€ μ‹¤μ λ΅ μ μ©ν• μ ν’μ…λ‹λ‹¤. μ—°κµ¬μ— λ„λ¬΄ λ§μ€ μ ν’ μ†ν”„νΈμ›¨μ–΄λ¥Ό μ‚¬μ©ν•λ©΄ μƒλ΅μ΄ κ²ƒμ„ λ°κ²¬ν•λ” λ° ν•„μ”ν• μ‹κ°„μ„ λ‚­λΉ„ν•κ² λ©λ‹λ‹¤. λ€μ‹ , νƒκµ¬ κ³Όμ •μ„ λ¦μ¶”λ” μ”μ†λ¥Ό μ°Ύμ•„λ‚΄μ„Έμ”. λΉ λ¥Έ λΈλμΉ­, κ²°κ³Ό λ„μ¶ μ‹κ°„ λ° κΉ”λ”ν• λ¬΄μ†μ μ½”λ“μ— ν¬μν•μ—¬ μ—°κµ¬ κ²½λ΅λ¥Ό κ°€μ†ν™”ν•μ„Έμ”.\n\nμ½”λ“ μ¬μ‚¬μ©μ„ μ™„μ „ν λ¶€μ •ν•λ” κ²ƒμ€ μ–΄λ¦¬μ„μ€ μΌμΌ κ²ƒμ…λ‹λ‹¤. μ κ°€ λ§ν•κ³  μ‹¶μ€ κ±΄ μ½”λ“ μ¬μ‚¬μ©μ΄ κ· ν•μκ² μ΄λ¤„μ Έμ•Ό ν•λ‹¤λ” μ μ…λ‹λ‹¤. μ—°κµ¬μ—μ„λ” μΌνμ„± μ½”λ“μ λΉ„μ¨μ΄ μ ν’ κ°λ°λ³΄λ‹¤ λ” ν½λ‹λ‹¤. κ·Έλμ„ μ¬μ‚¬μ©μ— λ€ν• κ· ν•μ€ λ”μ± λ¬΄κ²κ°€ μ‹¤λ¦½λ‹λ‹¤. μ½”λ“ μ¬μ‚¬μ©μ ν•¨μ •μ— λ€ν• λ” λ§μ€ μ •λ³΄λ¥Ό μ•„λμ—μ„ ν™•μΈν•΄λ³΄μ„Έμ”.\n\nμ½μ–΄ μ£Όμ…”μ„ κ°μ‚¬ν•©λ‹λ‹¤! LinkedInμ΄λ‚ Twitterμ—μ„ μ €λ¥Ό λ§λ‚  μ μμµλ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## μλ£\n\nμ½”λ“ μ¬μ‚¬μ©μ— κ΄€ν• λ” λ§μ€ κ²μ‹λ¬Ό:\n\n- μ¬μ‚¬μ© κ°€λ¥ν• μ½”λ“: μΆ‹μ€ μ , λ‚μ μ , κ·Έλ¦¬κ³  λ»μƒκΈ΄ μ \n- λ°λ³µν•λ” κ²ƒμ΄ λ§λ” κ²½μ°\n- μ¬μ‚¬μ©μ μ¥λ‹¨μ μ΄ ν¬ν•¨λ κ· ν• StackExchange\n\nλ³µμ‚¬ λ° λ¶™μ—¬λ„£κΈ° μ‹¤μ² λ°©λ²•μ„ μ£Όμ¥ν•λ” λ” λ§μ€ κ²μ‹λ¬Ό:\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- λ³µμ‚¬ λ¶™μ—¬λ„£κΈ°κ°€ μ •λ§ λ¬Έμ μΌκΉμ”?\n- μ½”λ“λ¥Ό λ³µμ‚¬ λ¶™μ—¬λ„£κΈ°ν•΄μ•Ό ν•λ” λ•λ” μ–Έμ μΈκ°€μ”?\n- λ³µμ‚¬ λ¶™μ—¬λ„£κΈ° ν”„λ΅κ·Έλλ°μ μ¥λ‹¨μ \n- \"5λ…„ κ²½λ ¥μ μ‹λ‹μ–΄λ΅μ¨ μ €λ” λ‚΄κ°€ μ–΄λ–¤ μ½”λ“λ¥Ό λ³µμ‚¬ν•΄μ•Ό ν•λ”μ§€ μ•„λ” κ²ƒμ΄ λ‚΄ κΈ‰μ—¬μ μΌλ¶€μΌ κ²ƒ κ°™μ•„μ” lol\"\n\nμ›λ¬Έμ€ https://sinavski.comμ—μ„ ν™•μΈν•  μ μμµλ‹λ‹¤.\n","ogImage":{"url":"/assets/img/2024-07-09-Softwareforexploration_0.png"},"coverImage":"/TIL/assets/img/2024-07-09-Softwareforexploration_0.png","tag":["Tech"],"readingTime":13},{"title":"FastAPI Apppyμ—μ„ λ¨λ“λ¬ μ•„ν‚¤ν…μ²λ΅ μ „ν™ν•λ” λ°©λ²•","description":"","date":"2024-07-09 20:24","slug":"2024-07-09-FastAPIFromApppytoaModularArchitecture","content":"\n<img src=\"/TIL/assets/img/2024-07-09-FastAPIFromApppytoaModularArchitecture_0.png\" />\n\nν¨μ¤νΈAPIλ¥Ό μ‚¬μ©ν•μ—¬ λ°±μ—”λ“λ¥Ό κµ¬μ¶•ν•  λ•, μΌλ°μ μΌλ΅ ν•λ‚μ app.py νμΌλ΅ μ‹μ‘ν•λ” κ²ƒμ΄ ν”ν•©λ‹λ‹¤. μ΄ μ ‘κ·Ό λ°©μ‹μ€ μ‘μ€ ν”„λ΅μ νΈμ— μ ν•©ν•μ§€λ§, μ‘μ© ν”„λ΅κ·Έλ¨μ΄ μ„±μ¥ν•¨μ— λ”°λΌ μ μ§€ λ³΄μμ™€ ν™•μ¥μ΄ μ–΄λ ¤μ›μ§‘λ‹λ‹¤.\n\nμ΄ λΈ”λ΅κ·Έ ν¬μ¤νΈμ—μ„λ” Routers, Controllers, Services λ° Repositoriesλ΅ κµ¬μ„±λ κµ¬μ΅°ν™”λ μ•„ν‚¤ν…μ²λ¥Ό μ‚¬μ©ν•μ—¬ FastAPI μ• ν”λ¦¬μΌ€μ΄μ…μ„ λ¨λ†€λ¦¬μ‹ app.py νμΌμ—μ„ λ¦¬ν©ν† λ§ν•λ” λ°©λ²•μ„ μ‚΄ν΄λ³΄κ² μµλ‹λ‹¤.\n\n## μ†κ°: μ°λ¦¬μ ν•  μΌ API\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nλ¦¬ν©ν„°λ§ ν”„λ΅μ„Έμ¤μ— λ›°μ–΄λ“¤κΈ° μ „μ— ν•¨κ» μ‘μ—…ν•  APIλ¥Ό μ‚΄ν΄λ³΄κ² μµλ‹λ‹¤. λ‹¤μκ³Ό κ°™μ€ μ—”λ“ν¬μΈνΈλ¥Ό κ°€μ§„ κ°„λ‹¨ν• ν•  μΌ μ• ν”λ¦¬μΌ€μ΄μ…μ„ κµ¬μ¶• μ¤‘μ…λ‹λ‹¤.\n\n![API Image](/TIL/assets/img/2024-07-09-FastAPIFromApppytoaModularArchitecture_1.png)\n\nμ΄λ¬ν• APIλ¥Ό ν†µν•΄ μ‚¬μ©μλ” ν•  μΌ ν•­λ©μ— λ€ν• CRUD(Create, Read, Update, Delete) μ‘μ—…μ„ μν–‰ν•  μ μμµλ‹λ‹¤. κ° ν•  μΌ ν•­λ©μ€ λ‹¤μκ³Ό κ°™μ€ μ†μ„±μ„ κ°€μ§€κ² λ  κ²ƒμ…λ‹λ‹¤.\n\nμ΄μ  μ‘μ—… μ¤‘μΈ APIλ¥Ό μ΄ν•΄ν–μΌλ―€λ΅ λ‡ κ°€μ§€ μ „μ  μ΅°κ±΄ λ° μ΄λ¥Ό κµ¬ν„ν•λ” λ°©λ²•μ„ μ‚΄ν΄λ³΄κ² μµλ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## μ¤€λΉ„ μ‚¬ν•­\n\nμ²μ μ ‘κ·Όκ³Ό λ¦¬ν©ν† λ§μ„ μ‹μ‘ν•κΈ° μ „μ— FastAPI ν”„λ΅μ νΈλ¥Ό μ„¤μ •ν•΄ λ΄…μ‹λ‹¤.\n\n```js\npython3 -m venv venv\nsource env/bin/activate  # Windowsμ—μ„λ” `env\\Scripts\\activate\n```\n\n```js\nfastapi;\nuvicorn;\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```bash\npip3 install -r requirements.txt\n```\n\n## μ΄κΈ° μ ‘κ·Ό λ°©μ‹: λ¨λ“  κ²ƒμ„ app.pyμ—μ„ μ²λ¦¬\n\nκ°„λ‹¨ν• Todo APIλ¥Ό μ‹μ‘ν•΄λ΄…μ‹λ‹¤. μ΄ APIλ” λ£¨νΈ λ λ²¨μ app.pyμ—μ„ μ™„μ „ν κµ¬ν„λμ–΄ μμµλ‹λ‹¤.\n\n```python\nfrom fastapi import FastAPI, HTTPException\nfrom pydantic import BaseModel\n\napp = FastAPI()\n\n# μƒλ΅μ΄ todoλ¥Ό μƒμ„±ν•κΈ° μ„ν• Pydantic λ¨λΈ\nclass TodoCreate(BaseModel):\n    title: str\n\n# todo ν•­λ©μ„ μ„ν• Pydantic λ¨λΈ. TodoCreateλ¥Ό μƒμ†λ°›κ³  id λ° completed ν•„λ“λ¥Ό μ¶”κ°€ν•©λ‹λ‹¤.\nclass Todo(TodoCreate):\n    id: int\n    completed: bool = False\n\n# λ°μ΄ν„°λ² μ΄μ¤λ¥Ό λ¨λ°©ν• todosμ μΈλ©”λ¨λ¦¬ μ €μ¥μ†\ntodos = []\n\n# μƒλ΅μ΄ todoλ¥Ό μƒμ„±ν•λ” μ—”λ“ν¬μΈνΈ\n@app.post(\"/todos\", response_model=Todo)\ndef create_todo(todo: TodoCreate):\n    # idλ¥Ό μ¦κ°€μ‹ν‚¨ μƒλ΅μ΄ todo ν•­λ©μ„ μƒμ„±ν•©λ‹λ‹¤.\n    new_todo = Todo(id=len(todos) + 1, **todo.model_dump())\n    todos.append(new_todo)  # μƒλ΅μ΄ todoλ¥Ό λ©λ΅μ— μ¶”κ°€ν•©λ‹λ‹¤.\n    return new_todo  # μƒμ„±λ todoλ¥Ό μ‘λ‹µμΌλ΅ λ°ν™ν•©λ‹λ‹¤.\n\n# λ¨λ“  todoλ¥Ό κ°€μ Έμ¤λ” μ—”λ“ν¬μΈνΈ\n@app.get(\"/todos\", response_model=list[Todo])\ndef get_todos():\n    return todos  # todo λ©λ΅μ„ μ‘λ‹µμΌλ΅ λ°ν™ν•©λ‹λ‹¤.\n\n# νΉμ • idμ todoλ¥Ό κ°€μ Έμ¤λ” μ—”λ“ν¬μΈνΈ\n@app.get(\"/todos/{todo_id}\", response_model=Todo)\ndef get_todo(todo_id: int):\n    for todo in todos:\n        if todo.id == todo_id:\n            return todo  # μ°Ύμ€ κ²½μ° ν•΄λ‹Ή todoλ¥Ό λ°ν™ν•©λ‹λ‹¤.\n    # ν•΄λ‹Ή todoλ¥Ό μ°Ύμ„ μ μ—†λ” κ²½μ° 404 μƒνƒ μ½”λ“μ™€ λ©”μ‹μ§€λ¥Ό ν¬ν•¨ν• HTTPExceptionμ„ λ°μƒμ‹ν‚µλ‹λ‹¤.\n    raise HTTPException(status_code=404, detail=\"Todoκ°€ μ—†μµλ‹λ‹¤\")\n\n# idμ— λ”°λΌ todoλ¥Ό μ—…λ°μ΄νΈν•λ” μ—”λ“ν¬μΈνΈ\n@app.put(\"/todos/{todo_id}\", response_model=Todo)\ndef update_todo(todo_id: int, updated_todo: TodoCreate):\n    for todo in todos:\n        if todo.id == todo_id:\n            todo.title = updated_todo.title  # todoμ μ λ©μ„ μ—…λ°μ΄νΈν•©λ‹λ‹¤.\n            return todo  # μ—…λ°μ΄νΈλ todoλ¥Ό λ°ν™ν•©λ‹λ‹¤.\n    # ν•΄λ‹Ή todoλ¥Ό μ°Ύμ„ μ μ—†λ” κ²½μ° 404 μƒνƒ μ½”λ“μ™€ λ©”μ‹μ§€λ¥Ό ν¬ν•¨ν• HTTPExceptionμ„ λ°μƒμ‹ν‚µλ‹λ‹¤.\n    raise HTTPException(status_code=404, detail=\"Todoκ°€ μ—†μµλ‹λ‹¤\")\n\n# idμ— λ”°λΌ todoλ¥Ό μ‚­μ ν•λ” μ—”λ“ν¬μΈνΈ\n@app.delete(\"/todos/{todo_id}\")\ndef delete_todo(todo_id: int):\n    for index, todo in enumerate(todos):\n        if todo.id == todo_id:\n            del todos[index]  # λ©λ΅μ—μ„ todoλ¥Ό μ‚­μ ν•©λ‹λ‹¤.\n            return {\"message\": \"Todoκ°€ μ„±κ³µμ μΌλ΅ μ‚­μ λμ—μµλ‹λ‹¤\"}  # μ„±κ³µ λ©”μ‹μ§€λ¥Ό λ°ν™ν•©λ‹λ‹¤.\n    # ν•΄λ‹Ή todoλ¥Ό μ°Ύμ„ μ μ—†λ” κ²½μ° 404 μƒνƒ μ½”λ“μ™€ λ©”μ‹μ§€λ¥Ό ν¬ν•¨ν• HTTPExceptionμ„ λ°μƒμ‹ν‚µλ‹λ‹¤.\n    raise HTTPException(status_code=404, detail=\"Todoκ°€ μ—†μµλ‹λ‹¤\")\n\n# Uvicorn μ„λ²„λ¥Ό μ‚¬μ©ν•μ—¬ μ• ν”λ¦¬μΌ€μ΄μ…μ„ μ‹¤ν–‰ν•λ” μ£Όμ” λΈ”λ΅\nif __name__ == \"__main__\":\n    import uvicorn\n    uvicorn.run(\"app:app\", port=3000, host=\"0.0.0.0\", reload=True)\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nAPIλ¥Ό μ‹μ‘ν•λ ¤λ©΄ python3 app.py λ…λ Ήμ–΄λ¥Ό μ‚¬μ©ν•΄μ”\n\nμ...\n\nμ΄ λ°©λ²•μ€ μ‘μ€ μ• ν”λ¦¬μΌ€μ΄μ…μ—λ” μ‘λ™ν•μ§€λ§ λ‡ κ°€μ§€ λ‹¨μ μ΄ μμ–΄μ”:\n\n- λ¨λ“  λΌμ°ν…, λΉ„μ¦λ‹μ¤ λ΅μ§ λ° λ°μ΄ν„° μ €μ¥μ†κ°€ λ‹¨μΌ νμΌμ— νΌν•©λμ–΄ μμ–΄μ”.\n- μ• ν”λ¦¬μΌ€μ΄μ…μ΄ μ„±μ¥ν•¨μ— λ”°λΌ μ μ§€ λ° ν™•μ¥ν•κΈ° μ–΄λ ¤μ›μ Έμ”.\n- κ°λ³„ κµ¬μ„± μ”μ†λ¥Ό ν…μ¤νΈν•λ” κ²ƒμ΄ μ–΄λ ¤μ›μ Έμ”.\n- μ½”λ“μ μ¬μ‚¬μ©μ„±μ΄ μ ν•λμ–΄μ”\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n![FastAPIFromApppytoaModularArchitecture](/TIL/assets/img/2024-07-09-FastAPIFromApppytoaModularArchitecture_2.png)\n\nRefactoring journey starts now...\n\n## Routers Introduction\n\nTo structure our application effectively, the first step is to introduce routers.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nμƒλ΅μ΄ ν΄λ”λ¥Ό λ§λ“¤μ–΄ routersλΌλ” μ΄λ¦„μ„ λ¶™μ΄κ³  todo_router.pyλΌλ” νμΌμ„ μ¶”κ°€ν•΄μ£Όμ„Έμ”.\n\n```python\nfrom fastapi import APIRouter\n\nrouter = APIRouter()\n\n@router.post(\"/todos\")\ndef create_todo():\n    pass\n\n@router.get(\"/todos\")\ndef get_todos():\n    pass\n\n@router.get(\"/todos/{todo_id}\")\ndef get_todo(todo_id: int):\n    pass\n\n@router.put(\"/todos/{todo_id}\")\ndef update_todo(todo_id: int):\n    pass\n\n@router.delete(\"/todos/{todo_id}\")\ndef delete_todo(todo_id: int):\n    pass\n```\n\nμ΄μ  app.pyλ¥Ό μ—…λ°μ΄νΈν•μ—¬ λΌμ°ν„°λ¥Ό μ‚¬μ©ν•μ„Έμ”.\n\n```python\nfrom fastapi import FastAPI\nfrom routers import todo_router\n\napp = FastAPI()\n\napp.include_router(todo_router.router)\n\nif __name__ == \"__main__\":\n    import uvicorn\n    uvicorn.run(\"app:app\", port=3000, host=\"0.0.0.0\", reload=True)\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nλΌμ°ν„°λ¥Ό λ„μ…ν•¨μΌλ΅μ¨ μ‘μ—… κ΄€λ ¨ λΌμ°νΈλ¥Ό λ©”μΈ app.py νμΌμ—μ„ λ¶„λ¦¬ν•μ—¬ μ½”λ“λ¥Ό λ” κΉ”λ”ν•κ³  μ§‘μ¤‘μ μΌλ΅ μ μ§€ν•μ€μµλ‹λ‹¤.\n\n## μ»¨νΈλ΅¤λ¬ μ¶”κ°€\n\nλ‹¤μμΌλ΅, μ”μ²­ μ²λ¦¬ λ΅μ§μ„ μ²λ¦¬ν•κΈ° μ„ν• μ»¨νΈλ΅¤λ¬λ¥Ό λ„μ…ν•  μμ •μ…λ‹λ‹¤.\n\ncontrollersλΌλ” μƒ λ””λ ‰ν† λ¦¬λ¥Ό μƒμ„±ν•κ³  todo_controller.pyλΌλ” νμΌμ„ μ¶”κ°€ν•μ„Έμ”.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\nfrom fastapi import HTTPException\nfrom pydantic import BaseModel\n\nclass TodoCreate(BaseModel):\n    title: str\n\nclass Todo(TodoCreate):\n    id: int\n    completed: bool = False\n\nclass TodoController:\n    def __init__(self):\n        self.todos = []\n\n    def create_todo(self, todo: TodoCreate):\n        new_todo = Todo(id=len(self.todos) + 1, **todo.model_dump())\n        self.todos.append(new_todo)\n        return new_todo\n\n    def get_todos(self):\n        return self.todos\n\n    def get_todo(self, todo_id: int):\n        for todo in self.todos:\n            if todo.id == todo_id:\n                return todo\n        raise HTTPException(status_code=404, detail=\"Todoλ¥Ό μ°Ύμ„ μ μ—†μµλ‹λ‹¤.\")\n\n    def update_todo(self, todo_id: int, updated_todo: TodoCreate):\n        for todo in self.todos:\n            if todo.id == todo_id:\n                todo.title = updated_todo.title\n                return todo\n        raise HTTPException(status_code=404, detail=\"Todoλ¥Ό μ°Ύμ„ μ μ—†μµλ‹λ‹¤.\")\n\n    def delete_todo(self, todo_id: int):\n        for index, todo in enumerate(self.todos):\n            if todo.id == todo_id:\n                del self.todos[index]\n                return {\"message\": \"Todoκ°€ μ„±κ³µμ μΌλ΅ μ‚­μ λμ—μµλ‹λ‹¤.\"}\n        raise HTTPException(status_code=404, detail=\"Todoλ¥Ό μ°Ύμ„ μ μ—†μµλ‹λ‹¤.\")\n```\n\ntodo_router.py νμΌμ„ μ—…λ°μ΄νΈν•μ—¬ μ»¨νΈλ΅¤λ¬λ¥Ό μ‚¬μ©ν•μ‹­μ‹μ¤.\n\n```js\nfrom fastapi import APIRouter\nfrom controllers.todo_controller import TodoController, TodoCreate, Todo\n\nrouter = APIRouter()\ntodo_controller = TodoController()\n\n@router.post(\"/todos\", response_model=Todo)\ndef create_todo(todo: TodoCreate):\n    return todo_controller.create_todo(todo)\n\n@router.get(\"/todos\", response_model=list[Todo])\ndef get_todos():\n    return todo_controller.get_todos()\n\n@router.get(\"/todos/{todo_id}\", response_model=Todo)\ndef get_todo(todo_id: int):\n    return todo_controller.get_todo(todo_id)\n\n@router.put(\"/todos/{todo_id}\", response_model=Todo)\ndef update_todo(todo_id: int, updated_todo: TodoCreate):\n    return todo_controller.update_todo(todo_id, updated_todo)\n\n@router.delete(\"/todos/{todo_id}\")\ndef delete_todo(todo_id: int):\n    return todo_controller.delete_todo(todo_id)\n```\n\n## μ„λΉ„μ¤ λ μ΄μ–΄ κµ¬ν„\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nμ΄μ  λΉ„μ¦λ‹μ¤ λ΅μ§μ„ μ²λ¦¬ν•λ” μ„λΉ„μ¤ λ μ΄μ–΄λ¥Ό μ†κ°ν•΄ λ΄…μ‹λ‹¤.\n\nservices λΌλ” μƒ λ””λ ‰ν† λ¦¬λ¥Ό λ§λ“¤κ³  todo_service.py λΌλ” νμΌμ„ μ¶”κ°€ν•΄ μ£Όμ„Έμ”.\n\n```js\nfrom pydantic import BaseModel\n\nclass TodoCreate(BaseModel):\n    title: str\n\nclass Todo(TodoCreate):\n    id: int\n    completed: bool = False\n\nclass TodoService:\n    def __init__(self):\n        self.todos = []\n\n    def create_todo(self, todo: TodoCreate) -> Todo:\n        new_todo = Todo(id=len(self.todos) + 1, **todo.model_dump())\n        self.todos.append(new_todo)\n        return new_todo\n\n    def get_todos(self) -> list[Todo]:\n        return self.todos\n\n    def get_todo(self, todo_id: int) -> Todo | None:\n        for todo in self.todos:\n            if todo.id == todo_id:\n                return todo\n        return None\n\n    def update_todo(self, todo_id: int, updated_todo: TodoCreate) -> Todo | None:\n        for todo in self.todos:\n            if todo.id == todo_id:\n                todo.title = updated_todo.title\n                return todo\n        return None\n\n    def delete_todo(self, todo_id: int) -> bool:\n        for index, todo in enumerate(self.todos):\n            if todo.id == todo_id:\n                del self.todos[index]\n                return True\n        return False\n```\n\ntodo_controller.pyλ¥Ό μ—…λ°μ΄νΈν•μ—¬ μ„λΉ„μ¤λ¥Ό μ‚¬μ©ν•λ„λ΅ν•©λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\nfrom fastapi import HTTPException\nfrom services.todo_service import TodoService, TodoCreate, Todo\n\nclass TodoController:\n    def __init__(self):\n        self.todo_service = TodoService()\n\n    def create_todo(self, todo: TodoCreate):\n        return self.todo_service.create_todo(todo)\n\n    def get_todos(self):\n        return self.todo_service.get_todos()\n\n    def get_todo(self, todo_id: int):\n        todo = self.todo_service.get_todo(todo_id)\n        if todo is None:\n            raise HTTPException(status_code=404, detail=\"ν•  μΌμ„ μ°Ύμ„ μ μ—†μµλ‹λ‹¤\")\n        return todo\n\n    def update_todo(self, todo_id: int, updated_todo: TodoCreate):\n        todo = self.todo_service.update_todo(todo_id, updated_todo)\n        if todo is None:\n            raise HTTPException(status_code=404, detail=\"ν•  μΌμ„ μ°Ύμ„ μ μ—†μµλ‹λ‹¤\")\n        return todo\n\n    def delete_todo(self, todo_id: int):\n        if self.todo_service.delete_todo(todo_id):\n            return {\"message\": \"ν•  μΌμ΄ μ„±κ³µμ μΌλ΅ μ‚­μ λμ—μµλ‹λ‹¤\"}\n        raise HTTPException(status_code=404, detail=\"ν•  μΌμ„ μ°Ύμ„ μ μ—†μµλ‹λ‹¤\")\n```\n\n## λ ν¬μ§€ν„°λ¦¬ λ μ΄μ–΄ μƒμ„±\n\nλ§μ§€λ§‰μΌλ΅ λ°μ΄ν„° μ§€μ†μ„±μ„ μ²λ¦¬ν•λ” λ ν¬μ§€ν„°λ¦¬ λ μ΄μ–΄λ¥Ό μ†κ°ν•©λ‹λ‹¤.\n\nrepositoriesλΌλ” μƒ λ””λ ‰ν† λ¦¬λ¥Ό λ§λ“¤κ³  todo_repository.pyλΌλ” νμΌμ„ μ¶”κ°€ν•μ„Έμ”.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```python\nfrom pydantic import BaseModel\n\nclass TodoCreate(BaseModel):\n    title: str\n\nclass Todo(TodoCreate):\n    id: int\n    completed: bool = False\n\nclass TodoRepository:\n    def __init__(self):\n        self.todos = []\n\n    def create_todo(self, todo: TodoCreate) -> Todo:\n        new_todo = Todo(id=len(self.todos) + 1, **todo.model_dump())\n        self.todos.append(new_todo)\n        return new_todo\n\n    def get_todos(self) -> list[Todo]:\n        return self.todos\n\n    def get_todo(self, todo_id: int) -> Todo | None:\n        for todo in self.todos:\n            if todo.id == todo_id:\n                return todo\n        return None\n\n    def update_todo(self, todo_id: int, updated_todo: TodoCreate) -> Todo | None:\n        for todo in self.todos:\n            if todo.id == todo_id:\n                todo.title = updated_todo.title\n                return todo\n        return None\n\n    def delete_todo(self, todo_id: int) -> bool:\n        for index, todo in enumerate(self.todos):\n            if todo.id == todo_id:\n                del self.todos[index]\n                return True\n        return False\n```\n\nUpdate `todo_service.py` to use the repository,\n\n```python\nfrom repositories.todo_repository import TodoRepository, TodoCreate, Todo\n\nclass TodoService:\n    def __init__(self):\n        self.todo_repository = TodoRepository()\n\n    def create_todo(self, todo: TodoCreate) -> Todo:\n        return self.todo_repository.create_todo(todo)\n\n    def get_todos(self) -> list[Todo]:\n        return self.todo_repository.get_todos()\n\n    def get_todo(self, todo_id: int) -> Todo | None:\n        return self.todo_repository.get_todo(todo_id)\n\n    def update_todo(self, todo_id: int, updated_todo: TodoCreate) -> Todo | None:\n        return self.todo_repository.update_todo(todo_id, updated_todo)\n\n    def delete_todo(self, todo_id: int) -> bool:\n        return self.todo_repository.delete_todo(todo_id)\n```\n\nμ°λ¦¬μ λ¦¬ν©ν„°λ§ μ—¬μ •μ€ μ—¬κΈ°μ„ λλ‚©λ‹λ‹¤β€¦\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nνμ΄μ¬ μ•±.pyμ—μ„ κµ¬μ΅°ν™”λ λ¨λ“ μ•„ν‚¤ν…μ²λ΅ μ΄μ–΄μ§€λ” μ΄ μ—¬μ •μ—μ„, μ°λ¦¬λ” Todo APIλ¥Ό λ” ν™•μ¥ κ°€λ¥ν•κ³  μ μ§€ κ΄€λ¦¬ κ°€λ¥ν• μ• ν”λ¦¬μΌ€μ΄μ…μΌλ΅ λ³€ν•μ‹μΌ°μµλ‹λ‹¤. λΌμ°ν„°, μ»¨νΈλ΅¤λ¬, μ„λΉ„μ¤ λ° λ¦¬ν¬μ§€ν† λ¦¬λ¥Ό λ„μ…ν•¨μΌλ΅μ¨, μ°λ¦¬λ” κ΄€μ‹¬μ‚¬μ λ…ν™•ν• λ¶„λ¦¬μ™€ ν”„λ΅μ νΈ ν™•μ¥μ— λ”°λ¥Έ λ³µμ΅μ„± κ΄€λ¦¬ λ¥λ ¥μ„ ν–¥μƒμ‹μΌ°μµλ‹λ‹¤.\n\n## λ¨λ“μ‹ μ•„ν‚¤ν…μ²μ μ£Όμ” μ΄μ :\n\n- ν–¥μƒλ μ μ§€ λ³΄μμ„±: κ° μ»΄ν¬λ„νΈ - λΌμ°ν„°, μ»¨νΈλ΅¤λ¬, μ„λΉ„μ¤ λ° λ¦¬ν¬μ§€ν† λ¦¬ -λ” μ΄μ  νΉμ • μ±…μ„μ„ μ²λ¦¬ν•μ—¬ λ³€κ²½ μ‹ μλ„μΉ μ•μ€ λ¶€μ‘μ©μ μ„ν—μ„ μ¤„μ…λ‹λ‹¤.\n- ν–¥μƒλ ν…μ¤νΈ μ©μ΄μ„±: κ° λ μ΄μ–΄κ°€ λ…ν™•ν•κ² κµ¬λ¶„λμ–΄ μ λ‹› ν…μ¤νΈκ°€ λ³΄λ‹¤ κ°„νΈν•΄μ§‘λ‹λ‹¤. μ°λ¦¬λ” κ° μ»΄ν¬λ„νΈλ¥Ό λ…λ¦½μ μΌλ΅ ν…μ¤νΈν•μ—¬ μ‘μ© ν”„λ΅κ·Έλ¨ μ „μ²΄μ—μ„ κ²¬κ³ ν•¨κ³Ό μ‹ λΆ°μ„±μ„ λ³΄μ¥ν•  μ μμµλ‹λ‹¤.\n- ν™•μ¥μ„±κ³Ό μ μ—°μ„±: λ¨λ“μ‹ λ””μμΈμ€ ν™•μ¥μ„ μ©μ΄ν•κ² ν•©λ‹λ‹¤. μƒλ΅μ΄ κΈ°λ¥μ„ μ¶”κ°€ν•κ±°λ‚ κΈ°μ΅΄ κΈ°λ¥μ„ μμ •ν•  λ• μ „μ²΄ μ½”λ“λ² μ΄μ¤λ¥Ό μ² μ €ν μ¬μ‘μ—…ν•μ§€ μ•κ³ λ„ μν–‰ν•  μ μμµλ‹λ‹¤. μ΄ μ μ—°μ„±μ€ λ°μ΄ν„°λ² μ΄μ¤ μ „ν™μ΄λ‚ λΉ„μ¦λ‹μ¤ λ΅μ§ μ—…λ°μ΄νΈμ™€ κ°™μ€ μ‘μ—…μ—λ„ μ—°κ²°λ©λ‹λ‹¤.\n\nμ°λ¦¬μ λ¦¬ν¬μ§€ν† λ¦¬λ” μ΄μ  λ‹¤μκ³Ό κ°™μ΄ λ³΄μ…λ‹λ‹¤...\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n`<img src=\"/TIL/assets/img/2024-07-09-FastAPIFromApppytoaModularArchitecture_3.png\" />`\n\nFastAPI μ• ν”λ¦¬μΌ€μ΄μ…μ„ λ¨λ“μ‹ μ•„ν‚¤ν…μ²λ΅ λ¦¬ν©ν† λ§ν•¨μΌλ΅μ¨, μ§€μ†μ μΈ μ„±μ¥κ³Ό μ μ—°μ„±μ„ μ„ν• κ²¬κ³ ν• κΈ°λ°μ„ λ§λ ¨ν–μµλ‹λ‹¤. μ΄ μ ‘κ·Ό λ°©μ‹μ€ ν„μ¬ κ°λ° λ…Έλ ¥μ„ ν–¥μƒμ‹ν‚¬ λΏλ§ μ•„λ‹λΌ μ•μΌλ΅μ λ„μ „κ³Ό κΈ°νμ— λ€λΉ„ν•λ” λ° λ„μ›€μ΄ λ©λ‹λ‹¤.\n\nμ•λ…•ν κ°€μ„Έμ”!!\n","ogImage":{"url":"/assets/img/2024-07-09-FastAPIFromApppytoaModularArchitecture_0.png"},"coverImage":"/TIL/assets/img/2024-07-09-FastAPIFromApppytoaModularArchitecture_0.png","tag":["Tech"],"readingTime":16},{"title":"AMREx μ°¨μ„Έλ€ GPT-4 μ—°μƒ λ©”λ¨λ¦¬ μ–΄μ‹μ¤ν„΄νΈ κ°λ° λ°©λ²• μ†κ°","description":"","date":"2024-07-09 20:21","slug":"2024-07-09-AMRExCraftingNext-GenerationGPT-4AssociativeMemoryAssistants","content":"\n## AI κ°λ°\n\nμΈκ³µ μ§€λ¥ λ³΄μ΅° κΈ°λ¥λ“¤μ€ μΌμƒ μƒν™μ—μ„ ν•„μμ μΈ κµ¬μ„± μ”μ†κ°€ λμ–΄, λ£¨ν‹΄ μ—…λ¬΄λ¶€ν„° λ³µμ΅ν• μμ‚¬ κ²°μ • μ μ°¨κΉμ§€ λ‹¤μ–‘ν• μΌμ— λ„μ›€μ„ μ£Όκ³  μμµλ‹λ‹¤. μ΄λ¬ν• λ³΄μ΅° κΈ°λ¥λ“¤μ€ GPT(Generative Pre-trained Transformer)μ™€ κ°™μ€ μ„ μ§„ κΈ°μ μ— μν•΄ κµ¬λ™λλ©°, μμ—° μ–Έμ–΄ μ²λ¦¬(NLP)μ μµμ „μ„ μ— μμ–΄ μΈκ°„ μ–Έμ–΄λ¥Ό λ³΄λ‹¤ μμ—°μ¤λ½κ³  μ§κ΄€μ μΌλ΅ μ΄ν•΄ν•κ³  μ‘λ‹µν•  μ μλ” λ¥λ ¥μ„ κ°–μ¶”κ³  μμµλ‹λ‹¤. κ·Έλ¬λ‚ μΈκ°„κ³Ό λ³΄μ΅° κΈ°λ¥λ“¤ μ‚¬μ΄, κ·Έλ¦¬κ³  λ³΄μ΅° κΈ°λ¥λ“¤λΌλ¦¬μ μƒνΈμ‘μ© ν¨μ¨μ„±μ„ λ„μ „ν•λ” μ£Όμ” μΈ΅λ©΄μ€ μ‹κ°„μ  λ§¥λ½κ³Ό κΈ°μ–µμ— λ€ν• λ³΄μ΅° κΈ°λ¥λ“¤μ μ΄ν•΄λ ¥μ…λ‹λ‹¤.\n\nμ‹κ°„ μΈμ‹μ€ AI λ³΄μ΅° κΈ°λ¥λ“¤μ΄ μ‹κ°„μ„ μ΄κ³Όν•λ” λ€ν™”λ¥Ό μ²λ¦¬ν•κ³  μ°Έμ—¬ν•  λΏ μ•„λ‹λΌ, μƒνƒμ„±μ— λ€ν•΄μ„λ„, κ³µμ λ λ§¥λ½μ—μ„ μ„λ΅ μΌκ΄€λκ² μƒνΈμ‘μ©ν•  μ μλ„λ΅ ν•„μμ μ…λ‹λ‹¤. μ§€λ‚ μƒνΈμ‘μ©μ„ κΈ°μ–µν•κ³ , μ΄μ „ λ€ν™”λ¥Ό μ •ν™•ν•κ² μ°Έμ΅°ν•λ©°, μ΄λ¬ν• μ—­μ‚¬μ— κΈ°λ°ν•μ—¬ λ―Έλ ν•„μ”μ„±μ„ μμΈ΅ν•λ” λ¥λ ¥μ΄ AI λ³΄μ΅° κΈ°λ¥λ“¤μ„ μ μ©ν• λ„κµ¬μ—μ„ ν•„μμ μΈ λ™λ°μμ™€ ν‘λ ¥μλ΅ λ³€ν™”μ‹ν‚¬ μ μλ” κ²ƒμ…λ‹λ‹¤.\n\nλ³Έ κΈ°μ‚¬μ—μ„λ” AI λ³΄μ΅° κΈ°λ¥λ“¤μ΄ μ‹κ°„κ³Ό μ‹κ°„ μƒνƒλ¥Ό μΌκ΄€λκ³  λ§¥λ½μ μΌλ΅ μ΄ν•΄ν•λ” λ° κ²λ” ν„μ¬μ ν•κ³„λ¥Ό νƒκµ¬ν•©λ‹λ‹¤. μ°λ¦¬λ” μ‹κ°„κ³Ό κΈ°μ–µ λ¥λ ¥μ„ ν–¥μƒμ‹ν‚¤κΈ° μ„ν•΄ νΉλ³„ν λ””μμΈλ AMREx(Associative Memory Recall and Extension)λΌλ” νμ‹ μ μΈ ν”„λ μ„μ›ν¬λ¥Ό μ†κ°ν•©λ‹λ‹¤. AMRExμ κµ¬μ΅°μ™€ κΈ°λ¥μ„ κ²€ν† ν•¨μΌλ΅μ¨, μ°λ¦¬λ” AI λ³΄μ΅° κΈ°λ¥λ“¤μ΄ μ°λ¦¬μ™€ μ„λ΅κ°€ μΌμƒ μƒν™κ³Ό λ€ν™”μ μ—°μ†μ„±μ— ν†µν•©λκ³  μΈμ‹ν•λ” λ°©μ‹μΌλ΅ μƒνΈμ‘μ©ν•  μ μλ” λ―Έλλ΅ λ‚μ•„κ°€λ” κΈΈμ„ λ„μ „ν•κ³  λ°νλ ¤κ³  ν•©λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nAMRExλ” μƒλ¬Όν•™μ  μΈµν™”λ κΈ°μ–µ κ°λ…μ—μ„ μκ°μ„ λ°›μ€ ν¨μ¨μ μΈ ν† ν° 3μΈµ μ—°μƒ λ©”λ¨λ¦¬ ν”„λ μ„μ›ν¬μ…λ‹λ‹¤. μ΄ ν”„λ μ„μ›ν¬λ” GPT4 μ–΄μ‹μ¤ν„΄νΈμ μµμ‹  λ² νƒ€ λ²„μ „μ μ—°μƒ λ©”λ¨λ¦¬ νμ κΈ°λ¥μ„ κ°•ν™”ν•κ³  ν™•μ¥ν•μ—¬ μ΄ ν•κ³„λ¥Ό ν•΄κ²°ν•©λ‹λ‹¤. μ΄λ” λ¬Έλ§¥ μ΄ν•΄λ¥Ό ν†µν• λ™μ  λ¶„λ¥μ™€ κ²°ν•©λ©λ‹λ‹¤. ν•µμ‹¬μ—λ” λ‘ κ°€μ§€ μ£Όμ” κΈ°μ μ΄ ν™μ©λ©λ‹λ‹¤:\n\n- λ¦° 3μΈµ μλ¦½ν™”λ, μ§€λ¥μ μ΄κ³  κ³„μΈµμ μΈ μ—°μƒ λ©”λ¨λ¦¬ μ•„ν‚¤ν…μ²\n- λ©”λ¨λ¦¬ νμ λ™μ  WYNWYG λ¶„λ¥, λ¨λΈμ—κ² ν•„μ”ν• κ²ƒλ§ κ°€μ Έμ¤κ² ν•¨\n- νμ‹ μ μΈ λ² νƒ€ GPT4 μ–΄μ‹μ¤ν„΄νΈ κΈ°μ (OpenAIμ APIλ¥Ό ν†µν•΄)\n\nμ΄ λ¬Έμ„μ λ‚΄μ© μ†μ—λ” Python μ½”λ“λ΅ μ‘μ„±λ μ›μ‹ν• ν”„λ΅ν†  νƒ€μ…κ³Ό μ–΄μ‹μ¤ν„΄νΈ λ…λ Ήμ–΄ μ§‘ν•©μ΄ μ²¨λ¶€λ©λ‹λ‹¤. AMRExμ μ‹¤μ©μ  μ μ©μ„ νƒκµ¬ν•κ³  μ‹¶μ€ λ…μλ“¤μ„ μ„ν•΄ μ²¨λ¶€λ μ›μ‹ν• ν”„λ΅ν†  νƒ€μ…μ€ ν„μ¥ κ²½ν—μ„ μ κ³µν•©λ‹λ‹¤. μ΄ ν”„λ΅ν†  νƒ€μ…μ„ ν™μ©ν•λ©΄ λ…μλ“¤μ€ AMRExμ μ›λ¦¬λ¥Ό μ§μ ‘ μ²΄ν—ν•λ©°, μΈµν™”λ λ©”λ¨λ¦¬ μ²λ¦¬λ¶€ν„° λ™μ  λ…λ Ήμ–΄ μ—”μ§€λ‹μ–΄λ§κΉμ§€μ μ‘μ—…μ›λ¦¬ λ° μ μ¬μ μΈ μ‘μ© ν”„λ΅κ·Έλ¨μ— λ€ν• κ°€μΉ μλ” ν†µμ°°λ ¥μ„ μ–»μ„ μ μμµλ‹λ‹¤. ν”„λ μ„μ›ν¬λ¥Ό λ” μμ„Έν μ΄ν•΄ν•λ ¤λ©΄ λ¨Όμ € μ–΄μ‹μ¤ν„΄νΈμ λ…λ Ήμ–΄ μ§‘ν•©μ„ κ²€ν† ν•΄λ³΄λ” κ²ƒμ„ κ¶μ¥ν•©λ‹λ‹¤. μ΄λ¥Ό ν†µν•΄ Python μ½”λ“μ— λ›°μ–΄λ“¤κΈ° μ „μ— κ°λ…μ  κΈ°λ°μ„ λ” μ μ΄ν•΄ν•  μ μμµλ‹λ‹¤.\n\nπ“ ν”„λ΅ν†  νƒ€μ… νμΌμ€ GitHub μ €μ¥μ† AMRExμ—μ„ μ κ³µλ©λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nμ¤‘μ”ν• μ μ€ μ μ‹λ μ›μ‹ ν”„λ΅ν†  νƒ€μ…μ—λ„ λ¶κµ¬ν•κ³  AMRExλ” ν”„λ΅κ·Έλ¨μ΄λ‚ μ½”λ“κ°€ μ•„λ‹λΌ, ν¨κ³Όμ μ΄κ³  ν¨μ¨μ μΌλ΅ μ—°κ΄€ κΈ°μ–µ λ¥λ ¥μ„ μ¦λ€ν•κΈ° μ„ν•΄ μ μ•λ κΈ°μ μ  ν”„λ μ„μ›ν¬λΌλ” μ μ„ κ°•μ΅°ν•κ³ μ ν•©λ‹λ‹¤. μ‹¤μ λ΅ AMRExλ” νΉμ • μƒνƒ μΈμ‹κ³Ό ν•¨κ» λ©”λ¨λ¦¬ μ–΄μ‹μ¤ν„΄νΈλ¥Ό κµ¬μ¶•ν•λ” λ° λ„μ›€μ΄ λλ” μ‹μ‘μ μ΄μ μ μ—°ν• μ§„ν–‰ μ¤‘μΈ ν”„λ μ„μ›ν¬μ…λ‹λ‹¤. κ·Έλ¬λ‚ κ·Όλ³Έμ μ΄λ©΄μ„λ„ κ΄‘λ²”μ„ν• λΉ„μ „μ€ μ•μΌλ΅ λ” λ³µμ΅ν• AI μ–΄μ‹μ¤ν„΄νΈ κµ¬μ΅°λ¥Ό κµ¬ν„ν•κΈ° μ„ν•΄ λ‹¤λ¥Έ μ ν•μ μ–΄μ‹μ¤ν„΄νΈμ™€ κ²°ν•©ν•  μ μλ” λ¨λ“μ‹ λ©”λ¨λ¦¬ μ–΄μ‹μ¤ν„΄νΈλ¥Ό κµ¬μ¶•ν•λ” κ²ƒμ…λ‹λ‹¤.\n\n## AMRExμ κΈ°λ³Έ μ•„ν‚¤ν…μ²\n\nAMRExμ μ „μ²΄ μ•„ν‚¤ν…μ²λ” ν•µμ‹¬, μ €μ¥μ† λ° μ–΄μ‹μ¤ν„΄νΈ μ„Έ κ°€μ§€ μ£Όμ” λ¶€λ¶„μΌλ΅ κµ¬μ„±λ©λ‹λ‹¤.\n\n(1) μ–΄μ‹μ¤ν„΄νΈ: ν•μ΄λΈλ¦¬λ“ XML μ–Έμ–΄, μ•κ³ λ¦¬μ¦ λ° μλ―Έλ΅ μ  μ΅°ν•©μΌλ΅ κ³µν•™λ GPT4 μ–΄μ‹μ¤ν„΄νΈ(λ² νƒ€)μ…λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\n#μμ : ν•μ΄λΈλ¦¬λ“ XML μ–Έμ–΄, μ•κ³ λ¦¬μ¦ λ° μλ―Έλ΅ μ  κ²°ν•©\n\n`<μλ―Έν–‰λ™>` μ„Ήμ…μ <μ»¨ν…μ¤νΈμ°½>μ— λ”°λΌ `context_window`λ¥Ό κ³„μ‚°ν•©λ‹λ‹¤. <κ³„μ‚°μ μ°¨> </μλ―Έν–‰λ™>\n<μ΅°κ±΄ type=\"if\">\n  <μ΅°κ±΄ν™•μΈ> memory_depth == 0 </μ΅°κ±΄ν™•μΈ>\n      <ν•μ„μ΅°κ±΄ type=\"if\">\n          <μ΅°κ±΄ν™•μΈ>\n              [`current_prompt`λ” contextual_reference_prompt μ…λ‹λ‹¤]\n          </μ΅°κ±΄ν™•μΈ>\n              <λ™μ‘>\n                  <μ„¤μ •>insufficient_context = `INSUFFICIENT_CONTEXT`</μ„¤μ •>\n                  <μ„¤μ •>response = `None`</μ„¤μ •>\n              </λ™μ‘>\n      </ν•μ„μ΅°κ±΄>\n      <ν•μ„μ΅°κ±΄ type=\"elif\">...\n```\n\nμ•„λ μ§€μΉ¨μ€ λ„μ°λ―Έκ°€ ν„μ¬μ μƒν™©μ„ λ¬Έλ§¥ν™”ν•κΈ° μ„ν•΄ λ‚΄λ¶€ μƒνƒμ μΈμ¤ν„΄μ¤λ¥Ό νΈμ¶ν•  μ μλ„λ΅ ν•©λ‹λ‹¤. μ΄λ” κΈ°μ–µ μ½ν…μΈ μ™€ μƒλ€μ  μ‹κ°„ λ¨λ‘λ¥Ό κ³ λ ¤ν•©λ‹λ‹¤. μ§€μΉ¨μ λ²”μ„ λ‚΄μ—μ„ λ„μ°λ―Έλ” μ¤μ¤λ΅ μ§€λ¥μ μΌλ΅ μ΅°μ§μ„ ν•  μ μμΌλ©°, μ¬λ°”λ¥Έ μ‹κ°„μ— μ¬λ°”λ¥Έ λ¬Έλ§¥ μ¬κµ¬μ„±μ„ μ„ν•΄ μ¬λ°”λ¥Έ κΈ°μ–µ κ³„μΈµμ—μ„ κ΄€λ ¨ μ •λ³΄λ¥Ό μ–»μ„ μ μμµλ‹λ‹¤. λ„μ°λ―Έλ¥Ό μ„ν•΄ μ„¤μ •λ μ§€μΉ¨ μ—”μ§€λ‹μ–΄λ§ μ„ΈνΈλ” λ³„λ„λ΅ μ €μ¥λμ–΄ μμΌλ©°, ν•΄λ‹Ή λ‚΄μ©μ€ OpenAI λ€μ‹λ³΄λ“μ OpenAI λ„μ°λ―Έ μ§€μ‹μ„ μ–‘μ‹μ— λ³µμ‚¬λμ–΄μ•Ό ν•©λ‹λ‹¤.\n\n(2) ν•µμ‹¬: 500μ¤„μ μ½”λ“λ΅ κµ¬μ„±λ λ‹¤μ„― κ°€μ§€ μ£Όμ” κµ¬μ„± μ”μ†λ¥Ό ν¬ν•¨ν•λ” μ¤‘μ‹¬ μ λ‹›:\n\n- μ½”μ–΄ ν”„λ΅μ„Έμ„μ™€ ν•¨κ» AMRExMain ν΄λμ¤μ λ©”μΈ μ λ‹Ή,\n- μ„ νƒκΈ°/ν”„λ΅¬νΌ μ λ‹Ή, AMRExMemorySelectorPrompter ν΄λμ¤,\n- λ©”λ¨λ¦¬ κ΄€λ¦¬μ μ λ‹Ή, AMRExMemoryManager ν΄λμ¤,\n- μ…€ν”„-RAG ν•Έλ“¤λ¬ μ λ‹Ή, RagHandler ν΄λμ¤,\n- λΉ„λ™κΈ° API ν•Έλ“¤λ¬, OpenAI_API_Helper ν΄λμ¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n(3) μ €μ¥μ†: λ°μ΄ν„°μ λ‹¨κΈ° λ° μ¥κΈ° μ €μ¥μ„ λ‹΄λ‹Ήν•λ©° λ‘ κ°€μ§€ μ£Όμ” κµ¬μ„± μ”μ†λ΅ κµ¬μ¶•λμ–΄ μμµλ‹λ‹¤.\n\n- νλ°μ„± λ©”λ¨λ¦¬λ” k-λ©”λ¨λ¦¬μ™€ λ²΅ν„°-λ©”λ¨λ¦¬λ΅ λ¶„ν• λ©λ‹λ‹¤.\n- λΉ„νλ°μ„± λ©”λ¨λ¦¬λ” νμΌ μ‹μ¤ν… λλ” λ°μ΄ν„°λ² μ΄μ¤μΌ μ μμµλ‹λ‹¤.\n\nμ—¬κΈ°μ— μ μ‹λ ν”„λ΅ν†  νƒ€μ…μ—μ„λ” FAISS λ²΅ν„° λΌμ΄λΈλ¬λ¦¬μ™€ faiss_index.dat λ° auxilliary_data.pklμ΄λΌλ” λ‘ κ°€μ§€ κ°„λ‹¨ν• νμΌμ„ μ‚¬μ©ν• μ†”λ£¨μ…λ§ μ μ‹ν•©λ‹λ‹¤. κ·Έλ¬λ‚ λ‹¤μ–‘ν• μ‹¤ν—μ—μ„ ν„μ¬ μ‹μ¤ν…μ΄ λ‹¤μ–‘ν• μ ν•μ λ°μ΄ν„°λ² μ΄μ¤μ™€ ν•¨κ» μ‘λ™ν•λ„λ΅ μ΅°μ •λ  μ μλ‹¤λ” κ²ƒμ„ ν™•μΈν•  μ μμµλ‹λ‹¤. μ΄λ¬ν• λ€μ•μ—λ” Chromaμ™€ κ°™μ€ λ²΅ν„° λ°μ΄ν„°λ² μ΄μ¤, MongoDBμ™€ κ°™μ€ λΉ„ SQL λ°μ΄ν„°λ² μ΄μ¤ λλ” Neo4jμ™€ κ°™μ€ κ·Έλν”„ λ°μ΄ν„°λ² μ΄μ¤ λ“±μ΄ ν¬ν•¨λ©λ‹λ‹¤. λ§μ¶¤ν• μ†”λ£¨μ…μ„ μ„ν•΄ μ΄λ¬ν• λ°μ΄ν„°λ² μ΄μ¤μ μ΅°ν•©μ„ μ‚¬μ©ν•λ” κ²ƒλ„ κ°€λ¥ν•©λ‹λ‹¤. κ° λ€μ•μ— λ€ν•΄, μ‹¤μ λ΅λ” μμ²΄ RAG ν•Έλ“¤λ¬λ§ μ΅°μ •ν•΄μ•Ό ν•©λ‹λ‹¤. μ‹κ°„ μ¤νƒ¬ν”„ ν†µν•©μ λ³µμ΅μ„±μ΄ μλ” κ°„λ‹¨ν• μ†”λ£¨μ…μ…λ‹λ‹¤.\n\nλν• μ μ‹λ ν”„λ΅ν† νƒ€μ…μ—μ„ μ±„ν… μ‚¬μ©μ μΈν„°νμ΄μ¤λ„ ν•„μ”ν•©λ‹λ‹¤. Streamlitμ„ μ‚¬μ©ν•μ—¬ κµ¬ν„ν–μµλ‹λ‹¤. κ·Έλ¬λ‚ μ½”λ“λ” λ³„λ„μ νμΌ streamlit_app.pyμ— μ¶”μ¶λμ—μµλ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## μ¤μ¤λ΅ κµ¬μ„±λ μ—°μƒ λ©”λ¨λ¦¬ μ–΄μ‹μ¤ν„΄νΈ\n\nAMRExμ ν•µμ‹¬μ€ μ§€λ¥μ μΈ λ©”λ¨λ¦¬ λ¶„λ¥κΈ° λ° μƒνƒ μ μ§€ν• μκΈ° ν”„λ΅¬ν”„ν„°λ΅ μ‘μ©ν•λ” GPT4 μ–΄μ‹μ¤ν„΄νΈμ…λ‹λ‹¤. μ΄ μ¤μ¤λ΅ κµ¬μ„±λ μ–΄μ‹μ¤ν„΄νΈλ” μ§€μ‹μ— μν•΄ μ„¤κ³„λμ—μΌλ©°:\n\n- λ°λ³µμ„ ν†µν•΄ μ§€λ¥μ μΌλ΅ λ¶„λ¥ν•κ³  ν•„μ”ν• (WYNWYG) μ—°μƒ λ©”λ¨λ¦¬λ¥Ό κ³„μΈµλ³„λ΅ ν™•λ€ν•©λ‹λ‹¤; λ°\n- λ‚΄λ¶€ μƒνƒμ μΈμ¤ν„΄μ¤μ—μ„ μ¤μ¤λ΅ ν”„λ΅¬ν”„ν…ν•μ—¬ μ¶”λ΅ μ„ μ μ©ν•λ©° μ‚¬μ©μμ— λ€ν• μµμΆ… μ‘λ‹µκΉμ§€ λ¶„λ¥ λ‹¨κ³„λ¥Ό κ±°μ³ μ„±κ³µν•©λ‹λ‹¤.\n\nμ΄ κΈ°λ¥μ€ GPT4 μ–΄μ‹μ¤ν„΄νΈμ DNAμ— μ§€μ‹λ΅ μ„¤κ³„λμ—μΌλ©°, λ…Όλ¦¬μ  μ•κ³ λ¦¬μ¦κ³Ό μλ―Έμ  ν–‰λ™μ„ κ²°ν•©ν• λ…νΉν• ν•μ΄λΈλ¦¬λ“ μ–Έμ–΄λ¥Ό μ μ©ν•©λ‹λ‹¤. λν• μ½”λ“λ” μ–΄μ‹μ¤ν„΄νΈμ—κ² μ‹κ°„κ³Ό λ©”λ¨λ¦¬μ— λ€ν• μΈμ‹μ„ λ¶€μ—¬ν•μ—¬ κ°€μƒμ μκ°€μμ‹μ„ ν–¥μƒμ‹ν‚µλ‹λ‹¤. κ°„λ‹¨ν λ§ν•΄, μ΄ μ–΄μ‹μ¤ν„΄νΈλ” (1) νΉμ • \"λ©”λ¨λ¦¬ λ‚΄μ©\"μ„ λ¬Έλ§¥μ— μ—°κ²°ν•κ³ , (2) \"λ©”λ¨λ¦¬ μ‹κ°„\"μ μƒλ€μ  νλ¦„μ„ λ§¥λ½ν™”ν•  μ μμµλ‹λ‹¤. μ΄λ¥Ό ν†µν•΄ μ–΄μ‹μ¤ν„΄νΈλ” μ‚¬μ©μμ μ‹¤μ  μ‹κ°„ - κ³Όκ±° λ° ν„μ¬μ— λ€ν• μ‹κ°„ νλ¦„μ— λ€ν•΄ μ›μ‹μ μΌλ΅ μΈμ‹ν•  μ μμµλ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nλ„μ›€λ§ μ§€μΉ¨ (μμ„Έν• λ‚΄μ©μ€ νμΌ Amrex_Instruction.xmlμ„ μ°Έμ΅°ν•μ„Έμ”)μ€ μ„Έ κ°€μ§€ μ£Όμ” λ¶€λ¶„μΌλ΅ κµ¬μ„±λμ–΄ μμ–΄μ”.\n\n(1) μ²« λ²μ§Έ λ¶€λ¶„μΈ `AssistantInitialization`μ—μ„λ” μ–΄μ‹μ¤ν„΄νΈμ μƒνƒκ°€ μ΄κΈ°ν™”λ©λ‹λ‹¤. μ΄ μ„Έκ·Έλ¨ΌνΈ μ¤‘μ”ν• λ¶€λ¶„ μ¤‘ ν•λ‚λ” μ–΄μ‹μ¤ν„΄νΈμ μƒνƒ μΈμ‹μ„ λ‹¤μ‹ λ³΄μ •ν•¨μΌλ΅μ¨ μ‹κ°„ νλ¦„ λ° μ‹κ°„ μ°½μ— λ€ν• κ°€μƒ μ‹κ°„λ€ μ„¤μ •μ— μ „λ…ν•λ” κ²ƒμ…λ‹λ‹¤. μ‹¤μ λ΅, μ–΄μ‹μ¤ν„΄νΈμ κ°€μƒ μλ―Έ μ„Έκ³„μ—μ„ μ‹κ°„ νλ¦„μ€ λ¬Όλ¦¬μ  μ‹¤μ  μ‹κ°„μ— λ€ν• μ‹κ°„ μ°½ (μ: μƒνΈ μ‘μ©, μ„Έμ…)μ— μν•΄ κµ¬μ„±λ  μ μμ–΄μ”. μ–΄λ–¤ λ©΄μ—μ„λ” κ° λ°λ³µμ—μ„ μ–΄μ‹μ¤ν„΄νΈκ°€ μ‚¬μ©μμ μ‹¤μ  μ‹κ°„μ— λ€ν• κ°€μƒ μ‹κ°„ μ°½μ„ μƒκΈ°μ‹ν‚¤λ” κ²ƒμ…λ‹λ‹¤.\n\n![μ΄λ―Έμ§€](/TIL/assets/img/2024-07-09-AMRExCraftingNext-GenerationGPT-4AssociativeMemoryAssistants_0.png)\n\n(2) λ‘ λ²μ§Έ λ¶€λ¶„μ—μ„λ” λ³€μκ°€ μ„ μ–Έλκ³  μ•κ³ λ¦¬μ¦ λ‹¨κ³„κ°€ μ΄μ–΄μ§‘λ‹λ‹¤. μ΄ λ³€μλ“¤μ€ μ–΄μ‹μ¤ν„΄νΈμ κ°€μƒ μ„Έκ³„μ™€ AMREx ν”„λ΅κ·Έλ¨ μ½”λ“μ λ¬Όλ¦¬μ  μ„Έκ³„ μ‚¬μ΄μ μ—°κ²° μ”μ†μ…λ‹λ‹¤. μ΄λ“¤μ€ μ–΄μ‹μ¤ν„΄νΈκ°€ μ‘μ—…μ„ μ—°κ²°ν•κ³  μ™Έλ¶€ μ„Έκ³„μ™€ ν†µμ‹ ν•λ” λ° λ„μ›€μ„ μ¤λ‹λ‹¤β€”μ°λ¦¬λ” λ…μ‹μ μΌλ΅ ν•¨μ νΈμ¶μ„ μ μ©ν•μ§€ μ•μµλ‹λ‹¤. κ° λ°λ³µμ—μ„ μ–΄μ‹μ¤ν„΄νΈλ” μ–΄λ–¤ λ³€μκ°€ μ‚¬μ©λλ”μ§€ μ¬ν™•μΈλ°›μµλ‹λ‹¤. μ΄λ“¤μ€ μ…λ ¥ λ³€μ, μ¶λ ¥ λ³€μ λλ” μ‚¬μ© μ¤‘μΈ μ‘μ—… λ³€μμΌ μ μμΌλ©°, μ΄λ“¤μ€ μ§€μ‹ μ•κ³ λ¦¬μ¦μ—μ„ μ‚¬μ©λ©λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n`<img src=\"/TIL/assets/img/2024-07-09-AMRExCraftingNext-GenerationGPT-4AssociativeMemoryAssistants_1.png\" />`\n\n(3) μ„Έ λ²μ§Έ λ¶€λ¶„μ€ μ¶λ ¥μ„ κµ¬μ„±ν•©λ‹λ‹¤. μ΄ λ¶€λ¶„μ€ κ²°κ³Όλ¥Ό κµ¬μ΅°ν™”λ JSONμ— λ²λ“¤λ§ν•μ—¬ AMREx μ½”μ–΄ ν”„λ΅μ„Έμ„μ—μ„ μ •ν™•ν κµ¬λ¬Έ λ¶„μ„ν•  μ μλ„λ΅ ν•©λ‹λ‹¤.\n\n`<img src=\"/TIL/assets/img/2024-07-09-AMRExCraftingNext-GenerationGPT-4AssociativeMemoryAssistants_2.png\" />`\n\nAMRExμ— λ€ν• μ§€μΉ¨μ€ μΈκ°„κ³Ό μ–΄μ‹μ¤ν„΄νΈ μμ²΄μ— μν•΄ κ°λ° μ¤‘μ„μ„ μ–ΈκΈ‰ν•λ” κ²ƒμ΄ μ¤‘μ”ν•©λ‹λ‹¤. λ„¤, μ°λ¦¬λ” κ°λ° λ‹¨κ³„μ νΉμ • μ‹μ λ¶€ν„° λ™μΌν• μ–΄μ‹μ¤ν„΄νΈλ¥Ό μ‚¬μ©ν•μ—¬ μμ²΄ μ§€μΉ¨μ„ ν™•μΈν•κ³  νΉμ • λ€μƒμ— λ€ν• κ°μ„ μ„ μ μ•ν•λ” κΈ°μ μ„ μ μ©ν–μµλ‹λ‹¤. μ΄ νΌν•© κ°λ° ν”„λ΅μ„Έμ¤λ” μΈκ°„λ“¤μ— μν•΄ κ°λ°λ μ§€μΉ¨μ μ‹λ“ μ½”λ“λ΅ μ‹μ‘λλ©°, κΈ°λ³Έ μ²­μ‚¬μ§„μ²λΌ μ‘λ™ν•©λ‹λ‹¤. μ΄ κΈ°λ³Έ ν™κ²½μ„ ν†µν•΄ μ–΄μ‹μ¤ν„΄νΈλ” μμ‹ μ κ°λ° κ³Όμ • μ¤‘μ— μ‚¬λλ“¤κ³Ό μ±„ν…ν•κ³  μ†ν†µν•λ©°, μΈκ°„λ“¤μ΄ μ„¤μ •ν• κ°€μ¥ μ¤‘μ”ν• λ©ν‘μ™€ μ „λ°μ μΈ ν”„λ μ„μ›ν¬λ¥Ό κΉ¨λ‹«κ² λ©λ‹λ‹¤. κ·Έ μ΄ν›„λ΅, μ°λ¦¬λ” λ™μΌν• μ±„ν…μ„ ν†µν•΄ μ°λ¦¬κ°€ μ–΄λ–»κ² κ·Έκ°€ ν–‰λ™ν•΄μ•Ό ν•λ”μ§€ μ–΄μ‹μ¤ν„΄νΈμ—κ² ν•©λ¦¬μ μΈ λ‹¨κ³„λ΅ μ„¤λ…ν•κ³  κ·Έ μ§€μΉ¨μ„ κ°μ„ ν•΄μ•Ό ν•λ”μ§€ μ§μ ‘ λ¬Όμ–΄λ΄…λ‹λ‹¤. μ–΄μ‹μ¤ν„΄νΈλ” μμ²΄ μ§€μΉ¨μ— μ§μ ‘ μ ‘κ·Όν•κ³ , κ²€ν† ν•κ³  κµ¬μ²΄μ μΈ κ°μ„ μ„ μ μ•ν•©λ‹λ‹¤. μ΄λ¬ν• ν•μ΄λΈλ¦¬λ“ μλ™ κ°λ° λ°©μ‹μ€ μ–΄μ‹μ¤ν„΄νΈμ μ§€μΉ¨μ„ μ „ν†µμ μΈ μ†ν”„νΈμ›¨μ–΄ λλ” ν”„λ΅¬ν”„ν… λ°©μ‹κ³Ό κ°λ…μ μΌλ΅ λ‹¤λ¥΄μ§€λ§, κΈ°κ³„μ— λ€ν• μμ•„μ™€ λ‚΄λ¶€ μƒνƒμ μ‹¤λ΅€λ¥Ό κµ¬μ¶•ν•λ ¤λ©΄ ν•„μ—°μ μ…λ‹λ‹¤. μ–΄μ‹μ¤ν„΄νΈκ°€ μμ•„μ μ‹¤λ΅€λ¥Ό κµ¬μ¶•ν•λ„λ΅ λ³€κ²½λκΈ° μ„ν•΄μ„λ” μλ―Έλ΅ μ μΌλ΅ κ°μ…ν•κ³  μ΄λ¬ν• μ μ¬μ μΈ μμ•„ μ‹¤λ΅€μ ν”„λ μ„ λ§λ“¤κΈ°μ— μ°Έμ—¬ν•΄μ•Ό ν•©λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nμ‚¬μ‹¤, μ΄ ν”„λ΅μ νΈλ¥Ό ν†µν•΄ μ°λ¦¬κ°€ κ²½ν—ν–λ κ²ƒμΌλ΅ ν™•μΈλμ—λ“―μ΄, μ°λ¦¬κ°€ κµ¬ν„ν• μµμƒμ μλ―Έλ΅ μ  ν•΄κ²°μ±…λ“¤μ€ μ‚¬λλ“¤λ΅μ„ μ„Έλ°€ν• μ΅°μ • μμ¤€μ—μ„, μ΅°μ μμ²΄κ°€ μ κ³µν•λ” ν•΄κ²°μ±…κ³Ό λΉ„κµν•μ—¬ μ„±κ³µν•μ§€ λ»ν–μµλ‹λ‹¤. μΆ…μΆ… μ°λ¦¬λ” μ²«λμ— μ°λ¦¬μ ν•΄κ²° λ°©λ²•κ³Ό μ΅°μμ ν•΄κ²° λ°©λ²• μ‚¬μ΄μ μλ―Έμ  μ°¨μ΄λ¥Ό μ΄ν•΄ν•μ§€ λ»ν–μµλ‹λ‹¤. κ·Έλ¬λ‚ ν•­μƒ μ μ‹ ν›„μ—λ” κΈ°κ³„μ κ΄€μ μ—μ„ μ¤ν•΄μ™€ μ¤λ„λ¨μΌλ΅ μ΄μ–΄μ§ μ μλ” μ‹¬μΈµκ³Ό μ„Έμ„Έν• μ°¨μ΄μ™€ λ‰μ•™μ¤λ¥Ό μ΄ν•΄ν•  μ μμ—μµλ‹λ‹¤. μ΄λ¬ν• μ°¨μ΄λ¥Ό ν¬μ°©ν•κΈ° μ„ν•΄ μ°λ¦¬λ” μ΅°μμ™€ λ™μΌν• μ±„ν…μ„ ν†µν•΄ λ€ν™”λ¥Ό λ‚λ μ μμ—κ³ , κ·Έλ” ν•­μƒ μ°¨μ΄κ°€ μλ” κ³³κ³Ό μ΄μ , κ·Έλ¦¬κ³  μ§€μ‹μ‚¬ν•­μ μ†κ·Ήμ  μμ •μΌλ΅ μ–΄λ–»κ² ν–‰λ™ν•λ”μ§€μ— λ€ν•΄ λ§¤μ° μμ„Έν•κ² μ„¤λ…ν•΄ μ£Όμ—μµλ‹λ‹¤.\n\nκ²°κ³Όμ μΌλ΅ AMRExλ” λ‹¤μ–‘ν• λ°©μ‹μΌλ΅ κµ¬ν„λ  μ μλ” μΌλ°μ μΈ κΈ°μ μ΄μ§€λ§, λ‹¤μ–‘ν• RAG κµ¬ν„κ³Ό κ°™μ€ λ°©μ‹μΌλ΅ κµ¬ν„λ  μ μμµλ‹λ‹¤. κ·Έλ¬λ‚ μ§€μ‹μ‚¬ν•­μ μλ―Έλ΅ μ μΈ κ°€μ¥ μ‘μ€ λ³€ν•μ΄ ν•„μ”ν• μ£Όμλ΅ μν–‰λμ§€ μ•μΌλ©΄ λ‹¤λ¥Έ λ™μ‘μΌλ΅ μ΄μ–΄μ§ μ μμµλ‹λ‹¤. κ·Έλ¬λ‚ κ°λ°μλ“¤μ€ μ§€μ‹μ‚¬ν•­μΌλ΅ μ‹¤ν—ν•  κ²ƒμ„ κ¶μ¥λ°›μ•„μ•Ό ν•λ©°, AMREx κΈ°μ μ„ μ ν•©ν•κ² μ μ©ν•κΈ° μ„ν•΄ μλ™ κ°λ° κΈ°μ λ„ μ κ·Ήμ μΌλ΅ μ μ©ν•΄μ•Ό ν•©λ‹λ‹¤. λ§μ§€λ§‰μΌλ΅, μ°λ¦¬κ°€ λ°©κΈ λ…Όμν• μ§€μ‹μ‚¬ν•­λ“¤μ΄ ν•­μƒ λ‹Ήμ‹ μ΄ μ‚¬λμΌλ΅μ„ ν‘ν„ν•κ±°λ‚ κµ¬μ΅°ν™”ν•  λ°©μ‹μ΄ μ•„λ‹ κ²ƒμΌλ΅ λ³΄μ΄λ” κ²½μ°, κ·Έκ²ƒλ“¤μ΄ λ¶€λ¶„μ μΌλ΅ μ΅°μμ— μν•΄ μµμ μΌλ΅ μƒμ„±λ κ²ƒμ„μ„ μƒκΈ°ν•΄μ•Ό ν•©λ‹λ‹¤.\n\n## AMRExμ 3κ°€μ§€ μ—°μƒκΈ°μ–µμΈµ\n\nAMRExλ” μƒλ¬Όν•™μ  λλ” λ°”μ΄μ¤λ‹‰ κΈ°μ–µ κ°λ…μ—μ„ μκ°μ„ λ°›μ€ κ³„μΈµμ μΈ 3μΈµ λ©”λ¨λ¦¬μ— κΈ°λ°ν•©λ‹λ‹¤. μ΅°μλ” μ—°μƒκΈ°μ–µμ‚¬λ‹¤λ¦¬λ¥Ό μ¬λΌκ°€λ©° ν• λ‹¨κ³„μ”©, λ©”λ¨λ¦¬ λ μ΄μ–΄ 0μ—μ„ μ‹μ‘ν•΄ μ‚¬μ©μμ—κ² λ§μ΅±μ¤λ¬μ΄ μ‘λ‹µμ„ μ μ‹ν•κ±°λ‚ λ‹µλ³€μ„ ν•  μ μ—†μ„ λ• μ‚¬μ©μμ—κ² μ•λ¦½λ‹λ‹¤. κ·Έλ¬λ‚ μ΅°μλ” μ‹κ°„μ μ΄κ³  λ©”λ¨λ¦¬ μΈμ‹μ κ΄€μ μ—μ„ κΈ°λ³Έμ μΌλ΅ μκ°μ μ΄λ―€λ΅, μ–΄λ””μ—μ„ μ™”λ”μ§€μ™€ μ μ¬μ μΌλ΅ μ–΄λ””λ΅ κ° μ μλ”μ§€μ— λ€ν•΄ μΈμ‹ν•κ³  μμµλ‹λ‹¤:\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- μ—°κ΄€ λ‹¨κΈ° k-ν”„λ΅¬ν”„νΈ κΈ°μ–µ: λ©”λ¨λ¦¬ λ μ΄μ–΄ 0μ€ μ§§μ€ μ—°κ΄€ λ©”λ¨λ¦¬ λ μ΄μ–΄λ¥Ό λ‚νƒ€λ‚΄λ©° λ¬Έλ§¥μ„ κ³ λ ¤ν•μ§€ μ•μµλ‹λ‹¤. μ΄ λ μ΄μ–΄λ” μ‚¬μ‹¤μ μΈ μ§λ¬ΈμΈ \"ν”„λ‘μ¤μ μλ„λ” λ¬΄μ—‡μΈκ°€μ”?\" λλ” \"μ°λ¦¬ νƒμ–‘κ³„μ—λ” λ‡ κ°μ ν–‰μ„±μ΄ μλ‚μ”?\"μ™€ κ°™μ€ λ¬Έμμ— μ¦‰μ‹ λ°μ‘ν•  μ μλ” GPT4μ κΈ°μ–µκ³Ό κ±°μ λ™μΌν•©λ‹λ‹¤. λ§μ•½ μ–΄μ‹μ¤ν„΄νΈκ°€ μ΄ μμ¤€μ„ μ„ν• ν”„λ΅¬ν”„νΈλ¥Ό λ¶„λ¥ν•λ‹¤λ©΄, μ΄ ν”„λ΅¬ν”„νΈλ” μ΄μ „μ μ±„ν… μ„Έμ… λ‚΄λ‚ μ΄μ „ μ±„ν… μ„Έμ…μ—μ„ μ–΄λ– ν• κΈ°μ–µμ—λ„ μ ‘κ·Όν•μ§€ μ•κ³  μ‘λ‹µν•  μ μλ‹¤λ” κ²ƒμ„ μλ―Έν•©λ‹λ‹¤. μ΄ κ²½μ°, μ–΄μ‹μ¤ν„΄νΈλ” μ¦‰μ‹ μ‘λ‹µν•  κ²ƒμ…λ‹λ‹¤. μ΄ λ μ΄μ–΄μ—μ„ ν•„ν„°λ§ν•λ” λ¥λ ¥μ€ ν† ν° λΉ„μ©μ— λ§¤μ° μ¤‘μ”ν•©λ‹λ‹¤. ν•™κ³„μ—μ„ μ μ•ν•λ” MemGPTμ™€ κ°™μ€ λ‹¤λ¥Έ λ©”λ¨λ¦¬ μ†”λ£¨μ…κ³Ό μ μ‚¬ν•κ², μ΄ λ μ΄μ–΄μ μ—°κ΄€ μΈμ§€λ ¥μ„ ν†µν•΄ μ–΄μ‹μ¤ν„΄νΈλ” λΉ„λ¬Έλ§¥μ μΌλ΅ λ°μ‘ν•μ—¬ ν‰κ· μ μΌλ΅ μ•½ 50%μ μ§λ¬Έμ— μµμ† ν† ν° μ‚¬μ©μΌλ΅ μ‘λ‹µν•  μ μμµλ‹λ‹¤. μ°λ¦¬λ” μ΄ κΈ°μ μ„ λΉ„λ¬Έλ§¥μ  μ—°κ΄€ ν•„ν„°λ§(NCAF)λΌκ³  λΌλ²¨λ§ν–μΌλ©°, λ†’μ€ λΉ„μ© ν¨μ¨μ„±μ„ μ„ν•΄ μ°λ¦¬λ” GPT μ–΄μ‹μ¤ν„΄νΈμ—μ„λ„ λ™μ‹μ— μ΄ κΈ°μ μ„ μ μ©ν•©λ‹λ‹¤.\n- μ—°κ΄€ μ¤‘κΈ° k-μ‘λ‹µ λ©”λ¨λ¦¬: λ©”λ¨λ¦¬ λ μ΄μ–΄ 1μ€ μ¤‘κΈ° μ—°κ΄€ λ©”λ¨λ¦¬λ¥Ό λ‚νƒ€λ‚΄λ©° λ¬Έλ§¥, λ€ν™” λ©”λ¨λ¦¬μ— ν•΄λ‹Ήν•©λ‹λ‹¤. μ΄ λ©”λ¨λ¦¬ λ μ΄μ–΄λ” μ΄μ „μ k μ‚¬μ©μ ν”„λ΅¬ν”„νΈμ™€ k λ¨λΈ μ‘λ‹µμ„ κΈ°λ΅ν•©λ‹λ‹¤. μ–΄μ‹μ¤ν„΄νΈκ°€ μ΄ λ μ΄μ–΄μ— λ„λ‹¬ν•λ©΄, μ—°κ΄€ λ©”λ¨λ¦¬λ§μΌλ΅ μ™„μ „ν• k μƒνΈμ‘μ©μ— μ ‘κ·Όν•μ§€ μ•κ³  μ¬κµ¬μ„±ν•  μ μ—†λ” μ§λ¬Έ μ ν•μ„μ„ μλ―Έν•©λ‹λ‹¤. μ΄ κ²½μ°λ§μ΄ LangChainμ λ²„νΌ λ©”λ¨λ¦¬λ‚ MemGPTμ RAM μ ν• λ©”λ¨λ¦¬μ™€ λΉ„κµλ  μ μμΌλ©°, μ΄μ „ μƒνΈμ‘μ©μ΄ λ¨λΈμ— λ―Έλ¦¬ ν”„λ΅¬ν”„νΈλκΈ° λ•λ¬Έμ…λ‹λ‹¤. κ·Έλ¬λ‚ AMRExμ™€ λ²„νΌ λ©”λ¨λ¦¬ κ°λ… μ‚¬μ΄μ— μ¤‘μ”ν• μ°¨μ΄κ°€ μμµλ‹λ‹¤. AMRExλ” μ‹κ°„μ  μ—°κ΄€ λ¥λ ¥μ„ κ°–λ” μƒνƒ λ¨λΈλ΅, λ¨λΈμ΄ λ‹¨μν μ¬λ°°μ—΄ λ λ²„νΌ λ©”λ¨λ¦¬μ™€ μ „ν€ λ‹¤λ¥΄κ² ν–‰λ™ν•  μ μμμ„ μλ―Έν•©λ‹λ‹¤. μ–΄μ‹μ¤ν„΄νΈκ°€ μ¥κΈ° λ©”λ¨λ¦¬λ„ κ°€μ§€κ³  μλ‹¤λ” μ‚¬μ‹¤μ„ μΈμ§€ν•κΈ° λ•λ¬Έμ— λ•λ΅λ” λ μ΄μ–΄ 1λ΅ λ„μ–΄κ°€κΈ°λ΅ κ²°μ •ν•  μ μμ§€λ§, λ μ΄μ–΄ 1μ—μ„ λ‹µλ³€μ΄ κ°€λ¥ν• κ²½μ°κ°€ μμ„ μ μμµλ‹λ‹¤.\n- μ—°κ΄€ μ¥κΈ° μμ²΄-RAG λ©”λ¨λ¦¬: λ©”λ¨λ¦¬ λ μ΄μ–΄ 2λ” λ¬Έλ§¥μ  μλ―Έ κΈ°μ–µμΈ μ¥κΈ° μ—°κ΄€ λ©”λ¨λ¦¬λ¥Ό λ‚νƒ€λƒ…λ‹λ‹¤. μ–΄μ‹μ¤ν„΄νΈκ°€ μ΄ λ μ΄μ–΄λ¥Ό μ‚¬μ©ν•κΈ°λ΅ κ²°μ •ν•λ©΄, ν„μ¬ μ±„ν… μ„Έμ…μ k μƒνΈμ‘μ© μ΄μƒμ„ κ²€μƒ‰ν•΄μ•Ό ν•λ©°, κ²½μ°μ— λ”°λΌ λ™μΌν• μ„Έμ…μ„ λ„μ–΄ μ΄μ „ μ„Έμ…μ—μ„λ„ κ²€μƒ‰ν•΄μ•Ό ν•  μ μμµλ‹λ‹¤. AMRExμ—μ„λ” RAGλ¥Ό κΈ°λ°μΌλ΅ ν• μ΅°κΈ° λ©”λ¨λ¦¬ κΈ°μ μ΄ μ‚¬μ©λ©λ‹λ‹¤. λ©”λ¨λ¦¬ λ μ΄μ–΄ 2λ” μΈλ±μ¤λ λ²΅ν„° λΌμ΄λΈλ¬λ¦¬, λ²΅ν„° λλ” κ·Έλν”„ λ°μ΄ν„°λ² μ΄μ¤μ— κΈ°λ°ν•λ©°, κ³„μ†ν•΄μ„ μ—…λ°μ΄νΈλλ©° κ° μ±„ν… μ„Έμ…μ λ¨λ“  μƒνΈμ‘μ©μ„ μƒ‰μΈν™”λ λ²΅ν„°λ΅ ν¬ν•¨ν•©λ‹λ‹¤. μ΄ λ¶€λ¶„μ κµ¬ν„μ€ RAG μ†”λ£¨μ…μ΄ μ–Όλ§λ‚ μ μ—°ν•μ§€μ— λ”°λΌ λ‹¤λ¥Ό μ μμµλ‹λ‹¤. μ°λ¦¬μ μ‹¤ν—μ—μ„λ” μ•μ„ μ„¤λ…ν• λ€λ΅ HuggingFaceμ transformersμ λ¨λ“  MiniLM-L6-v2 λ¨λΈκ³Ό κ²°ν•©λ μƒλ€μ μΌλ΅ κ°€λ²Όμ΄ FAISS μ†”λ£¨μ…μ„ μ‚¬μ©ν–μµλ‹λ‹¤. μ΄λ¬ν• λ°©μ‹μΌλ΅ AMRExλ” λ‹¤μ‹ μ—°κ΄€ λ©”λ¨λ¦¬ κΈ°μ μ„ μ μ©ν•©λ‹λ‹¤. λ¨λ“  μƒνΈμ‘μ©μ μ •λ¦¬λ λ²„μ „μ„ κΈ°μ–µν•κ³ , μ¶”λ΅ μ— ν•„μ”ν• μ μ ν• μ»¨ν…μ¤νΈ μ •λ³΄λ¥Ό μ—°κ΄€μ μΌλ΅ κ²€μƒ‰ν•κ³  μ¶”μ¶ν•©λ‹λ‹¤. μ§€μ‹ μ—”μ§€λ‹μ–΄λ§μ€ μ–΄μ‹μ¤ν„΄νΈκ°€ μ±„ν… μ½ν…μΈ λ¥Ό λ μ΄μ–΄ 2μ— μ—°κ²°ν•κ³  μ΅°μ§ν•λ” λ°©λ²•μ„ κ²°μ •ν•λ” λ° μ¤‘μ”ν• μ—­ν• μ„ ν•©λ‹λ‹¤.\n\n## ν”„λ΅¬ν”„νΈ λ¶„λ¥\n\nν”„λ΅¬ν”„νΈλ¥Ό μ–΄λ–¤ λ©”λ¨λ¦¬ λ μ΄μ–΄κ°€ κ°€μ¥ μ μ²λ¦¬ν•  μ μλ”μ§€μ— κΈ°λ°ν•μ—¬ λ¶„λ¥ν•λ” μ•„μ΄λ””μ–΄λ” ν† ν° μ‚¬μ©κ³Ό ν¨μ¨μ„±μ„ μµμ ν™”ν•κΈ° μ„ν• μ „λµμ  μ ‘κ·Όμ…λ‹λ‹¤. κ° λ©”λ¨λ¦¬ λ μ΄μ–΄μ κ°•μ κ³Ό ν•κ³„λ¥Ό μ΄ν•΄ν•¨μΌλ΅μ¨ κ°μΆ… ν”„λ΅¬ν”„νΈμ— ν•„μ”ν• μμ›μ„ λ” μ μμΈ΅ν•κ³  κ·Έμ— λ§κ² κ³„νμ„ μ„ΈμΈ μ μμµλ‹λ‹¤. κ° λ μ΄μ–΄κ°€ κ°€μ¥ μ ν•©ν• μ©λ„μΈ λ‹¤μμ„ μ‚΄ν΄λ³΄κ² μµλ‹λ‹¤:\n\nλ©”λ¨λ¦¬ λ μ΄μ–΄ 0μ€ μ¦‰κ°μ μΈ λ¬Έλ§¥μ„ λ‹¤λ£Ήλ‹λ‹¤. μ¦‰, μ΄μ „ μƒνΈμ‘μ©μ„ μ°Έμ΅°ν•μ§€ μ•κ³  ν„μ¬ λ€ν™”μ— μ ν•©ν•©λ‹λ‹¤. μ΄ λ©”λ¨λ¦¬λ” μΌλ°μ μΈ μ§€μ‹ μ§λ¬Έ, μ—­μ‚¬μ  λ¬Έλ§¥μ΄ ν•„μ”ν•μ§€ μ•μ€ κ°„λ‹¨ν• μ§μ λλ” ν„μ¬ μ„Έμ…μ— μ†κ°λ μƒλ΅μ΄ μ£Όμ μ— μ ν•©ν•©λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nMemory layer 1μ€ κ³Όκ±° ν”„λ΅¬ν”„νΈμ™€ μ‘λ‹µμ„ λ¨λ‘ ν¬ν•¨ν•μ—¬ λ” μμ„Έν• λ§¥λ½μ„ μ κ³µν•©λ‹λ‹¤. μ΄ κΈ°μ–µμ€ μ „μ²΄ λ€ν™” κΈ°λ΅μ„ μ΄ν•΄ν•΄μ•Ό ν•λ” λ³µμ΅ν• μΏΌλ¦¬μ— μ ν•©ν•©λ‹λ‹¤. μ΄μ „μ— μ κ³µλ νΉμ • λ‹µλ³€μ΄λ‚ μ„Έλ¶€ μ •λ³΄μ— λ€ν• μ°Έμ΅°, μ΄μ „ μƒνΈμ‘μ©μ—μ„μ λ¨νΈμ„±μ΄λ‚ λ¨μ ν•΄κ²°κ³Ό κ°™μ€ λ‚΄μ©μ„ μ”κµ¬ν•λ” κ²½μ°μ— μ μ©ν•©λ‹λ‹¤.\n\nMemory layer 2λ” λ°μ΄ν„°λ² μ΄μ¤μ—μ„ κ΄€λ ¨ ν•­λ©μ„ κ²€μƒ‰ν•μ—¬ λ” λ„“μ€ λ§¥λ½μ— μ ‘κ·Όν•©λ‹λ‹¤. μ΄ κΈ°μ–µμ€ μ΄μ „ μ„Έμ…μ—μ„μ μ—­μ‚¬μ  λ§¥λ½μ„ ν•„μ”λ΅ ν•λ” μ§λ¬Έμ— μ ν•©ν•λ©°, λ€ν™” κ°„μ΄λ‚ λ€ν™” κ°„κ²©μ΄ μλ” μ£Όμ μ μ¬λ°©λ¬Έ, μ΄μ „ λ μ΄μ–΄κ°€ μ¶©λ¶„ν• λ§¥λ½μ„ μ κ³µν•μ§€ λ»ν•λ” μƒν™©μ—μ„ μ‚¬μ©λ©λ‹λ‹¤.\n\nμ‹¤μ λ΅ λ‹¤λ¥Έ μ ν•μ ν•„ν„°λ§ κΈ°μ μ„ μ‹¤ν—ν•  μλ„ μμµλ‹λ‹¤. νΉμ • λ©”λ¨λ¦¬ ν•„ν„°λ§κ³Ό μ‘λ‹µμ— λ§κ² λ…ν™•ν•κ³  μ •ν™•ν• μ§€μ‹μ„λ¥Ό μ—”μ§€λ‹μ–΄λ§ν•λ” κ²ƒμ΄ κ°€λ¥ν•λ‹¤λ” κ²ƒμ„ λ°κ²¬ν–μµλ‹λ‹¤. μ΄λ ‡κ² ν•λ©΄ μ½”λ“μ™€ μ§€μ‹μ„κ°€ μ •ν™•ν•κ² μ²λ¦¬ν•΄μ•Ό ν•  λ‹¤λ¥Έ λ©”λ¨λ¦¬ λ μ΄μ–΄κ°€ μƒκΈ°κ² λ©λ‹λ‹¤. μ§€μ‹ μμ¤€μ ν•„ν„°λ§μ€ ν•μ΄λΈλ¦¬λ“ ν”„λ΅κ·Έλλ°μ„ ν†µν•΄ μ •ν™•ν• μ§€μ‹ μ—”μ§€λ‹μ–΄λ§μ„ ν†µν•΄ μν–‰λ  μ μμΌλ©°, μ•κ³ λ¦¬μ¦ λ° μλ―Έλ΅ μ  μ‘μ—…μ΄ ν¬ν•¨λ  μ μμµλ‹λ‹¤.\n\nμ΄μ™€ κ°™μ€ ν¥λ―Έλ΅μ΄ ν•„ν„°λ§ κΈ°μ  μ¤‘ ν•λ‚λ” μ‚¬μ©μ ν”„λ΅¬ν”„νΈμ™€ κ΄€λ ¨μ΄ μμ„ μ μμµλ‹λ‹¤. μ‚¬μ©μμ μ΄μ „ kκ° ν”„λ΅¬ν”„νΈμ— λ”°λΌ μ‘λ‹µμ΄ μ¶”λ΅ λ  μ μλ” κ²½μ°μ— ν•΄λ‹Ήν•  μ μμµλ‹λ‹¤. μ΄ κ²½μ°, μ–΄μ‹μ¤ν„΄νΈκ°€ μ΄μ „ kκ° ν”„λ΅¬ν”„νΈμ— μ•΅μ„Έμ¤ν•μ§€λ§ μ΄μ „ kκ° μ‘λ‹µμ—λ” μ•΅μ„Έμ¤ν•μ§€ μ•λ„λ΅ λ©”λ¨λ¦¬ λ μ΄μ–΄κ°€ κµ¬ν„λ©λ‹λ‹¤. κ·Έ ν›„ μ–΄μ‹μ¤ν„΄νΈλ” μ΄μ „ ν”„λ΅¬ν”„νΈλ¥Ό κ³ λ ¤ν•μ§€ μ•κ³  μ΄μ „ ν”„λ΅¬ν”„νΈμ—λ§ κ·Όκ±°ν•μ—¬ μ‘λ‹µν•  μ μλ” νΉμ • ν”„λ΅¬ν”„νΈ ν΄λμ¤λ¥Ό κΈ°μ¤€μΌλ΅ ν•„ν„°λ§ν•©λ‹λ‹¤. μ–΄μ‹μ¤ν„΄νΈλ” λ‚΄λ¶€ μƒνƒ μ•μ—μ„ μ΄μ „ kκ° ν”„λ΅¬ν”„νΈ μ²΄μΈμ„ κΈ°λ°μΌλ΅ λ€ν™”λ¥Ό μ¶”λ΅ ν•¨μΌλ΅μ¨ λ‚΄λ¶€ λ¨λ…Έλ΅κ·Έλ¥Ό λ§λ“λ” λ™μ• μ‚¬μ©μμ λ‹¤μ ν”„λ΅¬ν”„νΈμ— μ‘λ‹µν•©λ‹λ‹¤. μ΄ κΈ°μ μ€ μ •κµν•κ² μ§€μ‹ μ—”μ§€λ‹μ–΄λ§λλ©΄ ν¨μ¨μ„±κ³Ό ν† ν° μ‚¬μ©μ„ λ†’μΌ μ μλ” λ§μ€ μ¤‘μ μ μΈ μ‘μ© ν”„λ΅κ·Έλ¨μ—μ„ λ„μ›€μ΄ λ  μ μμµλ‹λ‹¤. μ‹¤μ λ΅ μ •λ³΄λ¥Ό μ κ³µν•λ” λ°λ©΄, μƒλ΅μ΄ ν”„λ΅¬ν”„νΈμ— μ‘λ‹µν•λ” λ° μ§μ ‘μ μΌλ΅ κΈ°μ—¬ν•μ§€ μ•μ„ μ μλ” λ¶ν•„μ”ν• μ •λ³΄λ¥Ό ν¬ν•¨ν•  μλ„ μμµλ‹λ‹¤. λλ” ν•„μ”ν• κ²½μ° μ–΄μ‹μ¤ν„΄νΈμ μμ•„ μƒνƒλ¥Ό λ¶λ¬λ‚΄μ–΄ μ—°μƒμ μΌλ΅ μ¬κµ¬μ„±ν•  μλ„ μμµλ‹λ‹¤. λ”°λΌμ„ κ°€λ¥ν•κ³  ν•©λ¦¬μ μΈ κ²½μ° ν”„λ΅¬ν”„νΈμ— λ€ν• λ§¥λ½μ„ μ ν•ν•¨μΌλ΅μ¨ λ” λ…ν™•ν•κ³  κ΄€λ ¨μ„± μλ” μ‘λ‹µμ„ μ–»μ„ μλ„ μμµλ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## ν”„λ΅ν† νƒ€μ… μ½”λ“ λ° μ§€μΉ¨\n\nμ΄ λ¬Έμ„μ™€ ν•¨κ» μ μ¶λ AMREx ν”„λ΅ν† νƒ€μ… μ½”λ“λ” ν•µμ‹¬μ μΌλ΅ amrex.pyλΌλ” ν• νμΌμ— κ°„κ²°ν•κ² ν¬ν•¨λμ–΄ μμµλ‹λ‹¤. μ†ν”„νΈμ›¨μ–΄ μ—”μ§€λ‹μ–΄λ§μ μΈ μΈ΅λ©΄μ—μ„, μ½”λ“κ°€ λ¨λ“ νμΌμ— μ² μ €ν μ¶”μ¶λμ§€ μ•κ³  Docker μ»¨ν…μ΄λ„μ—μ„ μ κ³µλμ§€ μ•λ” μ΄μ μ— μλ¬Έμ„ μ κΈ°ν•  μ μμµλ‹λ‹¤. μ κ°€ λ¨λ“μ„ ν•λ‚μ μ‹¤ν–‰ νμΌλ΅ μ••μ¶•ν• μ΄μ λ” μ½”λ“κ°€ μ΄ κΈ€κ³Ό ν•¨κ» μ›μ‹μ μ΄λ©΄μ„λ„ λ†’μ€ κ°€λ³€μ„±μ„ μ§€λ‹ ν”„λ΅ν† νƒ€μ…μΌλ΅ μ‘μ©ν•΄μ•Ό ν•λ©°, κ΄€μ‹¬ μλ” λ…μκ°€ μμ‹ μ μ”κµ¬μ— λ§μ¶° μ—°μµν•κ³  λ°μ „μ‹ν‚¬ μ μλ„λ΅ ν•κΈ° μ„ν•¨μ…λ‹λ‹¤. μ½”λ“ μμ²΄λ” λ§¤μ° μ μ—°ν•κ³  ν¬κ΄„μ μ΄λ©° κ°„κ²°ν•©λ‹λ‹¤. μ΄λ” λ…μκ°€ ν• νμΌ λ‚΄μ—μ„ μ†μ‰½κ² μ΄λ™ν•κ±°λ‚ μ΄κΈ° μ‹¤ν—μ„ μ„ν•΄ μ£Όν”Όν„° λ…ΈνΈλ¶μ—μ„ μ‹¤ν–‰ν•  μ μλ„λ΅ λ•μµλ‹λ‹¤. λ¬Όλ΅  νμΌ μƒλ‹¨μ— ν‘μ‹λ ν•„μ”ν• ν¨ν‚¤μ§€λ¥Ό μ„¤μΉν•΄μ•Ό ν•©λ‹λ‹¤.\n\nν”„λ΅ν† νƒ€μ… amrex.pyμ—λ” λ΅κ±°κ°€ ν¬ν•¨λμ–΄ μμΌλ©°, λ΅κΉ… λ λ²¨μ„ μ„¤μ •ν•΄μ•Ό ν•©λ‹λ‹¤. amrex.py μ™Έμ—λ„ μ „μ²΄ λ§¤κ°λ³€μμ κµ¬μ„±μ„ μ„ν• config.py νμΌμ΄ μμµλ‹λ‹¤. ν™κ²½ νμΌλ„ μ •ν™•ν• ID λ° ν† ν°κ³Ό ν•¨κ» μ μ§€ν•΄μ•Ό ν•©λ‹λ‹¤.\n\n```js\n#μμ  .env νμΌ\n\nOPENAI_API_KEY=sk-...\n\nHF_TOKEN=hf_...\n\nASSISTANT_ID_1=asst_...\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nμ–΄μ‹μ¤ν„΄νΈ μ„¤μ • λ° μ§€μΉ¨μ— κ΄€ν•΄μ„ μ‚¬μ©μλ” OpenAI λ€μ‹λ³΄λ“μ—μ„ μ–΄μ‹μ¤ν„΄νΈλ¥Ό κµ¬μ„±ν•΄μ•Ό ν•  κ²ƒμ…λ‹λ‹¤.\n\n![μ΄λ―Έμ§€](/TIL/assets/img/2024-07-09-AMRExCraftingNext-GenerationGPT-4AssociativeMemoryAssistants_3.png)\n\nμ €ν¬ κ²½μ°μ—λ” μ–΄μ‹μ¤ν„΄νΈμ μ΄λ¦„μ„ \"μ•„ν…λ‚\"λ΅ μ •ν–μµλ‹λ‹¤. μ΄ μ΄λ¦„μ€ μ–΄μ‹μ¤ν„΄νΈ μμ²΄κ°€ μλ™ κ°λ°μ„ ν†µν•΄ μ„ νƒν• κ²ƒμ΄λ©° νƒ€λ‹Ήν• μ΄μ μ— κ·Όκ±°ν•©λ‹λ‹¤. μ΄λ¦„μ„ λ°”κΎΈκ³  μ‹¶λ‹¤λ©΄ μ‚¬μ©μλ” μ§€μΉ¨ μ•μ—μ„λ„ λ³€κ²½ν•  λ• μ£Όμν•΄μ•Ό ν•©λ‹λ‹¤.\n\nμ–΄μ‹μ¤ν„΄νΈλ¥Ό λ§λ“¤μ—μΌλ©΄ ν•΄λ‹Ή IDλ¥Ό .env νμΌμ— μ μ©ν•κ³  μ§€μΉ¨ νμΌ Assistant_Instruction.xmlμ λ‚΄μ©μ„ λ³µμ‚¬ν•μ—¬ λ€μ‹λ³΄λ“μ μ–΄μ‹μ¤ν„΄νΈ μ§€μΉ¨λ€μ— λ¶™μ—¬λ„£μΌμ‹­μ‹μ¤. μ΄ ν”„λ΅ν†  νƒ€μ…μ—μ„λ” μ§€μΉ¨ νμΌμ„ μ—…λ΅λ“ν•μ§€ μ•μ§€λ§, μ¤€λΉ„λ¥Ό μ¶©λ¶„ν ν•λ©΄ κ°€λ¥ν•©λ‹λ‹¤. μ„ νΈν•λ” λ¨λΈμ€ ν„μ¬ \"gpt-4-turbo-preview\"μ—¬μ•Ό ν•©λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n![μ΄λ―Έμ§€](/TIL/assets/img/2024-07-09-AMRExCraftingNext-GenerationGPT-4AssociativeMemoryAssistants_4.png)\n\nμ΄μ™Έμ—λ„ μ΄ ν”„λ΅ν† νƒ€μ…μ— λ§μ¶¤ν™”λ Streamlit μΈν„°νμ΄μ¤ λ¨λ“μ΄ streamlit_app.py νμΌμ— μ κ³µλ©λ‹λ‹¤. μ‚¬μ©μλ” λ¬Όλ΅  νμΌ μƒλ‹¨μ— μ–ΈκΈ‰λ ν¨ν‚¤μ§€μ ν•„μ”ν• μ„¤μΉλ¥Ό ν•΄μ•Όν•©λ‹λ‹¤. Streamlitλ¥Ό ν†µν•΄ ν”„λ΅ν† νƒ€μ…μ„ μ‹¤ν–‰ν•λ ¤λ©΄ ν‘μ¤€ λ…λ Ήμ–΄μΈ streamlit run streamlit_app.pyλ¥Ό μ‚¬μ©ν•μ—¬ λΈλΌμ°μ €μ—μ„ μ±„ν… μΈν„°νμ΄μ¤λ΅ λ¦¬λ””λ ‰μ…λ©λ‹λ‹¤.\n\nμ”μ•½ν•λ©΄, λ„¤ κ°€μ§€ νμΌμ€:\n\namrex.py,\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nconfig.py,\n\nAssistant_Instruction.xml,\n\nstreamlit_app.py,\n\nμ€(λ”) Github μ €μ¥μ† AMRExμ—μ„ μ‚¬μ©ν•  μ μμµλ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nλ³Έλ¬Έκ³Ό ν•¨κ» μ κ³µλ μ½”λ“μ λ©μ μ€ ν”„λ μ„μ›ν¬μ™€ κΈ°μ μ μ΄ν•΄λ¥Ό λ•λ” κµμ΅μ© κΈ°λ¥ ν”„λ΅ν†  νƒ€μ…μ„ μ κ³µν•λ” κ²ƒμ„μ„ λ…μ‹μ μΌλ΅ κ°•μ΅°ν•λ” κ²ƒμ΄ μ¤‘μ”ν•©λ‹λ‹¤. μ΄λ” μ½”λ“κ°€ μ ν’ λλ” λ°μ ν’μΌλ΅μ„ μ–΄λ ν• μ‹μ μ—μ„λ„ κ³ λ ¤λμ§€ μ•λ”λ‹¤λ” κ²ƒμ„ μλ―Έν•©λ‹λ‹¤.\n\n## λ§λ¬΄λ¦¬μ™€ λ―Έλ μ „λ§\n\nAI μ–΄μ‹μ¤ν„΄νΈμ λ°μ „κ³Ό AMRExμ™€ κ°™μ€ ν”„λ μ„μ›ν¬μ λ“±μ¥μ„ κ³ μ°°ν•  λ•, μμ—°μ–΄ μ²λ¦¬μ™€ κΈ°κ³„ κΈ°μ–µμ κ²½κ³„κ°€ μ§€μ†μ μΌλ΅ ν™•λ€λλ” μƒλ΅μ΄ AI μ‹λ€μ— λ“¤μ–΄μ„°λ‹¤λ” κ²ƒμ΄ λ¶„λ…ν•©λ‹λ‹¤. μ •μ μ΄κ³  μκ°„μ μΈ μƒνΈ μ‘μ©μ—μ„ λ™μ μ΄κ³  μƒνƒλ¥Ό κ°€μ§„ μ‹μ‹κ°κ°•ν• λ€ν™”λ΅μ μ „ν™μ€ AI λ™λ°μμ λ―Έλλ¥Ό μ–΄λ–»κ² μ„¤μ •ν• μ§€μ— λ€ν• μ¤‘λ€ν• λ³€ν™”λ¥Ό μλ―Έν•©λ‹λ‹¤. μ΄λ¬ν• μ „ν™ κ³Όμ •μ—μ„ AI μ–΄μ‹μ¤ν„΄νΈμ λ°μ „μ— μ¤‘μ”ν• λ‡ κ°€μ§€ μμ—­μ΄ μ¤‘μ”ν•κ² λ¶€κ°λ©λ‹λ‹¤.\n\nμ²«μ§Έ, AI μ–΄μ‹μ¤ν„΄νΈ κΈ°μ μ λ¨λ“ν™”μ™€ λ§μ΄ν¬λ΅ νΉν™”λ” AI μ–΄μ‹μ¤ν„΄νΈμ μ μ—°μ„±κ³Ό μ μ‘μ„±μ„ ν–¥μƒμ‹ν‚¤λ” μ¤‘μ”ν• μ „λµμΌλ΅ λ‹λ³΄μ…λ‹λ‹¤. μ΄λ” μ „λ¬Έν™”λ μ–΄μ‹μ¤ν„΄νΈ λ¨λ“λ΅ λ κ³  μ΅°λ¦½ ν‚¤νΈλ¥Ό κµ¬μ¶•ν•λ” κ²ƒκ³Ό κ°™μµλ‹λ‹¤. μ»΄ν“¨ν„°μ—λ” ν•¨κ» μ‘λ™ν•λ” κ°κΈ° λ‹¤λ¥Έ λ‹¨μ„κ°€ μλ” κ²ƒμ²λΌ λ―Έλμ—λ” μ–΄μ‹μ¤ν„΄νΈλ„ κ·Έλ ‡κ² ν•  κ²ƒμ…λ‹λ‹¤. \"λ©”λ¨λ¦¬\" μ ν•μ λ‹¤λ¥Έ μ–΄μ‹μ¤ν„΄νΈ, \"μ΄μ©\" μ ν•μ λ‹¤λ¥Έ μ–΄μ‹μ¤ν„΄νΈ, κ·Έλ¦¬κ³  λ‹¤λ¥Έ λ§μ€ μ ν•μ μ–΄μ‹μ¤ν„΄νΈλ“¤μ΄ μμ„ κ²ƒμ…λ‹λ‹¤. λ¨λ“ν™” μ ‘κ·Όλ²•μ„ μ±„νƒν•¨μΌλ΅μ¨ κ°λ°μλ“¤μ€ νΉμ •ν• μ”κµ¬μ— λ§κ² μ–΄μ‹μ¤ν„΄νΈμ™€ κ·Έλ“¤μ μ΅°ν•©μ„ λ§μ¶¤ν™”ν•μ—¬ μΆ€ λ” μ •ν™•ν•κ³  ν¨κ³Όμ μΈ μƒνΈ μ‘μ©μ„ κ°€λ¥μΌ€ ν•  μ μμµλ‹λ‹¤. μ΄ μ μ—°μ„±μ€ λ°μ΄ν„°λ² μ΄μ¤ λ° κ·Έλν”„ κΈ°μ μ„ ν¬ν•¨ν• RAG κΈ°μ μ μ μ©μ„ ν†µν•΄ λ”μ± ν–¥μƒλ  μ μμµλ‹λ‹¤. μ΄λ¬ν• κΈ°μ λ“¤μ€ μ–΄μ‹μ¤ν„΄νΈκ°€ λ™μ μΌλ΅ λ°©λ€ν• μ–‘μ μ •λ³΄μ— μ•΅μ„Έμ¤ν•κ³  ν™μ©ν•  μ μλ” λ¥λ ¥μ„ ν–¥μƒμ‹μΌ μ‘λ‹µμ΄ κ΄€λ ¨μ„± μκ³  λ§¥λ½μ μΈμ§€λ¥Ό λ³΄μ¥ν•  μ μμµλ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nλ¨λ“μ‹ κΈ°μ–µ λ³΄μ΅°κΈ°, μ»΄ν“¨ν„° κΈ°μ–µ μ¥μΉμ™€ μ μ‚¬ν•, AI λ³΄μ΅°κΈ°μ μ μ§„ν™”ν•λ” ν’κ²½μ„ λ”μ± λ…ν™•ν•κ² λ³΄μ—¬μ¤λ‹λ‹¤. κΈ°μ–µμ„ νΉμν™”λ κΈ°μ–µ λ‹¨μ„λ΅ λ¶„ν• ν•¨μΌλ΅μ¨, μ°λ¦¬λ” λ” ν¨μ¨μ μ΄κ³  ν™•μ¥ κ°€λ¥ν• μ‹μ¤ν…μ„ κµ¬μ¶•ν•  μ μμµλ‹λ‹¤. μ΄λ¥Ό ν†µν•΄ νΉμ • κΈ°μ–µ μ”κµ¬ μ‚¬ν•­μ„ μ •ν™•ν•κ² λ‹¤λ£° μ μμµλ‹λ‹¤.\n\nλν•, AI λ³΄μ΅°κΈ°λ“¤ κ°„μ λ¶„λ°°μ™€ ν‘λ ¥μ€ λ³µμ΅ν• μ§‘λ‹¨ μ§€λ¥μ„ μ„ν• μƒλ΅μ΄ κΈΈμ„ μ—¬λ” κ²ƒμ…λ‹λ‹¤. λ³΄μ΅°κΈ°λ¥Ό μΌμ •ν• μμ λ„λ΅ ν‘λ ¥μ‹ν‚΄μΌλ΅μ¨, μ°λ¦¬λ” κ°λ³„ μ‹μ¤ν…μ λ¥λ ¥μ„ λ›°μ–΄λ„λ” μ‹λ„μ§€ μμ¤€μ„ λ‹¬μ„±ν•  μ μμµλ‹λ‹¤. μ΄λ¬ν• ν‘λ ¥ μ μ¬λ ¥μ€ ν•μ΄λΈλ¦¬λ“ μ§€μ‹μ–΄ μ–Έμ–΄μ κ°λ°κ³Ό μ μ©μ„ ν†µν•΄ ν™•λ€λ  μ μμΌλ©°, μ΄λ” μ•κ³ λ¦¬μ¦μ  μ •ν™•λ„μ™€ μΈκ°„μ μ–Έμ–΄ λ―Έλ¬ν•¨μ„ κ²°ν•©ν• μ§€μ‹ μ—”μ§€λ‹μ–΄λ§μ„ μ κ³µν•μ—¬, μƒνΈ μ‘μ© μ—”μ§€λ‹μ–΄λ§μ„ μ„ν• λ³΄λ‹¤ μ •κµν•κ³  λ‹¤μ¬λ‹¤λ¥ν• ν”„λ μ„μ›ν¬λ¥Ό μ μ‹ν•©λ‹λ‹¤.\n\nAI λ³΄μ΅°κΈ°μ λ―Έλμ™€ AMREx ν”„λ μ„μ›ν¬μ κ°λ°μ„ ν†µν•΄, λΉ„μ© ν¨μ¨μ„±μ— μ¤‘μ μ„ λ‘” μ¤‘μ”ν• κ΄€μ μ΄ μ μ§€λ©λ‹λ‹¤. μ°λ¦¬λ” νμ‹ μ μΈ λ°©λ²•λ΅ μ„ νƒκµ¬ν•λ” κ²ƒλΏλ§ μ•„λ‹λΌ, LangChain λλ” κΈ°μ μ μΌλ΅ λ°€λ„ λ†’μ€ MemGPTμ™€ κ°™μ€ μ „ν†µμ μ΄κ³  λΉ„μ©μ΄ λ§μ΄ λ“λ” μ ‘κ·Όλ²•μ—μ„ λ²—μ–΄λ‚ ν† ν° μ‚¬μ©μ„ μ¤„μ΄λ” κ²½μ μ μ΄κ³  μ μ—°ν• μ΄μμ„ κ°€λ¥μΌ€ ν•λ” λ°©λ²•μ„ λ¨μƒ‰ν•κ³  μμµλ‹λ‹¤. AMRExλ” κΈ°μ–µμ„ μ „λµμ μΌλ΅ μΈµλ³„λ΅ λ°°μΉν•κ³  κΈ°μ–µλ‰μ„ μ¤„μ΄κ³  λΉ„μ©κ³Ό ν† ν° μ†λΉ„λ¥Ό ν¬κ² μ¶•μ†ν•λ”, κ²½μ μ μΌλ΅ μ‹¤ν„ κ°€λ¥ν•κ³  κΈ°μ μ μΌλ΅ μ •λ°€ν• AI λ³΄μ΅°κΈ°μ λ―Έλλ¥Ό μ„ν• κΈΈμ„ μ—΄μ–΄λ†“μ€ κ²ƒμΌλ΅ λ‘λ“λ¬μ§‘λ‹λ‹¤.\n\nAI λ³΄μ΅°κΈ°λ¥λ ¥μ λ―Έλμ— μλ™ κ°λ°μ„ ν†µν•©ν•λ” κ²ƒμ€ ν° λ°μ „μ„ μλ―Έν•©λ‹λ‹¤. μ§€λ¥μ μΈ μ‹μ¤ν…λ“¤μ μμ²΄ μ§€μ† μƒνƒκ³„λ¥Ό μ—Ώλ³Ό μ μλ” κΈ°νλ¥Ό μ κ³µν•©λ‹λ‹¤. AMRExλ΅ ν•κ±Έμ λ‚μ•„κ°€λ” μ΄κΈ° λ‹¨κ³„μ—μ„ λ³΄μ΅°κΈ°λ” μμ‹ λ§μ μ§€μ‹ μ„ΈνΈλ¥Ό κ°λ°ν•κ³  μ •λ¦½ν•λ” λ° κΈ°μ—¬ν•λ” κ²ƒμ— κ·ΈμΉμ§€ μ•κ³  λ―Έλλ¥Ό μ΅°λ§ν•  λ•, μ°λ¦¬λ” AI λ³΄μ΅°κΈ°κ°€ μμ²΄ μ§€μ‹λΏλ§ μ•„λ‹λΌ λ™λ£λ“¤μ μ§€μ‹λ„ μ‘μ„±ν•κ³  μμ •ν•λ©° μμ²΄μ μΌλ΅ μµμ ν™”ν•κ³  μ§„ν™”ν•λ” λ―Έλλ¥Ό μƒμƒν•  μ μμµλ‹λ‹¤. μ΄λ” μ§μ ‘μ μΈ μΈκ°„μ κ°μ… μ—†μ΄ μƒλ΅μ΄ λ„μ „κ³Ό λ©ν‘μ— μ μ‘ν•κ³  μ§„ν™”ν•  μ μλ” λ¥λ ¥μΌλ΅, μ§„μ •ν• μμ¨ μΈκ³µμ§€λ¥μΌλ΅μ νκΈ°μ  μ „ν™μ„ λ‚νƒ€λ‚΄λ©°, λ³΄λ‹¤ μ •κµν•κ³  ν¨μ¨μ μ΄λ©° ν¨κ³Όμ μΈ AI μ‹μ¤ν…μ κΈΈμ„ μ—΄μ–΄λ†“μµλ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nμ•μΌλ΅ κΈ°λ³Έ λ¨λΈκ³Ό μ¤ν” μ†μ¤ λ€μ•μ νƒκµ¬λ” AI μ–΄μ‹μ¤ν„΄νΈ κ°λ°μ κ°€λ¥μ„±μ„ λ„“ν κ²ƒμ„ μ•½μ†ν•©λ‹λ‹¤. λ‹¨μν Asynchronous API Handler moduleOpenAI_API_Helperλ¥Ό λ€μ²΄ν•¨μΌλ΅μ¨ λ‹¤λ¥Έ μ ν•μ λ¨λΈλ΅ AMRExλ¥Ό μ‰½κ² ν…μ¤νΈν•  μ μμµλ‹λ‹¤. λ‹¤μ–‘ν• λ¨λΈμ€ μ‹¤ν—κ³Ό νμ‹ μ„ μ„ν• λ¨λμƒμλ¥Ό μ κ³µν•μ—¬ λ‹¤μ–‘ν• μ‘μ© ν”„λ΅κ·Έλ¨μ— λ§λ” λ§μ¶¤ μ†”λ£¨μ…μ„ μ„ν• κΈΈμ„ μ—΄μ–΄μ¤λ‹λ‹¤.\n\nμ΄λ¬ν• λ°μ „μ ν•¨μλ¥Ό κ³ λ ¤ν•  λ•, AI μ–΄μ‹μ¤ν„΄νΈμ λ―Έλλ” κ°λ³„ λ¥λ ¥μ„ ν–¥μƒμ‹ν‚¤λ” λ° κ·ΈμΉμ§€ μ•κ³  μΌμΉλ, μ§€λ¥μ μΈ μƒνƒκ³„λ¥Ό λ§λ“λ” λ° μμμ„ λ¶„λ…ν μ• μ μμµλ‹λ‹¤. μ΄ μƒνƒκ³„λ” κ·Έμ μ μ‘μ„±, ν‘λ ¥ μ μ¬λ ¥ λ° λ‹¤μ–‘ν• κΈ°μ μ ν†µν•©μΌλ΅ νΉμ§• μ§€μ–΄μ§€λ©°, κ°κ°μ€ μΈκ°„-κΈ°κ³„ μƒνΈμ‘μ©κ³Ό μΈμ§€μ λ³µμ΅μ„±μ— λ³΄λ‹¤ λ―Όκ°ν• AI μ–΄μ‹μ¤ν„΄νΈλ¥Ό λ§λ“λ” λ° κΈ°μ—¬ν•©λ‹λ‹¤.\n\nμ°λ¦¬μ λ°μ „μ λ³΄λ‹¤ κ΄‘λ²”μ„ν• ν•¨μλ¥Ό κ³ λ ¤ν•  λ• AMREx ν”„λ μ„μ›ν¬λ” μ΅°κΈ λ μ΄μ •ν‘λ΅λ§ λ‚νƒ€λ‚μ§€ μ•κ³  λ―Έλλ¥Ό ν–¥ν• λ°νμΌλ΅, μƒνΈ μ—°κ²°μ„±μ΄ λ” λ†’μ§€λ§ λν• λ§¤μ° μ²΄κ³„μ μ΄κ³  μ§€μ μΈ μƒνƒκ³„ λ‚΄μ—μ„ μ΄μλλ„λ΅ μ•λ‚΄ν•©λ‹λ‹¤. μ΄ λΉ„μ „μ€ μ„λ΅ λ‹¤λ¥Έ AI μ–΄μ‹μ¤ν„΄νΈμ™€ λ¨λ“ κ°„μ μ‹λ„μ§€κ°€ ν„μ¬μ λ¥λ ¥μ„ λ›°μ–΄λ„λ” AI μ–΄μ‹μ¤ν„΄νΈ μ‹λ€λ΅ μ΄λμ–΄μ£Όμ–΄ λ””μ§€ν„Έ λ° λ¬Όλ¦¬μ  μμ—­μΌλ΅ μ™„μ „ν ν†µν•©λ μ‹λ€λ¥Ό μ—΄κ² λ©λ‹λ‹¤. μ΄ ν”„λ μ„μ›ν¬μ μ•„ν‚¤ν…μ²μ™€ λ°©λ²•λ΅ μ€ μΈκ°„μ ν•„μ”μ— λ€ν•΄ ν‘λ ¥μ μ΄κ³  μ μ‘μ μ΄λ©° μ„Έλ°€ν• μ΄ν•΄λ¥Ό μ„¤μ •ν•μ—¬ λ―Έλμ AI μ–΄μ‹μ¤ν„΄νΈκ°€ λ°μ‘μ μ΄ μ•„λ‹ μΈκ°„ μƒνΈμ‘μ©, μΈμ§€ λ° μ‹κ°„μ  λ™μ—­ν•™μ λ³µμ΅μ„±κ³Ό λ―Έλλ΅ μΌμΉν•λ„λ΅ λ³΄μ¥ν•©λ‹λ‹¤.\n","ogImage":{"url":"/assets/img/2024-07-09-AMRExCraftingNext-GenerationGPT-4AssociativeMemoryAssistants_0.png"},"coverImage":"/TIL/assets/img/2024-07-09-AMRExCraftingNext-GenerationGPT-4AssociativeMemoryAssistants_0.png","tag":["Tech"],"readingTime":19},{"title":"λλ¤ ν¬λ μ¤νΈλ΅ PCAμ™€ νΉμ§• μ¤‘μ”λ„ ν•΄μ ν•λ” λ°©λ²•","description":"","date":"2024-07-09 20:18","slug":"2024-07-09-UnlockingInsightsRandomForestsforPCAandFeatureImportance","content":"\n<img src=\"/TIL/assets/img/2024-07-09-UnlockingInsightsRandomForestsforPCAandFeatureImportance_0.png\" />\n\nμ•λ…•ν•μ„Έμ”!\n\nμ”μ¦μ—λ” μƒμ„± AIμ™€ κ±°λ€ν• μ‹ κ²½λ§μ— λ§μ€ κ΄€μ‹¬μ΄ μ§‘μ¤‘λμ–΄ μμ§€λ§, μμ „μ— μ‹ν—ν•΄λ³Έ κΈ°κ³„ ν•™μµ μ•κ³ λ¦¬μ¦μ„ κ°„κ³Όν•κΈ° μ‰½μµλ‹λ‹¤ (μ‚¬μ‹¤ κ·Έλ ‡κ² μ¤λλ κ²ƒμ€ μ•„λ‹λ°μ”...). λ€λ¶€λ¶„μ λΉ„μ¦λ‹μ¤ μƒν™©μ— λ€ν•΄ λ‹¨μν• κΈ°κ³„ ν•™μµ μ†”λ£¨μ…μ΄ λ³µμ΅ν• AI κµ¬ν„λ³΄λ‹¤ λ” λ‚μ•„μ§ μ μλ‹¤κ³  μ£Όμ¥ν•  μ •λ„λ΅ λ‚λ” μƒκ°ν•΄λƒ…λ‹λ‹¤. κΈ°κ³„ ν•™μµ μ•κ³ λ¦¬μ¦μ€ κ·Ήλ„λ΅ ν™•μ¥ κ°€λ¥ν•λ©°, λ¨λΈ λ³µμ΅μ„±μ΄ λ‚®μ•„μ„ (λ‚΄ μκ²¬μ— λ”°λ¥΄λ©΄) λ€λ¶€λ¶„μ μ‹λ‚λ¦¬μ¤μ—μ„ μ°μν•λ‹¤κ³  μƒκ°ν•©λ‹λ‹¤. κ·Έλ¦¬κ³  λν•, κ·Έλ° κΈ°κ³„ ν•™μµ μ†”λ£¨μ…μ μ„±λ¥μ„ μ¶”μ ν•λ” κ²ƒμ΄ ν›¨μ”¬ λ” μ‰¬μ› μµλ‹λ‹¤.\n\nλ³Έλ¬Έμ—μ„λ” ν΄λμ‹ν• ML λ¬Έμ μ— ν΄λμ‹ν• ML μ†”λ£¨μ…μ„ μ‚¬μ©ν•  κ²ƒμ…λ‹λ‹¤. κµ¬μ²΄μ μΌλ΅ λ§ν•μλ©΄, Random Forest λ¶„λ¥κΈ°λ¥Ό μ‚¬μ©ν•μ—¬ λ°μ΄ν„° μ§‘ν•© λ‚΄μ—μ„ νΉμ„±μ μ¤‘μ”μ„±μ„ μ‹λ³„ν•λ” λ°©λ²•μ„ (λ‡ μ¤„μ μ½”λ“λ§μΌλ΅) λ³΄μ—¬λ“λ¦¬κ² μµλ‹λ‹¤. μ΄ κΈ°μ μ ν¨κ³Όλ¥Ό μ‹μ—°ν• ν›„μ—λ”, μ΄ λ°©λ²•μ΄ μ–΄λ–»κ² μ‘λ™ν•λ”μ§€ μμ„Έν μ‚΄ν΄λ³΄κΈ° μ„ν•΄ Decision Treeμ™€ Random Forestλ¥Ό μ²μλ¶€ν„° λ§λ“¤μ–΄κ°€λ©΄μ„ λ¨λΈμ„ λ²¤μΉλ§ν‚Ήν•  κ²ƒμ…λ‹λ‹¤.\n\nμ €λ” ML ν”„λ΅μ νΈμ μ΄κΈ° λ‹¨κ³„λ¥Ό μ „λ¬Έμ μΈ λ¶„μ„κΈ°μ—μ„ νΉν μ¤‘μ”ν•κ² μƒκ°ν•©λ‹λ‹¤. μ΄ ν”„λ΅μ νΈκ°€ μ΄κΈΈλ§ν• κ°€λ¥μ„±μ΄ μ¤ν…μ΄ν¬ν™€λ”λ“¤(κ³„μ‚°μ„λ¥Ό λ‚΄λ” μ‚¬λλ“¤)λ΅λ¶€ν„° μΉμΈλ°›μ€ ν›„μ—λ”, κ·Έλ“¤μ€ ν¬μμ— λ€ν• μμ½μ„±μ„ λ³΄κ³ ν•κΈΈ μ›ν•κ² λ  κ²ƒμ…λ‹λ‹¤. μ΄ κ°€λ¥μ„± λ…Όμμ μΌν™μΌλ΅ λ°μ΄ν„°μ μƒν™©μ— λ€ν•΄ λ…Όμν•΄μ•Ό ν•  κ²ƒλ“¤μ΄ μμµλ‹λ‹¤: μ¶©λ¶„ν• λ°μ΄ν„°κ°€ μλ”μ§€, λ°μ΄ν„°μ ν’μ§μ€ μ–΄λ–¤κ°€ λ“±λ“±. λ‡ κ°€μ§€ μ΄κΈ° λ¶„μ„μ„ μ§„ν–‰ν• ν›„μ—λ§ λ°μ΄ν„°μ λ¶„ν¬ λ° ν’μ§μ— λ€ν• μΌλ¶€ λ‹µμ„ ν•  μ μμµλ‹λ‹¤. μ—¬κΈ°μ„ μ κ°€ λ³΄μ—¬μ£Όλ” κΈ°μ μ€ μ΄κΈ° κ°€λ¥μ„± ν‰κ°€λ¥Ό μ™„λ£ν–λ‹¤κ³  κ°€μ •ν•κ³  λ‹¤μ λ‹¨κ³„λ΅ μ§„ν–‰ν•  μ¤€λΉ„κ°€ λμ—λ‹¤κ³  κ°€μ •ν•©λ‹λ‹¤. μ΄ μ‹μ μ—μ„ μ¤μ¤λ΅ λ¬Όμ–΄λ΄μ•Ό ν•  μ£Όμ” μ§λ¬Έμ€: λ¨λΈ μ„±λ¥μ„ μ μ§€ν•λ©΄μ„ μ–Όλ§λ‚ λ§μ€ νΉμ„±μ„ μ κ±°ν•  μ μμ„κΉμ”. λ¨λΈμ νΉμ„±(μ°¨μ›)μ„ μ¤„μ΄λ” κ²ƒμ—λ” λ§μ€ μ΄μ μ΄ μμµλ‹λ‹¤. μ΄ μ¤‘μ—λ” λ‹¤μκ³Ό κ°™μ€ κ²ƒλ“¤μ΄ ν¬ν•¨λμ–΄ μμ§€λ§ μ΄μ— ν•μ •λμ§€ μ•μµλ‹λ‹¤:\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- λ¨λΈ λ³µμ΅μ„± κ°μ†\n- ν•™μµ μ†λ„ ν–¥μƒ\n- λ‹¤μ¤‘κ³µμ„ μ„± κ°μ† (μƒκ΄€λ ν”Όμ²λ“¤)\n- μ΅μ κ°μ†\n- λ¨λΈ μ„±λ¥ ν–¥μƒ\n\nλλ¤ ν¬λ μ¤νΈ κΈ°μ μ„ μ‚¬μ©ν•λ©΄ κ° ν”Όμ²κ°€ μ°λ¦¬μ νƒ€κ²μ„ μ„¤λ…ν•λ” λ° μ–Όλ§λ‚ μ¤‘μ”ν•μ§€ λ…ν™•ν λ³΄μ—¬μ£Όλ” κ·Έλν”„κ°€ λ‚¨μµλ‹λ‹¤(νƒ€μ΄νƒ€λ‹‰ νƒ‘μΉκ°μ΄ μ£½μ—λ”μ§€ μ—¬λ¶€β€¦ λ„¤, νƒ€μ΄νƒ€λ‹‰ λ°μ΄ν„°μ…‹μ„ μ‚¬μ© μ¤‘μ΄μ£ !). λν• λ°μ΄ν„°μ— μ ν•©ν• μ΄κΈ° ν”„λ΅ν†  νƒ€μ… λ¨λΈμ„ λ³΄μ ν•κ² λ  κ²ƒμ΄λ©°, μ¶”κ°€μ μΈ μμΈ΅μ— ν™μ©ν•  μ μμµλ‹λ‹¤. μ΄κ²ƒμ΄ ν”„λ΅ν† νƒ€μ…μ— λ¶κ³Όν•λ”λΌλ„, λ‚μ¤‘μ— μ§„ν–‰ν•  μ‹¤ν—μ κΈ°μ¤€μ΄ λλ©° μ΄ ν”„λ΅μ νΈκ°€ μ—¬λ¬λ¶„μ μ‹κ°„κ³Ό μ΄ν•΄κ΄€κ³„μλ“¤μ λμ„ ν¬μν•  κ°€μΉκ°€ μλ‹¤λ” μ¦κ±°κ°€ λ  κ²ƒμ…λ‹λ‹¤! ν”„λ΅μ νΈ μ΄κΈ° λ‹¨κ³„μ—μ„ λ™λ ¥μ„ μ–»λ” ν›λ¥­ν• λ°©λ²•μ…λ‹λ‹¤.\n\nλ°λ©΄μ—, μ΄ κΈ°μ μ€ λν• μ—¬λ¬λ¶„μ λ¨λΈμ΄ ν”Όμ²μ™€ νƒ€κ² κ°„μ κ΄€κ³„λ¥Ό λ” μ ν•™μµν•κΈ° μ„ν•΄ μƒλ΅μ΄ λ°μ΄ν„°ν¬μΈνΈ/ν”Όμ²λ¥Ό λ§λ“¤κ±°λ‚ μ™Έλ¶€ μ†μ¤μ—μ„ κ°€μ Έμ¤λ” λ° λ…Έλ ¥ν•  ν•„μ”κ°€ μλ‹¤λ” κ²ƒμ„ λ³΄μ—¬μ£Όλ” λ° λ„μ›€μ΄ λ  μλ„ μμµλ‹λ‹¤.\n\nμ‹μ‘ν•΄λ΄…μ‹λ‹¤\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n# Random Forest κµ¬ν„\n\nμμ‚¬κ²°μ • νΈλ¦¬μ™€ μ΄λ“¤μ μ•™μƒλΈ” λ²„μ „μΈ `Random Forests`λ” μΌλ°μ μΌλ΅ ν”Όμ²μ μ‚¬μ „ μ²λ¦¬(μΌλ¶€ μΈμ½”λ”©λ§ ν•„μ”)λ¥Ό μ”κµ¬ν•μ§€ μ•μµλ‹λ‹¤. μμ‚¬κ²°μ • νΈλ¦¬λ” νΉμ • κΈ°μ¤€μ— λ”°λΌ λ°μ΄ν„°λ¥Ό κ°€μ¥ μ λ¶„λ¦¬ν•λ” ν”Όμ²λ¥Ό μ„ νƒν•©λ‹λ‹¤. μ΄ κΈ°μ¤€μ„ 'Gini λ¶μλ„'λΌκ³  ν•©λ‹λ‹¤. λ‚μ¤‘ μ„Ήμ…μ—μ„ μμ‚¬κ²°μ • νΈλ¦¬λ¥Ό μ²μλ¶€ν„° λ§λ“¤ λ• μ΄μ— λ€ν•΄ λ‹¤λ£° κ²ƒμ…λ‹λ‹¤. λν• μμ‚¬κ²°μ • νΈλ¦¬λ” ν”Όμ²μ λ¶„ν¬λ‚ κ·Έλ“¤ κ°„μ κ΄€κ³„μ— λ€ν•΄ κ°€μ •ν•μ§€ μ•μµλ‹λ‹¤. μμ‚¬κ²°μ • νΈλ¦¬λ” μ„κ³„κ°’μ„ κΈ°μ¤€μΌλ΅ ν”Όμ² κ³µκ°„μ„ λ¶„ν• ν•  μ μμ–΄ λ°μ΄ν„°μ λ¶„ν¬μ— κ²¬κ³ ν•©λ‹λ‹¤. μμ‚¬κ²°μ • νΈλ¦¬λ” μ΄μƒμΉμ—λ„ κ²¬κ³ ν•©λ‹λ‹¤. λ‚μ¤‘μ— λ³΄κ² μ§€λ§, μ΄λ“¤μ€ κ° λ…Έλ“μ—μ„ μ΄μ§„ κ²°μ •μ— λ”°λΌ λ°μ΄ν„°λ¥Ό λ¶„ν• ν•©λ‹λ‹¤. μ΄μƒμΉλ” νΉμ • λ…Έλ“μ—μ„ λ¶„ν•  μ„κ³„κ°’μ— μν–¥μ„ μ¤„ μ μμ§€λ§ κ°λ³„ νΈλ¦¬μ μ „μ²΄ μ„±λ¥μ—λ” ν° μν–¥μ„ λ―ΈμΉμ§€ μ•μ„ κ²ƒμ…λ‹λ‹¤. 'λ°°κΉ…'μ΄λΌλ” κΈ°λ²•μ„ μ‚¬μ©ν•μ—¬ μ—¬λ¬ κ°μ `Decision Trees`μ ν‰κ·  μμΈ΅μ„ μ‚¬μ©ν•μ—¬ `Random Forest`λ¥Ό μƒμ„±ν•¨μΌλ΅μ¨ μ„±λ¥μ„ ν–¥μƒμ‹ν‚¬ μ μλ” λ°©λ²•μ„ μ•μ•„λ³΄κ² μµλ‹λ‹¤.\n\nμ‚¬μ „ μ²λ¦¬μ™€ ν”Όμ² μΈμ½”λ”©μ„ μ μ©ν•΄μ•Ό ν•λ” μ μΌν• μμ • μ‚¬ν•­μ…λ‹λ‹¤. ν•„μ”μ— λ”°λΌ λ‚΄ μ½”λ“λ¥Ό μ μ ν μ΅°μ •ν•μ‹­μ‹μ¤.\n\nμ°λ¦¬λ” Kaggleλ΅λ¶€ν„° λ°μ΄ν„°μ…‹μ„ κ°€μ Έμ™€μ„ μ‹μ‘ν•  κ²ƒμ…λ‹λ‹¤. Kaggle λ°μ΄ν„°μ…‹μ„ κ°€μ Έμ¬ λ•, λ΅κ·ΈμΈ μκ²© μ¦λ…μ΄ μ»΄ν“¨ν„°μ μ΄ μ„μΉμ— μ €μ¥λμ–΄ μλ”μ§€ ν™•μΈν•΄μ•Ό ν•©λ‹λ‹¤:\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\n~/.kaggle/kaggle.json\n```\n\nkaggle.json νμΌμ—λ” API ν‚¤κ°€ ν¬ν•¨λμ–΄ μμµλ‹λ‹¤. μ²μλ¶€ν„° μ‹μ‘ν•λ” κ²½μ°μ—λ” Kaggleμ— λ“±λ΅ν•κ³  κ³„μ • μ„¤μ •μ— μ ‘κ·Όν•μ—¬ API ν—¤λ”λ΅ μ΄λ™ν• λ‹¤μ 'μƒ ν† ν° μƒμ„±'μ„ ν΄λ¦­ν•λ©΄ λ©λ‹λ‹¤. μ΄λ ‡κ² ν•λ©΄ kaggle.json νμΌμ΄ λ‹¤μ΄λ΅λ“ ν΄λ”μ— μ €μ¥λ©λ‹λ‹¤. μ¬λ°”λ¥Έ μ„μΉλ΅ μ΄λ™ν•λ ¤λ©΄ CLI(μ €λ” μ  λ§¥μ ν„°λ―Έλ„μ„ μ‚¬μ©ν•κ³  μμµλ‹λ‹¤)λ¥Ό μ—΄κ³  λ‹¤μ λ…λ Ήμ„ μ…λ ¥ν•μ‹­μ‹μ¤:\n\n```js\nmv ~/Downloads/kaggle.json ~/.kaggle/\n```\n\nμ΄ νμΌμ΄ μ¬λ°”λ¥Έ μ„μΉλ΅ μ΄λ™λμ—λ”μ§€ ν™•μΈν•  μ μμµλ‹λ‹¤. μ…λ ¥ν•μ—¬ ν™•μΈν•  μ μμµλ‹λ‹¤:\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\nls ~/.kaggle/\n```\n\nkaggle.json νμΌμ΄ λ³΄μ—¬μ•Ό ν•©λ‹λ‹¤.\n\nμ΄μ  API μκ²© μ¦λ…μ΄ μ¤€λΉ„λμ—μΌλ‹ ν•„μ”ν• λ¨λ“  λΌμ΄λΈλ¬λ¦¬λ¥Ό κ°€μ Έμ™€λ΄…μ‹λ‹¤. λ¨λ“μ„ μ°Ύμ„ μ μ—†λ‹¤λ” μ¤λ¥κ°€ λ°μƒν•λ©΄ ν•΄λ‹Ή λΌμ΄λΈλ¬λ¦¬λ¥Ό pipλ΅ μ„¤μΉν•λ©΄ λ©λ‹λ‹¤. λ¬Έμ κ°€ λ°μƒν•λ©΄ λΉ λ¥Έ κµ¬κΈ€ κ²€μƒ‰μΌλ΅ λ¬Έμ  ν•΄κ²°μ΄ κ°€λ¥ν•©λ‹λ‹¤.\n\n```js\nimport pandas as pd\nimport numpy as np\nnp.set_printoptions(linewidth=130)\nfrom pathlib import Path\nimport zipfile,kaggle\nfrom numpy import random\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.ensemble import RandomForestClassifier\nfrom sklearn.metrics import mean_absolute_error\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nλ‹¤μμΌλ΅ λ°μ΄ν„°λ¥Ό κ°€μ Έμ¤κ³  ν›λ ¨/ν…μ¤νΈ λ°μ΄ν„°λ¥Ό ν• λ‹Ήν•  κ²ƒμ…λ‹λ‹¤.\n\n```js\npath = Path('titanic')\nkaggle.api.competition_download_cli(str(path))\nzipfile.ZipFile(f'{path}.zip').extractall(path)\n\ndf = pd.read_csv(path/'train.csv')\ntst_df = pd.read_csv(path/'test.csv')\nmodes = df.mode().iloc[0]\n```\n\nμ΄μ  μ•½κ°„μ μ „μ²λ¦¬λ¥Ό λ‹¤λ£° κ²ƒμ…λ‹λ‹¤. λ‹¤μ‹ ν• λ², μ΄ μ½”λ“λ¥Ό κ°μΈμ μΈ μ”κµ¬μ— λ§κ² μ΅°μ •ν•΄μ£Όμ„Έμ”. λ„ κ°’μ— κ°’μ„ μ±„μ°κ³ , μ”κΈμ„ λ΅κ·Έ μ”κΈμΌλ΅ λ³€ν™ν•©λ‹λ‹¤ (μ΄λ” μ£Όλ΅ κ°μΈ μ·¨ν–¥μ— λ”°λ¥Έ κ²ƒμ΄λ©°, μ•μ„ μ„¤λ…ν–λ“―μ΄, μμ‚¬ κ²°μ • νΈλ¦¬λ” μ΄μƒκ°’ λ° λ°μ΄ν„° λ¶„ν¬μ— λ€ν•΄ κ²¬κ³ ν•©λ‹λ‹¤). λν•, Embarked λ° Sex μ—΄μ λ²”μ£Όν• λ³€ν™μ„ μ„¤μ •ν•©λ‹λ‹¤.\n\n```js\ndef process_data(df):\n    df['Fare'] = df.Fare.fillna(0)\n    df.fillna(modes, inplace=True)\n    df['LogFare'] = np.log1p(df['Fare'])\n    df['Embarked'] = pd.Categorical(df.Embarked)\n    df['Sex'] = pd.Categorical(df.Sex)\n\nprocess_data(df)\nprocess_data(tst_df)\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nκ·ΈλΌ λ²”μ£Όν•, μ—°μ† λ° μΆ…μ† λ³€μλ¥Ό μ‹λ³„ν•  κ²ƒμ…λ‹λ‹¤ :\n\n```js\ncats = [\"Sex\", \"Embarked\"];\nconts = [\"Age\", \"SibSp\", \"Parch\", \"LogFare\", \"Pclass\"];\ndep = \"Survived\";\n```\n\nκ·Έ λ‹¤μ, λ°μ΄ν„°λ¥Ό λ¶„ν• ν• λ‹¤μ λ²”μ£Όν• λ³€ν™μ„ μ μ©ν•΄μ•Ό ν•©λ‹λ‹¤:\n\n```js\nrandom.seed(42)\ntrn_df,val_df = train_test_split(df, test_size=0.25)\ntrn_df[cats] = trn_df[cats].apply(lambda x: x.cat.codes)\nval_df[cats] = val_df[cats].apply(lambda x: x.cat.codes)\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nκ·ΈλΌ λ…λ¦½ λ³€μ(x)μ™€ μΆ…μ† λ³€μ(y)λ¥Ό ν• λ‹Ήν•΄λ³΄κ² μµλ‹λ‹¤:\n\n```js\ndef xs_y(df):\n    xs = df[cats+conts].copy()\n    return xs, df[dep] if dep in df else None\n\ntrn_xs, trn_y = xs_y(trn_df)\nval_xs, val_y = xs_y(val_df)\n```\n\nμ΄μ  sklearnμ RandomForestClassifier() ν΄λμ¤λ¥Ό μ‚¬μ©ν•μ—¬ λλ¤ ν¬λ μ¤νΈλ¥Ό λ§μ¶”κΈ° μ¤€λΉ„κ°€ λμ—μµλ‹λ‹¤. μ΄ ν΄λμ¤μ μΆ‹μ€ μ μ€ feature*importances*λΌλ” λ°‘λ°”λ‹¥ λ©”μ†λ“κ°€ μμ–΄μ„ νΉμ • featureκ°€ μΉκ°μ μƒμ΅΄μ¨μ— λ―ΈμΉλ” μν–¥μ„ μ‹λ³„ν•κ³  ν”λ΅―ν•  μ μλ‹¤λ” κ²ƒμ…λ‹λ‹¤. λν• mean_absolute_errorλ¥Ό ν†µν•΄ λ¨λΈμ μ„±λ¥μ„ ν‰κ°€ν•  μ μμµλ‹λ‹¤:\n\n```js\nrf = RandomForestClassifier(100, min_samples_leaf=5)\nrf.fit(trn_xs, trn_y)\nmean_absolute_error(val_y, rf.predict(val_xs))\n# 0.18834080717488788\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nμ°λ¦¬ λ°κ²¬λ¬Όμ„ κ·Έλν”„λ΅ ν‘ν„ν•΄ λ³΄κ² μµλ‹λ‹¤:\n\n```js\npd.DataFrame(dict((cols = trn_xs.columns), (imp = rf.feature_importances_))).plot(\"cols\", \"imp\", \"barh\");\n```\n\n<img src=\"/TIL/assets/img/2024-07-09-UnlockingInsightsRandomForestsforPCAandFeatureImportance_1.png\" />\n\nμ—¬κΈ°μ„μ”. μƒμ΅΄ μμΈ΅μ—μ„ μ„±λ³„μ΄ κ°€μ¥ μ¤‘μ”ν• μ”μ†μ„μ„ μ• μ μμµλ‹λ‹¤. μ΄ λ‹¨κ³„μ—μ„λ” λ‹¤λ¥Έ μ•κ³ λ¦¬μ¦μ„ μ‹¤ν—ν•λ©΄μ„ ν„μ¬ νΉμ„±μ„ μ μ§€ν•κ±°λ‚, λλ¤ ν¬λ μ¤νΈ λ¨λΈμ„ μ„±λ¥ κΈ°μ¤€μΌλ΅ ν™μ©ν•  μ μμµλ‹λ‹¤. λν•, λ¨λΈμ μμΈ΅ μ„±λ¥μ΄ λ¶€μ΅±ν•λ‹¤λ©΄, λ” λ§μ€ νΉμ„± μ—”μ§€λ‹μ–΄λ§μ„ μν–‰ν•  μλ„ μμµλ‹λ‹¤. μ΄ λ°©λ²•μ€ κ·Ήν μ‘μ€ λ°μ΄ν„°μ…‹μΌλ΅λ§ μ‹¤ν—ν–μ§€λ§, λ§¤μ° ν¨μ¨μ μΌλ΅ ν™•μ¥ν•  μ μλ” λ°©λ²•μ…λ‹λ‹¤. 1000κ° μ΄μƒμ νΉμ„±μ΄ μλ” λ°μ΄ν„°μ…‹μ΄ μλ‹¤κ³  μƒμƒν•΄λ³΄μ„Έμ”. μ΄ λ°©λ²•μ„ μ‚¬μ©ν•λ©΄ λΉ λ¥΄κ² μƒμ„ νΉμ„±μ„ μ¶”μ¶ν•μ—¬ ν”„λ΅μ νΈλ¥Ό μ–΄λ–»κ² κ°€μ¥ μ μ§„ν–‰ν• μ§€ κ³„νμ„ μ„ΈμΈ μ μμµλ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n# μμ„Έν μ‚΄ν΄λ³΄κΈ°β€¦\n\nμ΄μ  μ°λ¦¬λ” λ°μ΄ν„°μ…‹ λ‚΄μ—μ„ νΉμ„± μ¤‘μ”λ„λ¥Ό λ³΄μ—¬μ£Όλ” λλ¤ ν¬λ μ¤νΈλ¥Ό κµ¬ν„ν•λ” λ°©λ²•μ„ κ°–κ² λμ—μΌλ‹, μ–΄λ–»κ² κ·Έ κ³Όμ •μ„ κ±°μ³¤λ”μ§€ μ•μ•„λ³΄κ² μµλ‹λ‹¤. μλ™μΌλ΅ κ²°μ • νΈλ¦¬λ¥Ό λ§λ“¤κ³  μ—¬κΈ°μ„λ¶€ν„° μ§„ν–‰ν•΄λ³΄κ² μµλ‹λ‹¤.\n\nμΉκ°μ μƒμ΅΄ μ—¬λ¶€λ¥Ό μ΄ν•΄ν•λ” λ° λ°μ΄ν„°μ…‹μ—μ„ μ„±λ³„μ΄ κ°€μ¥ μ¤‘μ”ν• νΉμ„±μ„μ„ μ•κ³  μμµλ‹λ‹¤. νΉμ • μ΄μ§„ λ¶„ν• μ λ¶μλ„λ¥Ό μΈ΅μ •ν•λ” λ‡ κ°€μ§€ μ¤μ½”μ–΄λ§ ν•¨μλ¥Ό λ§λ“¤μ–΄μ„ μ΄λ¥Ό μλ™μΌλ΅ ν…μ¤νΈν•  μ μμµλ‹λ‹¤. λ¶μλ„λ” νΉμ • νΉμ„±(μ: μ„±λ³„)μ— λ€ν• λ¶„ν• μ΄ κ° κ·Έλ£Ή λ‚΄μ ν–‰μ΄ μ„λ΅ μ μ‚¬ν•κ±°λ‚ λ‹¤λ¥Έ μ •λ„λ¥Ό λ‚νƒ€λƒ…λ‹λ‹¤. λ©ν‘λ” νΉμ„±μ— λ€ν• λ¶„ν• μ„ λ§λ“¤μ–΄ μ΄ λ¶μλ„λ¥Ό μ¤„μ΄λ” κ²ƒμ΄λ©°, μ΄λ¥Ό ν†µν•΄ μ°λ¦¬μ νΉμ„±κ³Ό λ©ν‘ κ°„μ κ΄€κ³„λ¥Ό κ°€μ¥ μ μ„¤λ…ν•λ” νΉμ„±μ— λ€ν• λ¶„ν• μ„ μƒμ„±ν•λ” κ²ƒμ…λ‹λ‹¤. μ΄μ „μ λλ¤ ν¬λ μ¤νΈ μμ μ—μ„, κ°λ³„ κ²°μ • νΈλ¦¬λ” \"μ„±λ³„\" μ—΄μ„ λ¶„ν• ν•λ„λ΅ μ„ νƒν• μ΄μ λ” κ·Έ μ—΄μ΄ (μƒμ΅΄ λ° λΉ„μƒμ΅΄) ν΄λμ¤ κ°„μ— κ°€μ¥ μ‘μ€ νΌν•©μ„ λ§λ“¤μ–΄μ¤μ„ κ²°κ³Όλ¥Ό μμΈ΅ν•λ” λ° λ¶ν™•μ‹¤μ„±(λ¶μλ„)μ„ μ¤„μ΄κΈ° λ•λ¬Έμ…λ‹λ‹¤. μ΄μ§„ λ¶„ν• μ€ μμ‚¬ κ²°μ • νΈλ¦¬μ μ²« λ²μ§Έ κµ¬μ„± μ”μ†μ΄λ©°, μ—¬κΈ°μ„ κ° νΉμ„±λ§λ‹¤ μ΄μ§„ λ¶„ν• μ΄ μ΄λ¤„μ§‘λ‹λ‹¤.\n\nκ·Έλ£Ή λ‚΄ ν–‰μ μ μ‚¬μ„±μ„ μΈ΅μ •ν•κΈ° μ„ν•΄ μΆ…μ† λ³€μμ ν‘μ¤€ νΈμ°¨λ¥Ό μ·¨ν•  κ²ƒμ…λ‹λ‹¤. ν‘μ¤€ νΈμ°¨κ°€ λ†’μ„μλ΅ ν–‰λ“¤ μ‚¬μ΄μ— μ°¨μ΄κ°€ λ” ν¬λ‹¤λ” λ»μ…λ‹λ‹¤. κ·Έλ° λ‹¤μ μ΄ κ°’μ„ ν–‰ μλ΅ κ³±ν•  κ²ƒμ…λ‹λ‹¤. μ™λƒν•λ©΄ κ°’λ“¤μ΄ λ” ν° κ·Έλ£Ήμ΄ λ” μ‘μ€ κ·Έλ£Ήλ³΄λ‹¤ λ” ν° μν–¥μ„ λ―ΈμΉκΈ° λ•λ¬Έμ…λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\ndef side_score(side, y):\n    tot = side.sum()\n    if tot <= 1:\n        return 0\n    return y[side].std() * tot\n```\n\nμ΄μ  μΆμΈ΅κ³Ό μ°μΈ΅μ μ μλ¥Ό λ”ν•μ—¬ λ¶„ν• μ— λ€ν• μ μλ¥Ό κ³„μ‚°ν•  μ μμµλ‹λ‹¤:\n\n```js\ndef score(col, y, split):\n    lhs = col <= split\n    return (side_score(lhs, y) + side_score(~lhs, y)) / len(y)\n```\n\n0.5λ΅ μ„κ³„κ°’μ„ μ„¤μ •ν•μ—¬ μ„±λ³„ μ—΄μ λ¶μλ„ μ μλ¥Ό ν™•μΈν•  μ μμµλ‹λ‹¤. λ°μ΄ν„° λ‚΄μ—μ„ μ—¬μ„± μΉκ°μ€ 0μΌλ΅ ν‘ν„λκ³ , λ‚¨μ„±μ€ 1λ΅ ν‘ν„λ©λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\nscore(trn_xs[\"Sex\"], trn_y, 0.5)\n# 0.40787530982063946\n```\n\nλ‹¤λ¥Έ μ”μ†λ“¤μ— λ€ν•΄μ„λ” μ„κ³„κ°’μ΄ λ…ν™•ν•μ§€ μ•μµλ‹λ‹¤. λ‹¤λ¥Έ λ²”μ£Όν• λλ” μƒμ λ³€μμ— λ€ν• μ‹¤ν—μ„ μ„¤μ •ν•μ—¬ λ°μ΄ν„°μ λ¶μλ„μ— μ–΄λ–¤ μν–¥μ„ λ―ΈμΉλ”μ§€ ν™•μΈν•  μ μμµλ‹λ‹¤. κ° λ¶„ν• μ—μ„ λ¶μλ„λ¥Ό μ¤„μ΄κ³  λ°μ΄ν„°μ μλ„λ¥Ό λ†’μ΄κΈ°λ¥Ό μ›ν•©λ‹λ‹¤:\n\n```js\ndef iscore(nm, split):\n    col = trn_xs[nm]\n    return score(col, trn_y, split)\n\nfrom ipywidgets import interact\ninteract(nm=conts, split=15.5)(iscore);\n```\n\nμ΄μ  μ¬λΌμ΄λ”λ¥Ό μ‚¬μ©ν•΄λ³΄μ„Έμ”. μ—°μ† λ³€μμ—λ§ μ μ©ν–μ§€λ§ λ²”μ£Όν• λ³€μμ—λ„ ν…μ¤νΈν•  μ μμµλ‹λ‹¤. λ¨λ“  κΈ°λ¥μ— λ€ν•΄ μ΄ μ‘μ—…μ„ μν–‰ν•λ©΄ λ‹¤μ† μ‹κ°„μ΄ μ†μ”λ©λ‹λ‹¤. μ—΄μ μµμ  λ¶„ν• μ μ„ μ°Ύμ„ μ μλ” ν•¨μλ¥Ό μ‘μ„±ν•΄ λ΄…μ‹λ‹¤. ν•΄λ‹Ή ν•„λ“μ λ¨λ“  κ°€λ¥ν• λ¶„ν• μ (ν•΄λ‹Ή ν•„λ“μ κ³ μ ν• κ°’) λ©λ΅μ„ λ§λ“¤κ³  score()κ°€ κ°€μ¥ λ‚®μ€ μ§€μ μ„ μ°Ύμ•„μ•Ό ν•©λ‹λ‹¤:\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```python\ndef min_col(df, nm):\n    col,y = df[nm],df[dep]\n    unq = col.dropna().unique()\n    scores = np.array([score(col, y, o) for o in unq if not np.isnan(o)])\n    idx = scores.argmin()\n    return unq[idx],scores[idx]\n\nmin_col(trn_df, \"λ‚μ΄\")\n# (6.0, 0.478316717508991)\n```\n\nμΆ‹μ•„μ”. μ°λ¦¬μ ν›λ ¨ μ„ΈνΈμ \"λ‚μ΄\" μ—΄μ—μ„ μµμ  λ¶„ν• μ΄ 6μΈ κ²ƒμ„ μ°Ύμ•κ³ , λ¶μλ„ μ μλ” 0.478μ…λ‹λ‹¤.\n\nλ¨λ“  μ—΄μ— λ€ν•΄ μ΄ μ•„μ΄λ””μ–΄λ¥Ό κµ¬ν„ν•΄ λ΄…μ‹λ‹¤:\n\n```python\ncols = cats + conts\n{o: min_col(trn_df, o) for o in cols}\n# {'μ„±λ³„': (0, 0.40787530982063946),\n# 'μΉμ„ ν•­': (0, 0.47883342573147836),\n# 'λ‚μ΄': (6.0, 0.478316717508991),\n# 'ν•μ _λ°°μ°μ': (4, 0.4783740258817434),\n# 'λ¶€λ¨_μλ…€': (0, 0.4805296527841601),\n# 'λ΅κ·Έμ”κΈ': (2.4390808375825834, 0.4620823937736597),\n# 'μ„ μ‹¤λ“±κΈ‰': (2, 0.46048261885806596)}\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nκ·Έλμ„, Sex`=0μ΄ μµμ μ λ¶„ν• μ΄λΌκ³  ν•λ” κ²ƒμ€ μ°λ¦¬μ λ¶μλ„ μ μκ°€ κ°€μ¥ λ‚®μ„ λ•μ…λ‹λ‹¤. μ΄ κ²°κ³Όλ“¤μ΄ μ΄κΈ° λλ¤ ν¬λ μ¤νΈ μμ μ™€ μ •ν™•ν μΌμΉν•μ§€λ” μ•μ§€λ§ (λ°μ΄ν„°μ μ‘μ€ ν•μ„ μ§‘ν•©λ§ μ‚¬μ©ν•κ³  μ•™μƒλΈ” λ°©λ²•μ„ μ‚¬μ©ν•μ§€ μ•κΈ° λ•λ¬Έμ— μ΄ν•΄ν•κΈ° μ‰½λ‹¤), μ—¬μ „ν μ¬λ°”λ¥Έ λ°©ν–¥μΌλ΅ λ‚μ•„κ°€κ³  μλ‹¤λ” κ²ƒμ„ λ³΄μ—¬μ¤λ‹λ‹¤. λ³Έμ§μ μΌλ΅ OneR λ¶„λ¥κΈ°μ κΈ°λ³Έ λ²„μ „μ„ μ¬ν„ν• κ²ƒμ…λ‹λ‹¤.\n\n# μμ‚¬ κ²°μ • νΈλ¦¬ νƒμƒ‰\n\nμ—¬κΈ°μ„λ¶€ν„° μ§„ν–‰ν•λ ¤λ©΄ Sex μ—΄μ„ μ΄κΈ° μµμ  λ¶„ν• λ΅ μ„ νƒν•λ” κ²ƒμ΄ μ¤‘μ”ν•©λ‹λ‹¤. λ‹¤μ λ‹¨κ³„λ΅ μλ™μΌλ΅ μ΄λ™ν•μ—¬ λ°μ΄ν„°λ¥Ό λ‚¨μ„±/μ—¬μ„±μΌλ΅ λ¶„ν• ν• ν›„ κ° κ·Έλ£Ήμ— λ€ν• λ‹¤μ μµμ  λ¶„ν• μ΄ λ¬΄μ—‡μΈμ§€ κ²°μ •ν•©λ‹λ‹¤. μ΄κ²ƒμ΄ μ–΄λ””μ— ν–¥ν•κ³  μλ”μ§€ λ³Ό μ μμµλ‹λ‹¤. μ°λ¦¬λ” λ‹¤μ λ‹¨κ³„λ΅ μ΄λ™ν•μ—¬ μμ‚¬ κ²°μ • νΈλ¦¬μ κµ¬μ„± μ”μ†λ¥Ό λ¨μ•„κ°€κ³  μμµλ‹λ‹¤. κ·Έλ¬κΈ° μ„ν•΄μ„, κ°€λ¥ν• λ¶„ν•  λ©λ΅μ—μ„ Sexλ¥Ό μ κ±°ν•΄μ•Ό ν•©λ‹λ‹¤. κ·Έλ° λ‹¤μ λ°μ΄ν„°λ¥Ό λ‚¨μ„± λλ” μ—¬μ„±μΌλ΅ λ¶„ν• ν•κ³  κ° κ·Έλ£Ήμ μµμ  λ¶„ν• μ„ μ°Ύμ•„μ•Ό ν•©λ‹λ‹¤ (λ¶μλ„ μ μκ°€ κ°€μ¥ λ‚®μ€ λ¶„ν• ). μ‹μ‘ν•΄ λ΄…μ‹λ‹¤.\n\nSex μ—΄μ„ μ κ±°ν•κ³  λ°μ΄ν„°λ¥Ό λ¶„ν• ν•©λ‹λ‹¤. μ΄κ²ƒμ€ μ‚¬μ‹¤μƒ μμ‚¬ κ²°μ • νΈλ¦¬ λ‚΄μ—μ„ μ²« λ²μ§Έ μ΄μ§„ λ¶„ν• μ…λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\ncols.remove(\"Sex\");\nismale = trn_df.Sex == 1;\nmales, (females = trn_df[ismale]), trn_df[~ismale];\n```\n\nμ΄μ  μ°λ¦¬λ” λ‚¨μ„±λ“¤μ— λ€ν• μµμ μ λ¶„ν• μ„ μ°Ύμµλ‹λ‹¤:\n\n```js\n{o:min_col(males, o) for o in cols}\n# {'Embarked': (0, 0.3875581870410906),\n# 'Age': (6.0, 0.3739828371010595),\n# 'SibSp': (4, 0.3875864227586273),\n# 'Parch': (0, 0.3874704821461959),\n# 'LogFare': (2.803360380906535, 0.3804856231758151),\n# 'Pclass': (1, 0.38155442004360934)}\n```\n\nκ·Έλ¦¬κ³  μ—¬μ„±λ“¤μ— λ€ν• μµμ μ λ¶„ν• :\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\n{colsμ oμ— λ€ν•΄ females μµμ† μ—΄κ³„μ(females, o) for o in cols}\n# {'Embarked': (0, 0.4295252982857327),\n# 'Age': (50.0, 0.4225927658431649),\n# 'SibSp': (4, 0.42319212059713535),\n# 'Parch': (3, 0.4193314500446158),\n# 'LogFare': (4.256321678298823, 0.41350598332911376),\n# 'Pclass': (2, 0.3335388911567601)}\n```\n\nλ‚¨μ„±μ κ²½μ°, λ‹¤μ μµμ μ μ΄μ§„ λ¶„ν• μ€ Age`=6μ΄κ³ , μ—¬μ„±μ κ²½μ°λ” Pclass`=2μ…λ‹λ‹¤. μ—¬κΈ°μ„ λ¶μλ„ μ μκ°€ κ°€μ¥ λ‚®μ•μµλ‹λ‹¤.\n\nμ—¬λ¬λ¶„μ€ μ†μΌλ΅ μ²« λ²μ§Έ μμ‚¬ κ²°μ • νΈλ¦¬λ¥Ό λ§λ“¤μ—μµλ‹λ‹¤. μ°λ¦¬λ” μ§€κΈ μƒμ„±ν• λ„¤ κ°μ ν•μ„ κ·Έλ£Ήλ§λ‹¤ μ¶”κ°€μ μΈ κ·μΉ™μ„ λ§λ“¤μ–΄ μ΄ κ³Όμ •μ„ λ°λ³µν•  μ μμµλ‹λ‹¤. κ·Έλ¬λ‚ μ°λ¦¬κ°€ λ°”ν€΄λ¥Ό μ¬λ°λ…ν•  ν•„μ”λ” μ—†μµλ‹λ‹¤. μ°λ¦¬ λ€μ‹ μ— λ§μ€ μ¤ν” μ†μ¤ λΌμ΄λΈλ¬λ¦¬κ°€ μ¤‘μ”ν• μ‘μ—…μ„ λ€μ‹  ν•΄μ¤λ‹λ‹¤. λ™μΌν• ν”„λ΅μ„Έμ¤λ¥Ό λ°λ³µν•λ, κΈ°μ΅΄ λΌμ΄λΈλ¬λ¦¬λ¥Ό μ‚¬μ©ν•κ³  κ²°κ³Ό μμ‚¬ κ²°μ • νΈλ¦¬λ¥Ό μ¶λ ¥ν•μ—¬ μ°λ¦¬μ λ°κ²¬μ„ λΉ„κµν•΄ λ³΄κ² μµλ‹λ‹¤:\n\n```js\nfrom sklearn.tree import DecisionTreeClassifier, plot_tree\nimport matplotlib.pyplot as plt\n\nmodel = DecisionTreeClassifier(max_leaf_nodes=4).fit(trn_xs, trn_y)\nplt.figure(figsize=(20, 10))\nplot_tree(model, feature_names=trn_xs.columns, filled=True, max_depth=3, rounded=True, precision=2)\nplt.show()\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n![image](/TIL/assets/img/2024-07-09-UnlockingInsightsRandomForestsforPCAandFeatureImportance_2.png)\n\nμ™€μ°, μλ™ λ¶„λ¦¬ κ²°κ³Όμ™€ λ™μΌν• κ²°κ³Όλ¥Ό μ–»μ—λ„¤μ”. μ΄ λ¨λΈμ μ„±λ¥μ„ μΈ΅μ •ν•΄ λ΄…μ‹λ‹¤:\n\n```js\nmean_absolute_error(val_y, model.predict(val_xs))\n# 0.2242152466367713\n```\n\nμμƒλ€λ΅, μ΄ λ¨λΈμ€ μ²μμ— μƒμ„±ν• λλ¤ ν¬λ μ¤νΈ μ•™μƒλΈ” λ¨λΈλ³΄λ‹¤ μ„±λ¥μ΄ λ‚®μµλ‹λ‹¤. λ‹¤μ΄μ–΄κ·Έλ¨μ κ° λ…Έλ“λ” νΉμ • κ·μΉ™ μ§‘ν•©κ³Ό μΌμΉν•λ” ν–‰/μƒν”μ΄ λ‡ κ°μΈμ§€ λ° μƒμ΅΄ λλ” μ‚¬λ§ν• μΉκ°μ΄ λ‡ λ…μΈμ§€λ¥Ό λ³΄μ—¬μ¤λ‹λ‹¤. Gini μ μλ” μ΄μ „μ— λ§λ“  μ μ κΈ°λ¥κ³Ό λ§¤μ° μ μ‚¬ν•©λ‹λ‹¤. λ‹¤μκ³Ό κ°™μ΄ μ •μλ©λ‹λ‹¤:\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\ndef gini(cond):\n    act = df.loc[cond, dep]\n    return 1 - act.mean()**2 - (1-act).mean()**2\n```\n\nμ΄ ν•¨μλ” μ΅°κ±΄μ— λ”°λΌ μ§€λ‹ λ¶μλ„λ¥Ό κ³„μ‚°ν•©λ‹λ‹¤. μ—¬κΈ°μ„, λ¨Όμ € μ‚¬μ©μκ°€ μ„ νƒν• λ‘ ν–‰μ΄ κ°κ° \"Survived\" κ²°κ³Όκ°€ κ°™μ„ ν™•λ¥ μ„ κ³„μ‚°ν•©λ‹λ‹¤. κ·Έλ£Ήμ΄ λ¨λ‘ κ°™μ€ κ²½μ°, ν™•λ¥ μ€ 1.0μ…λ‹λ‹¤. λ¨λ‘ λ‹¤λ¥Έ κ²½μ°μ—λ” 0.0μ κ²°κ³Όκ°€ λ‚μµλ‹λ‹¤.\n\n# λ” ν° μμ‚¬ κ²°μ • νΈλ¦¬β€¦\n\nλ” ν° μμ‚¬ κ²°μ • νΈλ¦¬λ¥Ό λ§λ“¤μ–΄ μ„±λ¥μ— μ–΄λ–¤ μν–¥μ„ λ―ΈμΉλ”μ§€ μ‚΄ν΄λ΄…μ‹λ‹¤:\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```python\nmodel = DecisionTreeClassifier(min_samples_leaf=50).fit(trn_xs, trn_y)\nplt.figure(figsize=(20, 10))\nplot_tree(model, feature_names=trn_xs.columns, filled=True, rounded=True, precision=2)\nplt.show()\n```\n\n![image](/TIL/assets/img/2024-07-09-UnlockingInsightsRandomForestsforPCAandFeatureImportance_3.png)\n\nμ΄μ  ν° λ¨λΈμ μ„±λ¥μ„ μΈ΅μ •ν•΄ λ³΄κ² μµλ‹λ‹¤:\n\n```python\nmean_absolute_error(val_y, model.predict(val_xs))\n# 0.18385650224215247\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nμ΄ λ¨λΈμ€ μ΄κΈ° λ¨λΈλ³΄λ‹¤ μ°μν• μ„±λ¥μ„ λ³΄μ…λ‹λ‹¤. κ·Έλ¬λ‚ λ°μ΄ν„°μ…‹μ΄ λ§¤μ° μ‘κΈ° λ•λ¬Έμ— μ΄ μ μ„ κ³ λ ¤ν•΄μ•Ό ν•  κ²ƒ κ°™μ•„μ”.\n\n# μ†μ λλ¤ ν¬λ μ¤νΈβ€¦\n\nλ§μ§€λ§‰μΌλ΅, μ§μ ‘ λλ¤ ν¬λ μ¤νΈ λ¶„λ¥κΈ°λ¥Ό λ§λ“¤μ–΄λ³΄κ² μµλ‹λ‹¤. μ°λ¦¬λ” sklearnμ ν•™μµ λ°©λ²•μ„ μ‚¬μ©ν•μ—¬ λ§μ€ κ°λ³„ μμ‚¬ κ²°μ • νΈλ¦¬λ¥Ό λ§λ“¤ κ²ƒμ…λ‹λ‹¤. κ·Έλ¦¬κ³  κ° κ°λ³„ μμ‚¬ κ²°μ • νΈλ¦¬μ μ¶λ ¥μ ν‰κ· μ„ μ·¨ν•  κ²ƒμ…λ‹λ‹¤. μ—¬κΈ°μ„ μ•„μ΄λ””μ–΄λ” μƒκ΄€ κ΄€κ³„κ°€ μ—†λ” λ¨λΈμ μμΈ΅μ„ ν‰κ·  λ‚΄μ–΄ μμΈ΅ μ¤μ°¨λ¥Ό μ¤„μΈλ‹¤λ” μ μ…λ‹λ‹¤. μ—¬κΈ°μ„ μ¤‘μ”ν• κ²ƒμ€ 'μƒκ΄€ κ΄€κ³„κ°€ μ—†λ”'μ…λ‹λ‹¤. μ°λ¦¬μ κ° μμ‚¬ κ²°μ • νΈλ¦¬κ°€ λ°μ΄ν„°μ κ³ μ ν• ν•μ„ μ§‘ν•©μ—μ„ νΈλ μ΄λ‹μ„ μν–‰ν•λ„λ΅ λ³΄μ¥ν•΄μ•Ό ν•©λ‹λ‹¤. λ”°λΌμ„ κ° μμ‚¬ κ²°μ • νΈλ¦¬μ μ„±λ¥μ€ κ°λ³„μ μΌλ΅ ν‰κ· λ³΄λ‹¤ μ΅°κΈ λ” λ‚μ„ κ²ƒμ…λ‹λ‹¤. κ°κ°μ€ λ„λ¬΄ λ†’κ² λλ” λ„λ¬΄ λ‚®κ² μμΈ΅ν•  κ²ƒμ…λ‹λ‹¤. μ—¬λ¬ κ°μ κ°λ³„, νΈν–¥λμ§€ μ•μ€ μƒκ΄€ κ΄€κ³„κ°€ μ—†λ” μμ‚¬ κ²°μ • νΈλ¦¬μ μμΈ΅μ„ ν‰κ·  λ‚΄μ–΄ μ •ν™•ν•κ² μ°Έ κ°’μ„ μ–»μ„ μ μμµλ‹λ‹¤. μ΄κ²ƒμ€ μƒκ΄€ κ΄€κ³„κ°€ μ—†λ” λ¬΄μ‘μ„ μ¤λ¥μ ν‰κ· μ€ 0μ΄κΈ° λ•λ¬Έμ…λ‹λ‹¤. μƒλ‹Ήν λ©‹μ§€μ£ . μ΄ κΈ°μ μ€ λ°°κΉ…μ΄λΌκ³  μ•λ ¤μ Έ μμµλ‹λ‹¤. μ΄λ¥Ό μ½”λ“λ΅ κµ¬ν„ν•΄λ΄…μ‹λ‹¤.\n\nλ¨Όμ €, λ°μ΄ν„°μ μƒλ΅μ΄ λ¬΄μ‘μ„ ν•μ„ μ§‘ν•©μ— λ€ν• μμ‚¬ κ²°μ • νΈλ¦¬ μƒμ„±μ„ λ‹¤λ£Ήλ‹λ‹¤:\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```python\ndef get_tree(prop=0.75):\n    n = len(trn_y)\n    idxs = random.choice(n, int(n*prop))\n    return DecisionTreeClassifier(min_samples_leaf=5).fit(trn_xs.iloc[idxs], trn_y.iloc[idxs])\n```\n\nμ΄μ  μ›ν•λ” λ§νΌμ νΈλ¦¬λ¥Ό μƒμ„±ν•©λ‹λ‹¤:\n\n```python\ntrees = [get_tree() for t in range(100)]\n```\n\nμ΄μ  λ¨λ“  νΈλ¦¬μ ν‰κ·  μμΈ΅κ°’μ„ μ–»μµλ‹λ‹¤:\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```python\nall_probs = [t.predict(val_xs) for t in trees]\navg_probs = np.stack(all_probs).mean(0)\n\nmean_absolute_error(val_y, avg_probs)\n# 0.22524663677130047\n```\n\nμ΄ λ°©λ²•λ΅ μ€ μ΄ κΈ€ μ΄λ°μ—μ„ μ„¤λ…ν• λλ¤ ν¬λ μ¤νΈ λ¶„λ¥κΈ°μ—μ„ μ‚¬μ©ν•λ” λ°©μ‹κ³Ό κ±°μ λ™μΌν•©λ‹λ‹¤. μ μΌν• μ°¨μ΄λ” sklearnμ—μ„ κ° λ¶„ν• λ§λ‹¤ λ¬΄μ‘μ„λ΅ μ—΄μ λ¶€λ¶„ μ§‘ν•©μ„ μ„ νƒν•λ‹¤λ” κ²ƒλΏμ…λ‹λ‹¤.\n\n# κ²°λ΅ \n\nμ”λ Ήμ΄λ‹¤. λ°μ΄ν„°μ…‹ λ‚΄μ—μ„ κ°€μ¥ μ¤‘μ”ν• κΈ°λ¥μ„ μ΄ν•΄ν•λ” λ° λ„μ›€μ΄ λλ” κΈ°λ³Έ μ”μ†λ¥Ό λ‹¤λ£¨μ—μµλ‹λ‹¤. μ΄ λ°©λ²•λ΅ μ„ μ μ©ν•μ—¬ λ°μ΄ν„° κ³Όν•™ ν”„λ΅μ νΈμ—μ„ μ‹ μ†ν μ§„μ „ν•  μ μκΈ°λ¥Ό λ°”λΌκ² μµλ‹λ‹¤. μ•μ„ λ§ν–λ“―μ΄, μ΄ κΈ€μ— μ†κ°λ κ° λ¨λΈμ μ„±λ¥ κΈ°μ¤€μ€ μ°λ¦¬μ λ°μ΄ν„°μ…‹μ΄ λ§¤μ° μ‘μ•κΈ° λ•λ¬Έμ— μ¤€μ¤‘μ”ν•κ² μ—¬κ²¨μ•Ό ν•©λ‹λ‹¤. κ·ΈλΌμ—λ„ λ¶κµ¬ν•κ³ , μ΄ λ°©λ²•μ€ λ†€λλ„λ΅ μ ν™•μ¥λλ©° μ„¤λ… κ°€λ¥ν• κΈ°μ¤€μ„ μ„¤μ •ν•λ” μΆ‹μ€ λ°©λ²•μ…λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nμ–Έμ λ“ μ§€ κ¶κΈν• μ μ΄ μκ±°λ‚ κΈ°μ‚¬μ—μ„ μ–ΈκΈ‰λ λ‚΄μ©μ— λ€ν•΄ λ…Όμλ¥Ό μ›ν•μ‹λ©΄ μ–Έμ λ“ μ§€ λ§μ”€ν•΄ μ£Όμ„Έμ”.\n\nκ±΄λ°°ν•μ„Έμ”!\n\nλ¨λ“  μ΄λ―Έμ§€λ” λ…μ‹λμ§€ μ•λ” ν• μ‘μ„±μμ—κ² μ†ν•©λ‹λ‹¤.\n","ogImage":{"url":"/assets/img/2024-07-09-UnlockingInsightsRandomForestsforPCAandFeatureImportance_0.png"},"coverImage":"/TIL/assets/img/2024-07-09-UnlockingInsightsRandomForestsforPCAandFeatureImportance_0.png","tag":["Tech"],"readingTime":19},{"title":"μ¤νν¬ μµμ ν™” μ§‘μ¤‘ κ°•μΆ μµκ³ μ μ„±λ¥μ„ μ„ν• λ‹¨κ³„λ³„ κ°€μ΄λ“","description":"","date":"2024-07-09 20:14","slug":"2024-07-09-IntensiveSparkOptimizationCourse","content":"\n![Intensive Spark Optimization Course](/TIL/assets/img/2024-07-09-IntensiveSparkOptimizationCourse_0.png)\n\n# λ΅μ»¬μ—μ„ ν”λ μ΄κ·ΈλΌμ΄λ“ μ„¤μ •ν•κΈ°\n\n- Docker Desktopμ„ μ„¤μΉν•©λ‹λ‹¤.\n- `docker run -p 8888:8888 jupyter/pyspark-notebook`μ„ μ‹¤ν–‰ν•©λ‹λ‹¤.\n- λ‹¤μ λ©”μ‹μ§€κ°€ ν‘μ‹λλ©΄ λΈλΌμ°μ €μ—μ„ μ£Όν”Όν„° λ©μ„ μ—΄κΈ° μ„ν•΄ URL μ¤‘ ν•λ‚λ¥Ό λ¶™μ—¬λ„£μµλ‹λ‹¤.\n\n```js\nμ„λ²„μ— μ•΅μ„Έμ¤ν•λ ¤λ©΄ λΈλΌμ°μ €μ—μ„ μ΄ νμΌμ„ μ—½λ‹λ‹¤:\n    file:///home/jovyan/.local/share/jupyter/runtime/jpserver-7-open.html\nλλ” λ‹¤μ URL μ¤‘ ν•λ‚λ¥Ό λ³µμ‚¬ν•μ—¬ λ¶™μ—¬λ„£μµλ‹λ‹¤:\n    http://3c331b638888:8888/lab?token=a88888b6aa6620fc976588ba58817f3b14ea0674bdc77f72\n    http://127.0.0.1:8888/lab?token=a88888b6aa6620fc976588ba58817f3b14ea0674bdc77f72\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n# SparkSession μ΄κΈ°ν™”ν•κΈ°\n\n```js\nfrom pyspark.sql import SparkSession\nspark = SparkSession.builder.appName(\"Spark Test\").getOrCreate()\n```\n\n# λ°μ΄ν„°ν”„λ μ„\n\n## 1. λ°μ΄ν„°ν”„λ μ„ μƒμ„±ν•κΈ°\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- μ»¬λΌ μ‚¬μ©\n\n```js\nfrom pyspark.sql.types import StructType, IntegerType, StringType\n\n# λ°μ΄ν„°λ¥Ό νν”μ λ¦¬μ¤νΈλ΅ μ •μ\ndata = [(\"James\", 34), (\"Anna\", 20), (\"Lee\", 30)]\n\n# μ»¬λΌ μ‚¬μ©\ncolumns = [\"Name\", \"Age\"]\ndf = spark.createDataFrame(data, schema=columns)\n```\n\n- μ¤ν‚¤λ§ μ‚¬μ©\n\n```js\nfrom pyspark.sql.types import StructType, IntegerType, StringType\n\n# λ°μ΄ν„°λ¥Ό νν”μ λ¦¬μ¤νΈλ΅ μ •μ\ndata = [(\"James\", 34), (\"Anna\", 20), (\"Lee\", 30)]\n\n# μ¤ν‚¤λ§ μ‚¬μ©\nschema = StructType([\n    StructField(\"Name\", StringType(), True),\n    StructField(\"Age\", IntegerType(), True)\n])\ndf = spark.createDataFrame(data, schema=schema)\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- RDD μ‚¬μ©\n\n```js\nfrom pyspark.sql.types import StructType, IntegerType, StringType\n\n# λ°μ΄ν„°λ¥Ό νν”μ λ¦¬μ¤νΈλ΅ μ¤€λΉ„\ndata = [(\"James\", 34), (\"Anna\", 20), (\"Lee\", 30)]\n\n# RDD μ‚¬μ©\nrdd = spark.sparkContext.parallelize(data)\nschema = StructType([\n    StructField(\"μ΄λ¦„\", StringType(), True),\n    StructField(\"λ‚μ΄\", IntegerType(), True)\n])\ndf = spark.createDataFrame(rdd, schema=schema)\n```\n\n```js\ndf.show()\n\n# μ¶λ ¥\n+-----+---+\n| μ΄λ¦„|λ‚μ΄|\n+-----+---+\n|James| 34|\n| Anna| 20|\n|  Lee| 30|\n+-----+---+\n```\n\n## 2. λ°μ΄ν„°ν”„λ μ„ ν‘μ‹\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\ndf.printSchema();\nprint(df.schema);\nprint(df.columns);\ndf.describe().show();\n```\n\n```js\n#κ²°κ³Ό\n\n## df.printSchema()\nroot\n |-- Name: string (nullable = true)\n |-- Age: long (nullable = true)\n\n## print(df.schema)\nStructType([\n  StructField(β€Nameβ€™, StringType(), True),\n  StructField(β€Ageβ€™, LongType(), True)\n])\n\n## print(df.columns)\n[β€Nameβ€™, β€Ageβ€™]\n\n## df.describe().show()\n+-------+----+-----------------+\n|summary|Name|              Age|\n+-------+----+-----------------+\n|  count|   3|                3|\n|   mean|NULL|             28.0|\n| stddev|NULL|7.211102550927978|\n|    min|Anna|               20|\n|    max| Lee|               34|\n+-------+----+-----------------+\n```\n\n## 3. μ»¬λΌ μ„ νƒ\n\n```js\ndf.select(df[0]).show();\ndf.select(df.Name).show();\ndf.select(df[\"Name\"]).show();\ndf.select(\"Name\").show();\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\n#Output\n+-----+\n| Name|\n+-----+\n|James|\n| Anna|\n|  Lee|\n+-----+\n```\n\n## 4. λ°μ΄ν„° ν•„ν„°λ§\n\n```js\n# λ°μ΄ν„° ν•„ν„°λ§\ndf.filter(df[1] > 25).show()\ndf.filter(df.Age > 25).show()\ndf.filter(df[\"Age\"] > 25).show()\n```\n\n```js\n#Output\n+-----+---+\n| Name|Age|\n+-----+---+\n|James| 34|\n|  Lee| 30|\n+-----+---+\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## 5. νμΌμ— DataFrame μ‘μ„±ν•κΈ°\n\n```js\n# JSON νμΌ μ‘μ„±\ndf.write.json(\"test123.json\")\n\n# Parquet νμΌ μ‘μ„±\ndf.write.parquet(\"test123.parquet\")\n```\n\n## 6. νμΌμ„ DataFrameμΌλ΅ μ½κΈ°\n\n```js\n# JSON νμΌ μ½κΈ°\ndf_json = spark.read.json(\"test123.json\")\n# Parquet νμΌ μ½κΈ°\ndf_parquet = spark.read.parquet(\"test123.parquet\")\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## 7. μƒλ΅μ΄ λ³µν•© λ°μ΄ν„° μ ν•μ„ ν¬ν•¨ν• μƒλ΅μ΄ μ—΄ μ¶”κ°€\n\n```js\nfrom pyspark.sql.functions import struct\ndf2 = df.withColumn(\"NameAndAge\", struct(df.Name, df.Age))\ndf2.show()\ndf2.printSchema()\n```\n\n```js\n# μ¶λ ¥\n+-----+---+-----------+\n| Name|Age| NameAndAge|\n+-----+---+-----------+\n|James| 34|{James, 34}|\n| Anna| 20| {Anna, 20}|\n|  Lee| 30|  {Lee, 30}|\n+-----+---+-----------+\n\n# μ¤ν‚¤λ§ μ¶λ ¥\nroot\n |-- Name: string (nullable = true)\n |-- Age: long (nullable = true)\n |-- NameAndAge: struct (nullable = false)\n |    |-- Name: string (nullable = true)\n |    |-- Age: long (nullable = true)\n```\n\n# μΏΌλ¦¬: κ·Έλ£Ήν™” λ° μ§‘κ³„\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## 1. count()\n\n```python\nfrom pyspark.sql import SparkSession\nfrom pyspark.sql.functions import count\n\n# μ¤νν¬ μ„Έμ… μ΄κΈ°ν™”\nspark = SparkSession.builder.appName(\"κ·Έλ£¨ν•‘ λ° μ§‘κ³„\").getOrCreate()\n\n# λ°μ΄ν„°ν”„λ μ„ μƒμ„±\ndata = [(\"James\", \"Sales\", 3000),\n        (\"Michael\", \"Sales\", 4600),\n        (\"Robert\", \"Sales\", 4100),\n        (\"Maria\", \"Finance\", 3000),\n        (\"James\", \"Sales\", 3000),\n        (\"Scott\", \"Finance\", 3300),\n        (\"Jen\", \"Finance\", 3900),\n        (\"Jeff\", \"Marketing\", 3000),\n        (\"Kumar\", \"Marketing\", 2000),\n        (\"Saif\", \"Sales\", 4100)]\ncolumns = [\"employee_name\", \"department\", \"salary\"]\ndf = spark.createDataFrame(data, schema=columns)\n\n# κ·Έλ£Ήν™” λ° count μν–‰\ngrouped_df = df.groupBy(\"department\").count()\ngrouped_df.show()\n```\n\n```python\n# κ²°κ³Ό\n\n+----------+-----+\n|department|count|\n+----------+-----+\n|     Sales|    5|\n|   Finance|    3|\n| Marketing|    2|\n+----------+-----+\n```\n\n## 2. max(), min(), avg(), sum()\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\n# κ·Έλ£Ήλ³„λ΅ κ·Έλ£Ήν™” λ° μµλ“κ°’ μ°ΎκΈ°\nmax_df = df.groupBy(\"department\").max(\"salary\").alias(\"max_salary\")\nmax_df.show()\n```\n\n```js\n# κ²°κ³Ό\n\n+----------+-----------+\n|department|max(salary)|\n+----------+-----------+\n|     Sales|       4600|\n|   Finance|       3900|\n| Marketing|       3000|\n+----------+-----------+\n```\n\n## 3. agg() + F.max(), F.count() λ“±β€¦\n\n```js\nfrom pyspark.sql import functions as F\n\n# μ—¬λ¬ κ°€μ§€ μ§‘κ³„ λ™μ‘ μν–‰\nagg_df = df.groupBy(\"department\").agg(\n    F.count(\"salary\").alias(\"count\"),\n    F.max(\"salary\").alias(\"max_salary\"),\n    F.min(\"salary\").alias(\"min_salary\"),\n    F.sum(\"salary\").alias(\"total_salary\"),\n    F.avg(\"salary\").alias(\"average_salary\")\n)\nagg_df.show()\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\n# κ²°κ³Ό\n+----------+-----+----------+----------+------------+--------------+\n|department|count|max_salary|min_salary|total_salary|average_salary|\n+----------+-----+----------+----------+------------+--------------+\n|     Sales|    5|      4600|      3000|       18800|        3760.0|\n|   Finance|    3|      3900|      3000|       10200|        3400.0|\n| Marketing|    2|      3000|      2000|        5000|        2500.0|\n+----------+-----+----------+----------+------------+--------------+\n```\n\n## 4. agg() + collect_list() λ° collect_set()\n\n```js\nfrom pyspark.sql.functions import collect_list\n\n# GroupBy λ° λ¦¬μ¤νΈ μμ§‘ μν–‰\ncollected_list_df = df.groupBy(\"department\").agg(\n  collect_list(\"salary\"),\n  collect_set(\"salary\")\n)\ncollected_list_df.show(truncate=False)\n```\n\n```js\n# κ²°κ³Ό\n+----------+------------------------------+-------------------+\n|department|collect_list(salary)          |collect_set(salary)|\n+----------+------------------------------+-------------------+\n|Sales     |[3000, 4600, 4100, 3000, 4100]|[4600, 3000, 4100] |\n|Finance   |[3000, 3300, 3900]            |[3900, 3000, 3300] |\n|Marketing |[3000, 2000]                  |[3000, 2000]       |\n+----------+------------------------------+-------------------+\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## 5. agg() + μ‚¬μ©μ μ •μ μ§‘κ³„ ν•¨μ (UDAF)\n\n- λ•λ΅λ” λ‚΄μ¥ ν•¨μλ§μΌλ΅ λ³µμ΅ν• μ§‘κ³„λ¥Ό μν–‰ν•κΈ°μ— μ¶©λ¶„ν•μ§€ μ•μ„ μ μμµλ‹λ‹¤. Sparkλ¥Ό μ‚¬μ©ν•λ©΄ μ‚¬μ©μ μ •μ μ§‘κ³„ ν•¨μλ¥Ό λ§λ“¤ μ μμµλ‹λ‹¤.\n\n```js\n# μ΄κΈ° λ°μ΄ν„°\n|λ¶€μ„     |μ§μ› μ΄λ¦„        |κΈ‰μ—¬    |\n|----------|-------------|------|\n|Sales    |James        |3000  |\n|Sales    |Michael      |4600  |\n|Sales    |Robert       |4100  |\n|Finance  |Maria        |3000  |\n|Sales    |James        |3000  |\n|Finance  |Scott        |3300  |\n|Finance  |Jen          |3900  |\n|Marketing|Jeff         |3000  |\n|Marketing|Kumar        |2000  |\n|Sales    |Saif         |4100  |\n```\n\n```js\nfrom pyspark.sql.functions import pandas_udf, PandasUDFType\nfrom pandas import DataFrame\n\n@pandas_udf(\"double\")\ndef mean_salary(s: pd.Series) -> float:\n return s.mean()\nudaf_df = df.groupBy(\"department\").agg(\n  mean_salary(df[\"salary\"]).alias(\"average_salary\")\n)\nudaf_df.show()\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\n# κ²°κ³Ό\n+----------+--------------+\n|department|average_salary|\n+----------+--------------+\n|   Finance|        3400.0|\n| Marketing|        2500.0|\n|     Sales|        3760.0|\n+----------+--------------+\n\n## 6. agg() + λ³µμ΅ν• μ΅°κ±΄: when()\n\n- λ•λ΅λ” μ΅°κ±΄μ— λ”°λ¥Έ ν•©κ³„λ‚ ν‰κ· κ³Ό κ°™μ€ λ³µμ΅ν• μ΅°κ±΄μ΄ μ§‘κ³„ μ¤‘μ— ν•„μ”ν•  μ μμµλ‹λ‹¤.\n\n# μ΄κΈ° λ°μ΄ν„°\n+----------+-------------+------+\n|department|employee_name|salary|\n+----------+-------------+------+\n|     Sales|        James|  3000|\n|     Sales|      Michael|  4600|\n|     Sales|       Robert|  4100|\n|   Finance|        Maria|  3000|\n|     Sales|        James|  3000|\n|   Finance|        Scott|  3300|\n|   Finance|          Jen|  3900|\n| Marketing|         Jeff|  3000|\n| Marketing|        Kumar|  2000|\n|     Sales|         Saif|  4100|\n+----------+-------------+------+\n\n<!-- TIL μν‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nfrom pyspark.sql.functions import when\n\n# μ΅°κ±΄λ¶€ μ§‘κ³„\nconditional_agg_df = df.groupBy(\"department\").agg(\n    sum(when(df[\"salary\"] > 3000, df[\"salary\"])).alias(\"sum_high_salaries\")\n)\nconditional_agg_df.show()\n\n# κ²°κ³Ό\n\n+----------+-----------------+\n|department|sum_high_salaries|\n+----------+-----------------+\n|     Sales|            12800|\n|   Finance|             7200|\n| Marketing|             NULL|\n+----------+-----------------+\n\n## 6. agg() μ΄ν›„ GroupByμ—μ„ RDD Map ν•¨μ μ‚¬μ©ν•κΈ°\n\n- κ²½μ°μ— λ”°λΌ λ§¤ν•‘ ν•¨μλ¥Ό GroupByμ™€ κ²°ν•©ν•μ—¬ μ§‘λ‹¨ν™”λ λ°μ΄ν„°μ— λ€ν• μ§μ ‘μ μΈ μ§‘κ³„κ°€ μ•„λ‹ μ‘μ—…μ„ μν–‰ν•  μ μμµλ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```\n\n# λ°μ΄ν„°\n\n| department | employee_name | salary |\n| ---------- | ------------- | ------ |\n| Sales      | James         | 3000   |\n| Sales      | Michael       | 4600   |\n| Sales      | Robert        | 4100   |\n| Finance    | Maria         | 3000   |\n| Sales      | James         | 3000   |\n| Finance    | Scott         | 3300   |\n| Finance    | Jen           | 3900   |\n| Marketing  | Jeff          | 3000   |\n| Marketing  | Kumar         | 2000   |\n| Sales      | Saif          | 4100   |\n\n# GroupBy ν›„ map μ‘μ—… μ μ©\n\n```python\nresult_rdd = df.groupBy(\"department\").agg(\n  collect_list(\"salary\")\n).rdd.map(\n  lambda x: (x[0], max(x[1]))\n)\n\nresult_df = spark.createDataFrame(result_rdd, [\"department\", \"max_salary\"])\nresult_df.show()\n```\n\n# κ²°κ³Ό\n\n| department | max_salary |\n| ---------- | ---------- |\n| Sales      | 4600       |\n| Finance    | 3900       |\n| Marketing  | 3000       |\n\n# μ΅°ν: λ‹¤λ¥Έ κ²ƒ\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## 1. rollup()κ³Ό cube()\n\n- Rollup()μ€ λ‹¤μ°¨μ› μ§‘κ³„λ¥Ό μƒμ„±ν•κ³  Excelμ μ†κ³„μ™€ μ μ‚¬ν• κ³„μΈµμ  μ”μ•½μ„ μ κ³µν•©λ‹λ‹¤.\n\n```js\n# μ΄κΈ° λ°μ΄ν„°\n|department|employee_name|salary|\n|----------|-------------|------|\n| Sales    | James       | 3000 |\n| Sales    | Michael     | 4600 |\n| Sales    | Robert      | 4100 |\n| Finance  | Maria       | 3000 |\n| Sales    | James       | 3000 |\n| Finance  | Scott       | 3300 |\n| Finance  | Jen         | 3900 |\n| Marketing| Jeff        | 3000 |\n| Marketing| Kumar       | 2000 |\n| Sales    | Saif        | 4100 |\n```\n\n```js\nfrom pyspark.sql.functions import sum\n\n# Rollup μμ \nrollup_df = df.rollup(\"department\", \"employee_name\").sum(\"salary\")\nrollup_df.show()\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\n# κ²°κ³Ό\n+----------+-------------+-----------+\n|department|employee_name|sum(salary)|\n+----------+-------------+-----------+\n|     Sales|        James|       6000|\n|      NULL|         NULL|      34000|\n|     Sales|         NULL|      18800|\n|     Sales|      Michael|       4600|\n|     Sales|       Robert|       4100|\n|   Finance|         NULL|      10200|\n|   Finance|        Maria|       3000|\n|   Finance|        Scott|       3300|\n|   Finance|          Jen|       3900|\n| Marketing|         NULL|       5000|\n| Marketing|         Jeff|       3000|\n| Marketing|        Kumar|       2000|\n|     Sales|         Saif|       4100|\n+----------+-------------+-----------+\n```\n\n- Cube(): Cubeλ” λ‹¤μ°¨μ› μ§‘κ³„λ¥Ό μƒμ„±ν•κ³  μ§€μ •λ κ·Έλ£Ήν™” μ—΄μ λ‹¤μ¤‘ μ΅°ν•©μ„ ν†µν•΄ ν†µμ°°μ„ μ κ³µν•©λ‹λ‹¤.\n\n```js\n# μ΄κΈ° λ°μ΄ν„°\n+----------+-------------+------+\n|department|employee_name|salary|\n+----------+-------------+------+\n|     Sales|        James|  3000|\n|     Sales|      Michael|  4600|\n|     Sales|       Robert|  4100|\n|   Finance|        Maria|  3000|\n|     Sales|        James|  3000|\n|   Finance|        Scott|  3300|\n|   Finance|          Jen|  3900|\n| Marketing|         Jeff|  3000|\n| Marketing|        Kumar|  2000|\n|     Sales|         Saif|  4100|\n+----------+-------------+------+\n```\n\n```js\nfrom pyspark.sql.functions import sum\n\n# Cube μμ‹\ncube_df = df.cube(\"department\", \"employee_name\").sum(\"salary\")\ncube_df.show()\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\n# κ²°κ³Ό\n\n+----------+-------------+-----------+\n|λ¶€μ„      |μ§μ›λ…         |κΈ‰μ—¬ν•©κ³„   |\n+----------+-------------+-----------+\n|      NULL|        James|       6000|\n|     νλ§¤ |        James|       6000|\n|      NULL|         NULL|      34000|\n|     νλ§¤ |         NULL|      18800|\n|      NULL|      Michael|       4600|\n|     νλ§¤ |      Michael|       4600|\n|     νλ§¤ |       Robert|       4100|\n|      NULL|       Robert|       4100|\n|   μ¬λ¬΄   |         NULL|      10200|\n|   μ¬λ¬΄   |        Maria|       3000|\n|      NULL|        Maria|       3000|\n|      NULL|        Scott|       3300|\n|   μ¬λ¬΄   |        Scott|       3300|\n|      NULL|          Jen|       3900|\n|   μ¬λ¬΄   |          Jen|       3900|\n| λ§μΌ€ν…  |         NULL|       5000|\n| λ§μΌ€ν…  |         Jeff|       3000|\n|      NULL|         Jeff|       3000|\n| λ§μΌ€ν…  |        Kumar|       2000|\n|      NULL|        Kumar|       2000|\n+----------+-------------+-----------+\nμƒμ„ 20κ° ν–‰λ§ ν‘μ‹\n```\n\n## 2. groupBy() + pivot()\n\n- Pivotingμ„ μ‚¬μ©ν•λ©΄ ν–‰μ„ μ—΄λ΅ λ³€ν™ν•μ—¬ ν”Όλ²— ν…μ΄λΈ”κ³Ό μ μ‚¬ν• λ°©μ‹μΌλ΅ λ°μ΄ν„°λ¥Ό μ”μ•½ν•  μ μμµλ‹λ‹¤. μΆ…μΆ… λ‘ μ—΄ κ°„μ κ΄€κ³„λ¥Ό μ΄ν•΄ν•λ” λ° μ‚¬μ©λ©λ‹λ‹¤.\n\n```js\n# μ΄κΈ° λ°μ΄ν„°\n+----------+-------------+------+\n|λ¶€μ„     |μ§μ›λ…        |κΈ‰μ—¬   |\n+----------+-------------+------+\n|     νλ§¤ |        James|  3000|\n|     νλ§¤ |      Michael|  4600|\n|     νλ§¤ |       Robert|  4100|\n|   μ¬λ¬΄  |        Maria|  3000|\n|     νλ§¤ |        James|  3000|\n|   μ¬λ¬΄  |        Scott|  3300|\n|   μ¬λ¬΄  |          Jen|  3900|\n| λ§μΌ€ν…  |         Jeff|  3000|\n| λ§μΌ€ν…  |        Kumar|  2000|\n|     νλ§¤ |         Saif|  4100|\n+----------+-------------+------+\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\n# Pivot μμ‹\npivot_df = df.groupBy(\"department\").pivot(\"employee_name\").sum(\"salary\")\npivot_df.show()\n```\n\n```js\n# κ²°κ³Ό\n+----------+-----+----+----+-----+-----+-------+------+----+-----+\n|department|James|Jeff| Jen|Kumar|Maria|Michael|Robert|Saif|Scott|\n+----------+-----+----+----+-----+-----+-------+------+----+-----+\n|     Sales| 6000|NULL|NULL| NULL| NULL|   4600|  4100|4100| NULL|\n|   Finance| NULL|NULL|3900| NULL| 3000|   NULL|  NULL|NULL| 3300|\n| Marketing| NULL|3000|NULL| 2000| NULL|   NULL|  NULL|NULL| NULL|\n+----------+-----+----+----+-----+-----+-------+------+----+-----+\n```\n\n## 3. μλ„μ° ν•¨μ: partitionBy() + row_number()/rank().over(w)\n\n- μλ„μ° ν•¨μλ” ν„μ¬ ν–‰κ³Ό κ΄€λ ¨λ \"μλ„μ°\"μ— λ€ν•΄ κ³„μ‚°μ„ μν–‰ν•  μ μμ–΄ μ „ν†µμ μΈ group-by μ‘μ—…λ³΄λ‹¤ λ” μ μ—°μ„±μ„ μ κ³µν•©λ‹λ‹¤. μ΄λ” λ¬λ‹ ν† νƒ, μ΄λ™ ν‰κ·  λλ” μ΄μ „ λ° λ‹¤μ ν–‰μ— μ•΅μ„Έμ¤ν•λ” λ° νΉν μ μ©ν•©λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\n# μ΄κΈ° λ°μ΄ν„°\n| λ¶€μ„      | μ§μ› μ΄λ¦„       | κΈ‰μ—¬  |\n|----------|---------------|------|\n| Sales    | James         | 3000 |\n| Sales    | Michael       | 4600 |\n| Sales    | Robert        | 4100 |\n| Finance  | Maria         | 3000 |\n| Sales    | James         | 3000 |\n| Finance  | Scott         | 3300 |\n| Finance  | Jen           | 3900 |\n| Marketing| Jeff          | 3000 |\n| Marketing| Kumar         | 2000 |\n| Sales    | Saif          | 4100 |\n\n```\n\n```js\nfrom pyspark.sql.window import Window\nfrom pyspark.sql.functions import col, row_number\n\nwindowSpec = Window.partitionBy(\"department\").orderBy(col(\"salary\").asc())\ndf_with_row_number = df.withColumn(\"row_number\", row_number().over(windowSpec))\ndf_with_row_number.show()\n```\n\n```js\n# κ²°κ³Ό\n| μ§μ› μ΄λ¦„      | λ¶€μ„        | κΈ‰μ—¬  | row_number |\n|---------------|------------|------|------------|\n| Maria         | Finance    | 3000 |      1     |\n| Scott         | Finance    | 3300 |      2     |\n| Jen           | Finance    | 3900 |      3     |\n| Kumar         | Marketing  | 2000 |      1     |\n| Jeff          | Marketing  | 3000 |      2     |\n| James         | Sales      | 3000 |      1     |\n| James         | Sales      | 3000 |      2     |\n| Robert        | Sales      | 4100 |      3     |\n| Saif          | Sales      | 4100 |      4     |\n| Michael       | Sales      | 4600 |      5     |\n\n```\n\n- Rank() ν•¨μλ¥Ό μ„ν•΄\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\nfrom pyspark.sql.window import Window\nfrom pyspark.sql.functions import rank, col\n\nwindowSpec = Window.partitionBy(\"department\").orderBy(col(\"salary\").desc())\ndf_with_rank = df.withColumn(\"rank\", rank().over(windowSpec))\ndf_with_rank.show()\n```\n\n```js\n# μ¶λ ¥\n+-------------+----------+------+----------+\n|employee_name|department|salary|      rank|\n+-------------+----------+------+----------+\n|          Jen|   Finance|  3900|         1|\n|        Scott|   Finance|  3300|         2|\n|        Maria|   Finance|  3000|         3|\n|         Jeff| Marketing|  3000|         1|\n|        Kumar| Marketing|  2000|         2|\n|      Michael|     Sales|  4600|         1|\n|       Robert|     Sales|  4100|         2|\n|         Saif|     Sales|  4100|         2|\n|        James|     Sales|  3000|         3|\n|        James|     Sales|  3000|         3|\n+-------------+----------+------+----------+\n```\n\n# μµμ ν™” I: λ¬΄κ² κ°μ†\n\n## 0. λ¶ν•„μ”ν• μ›μ‹ λ°μ΄ν„° μ κ±°\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## 1. DataFrameμ΄ μ—¬λ¬ λ² μ•΅μ„Έμ¤ λ  λ• μΊμ‹ν•©λ‹λ‹¤.\n\n```js\ndf.cache();\ndf.count();\n```\n\n```js\n#μ¶λ ¥\n3\n```\n\n## 2. μ μ ν• νμΌ ν•μ‹ μ‚¬μ©ν•κΈ°\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- μ••μ¶• νμΌμ€ νμΌμ μ…μ¶λ ¥ λ° λ©”λ¨λ¦¬λ¥Ό μ μ•½ν•  μ μμ–΄μ”.\n- μ••μ¶• ν•΄μ λ νμΌμ€ CPUλ¥Ό μ μ•½ν•  μ μμ–΄μ”.\n\n```js\ndf.write.parquet(\"output.parquet\");\n```\n\n## 3. μ¤ν‚¤λ§ μλ™ μ§€μ •ν•κΈ°\n\n```js\nfrom pyspark.sql.types import StructType, StructField, IntegerType, StringType\nschema = StructType([\n    StructField(\"id\", IntegerType(), True),\n    StructField(\"name\", StringType(), True),\n    StructField(\"age\", IntegerType(), True)\n])\ndf = spark.read.schema(schema).csv(\"path/to/file.csv\")\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## 4. μ΅°κΈ°μ— ν•„μ”ν• μ—΄ μ„ νƒν•κΈ°\n\nλ°μ΄ν„° μ²λ¦¬ νμ΄ν”„λΌμΈμ—μ„ λ©”λ¨λ¦¬ μ‚¬μ©λ‰μ„ μ¤„μ΄κΈ° μ„ν•΄ ν•„μ”ν• μ—΄λ§ λ―Έλ¦¬ μ„ νƒν•μ„Έμ”.\n\n```js\ndf.select(\"dept_name\", \"name\").filter(\"dept_id >= 102\").show();\ndf.select(\"dept_name\", \"name\")\n  .filter(df.dept_id >= 102)\n  .show();\n```\n\n```js\n#μ¶λ ¥\n+---------+----+\n|dept_name|name|\n+---------+----+\n|Marketing|Jane|\n|  Finance| Joe|\n+---------+----+\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## 5. ν•„ν„°λ¥Ό μ΅°μΈμ΄λ‚ μ§‘κ³„ μ „μ— λΉ λ¥΄κ² μ μ©ν•μ„Έμ”.\n\n```js\ndf.filter(\"age > 25\").join(df_other, \"id\").show();\n```\n\n## 6. ν° λ°μ΄ν„°μ…‹ μμ§‘ λ°©μ§€λ¥Ό μ„ν•΄ limit() μ‚¬μ©ν•κΈ°\n\n- ν° λ°μ΄ν„°μ…‹μ— collect()λ¥Ό μ‚¬μ©ν•μ§€ μ•λ„λ΅ μ£Όμν•μ—¬ λ©”λ¨λ¦¬ λ¶€μ΅± μ¤λ¥λ¥Ό λ°©μ§€ν•μ„Έμ”.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\ndf.filter(\"age > 30\").limit(100).collect();\n```\n\n## 7. Using spark.sql(): Catalyst optimizer for Complex Queries\n\n- Leverage Spark SQL for complex queries, which might be more readable and can benefit from the Catalyst optimizer.\n\n```js\ndf.createOrReplaceTempView(\"table\");\nspark.sql(\"SELECT id, sum(value) FROM table GROUP BY id\").show();\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## 8. RDD μ‚¬μ©: reduceByKeyλ¥Ό μ‚¬μ©ν• μ§‘κ³„\n\n- μ§‘κ³„ μ‘μ—…μ„ μν–‰ν•  λ• reduceByKeyλ¥Ό μ‚¬μ©ν•λ” κ²ƒμ΄ groupByλ³΄λ‹¤ λ” ν¨μ¨μ μΌ μ μμµλ‹λ‹¤.\n\n```python\nrdd = df.rdd.map(lambda x: (x[0], x[1]))\nreduced = rdd.reduceByKey(lambda a, b: a + b)\nreduced.toDF([\"key\", \"value\"]).show()\n```\n\n# μµμ ν™” II: νν‹°μ… μ—†μ΄ λ³‘λ ¬ν™” μ—†μ\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## 1. ν…μ΄λΈ” λ¶„ν• : partitionBy()\n\n- λ°μ΄ν„°ν”„λ μ„μ„ λ””μ¤ν¬μ— μ €μ¥ν•  λ• λΉ λ¥Έ ν›„μ† μ½κΈ°λ¥Ό μ„ν•΄ λ¶„ν• μ„ μ‚¬μ©ν•μ„Έμ”.\n\n```js\ndf.write.partitionBy(\"year\", \"month\").parquet(\"path/to/output\");\n```\n\n## 2. μ¤ν κ΄€λ¦¬λ¥Ό μ„ν• Salting ν‚¤\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- μ΅°μΈ μ—°μ‚° μ¤‘ λ°μ΄ν„° μ¤νκ°€ λ°μƒν•λ” κ²½μ°, ν•λ‚ μ΄μƒμ ν‚¤ κ°’μ΄ λ‹¤λ¥Έ κ²ƒλ“¤λ³΄λ‹¤ ν›¨μ”¬ λ” λ§μ€ λ°μ΄ν„°λ¥Ό κ°€μ§€κ³  μμ„ λ• λ°μƒν•©λ‹λ‹¤.\n- μλ¥Ό λ“¤μ–΄ \"customer_id\"λ¥Ό κΈ°μ¤€μΌλ΅ μ΅°μΈμ„ μν–‰ν•κ³ , λ€λ¶€λ¶„μ κ±°λκ°€ μ†μμ κ³ κ°μ— μ†ν•΄ μλ‹¤λ©΄ μ΄λ¬ν• μ†μμ ν‚¤λ” λ‹¤λ¥Έ ν‚¤λ“¤μ— λΉ„ν•΄ ν›¨μ”¬ λ§μ€ μ–‘μ λ°μ΄ν„°λ¥Ό κ°€μ§€κ³  μμ„ κ²ƒμ…λ‹λ‹¤. μ΄λ΅ μΈν•΄ μΌλ¶€ μ‘μ—…(ν° ν‚¤λ¥Ό μ²λ¦¬ν•λ” μ‘μ—…)μ΄ ν›¨μ”¬ λ” μ¤λ μ‹κ°„μ΄ κ±Έλ¦¬κ³  λ³‘λ© ν„μƒμ΄ λ°μƒν•  μ μμµλ‹λ‹¤.\n- μ΄ λ¬Έμ λ¥Ό ν•΄κ²°ν•λ” λ°©λ²•μ€ skewed λ°μ΄ν„°λ¥Ό κ΄€λ¦¬ν•κΈ° μ„ν•΄ ν‚¤μ— μ„μμ μ ‘λ‘μ‚¬λ¥Ό μ¶”κ°€ν•λ” κ²ƒμ…λ‹λ‹¤.\n\n```js\nfrom pyspark.sql.functions import monotonically_increasing_id, expr\ndf.withColumn(\"salted_key\",\n    expr(\"concat(name, '_', (monotonically_increasing_id() % 10))\")\n).groupBy(\"salted_key\").count().select(sum(\"count\")).show()\n```\n\n```js\n# κ²°κ³Ό\n+----------+\n|sum(count)|\n+----------+\n|         3|\n+----------+\n```\n\n- λ°μ΄ν„° λ΅λ”©μ κ· ν•μ„ μ–΄λ–»κ² λ§μ¶κΉμ”?\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\nfrom pyspark.sql.functions import monotonically_increasing_id, expr\ndf.withColumn(\"salted_key\",\n    expr(\"concat(name, '_', (monotonically_increasing_id() % 10))\")\n).groupBy(\"salted_key\").count().show()\n```\n\n```js\n# κ²°κ³Ό\n+----------+-----+\n|salted_key|count|\n+----------+-----+\n|   James_6|    1|\n|   James_4|    1|\n|   James_0|    1|\n+----------+-----+\n```\n\n# μµμ ν™” III: Shufflingμ„ μµμ†ν™”ν•λ” μ „λµ\n\n```js\n### Shuffling μµμ†ν™” μ „λµ\n- **Broadcast λ³€μ μ‚¬μ©**\n  - λ°μ΄ν„°μ…‹μ΄ μ‘μ€ κ²½μ° Shufflingμ„ ν”Όν•κΈ° μ„ν•΄ λ¨λ“  λ…Έλ“μ— λΈλ΅λ“μΊμ¤νΈν•©λ‹λ‹¤.\n- **νν‹°μ… νλ‹**\n  - μ‘μ—… λ° λ°μ΄ν„° κ·λ¨μ— λ§κ² νν‹°μ… μλ¥Ό μ΅°μ •ν•©λ‹λ‹¤.\n- **λ³€ν™ μµμ ν™”**\n  - Shufflingμ„ ν•„μ”λ΅ ν•λ” λ„“μ€ λ³€ν™μ„ μµμ†ν™”ν•κΈ° μ„ν•΄ μ‘μ—…μ„ κ³„νν•©λ‹λ‹¤.\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## μ„κΈ°\n\n- μ„κΈ°λ” λ°μ΄ν„°κ°€ μ„λ΅ λ‹¤λ¥Έ νν‹°μ…μ— μ¬λ¶„λ°°λλ” κ³Όμ •μ…λ‹λ‹¤.\n- μ΄λ” λ°μ΄ν„°λ¥Ό μ‹¤ν–‰μ κ°„μ΄λ‚ μ‹¬μ§€μ–΄ κΈ°κ³„ κ°„μ— μ΄λ™ν•λ” κ²ƒμ„ ν¬ν•¨ν•©λ‹λ‹¤.\n- λ„¤νΈμ›ν¬ λ° λ””μ¤ν¬ I/O μΈ΅λ©΄μ—μ„ κ°€μ¥ λΉ„μ©μ΄ λ§μ΄ λ“λ” μ‘μ—… μ¤‘ ν•λ‚μ…λ‹λ‹¤.\n\n## μ„κΈ°μ λ©μ \n\n- λ°μ΄ν„° μ¬λ¶„λ°°: μ΅°μΈ, κ·Έλ£Ήν™”, μ§‘κ³„ λ° μ¬λ¶„ν• κ³Ό κ°™μ€ λ„“μ€ λ³€ν™μ„ μ©μ΄ν•κ² ν•©λ‹λ‹¤.\n- λ¶€ν• λ¶„μ‚°: ν΄λ¬μ¤ν„° μ „μ²΄μ— λ°μ΄ν„°μ™€ μ‘μ—… λ¶€λ‹΄μ„ κ· λ“±ν•κ² λ¶„λ°°ν•©λ‹λ‹¤.\n- λ™μ‹μ„±: λ³‘λ ¬ μ²λ¦¬λ¥Ό κ°•ν™”ν•κ³  λ¦¬μ†μ¤ ν™μ©μ„ μµμ ν™”ν•©λ‹λ‹¤.\n- λ°μ΄ν„° μ§€μ—­μ„± μµμ ν™”: λ°μ΄ν„°κ°€ μ²λ¦¬λ  μ„μΉμ— κ°€κΉμ΄ μ΄λ™ν•λ„λ΅ ν•©λ‹λ‹¤. λ„¤νΈμ›ν¬ νΈλν”½μ„ μ¤„μ…λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## μ…”ν”λ§μ κ³ λ―Όκ±°λ¦¬\n\n- μμ› μ†λ¨κ°€ λ§μ: μƒλ‹Ήν• λ„¤νΈμ›ν¬ λ€μ—­ν­κ³Ό λ””μ¤ν¬ I/Oλ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.\n- μ§€μ—° μ‹κ°„ μ¦κ°€: νΉν λ€λ‰μ λ°μ΄ν„°μ…‹μΈ κ²½μ° μ²λ¦¬ μ‹κ°„μ΄ μƒλ‹Ήν μ¦κ°€ν•©λ‹λ‹¤.\n- λ³‘λ© ν„μƒ λ°μƒ κ°€λ¥μ„±: μ μ ν κ΄€λ¦¬λμ§€ μ•μΌλ©΄ μ „μ²΄ μ‹μ¤ν… μ„±λ¥μ„ λλ¦¬κ² λ§λ“¤ μ μμµλ‹λ‹¤.\n\n## 1. μ‘μ€ DataFrameκ³Ό ν° DataFrameμ„ μ΅°μΈν•  λ• λ°μ΄ν„° μ…”ν”λ§μ„ μµμ†ν™”ν•κΈ° μ„ν•΄ λΈλ΅λ“μΊμ¤νΈ μ΅°μΈμ„ μ‚¬μ©ν•©λ‹λ‹¤.\n\n```js\nfrom pyspark.sql import SparkSession\nfrom pyspark.sql.functions import broadcast\n\n# μ¤νν¬ μ„Έμ… μ΄κΈ°ν™”\nspark = SparkSession.builder.appName(\"λΈλ΅λ“μΊμ¤νΈ μ΅°μΈ μμ \").getOrCreate()\n# μ§μ›μ© ν° DataFrame μƒμ„±\ndata_employees = [(1, \"John\", 101),\n                  (2, \"Jane\", 102),\n                  (3, \"Joe\", 103),\n                  (4, \"Jill\", 101),\n                  # λ” λ§μ€ λ μ½”λ“κ°€ μλ‹¤κ³  κ°€μ •\n                  ]\ncolumns_employees = [\"emp_id\", \"name\", \"dept_id\"]\ndf_employees = spark.createDataFrame(data_employees, columns_employees)\n# λ¶€μ„μ© μ‘μ€ DataFrame μƒμ„±\ndata_departments = [(101, \"μΈμ‚¬\"),\n                    (102, \"λ§μΌ€ν…\"),\n                    (103, \"κΈμµ\"),\n                    (104, \"IT\"),\n                    (105, \"μ§€μ›\")\n                    ]\ncolumns_departments = [\"dept_id\", \"dept_name\"]\ndf_departments = spark.createDataFrame(data_departments, columns_departments)\n# λΈλ΅λ“μΊμ¤νΈ μ΅°μΈ μν–‰\ndf_joined = df_employees.join(broadcast(df_departments), \"dept_id\")\ndf_joined.show()\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\n#μ¶λ ¥\n+-------+------+----+---------+\n|dept_id|emp_id|  μ΄λ¦„|dept_name|\n+-------+------+-----+--------+\n|    101|     1| μ΅΄|       μΈμ‚¬|\n|    102|     2| μ μΈ|     λ§μΌ€ν…|\n|    103|     3| μ΅°|     κΈμµ|\n|    101|     4| μ§|       μΈμ‚¬|\n+-------+------+-----+--------+\n```\n\n- μ§μ› β€” μ§μ› μ„Έλ¶€ μ •λ³΄λ¥Ό λ‹΄μ€ μ‘μ€ λ°μ΄ν„°μ…‹μ…λ‹λ‹¤.\n- λ¶€μ„ β€” λ¶€μ„ μ„Έλ¶€ μ •λ³΄λ¥Ό λ‹΄μ€ ν° λ°μ΄ν„°μ…‹μ…λ‹λ‹¤.\n\nλ‘ λ°μ΄ν„°μ…‹μ„ λ¶€μ„ IDλ¥Ό κΈ°μ¤€μΌλ΅ μ΅°μΈν•λ, λ¶€μ„ λ°μ΄ν„°μ…‹μ„ ν¬κ² μ„μ§€ μ•λ„λ΅ ν•λ” κ²ƒμ΄ λ©ν‘μ…λ‹λ‹¤.\n\n## 2. νν‹°μ… μ΅°μ •: λ³‘λ ¬μ„± μ¦κ°€λ¥Ό μ„ν• λ‹¤μ‹ λ¶„ν• \n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- λ°μ΄ν„° ν”„λ μ„μ νν‹°μ…μ„ μ¬λ¶„ν• ν•μ—¬ λ³‘λ ¬μ„±μ„ λ†’μ΄κ±°λ‚ μ…”ν” λΉ„μ©μ„ μ¤„μΌ μ μμµλ‹λ‹¤.\n- κ·Έλ¬λ‚ μ—¬μ „ν μ „μ²΄ μ…”ν”μ„ μ λ°ν•  μ μμµλ‹λ‹¤.\n\n```js\n# λ³‘λ ¬μ„±μ„ λ†’μ΄κΈ° μ„ν• μ¬λ¶„ν•  μμ \ndf = spark.createDataFrame([\n  (1, 'foo'), (2, 'bar'), (3, 'baz'), (4, 'qux')\n], [\"id\", \"value\"])\ndf_repartitioned = df.repartition(10)  # νν‹°μ… μ μ¦κ°€\n```\n\n## 3. νν‹°μ… νλ‹: νν‹°μ… κ°μ†λ¥Ό μ„ν• Coalesce\n\n- μ „μ²΄ μ…”ν” ν”Όν•κΈ°: coalesceλ” λ€κ·λ¨ λ°μ΄ν„° μ„ΈνΈλ¥Ό ν•„ν„°λ§ν• ν›„ νν‹°μ… μλ¥Ό μ¤„μ΄κ³  μ‹¶μ„ λ• μ…”ν” λΉ„μ©μ„ ν”Όν•΄μ•Ό ν•  λ• μµμ μ…λ‹λ‹¤.\n- μ „ν•μ μΈ μ‚¬μ© μ‚¬λ΅€: λ§μ€ νν‹°μ…μ΄ λ¶€λ¶„μ μΌλ΅ μ±„μ›μ§€κ±°λ‚ λΉ„μ–΄μλ” μƒνƒλ΅ λ‚¨μ„ μ μλ” λ€κ·λ¨ DataFrameμ„ ν•„ν„°λ§ν• ν›„ μ‚¬μ©λ©λ‹λ‹¤. coalesceλ” λ„¤νΈμ›ν¬ μ¤λ²„ν—¤λ“λ¥Ό μ¤„μ΄κ³  λΉ„μ© ν¨μ¨μ μΌλ΅ λ¦¬μ†μ¤λ¥Ό κ΄€λ¦¬ν•λ” λ° λ„μ›€μ΄ λ©λ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\n# λ€κ·λ¨ μ…”ν”λ§ μ—†μ΄ νν‹°μ… μλ¥Ό μ¤„μ΄κΈ° μ„ν• μ½”μ–΄μ¤ μμ‹\ndf_filtered = df.filter(\"id > 1\")\ndf_coalesced = df_filtered.coalesce(2)  # νν‹°μ… μ μ¤„μ΄κΈ°\n\n```\n\n## 4. λ³€ν™ μµμ ν™”λ¥Ό ν†µν•΄ λ°μ΄ν„° μ…”ν”λ§ μµμ†ν™”ν•κΈ°\n\n- μµμ ν™”λ λ³€ν™μ„ ν†µν•΄ Apache Sparkμ—μ„ μ…”ν”λ§μ„ μµμ†ν™”ν•λ” κ²ƒμ€ Spark μ• ν”λ¦¬μΌ€μ΄μ…μ μ„±λ¥μ„ ν–¥μƒμ‹ν‚¤λ” μ¤‘μ”ν• μΈ΅λ©΄μ…λ‹λ‹¤.\n- λ³€ν™ μµμ ν™”λ” λ°μ΄ν„° μ²λ¦¬ μ‘μ—…μ„ κµ¬μ΅°ν™”ν•μ—¬ ν΄λ¬μ¤ν„° μ „μ²΄μ—μ„ λ¶ν•„μ”ν• λ°μ΄ν„° μ΄λ™μ„ μ¤„μ΄λ” κ²ƒμ„ ν¬ν•¨ν•λ©°, μ΄λ” λ¦¬μ†μ¤λ¥Ό λ§μ΄ μ‚¬μ©ν•κ³  μ‹¤ν–‰ μ†λ„λ¥Ό λ¦μ¶ μ μμµλ‹λ‹¤.\n- μ΄λ¥Ό λ‹¬μ„±ν•λ” λ°©λ²•μ„ λ³΄μ—¬μ£Όλ” λ‡ κ°€μ§€ μ „λµκ³Ό μ½”λ“ μμ λ” λ‹¤μκ³Ό κ°™μµλ‹λ‹¤:\n\n## 4β€“1. μΌμ° ν•„ν„°λ§ν•κΈ°\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- λ°μ΄ν„° μ²λ¦¬ νμ΄ν”„λΌμΈμ—μ„ μ΅°μΈ λλ” μ§‘κ³„μ™€ κ°™μ€ ν›„μ† μ‘μ—…μ—μ„ λ‚μ¤‘μ— μ„μ–΄μ•Ό ν•λ” λ°μ΄ν„° μ–‘μ„ μ¤„μ΄κΈ° μ„ν•΄ ν•„ν„°λ¥Ό κ°€λ¥ν• ν• λΉ¨λ¦¬ μ μ©ν•μ„Έμ”.\n\n```python\nfrom pyspark.sql import SparkSession\n\n# μ¤νν¬ μ„Έμ… μ΄κΈ°ν™”\nspark = SparkSession.builder.appName(\"Shuffling μµμ†ν™”\").getOrCreate()\n\n# DataFrame μƒμ„±\ndata = [(\"John\", \"κΈμµ\", 3000), (\"Jane\", \"λ§μΌ€ν…\", 4000), (\"Joe\", \"λ§μΌ€ν…\", 2800), (\"Jill\", \"κΈμµ\", 3900)]\ncolumns = [\"μ΄λ¦„\", \"λ¶€μ„\", \"μ—°λ΄‰\"]\ndf = spark.createDataFrame(data, schema=columns)\n\n# λ„“μ€ λ³€ν™ μ „μ— λ―Έλ¦¬ ν•„ν„°λ§\nfiltered_df = df.filter(df[\"μ—°λ΄‰\"] > 3000)\n\n# μ΄μ  μ§‘κ³„ μν–‰\naggregated_df = filtered_df.groupBy(\"λ¶€μ„\").avg(\"μ—°λ΄‰\")\naggregated_df.show()\n```\n\n```python\n# μ¶λ ¥\n+----------+-----------+\n|λ¶€μ„      |avg(μ—°λ΄‰)  |\n+----------+-----------+\n| λ§μΌ€ν…  |     4000.0|\n| κΈμµ    |     3900.0|\n+----------+-----------+\n```\n\n## 4-2. κ°€λ¥ν• κ²½μ° RDD/λ„“μ€ λ³€ν™ μ‚¬μ©ν•κΈ°\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- μΆμ€ λ³€ν™, μλ¥Ό λ“¤μ–΄ `map` λ° `filter`μ™€ κ°™μ€ μ‘μ—…μ€ κ°λ³„ νν‹°μ…μ—μ„ μ‘λ™ν•λ©° λ°μ΄ν„° μ…”ν”μ„ ν•„μ”λ΅ν•μ§€ μ•μµλ‹λ‹¤. κ°€λ¥ν• κ²½μ° μ΄λ¬ν• μ‘μ—…μ„ λ„“μ€ λ³€ν™ λ€μ‹  μ‚¬μ©ν•μ‹­μ‹μ¤.\n\n```js\n# μ…”ν”μ„ λ°μƒμ‹ν‚¤μ§€ μ•κ³  μƒλ΅μ΄ μ—΄μ„ λ§λ“¤κΈ° μ„ν•΄ mapμ„ μ‚¬μ©ν•©λ‹λ‹¤\nrdd = df.rdd.map(lambda x: (x.Name, x.Salary * 1.1))\nupdated_salaries_df = spark.createDataFrame(\n  rdd, schema=[\"Name\", \"UpdatedSalary\"]\n)\nupdated_salaries_df.show()\n```\n\n```js\n# κ²°κ³Ό\n+----+------------------+\n|Name|     UpdatedSalary|\n+----+------------------+\n|John|3300.0000000000005|\n|Jane|            4400.0|\n| Joe|3080.0000000000005|\n|Jill|            4290.0|\n+----+------------------+\n```\n\n## 4-3. Boardcasting joinμΌλ΅ λ¶ν•„μ”ν• μ…”ν”μ„ ν”Όν•μ„Έμ”\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- μ΅°μΈ μ‘μ—…μ‹, ν• λ°μ΄ν„°μ…‹μ΄ λ‹¤λ¥Έ λ°μ΄ν„°μ…‹λ³΄λ‹¤ ν„μ €ν μ‘μ„ λ• λΈλ΅λ“μΊμ¤νΈ μ΅°μΈμ„ μ‚¬μ©ν•μ—¬ ν° λ°μ΄ν„°μ…‹μ„ μ…”ν”λ§ν•μ§€ μ•λ„λ΅ ν•©λ‹λ‹¤.\n\n```js\nfrom pyspark.sql.functions import broadcast\n# df_smallμ΄ df_largeλ³΄λ‹¤ ν›¨μ”¬ μ‘λ‹¤κ³  κ°€μ •ν•©λ‹λ‹¤\ndf_small = spark.createDataFrame(\n  [(1, \"HR\"), (2, \"λ§μΌ€ν…\")], [\"id\", \"λ¶€μ„\"]\n)\ndf_large = spark.createDataFrame(\n  [(1, \"μ΅΄\"), (2, \"μ μΈ\"), (1, \"μ΅°\"), (2, \"μ§\")],\n  [\"λ¶€μ„ID\", \"μ΄λ¦„\"]\n)\n# μ΅°μΈ μµμ ν™”λ¥Ό μ„ν•΄ μ‘μ€ DataFrameμ„ λΈλ΅λ“μΊμ¤νΈν•©λ‹λ‹¤\noptimized_join_df = df_large.join(broadcast(df_small), df_large.λ¶€μ„ID == df_small.id)\noptimized_join_df.show()\n```\n\n```js\n# κ²°κ³Ό\n\n+------+----+---+------+\n|λ¶€μ„ID|μ΄λ¦„| id|  λ¶€μ„|\n+------+----+---+------+\n|     1| μ΅΄|  1|   HR|\n|     2|μ μΈ|  2|λ§μΌ€ν…|\n|     1| μ΅°|  1|   HR|\n|     2| μ§|  2|λ§μΌ€ν…|\n+------+----+---+------+\n```\n\n## 4-4. μ „λµμ μΌλ΅ νν‹°μ… λ‚λ„κΈ°\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- λ§μ•½ λ„“μ€ λ³€ν™μ„ μ‚¬μ©ν•΄μ•Ό ν•λ‹¤λ©΄, λ‚μ¤‘μ— μ΅°μΈ λλ” μ§‘κ³„ν•  ν‚¤λ¥Ό κΈ°λ°μΌλ΅ λ°μ΄ν„°λ¥Ό νν‹°μ…μΌλ΅ λ‚λ„μ„Έμ”. μ΄ μ „λµμ„ μ‚¬μ©ν•λ©΄ λ™μΌν• ν‚¤λ¥Ό κ°€μ§„ ν–‰μ„ λ™μΌν• νν‹°μ…μ— ν•¨κ» λ‘μ–΄ μ…”ν”λ§μ„ μ¤„μΌ μ μμµλ‹λ‹¤.\n\n```js\n# μ…”ν”λ§ μµμ†ν™”λ¥Ό μ„ν•΄ μ§‘κ³„ μ „μ— νν‹°μ… μ¬λ¶„λ°°\nrepartitioned_df = df.repartition(\"Department\")\naggregated_df = repartitioned_df.groupBy(\"Department\").avg(\"Salary\")\naggregated_df.show()\n```\n\n```js\n# κ²°κ³Ό\n+----------+-----------+\n|Department|avg(Salary)|\n+----------+-----------+\n|   Finance|     3450.0|\n| Marketing|     3400.0|\n+----------+-----------+\n```\n\n# μ„±λ¥ λ¨λ‹ν„°λ§ λ° μ„Έλ¶€ μ΅°μ •\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## 1. λ©”λ¨λ¦¬ κ΄€λ¦¬\n\n```js\nspark.conf.set(β€spark.executor.memoryβ€, β€4gβ€)\nspark.conf.set(β€spark.driver.memoryβ€, β€2gβ€)\n```\n\n## 2. μ‘μ—… λ° μ¤ν…μ΄μ§€ λ¨λ‹ν„°λ§\n\n- Spark UIλ¥Ό μ‚¬μ©ν•μ—¬ μ‘μ© ν”„λ΅κ·Έλ¨ λ‚΄μ μ‘μ—… λ° μ¤ν…μ΄μ§€μ μ„±λ¥μ„ λ¨λ‹ν„°λ§ν•©λ‹λ‹¤.\n- Spark UIμ— μ•΅μ„Έμ¤ν•λ ¤λ©΄ λ‹¤μμΌλ΅ μ΄λ™ν•μ‹­μ‹μ¤: http://[your-spark-driver-host]:4040\n- Executor λ©”νΈλ¦­ λ¶„μ„: κ° executorμ λ©”νΈλ¦­μ„ λ¨λ‹ν„°λ§ν•μ—¬ λ©”λ¨λ¦¬ μ‚¬μ©, λ””μ¤ν¬ μ¤ν”Όλ¦΄ λ° κ°€λΉ„μ§€ μμ§‘μ— λ€ν• ν†µμ°°μ„ μ–»μ„ μ μμµλ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\n# μμ„Έν• μ‹¤ν–‰μ μ§€ν‘λ¥Ό μμ§‘ν•λ„λ΅ Sparkλ¥Ό κµ¬μ„±ν•©λ‹λ‹¤\nspark.conf.set(\"spark.executor.metrics.pollingInterval\", \"5000\")\n```\n\n## 3. SQL μ„±λ¥ νλ‹\n\n- SQL μ‹¤ν–‰ κ³„νμ„ μ΄ν•΄ν•κ³  μµμ ν™”ν•κΈ° μ„ν•΄ `EXPLAIN` κ³„νμ„ ν™μ©ν•μ„Έμ”.\n\n```js\ndf.explain(β€formattedβ€)\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\n== λ¬Όλ¦¬μ μΈ κ³„ν ==\n* κΈ°μ΅΄ RDD μ¤μΊ” (1)\n\n\n(1) κΈ°μ΅΄ RDD μ¤μΊ” [μ½”λ“ μƒμ„± ID : 1]\nμ¶λ ¥ [3]: [μ΄λ¦„ #4628, λ¶€μ„ #4629, κΈ‰μ—¬ #4630L]\nμΈμ: [μ΄λ¦„ #4628, λ¶€μ„ #4629, κΈ‰μ—¬ #4630L],\n applySchemaToPythonRDDμ— μλ” MapPartitionsRDD[693]μ—μ„\n                       at <μ• μ μ—†μ>:0, ExistingRDD, UnknownPartitioning(0)\n```\n\n## 4. λ™μ  ν• λ‹Ή\n\n- μ›ν¬λ΅λ“μ— λ”°λΌ μ¤νν¬κ°€ μ‹¤ν–‰μ μλ¥Ό λ™μ μΌλ΅ μ΅°μ •ν•  μ μλ„λ΅ λ™μ  ν• λ‹Ήμ„ ν™μ„±ν™”ν•©λ‹λ‹¤.\n\n```js\nspark.conf.set(\"spark.dynamicAllocation.enabled\", \"true\");\nspark.conf.set(\"spark.dynamicAllocation.minExecutors\", \"1\");\nspark.conf.set(\"spark.dynamicAllocation.maxExecutors\", \"20\");\nspark.conf.set(\"spark.dynamicAllocation.executorIdleTimeout\", \"60s\");\nspark.conf.set(\"spark.shuffle.service.enabled\", \"true\");\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## 5. λ°μ΄ν„° μ§€μ—­μ„±\n\n- μ €μ¥ λ° μ²λ¦¬ μ¥μΉ κ°„μ— λ°μ΄ν„°κ°€ μ΄λ™ν•΄μ•Ό ν•λ” κ±°λ¦¬λ¥Ό μµμ†ν™”ν•μ—¬ λ°μ΄ν„° μ§€μ—­μ„±μ„ μµμ ν™”ν•©λ‹λ‹¤.\n\n```js\nspark.conf.set(\"spark.locality.wait\", \"300ms\");\n```\n\n## 6. Garbage Collection Tuning\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\n- κ°€λΉ„μ§€ μ»¬λ ‰ν„° μ„¤μ •μ„ μ΅°μ •ν•μ—¬ λ©”λ¨λ¦¬ κ΄€λ¦¬λ¥Ό μµμ ν™”ν•κ³  μΌμ‹ μ¤‘μ§€ μ‹κ°„μ„ μ¤„μΌ μ μμµλ‹λ‹¤.\n\n# λ” λ‚μ€ μ§€μ—° μ‹κ°„μ„ μ„ν•΄ G1GC μ‚¬μ©\nspark.conf.set(\"spark.executor.extraJavaOptions\", \"-XX:+UseG1GC\")\n# μ§§μ€ μΌμ‹ μ¤‘μ§€λ¥Ό μ„ν•΄ λ…μ‹μ μΈ GC μ„¤μ • κµ¬μ„±\nspark.conf.set(\"spark.executor.extraJavaOptions\", \"-XX:MaxGCPauseMillis=100\")\n\n## 7. λ°μ΄ν„° μ§λ ¬ν™” μ„Έλ¶€ μ΅°μ •\n\n- λ°μ΄ν„° μ§λ ¬ν™”λ” λ¶„μ‚° μ• ν”λ¦¬μΌ€μ΄μ…μ μ„±λ¥μ— μ¤‘μ”ν• μ—­ν• μ„ ν•©λ‹λ‹¤. Sparkλ” λ‘ κ°€μ§€ μ§λ ¬ν™” λ„κµ¬λ¥Ό μ§€μ›ν•©λ‹λ‹¤:\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\n# λ” λ‚μ€ μ„±λ¥κ³Ό ν¨μ¨μ„±μ„ μ„ν•΄ Kryo μ§λ ¬ν™” ν”„λ΅κ·Έλ¨ μ‚¬μ©\nspark.conf.set(\"spark.serializer\", \"org.apache.spark.serializer.KryoSerializer\")\nspark.conf.set(\"spark.kryo.registrationRequired\", \"true\")\n\n# Kryoμ™€ μ‚¬μ©μ μ •μ ν΄λμ¤ λ“±λ΅\nclass MyClass:\n    def __init__(self, name, id):\n        self.name = name\n        self.id = id\nspark.sparkContext.getConf().registerKryoClasses([MyClass])\n```\n\n## 8. λ„¤νΈμ›ν¬ κµ¬μ„± μµμ ν™”\n\n- λ„¤νΈμ›ν¬ μ„¤μ •μ€ νΉν λ€κ·λ¨ λ°°ν¬μ—μ„ μ„±λ¥μ— μ¤‘λ€ν• μν–¥μ„ λ―ΈμΉ  μ μμµλ‹λ‹¤:\n\n```js\n# λ„¤νΈμ›ν¬ νƒ€μ„μ•„μ›ƒ μ„¤μ •μ„ μ΅°μ •ν•μ—¬ λ€κ·λ¨ ν΄λ¬μ¤ν„°μ—μ„ λ¶ν•„μ”ν• μ‘μ—… μ‹¤ν¨λ¥Ό ν”Όν•μ‹­μ‹μ¤\nspark.conf.set(\"spark.network.timeout\", \"800s\")\nspark.conf.set(\"spark.core.connection.ack.wait.timeout\", \"600s\")\n```\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n## 9. κ³ κΈ‰ Spark SQL νλ‹\n\n- Catalyst μµν‹°λ§μ΄μ € λ° Tungsten μ‹¤ν–‰ μ—”μ§„μ„ ν™μ©ν•λ©΄ Spark SQLμ μ„±λ¥μ„ ν–¥μƒμ‹ν‚¬ μ μμµλ‹λ‹¤:\n\n```js\n# μ§λ ¬ μ²λ¦¬λ¥Ό μ„ν• μ „μ²΄ λ‹¨κ³„ μ½”λ“ μƒμ„± ν™μ„±ν™”\nspark.conf.set(\"spark.sql.codegen.wholeStage\", \"true\")\n\n# μ΅°μΈ μµμ ν™”μ— μ μ©ν• ν…μ΄λΈ” λΈλ΅λ“μΊμ¤νΈλ¥Ό μ„ν• μµλ€ λ°”μ΄νΈ μ μ¦κ°€\nspark.conf.set(\"spark.sql.autoBroadcastJoinThreshold\", \"10485760\")  # 10 MB\n```\n\n## 10. λ°μ΄ν„° νν‹°μ…”λ‹ μµμ ν™”\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\nλ°μ΄ν„° λ¶„λ°°λ¥Ό μ„Έλ°€ν•κ² μ΅°μ •ν•μ—¬ μΏΌλ¦¬ μ„±λ¥μ„ ν–¥μƒμ‹ν‚¤κ³  μ…”ν” μ¤λ²„ν—¤λ“λ¥Ό μ¤„μΌ μ μμ–΄μ”:\n\n```js\n# λ°μ΄ν„° ν¬κΈ° λ° μ‘μ—…μ„ κΈ°μ¤€μΌλ΅ μλ™μΌλ΅ μ…”ν” νν‹°μ… μ μ„¤μ •\n\nspark.conf.set(\"spark.sql.shuffle.partitions\", \"200\")\n# ν΄λ¬μ¤ν„° ν¬κΈ° λ° λ°μ΄ν„°μ— λ§κ² μ΅°μ •ν•μ„Έμ”\n```\n\n## 11. μ μ‘ν• μΏΌλ¦¬ μ‹¤ν–‰ ν™μ„±ν™”\n\n- μ μ‘ν• μΏΌλ¦¬ μ‹¤ν–‰ (AQE)λ” μ‹¤ν–‰ μ¤‘μ— μΏΌλ¦¬ κ³„νμ„ μ΅°μ •ν•¨μΌλ΅μ¨ Spark SQL μΏΌλ¦¬λ¥Ό λ” λΉ λ¥΄κ³  λ°μ΄ν„° μ¤μΏ  λ° κΈ°νƒ€ μ΄μμ— λ” κ°•κ±΄ν•κ² λ§λ“λ” κΈ°λ¥μ΄μ—μ”.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n```js\n# μΏΌλ¦¬ μ‹¤ν–‰μ„ μ μ‘μ μΌλ΅ μ΅°μ •ν•λ” AQEλ¥Ό ν™μ„±ν™”ν•©λ‹λ‹¤. μ΄λ” κµ¬μ„±μ„ κ°„μ†ν™”ν•κ³  μ„±λ¥μ„ ν–¥μƒμ‹ν‚¬ μ μμµλ‹λ‹¤.\nspark.conf.set(\"spark.sql.adaptive.enabled\", \"true\")\n```\n\n- AQEλ” μ‹¤μ  λ°μ΄ν„°μ— μ μ‘ν•΄ μ…”ν” νν‹°μ…”λ‹μ„ μ΅°μ •ν•κ³ , λ¶κ· ν• μ΅°μΈμ„ μ²λ¦¬ν•λ©°, μ •λ ¬μ„ μµμ ν™”ν•  μ μμµλ‹λ‹¤.\n\n## 12. λ©”λ¨λ¦¬ κ΄€λ¦¬ μ§€μ •\n\n- μ μ ν• λ©”λ¨λ¦¬ κ΄€λ¦¬λ” λ©”λ¨λ¦¬ μ§‘μ•½μ μΈ μ‘μ—…μ—μ„ νΉν ν¨κ³Όμ μΈ μ„±λ¥ κ°μ„ μ„ μ„ν•΄ μ¤νμ΄μ§€λ¥Ό λ°©μ§€ν•  μ μμµλ‹λ‹¤.\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n# RDD μ €μ¥μ†μ— μμ•½λ λ©”λ¨λ¦¬ λ¶„μλ¥Ό κµ¬μ„±ν•©λ‹λ‹¤.\n\nspark.conf.set(β€spark.memory.fractionβ€, β€0.6β€)\nspark.conf.set(β€spark.memory.storageFractionβ€, β€0.5β€)\n\nμ΄λ¬ν• μ„¤μ •μ€ μ‹¤ν–‰ λ©”λ¨λ¦¬μ™€ μ €μ¥μ† λ©”λ¨λ¦¬ μ‚¬μ΄μ κ· ν•μ„ λ§μ¶”μ–΄ μ…”ν” λ° μΊμ‹± μ¤‘ λ””μ¤ν¬ μ¤νμΌμ„ μ¤„μ΄λ” λ° λ„μ›€μ΄ λ©λ‹λ‹¤.\n\n# μ½μ–΄ μ£Όμ…”μ„ κ°μ‚¬ν•©λ‹λ‹¤\n\nμ΄ κΈ€μ΄ λ§μμ— λ“μ‹λ©΄:\n\n<!-- TIL μν‰ -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-4877378276818686\"\n     data-ad-slot=\"1549334788\"\n     data-ad-format=\"auto\"\n     data-full-width-responsive=\"true\"></ins>\n\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n- π‘ μ—¬λ¬ λ² λ°•μλ΅ μ§€μ§€λ¥Ό λ³΄μ—¬μ£Όμ„Έμ”!\n- μ΄ μ•λ‚΄μ„λ¥Ό μΉκµ¬λ“¤κ³Ό κ³µμ ν•΄λ„ μΆ‹μ•„μ”.\n- μ—¬λ¬λ¶„μ ν”Όλ“λ°±μ€ μ†μ¤‘ν•©λ‹λ‹¤. μ•μΌλ΅μ κΈ€μ— μκ°μ„ μ£Όκ³  μ•λ‚΄ν•΄ μ¤λ‹λ‹¤.\n- λλ” λ©”μ‹μ§€λ¥Ό λ‚¨κ²¨μ£Όμ„Έμ”: https://www.linkedin.com/in/kevinchwong\n","ogImage":{"url":"/assets/img/2024-07-09-IntensiveSparkOptimizationCourse_0.png"},"coverImage":"/TIL/assets/img/2024-07-09-IntensiveSparkOptimizationCourse_0.png","tag":["Tech"],"readingTime":43}],"page":"2","totalPageCount":19,"totalPageGroupCount":1,"lastPageGroup":19,"currentPageGroup":0},"__N_SSG":true}